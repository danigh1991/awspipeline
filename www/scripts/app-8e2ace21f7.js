function getPeityDirective(t){"use strict";return{restrict:"AE",scope:{data:"=",options:"="},link:function(e,a){var n=$(a);"string"==typeof e.data&&(e.data=JSON.parse(e.data)),console.log("chart"),console.log(e.data),n.text(e.data.join(",")),n.peity(t,e.options),e.$watchCollection("data",function(t,e){e!=t&&("string"==typeof t&&(t=JSON.parse(t)),n.text(t.join(",")),n.change())})}}}!function(){"use strict";angular.module("app",["angular-loading-bar","angular-confirm","ADM-dateTimePicker","ngAnimate","ngSanitize","ngTable","pascalprecht.translate","toastr","ui.bootstrap","ui.router","ui.select","ui.toggle","ui.utils.masks","ui.validate","ui.mask","duScroll","angular.backtop","ngMaterial","chart.js","auth","app.users","app.sample","app.directive","app.credit-supply-resource","app.contract-type","app.contract-code","app.investment-action","app.directive-approval-place","app.economic-section","app.province","app.employee","app.credit-supply-resource","app.directive-approval-place","app.economic-section","app.contract","app.assurance-type","app.monitoring","app.trace","app.conflict","app.checkList","app.conflict","app.permissions","app.roles","app.trace","app.branch","app.baseInfo","app.report","app.usersReport","app.loginlog","app.manage-user-guide","app.help","app.plan-type","app.isic","app.contract-filter","app.graphical-report"])}(),function(){"use strict";function t(){return{templateUrl:"app/main/sidebar/sidebar-search/sidebar-search.html",restrict:"E",replace:!0,scope:{query:"="},controller:e,controllerAs:"vm",bindToController:!0}}function e(){}angular.module("app").directive("sidebarSearch",t)}(),function(){"use strict";function t(){return{bindToController:!0,controller:e,controllerAs:"vm",templateUrl:"app/main/header/header-notification/header-notification.html",restrict:"E",replace:!0,scope:{}}}function e(t,e){function a(e){t.use(e)}function n(){e.logout()}var i=this;i.Languages=[{key:"fa_IR",title:"APP.LANG.FA_IR"},{key:"en_US",title:"APP.LANG.EN_US"}],i.user=e.getIdentity(),i.changeLanguage=a,i.logout=n}e.$inject=["$translate","Principal"],angular.module("app").directive("headerNotification",t)}(),function(){"use strict";angular.module("app.monitoring",[])}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(s.title+" activated",n),o()}function r(){t.dismiss()}function o(){var t=[];1===n.step.id?t=[0,2,3]:t.push(n.step.id),s.items=[],t.forEach(function(t){a.getDetails(n.action,n.user.username,t,n.fromDate,n.toDate,n.provinceId).then(function(t){s.items=s.items.concat(t)})})}var s=this;s.close=r,s.scoreItem=n,s.title="Score Detail Controller",i()}t.$inject=["$uibModalInstance","$log","UsersReportService","scoreItem"],angular.module("app.monitoring").controller("ScoreDetailController",t)}(),function(){"use strict";angular.module("app.trace",[])}(),function(){"use strict";function t(t,e,a,n,i){function r(){console.log(l.title+" activated"),l.isModal=null!==t,l.tableParams=new e({},{counts:[],getData:o})}function o(){return l.traceId?i.getProcessLogsTrace(l.traceId).then(function(t){return l.processLogs=t?[].concat(t):[],l.processLogs}):void 0}function s(){t.dismiss()}var l=this;l.monitor={},l.processLogs=[],l.traceId=a.id,l.close=s,l.title="Trace Flow Controller",l.actuator=a.user,l.creator=a.creator,l.createDate=a.createDate,r()}t.$inject=["$uibModalInstance","NgTableParams","$stateParams","$log","TraceService"],angular.module("app.trace").controller("TraceFlowController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){t.log(T.title),t.log(l),T.isModal=!!a,T.isModal?(T.monitoring=l.monitoring,T.userMonitorings=T.monitoring.userMonitorings,T.tempUserMonitorings=angular.copy(T.userMonitorings),T.state=T.monitoring.currentStep.name):b(),A()}function u(t){return T.signUrl=T.host+"/lmsUserManagement/user/"+t.username+"/getSign",T.signUrl}function p(t){T.toggleEdit[t]=!T.toggleEdit[t],T.userMonitorings[t]=angular.copy(T.tempUserMonitorings[t])}function g(){var t=!1;if(T.newUserMonitoring.roles.forEach(function(e){"OBSERVER"===e.role&&(t=!0)}),!t)return void c.toast("error","User should have OBSERVER role");var e={expertUsername:T.newUserMonitoring.username};i.addUserMonitoring(T.monitoringId,e).then(function(t){b(),T.newUserMonitoring={},c.toast("success","APP.MESSAGES.SUCCESS"),I=!0},function(){T.newUserMonitoring={}})}function v(t,e){var a={expertUsername:t.lmsUser.username};i.deleteUserMonitoring(T.monitoringId,a).then(function(t){b(),I=!0,c.toast("success","APP.MESSAGES.SUCCESS")})}function h(t,e){if(!c.compareObjects(T.userMonitorings[e],T.tempUserMonitorings[e])){var a={userMonitoringId:t.id};t.date=t.date?n("sDate")(t.date):null,i.UpdateUserMonitoringInMonitoring(T.monitoringId,t,a).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),T.toggleEdit[e]=!T.toggleEdit[e],T.tempUserMonitorings[e]=angular.copy(T.userMonitorings[e]),b(T.monitoringId),I=!0},function(){c.toast("error","APP.MESSAGES.FAIL","edit userMonitoring error")})}}function f(t){function e(t){return T.users=t.content||[],T.users}"STAFF"===T.monitoring.organizationLevel?null:T.monitoring.contract.province.id;return s.searchUsers({query:t}).then(e)}function A(){T.loading=!0,s.getByRole("TEAM_HEAD").then(function(t){t.forEach(function(t){T.teamHeadsMap[t.username]=t}),T.teamHeads=t?t:[],T.loading=!1})}function b(){return i.getMonitoringById(T.monitoringId).then(function(t){return T.monitoring=t?t:{},T.userMonitorings=T.monitoring.userMonitorings,T.tempUserMonitorings=angular.copy(T.userMonitorings),T.state=t.currentStep.name,T.monitoring})}function P(){a.close(I)}function E(){T.newTeamHead&&T.newTeamHead.username&&i.changeTeamHead(T.monitoring.id,T.newTeamHead.username).then(function(){T.monitoring.teamHead=angular.copy(T.newTeamHead),T.newTeamHead=!1,T.editHead=!1,c.toast("success")},function(t){403!=t.status&&c.toast("error","Changing the team head is not allowed in this state.")})}var T=this,I=!1;T.monitoring={},T.newUserMonitoring={},T.monitoringId=l.monitoringId,T.userMonitorings=[],T.tempUserMonitorings=[],T.allUsers=[],T.observers=[],T.title="Monitoring > User Monitoring Controller",T.toggleEdit=[],T.fulldate={},T.teamHeadsMap={},T.teamHeads=[{name:"در حال بارگذاری ..."}],T.province={},T.provinces=[],T.host=e,T.close=P,T.cancelEdit=p,T.editUserMonitoring=h,T.deleteUserMonitoring=v,T.addUserMonitoring=g,T.getSignUrl=u,T.refreshUsers=f,T.changeTeamHead=E,T.groupFinder=s.groupTitle,m()}t.$inject=["$log","host","$uibModalInstance","$filter","MonitoringService","ProvinceService","$scope","UserService","$stateParams","Util","Principal"],angular.module("app.monitoring").controller("UserMonitoringsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){e.log(E.title),p(!0).then(b),m()}function m(){return t.getTracesByMonitoring(E.monitoringId).then(function(t){return console.log("vm.traces",t.content),E.traces=t?t.content:[],o.identity().then(function(t){E.traces.forEach(function(e){e.canEdit=e.createUsername===t.username,T[e.id]=angular.copy(e)})}),E.loading=!1,E.traces})}function u(){E.trace={}}function p(t){return r.$parent.vm.getMonitoring(t).then(function(t){return E.monitoring=t?t:{},E.monitoring})}function g(){if(E.trace.alertDate&&E.trace.user&&E.trace.description){E.loading=!0,E.trace.forCommitmentConvert=E.fromConvertDebit?E.fromConvertDebit:null,E.trace.monitoring={id:E.monitoring.id};var e=angular.copy(E.trace);t.createTrace(e).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),m(),E.cancelAdd()},function(){E.loading=!1})}}function v(e){e.alertDate&&e.user&&e.description&&(E.loading=!0,E.editing=!0,e.monitoring={id:E.monitoring.id},e.forCommitmentConvert=E.fromConvertDebit?E.fromConvertDebit:null,t.updateTrace(e.id,e).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),e.editing=!1,E.editing=!1,E.loading=!1},function(){E.loading=!1}))}function h(t){for(var e=0;e<E.traces.length;e++)E.traces[e].id===t.id&&(E.traces[e]=T[t.id],E.traces[e].editing=!1);E.loading=!1}function f(e){s().then(function(){E.loading=!0,t.deleteTrace(e.id).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),m()})})}function A(t){function e(t){return E.users=t.content||[],E.users}"STAFF"===E.monitoring.organizationLevel?null:E.monitoring.contract.province.id;return i.searchUsers({query:t}).then(e)}function b(){o.identity().then(function(t){E.canAdd=!0})}function P(t){var e=new Date;e.setDate(e.getDate()+t),E.trace.alertDate=a("sDate")(a("jeDate")(e))}var E=this;E.trace={},E.allUsers=[];var T={};E.loading=!1,E.monitoringId=n.monitoringId,E.fromConvertDebit="fromConvertDebit"==n.step,E.addTrace=g,E.cancelAdd=u,E.updateTrace=v,E.cancelUpdate=h,E.deleteTrace=f,E.refreshUsers=A,E.setDate=P,E.steps=t.getStepsSync,E.groupFinder=i.groupTitle,E.openAttachmentModal=r.$parent.vm.openAttachmentModal,E.next=r.$parent.vm.next,E.previous=r.$parent.vm.previous,E.title="Monitoring Trace Controller",d(),r.$on("next_trace",function(t,e){console.log("on next_trace event",e),r.$emit("next",!0)}),r.$on("previous_trace",function(t,e){console.log("on previous_trace event",e),r.$emit("previous",!0)})}t.$inject=["TraceService","$log","$filter","$stateParams","UserService","$scope","Principal","$confirm","NgTableParams","Util"],angular.module("app.monitoring").controller("MonitoringTraceController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){a.log(m.title),d(!0)}function l(){return i.getInvestmentCostMonitoring(m.monitoringId).then(function(t){return m.progresses=t?t:[],m.sumDirectiveBasedAmount=0,m.sumPaymentToDirective=0,m.sumPaymentToDirectivePercent=0,m.sumInvoiceToDirective=0,m.sumInvoiceToDirectivePercent=0,m.sumProgressRate=0,m.progresses.forEach(function(t){t.invoiceBasedAmount=t.invoiceBasedAmount?t.invoiceBasedAmount:0,t.paymentBasedAmount=t.paymentBasedAmount?t.paymentBasedAmount:0,t.invoiceBasedToDirectiveBasedAmountRate=t.invoiceBasedToDirectiveBasedAmountRate?100*t.invoiceBasedToDirectiveBasedAmountRate:0,t.paymentBasedToDirectiveBasedAmountRate=t.paymentBasedToDirectiveBasedAmountRate?100*t.paymentBasedToDirectiveBasedAmountRate:0,t.progressRate=t.progressRate?t.progressRate:0,m.sumDirectiveBasedAmount+=t.directiveBasedAmount,m.sumPaymentToDirective+=t.paymentBasedAmount?t.paymentBasedAmount:0,m.sumInvoiceToDirective+=t.invoiceBasedAmount?t.invoiceBasedAmount:0,m.sumProgressRate+=(t.progressRate?t.progressRate/100:0)*t.directiveBasedAmount,t.invoiceBasedToDirectiveBasedAmountRate=Math.round(t.invoiceBasedToDirectiveBasedAmountRate),t.paymentBasedToDirectiveBasedAmountRate=Math.round(t.paymentBasedToDirectiveBasedAmountRate)}),m.sumProgressRate=Math.floor(m.sumProgressRate/m.sumDirectiveBasedAmount*100),m.sumPaymentToDirectivePercent=Math.floor(m.sumPaymentToDirective/m.sumDirectiveBasedAmount*100),m.sumInvoiceToDirectivePercent=Math.floor(m.sumInvoiceToDirective/m.sumDirectiveBasedAmount*100),m.progresses})}function c(t){m.toggleEdit[t]=!m.toggleEdit[t],m.progress={},m.tableParams.reload()}function d(t){r.$parent.vm.getAllowedActions(t).then(function(t){m.allowedAction=t})}var m=this;m.monitoring={},m.progresses=[],m.progress={},m.toggleEdit=[],m.tableParams=new n({},{counts:[],getData:l}),m.sumDirectiveBasedAmount=0,m.sumPaymentToDirectivePercent=0,m.sumInvoiceToDirectivePercent=0,m.sumProgressRate=0,m.title="Monitoring progress List Controller Active",m.monitoringId=e.monitoringId,m.cancelEdit=c,m.openAttachmentModal=r.$parent.vm.openAttachmentModal,m.next=r.$parent.vm.next,m.previous=r.$parent.vm.previous,s(),t.$on("stateChanged",function(){r.$parent&&d(!1)}),t.$on("next_progress",function(t,e){console.log("on next_progress event",e),r.$emit("next",!0)}),t.$on("previous_progress",function(t,e){console.log("on previous_progress event",e),r.$emit("previous",!0)})}t.$inject=["$rootScope","$stateParams","$log","NgTableParams","MonitoringService","$scope","Util"],angular.module("app.monitoring").controller("MonitoringProgressController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){n.log(p.title),l(!0),m(!0)}function l(e){return t.$parent.vm.getMonitoring(e).then(function(t){return p.monitoring=t?t:{},p.directive=p.monitoring.directive,p.monitoring.directive.dirNumber?(c(),p.monitoring):void 0})}function c(){p.monitoringPreConditions=p.monitoring.dirConditions,p.monitoring.monitoringConditions.forEach(function(t){p.monitoringPreConditions.forEach(function(e){t.dirCondition.id===e.id&&(e.reply=t.reply,e.originalId=t.id,e.description=t.description)})}),p.preConditions=[],p.monitoringPreConditions.forEach(function(t){var e={dirCondition:t,monitoring:{id:p.monitoringId},id:t.originalId,reply:t.reply,description:t.description};p.preConditions.push(e)})}function d(){function t(){o.toast("success"),l(!1)}for(var e=[],a=0;a<p.preConditions.length;a++)p.preConditions[a].reply&&(p.preConditions[a].dirCondition.monitoring={id:p.monitoringId},e.push(p.preConditions[a]));return r.SetConditionInMonitoring(p.monitoringId,e).then(t)}function m(e){t.$parent.vm.getAllowedActions(e).then(function(t){p.allowedAction=t})}function u(t){var e={monitoringConditionId:t.dirCondition.originalId};r.deleteConditionFromMonitoring(p.monitoring.id,e).then(function(){o.toast("success"),l(!1)},function(){o.toast("error")})}var p=this;p.monitoring={},p.monitoringPreConditions=[],p.monitoringId=a.monitoringId,p.directive={},p.preConditions=[],p.replys=[{value:"INCOMPLETED",name:"دارای نقص"},{value:"FAILED",name:"خیر"},{value:"DONE",name:"بله"}],p.title="Monitoring PreConditionsController active",p.setConditionInMonitoring=d,p.deletePrecondition=u,p.openAttachmentModal=t.$parent.vm.openAttachmentModal,p.next=t.$parent.vm.next,p.previous=t.$parent.vm.previous,s(),e.$on("stateChanged",function(){t.$parent&&m(!1)}),e.$on("next_preConditions",function(e,a){console.log("on next_preConditions event",a),a?d().then(function(){t.$emit("next",!0)}):t.$emit("next",!0)}),e.$on("previous_preConditions",function(e,a){console.log("on previous_preConditions event",a),a?d().then(function(){t.$emit("previous",!0)}):t.$emit("previous",!0)})}t.$inject=["$scope","$rootScope","$stateParams","$log","DirectiveService","MonitoringService","Util"],angular.module("app.monitoring").controller("MonitoringPreConditionsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m){function u(){n.log(C.title),v(),S(!0)}function p(){console.log("vm.payments before sort = ",C.payments),C.payments.reverse(),console.log("vm.payments = after sort",C.payments)}function g(){return s.$parent.vm.getMonitoring(O).then(function(t){O=!1,C.monitoring=t,C.payments=t?t.monitoringPayments:[],C.sumBankSharedChequeAmount=0,C.sumApplicantSharedChequeAmount=0,C.payments.forEach(function(t){C.sumBankSharedChequeAmount+=t.bankSharedChequeAmount,C.sumApplicantSharedChequeAmount+=t.applicantSharedChequeAmount}),C.sumTotalAmount=C.sumBankSharedChequeAmount+C.sumApplicantSharedChequeAmount,E(),h(),C.payments.forEach(function(t){t.key=t.investmentAction.id});i("orderBy")(C.payments,"key",!1);return C.payments=i("orderBy")(C.payments,"key",!1),C.payments})}function v(){return c.getAllInvestmentActions().then(function(t){return C.investmentActions=t?t:[],C.investmentActions})}function h(){var t={monitoringId:C.monitoringId};return o.getPaymentConflict(t).then(function(t){C.conflicts=t?t:[],C.dirPaymentPerParts.forEach(function(t){for(var e=!0,a=0;a<C.conflicts.length;a++)C.conflicts[a].investmentAction.id===t.investmentAction.id&&(e=!1);e&&C.conflicts.push({chequeCount:0,directiveBasedBankShared:t.bankShareAmount,directiveBasedApplicantShared:t.applicantShareAmount,investmentAction:t.investmentAction,paymentBasedApplicantShared:0,paymentBasedBankShared:0,paymentStepCount:t.paymentStepCount})});for(var e=0;e<C.conflicts.length;e++){var a=C.conflicts[e].paymentBasedBankShared?C.conflicts[e].paymentBasedBankShared:0,n=C.conflicts[e].directiveBasedBankShared?C.conflicts[e].directiveBasedBankShared:0,i=C.conflicts[e].paymentBasedApplicantShared?C.conflicts[e].paymentBasedApplicantShared:0,r=C.conflicts[e].directiveBasedApplicantShared?C.conflicts[e].directiveBasedApplicantShared:0;a===n?C.bankQouta[e]="GreenBG":a>n?C.bankQouta[e]="OrangeBG":n>a&&(C.bankQouta[e]="RedBG "),i===r?C.applicantQouta[e]="GreenBG":i>r?C.applicantQouta[e]="GreenBG":r>i&&(C.applicantQouta[e]="RedBG"),C.conflicts[e].paymentStepCount>C.conflicts[e].chequeCount?C.countQouta[e]="RedBG":C.countQouta[e]="GreenBG"}return C.sumDirectiveBasedBankShared=0,C.sumPaymentBasedBankShared=0,C.sumDirectiveBasedApplicantShared=0,C.sumPaymentBasedApplicantShared=0,C.sumPaymentStepCount=0,C.sumChequeCount=0,C.conflicts.forEach(function(t){C.sumDirectiveBasedBankShared+=t.directiveBasedBankShared,C.sumPaymentBasedBankShared+=t.paymentBasedBankShared,C.sumDirectiveBasedApplicantShared+=t.directiveBasedApplicantShared,C.sumPaymentBasedApplicantShared+=t.paymentBasedApplicantShared,C.sumPaymentStepCount+=t.paymentStepCount,C.sumChequeCount+=t.chequeCount}),C.conflicts})}function f(t){t.$invalid||l.AddPaymentToMonitoring(C.monitoringId,C.payment).then(function(){m.toast("success"),C.payment={},C.tableParams.reload(),h()})}function A(t,e,a){var n={monitoringPaymentId:t};e.monitoring={monitoring:C.monitoring.id},l.updatePaymentInMonitoring(C.monitoringId,e,n).then(function(){m.toast("success"),P(a)})}function b(t){e().then(function(){if(t){var e={monitoringPaymentId:t};l.deletePaymentFromMonitoring(C.monitoringId,e).then(function(){m.toast("success"),C.tableParams.reload(),h()})}})}function P(t){C.toggleEdit[t]=!C.toggleEdit[t],C.tableParams.reload(),h()}function E(){return C.dirPaymentPerParts=C.monitoring.dirPayments}function T(t,e,a,n,i){13!==t.keyCode||t.shiftKey||(a?A(a,n,i):f(e))}function I(t){if("ISSUER"!==t.payee){var e=["117","113","118","119"],a=C.monitoring.contract.number.split("-")[1];return e.indexOf(a)<0}}function S(t){s.$parent.vm.getAllowedActions(t).then(function(t){C.allowedAction=t})}var C=this;C.payment={},C.payments=[],C.conflicts=[],C.investmentActions=[],C.toggleEdit=[];var O=!0;C.tableParams=new r({},{counts:[],getData:g}),C.payees=[{key:"APPLICANT",caption:"متقاضی"},{key:"ISSUER",caption:"صادر کننده"},{key:"ETC",caption:"سایر"}],C.title="Monitoring Payment List Controller Active",C.bankQouta=[],C.applicantQouta=[],C.countQouta=[],C.sumBankSharedChequeAmount=0,C.sumApplicantSharedChequeAmount=0,C.sumTotalAmount=0,C.sumDirectiveBasedBankShared=0,C.sumPaymentBasedBankShared=0,C.sumDirectiveBasedApplicantShared=0,C.sumPaymentBasedApplicantShared=0,C.sumPaymentStepCount=0,C.sumChequeCount=0,C.showSortInvestmentAction=!0,C.monitoringId=a.monitoringId,C.addPayment=f,C.updatePayment=A,C.deletePaymentFromMonitoring=b,C.cancelEdit=P,C.sort=p,C.keyPressed=T,C.payeeConflict=I,C.openAttachmentModal=s.$parent.vm.openAttachmentModal,C.next=s.$parent.vm.next,C.previous=s.$parent.vm.previous,u(),t.$on("stateChanged",function(){s.$parent&&S(!1)}),t.$on("next_payments",function(t,e){console.log("on next_payments event",e),s.$emit("next",!0)}),t.$on("previous_payments",function(t,e){console.log("on previous_payments event",e),s.$emit("previous",!0)})}t.$inject=["$rootScope","$confirm","$stateParams","$log","$filter","NgTableParams","ConflictService","$scope","MonitoringService","InvestmentActionService","DirectiveService","Util"],angular.module("app.monitoring").controller("MonitoringPaymentsController",t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){n.log(l.title+" activated"),l.isModal=null!==t,l.tableParams=new e({},{counts:[],getData:o})}function o(){return l.monitoringId?i.getProcessLogs(l.monitoringId).then(function(t){console.log(t),l.processLogs=t?[].concat(t.processLogs):[],l.actuator=t.actuator,l.creator=t.creator,l.createDate=t.createDate;var e=[];for(l.processLogs.forEach(function(t,a){"editing"===t.transition.name&&a+1<l.processLogs.length&&"editing"===l.processLogs[a+1].transition.name&&e.push(a)});e.length;){var a=e.pop();l.processLogs.splice(a,1)}var n=[];for(l.processLogs.forEach(function(t,e){"calculating"===t.transition.name&&e+1<l.processLogs.length&&"calculating"===l.processLogs[e+1].transition.name&&n.push(e)});n.length;){var i=n.pop();l.processLogs.splice(i,1)}return l.processLogs}):void 0}function s(){t.dismiss()}var l=this;l.monitor={},l.processLogs=[],l.monitoringId=a.monitoringId,l.close=s,l.title="Monitoring Flow Controller",l.showAll=!1,r()}t.$inject=["$uibModalInstance","NgTableParams","$stateParams","$log","MonitoringService"],angular.module("app.monitoring").controller("MonitoringFlowController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m){function u(){a.log(T.title),v(),A(!0).then(function(){h()})}function p(){A(!0)}function g(t){if(t&&t.$ivalid||!(T.monitoring.monitoringDate&&T.monitoring.payerBranch&&T.monitoring.branchChiefInMonitoringTime&&T.monitoring.planType&&T.monitoring.activenessStatus&&T.monitoring.activitySubject&&T.monitoring.projectLocationAddress&&T.monitoring.description))return T.fillTheFields=!0,l.toast("error","APP.MESSAGES.FILL_REQUIRED_FIELDS"),{then:function(t,e){console.log(typeof e),e&&"function"==typeof e&&e()}};T.monitoring.userMonitorings[0]={username:T.monitoring.userMonitorings[0].username},T.monitoring.userMonitorings[1]=T.monitoring.userMonitorings[1]?{username:T.monitoring.userMonitorings[1].username}:null,T.monitoring.contract={id:T.monitoring.contract.id,number:T.monitoring.contract.number},T.monitoring.monitoringConflicts=[];var e={};try{e={payerBranch:{id:T.monitoring.payerBranch.id},activitySubject:T.monitoring.activitySubject,planType:T.monitoring.planType,description:T.monitoring.description,branchChiefInMonitoringTime:{id:T.monitoring.branchChiefInMonitoringTime.id},activenessStatus:T.monitoring.activenessStatus,economicSection:T.monitoring.economicSection,projectLocationAddress:T.monitoring.projectLocationAddress,monitoringDate:T.monitoring.monitoringDate?T.monitoring.monitoringDate:null}}catch(a){}return i.updateMonitoring(T.monitoringId,e).then(function(){l.toast("success","APP.MESSAGES.SUCCESS"),A(!1),T.savingStatus=2},function(){})}function v(){return o.getAllEconomicSections().then(function(t){return T.economicSections=t?t:[],T.economicSections})}function h(){return r.getAllBranchesOfProvince(T.monitoring.contract.province.id).then(function(t){return T.branches=t?t:[],T.branches})}function f(t){return r.getAllCitiesOfProvince(t).then(function(t){return T.citis=t?t:[],T.citis})}function A(t){return T.loading=!0,d.$parent?d.$parent.vm.getMonitoring(t).then(function(t){return T.monitoring=t?t:{},T.monitoring.province&&f(T.monitoring.province.id),P(!0),b(!0),T.loading=!1,T.monitoring},function(){T.loading=!1}):void 0}function b(t){if(d.$parent){var e=d.$parent.vm.getDirective(t);return e&&e.then?e.then(function(t){!T.monitoring.monitoringDate&&t&&(T.monitoring.activitySubject=t.dirActivitySubject,T.monitoring.projectLocationAddress=t.dirProjectLocationAddress)}):{then:function(){console.log("Directive was not resolved!")}}}}function P(t){d.$parent&&d.$parent.vm.getAllowedActions(t).then(function(t){T.allowedAction=t})}function E(t){if(!t||""===t)return[];var e={query:t.toString()};m.searchEmployees(e,{}).then(function(t){T.allEmployees=t.content})}var T=this;T.monitoring={},T.tempMonitoring={},T.monitorings=[],T.monitoringId=s.monitoringId,T.provinces=[],T.citis=[],T.branches=[],T.economicSections=[],T.allUsers=[],T.savingStatus=0,T.allEmployees=[],T.title="Monitoring Details Controller",T.planTypes=l.baseInfo("standardPlanTypes"),T.activeness=i.getActivenessStatusesSync(),T.fillTheFields=!1,T.telRegex=c,T.cancelEdit=p,T.editMonitoring=g,T.getAllCityByProvinceId=f,T.refreshEmployees=E,T.openAttachmentModal=d.$parent.vm.openAttachmentModal,T.next=d.$parent.vm.next,T.previous=d.$parent.vm.previous,u(),n.$on("stateChanged",function(){d.$parent&&P(!1)}),n.$on("directiveChanged",function(){d.$parent&&b(!0)}),n.$on("next_monitoring-details",function(t,e){console.log("on next_monitoring-details event",e),e?g().then(function(){d.$emit("next",!0)},function(){d.$emit("next",!1)}):d.$emit("next",!0)}),n.$on("previous_monitoring-details",function(t,e){console.log("on previous_monitoring-details event",e),e?g().then(function(){d.$emit("previous",!0)}):d.$emit("previous",!0)})}t.$inject=["$filter","UserService","$log","$rootScope","MonitoringService","ProvinceService","EconomicSectionService","$stateParams","Util","telRegex","$scope","EmployeeService"],angular.module("app.monitoring").controller("MonitoringDetailsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){a.log(v.title),v.date=moment(new Date).format("YYYY/MM/DD"),o.identity().then(function(t){v.isProvince="PROVINCE"===t.level,v.isProvince?(v.province=t.province,v.provinces=[v.province],u()):p()})}function l(){v.province={},v.expert={},v.coexpert={},v.date=moment(new Date).format("YYYY/MM/DD"),v.daysNumber=""}function c(){var t={firstExpertUsername:v.expert.username,secondExpertUsername:v.coexpert.username};i.getMonitoringByProvinceAndExperts(v.province.id,t).then(function(t){v.monitorings=t,v.monitorings.forEach(function(t){v.selectedMonitorings[t.id]=!0})})}function d(){var t={firstExpertUsername:v.expert.username};i.getMonitoringByProvinceAndExpert(v.province.id,t).then(function(t){v.monitorings=t,console.log(t),v.monitorings.forEach(function(t){v.selectedMonitorings[t.id]=!0})})}function m(){var t={provinceId:v.province.id};i.getCoExpertByProvince(v.expert.username,t).then(function(t){v.coexperts=t,d()})}function u(){i.getExpertByProvince(v.province.id).then(function(t){v.expert={},v.coexpert={},v.experts=t})}function p(){return r.getAllProvinces().then(function(t){return v.provinces=t?t:[],v.provinces})}function g(){var t=window.open("","PRINT","height=400,width=600"),e="print-section",a=document.getElementById(e);return t.document.write("<html><head><title>"+document.title+"</title>"),t.document.write("</head><body >"),t.document.write(a.innerHTML),t.document.write("</body></html>"),t.document.getElementsByName("header").innerText="hey",t.document.close(),t.focus(),!0}var v=this;v.title="Mission Announcement Controller Activated",v.province={},v.provinces=[],v.expert={},v.experts=[],v.coexpert={},v.coexperts=[],v.selectedMonitorings=[],v.monitorings=[],v.getExpertByProvince=u,v.getCoExpertByProvince=m,v.getMonitoringByProvinceAndExperts=c,v.cancelSearch=l,v.print=g,s()}t.$inject=["$filter","UserService","$log","$rootScope","MonitoringService","ProvinceService","Principal"],angular.module("app.monitoring").controller("MissionAnnouncementController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){n.log(I.title),E(!0),m(!0)}function m(t){return s.$parent.vm.getMonitoring(t).then(function(t){I.monitoring=t?t:{},I.monitoringLicenses=t?t.monitoringLicenses:[],h(),I.tableParams=new r({},{counts:[],getData:u})})}function u(){return I.dirLicenses=I.monitoring.dirLicenses,I.dirLicenses.forEach(function(t){var e=!1;if(I.monitoringLicenses.forEach(function(a){a.dirLicense&&a.dirLicense.id===t.id&&(e=!0)}),!e){var a={monitoring:I.monitoring,dirLicense:t,comment:""};I.monitoringLicenses.push(a)}}),I.monitoringLicenses}function p(t,e){if(console.log(t.issuingDate>t.expireDate,t.issuingDate,t.expireDate),t.issuingDate>t.expireDate)return void c.toast("error","Issuing date should be before expiration date");
// license.issuingDate = license.issuingDate ? $filter('sDate')(license.issuingDate) : null;
// license.expireDate = license.expireDate ? $filter('sDate')(license.expireDate) : null;
var a={dirLicenseId:t.dirLicense.id};t.monitoring={id:t.monitoring.id},l.setLicense(I.monitoringId,t,a).then(function(){c.toast("success"),b(e)},function(){t={name:t.name}})}function g(){l.addMonitoringLicenseItem(I.monitoringId,I.item).then(function(){c.toast("success"),m(),I.item={}},function(){})}function v(t){l.updateMonitoringLicenseItem(I.monitoringId,t).then(function(){c.toast("success"),P(t)},function(){})}function h(){var t={monitoringId:I.monitoringId};o.getDirLicenseConflicts(t).then(function(t){I.conflicts=t?t:[],I.monitoringLicenses.forEach(function(t){var e=!1;I.conflicts.forEach(function(a){t.dirLicense&&a.id===t.dirLicense.id&&(t.hasConflict=a.conflict,e=!0)}),e||(t.hasConflict="")})})}function f(t){e().then(function(){if(t){var e={monitoringLicenseId:t};l.unsetLicense(I.monitoringId,e).then(function(){c.toast("success"),m()})}})}function A(t){e().then(function(){t&&l.deleteMonitoringLicenseItem(I.monitoringId,t).then(function(){c.toast("success"),m()})})}function b(t){I.toggleEdit[t]=!I.toggleEdit[t],m(),h()}function P(t){t.editing=!1,m()}function E(t){s.$parent.vm.getAllowedActions(t).then(function(t){I.allowedAction=t})}function T(t,e,a){13!==t.keyCode||t.shiftKey||p(e,a)}var I=this;I.monitoringId=a.monitoringId,I.monitoring={},I.monitoringLicenses=[],I.dirLicenses=[],I.conflicts=[],I.license={},I.title="MonitoringLicenseController Activates ",I.trueFalseList=[{id:!0,value:"بله"},{id:!1,value:"خیر"}],I.updateLicense=p,I.deleteLicenseFromMonitoring=f,I.deleteLicenseItem=A,I.cancelEdit=b,I.cancelEditItem=P,I.updateLicenseItem=v,I.addLicenseItem=g,I.keyPressed=T,I.openAttachmentModal=s.$parent.vm.openAttachmentModal,I.next=s.$parent.vm.next,I.previous=s.$parent.vm.previous,d(),t.$on("stateChanged",function(){s.$parent&&E(!1)}),t.$on("next_license",function(t,e){console.log("on next_license event",e),s.$emit("next",!0)}),t.$on("previous_license",function(t,e){console.log("on previous_license event",e),s.$emit("previous",!0)})}t.$inject=["$rootScope","$confirm","$stateParams","$log","$filter","NgTableParams","ConflictService","$scope","MonitoringService","Util"],angular.module("app.monitoring").controller("MonitoringLicenseController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){a.log(h.title),h.loading=!0,d(!0).then(l),v(!0)}function l(){function t(t){return e++,t&&t.content&&t.content.length&&t.content.forEach(function(t){h.monitorings.map(function(t){return t.id}).indexOf(t.id)<0&&h.monitorings.push(t)}),console.log(1===e,h.monitoring.directive.dirParentDirectiveNumber),1===e&&h.monitoring.directive.dirParentDirectiveNumber?void(h.loading=!1):(c(),void(h.loading=!1))}var e=0;n.searchMonitoring({directiveNumber:h.monitoring.directive.dirNumber}).then(t),console.log("vm.monitoring.directive.dirParentDirectiveNumber",h.monitoring.directive.dirParentDirectiveNumber),h.monitoring.directive.dirParentDirectiveNumber&&n.searchMonitoring({directiveNumber:h.monitoring.directive.dirParentDirectiveNumber}).then(t)}function c(){console.log("calc",h.monitorings),h.dimensions=[],h.monitorings.forEach(function(t){void 0!==t.id&&t.latitude&&t.longitude&&p(t)})}function d(t){return r.$parent.vm.getMonitoring(t).then(function(t){return h.monitoring=t?t:{},h.monitoring.latitude=h.monitoring.latitude||51,h.monitoring.longitude=h.monitoring.longitude||35,h.monitoring})}function m(t){console.log(r);var e={latitude:h.monitoring.latitude,longitude:h.monitoring.longitude,locationDescription:h.monitoring.locationDescription};return n.setLocationInMonitoring(h.monitoringId,e).then(function(){o.toast("success","APP.MESSAGES.SUCCESS"),t||d(!1).then(c),h.dimension={}})}function u(){d(!1)}function p(t){function a(t){var a=t?t:{};if(a.latitude&&a.longitude){var n={lat:h.monitoring.latitude,lng:h.monitoring.longitude},i={lat:a.latitude,lng:a.longitude},r=g(n,i),o="";h.monitoring.userMonitorings.forEach(function(t){o+=t.lmsUser.name+" , "}),o=o.substr(0,o.length-2);var s=h.monitoring.monitoringDate?e("jDate")(h.monitoring.monitoringDate):"ندارد",l="ناظران : ["+o+"] , تاریخ نظارت : "+s+" , توضیحات : "+h.monitoring.locationDescription+" , طول : "+h.monitoring.longitude+" , عرض : "+h.monitoring.latitude;return h.dimensions.push({monitoring:a,distance:r/1e3,info:l}),r/1e3}}h.dimension=null,a(t)}function g(t,e){var a=6378137,n=f(e.lat-t.lat),i=f(e.lng-t.lng),r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(f(t.lat))*Math.cos(f(e.lat))*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),s=a*o;return s}function v(t){r.$parent.vm.getAllowedActions(t).then(function(t){h.allowedAction=t})}var h=this;h.monitoring={},h.monitorings=[],h.monitoringId=i.monitoringId,h.dimensions=[],h.title="Monitoring Lat Long Controller",h.updateLatLong=m,h.cancelEdit=u,h.getDistance=g,h.openAttachmentModal=r.$parent.vm.openAttachmentModal,h.next=r.$parent.vm.next,h.previous=r.$parent.vm.previous,s();var f=function(t){return t*Math.PI/180};t.$on("stateChanged",function(){r.$parent&&v(!1)}),t.$on("next_lat-long",function(t,e){console.log("on next_lat-long event",e),e&&r.latLongForm&&r.latLongForm.$valid?m(!0).then(function(){r.$emit("next",!0)}):(d(),r.$emit("next",!0))}),t.$on("previous_lat-long",function(t,e){console.log("on previous_lat-long event",e),e&&r.latLongForm&&r.latLongForm.$valid?m(!0).then(function(){r.$emit("previous",!0)}):(d(),r.$emit("previous",!0))})}t.$inject=["$rootScope","$filter","$log","MonitoringService","$stateParams","$scope","Util"],angular.module("app.monitoring").controller("MonitoringLatLongController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u){function p(){a.log(N.title),h(),T(!0)}function g(){N.invoices.reverse()}function v(){return console.log("getMonitoringById",R),o.$parent.vm.getMonitoring(R).then(function(t){R=!1,N.monitoring=t,N.invoices=t?t.monitoringInvoices:[],N.sumPrice=0,N.sumInvoiceBasedCount=0,N.sumMonitoringBasedCount=0,N.invoices.forEach(function(t){N.sumPrice+=t.price,N.sumInvoiceBasedCount+=t.invoiceBasedCount,N.sumMonitoringBasedCount+=t.monitoringBasedCount}),I(),f(),N.invoices.forEach(function(t){t.key=t.investmentAction.id});var e=n("orderBy")(N.invoices,"key",!1);return N.invoices=[],N.invoices=angular.copy(e),N.invoices=n("orderBy")(N.invoices,"key",!1),N.invoices})}function h(){return d.getAllInvestmentActions().then(function(t){return N.investmentActions=t?t:[],N.investmentActions})}function f(){var t={monitoringId:N.monitoringId};return r.getInvoiceConflict(t).then(function(t){return N.conflicts=t?t:[],N.dirPaymentPerParts.forEach(function(t){for(var e=!0,a=0;a<N.conflicts.length;a++)N.conflicts[a].investmentAction.id===t.investmentAction.id&&(e=!1);e&&N.conflicts.push({chequeCount:0,directiveBased:t.bankShareAmount+t.applicantShareAmount,investmentAction:t.investmentAction,monitoringBased:0,invoiceBased:0})}),N.sumDirectiveBased=0,N.sumInvoiceBased=0,N.sumMonitoringBased=0,N.conflicts.forEach(function(t){N.sumDirectiveBased+=t.directiveBased,N.sumInvoiceBased+=t.invoiceBased,N.sumMonitoringBased+=t.monitoringBased}),N.conflicts})}function A(t){return y?void 0:(y=!0,N.tempInvoiceDate=N.invoice.date,t?t.monitoring={id:N.monitoring.id}:N.invoice.monitoring={id:N.monitoring.id},l.AddInvoiceToMonitoring(N.monitoringId,t?t:N.invoice).then(function(){return u.toast("success"),N.invoice={},N.tableParams.reload(),f(),y=!1,angular.element(document.querySelector("#number")).focus(),!0},function(){return N.invoice.date=N.tempInvoiceDate,u.toast("error","Please fill all the necessary fields correctly"),y=!1,!1}))}function b(t,e,a){function n(t){console.log("MonitoringInvoiceController::editSuccess"),t?(u.toast("success"),E(a)):void 0===t&&(N.toggleEdit[a]=!N.toggleEdit[a],f()),v()}function i(t){console.log("editFailure",t),u.toast("error")}t?(e.monitoring={id:N.monitoring.id},l.updateInvoiceInMonitoring(N.monitoringId,e,t).then(n,i)):console.log(A(e).then(n,i))}function P(e,a){t().then(function(){if(e){var t={monitoringInvoiceId:e};l.deleteInvoiceFromMonitoring(N.monitoringId,t).then(function(){u.toast("success"),N.tableParams.reload(),f()})}else N.invoices.splice(a,1)})}function E(t){N.toggleEdit[t]=!N.toggleEdit[t],N.tableParams.reload(),f()}function T(t){o.$parent.vm.getAllowedActions(t).then(function(t){N.allowedAction=t})}function I(){return N.dirPaymentPerParts=N.monitoring.dirPayments}function S(t){if(N.investmentActions){for(var e in N.investmentActions)if(e.id===t&&"CURRENT"===e.type)return!0;return!1}}function C(){var t=c.open({animation:!0,templateUrl:"app/components/monitoring/invoice/batch-insert-modal.html",controller:"BatchInsertModalController",controllerAs:"modalVm",size:"lg",windowClass:"batch-insert",resolve:{investmentAction:function(){return N.investmentActions},invoices:function(){return N.invoices},monitoringId:function(){return N.monitoringId}}});t.result.then(function(t){t.forEach(function(t){t.monitoring={id:N.monitoring.id}}),console.log(t),l.BatchInsertInvoiceToMonitoring(N.monitoringId,t).then(function(){u.toast("success"),N.invoice={},N.tableParams.reload(),f(),y=!1,angular.element(document.querySelector("#number")).focus()},function(){N.invoice.date=N.tempInvoiceDate,u.toast("error","Please fill all the necessary fields correctly"),y=!1})},function(){})}function O(t,e,a,n){13!==t.keyCode||t.shiftKey||(e?b(e,a,n):A())}var N=this;N.monitoring={},N.invoices=[],N.invoice={},N.conflicts=[],N.investmentActions=[],N.toggleEdit=[];var R=!0;N.tableParams=new i({},{counts:[],getData:v}),N.unitList=[{title:"﷼",value:"RIAL"},{title:"$",value:"DOLLAR"}],N.toggleAddEdit=!0,N.sumPrice=0,N.sumDirectiveBased=0,N.sumInvoiceBased=0,N.sumMonitoringBased=0,N.sumInvoiceBasedCount=0,N.sumMonitoringBasedCount=0,N.showSortInvestmentAction=!0;var y=!1;N.tempInvoices={},N.today=new Date,N.title="Monitoring Invoice List Controller Active",N.monitoringId=e.monitoringId,N.addInvoice=A,N.deleteInvoiceFromMonitoring=P,N.updateInvoice=b,N.cancelEdit=E,N.sort=g,N.isCurrent=S,N.keyPressed=O,N.batchInsert=C,N.openAttachmentModal=o.$parent.vm.openAttachmentModal,N.next=o.$parent.vm.next,N.previous=o.$parent.vm.previous,p(),s.$on("stateChanged",function(){o.$parent&&T(!1)}),s.$on("next_invoice",function(t,e){console.log("on next_invoice event",e),o.$emit("next",!0)}),s.$on("previous_invoice",function(t,e){console.log("on previous_invoice event",e),o.$emit("previous",!0)})}t.$inject=["$confirm","$stateParams","$log","$filter","NgTableParams","ConflictService","$scope","$rootScope","MonitoringService","$uibModal","InvestmentActionService","DirectiveService","Util"],angular.module("app.monitoring").controller("MonitoringInvoiceController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){t.log("BatchInsertModalController activated",o)}function d(){e.close(A.invoices)}function m(){e.dismiss(A.invoices)}function u(){var t=angular.copy(A.invoice);A.invoices.push(t),A.invoice={investmentAction:o.length?angular.copy(o[o.length-1].investmentAction):null}}function p(t,e){t?g(t,e):(A.invoices.splice(e,1),A.invoice={investmentAction:o.length?angular.copy(o[o.length-1].investmentAction):null})}function g(t,e){l().then(function(){t&&i.deleteInvoiceFromMonitoring(s,{monitoringInvoiceId:t}).then(function(){n.toast("success"),p(null,e)})})}function v(t,e,a){console.log(t),13===t.keyCode?void 0!==a?h(t,t.shiftKey?-1:1):u():38===t.keyCode?(t.ctrlKey||"number"!=t.currentTarget.type)&&(t.preventDefault(),h(t,-1)):40===t.keyCode?(t.ctrlKey||"number"!=t.currentTarget.type)&&(t.preventDefault(),h(t,1)):39===t.keyCode?(t.currentTarget.selectionStart==t.currentTarget.value.toString().length||t.ctrlKey)&&f(t,-1):37===t.keyCode?(0==t.currentTarget.selectionStart||t.ctrlKey)&&f(t,1):0===t.keyCode?t.ctrlKey&&(a?a>0&&(A.invoices[a][e]=angular.copy(A.invoices[a-1][e])):A.invoice[e]=angular.copy(A.invoices[A.invoices.length-1][e])):46===t.keyCode&&t.shiftKey&&a&&p(A.invoices[a].id,a)}function h(t,e){var a=t.currentTarget.attributes.id.nodeValue.split("-");a[0]=parseInt(a[0],10)+e;var n=a[0]+"-"+a[1];angular.element(document.getElementById(n)).focus()}function f(t,e){var a=t.currentTarget.attributes.id.nodeValue.split("-");a[1]=parseInt(a[1],10)+e;var n=a[0]+"-"+a[1];angular.element(document.getElementById(n)).focus()}var A=this;A.investmentActions=r,A.ok=d,A.cancel=m,A.invoices=o,A.invoice={investmentAction:o.length?angular.copy(o[o.length-1].investmentAction):null},A.add=u,A.remove=p,A.keyPressed=v,c()}t.$inject=["$log","$uibModalInstance","$scope","Util","MonitoringService","investmentAction","invoices","monitoringId","$confirm"],angular.module("app.monitoring").controller("BatchInsertModalController",t)}(),function(){"use strict";angular.module("app.contract",[])}(),function(){"use strict";function t(t,e,a){function n(){console.log("Export Monitoring Columns Modal Controller module activated"),c.keys=Object.keys(c.columns),l()}function i(){t.dismiss()}function r(){var e=[];c.checklits.forEach(function(t){t.checked&&e.push(t)}),t.close([c.columns,e])}function o(t){c.keys.forEach(function(e){c.columns[e]=t})}function s(t){c.checklits.forEach(function(e){e.checked=t})}function l(){e.getAllCheckList().then(function(t){c.checklits=t,console.log(c.checklits,a),c.checklits.forEach(function(t){t.checked=a&&t.id==a.id})})}var c=this;c.close=i,c.ok=r,c.selectAllColumns=o,c.selectAllCheckList=s,c.columns={"بخش اقتصادی":!0,"نوع طرح":!0,"وضعیت فعالیت":!0,"وضعیت":!0,"تاریخ قرارداد":!0,"تاریخ ایجاد":!0,"تاریخ بازدید":!0,"تاریخ تائید":!0,"کارشناس (ها)":!0,"سرگروه":!0,"نام متقاضی":!0,"مبلغ تسهیلات":!0,"استان":!0,"شعبه":!0,"تائید کننده":!1,"شماره مصوبه":!1,"تاریخ تصویب مصوبه":!1,"کارشناس اعتباری مصوب کننده":!1,"رئیس شعبه در زمان تصویب":!1,"رئیس شعبه در زمان بازدید":!1,"شماره قرارداد":!1},n()}t.$inject=["$uibModalInstance","CheckListService","checkListItem"],angular.module("app.contract").controller("ExportMonitoringColumnsModalController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){console.log(f.title+" module activated",i,o)}function m(){t.close("done")}function u(){t.dismiss("cancel")}function p(){f.loading=!0,f.directiveNumber=f.directiveNumber||(f.referenceMonitoring?f.referenceMonitoring.directive.dirNumber:null),f.directiveNumber=A(f.directiveNumber),console.log("setDirective",f.referenceMonitoring,f.directiveNumber),f.directiveNumber?f.referenceMonitoring?s.copyDirective(i,f.directiveNumber,f.referenceMonitoring.id).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),m(),f.loading=!1},function(){f.loading=!1}):s.newDirective(i,f.directiveNumber,o).then(function(){c.toast("success","APP.MESSAGES.SUCCESS"),c.toast("success","APP.MESSAGES.NEW_DIRECTIVE"),a.go("root.directive.details",{directiveId:f.directiveNumber,monitoringId:i,monitoringState:a.$current.name}),m(),f.loading=!1},function(){f.loading=!1}):(f.loading=!1,c.toast("error","APP.MESSAGES.NULL_DIRECTIVE_NUMBER"))}function g(t){return t&&""!==t?l.searchDirective(A(t.toString())).then(function(t){return f.monitoringList=t?t:[],f.monitoringList}):f.monitoringList}function v(t){t.directive&&t.directive.dirNumber&&(f.directiveNumber=t.directive.dirNumber)}function h(t){var e=1===t.userMonitorings.length?t.userMonitorings[0].lmsUser.name:2===t.userMonitorings.length?t.userMonitorings[0].lmsUser.name+" و "+t.userMonitorings[1].lmsUser.name:"";return t.directive.dirNumber+"<br><span>"+n("jDate")(t.monitoringDate)+" توسط "+e+"</span><br><small>&nbsp;از نظارت شماره&nbsp;"+t.number+"</small>"}var f=this;f.title="Edit Directive";var A=(n("pNumber"),n("eNumber"));f.contractDirectiveNumber=r,f.monitoringList=[],f.cancel=u,f.setDirective=p,f.refreshMonitoringList=g,f.referenceSelected=v,f.getDirectiveListText=h,f.ok=m,d()}t.$inject=["$uibModalInstance","$rootScope","$state","$filter","monitoringId","directiveNumber","contractId","DirectiveService","MonitoringService","Util"],angular.module("app.contract").controller("EditDirectiveController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){if(d.dirContract.contract)for(var t=0;t<d.contracts.length;t++)if(d.contracts[t].id==d.dirContract.contract.id){d.checked[d.contracts[t].id]="true";break}}function l(){d.loading=!0,d.concludedContractId&&n.setContract(d.dirContract.id,d.concludedContractId).then(function(){i.toast("success"),c(),d.loading=!1},function(){d.loading=!1})}function c(){t.close()}var d=this;d.title="Monitoring ConcludedContractController Active",d.dirContract=e,d.contracts=a,d.contract={},d.checked=[],d.concludedContractId="",d.setContract=l,s()}t.$inject=["$uibModalInstance","dirContract","contracts","DirectiveService","Util","Principal","$filter"],angular.module("app.monitoring").controller("ConcludedContractController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){s()}function s(){p.convertDebit=p.monitoring.monitoringCommitmentConvertLicenses.length>0?p.monitoring.monitoringCommitmentConvertLicenses[0]:null}function l(){p.convertDebit.id?d():c()}function c(){var t={letterDate:p.convertDebit.letterDate,letterNum:p.convertDebit.letterNum};r.addConvertDebit(p.monitoring.id,t).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),u()})}function d(){var t={letterDate:p.convertDebit.letterDate,letterNum:p.convertDebit.letterNum};r.updateConvertDebit(p.convertDebit.id,t).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),u()})}function m(){t.dismiss("cancel")}function u(){t.close()}var p=this;p.monitoring=n,p.convertDebit={},p.submit=l,p.cancel=m,o()}t.$inject=["$uibModalInstance","$filter","$scope","monitoring","Util","MonitoringService"],angular.module("app").controller("AddConvertDebitModal",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u,p,g,v,h,f,A,b){function P(){n.info(W.title),N(),R(),q(),E(),Y()}function E(){A.identity().then(function(t){W.currentUser=t,W.isAdmin=A.isInAnyRole(["ADMIN"])})}function T(){return A.isInRole("STAFF_DISPATCHER")}function I(t){for(var e=0;e<W.monitorings.length;e++)if(W.monitorings[e].id===t)return W.monitorings[e]}function S(){if(W.searchItem.contractFromDate=W.contractFromDate,W.searchItem.contractToDate=W.contractToDate,W.searchItem.monitoringFromDate=W.monitoringFromDate,W.searchItem.monitoringToDate=W.monitoringToDate,W.searchItem.createFromDate=W.createFromDate,W.searchItem.createToDate=W.createToDate,W.searchItem.confirmFromDate=W.confirmFromDate,W.searchItem.confirmToDate=W.confirmToDate,W.searchItem.contractNumber=W.searchItem.contractNumber?s("eNumber")(W.searchItem.contractNumber):null,W.searchItem.monitoringNumber=W.searchItem.monitoringNumber?s("eNumber")(W.searchItem.monitoringNumber):null,W.searchItem.directiveNumber=W.searchItem.directiveNumber?s("eNumber")(W.searchItem.directiveNumber):null,W.searchItem.contractId=W.contractId?W.contractId.toString():null,W.searchItem.stepIds=[],W.searchItem.traceStepIds=[],W.steps.forEach(function(t){t.selected&&W.searchItem.stepIds.push(t.id)}),W.traceSteps.forEach(function(t){t.selected&&W.searchItem.traceStepIds.push(t.id)}),W.searchItem.planTypes=[],W.searchItem.activenessStatuses=[],W.planTypes.forEach(function(t){t.selected&&W.searchItem.planTypes.push(t.key)}),W.activenessStatuses.forEach(function(t){t.selected&&W.searchItem.activenessStatuses.push(t.key)}),W.searchItem.economicSectionIds=[],W.economicSections.forEach(function(t){t.selected&&W.searchItem.economicSectionIds.push(t.id)}),W.checkListStatus&&W.checkList){var t=[];t.push(W.checkListStatus),W.searchItem.checkListId=W.checkList.id,W.searchItem.checkListStatuses=t}else W.searchItem.monitoringCheckList=null}function C(t){var e=moment();W.loading=!0,S();var n={page:t.page()-1,size:t.count(),sort:"id,desc"};return angular.forEach(t.sorting(),function(t,e){n.sort=e+","+t}),W.searchItem.applicantPerformanceEvaluation="COMMITMENT_CONVERT",p.searchMonitoring(W.searchItem,n).then(function(n){W.monitorings=n?n.content:[];var i,r=n.number*n.numberOfElements;for(i=0;i<W.monitorings.length;i++)W.monitorings[i].index=r+i+1,W.monitorings[i].deleteDisabled="created"!==W.monitorings[i].currentStep.name;n&&(t.total(n.totalElements),W.allRecordsCount=n.totalElements);var o=angular.element(document.getElementById("search-result-container"));return W.firstSearch?W.firstSearch=!1:a.scrollToElement(o,J,Q),W.fetchTime=Math.floor(moment().diff(e)/1e3)+" ثانیه",W.loading=!1,W.monitorings},function(t){return W.allRecordsCount=0,W.loading=!1,W.fetchTime=Math.floor(moment().diff(e)/1e3)+" ثانیه",t})}function O(t){S();var e=o.open({animation:!0,templateUrl:"app/components/monitoring/export/columns-modal.html",controller:"ExportMonitoringColumnsModalController",controllerAs:"modalVm",size:"lg",resolve:{checkListItem:function(){return W.checkList}}});e.result.then(function(e){var a={reportType:t,extraSearchObj:W.searchItem,showChecklistsStatus:!0,columns:e[0],checkLists:e[1]};d.getReportNumber(a).then(function(e){if(t){var a="api/report/monitoringSearch?reportNumber="+e;console.log(a),d.getNonHtmlReport(a),v.toast("info","Please wait to receive data")}})},function(){})}function N(){return c.getAllEconomicSections().then(function(t){return W.economicSections=t?t:[],W.economicSections})}function R(){return u.getAllProvinces().then(function(t){return W.provinces=t?t:[],W.provinces})}function y(){return W.searchItem.provinceId||(W.branches=[]),u.getAllBranchesOfProvince(W.searchItem.provinceId).then(function(t){return W.branches=t?t:[],W.branches})}function M(){return W.searchItem.branchIds=[],0===W.searchItem.provinceIds.length?(W.branches=[],W.branches):u.getAllBranchesByProvinceList(W.searchItem.provinceIds).then(function(t){return W.branches=t?t:[],W.branches})}function D(){W.searchItem?(W.searchItem={},W.steps.forEach(function(t){t.selected&&(t.selected=!1)}),W.traceSteps.forEach(function(t){t.selected&&(t.selected=!1)}),W.economicSections.forEach(function(t){t.selected&&(t.selected=!1)}),W.planTypes.forEach(function(t){t.selected&&(t.selected=!1)}),W.activenessStatuses.forEach(function(t){t.selected&&(t.selected=!1)}),W.tableParams.reload()):W.toggleAdd=!W.toggleAdd}function L(){W.tableParams.reload()}function U(){W.tableParams.reload()}function w(t){var e=I(t);o.open({animation:!0,templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",controller:"MonitoringFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return{monitoringId:e.id}}}})}function x(){var t=o.open({animation:!0,templateUrl:"app/components/contract/add-monitoring-modal/add-monitoring.html",controller:"AddMonitoring",controllerAs:"AddMonitoring",size:"md",resolve:{id:function(){return W.contractId},contractIds:function(){return[]}}});t.result.then(function(){W.tableParams.reload()})}function $(t){var e=o.open({animation:!0,templateUrl:"app/components/monitoring/convert-debit-modal/add-convert-debit-modal.html",controller:"AddConvertDebitModal",controllerAs:"modalVm",size:"md",resolve:{monitoring:function(){return t}}});e.result.then(function(){W.tableParams.reload()})}function _(t){var e=o.open({animation:!0,templateUrl:"app/components/monitoring/confirm-convert-debit-modal/confirm-convert-debit-modal.html",controller:"ConfirmConvertDebitModal",controllerAs:"modalVm",size:"md",resolve:{monitoring:function(){return t}}});e.result.then(function(){W.tableParams.reload()})}function k(t){console.log("monitoring = ",t),e.go("root.monitoring.trace",{monitoringId:t.id,step:"fromConvertDebit"})}function B(t){for(var e=0;e<W.planTypes.length;e++)if(t===W.planTypes[e].value)return W.planTypes[e].title;return"نامشخص"}function F(t){return K.indexOf(t.id)>-1}function H(t){var e=K.indexOf(t.id),a=e>-1;a?K.splice(e,1):K.push(t.id),L()}function G(t){console.log("toggleTraceStep",t.id,X.indexOf(t.id));var e=X.indexOf(t.id),a=e>-1;a?X.splice(e,1):X.push(t.id),L(),console.log(X)}function V(t){t.deleteDisabled||l().then(function(){p.deleteMonitoring(t.id).then(function(){W.tableParams.reload(),v.toast("success")},function(t){v.toast("error",t.message)})})}function j(t,e){var a=o.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){I()})}function q(){f.getByRole("OBSERVER").then(function(t){W.observers=t?t:[]}),f.getByRole("TEAM_HEAD").then(function(t){t.forEach(function(t){W.teamHeadsMap[t.username]=t}),W.teamHeads=t?t:[]}),f.getByRoles(["BRANCH_DISPATCHER","FINAL_HEAD","PROVINCE_HEAD"]).then(function(t){W.finalHeads=t?t.content:[]}),f.getByRoles(["ADMIN","BRANCH_DISPATCHER","FINAL_HEAD","PROVINCE_DISPATCHER","STAFF_DISPATCHER"]).then(function(t){W.owners=t?t.content:[]})}function Y(){W.checkListStatusList=[{value:"ALL",caption:"-- همه موارد --"},{value:"DONE",caption:"فاقد انحراف"},{value:"VIOLATED",caption:"دارای نقص"},{value:"UNDONE",caption:"دارای انحراف"},{value:"UNRELATEDTODIRECTIVE",caption:"شامل مصوبه نمی‌باشد"}],b.getAllCheckList().then(function(t){W.checkLists=t})}function z(t){return m.searchAllNew({query:t}).then(function(t){return W.codes=t||[],W.codes})}var W=this;W.firstSearch=!0,W.searchItem={},W.monitoring={},W.monitorings=[],W.directives=[],W.planTypes=v.baseInfo("planTypes"),W.activenessStatuses=v.baseInfo("activenessStatuses"),W.economicSections=[],W.provinces=[],W.codes=[],W.type="monitoringList",W.contractId=t.contractId,W.contractNumber=t.contractNumber,W.tableParams=new i({},{counts:[5,10,20,50,100],getData:C}),W.showSearch=!0,W.steps=p.getStepsSync(),W.traceSteps=g.getStepsSync,W.observers=[],W.teamHeads=[],W.teamHeadsMap={},W.finalHeads=[],W.owners=[];var K=[],X=[],Q=1e3,J=30;W.openModal=x,W.getBranchesByProvince=y,W.getBranchesByProvinceIds=M,W.cancelSearch=D,W.search=L,W.filterStep=U,W.openFlowModal=w,W.planCaption=B,W.toggleStep=H,W.toggleTraceStep=G,W.activeStep=F,W.deleteMonitoring=V,W.openDetailsModal=j,W.exportMonitoring=O,W.planTypeKey=v.getPlanTypeKey,W.getUsers=q,W.getDelay=p.getDelaySync,W.refreshCodes=z,W.addConvertDebitModal=$,W.confirmConvertDebitModal=_,W.setTrace=k,W.isInRoleStaff=T,P()}t.$inject=["$stateParams","$state","$document","$log","NgTableParams","host","$uibModal","$filter","$confirm","EconomicSectionService","ReportService","ContractCodeService","ProvinceService","MonitoringService","TraceService","Util","BranchService","UserService","Principal","CheckListService"],angular.module("app").controller("ConvertDebitController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){n.log(A.title),g(!0),v(!0)}function d(e){o.unsetContract(e).then(function(){g(!1),t.toast("success")})}function m(){function e(t){return console.log("getAllMonitoringContracts",t),A.contracts=t?t:[],A.tempContracts=angular.copy(A.contracts),A.sumContractTotalAmount=0,A.sumInterestAmount=0,A.sumRemainingInCurrent=0,A.sumRemainingInNonCurrent=0,A.contracts.forEach(function(t){t.remainingInCurrent=t.remainingInCurrent?t.remainingInCurrent:0,t.remainingInNonCurrent=t.remainingInNonCurrent?t.remainingInNonCurrent:0,A.sumRemainingInCurrent+=t.remainingInCurrent,A.sumRemainingInNonCurrent+=t.remainingInNonCurrent,A.sumContractTotalAmount+=t.totalAmount,A.sumInterestAmount+=t.totalAmount*t.interestRate/100,A.sumInterestAndOriginAmount+=t.totalAmount+t.totalAmount*t.interestRate/100}),A.contracts}if(!A.monitoring.directive.dirNumber)return e([A.monitoring.contract]);var a={directiveNumberEqual:A.monitoring.directive.dirNumber.toString(),stepIds:[7,9,10]},n={page:0,size:1e3};return i.searchMonitoring(a,n).then(function(a){var n=[];return a&&a.content&&a.content.forEach(function(e){t.indexOf(n,e.contract.id,"id")<0&&n.push(e.contract)}),t.indexOf(n,A.monitoring.contract.id,"id")<0&&n.push(A.monitoring.contract),e(n)})}function u(t){if(t.contract){A.contracts=angular.copy(A.tempContracts);for(var e=0;e<A.contracts.length;e++)if(A.contracts[e].id===t.contract.id){A.contracts[e].checked="true";break}}else A.contracts=angular.copy(A.tempContracts);var a=s.open({animation:!0,templateUrl:"app/components/monitoring/dirContract-concludedContract-modal/dirContract-concludedContract.html",controller:"ConcludedContractController",controllerAs:"cvm",size:"lg",resolve:{dirContract:function(){return t},contracts:function(){return A.contracts}}});a.result.then(function(){console.log("After modal"),g(!1)},function(){})}function p(e){e.contract.number?(e.contract.number=t.eNumber(e.contract.number),o.setContractByNumber(e.id,e.contract.number).then(function(){t.toast("success"),g(!1),A.loading=!1},function(){t.toast("error"),g(!1),A.loading=!1})):o.unsetContract(e.id).then(function(){g(!1),v(),t.toast("success")})}function g(t){function a(){A.sumDirContractTotalAmount=0,A.sumDirInterestAmount=0,A.sumDirInterestAndOriginAmount=0;A.monitoring.directive.dirNumber;return A.dirContracts=A.monitoring.dirContracts,A.dirContracts.forEach(function(t){A.sumDirContractTotalAmount+=t.totalAmount,A.sumDirInterestAmount+=t.interestAmount}),A.dirContracts}console.log("getAllMonitoringDirContracts"),A.monitoringId&&l.$parent.vm.getMonitoring(t).then(function(t){A.monitoring=t?t:[],a(),console.log(A.dirContracts),A.tableParams=new e({},{counts:[],getData:m})})}function v(t){l.$parent.vm.getAllowedActions(t).then(function(t){A.allowedActions=t})}function h(t){return A.monitoring&&A.monitoring.contract&&t.number===A.monitoring.contract.number}function f(){return l.$parent.vm.stepStatus.contract}var A=this;A.monitor={},A.monitoring={},A.contracts=[],A.tempContracts=[],A.dirContracts=[],A.toggleEdit=[],A.contract={},A.contractTypes=[],A.monitoringId=a.monitoringId,A.sumContractTotalAmount=0,A.sumInterestAmount=0,A.sumInterestAndOriginAmount=0,A.sumDirContractTotalAmount=0,A.sumDirInterestAmount=0,A.sumDirInterestAndOriginAmount=0,A.openConcludedContractModal=u,A.unsetConcludedContract=d,A.isMonitoringContract=h,A.isMonitoringContractSet=f,A.setContractNumber=p,A.openAttachmentModal=l.$parent.vm.openAttachmentModal,A.next=l.$parent.vm.next,A.previous=l.$parent.vm.previous,A.title="Monitoring  Contract List Controller Active",c(),l.$on("next_contract",function(t,e){console.log("on next_request event",e),l.$emit("next",!0)}),l.$on("previous_contract",function(t,e){console.log("on previous_request event",e),l.$emit("previous",!0)})}t.$inject=["Util","NgTableParams","$stateParams","$log","MonitoringService","ContractTypeService","DirectiveService","$uibModal","$scope"],angular.module("app.monitoring").controller("MonitoringContractController",t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){console.log(l.title)}function o(){if(l.monitoringConflict){var e={monitoringConflictId:l.monitoringConflict.id};l.monitoringConflict.monitoring={id:a.monitoring.id},n.updateConflictInMonitoring(l.monitoringId,l.monitoringConflict,e).then(function(){i.toast("success"),t.close()})}}function s(){t.close()}var l=this;l.title=" update conflict controller",l.monitoringConflict=a,l.monitoringId=e.monitoringId,l.auto=[{id:!0,caption:"مرتفع شد"},{id:!1,caption:"مرتفع نشد"}],l.updateConflictInMonitoring=o,l.cancelAdd=s,r()}t.$inject=["$uibModalInstance","$stateParams","monitoringConflict","MonitoringService","Util"],angular.module("app.monitoring").controller("updateConflictController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){r.log(f.title),d()}function d(){return l.$parent.vm.getMonitoring(A).then(function(t){return A=!1,f.monitoring=t,f.allowedAction="started"===f.monitoring.currentStep.name||"calculated"===f.monitoring.currentStep.name,f.state=t.currentStep.name,f.conflicts=t?t.monitoringConflicts:[],f.conflicts})}function m(){var t="آیا مطمئن هستید؟";e({text:t}).then(function(){return o.updateCalculateConflictInMonitoring(f.monitoringId).then(function(){d()})})}function u(){f.monitoringConflict&&o.AddConflictToMonitoring(f.monitoringId,f.monitoringConflict).then(function(){s.toast("success"),g(),d()})}function p(t){f.monitoringConflict&&e().then(function(){var e={monitoringConflictId:t};o.deleteConflictFromMonitoring(f.monitoringId,e).then(function(){s.toast("success"),d()})})}function g(){
f.monitoringConflict={},f.toggleAdd=!f.toggleAdd}function v(t){return f.signUrl=f.host+"lmsUserManagement/user/"+t.username+"/getSign",f.signUrl}function h(t){var e=a.open({animation:!0,templateUrl:"app/components/monitoring/conflict/update-conflict-modal.html",controller:"updateConflictController",controllerAs:"modalVm",size:"md",resolve:{monitoringConflict:function(){return t}}});e.result.then(function(){d()},function(){})}var f=this;f.monitoringConflict={},f.conflicts=[],f.monitoringId=i.monitoringId;var A=!0;f.toggleAdd=!1,f.monitoring={},f.host=t,f.calculateMonitoringConflicts=m,f.createConflict=u,f.deleteConflict=p,f.cancelAdd=g,f.getSignUrl=v,f.openModal=h,f.openAttachmentModal=l.$parent.vm.openAttachmentModal,f.next=l.$parent.vm.next,f.previous=l.$parent.vm.previous,f.links={NO_PAYING_PAYMENT:"root.monitoring.payments",INVALID_STEPCOUNT_PAYMENT:"root.monitoring.payments",COUNT_CONFLICT_PAYMENT:"root.monitoring.payments",CONFLICT_PAYMENT:"root.monitoring.payments",AMOUNT_CONFLICT_BANK_SHARED_PAYMENT:"root.monitoring.payments",AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT:"root.monitoring.payments",NO_AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT:"root.monitoring.payments",CONFLICT_ASSURANCE:"root.monitoring.assurance",NOT_EXIST_CONFLICT_ASSURANCE:"root.monitoring.assurance",COUNT_CONFLICT_INVOICE:"root.monitoring.invoice",NO_MONITORINGBASED_CONFLICT_INVOICE:"root.monitoring.invoice",CONFLICT_INVOICE:"root.monitoring.invoice",CONFLICT_LICENSE:"root.monitoring.license",CONFLICT_CHECKLIST:"root.monitoring.checkList",CONFLICT_ADDRESS:"root.monitoring.monitoring-details",CONFLICT_LAT_LONG:"root.monitoring.lat-long",CONFLICT_PRECONDITION:"root.monitoring.preConditions",CONFLICT_PROGRESS:"root.monitoring.progress",CONFLICT_DATE:"root.monitoring.monitoring-details",CONFLICT_ECONOMIC_SECTION:"root.monitoring.monitoring-details",CONFLICT_DIR_NUMBER:"root.monitoring.monitoring-details",CONFLICT_PLAN_TYPE:"root.monitoring.monitoring-details"},f.title="Monitoring  Conflict List Controller Active",c(),l.$on("next_conflict",function(t,e){console.log("on next_conflict event",e),l.$emit("next",!0)}),l.$on("previous_conflict",function(t,e){console.log("on previous_conflict event",e),l.$emit("previous",!0)})}t.$inject=["host","$confirm","$uibModal","NgTableParams","$stateParams","$log","MonitoringService","Util","$scope"],angular.module("app.monitoring").controller("MonitoringConflictController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){l()}function l(){g.commitConvertDebit=g.monitoring.monitoringCommitmentConvertLicenses.length>0?g.monitoring.monitoringCommitmentConvertLicenses[0]:null}function c(){var t=g.commitConvertDebit.attachment;return console.log(t),t.attachment.size>5e6?void i.toast("error","حجم فایل بیشتر از حد مجار است "):void(g.commitConvertDebit.done?m():d())}function d(){var t={doneDate:g.commitConvertDebit.doneDate,doneLetterNumber:g.commitConvertDebit.doneLetterNumber,description:g.commitConvertDebit.doneDescription},e=g.commitConvertDebit.attachment;o.setDoneCommitmentConvertLicense(g.commitConvertDebit.id,t,e).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),p()})}function m(){var t={doneDate:v(g.commitConvertDebit.doneDate),doneLetterNumber:g.commitConvertDebit.doneLetterNumber,description:g.commitConvertDebit.doneDescription},e=g.commitConvertDebit.attachment;o.updateDoneCommitmentConvertLicense(g.commitConvertDebit.id,t,e).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),p()})}function u(){t.dismiss("cancel")}function p(){t.close()}var g=this,v=e("mDate");g.monitoring=n,g.commitConvertDebit={},g.host=r,g.submit=c,g.cancel=u,s()}t.$inject=["$uibModalInstance","$filter","$scope","monitoring","Util","host","MonitoringService"],angular.module("app").controller("ConfirmConvertDebitModal",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){n.log(b.title),c(!0),d(!0),v(!0),A()}function c(t){return o.$parent.vm.getMonitoring(t).then(function(t){return b.monitoring=t?t:{},v(),b.monitoring})}function d(t){return o.$parent.vm.getDirective(t).then(function(t){return b.directive=t?t:{},b.directive})}function m(){if(console.log("accept",o.$parent.vm.stepStatus),!o.$parent.vm.stepStatus.details)return void r.toast("error","Please fill all the required fields in details section");if(!o.$parent.vm.stepStatus.assurance||!(b.monitoring.dirAssurances&&b.monitoring.dirAssurances.length>0))return void r.toast("error","Please fill all the required fields in assurance section");if(!o.$parent.vm.stepStatus.preConditions)return void r.toast("error","Please control all the preConditions");if(!o.$parent.vm.stepStatus.license)return void r.toast("error","Please control all the licenses");if(!(b.directive.dirApproveDate&&b.directive.dirNumber&&b.directive.dirValidityDuration&&b.directive.directiveApprovalPlace&&b.directive.dirCreditSupplyResource&&b.directive.dirEconomicSection&&b.directive.dirPlanType&&b.directive.branchChiefInGrantingTime&&b.directive.dirBranchPhoneNumber&&b.directive.dirExpert&&b.directive.dirApplicantPhoneNumber&&b.directive.dirActivitySubject&&b.directive.dirProjectLocationAddress))return void r.toast("error","Please fill all the required fields in directive details");if(!(b.monitoring.applicant&&("LEGAL"===b.monitoring.applicant.applicantType?b.monitoring.monitoringBoards.length>0:!0)))return void r.toast("error","Please fill all the required fields in applicant");if(!(b.monitoring.dirPayments&&b.monitoring.dirPayments.length>0))return void r.toast("error","Please control all the payment parts");if(!o.$parent.vm.stepStatus.invoice)return void r.toast("error","Please control all the invoices");if(!o.$parent.vm.stepStatus.payments)return void r.toast("error","Please control all the payments");switch(console.log("accept",b.monitoring.currentStep.name),b.monitoring.currentStep.name){case"created":i.startMonitoring(b.monitoringId,b.comment).then(p,g);break;case"started":r.toast("error","APP.MESSAGES.CALCULATE_CONFLICTS_FIRST");break;case"calculated":"BRANCH"===b.monitoring.organizationLevel?i.branchExpertAccept(b.monitoringId,b.comment).then(p,g):i.firstExpertAcceptMonitoring(b.monitoringId,b.comment).then(p,g);break;case"firstExpertAccepted":i.secondExpertAcceptMonitoring(b.monitoringId,b.comment).then(p,g);break;case"provinceAcceptingWaited":case"teamHeadAcceptingWaited":case"teamHeadAccepted":i.acceptMonitoring(b.monitoringId,b.comment).then(p,g)}}function u(){switch(b.monitoring.currentStep.name){case"created":case"started":case"calculated":case"firstExpertAccepted":case"provinceAcceptingWaited":case"teamHeadAcceptingWaited":i.rejectMonitoring(b.monitoringId,b.comment).then(p,g);break;case"teamHeadAccepted":i.finalHeadRejectMonitoring(b.monitoringId,b.comment).then(p,g)}}function p(){console.log("success"),r.toast("success","APP.MESSAGES.SUCCESS"),b.comment=null,c(),o.$parent.vm.setIsMyMonitoring(),o.$parent.vm.getLastMonitoringProcessLogs(),s.$broadcast("stateChanged")}function g(t){console.log(t)}function v(t){o.$parent.vm.getAllowedActions(t).then(function(){b.allowedActionList=o.$parent.vm.allowedActionList,b.allowedAction=o.$parent.vm.allowedAction})}function h(){var t=i.getNextStepSync(b.monitoring.currentStep.id,b.monitoring.organizationLevel,b.monitoring.userMonitorings.length);return t&&t.title.split("-").length>1?"تائيد و ارسال":"تائيد نهایی"}function f(){var t=i.getPreviousStepSync(b.monitoring.currentStep.id,b.monitoring.userMonitorings.length);return t&&t.title.split("-").length>1?"بازگشت به "+t.title.split("-")[0]:"بازگشت به حالت آغازین"}function A(){o.$parent.vm.getLastMonitoringProcessLogs(!0).then(function(){b.lastAction=o.$parent.vm.lastProcess})}var b=this;b.monitoringConflict={},b.conflicts=[],b.monitoringId=a.monitoringId;b.toggleAdd=!1,b.monitoring={},b.host=t,b.accept=m,b.reject=u,b.getMonitoring=c,b.getAllowedActions=v,b.nextStepTitle=h,b.previousStepTitle=f,b.openAttachmentModal=o.$parent.vm.openAttachmentModal,b.next=o.$parent.vm.next,b.previous=o.$parent.vm.previous,b.title="Monitoring  Conflict List Controller Active",l(),s.$on("next_comment",function(t,e){console.log("on next_comment event",e),o.$emit("next",!0)}),s.$on("previous_comment",function(t,e){console.log("on previous_comment event",e),o.$emit("previous",!0)})}t.$inject=["host","$q","$stateParams","$log","MonitoringService","Util","$scope","$rootScope"],angular.module("app.monitoring").controller("MonitoringCommentController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){a.log(h.title),h.loadingCheckList=!0,d(),v(!0)}function c(){var t={applicantPerformanceEvaluation:h.applicantPerformance,agentBranchPerformanceEvaluation:h.agentBranchPerformance,approverPerformanceEvaluation:h.approverPerformance};r.setPerformanceEvaluations(h.monitoringId,t).then(function(t){s.toast("success"),d(!1)},function(){d(!0)})}function d(t){return n.$parent?n.$parent.vm.getMonitoring(t).then(function(t){return h.monitoring=t,h.agentBranchPerformance=h.monitoring.agentBranchPerformanceEvaluation,h.approverPerformance=h.monitoring.approverPerformanceEvaluation,h.applicantPerformance=h.monitoring.applicantPerformanceEvaluation,m(),h.monitoring}):{then:function(t){return t()}}}function m(){return console.log("monitoring = ",h.monitoring),2===h.monitoring.currentStep.id?o.getEnabledCheckList().then(function(t){h.checkList=t?t:[],h.monitoringCheckList=[];for(var e=0;e<h.checkList.length;e++){var a={checkList:h.checkList[e],checkListStatus:"",comment:"",monitoring:{id:h.monitoringId}};h.monitoringCheckList.push(a)}return u(),h.loadingCheckList=!1,h.monitoringCheckList}):2!==h.monitoring.currentStep.id?(h.monitoringCheckList=[],h.monitoringCheckList=h.monitoringCheckList.concat(h.monitoring.monitoringCheckLists),h.loadingCheckList=!1,h.monitoringCheckList):void 0}function u(){h.monitoringCheckListCount=0;for(var t=0;t<h.monitoring.monitoringCheckLists.length;t++)for(var e=0;e<h.monitoringCheckList.length;e++)h.monitoring.monitoringCheckLists[t].checkList.id===h.monitoringCheckList[e].checkList.id&&(h.monitoringCheckListCount++,h.monitoringCheckList[e].checkListStatus=h.monitoring.monitoringCheckLists[t].checkListStatus,h.monitoringCheckList[e].comment=h.monitoring.monitoringCheckLists[t].comment)}function p(){r.SetFinalCommentInMonitoring(h.monitoringId,h.monitoring.finalExpertComment).then(function(){d(!1),s.toast("success")},function(){d()})}function g(t){h.loadingCheckList=!0,t&&console.log("addCheckListToMonitoring by "+t);for(var e=[],a=0;a<h.monitoringCheckList.length;a++)h.monitoringCheckList[a].monitoring={id:h.monitoring.id},""!==h.monitoringCheckList[a].checkListStatus&&e.push(h.monitoringCheckList[a]);r.AddCheckListToMonitoring(h.monitoringId,e).then(function(){h.loadingCheckList=!1,d(!1),s.toast("success")},function(){h.loadingCheckList=!1,d()})}function v(t){n.$parent&&n.$parent.vm.getAllowedActions(t).then(function(t){h.allowedAction=t})}var h=this;h.monitoringId=e.monitoringId,h.checkList=[],h.monitoringCheckList=[],h.title="Monitoring Check List Controller Active",h.monitoring={},h.agentBranchPerformance={},h.approverPerformance={},h.applicantPerformance={},h.finalExpertComment="",h.addFinalExpertComment=p,h.addCheckListToMonitoring=g,h.openAttachmentModal=n.$parent.vm.openAttachmentModal,h.next=n.$parent.vm.next,h.previous=n.$parent.vm.previous,h.updatePerformanceEvaluation=c,l(),t.$on("stateChanged",function(){n.$parent&&v(!1)});var f=!1;t.$on("next_checkList",function(t,e){f||(console.log("on next_checkList event",e,f),f=!0,e?i.all([g("next_checkList event"),p(),c()]).then(function(){d().then(function(){u(),f=!1,n.$emit("next",!0)})}):n.$emit("next",!0))}),t.$on("previous_checkList",function(t,e){console.log("on previous_checkList event",e),e?i.all([g("previous_checkList event"),p(),c()]).then(function(){d().then(function(){u(),n.$emit("previous",!0)})}):n.$emit("previous",!0)})}t.$inject=["$rootScope","$stateParams","$log","$scope","$q","MonitoringService","CheckListService","Util"],angular.module("app.monitoring").controller("MonitoringCheckListController",t)}(),function(){"use strict";function t(t,e,a,n){function i(){console.log(s.title+" activated")}function r(){a.dismiss()}function o(){return s.message?void e.cancelFinalized(s.monitoring.id,s.message).then(function(t){a.close()},function(t){a.dismiss()}):void n.toast("error","Please write related message")}var s=this;s.title="Cancel Finalized Controller",s.cancel=r,s.ok=o,s.monitoring=t,i()}t.$inject=["monitoring","MonitoringService","$uibModalInstance","Util"],angular.module("app.monitoring").controller("CancelFinalizedController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){a.log(v.title),u(!0)}function c(){if(v.attachment.attachment.size>7e6)return void r.toast("error","APP.ERRORS.MAXIMUM_FILE_SIZE_EXCEPTION","add attachment maximum file size error");if(v.loading=!0,v.attachment){v.description=v.description||null;var t={name:v.attachment.attachment.name,description:v.description};n.addFileAttachmentToMonitoring(v.monitoring.id,v.attachment,t).then(function(){u(!1),v.attachment={},v.description="",r.toast("success")},function(t){var e=t.status;v.loading=!1,401===e?r.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):r.toast("error","APP.MESSAGES.FAIL","add attachment error")})}}function d(e,a){s.identity().then(function(i){i.username===e.creatorLmsUser.username||s.isInRole("STAFF_DISPATCHER")&&[7,9,10].includes(v.monitoring.currentStep.id)?t().then(function(t){var e={attachmentId:v.attachments[a].id};n.deleteAttachmentFromMonitoring(v.monitoring.id,e).then(function(){v.attachments.splice(a,1),r.toast("success")},function(){r.toast("error","APP.MESSAGES.FAIL","deleteAttachment error")})}):r.toast("error","APP.ERRORS.Unauthorized user to delete the monitoring attachment","deleteAttachment authenticartion error")})}function m(){v.attachment={},v.toggleAddAttachment=!0}function u(t){function e(t){return v.monitoring=t?t:{},v.attachments=v.monitoring.attachments,v.loading=!1,p(),v.monitoring}function a(){v.loading=!1}return v.loading=!0,o.$parent.vm?o.$parent.vm.getMonitoring(t).then(e,a):void n.getMonitoringById(v.monitoringId).then(e,a)}function p(){s.identity().then(function(t){v.attachments.forEach(function(e){e.canDelete=t.username===e.creatorLmsUser.username||s.isInRole("STAFF_DISPATCHER")&&[7,9,10].includes(v.monitoring.currentStep.id)})})}function g(){e.dismiss()}var v=this;v.monitoring={},v.monitoringId=i.monitoringId||monitoringId,v.monitorings=[],v.title="Monitoring Attachments Controller",v.toggleEdit=[],v.attachments=[],v.attachment={},v.isModal=!!e,v.cancelAddAttachment=m,v.deleteAttachment=d,v.attachFile=c,v.close=g,l()}t.$inject=["$confirm","$uibModalInstance","$log","MonitoringService","$stateParams","Util","$scope","Principal"],angular.module("app").controller("MonitoringAttachmentsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){n.log(S.title),g(),T(!0)}function u(){return o.$parent.vm.getMonitoring(C).then(function(t){return S.monitoring=t,C=!1,S.assurances=t?t.monitoringAssurances:[],S.sumExpertValue=0,S.sumAcceptedValue=0,S.sumMortgagedValue=0,S.assurances.forEach(function(t){S.sumExpertValue+=t.expertValue,S.sumAcceptedValue+=t.expertValue*t.assuranceType.acceptedPercent/100,S.sumMortgagedValue+=t.mortgagedValue}),p(),h(),S.assurances})}function p(){S.monitoring.directive&&S.monitoring.directive.dirRequiredAssurancePercentage?S.monitoring.directive.dirRequiredAssurancePercentage:100;S.totalAmount=S.monitoring.requiredAssuranceAmount,S.totalAmount=Math.floor(S.totalAmount),0===S.monitoring.dirAssurances.length&&(S.showFlag=!0),S.dirAssurances=S.monitoring.dirAssurances}function g(){return c.getAllAssuranceTypes().then(function(t){return S.assuranceTypes=t?t:[],S.assuranceTypes})}function v(t){var e=Math.abs(t);return t>0?e+"-":0>t?e+"+":0}function h(){var t={monitoringId:S.monitoringId};return r.getAssuranceConflict(t).then(function(t){return console.log("getAssuranceConflict",t),S.conflicts=t?t:[],S.sumOfSumTakenAssuranceAmount=0,S.dirAssurances.forEach(function(t){for(var e=!0,a=0;a<S.conflicts.length;a++)if(S.conflicts[a].assuranceType.id===t.assuranceType.id){e=!1;break}e&&(console.log("assurance not exist = ",t),S.conflicts.push({assuranceType:t.assuranceType,condition:t.limit,dirAssurance:t,directive:{id:S.monitoring.contract.directiveId},dirAssuranceAmount:null,sumTakenAssuranceAmount:0}))}),S.conflicts.forEach(function(t){t.getConflict=function(){var e=t.dirAssuranceAmount-t.sumTakenAssuranceAmount;if(t.conflictAmount=v(e),this.sumTakenAssuranceAmount&&!this.condition)return"OrangeBG";switch(this.condition){case"MAXIMUM":if(!this.dirAssuranceAmount)break;if(this.sumTakenAssuranceAmount>this.dirAssuranceAmount)return"OrangeBG";break;case"MINIMUM":if(!this.dirAssuranceAmount||this.sumTakenAssuranceAmount<this.dirAssuranceAmount)return"RedBG";break;case"EQUAL":if(!this.dirAssuranceAmount||this.sumTakenAssuranceAmount<this.dirAssuranceAmount)return"RedBG";if(this.sumTakenAssuranceAmount>this.dirAssuranceAmount)return"OrangeBG";break;case"REST":if(S.totalAmount>S.sumOfSumTakenAssuranceAmount)return"RedBG";break;default:return"non"}return"non"},S.sumOfSumTakenAssuranceAmount+=t.sumTakenAssuranceAmount}),S.totalDifference=v(S.totalAmount-S.sumOfSumTakenAssuranceAmount),S.conflicts.forEach(function(t){"REST"===t.condition&&(t.dirAssuranceAmount=S.totalAmount-(S.sumOfSumTakenAssuranceAmount-t.sumTakenAssuranceAmount)>0?S.totalAmount-(S.sumOfSumTakenAssuranceAmount-t.sumTakenAssuranceAmount):0,t.conflictAmount=S.totalDifference)}),S.loading=!1,S.conflicts},function(){S.loading=!1})}function f(){S.loading||(S.loading=!0,s.AddAssuranceToMonitoring(S.monitoringId,S.assurance).then(function(){d.toast("success"),S.assurance={},S.tableParams.reload(),h()},function(){S.loading=!1}))}function A(t,e){if(t){if(S.loading)return;S.loading=!0;var a={monitoringAssuranceId:t.id};t.monitoring={id:S.monitoring.id},s.updateAssuranceInMonitoring(S.monitoringId,t,a).then(function(){d.toast("success"),E(e)},function(){S.loading=!1})}}function b(t){e().then(function(){if(t){if(S.loading)return;S.loading=!0;var e={monitoringAssuranceId:t};s.deleteAssuranceFromMonitoring(S.monitoringId,e).then(function(){d.toast("success"),S.tableParams.reload()})}})}function P(){S.assurance.assuranceType&&S.assurance.assuranceType.acceptedPercent&&S.assurance.expertValue&&(S.assurance.acceptedValue=S.assurance.assuranceType.acceptedPercent*S.assurance.expertValue/100)}function E(t){S.toggleEdit[t]=!S.toggleEdit[t],S.tableParams.reload(),h()}function T(t){o.$parent.vm.getAllowedActions(t).then(function(t){S.allowedAction=t})}function I(t,e,a,n){13!==t.keyCode||t.shiftKey||(e?A(e,a,n):f())}var S=this;S.monitoring={},S.assurances=[],S.assurance={},S.conflicts=[],S.assuranceTypes=[],S.toggleEdit=[];var C=!0;S.tableParams=new i({},{counts:[],getData:u}),S.toggleAddEdit=!0,S.showFlag=!1,S.title="Monitoring assurance List Controller Active",S.monitoringId=a.monitoringId,S.totalAmount=0,S.totalDifference=0,S.sumExpertValue=0,S.sumAcceptedValue=0,S.sumMortgagedValue=0,S.sumOfSumTakenAssuranceAmount=0,S.addAssurance=f,S.updateAssurance=A,S.deleteAssuranceFromMonitoring=b,S.calcAcceptedValue=P,S.cancelEdit=E,S.keyPressed=I,S.openAttachmentModal=o.$parent.vm.openAttachmentModal,S.next=o.$parent.vm.next,S.previous=o.$parent.vm.previous,S.loading=!0,m(),t.$on("stateChanged",function(){o.$parent&&T(!1)}),t.$on("next_assurance",function(t,e){console.log("on next_assurance event",e),o.$emit("next",!0)}),t.$on("previous_assurance",function(t,e){console.log("on previous_assurance event",e),o.$emit("previous",!0)})}t.$inject=["$rootScope","$confirm","$stateParams","$log","NgTableParams","ConflictService","$scope","MonitoringService","DirectiveService","AssuranceTypeService","Util"],angular.module("app.monitoring").controller("MonitoringAssuranceController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/home/stats/stats.html",restrict:"E",replace:!0,scope:{color:"@",comments:"@",details:"@",icon:"@",model:"=",name:"@",number:"@",title:"@"}}}angular.module("app").directive("samatStats",t)}(),function(){"use strict";angular.module("app.directive",[])}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){console.log("ContractAssuranceTypesController Active "),l().then(function(){a.monitoringId&&c(!0)}),n.$parent.vm.getAllowedActions(!0).then(function(t){h.allowedAction=t})}function l(){return r.getAllInvestmentActions().then(function(t){return h.investmentActions=t?t:[],h.investmentActions})}function c(t){return n.$parent.vm.getMonitoring(t).then(function(t){return h.dirPaymentPerParts=t?t.dirPayments:[],h.dirPaymentPerParts.forEach(function(t){t.investmentAction=h.investmentActions.filter(function(e){return e.id===t.investmentAction.id})[0]}),h.dirPaymentPerPartsTemp=angular.copy(h.dirPaymentPerParts),h.sumBankShareAmount=0,h.sumApplicantShareAmount=0,h.sumPaymentStepCount=0,h.dirPaymentPerParts.forEach(function(t){h.sumBankShareAmount+=t.bankShareAmount,h.sumApplicantShareAmount+=t.applicantShareAmount,h.sumPaymentStepCount+=t.paymentStepCount}),h.dirPaymentPerParts})}function d(t){function n(){o.toast("success"),c(!1)}e().then(function(){if(t){var e={dirPaymentId:t};i.deletePaymentFromDirective(a.monitoringId,e).then(n)}})}function m(t){function e(){o.toast("success"),h.dirPaymentPerPart={},c(!1)}if(t)return h.dirPaymentPerPart.monitoring={},i.AddPaymentToDirective(a.monitoringId,h.dirPaymentPerPart).then(e)}function u(t,e){var n=!1;angular.forEach(t,function(t){void 0===t&&(n=!0)}),n||(console.log(t),i.updatePaymentInDirective(a.monitoringId,t).then(function(){o.toast("success"),t.editing=!1,c(!1),h.dirPaymentPerPartsTemp[e]=angular.copy(h.dirPaymentPerParts[e]),h.dirPaymentPerPartsTemp[e]=angular.copy(h.dirPaymentPerParts[e]),h.sumBankShareAmount=0,h.sumApplicantShareAmount=0,h.sumPaymentStepCount=0,h.dirPaymentPerParts.forEach(function(t){h.sumBankShareAmount+=t.bankShareAmount,h.sumApplicantShareAmount+=t.applicantShareAmount,h.sumPaymentStepCount+=t.paymentStepCount})},function(){p(e),c(!0),o.toast("error")}))}function p(t){h.dirPaymentPerParts[t]=angular.copy(h.dirPaymentPerPartsTemp[t])}function g(){for(var t=0;t<h.dirPaymentPerParts.length;t++)if(h.dirPaymentPerParts[t].editing)return!0}function v(t,e,a,n){13===t.keyCode&&(a?u(a,n):m(e))}var h=this;h.dirPaymentPerParts=[],h.dirPaymentPerPart={},h.investmentActions=[],h.sumBankShareAmount=0,h.sumApplicantShareAmount=0,h.sumPaymentStepCount=0,h.deleteDirPaymentPerPart=d,h.addDirPaymentPerPart=m,h.updateDirPaymentPerPart=u,h.retrieve=p,h.editing=g,h.keyPressed=v,s(),n.$on("paymentPerPart-next",function(){console.log("on paymentPerPart-next event"),n.$emit("next",!0)}),n.$on("paymentPerPart-previous",function(){console.log("on paymentPerPart-previous event"),n.$emit("previous",!0)})}t.$inject=["$state","$confirm","$stateParams","$scope","DirectiveService","InvestmentActionService","Util"],angular.module("app.directive").controller("DirectivePaymentPerPartController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u,p){function g(){a.log(I.title),P(),b(),A(),I.monitoringId&&E(!0),n.$parent.vm.getAllowedActions(!0).then(function(t){I.allowedAction=t})}function v(t){return t.$invalid?void(I.savingStatus=1):void(I.monitoringId?f():h())}function h(){i.createDirective(I.directive).then(function(e){r.toast("success"),t.go("root.directive.details",{directiveId:e.id})})}function f(){return I.loading=!0,console.log(n.directiveDetailsForm.$invalid),n.directiveDetailsForm.$invalid?(r.toast("error","Please fill all required fields"),I.loading=!1,{then:function(t,e){return"function"==typeof e?e():void 0}}):i.updateDirective(I.monitoringId,I.directive).then(function(){r.toast("success"),I.savingStatus=2,E(!1)},function(){r.toast("error"),I.loading=!1})}function A(){return s.getAllEconomicSections().then(function(t){return I.ecomomicSections=t?t:[],I.ecomomicSections})}function b(){return d.getAllCreditSupplyResources().then(function(t){return I.supplyResources=t?t:[],I.supplyResources})}function P(){return c.getAllDirectiveApprovalPlaces().then(function(t){return I.approvalPlaces=t?t:[],I.approvalPlaces})}function E(t){return n.$parent.vm.getDirective(t).then(function(t){return console.log("Directive Detail getDirectiveById",t),I.directive=t?t:{},I.loading=!1,I.directive})}function T(t){if(!t||""===t)return[];var e={query:t.toString()};p.searchEmployees(e,{}).then(function(t){I.allEmployees=t.content})}var I=this;l("sDate");I.directive={},I.approvalPlaces=[],I.supplyResources=[],I.caseExperts=[],I.ecomomicSections=[],I.planTypes=r.baseInfo("standardPlanTypes"),I.title="Directive Detail Controller",I.noSpaceRegex=m,I.savingStatus=0,I.monitoringId=e.monitoringId,I.telRegex=u,g(),I.saveDirective=v,I.createDirective=h,I.fillTheFields=!0,I.savingStatus=0,I.allEmployees=[],I.refreshEmployees=T,I.loading=!0,n.$on("details-next",function(t,e){console.log("on details-next event",e),e?f().then(function(){n.$emit("next",!0)},function(){n.$emit("next",!1)}):n.$emit("next",!0)}),n.$on("details-previous",function(t,e){console.log("on details-previous event",e),e?f().then(function(){n.$emit("previous",!0)},function(){n.$emit("next",!1)}):n.$emit("previous",!0)})}t.$inject=["$state","$stateParams","$log","$scope","DirectiveService","Util","UserService","EconomicSectionService","$filter","DirectiveApprovalPlaceService","CreditSupplyResourceService","noSpaceRegex","telRegex","EmployeeService"],angular.module("app.directive").controller("DirectiveDetailsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){a.log(m.title),console.log("ContractPreConditionsController "),e.monitoringId&&s(!0),n.$parent.vm.getAllowedActions(!0).then(function(t){m.allowedAction=t})}function s(t){return n.$parent.vm.getMonitoring(t).then(function(t){return m.dirLicenses=t?t.dirLicenses:[],console.log("vm.dirLicenses = ",m.dirLicenses),m.directive})}function l(a){t().then(function(){if(a){var t={dirLicenseId:a};i.deleteDirLicenseFromDirective(e.monitoringId,t).then(function(){r.toast("success"),s(!1)})}})}function c(){return i.addDirLicenseToDirective(e.monitoringId,m.dirLicense).then(function(){r.toast("success"),m.dirLicense={},s(!1)})}function d(t){13===t.keyCode&&c()}var m=this;m.dirLicenses=[],m.dirLicense={},m.directive={},m.deleteDirLicense=l,m.addDirLicense=c,m.keyPressed=d,o(),n.$on("license-next",function(){console.log("on license-next event"),n.$emit("next",!0)}),n.$on("license-previous",function(){console.log("on license-previous event"),n.$emit("previous",!0)})}t.$inject=["$confirm","$stateParams","$log","$scope","DirectiveService","Util"],angular.module("app.directive").controller("DirectiveLicenseController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){a.log(p.title),console.log("ContractPreConditionsController "),e.monitoringId&&s(!0),r.$parent.vm.getAllowedActions(!0).then(function(t){p.allowedAction=t})}function s(t){return r.$parent.vm.getMonitoring(t).then(function(t){return p.contractPreConditions=t?t.dirConditions:[],p.defaultItems=angular.copy(p.contractPreConditions),p.contractPreConditions})}function l(a){t().then(function(){if(a){var t={dirConditionId:a};n.deleteConditionFromDirective(e.monitoringId,t).then(function(){i.toast("success"),s(!1)})}})}function c(){return n.AddConditionToDirective(e.monitoringId,p.contractPreCondition).then(function(){i.toast("success"),p.contractPreCondition={},s(!1)})}function d(t){var a={dirConditionId:t.id};return n.updateConditionInDirective(e.monitoringId,t,a).then(function(){i.toast("success"),s(!1)})}function m(){p.contractPreConditions=angular.copy(p.defaultItems)}function u(t,e){console.log(t.keyCode),13===t.keyCode?e?d(e):c():27===t.keyCode&&e&&m()}var p=this;p.contractPreConditions=[],p.contractPreCondition={},p.deleteContractPreCondition=l,p.addContractPreCondition=c,p.updateContractPreCondition=d,p.cancelUpdate=m,p.keyPressed=u,o(),r.$on("contractPreConditions-next",function(){console.log("on contractPreConditions-next event"),r.$emit("next",!0)}),r.$on("contractPreConditions-previous",function(){console.log("on contractPreConditions-previous event"),r.$emit("previous",!0)})}t.$inject=["$confirm","$stateParams","$log","DirectiveService","Util","$scope"],angular.module("app.directive").controller("ContractPreConditionsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){n.log(C.title),m(),u(!0),i.$parent.vm.getAllowedActions(!0).then(function(t){C.allowedAction=t})}function d(){0===C.contracts.length?(C.contract.totalAmountCount=!0,C.contract.interestAmountCount=!0):C.contracts.length>=1&&3===C.contracts[C.contracts.length-1].type.id&&(9===C.contract.type.id||14===C.contract.type.id)?(C.contract.totalAmountCount=!1,C.contract.interestAmountCount=!0,C.contract.totalAmount=C.contracts[C.contracts.length-1].totalAmount+C.contracts[C.contracts.length-1].interestAmount):(C.contract.totalAmountCount=!1,C.contract.interestAmountCount=!1)}function m(){o.getAllContractTypes().then(function(t){return C.contractTypes=t?t:[],C.contractTypes})}function u(t){return i.$parent.vm.getMonitoring(t).then(function(t){return C.contracts=t?t.dirContracts:[],C.contract.interestRate=0,0===C.contracts.length?(C.contract.totalAmountCount=!0,C.contract.interestAmountCount=!0):(C.contract.totalAmountCount=!1,C.contract.interestAmountCount=!1),C.sumContractTotalAmount=0,C.sumInstallmentCount=0,C.sumInterestAmount=0,C.sumInterestAndOriginAmount=0,C.contracts.forEach(function(t){C.sumContractTotalAmount+=t.totalAmount,C.sumInstallmentCount+=t.installmentCount,C.sumInterestAmount+=t.interestAmount,C.sumInterestAndOriginAmount+=t.totalAmount+t.interestAmount}),p(),C.contracts})}function p(){C.sumAmount=0,C.contracts.forEach(function(t){t.interestAmountCount&&(C.sumAmount+=t.interestAmount),t.totalAmountCount&&(C.sumAmount+=t.totalAmount)})}function g(t){r.getDirectiveContractById(t).then(function(e){return C.contractId=t,C.contract=e?e:[],C.contract})}function v(t){C.contractId?f(t):h(t)}function h(t){return t&&t.$invalid?void s.toast("error","لطفا تمامی مقادیر را به درستی وارد نمایید!"):void r.AddDirectiveContract(a.monitoringId,C.contract).then(function(){s.toast("success"),C.contract.type&&1===C.contract.type.id&&(C.contract.interestRate=0),console.log(C.contract),u(!1),C.contract={}})}function f(t,e){var n={dirContractId:t?t.id:C.contractId};t=t?t:C.contract,r.updateDirectiveContract(a.monitoringId,t,n).then(function(){s.toast("success"),p(),S(e)})}function A(t){C.contract={},t||l.scrollTo(0,0)}function b(){C.contract.totalAmount&&C.contract.interestRate?(C.contract.contractInterest=C.contract.totalAmount*C.contract.interestRate/100,C.contract.interest=C.contract.totalAmount+C.contract.contractInterest):(C.contract.contractInterest=0,C.contract.interest=0)}function P(t){C.editing=!C.editing,g(t),b()}function E(e){t().then(function(){if(e){var t={dirContractId:e};r.deleteDirectiveContract(a.monitoringId,t).then(function(){s.toast("success"),u(!1)})}})}function T(t,e){var a={interestRate:[2,3,4,5,6,7,8,9,10,11,13,14],installmentCount:[8,9,10,11,13,14],installmentInterval:[8,9,10,11,13,14],participationDuration:[2,3,4,5,6,7],respiratoryPeriod:[9,10,11,13,14],nominalAmount:[12]};return e=e||C.contract.type,e?a[t].indexOf(e.id)>-1:!1}function I(t){var e={1:0,2:6,3:4,4:4,5:4,6:4,7:4,8:5,9:6,10:6,11:6,12:1,13:6,14:6};return e[t]}function S(t){C.toggleEdit[t]=!C.toggleEdit[t],C.editing=!1,u(!1)}var C=this;C.directive={},C.contracts=[],C.contract={},C.contractTypes=[],C.tableParams=new e({},{counts:[],getData:u}),C.toggleAddEdit=!0,C.sumContractTotalAmount=0,C.sumInstallmentCount=0,C.sumInterestAmount=0,C.sumInterestAndOriginAmount=0,C.sumAmount=0,C.toggleEdit=[],C.title="Contract List Controller Active",C.monitoringId=a.monitoringId,C.addEditContract=v,C.getDirContractById=g,C.backToList=A,C.getContractInterest=b,C.editDirContract=P,C.deleteDirContract=E,
C.updateContract=f,C.requiredField=T,C.numberOfFields=I,C.cancelEdit=S,C.fillNecessaryCheckboxes=d,c(),i.$on("contract-next",function(){console.log("on contract-next event"),i.$emit("next",!0)}),i.$on("contract-previous",function(){console.log("on contract-previous event"),i.$emit("previous",!0)})}t.$inject=["$confirm","NgTableParams","$stateParams","$log","$scope","DirectiveService","ContractTypeService","Util","$window"],angular.module("app.directive").controller("DirectiveContractListController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){console.log("ContractAssuranceTypesController "),s(),e.monitoringId&&l(!0),a.$parent.vm.getAllowedActions(!0).then(function(t){A.allowedAction=t})}function s(){return i.getAllAssurances().then(function(t){return A.assuranceTypes=t?t:[],A.assuranceTypes})}function l(t){return a.$parent.vm.getMonitoring(t).then(function(t){return A.directive=t?t.directive:{},A.contractAssuranceTypes=t?t.dirAssurances:[],A.contractAssuranceTypesTemp=angular.copy(A.contractAssuranceTypes),A.sumPercent=0,A.showError=!0,A.contractAssuranceTypes.forEach(function(t){A.sumPercent+=t.percent,"INTEREST"==t.criterionAssurance&&(A.showError=!1)}),A.requiredPercentageDone=A.directive.dirRequiredAssurancePercentage>=100,A.directive})}function c(a){function i(){r.toast("success"),l(!1)}t().then(function(){if(a){var t={dirAssuranceId:a};n.deleteAssuranceFromDirective(e.monitoringId,t).then(i)}})}function d(){function t(){r.toast("success"),A.contractAssuranceType={},l(!1)}return n.AddAssuranceToDirective(e.monitoringId,A.contractAssuranceType).then(t)}function m(){return n.updateDirective(e.monitoringId,A.directive).then(function(){r.toast("success"),A.requiredPercentageDone=!0;for(var t=0;t<A.contractAssuranceTypes.length;t++)if("REST"===A.contractAssuranceTypes[t].limit){A.contractAssuranceTypes[t].percent=A.directive.dirRequiredAssurancePercentage,u(A.contractAssuranceTypes[t],t);break}},function(){})}function u(t,a){t.percent&&n.updateAssuranceInDirective(e.monitoringId,t).then(function(){r.toast("success"),t.editing=!1,A.contractAssuranceTypesTemp[a]=angular.copy(A.contractAssuranceTypes[a])},function(){p(a)})}function p(t){A.contractAssuranceTypes[t]=angular.copy(A.contractAssuranceTypesTemp[t])}function g(t){"REST"===t.limit&&(t.percent=A.directive.dirRequiredAssurancePercentage)}function v(){if(console.log(A.helpItem),A.helpItem.assuranceType&&A.helpItem.amount){var t=angular.copy(A.helpItem);A.helpItems.push(t),A.helpItem={},f()}}function h(t){A.helpItems.splice(t,1),f()}function f(){var t=0;A.helpItems.forEach(function(e){t+=e.amount}),A.helpItems.forEach(function(e){e.percent=A.helpItemTotal*(e.amount/t),e.desc="مقدار "+e.percent+" ٪  وثیقه "+e.assuranceType.type+" در مصوبه ثبت شود."})}var A=this;A.contractAssuranceTypes=[],A.contractAssuranceType={},A.directive={},A.assuranceTypes=[],A.limits=[{value:"MAXIMUM",name:"حداکثر"},{value:"MINIMUM",name:"حداقل"},{value:"EQUAL",name:"برابر"},{value:"REST",name:"مابقی"}],A.criterions=[{value:"ORIGIN",name:"اصل تسهیلات"},{value:"INTEREST",name:"اصل و سود"}],A.sumPercent=0,A.helpItem={},A.helpItems=[],A.showHelpItem=!1,A.deleteContractAssuranceType=c,A.addContractAssuranceType=d,A.saveDirective=m,A.updateContractAssuranceType=u,A.retrieve=p,A.selectType=g,A.addHelpItem=v,A.removeHelpItem=h,A.calcHelpItems=f,o(),a.$on("assuranceTypes-next",function(t,e){console.log("on assuranceTypes-next event"),e?m().then(function(){a.$emit("next",!0)}):a.$emit("next",!0)}),a.$on("assuranceTypes-previous",function(t,e){console.log("on assuranceTypes-previous event"),e?m().then(function(){a.$emit("previous",!0)}):a.$emit("previous",!0)})}t.$inject=["$confirm","$stateParams","$scope","DirectiveService","AssuranceTypeService","Util"],angular.module("app.directive").controller("ContractAssuranceTypesController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){a.log(P.title),d(),P.monitoringId&&c(!0),s.$parent.vm.getAllowedActions(!0).then(function(t){P.allowedAction=t})}function c(t){s.$parent.vm.getMonitoring(t).then(function(t){return P.applicant=t.applicant,P.lastCheck=t.applicant?t.applicant.applicantType:"",P.boards=t.monitoringBoards,null!==P.applicant&&"LEGAL"===P.applicant.applicantType&&(P.showLegal=!0),console.log("vm.applicant = ",P.applicant),console.log("vm.boards = ",P.boards),P.applicant})}function d(){return n.getAllProvinces().then(function(t){return P.provinces=t?t:[],P.provinces})}function m(){return i.getBoardsApplicant(e.monitoringId).then(function(t){return P.boards=t?t:[],P.board={},P.boards})}function u(){P.board.name&&P.board.nationalId&&i.AddBoardToApplicant(e.monitoringId,P.board).then(function(){r.toast("success"),s.$parent.vm.getMonitoring(!1),P.board={},m()})}function p(t){t.name&&t.nationalId&&i.updateBoardInApplicant(e.monitoringId,t).then(function(){r.toast("success"),s.$parent.vm.getMonitoring(!1),m()})}function g(t){t.editing=!1,m()}function v(a){console.log("delete board"),t().then(function(){var t={boardId:a};i.deleteBoardFromApplicant(e.monitoringId,t).then(function(){s.$parent.vm.getMonitoring(!1),r.toast("success"),m()})})}function h(t){return console.log("SetApplicantInDirective",P.applicant),t&&P.applicant&&"LEGAL"===P.applicant.applicantType&&0===P.boards.length?(r.toast("error","حد اقل یک عضو هیئت مدیره برای مشتری حقوقی اضافه کنید!"),{then:function(){s.$parent.vm.loading=!1}}):P.applicant?i.SetApplicantInDirective(e.monitoringId,P.applicant).then(function(){P.savingStatus=2,c(),r.toast("success")}):void 0}function f(){e.monitoringId?c(!0):P.directive={}}function A(){P.board.name&&P.board.nationalId?P.classAddBoard="":P.classAddBoard="disabled"}function b(t){13===t.keyCode&&u()}var P=this;P.directive={},P.applicant={},P.citis=[],P.citis=[],P.provinces=[],P.board={},P.boards=[],P.showLegal=!1,P.applicantTypes=[{value:"LEGAL",title:"شرکت(حقوقی)"},{value:"NATURAL",title:"شخص حقیقی"}],P.monitoringId=e.monitoringId,P.title="Applicant Controller Active",P.nationalIdRegex=o,P.classAddBoard="disabled",P.SetApplicantInDirective=h,P.deleteBoard=v,P.addBoardToApplicant=u,P.cancelAdd=f,P.AllowAddBoard=A,P.keyPressed=b,P.cancelUpdate=g,P.updateBoard=p,l(),s.$on("applicant-next",function(t,e){console.log("on applicant-next event"),e&&P.applicant?P.applicant&&h(!0).then(function(){s.$emit("next",!0)},function(){s.$emit("next",!0)}):s.$emit("next",!0)}),s.$on("applicant-previous",function(t,e){console.log("on applicant-previous event"),e&&P.applicant?h(!0).then(function(){s.$emit("previous",!0)},function(){s.$emit("previous",!0)}):s.$emit("previous",!0)})}t.$inject=["$confirm","$stateParams","$log","ProvinceService","DirectiveService","Util","nationalIdRegex","$scope"],angular.module("app.directive").controller("ApplicantController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u,p,g,v){function h(){n.debug("contract details module activated"),A(),l.identity().then(function(t){O.currentUser=t,P(),"STAFF"===O.currentUser.level?E():O.teamHeads=[{}]}),T(),O.isModal=!!i}function f(){if(!o.compareObjects(O.contract.directive,O.tempContract.directive)){({number:O.contract.directive.number});d.setDirectiveToContract(O.contract.id,O.contract.directive.number).then(function(e){o.toast("success","APP.MESSAGES.SUCCESS"),O.tempContract.directive=angular.copy(O.contract.directive),e["new"]&&(o.toast("success","APP.MESSAGES.NEW_DIRECTIVE"),t.go("root.directive.details",{directiveId:e.id}))},function(){o.toast("error","APP.MESSAGES.FAIL","edit issue error"),O.contract.directive=angular.copy(O.tempContract.directive)})}}function A(){function t(t){return O.contract=t,O.contract.reportDate=new Date(O.contract.reportDate),O.contract.contractDate=new Date(O.contract.contractDate),c?O.isModal||g(window.print,2e3):O.tableParams=new p({},{counts:[5,10,20,50,100],getData:C}),O.contract}return d.getContractById(O.contractId).then(t)}function b(){i.dismiss()}function P(){s.getByRole("OBSERVER",O.province.id).then(function(t){O.observers=t?t:[]})}function E(){s.getByRole("TEAM_HEAD",null).then(function(t){t.forEach(function(t){O.teamHeadsMap[t.username]=t}),O.teamHeads=t?t:[],console.log(O.teamHeadsMap[442])})}function T(){m.getAllProvinces().then(function(t){O.provinces=[{id:null,code:null,title:"همه"}].concat(t)})}function I(){if(O.firstExpert){O.loading=!0;var t={expertUsername1:O.firstExpert.username,expertUsername2:O.secondExpert?O.secondExpert.username:null,teamHeadUserName:O.teamHead?O.teamHead.username:null,firstDescription:O.firstDescription?O.firstDescription:null};l.identity().then(function(){function e(t){o.toast("success","نظارت با شماره "+N(t.number)+" با موفقیت ایجاد شد."),a.$emit("stateChanged"),g(function(){i.close(),O.loading=!1},1e3)}function n(t){o.toast("error","APP.ERRORS"+t.status),O.loading=!1}"STAFF"===O.currentUser.level?d.addContractMonitoringStaffLevel(O.contractId,t).then(e,n):"PROVINCE"===O.currentUser.level?d.addContractMonitoringProvinceLevel(O.contractId,t).then(e,n):d.addContractMonitoringBranchLevel(O.contractId,t).then(e)})}}function S(){O.toggleAdd=!1,O.firstExpert={},O.secondExpert={}}function C(){var t={page:0,size:100},e={contractId:O.contract.id,stepIds:[0,2,3,4,5,6,7,8,9,10]};return u.searchMonitoring(e,t).then(function(t){return O.monitorings=t?t.content:[],O.isModal||window.print(),O.monitorings})}var O=this;O.contractId=r,O.toggleAdd=!1,O.users=[];var N=e("pNumber");O.observers=[],O.province={},O.contract={},O.tempContract={},O.teamHeadsMap={},O.test="test",O.toggleContractDirectiveEdit=!1,O.fromMonitoring=c,console.log("vm.fromMonitoring = ",O.fromMonitoring),O.close=b,O.cancelAdd=S,O.addMonitoring=I,O.editContractDirective=f,O.groupFinder=s.groupTitle,h()}t.$inject=["$state","$filter","$rootScope","$log","$uibModalInstance","id","Util","UserService","Principal","fromMonitoring","ContractService","ProvinceService","MonitoringService","NgTableParams","$timeout","BranchService"],angular.module("app.contract").controller("ContractDetailsModalController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u){function p(){console.log(E.title+" module activated",o,s),E.isBranch=!m.isInAnyRole(["ADMIN","FINAL_HEAD","STAFF_DISPATCHER","PROVINCE_DISPATCHER","PROVINCE_HEAD"]),E.currentUser=m.getIdentity(),E.province=E.currentUser.province,A(),"STAFF"===E.currentUser.level?(b(),P()):E.teamHeads=[{}],m.identity().then(function(t){console.log(t),m.isInAnyRole(["ADMIN","FINAL_HEAD","STAFF_DISPATCHER"])?(E.level=E.levels[0].value,E.canSetLevel=!0):m.isInAnyRole(["PROVINCE_DISPATCHER","PROVINCE_HEAD"])?E.level=E.levels[1].value:E.level=E.levels[2].value})}function g(){E.id?h([E.id]):s.length>0&&h(s)}function v(){t.dismiss("cancel")}function h(t){E.loading=!0;var e={expertUsername1:E.firstExpert.username,expertUsername2:E.secondExpert?E.secondExpert.username:null,teamHeadUserName:E.teamHead?E.teamHead.username:null,staffApproverUsername:E.staffApproverUsername?E.staffApproverUsername.username:null,firstDescription:E.firstDescription?E.firstDescription:null};t.forEach(function(t){f(t,e)})}function f(a,r){function o(a){d.toast("success","نظارت با شماره "+T(a.number)+" با موفقیت ایجاد شد."),i.$emit("stateChanged"),E.isBranch&&(e.go("root.monitoring.monitoring-details",{monitoringId:a.id}),console.log("in if")),n(function(){console.log("after if in timeout"),t.close(),E.loading=!1},2e3)}function s(){E.loading=!1}E.level===E.levels[0].value?l.addContractMonitoringStaffLevel(a,r).then(o,s):E.level===E.levels[1].value?l.addContractMonitoringProvinceLevel(a,r).then(o,s):l.addContractMonitoringBranchLevel(a,r).then(o)}function A(){c.getByRole("OBSERVER").then(function(t){E.observers=t?t:[],E.isBranch&&(E.firstExpert=m.getIdentity())})}function b(){c.getByRole("TEAM_HEAD").then(function(t){E.teamHeads=t?t:[]})}function P(){var t=["STAFF_APPROVER","FINAL_HEAD"];c.getByRoles(t).then(function(t){E.staffApprovers=t?t.content:[]})}var E=this;E.title="Add Monitoring",E.id=o,E.contractIds=s,E.users=[];var T=a("pNumber");E.observers=[],E.levels=[{value:"STAFF",caption:"ستاد"},{value:"PROVINCE",caption:"استان"},{value:"BRANCH",caption:"شعبه"}],E.cancel=v,E.ok=g,E.groupFinder=c.groupTitle,p()}t.$inject=["$uibModalInstance","$state","$filter","$timeout","$rootScope","$scope","id","contractIds","ContractService","UserService","Util","Principal","ProvinceService"],angular.module("app.contract").controller("AddMonitoring",t)}(),function(){"use strict";angular.module("auth",["ui.router"])}(),function(){"use strict";function t(t){function e(){t.info("reset pass module ativated.")}var a=this;a.title="ResetPassController",e()}t.$inject=["$log"],angular.module("auth").controller("ResetPassController",t)}(),function(){"use strict";function t(t){function e(){t.info("register module ativated.")}var a=this;a.title="RegisterController",e()}t.$inject=["$log"],angular.module("auth").controller("RegisterController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){t.info("login module activated."),g()}function m(){function t(){s(function(){r.identity().then(function(t){if(v.showChangPass=!t.firstLogin,!v.showChangPass){var e=r.isInAnyRole(["ADMIN","FINAL_HEAD","STAFF_DISPATCHER","PROVINCE_HEAD","BRANCH_DISPATCHER"]);e?n.go("root.contract-list",{settlementStateCode:"1788"}):n.go("root.monitoring-cartable",{})}},function(t){console.log("error =",t);var a="دسترسی معتبر احراز نشد";e.toast("error",a),p()})},100)}function a(){p()}var i={username:e.encodeCredential(v.username),password:e.encodeCredential(v.password)},o={userTypeCaptcha:v.userTypeCaptcha};c.getLogin(i,o).then(t,a)}function u(t){var a={newPassword:e.encodeCredential(v.newPassword),repeatNewPassword:e.encodeCredential(v.newPasswordRepeat),oldPassword:e.encodeCredential(v.oldPassword)};l.changeSecurePassword(a).then(function(){e.toast("success"),v.newPassword=null,v.newPasswordRepeat=null,v.oldPassword=null,t.$setPristine();var a=r.isInAnyRole(["ADMIN","FINAL_HEAD","STAFF_DISPATCHER","PROVINCE_HEAD","BRANCH_DISPATCHER"]);a?n.go("root.contract-list",{settlementStateCode:"1788"}):n.go("root.monitoring-cartable",{})})}function p(){v.userTypeCaptcha="",v.date=new Date}function g(){v.version=i.getVersion(function(t){v.version=t})}var v=this;v.title="LoginController",n.user=v.user,v.user={},v.showChangPass=!1,v.captchaUrl=a+"captcha/",console.log(" vm.captchaUrl  = ",v.captchaUrl),v.date=new Date,v.onSubmit=m,v.resetCaptcha=p,v.changeSecurePassword=u,d()}t.$inject=["$log","Util","host","$state","homeService","Principal","$rootScope","$timeout","UserService","PrimaryUserService"],angular.module("auth").controller("LoginController",t)}(),function(){"use strict";function t(t){function e(){t.debug("forget pass module ativated.")}var a=this;a.title="ForgetPassController",e()}t.$inject=["$log"],angular.module("auth").controller("ForgetPassController",t)}(),function(){"use strict";function t(t){function e(){return t.get("data/sidebar-6.json").then(a)}function a(t){return t.data}this.getSidebar=e}t.$inject=["$http"],angular.module("app").service("sidebarService",t)}(),function(){"use strict";function t(t){function e(t,e,a,n){function i(){a.logout()}function r(){a.identity().then(function(t){u.user=t})}function o(){r(),m()}function s(t){t===u.collapseVar?u.collapseVar=0:u.collapseVar=t}function l(t){t===u.multiCollapseVar?u.multiCollapseVar=0:u.multiCollapseVar=t}function c(t){if(!t||!t.length)return!0;if(!u.user.roles||!u.user.roles.length)return!1;for(var e=0;e<t.length;e++)for(var a=0;a<u.user.roles.length;a++)if(t[e]===u.user.roles[a].role)return!0;return!1}function d(t){if(!t||!t.length)return!1;if(!u.permissions||!u.permissions.length)return!1;for(var e=0;e<t.length;e++)for(var a=0;a<u.permissions.length;a++)if(t[e]===u.permissions[a].permission.name&&!u.permissions[a].denied)return!0;return!1}function m(){n.getMyStat().then(function(e){u.myStat=e,t.getSidebar().then(function(t){u.data=t,u.data.items.forEach(function(t){"APP.MODULES.CONTRACT.TITLE"==t.caption?t.params.count=u.myStat.needToMonitorContractsNumber:"APP.MODULES.MONITORING.TITLE"==t.caption?(t.params.count=u.myStat.myCartableMonitoringsNumber+u.myStat.myCreatedMonitoringsNumbers,t.children.forEach(function(t){"APP.MODULES.MONITORING.CARTABLE"==t.caption&&(t.params.count=u.myStat.myCartableMonitoringsNumber),"APP.MODULES.MONITORING.MISSIONS"==t.caption&&(t.params.count=u.myStat.myCreatedMonitoringsNumbers)})):"APP.MODULES.TRACE.TITLE"==t.caption&&(t.params.count=u.myStat.myAlertedTracesNumber+u.myStat.myWaitingTracesNumber,t.children.forEach(function(t){"APP.MODULES.TRACE.CARTABLE"==t.caption&&(t.params.count=u.myStat.myAlertedTracesNumber),"APP.MODULES.TRACE.WAITING"==t.caption&&(t.params.count=u.myStat.myWaitingTracesNumber)}))})})})}var u=this;u.selectedMenu="dashboard",u.collapseVar=0,u.multiCollapseVar=0,u.myStat={},u.permissions=[],a.identity().then(function(){u.user=a.getIdentity(),a.getMyPermissions().then(function(t){u.permissions=t,u.loaded=!0})}),u.check=s,u.multiCheck=l,u.hasRole=c,u.hasPermission=d,u.user={},u.signOutToggle=!0,u.logout=i,u.getUserName=r,o(),e.$on("stateChanged",function(){m(),console.log("stateChanged")})}return e.$inject=["sidebarService","$scope","Principal","UserService"],{templateUrl:"app/main/sidebar/sidebar.html",restrict:"E",replace:!0,controller:e,controllerAs:"sideVm",bindToController:!0}}t.$inject=["Principal"],angular.module("app").directive("sidebar",t)}(),function(){"use strict";function t(){function t(t){function e(){a(),console.log("Header Controller active")}function a(){t.identity().then(function(t){i.user=t})}function n(){console.log("logout"),t.logout()}var i=this;i.navOpen=!0,i.user={},i.logout=n,i.getUserName=a,e()}return t.$inject=["Principal"],{templateUrl:"app/main/header/header.html",restrict:"E",replace:!0,controller:t,controllerAs:"headerVm",bindToController:!0}}angular.module("app").directive("samatHeader",t)}(),function(){"use strict";function t(){return{templateUrl:"app/main/footer/footer.html",restrict:"E",replace:!0}}angular.module("app").directive("samatFooter",t)}(),function(){"use strict";function t(){function t(t,e,a,n){t.$watch(function(){return e.attr("min")},function(e){a.min&&(t.min=new Date(parseInt(a.min)))}),t.$watch(function(){return e.attr("max")},function(e){a.max&&(t.max=new Date(parseInt(a.max)))}),t.isValidDate=function(e){var a=!1,i=void 0;if("Invalid date"===e)return a;try{"string"==typeof e?(i=moment(e,"YYYY-MM-DD"),a=i.isValid()):"number"==typeof e&&(i=moment(e,"x"),a=i.isValid())}catch(r){}return n.$setValidity("min",i&&t.min?i.diff(t.min)>-1:!0),n.$setValidity("max",i&&t.max?i.diff(t.max)<0:!0),a},n.$formatters.push(function(t){return t?("number"==typeof t?t=moment(t).format("jYYYY/jMM/jDD"):"string"==typeof t&&(t=moment(t,"YYYY-MM-DD").format("jYYYY/jMM/jDD")),t):t}),n.$parsers.push(function(t){return"string"==typeof t&&(t=moment(t,"jYYYY/jMM/jDD").format("YYYY-MM-DD")),t})}var e={link:t,replace:!0,restrict:"E",require:"ngModel",templateUrl:"app/directives/simpleDate/simple-date.html"};return e}angular.module("app").directive("simpleDate",t)}(),function(){"use strict";function t(){var t={bindToController:!0,controller:e,controllerAs:"vm",restrict:"E",scope:{cancel:"&?","delete":"&?",disabled:"=?",edit:"&?",hasDelete:"=?",toggle:"=?",hasEdit:"=?",hasEditPage:"=?"},templateUrl:"app/directives/ng-table/command-buttons.html"};return t}function e(){function t(){return e.hasEditPage?void e.edit():void(e.toggle=!e.toggle)}var e=this;e.toggled=t}angular.module("app").directive("commandButtons",t)}(),angular.module("app").directive("numbersOnly",function(){return{require:"ngModel",link:function(t,e,a,n){function i(t){if(t){var e=t.replace(/[^0-9\.]/g,""),a=e.indexOf("."),i=t.substring(a+1,e.length),r=i.indexOf(".");return r>-1&&(e=e.substring(0,a+r+1)),e!==t&&(n.$setViewValue(e),n.$render()),e}return void 0}n.$parsers.push(i)}}}),angular.module("app.peity",[]).directive("peityPieChart",getPeityDirective.bind(this,"pie")).directive("peityDonutChart",getPeityDirective.bind(this,"donut")).directive("peityBarChart",getPeityDirective.bind(this,"bar")).directive("peityLineChart",getPeityDirective.bind(this,"line")).run(function(){"use strict";$.fn.peity.defaults.pie={delimiter:null,fill:["#40babd","#f5f5f5","#92d1d2"],height:null,radius:16,width:null},$.fn.peity.defaults.donut={delimiter:null,fill:["#40babd","#f5f5f5","#92d1d2"],height:null,innerRadius:null,radius:16,width:null},$.fn.peity.defaults.line={delimiter:",",fill:"#92d1d2",height:32,max:null,min:0,stroke:"#40babd",strokeWidth:1,width:64},$.fn.peity.defaults.bar={delimiter:",",fill:["#40babd"],height:32,max:null,min:0,padding:.1,width:64}}),function(){"use strict";function t(){function t(t,e,a){function n(){t.model=t.parents[t.parents.length-1]}Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),t.id=a.id||"hierarchy",t["class"]=a["class"]||"hierarchy",t.caption=t.caption||"name",t.children=t.children||"organizations",t.parents=[t.tree],n(),t.getChildren=function(e){if(!t.tree)return void console.error("hierarchy.getChildren",t.tree,e);if(!e)return[t.tree];for(var a=[t.tree];a.length;){var n=a.pop();if(n[t.children].forEach(function(t){a.push(t)}),n.id===e.id)return n[t.children]}return[]},t.addChild=function(){t.treeModel&&(t.parents.push(angular.copy(t.treeModel)),n())},t.prone=function(e){t.parents=t.parents.slice(0,e+1),n()}}var e={link:t,replace:!0,restrict:"E",templateUrl:"app/directives/hierarchy/hierarchy.html",scope:{tree:"=",caption:"@?",children:"@?",model:"="}};return e}angular.module("app").directive("hierarchy",t)}(),function(){"use strict";function t(t,e){function a(a,n){function i(){var t,e,i,s,d,p,g,v,h,f,A,b,P,E,T,I,S,C,O,N,R;for(t=a.amount/a.max,e=a.realMax/a.max,i=[0,e/l,(1-e)/l],C=.75,s=d3.select(n[0]),d={top:.2*s[0][0].offsetWidth,right:.1*s[0][0].offsetWidth,bottom:.3*s[0][0].offsetWidth,left:.1*s[0][0].offsetWidth},p=1*s[0][0].offsetWidth-d.left-d.right,g=p||100,v=.1*p,h=Math.min(p,g)/2,f=s.append("svg").attr("width",p+d.left+d.right).attr("height",g+d.top+d.bottom-.6*s[0][0].offsetWidth).attr("class","gauge-"+a.max).attr("class","gauge-"+a.max).style("display","block").style("margin","auto"),A=f.append("g").attr("transform","translate("+(p+2*d.left)/2+", "+(g+d.top)/2+")"),b=P=1,E=l;E>=1?E>=P:P>=E;b=E>=1?++P:--P)I=m(C+i[P-1]),S=I+m(i[P]),C+=i[P-1],O=0===b?0:c/2,N=b===l?0:c/2,R=d3.svg.arc().outerRadius(h-o).innerRadius(h-o-v).startAngle(I+O).endAngle(S-N),A.append("path").attr("class","arc chart-color"+b).attr("d",R);var y=m(a.amount/a.max/2),M=p/3+1.5*v,D=-Math.cos(y)*M*.94,L=-Math.sin(y)*M*.94,U=a.amount>.001?a.amount:0,w=m(a.realMax/a.max/2);-Math.cos(w)*M,-Math.sin(w)*M;A.append("text").style("text-shadow","0 0 5px #fff").style("font-size",function(){return 20*p/530+"px"}).attr("x",D).attr("y",L).attr("text-anchor",function(){return U/a.max>.5?"start":"end"}).text(u(Math.floor(U/a.max*100)+" % ")),T=new r(.32*p,.04*p),T.drawOn(A,0),T.animateOn(A,t)}var r,o,s,l,c,d,m,u=t("pNumber");t("pCurrency");l=2,c=.05,o=10,d=function(t){return 360*t},m=function(t){return s(d(t))},s=function(t){return t*Math.PI/180},r=function(){function t(t,e){this.len=t,this.radius=e}return t.prototype.drawOn=function(t,e){return t.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this.radius),t.append("path").attr("class","needle").attr("d",this.mkCmd(e))},t.prototype.animateOn=function(t,e){var a;return a=this,t.transition().delay(500).ease("elastic").duration(3e3).selectAll(".needle").tween("progress",function(){return function(t){var n;return n=t*e,d3.select(this).attr("d",a.mkCmd(n))}})},t.prototype.mkCmd=function(t){var e,a,n,i,r,o,s,l,c;return s=m(t/2),e=0,a=0,l=e-this.len*Math.cos(s),c=a-this.len*Math.sin(s),n=e-this.radius*Math.cos(s-Math.PI/2),i=a-this.radius*Math.sin(s-Math.PI/2),r=e-this.radius*Math.cos(s+Math.PI/2),o=a-this.radius*Math.sin(s+Math.PI/2),"M "+n+" "+i+" L "+l+" "+c+" L "+r+" "+o},t}(),i(),angular.element(e).bind("resize",function(){d3.select("svg.gauge-"+a.max).remove(),i()})}return a.$inject=["scope","element"],{restrict:"A",replace:!0,scope:{max:"=?",amount:"=",realMax:"=",min:"=",barWidth:"=?"},link:a}}t.$inject=["$filter","$window"],angular.module("app").directive("gauge",t)}(),function(){"use strict";function t(){var t={restrict:"E",scope:{accept:"@",file:"=",label:"@",uploading:"="},templateUrl:"app/directives/file-upload/file-upload.html"};return t}angular.module("app").directive("fileUpload",t)}(),function(){"use strict";function t(){function t(t,e){function a(e){var a=e.target.files[0];t.fileModel=a?a:void 0,t.$apply()}e.bind("change",a)}var e={link:t,restrict:"A",scope:{fileModel:"="}};return e}angular.module("app").directive("fileModel",t)}(),function(){"use strict";function t(t,e,a){function n(a,n){a.removeAttr("currency-tooltip"),a.attr("uib-tooltip","{{("+n.ngModel+" || 0)|pCurrency:'A'}}"),a.attr("tooltip-trigger","'focus'");var i=t(a);return function(t){if(!e[t.$id.toString()+n.id]){e[t.$id.toString()+n.id]=!0;try{i(t)}catch(a){}}}}return n.$inject=["el","attrs"],{restrict:"A",replace:!1,require:"ngModel",compile:n}}t.$inject=["$compile","$rootScope","$injector"],angular.module("app").directive("currencyTooltip",t)}(),function(){"use strict";function t(t){function e(t,e){function a(){history.back(),t.$apply()}e.bind("click",a)}var a={link:e,replace:!0,restrict:"E",scope:{monitoringId:"=?",contractId:"=?",directiveId:"=?"},templateUrl:"app/directives/back-button/back-button.html"};return a}t.$inject=["$state"],angular.module("app").directive("backButton",t)}(),function(){"use strict";function t(t){function e(e,a){e.$watch("autoFocus",function(e){"true"===e&&t(function(){a[0].focus()})})}var a={link:e,restrict:"A",scope:{autoFocus:"@"}};return a}t.$inject=["$timeout"],angular.module("app").directive("autoFocus",t)}(),function(){"use strict";angular.module("app.usersReport",[])}(),function(){"use strict";function t(t){function e(e,a){return t(n+e+"/"+a).get()}function a(e,a,n,i,r,o){return t("report/getScoreReportDetail").get({action:e,username:a,stepId:n,fromDate:i,toDate:r,provinceId:o})}var n="baseInfo/score/",i=t(n),r="/report/getScoreReport",o=t(r);return{getAllScores:i.get,createScore:i.post,getAllSteps:t(n+"step/getAll/").get,getScore:i.getById,getScoreByStep:e,getReport:o.get,getDetails:a}}t.$inject=["RequestService"],angular.module("app.usersReport").factory("UsersReportService",t)}(),function(){"use strict";function t(t,e){t.state("root.usersReport",{controller:"UsersReportController",controllerAs:"vm",templateUrl:"app/components/usersReport/usersReport.html",url:"/usersReport"}),e.when("/usersReport/{path:.*}","/usersReport")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.usersReport").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){e.log(y.title),c.identity().then(function(t){y.isAdmin=c.isInAnyRole(["ADMIN","AGGREGATE_REPORT","FINAL_HEAD"]),console.log(y.isAdmin)}),m(),h();var t=new Date;t=t.setDate(t.getDate()+1),y.reportParams.toConfirmDate=moment(t).format("YYYY-MM-DD")}function m(){u().then(p)}function u(){return r.getAllSteps().then(function(t){y.sum={};var e=[0,2,3];t.push({id:1,name:"firstExpert",title:"کارشناس اول",finalized:!1}),t.sort(function(t,e){return t.id-e.id}),t.forEach(function(t){t.title=t.title.split("-")[0],t.finalized||e.includes(t.id)||y.items.push({step:t}),y.sum[t.id]={accept:0,reject:0,cartable:0}})})}function p(){r.getAllScores().then(function(t){t.forEach(function(t){M[t.type+""+t.stepId]=t.id,y.items.forEach(function(e){e.step.id===t.stepId&&(e[t.type]=t.score)})})})}function g(t,e){var a={id:M[e+""+t.step.id],score:t[e],step:{id:t.step.id},stepId:t.step.id,type:e};v(a)}function v(t){return r.createScore(t)}function h(){s.getAllProvinces().then(function(t){y.provinces=y.provinces.concat(t)})}function f(){function t(){o.toast("error","Error in getting report data")}A();var e={};y.reportParams&&(e.fromDate=y.reportParams.fromConfirmDate,e.toDate=y.reportParams.toConfirmDate,e.provinceId=y.reportParams.province?y.reportParams.province.id:null),r.getReport(e).then(function(e){y.report=e,N().then(b,t)},t)}function A(){y.report=[],angular.forEach(y.sum,function(t,e){y.sum[e]={accept:0,reject:0,cartable:0}}),y.sums={accept:0,reject:0,cartable:0,averageScore:0,users:0}}function b(){I(),P(),O()}function P(){y.report.forEach(function(t){t.userScores=[],t.finalScore=0,t.sum={accept:0,reject:0,cartable:0},y.items.forEach(function(e){t.userScores.push(E(t,e))}),y.sums.users++,y.sums.averageScore+=t.finalScore}),y.sums.averageScore=y.sums.averageScore/y.sums.users}function E(t,e){var a={accept:0,reject:0,cartable:0};return t.counts.hasOwnProperty(e.step.id)&&(a.accept=t.counts[e.step.id].accept||0,a.reject=t.counts[e.step.id].reject||0,a.cartable=t.counts[e.step.id].cartable||0,t.sum.accept+=t.counts[e.step.id].accept||0,t.sum.reject+=t.counts[e.step.id].reject||0,t.sum.cartable+=t.counts[e.step.id].cartable||0,y.sum[e.step.id].accept+=t.counts[e.step.id].accept||0,y.sum[e.step.id].reject+=t.counts[e.step.id].reject||0,y.sum[e.step.id].cartable+=t.counts[e.step.id].cartable||0,y.sums.accept+=t.counts[e.step.id].accept||0,y.sums.reject+=t.counts[e.step.id].reject||0,y.sums.cartable+=t.counts[e.step.id].cartable||0),t.finalScore+=T(e.step.id,"ACCEPT")*a.accept+T(e.step.id,"REJECT")*a.reject+a.cartable,a}function T(t,e){var a=void 0;return y.items.forEach(function(n){n.step.id===t&&(a=n[e])}),void 0===typeof a&&console.error("action "+e+" not found for step by id "+t),a}function I(){y.report.forEach(function(t){t.counts[1]={accept:0,reject:0,cartable:0},angular.forEach(t.counts,function(e,a){4>a&&1!=a&&(t.counts[1].accept=e.accept||0,t.counts[1].reject=e.reject||0,t.counts[1].cartable+=e.cartable||0,e.accept=0,e.reject=0,e.cartable=0)})})}function S(t,e,n){console.log("vm.reportParams.province = ",y.reportParams.province);var i={action:t,user:e,step:n,provinceId:y.reportParams.province?y.reportParams.province.id:null,fromDate:y.reportParams?y.reportParams.fromConfirmDate:null,toDate:y.reportParams?y.reportParams.toConfirmDate:null};a.open({animation:!0,templateUrl:"app/components/usersReport/scoreDetail/scoreDetail.html",controller:"ScoreDetailController",controllerAs:"vm",backdrop:"static",size:"lg",resolve:{scoreItem:function(){return i}}}),console.log("detail",i)}function C(t){function e(t){return y.users=t.content||[],y.users}return l.searchUsers({query:t}).then(e)}function O(){y.selectedUsers.length?y.report.forEach(function(t){t.hidden=y.selectedUsers.indexOf(t.user.username)<0}):y.report.forEach(function(t){t.hidden=!1})}function N(){var t=y.reportParams.province?y.reportParams.province.id:null,e={};return y.report.forEach(function(t){e[t.user.username]=!0}),l.getAllActiveUsers(t).then(function(t){return y.isAdmin&&t.forEach(function(t){e[t.username]||y.report.push({counts:{},user:t})}),y.report})}function R(){document.getElementById("header-table")&&(document.getElementById("header-table").style.opacity="1",document.body.scrollTop>700||document.documentElement.scrollTop>700?document.getElementById("header-table").style.display="block":document.getElementById("header-table").style.display="none")}var y=this;y.items=[];var M={};y.reportParams={},y.provinces=[{id:null,title:"کلیه استان‌ها"}],y.title="Users Report Controller",y.showDetails=S,y.groupFinder=l.groupTitle,y.refreshUsers=C,y.save=g,y.getReport=f,y.filterByUsername=O,d(),n.$watch(function(){return[angular.element("#main-table")[0].offsetWidth,angular.element("#main-table")[0].offsetHeight].join("x")},function(t){try{console.log("table got resized:",t.split("x")),document.getElementById("header-table").style.width=t.split("x")[0]+"px",document.getElementById("th1").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th2").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th3").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th4").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th5").style.width=t.split("x")[0]/11-20+"px",
document.getElementById("th6").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th7").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th8").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th9").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th10").style.width=t.split("x")[0]/11-20+"px",document.getElementById("th11").style.width=t.split("x")[0]/11-20+"px";var e=angular.element("#header-table")[0].offsetWidth;console.log(e,e/11)}catch(a){console.error("Error on calculating table headers;",a)}}),window.onscroll=function(){R()}}t.$inject=["$confirm","$log","$uibModal","$scope","NgTableParams","UsersReportService","Util","ProvinceService","UserService","Principal"],angular.module("app.usersReport").controller("UsersReportController",t)}(),function(){"use strict";angular.module("app.users",[])}(),function(){"use strict";function t(t,e,a){function n(){var e=y+"/user";return t(e).get(e)}function i(e,a){var n=y+"/user/"+e+"/setSign";return t(n).multipartPost(a,null)}function r(e){var a=y+"/user/"+e+"/getSign";return t(a).get(a)}function o(n,i){var r=e.defer(),o=y+"/user/getByRoleInProvince",s={};i&&(s.provinceId=i),n&&(s.role=n);var l=o+"_P_"+(n||0)+"_p_"+(i||0);return k[l]&&k[l].data&&a().diff(k[l].time)<_?(console.log("cache for "+l),r.resolve(k[l].data),r.promise):t(o).get(s).then(function(t){return k[l]={data:t,time:a()},r.resolve(t),t},function(t){return k[l]=null,r.reject(t),t})}function s(e){var a=y+"/user/getAllActiveUsers",n={};return e&&(n.provinceId=e),t(a).get(n)}function l(n){var i=e.defer(),r=y+"/list",o=[],s=r;n.forEach(function(t){s+="_p_"+t,o.push({role:t})});var l={roles:o};return k[s]&&k[s].data&&a().diff(k[s].time)<_?(console.log("cache for "+s),i.resolve(k[s].data),i.promise):t(r).post(l,{page:0,size:1e4}).then(function(t){return k[s]={data:t,time:a()},t},function(t){return k[s]=null,t})}function c(e,a){var n=R+"/user/"+e+"/assignPermission";return t(n).post(null,a)}function d(e,a){var n=R+"/user/"+e+"/deletePermission";return t(n)["delete"](null,a)}function m(e,a){var n=R+"/user/"+e+"/changeEnabled";return t(n).put(null,{},a)}function u(e,a){var n=R+"/user/"+e+"/resetPassword";return t(n).post(a)}function p(e,a){var n=R+"/secure/user/"+e+"/resetPassword";return t(n).post(a)}function g(e,a){var n=y+"/user/"+e;return t(n).put(null,a)}function v(e,a){var n=y+"/user/"+e+"/assignRole";return t(n).post(null,a)}function h(e,a){var n=R+"/user/"+e+"/deleteRole";return t(n)["delete"](null,a)}function f(e){var a=R+"/user/"+e+"/getPermissions";return t(a).get()}function A(e){var a=y+"/user/me/setMySign";return t(a).multipartPost(e)}function b(e,a){var n=R+"/role/"+e+"/assignPermission";return t(n).post({},a)}function P(e){var a=R+"/role/"+e+"/assignAllPermissions";return t(a).post({})}function E(e,a){var n=R+"/role/"+e+"/deletePermission";return t(n)["delete"](null,a)}function T(e,a){var n=R+"/role/"+e;return t(n).put(null,{},a)}function I(e,a){var n=R+"/permission/"+e;return t(n).put(null,null,a)}function S(e){var a=M+"getAllLoginLogs";return t(a).get(e)}function C(e){var a=y+"/getMyStat";return t(a).get(e)}function O(){return{STAFF:"ستاد",PROVINCE:"استان",BRANCH:"شعبه"}}function N(t){return O()[t.level]}var R="userManagement",y="lmsUserManagement",M=R+"/loginLog/",D=t(R+"/permission/"),L=t(R+"/role/"),U=t(R+"/user/"),w=t(y+"/user/"),x=t(y+"/searchUser/"),$={assignPermissionToRole:b,assignAllPermissions:P,assignPermissionToUser:c,changeEnabledUser:m,changePassword:t(R+"/changePassword").post,changeSecurePassword:t(R+"/secure/changePassword").post,createRole:L.post,createUser:w.post,createSecureUser:t(R+"/secure/user/").post,deletePermissionFromRole:E,deletePermissionFromUser:d,deleteRole:L["delete"],deleteUser:U["delete"],editCaptionOfPermission:I,editCaptionOfRole:T,getAllPermissions:D.get,getPermissions:D.post,getAllRoles:L.get,getCurrentUser:t(R+"/me").get,getPermission:D.getById,getRole:L.getById,getUser:U.getById,getMe:n,getUsersList:t(y+"/list/").post,searchUsers:x.get,getByRole:o,getByRoles:l,resetPassword:u,secureResetPassword:p,updateUser:g,assignRoleToUser:v,deleteRoleFromUser:h,setSign:i,getSignForUser:r,getAllLoginLogs:S,getMyStat:C,groupTitle:N,updateMe:t(y+"/me").put,getUserPermission:f,setSignForMe:A,getAllActiveUsers:s},_=3e5,k={};return $}t.$inject=["RequestService","$q","moment"],angular.module("app.users").factory("UserService",t)}(),function(){"use strict";function t(t,e){t.state("root.users",{"abstract":!0,resolve:{},template:"<div ui-view></div>",url:"/users"}).state("root.users.list",{controller:"UsersListController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/users/users-list.html",url:"/list"}).state("root.users.details",{controller:"UserDetailsController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/users/user-details.html",url:"/:username/details"}).state("root.users.user",{controller:"AddEditUserController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/users/add-edit-user.html",url:"/info?username"}).state("root.users.me",{controller:"UserMeController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/users/user-me.html",url:"/me"}),e.when("/users","/users/list"),e.when("/users/list/{path:.*}","/users/list")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.users").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){e.log(g.title),l().then(function(){d().then(function(){c().then(function(){g.tableParams=new a({count:10,page:1,filter:{enable:!0},sorting:{name:"asc"}},{counts:[5,10,20,50],getData:p})})})})}function l(){return i.getAllProvinces().then(function(t){return g.provinces=t?t:[],g.provinces})}function c(){function t(t){return g.roles=t?t.map(function(t){return{id:t,title:t.caption}}):[],g.roles}return n.getAllRoles().then(t)}function d(){return r.getAllEconomicSections().then(function(t){return g.economicSections=t?t.map(function(t){return{id:t.id,title:t.name}}):[],console.log(g.economicSections),g.economicSections})}function m(t){var e={enabled:t.enable};n.changeEnabledUser(t.username,e).then(function(){o.toast("success"),g.tableParams.reload()},function(){g.tableParams.reload()})}function u(e,a){function i(){o.toast("success"),g.users.splice(a,1)}t().then(function(){e&&n.deleteUser(e).then(i)})}function p(t){function e(e){return g.users=e.content,t.total(e.totalElements),g.users}var a={page:t.page()-1,size:t.count()},i={name:t.filter().name,username:""!==t.filter().username?t.filter().username:null,identification:""!==t.filter().identification?t.filter().identification:null,level:""!==t.filter().level?t.filter().level:null,provinceId:""!==t.filter().province?t.filter().province:null,role:""!==t.filter().role?t.filter().role:null,economicSectionId:""!==t.filter().economicSection?t.filter().economicSection:null,enable:void 0!==t.filter().enable?t.filter().enable:null};return angular.forEach(t.sorting(),function(t,e){a.sort=e+","+t}),n.getUsersList(i,a).then(e)}var g=this;g.title="UsersListController",g.enableUser=[],g.users=[],g.levels=[{id:"STAFF",title:"ستادی"},{id:"PROVINCE",title:"استانی"},{id:"BRANCH",title:"شعبه"}],g.userStatus=[{id:!0,title:"فعال"},{id:!1,title:"غیر فعال"}],g.changeEnabledUser=m,g.deleteUser=u,s()}t.$inject=["$confirm","$log","NgTableParams","UserService","ProvinceService","EconomicSectionService","Util"],angular.module("app.users").controller("UsersListController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){console.log(v.title),d()}function d(){function t(t){v.user=t}i.identity().then(t)}function m(t){var e={newPassword:r.encodeCredential(v.newPassword),repeatNewPassword:r.encodeCredential(v.newPasswordRepeat),oldPassword:r.encodeCredential(v.oldPassword)};o.changeSecurePassword(e).then(function(){r.toast("success"),v.newPassword=null,v.newPasswordRepeat=null,v.oldPassword=null,t.$setPristine()})}function u(){return o.updateMe(null,v.user).then(function(t){r.toast("success")})}function p(t){return v.signUrl=l+"lmsUserManagement/user/"+t.username+"/getSign",v.signUrl}function g(){return console.log(" vm.sign in user-me (vm.attachment.sign) = ",v.attachment.sign),v.attachment.sign.size>7e6?void r.toast("error","APP.ERRORS.MAXIMUM_FILE_SIZE_EXCEPTION","add attachment maximum file size error"):(v.loading=!0,void(v.attachment&&(v.attachment.name=v.attachment.name?v.attachment.name:v.attachment.sign.name,v.description=v.description||"",o.setSignForMe(v.attachment).then(function(){v.date=new Date,v.attachment={},r.toast("success")},function(t){var e=t.status;v.loading=!1,401===e?r.toast("error","APP.ERRORS.Unauthorized user for this action"):r.toast("error","APP.MESSAGES.FAIL")}))))}var v=this;v.title="UserMeController",v.user={},v.changePassword=m,v.update=u,v.getSignUrl=p,v.setSign=g,v.provinces=[],v.economicSections=[],v.date=new Date,v.levels=[{id:"STAFF",name:"ستادی"},{id:"PROVINCE",name:"استانی"},{id:"BRANCH",name:"شعبه"}],v.telRegex=s,c()}t.$inject=["$confirm","$log","$state","$stateParams","Principal","Util","UserService","telRegex","host"],angular.module("app.users").controller("UserMeController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){a.log(O.title),O.username=n.username;var t=(new Date).getTime();O.signUrl=O.host+"lmsUserManagement/user/"+O.username+"/getSign?tm="+t,P(),b(),A(),E(),T()}function c(){O.attachment={},O.toggleAddAttachment=!0}function d(){O.attachment&&(O.attachment.name=O.attachment.name?O.attachment.name:O.attachment.sign.name,O.imageExtensions=["JPG","JPEG","PNG","GIF","BMP"],-1!==O.imageExtensions.indexOf(O.attachment.name.split(".").pop().toUpperCase())?i.setSign(O.username,O.attachment).then(function(){var t=(new Date).getTime();O.signUrl=O.host+"/lmsUserManagement/user/"+O.username+"/getSign?tm="+t,$("#myimg").attr("src",O.signUrl),O.attachment={},s.toast("success")},function(t){var e=t.status;401==e?s.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):s.toast("error","APP.MESSAGES.FAIL","add attachment error")}):(s.toast("error","APP.MESSAGES.IMAGEUPLOADFAIL","add attachment error"),O.attachment={}))}function m(){i.getSignForUser(O.username).then(function(t){O.renderImg=!0,console.log("response = ",t)},function(t){console.log("error response = ",t)})}function u(){var e={permissionId:O.permission.id,denied:O.permission.denied};t().then(function(){i.assignPermissionToUser(O.username,e).then(function(){s.toast("success"),P()})})}function p(){var e={role:O.role.role};t().then(function(){i.assignRoleToUser(O.username,e).then(function(){s.toast("success"),P()})})}function g(){O.permission=null,O.toggleAssignPermission=!O.toggleAssignPermission}function v(){O.role=null,O.toggleAssignRole=!O.toggleAssignRole}function h(e,a){var n={permissionId:e};e&&t().then(function(){i.deletePermissionFromUser(O.username,n).then(function(){s.toast("success"),O.userPermissions.splice(a,1)})})}function f(e){function a(){s.toast("success"),O.user.roles.splice(e,1),O.userRoles=angular.copy(O.user.roles)}var n={role:O.user.roles[e].role};t().then(function(){i.deleteRoleFromUser(O.username,n).then(a)})}function A(){function t(t){O.allPermissions=t?t.content:[]}i.getAllPermissions({page:0,size:1e5}).then(t)}function b(){function t(t){O.allRoles=t?t:[]}i.getAllRoles().then(t)}function P(){function t(t){O.user=t,O.userRoles=angular.copy(t.roles),O.user.province&&C(),i.getUserPermission(O.username).then(e)}function e(t){O.userPermissions=t}O.username&&i.getUser(O.username).then(t)}function E(){return o.getAllProvinces().then(function(t){return O.provinces=t?t:[],O.provinces})}function T(){return r.getAllEconomicSections().then(function(t){return O.economicSections=t?t:[],O.economicSections})}function I(){function t(){s.toast("success")}function e(){s.toast("error","APP.MESSAGES.FAIL","edit userMonitoring error")}O.user.identification&&O.user.identification.length>20?s.toast("error","user identification length exceeded"):O.username&&("BRANCH"!==O.user.level&&(O.user.branch=null),"STAFF"!==O.user.level&&(O.user.economicSection=null),i.updateUser(O.username,O.user).then(t,e))}function S(t){var e=s.encodeCredential(O.newPassword),a=s.encodeCredential(O.username);i.secureResetPassword(a,e).then(function(){s.toast("success"),O.newPassword=null,O.newPasswordRepeat=null,t.$setPristine()})}function C(){return O.user.province?o.getAllBranchesOfProvince(O.user.province.id).then(function(t){return O.branches=t?t:[],O.branches}):void 0}var O=this;O.allPermissions=[],O.allRoles=[],O.permission={},O.denied=!1,O.role={},O.title="UserDetailsController",O.toggleAssignPermission=!1,O.toggleAssignRole=!1,O.user={},O.userPermissions=[],O.userRoles=[],O.attachment={},O.host=e,O.assignPermissionToUser=u,O.assignRoleToUser=p,O.cancelAssignPermission=g,O.cancelAssignRole=v,O.deletePermissionFromUser=h,O.deleteRoleFromUser=f,O.cancelAddAttachment=c,O.attachFile=d,O.getSign=m,O.updateUser=I,O.resetPassword=S,O.getBranches=C,O.provinces=[],O.economicSections=[],O.levels=[{id:"STAFF",name:"ستادی"},{id:"PROVINCE",name:"استانی"},{id:"BRANCH",name:"شعبه"}],O.signUrl="",O.renderImg=!0,l()}t.$inject=["$confirm","host","$log","$stateParams","UserService","EconomicSectionService","ProvinceService","Util"],angular.module("app.users").controller("UserDetailsController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){e.log(f.title,f.username),u(),c(),p()}function c(){return r.getAllProvinces().then(function(t){return f.provinces=t?t:[],f.provinces})}function d(){return f.user.province?r.getAllBranchesOfProvince(f.user.province.id).then(function(t){return f.branches=t?t:[],f.branches}):void 0}function m(){f.user.newPassword=f.user.password,o.createUser(f.user).then(function(){s.toast("success"),f.repeatPassword=null,a.go("root.users.details",{username:f.user.username})})}function u(){function t(t){f.user=t}f.username&&o.getUser(f.username).then(t)}function p(){return i.getAllEconomicSections().then(function(t){return f.economicSections=t?t:[],f.economicSections})}function g(t){f.username?v():(m(),t.$setPristine())}function v(){function t(){s.toast("success")}function e(){s.toast("error","APP.MESSAGES.FAIL","edit userMonitoring error")}f.user.identification&&f.user.identification.length>20?s.toast("error","APP.ERRORS.user identification length exceeded","user identification length exceeded"):f.username&&o.updateUser(f.username,f.user).then(t,e)}function h(t){var e=s.encodeCredential(f.newPassword),a=s.encodeCredential(f.username);o.secureResetPassword(a,e).then(function(){s.toast("success"),f.newPassword=null,f.newPasswordRepeat=null,t.$setPristine()})}var f=this;f.title="AddEditUserController",f.user={},f.username=n.username,f.onSubmit=g,f.resetPassword=h,f.getBranches=d,f.provinces=[],f.economicSections=[],f.levels=[{id:"STAFF",name:"ستادی"},{id:"PROVINCE",name:"استانی"},{id:"BRANCH",name:"شعبه"}],l()}t.$inject=["$confirm","$log","$state","$stateParams","EconomicSectionService","ProvinceService","UserService","Util"],angular.module("app.users").controller("AddEditUserController",t)}(),function(){"use strict";function t(t){function e(){var e=n+"/updateMonitoringReport";return t(e).put()}function a(){var e=n+"/MonitoringReportUpdateLogs/last";return t(e).get()}var n="report";return{updateReport:e,getUpdateInfo:a}}t.$inject=["RequestService"],angular.module("app").factory("UpdateReportService",t)}(),function(){"use strict";function t(t,e){t.state("root.update-report",{controller:"UpdateReportController",controllerAs:"vm",templateUrl:"app/components/update-report/update-report.html",url:"/update-report"}),e.when("/update-report/{path:.*}","/update-report")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){r()}function r(){a.getUpdateInfo().then(function(t){s.lastUpdate=t?t:{},s.loading="Processing"==s.lastUpdate.status})}function o(){s.loading=!0,s.lastUpdate.status="Processing",a.updateReport().then(function(){s.loading=!1,r()})}var s=this;s.updateReport=o,i()}t.$inject=["host","$filter","UpdateReportService","Util"],angular.module("app").controller("UpdateReportController",t)}(),function(){"use strict";function t(t){function e(e,a){var n=d+e+"/clear";return t(n).put(null,a)}function a(e){var a=d+e+"/processLogs";return t(a).get()}function n(e,a){var n=d+e+"/fail";return t(n).put(null,a)}function i(e,a,n){var i=d+e+"/postpone";return t(i).put(null,a,n)}function r(e,a,n){var i=d+e+"/transfer";return t(i).put(null,a,n)}function o(e){var a=d+e+"/mine";return t(a).get()}function s(e){var a={monitoringId:e};return t(d+"search").post(a)}function l(e,a,n){var i=d+e+"/addAttachment";return t(i).multipartPost(a,n)}function c(e,a){var n=d+e+"/deleteAttachment";return t(n)["delete"](null,{attachmentId:a})}var d="trace/",m=t(d);return{getAllTraces:m.get,getTrace:m.getById,createTrace:m.post,updateTrace:m.put,deleteTrace:m["delete"],search:t(d+"search").post,mine:t(d+"mine").post,issues:t(d+"issues").post,traceCleared:e,traceFailed:n,tracePostPone:i,traceTransfer:r,getProcessLogsTrace:a,traceFindByUser:o,getTracesByMonitoring:s,addAttachmentToTrace:l,deleteAttachmentFromTrace:c,getStepsSync:[{id:0,name:"waiting",title:"در انتظار",finalized:!1},{id:1,name:"alerted",title:"هشدار",finalized:!1},{id:2,name:"seen",title:"مشاهده شده",finalized:!1},{id:3,name:"cleared",title:"پاسخ مناسب از شعبه دریافت شد",finalized:!0},{id:4,name:"failed",title:"پاسخ مناسب از شعبه دریافت نشد",finalized:!0}]}}t.$inject=["RequestService"],angular.module("app.trace").factory("TraceService",t)}(),function(){"use strict";function t(t,e){t.state("root.trace-list",{controller:"TraceController",controllerAs:"vm",templateUrl:"app/components/trace/trace.html",params:{steps:"alerted,seen",type:"mine"},url:"/trace?steps?type"}).state("root.trace-detail",{controller:"TraceDetailController",controllerAs:"vm",templateUrl:"app/components/trace/trace-detail.html",url:"/trace-detail?id"}),e.when("/trace/{path:.*}","/trace")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.trace").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m){function u(){console.log(R.title+" activated"),C()}function p(){return l.isInRole("STAFF_DISPATCHER")}function g(){if(R.searchItems.ownerUsername=R.creator?R.creator.username:null,R.searchItems.actuatorUsername=R.user?R.user.username:null,R.searchItems.monitoringNumber=y(R.searchItems.monitoringNumber),R.searchItems.applicant=R.searchItems.applicant&&R.searchItems.applicant.length?R.searchItems.applicant:null,"none"===R.steps)R.searchItems.stepIds=[],R.traceSteps.forEach(function(t){t.selected&&R.searchItems.stepIds.push(t.id)});else{var t=!1,e=[];R.traceSteps.forEach(function(a){a.selected&&(t=!0,e.push(a.id))}),t&&(R.searchItems.stepIds=e)}}function v(t){function e(e){if(R.traces=e?e.content:[],e){t.total(e.totalElements),R.allRecordsCount=e.totalElements;var a=angular.element(document.getElementById("search-result-container"));R.firstSearch?R.firstSearch=!1:n.scrollToElement(a,L,D)}return R.fetchTime=Math.floor(moment().diff(i)/1e3)+" ثانیه",R.loading=!1,R.traces}function a(t){return R.allRecordsCount=0,R.loading=!1,R.fetchTime=Math.floor(moment().diff(i)/1e3)+" ثانیه",t}var i=moment();R.loading=!0;var r=[];R.traceSteps.forEach(function(t){M.forEach(function(e){e===t.name&&r.push(t.id)})}),R.searchItems.stepIds=r,R.searchItems.forCommitmentConvert=R.searchItems.forCommitmentConvert?R.searchItems.forCommitmentConvert:null,g();var s={page:t.page()-1,size:t.count(),sort:"id,desc"};switch(angular.forEach(t.sorting(),function(t,e){s.sort=e+","+t}),R.type){case"search":return o.search(R.searchItems,s).then(e,a);case"mine":return o.mine(R.searchItems,s).then(e,a);case"issues":return o.issues(R.searchItems,s).then(e,a)}}function h(t,e){var a={name:t,type:e};o.createTrace(a).then(function(){R.toggleAdd=!R.toggleAdd,R.tableParams.reload()})}function f(t){o.deleteTrace(t).then(function(){R.tableParams.reload()})}function A(t,e){if(console.log(t.currentStep.id),1===t.currentStep.id)return void c.toast("warn","Please open alerted trace before doing any action");var n=a.open({animation:!0,templateUrl:"app/components/trace/add-comment-modal.html",controller:"AddCommentController",controllerAs:"modalVm",size:"md",resolve:{trace:function(){return t},action:function(){return e}}});n.result.then(function(){R.tableParams.reload()},function(){})}function b(t){return R.currentUser.username===t.user.username}function P(t){var e="";switch(t){case"waiting":e="yellowBG";break;case"alerted":e="OrangeBG";break;case"seen":e="GrayBG";break;case"cleared":e="GreenBG";break;case"failed":e="RedBG"}return e}function E(t){var e="";switch(t){case"waiting":e="fa fa-hourglass-half fa-lg";break;case"alerted":e="fa fa-times-circle-o fa-lg";break;case"seen":e="fa fa-eye fa-lg";break;case"cleared":e="fa fa-check fa-lg ";break;case"failed":e="fa fa-thumbs-o-down fa-lg"}return e}function T(){R.searchItems={},R.traceSteps.forEach(function(t){t.selected=!1}),R.tableParams.reload()}function I(){R.tableParams.reload()}function S(t){g();var e={reportType:t,extraSearchObj:R.searchItems};d.getReportNumber(e).then(function(e){if(R.loading=!0,t){var a="api/report/traceSearch?reportNumber="+e;console.log(a),d.getNonHtmlReport(a),c.toast("info","Please wait to receive data")}})}function C(){return m.getAllProvinces().then(function(t){return R.provinces=t?t:[],R.provinces})}function O(t){function e(t){return R.users=t.content||[],R.users}return s.searchUsers({query:t}).then(e)}function N(t){a.open({animation:!0,templateUrl:"app/components/trace/trace-flow/trace-flow.html",controller:"TraceFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return t}}})}var R=this;R.traces=[],R.firstSearch=!0;var y=i("eNumber"),M=e.steps?e.steps.split(","):[];R.type=e.type,R.steps=e.steps,R.comment="",R.investmentActions=[],R.tableParams=new r({},{counts:[5,10,20,50,100],getData:v});var D=1e3,L=30;R.title="APP.MODULES.TRACE.TITLE",R.toggleAdd=!1,R.searchItems={},R.observers=[],R.traceSteps=o.getStepsSync,l.identity().then(function(t){switch(R.currentUser=t,console.log(" vm.currentUser = ",R.currentUser),R.disableProvince="STAFF"!==R.currentUser.level,R.disableProvince&&(R.searchItems.provinceId=R.currentUser.province.id),R.traceSteps.forEach(function(t){t.hide=!1}),R.steps){case"none":R.title+="issues"===R.type?"S.ISSUED":"search"===R.type?"S.REPORT":"S.ALL",R.disableCreator="issues"===R.type,R.disableUser="mine"===R.type;break;case"alerted,seen":R.title+="S.CARTABLE",R.disableUser=!0,R.traceSteps[0].hide=!0,R.traceSteps[3].hide=!0,R.traceSteps[4].hide=!0;break;case"waiting":R.title+="S.WAITING",R.disableUser=!0,R.hideStatuses=!0;break;case"cleared,failed":R.title+="S.FINISHED",R.disableUser=!0,R.traceSteps[0].hide=!0,R.traceSteps[1].hide=!0,R.traceSteps[2].hide=!0}}),R.create=h,R["delete"]=f,R.openModal=A,R.isValidUser=b,R.getColorOfState=P,R.getIconOfState=E,R.cancelSearch=T,R.search=I,R.refreshUsers=O,R.exportTrace=S,R.openFlowModal=N,R.groupFinder=s.groupTitle,R.isInRoleStaff=p,u()}t.$inject=["$log","$stateParams","$uibModal","$document","$filter","NgTableParams","TraceService","UserService","Principal","Util","ReportService","ProvinceService"],angular.module("app.trace").controller("TraceController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){t.log(T.title),d(),m()}function d(){return n.getTrace(T.id).then(function(t){return T.trace=t?t:{},s.identity().then(function(t){T.currentUser=t,T.isMine=t.username===T.trace.user.username,T.trace.attachments.forEach(function(t){t.canDelete=t.creatorLmsUser.username===T.currentUser.username,t.url=a+"fileManager/attachment/"+t.id+"/getContent/"+t.name+"."+t.type}),T.loading=!1}),T.trace})}function m(){n.getProcessLogsTrace(T.id).then(function(t){T.processLog=t?t:{},T.processLog=T.processLog.filter(function(t){return console.log("pl.user !== null = ",null!==t.user),null!==t.user})})}function u(){if(T.loading=!0,T.attachment){T.description=T.description||null;var t={name:T.attachment.attachment.name,description:T.description};n.addAttachmentToTrace(T.trace.id,T.attachment,t).then(function(){d(),m(),T.attachment={},T.description="",o.toast("success")},function(){T.loading=!1})}}function p(){T.attachment={},T.toggleAddAttachment=!0}function g(t){T.currentUser.username===t.creatorLmsUser.username&&l().then(function(){T.loading=!0,n.deleteAttachmentFromTrace(T.trace.id,t.id).then(function(){o.toast("success"),d(),m()},function(){T.loading=!1})})}function v(){return T.user||T.date?void o.toast("warn","There is no need for new user or date to terminate the trace"):void(T.comment&&T.id&&(T.loading=!0,n.traceCleared(T.id,T.comment).then(function(){o.toast("success"),d(),m()},b)))}function h(){return T.user||T.date?void o.toast("warn","There is no need for new user or date to terminate the trace"):void(T.comment&&T.id&&(T.loading=!0,n.traceFailed(T.id,T.comment).then(function(){o.toast("success"),d(),m()},b)))}function f(){if(T.comment&&T.id){var t={newDate:T.date?e("sDate")(T.date):null};T.loading=!0,T.comment+=" (تعویق به تاریخ "+e("pNumber")(T.date)+") ",n.tracePostPone(T.id,T.comment,t).then(function(){o.toast("success"),d(),m(),T.comment=""},b)}}function A(){if(T.comment&&T.user&&T.id){var t={username:T.user?T.user.username:null};T.loading=!0,T.comment+=" (ارجاع پیگیری به "+T.user.name+")",n.traceTransfer(T.id,T.comment,t).then(function(){o.toast("success"),d(),m(),T.comment=""},b)}}function b(t){var e=t.status;T.loading=!1,401===e?o.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):o.toast("error","APP.MESSAGES.FAIL")}function P(t){function e(t){return T.users=t.content||[],T.users}return i.searchUsers({query:t}).then(e)}function E(t){var a=new Date;a.setDate(a.getDate()+t),T.date=e("jeDate")(a)}var T=this;T.trace={},T.processLog=[],T.comment="",T.date=null,T.title="Directive List Controller",T.id=r.id,T.users=[],T.user=null,T.groupFinder=i.groupTitle,T.loading=!0,T.isMine=!1,T.operations=[{id:1,title:"اعلام دریافت پاسخ مناسب از شعبه"},{id:2,title:"اعلام عدم دریافت پاسخ مناسب از شعبه"},{id:3,title:"دادن مهلت برای این نامه (بدون ثبت پیگیری جدید)"},{id:4,title:"انتقال پیگیری به شخص دیگر"}],T.operation=T.operations[0],T.getTraceById=d,T.traceCleared=v,T.traceFailed=h,T.tracePostPone=f,T.traceTransfer=A,T.getProcessLogs=m,T.addAttachment=u,T.cancelAddAttachment=p,T.deleteAttachment=g,T.refreshUsers=P,T.setDate=E,c()}t.$inject=["$log","$filter","host","TraceService","UserService","$stateParams","Util","Principal","$confirm"],angular.module("app.trace").controller("TraceDetailController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){console.log(h.title)}function l(){"clear"===h.action?c(h.trace.id):"fail"===h.action?d(h.trace.id):"postpone"===h.action?m(h.trace.id):"transfer"===h.action&&u(h.trace.id)}function c(e){h.comment?i.traceCleared(e,h.comment).then(function(){o.toast("success"),t.close()},p):o.toast("error","Please fill all required fields")}function d(e){h.comment?i.traceFailed(e,h.comment).then(function(){o.toast("success"),t.close()},p):o.toast("error","Please fill all required fields")}function m(a){if(h.comment){var n={newDate:h.date};h.comment+=" (تعویق به تاریخ "+e("jDateFromString")(h.date)+") ",i.tracePostPone(a,h.comment,n).then(function(){o.toast("success"),t.close()},p)}else o.toast("error","Please fill all required fields")}function u(e){if(h.user&&h.comment){var a={username:h.user.username};h.comment+=" (ارجاع پیگیری به "+h.user.name+")",i.traceTransfer(e,h.comment,a).then(function(){o.toast("success"),t.close()},p)}else o.toast("error","Please fill all required fields")}function p(t){var e=t.status;401==e?o.toast("error","Authentication error"):o.toast("error","Error")}function g(t){function e(t){return h.users=t.content||[],h.users}return r.searchUsers({query:t}).then(e)}function v(t){var a=new Date;a.setDate(a.getDate()+t),h.date=e("sDate")(e("jeDate")(a))}var h=this;h.title=" add comment controller",h.trace=a,h.action=n,h.users=[],h.user=null,h.comment="",h.loading=!1,h.groupFinder=r.groupTitle,h.refreshUsers=g,h.submit=l,h.setDate=v,s()}t.$inject=["$uibModalInstance","$filter","trace","action","TraceService","UserService","Util"],angular.module("app.trace").controller("AddCommentController",t)}(),function(){"use strict";function t(t){function e(){var t=angular.element(".content-wrapper")[0];return t?[t.clientHeight,t.clientWidth]:[0,0]}function a(){var t=angular.element("body")[0];return[t.clientHeight,t.clientWidth]}function n(){var t=angular.element(".criterion-container")[0];return t?[t.clientHeight,t.clientWidth]:[0,0]}return{getContentWrapperSize:e,getCriterionSize:n,getBodySize:a}}t.$inject=["$document"],angular.module("app").factory("SizeService",t)}(),function(){"use strict";function t(t){var e="sample/",a=t(e);return{getAllSamples:a.get,getSampleById:a.getById,createSample:a.post,updateSample:a.put,deleteSample:a["delete"]}}t.$inject=["RequestService"],angular.module("app").factory("SampleService",t)}(),function(){"use strict";function t(t,e){t.state("root.sample",{controller:"ViewController",controllerAs:"vm",templateUrl:"app/components/sample/sample.html",url:"/sample"}),e.when("/sample/{path:.*}","/sample")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(u.title)}function o(){function t(){i.toast("success"),u.tableParams.reload()}n.createSample(u.sample).then(t)}function s(){u.sample=null,u.toggleAddSample=!u.toggleAddSample}function l(t){u.toggleEdit[t]=!u.toggleEdit[t],u.samples[t]=angular.copy(u.tempSamples[t])}function c(e,a){function r(){i.toast("success"),u.samples.splice(a,1),u.tempSamples=angular.copy(u.samples)}t().then(function(){e&&n.deleteSample(e).then(r)})}function d(e,a){function r(){i.toast("success"),u.toggleEdit[a]=!u.toggleEdit[a],u.tempSamples[a]=angular.copy(u.samples[a])}t().then(function(){if(!i.compareObjects(u.samples[a],u.tempSamples[a])){var t={name:e.name};n.updateSample(e.id,t).then(r)}})}function m(t){function e(t){return u.samples=t?t:[],u.tempSamples=angular.copy(u.samples),u.samples}var a={sample:t.filter().sample?t.filter().sample:null};return n.getAllSamples(a).then(e)}var u=this;u.sample={},u.samples=[],u.tempSamples=[],u.tableParams=new a({},{counts:[],getData:m}),u.toggleAddSample=!0,u.toggleEdit=[],u.title="SampleListController",u.createSample=o,u.cancelAddSample=s,u.cancelEditSample=l,u.deleteSample=c,u.updateSample=d,r()}t.$inject=["$confirm","$log","NgTableParams","SampleService","Util"],angular.module("app").controller("SampleController",t)}(),function(){"use strict";angular.module("app.roles",[])}(),function(){"use strict";function t(t,e){t.state("root.roles",{"abstract":!0,template:"<div ui-view></div>",url:"/roles"}).state("root.roles.list",{controller:"RolesListController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/roles/roles-list.html",url:"/list"}).state("root.roles.details",{controller:"RoleDetailsController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/roles/role-details.html",url:"/:role/details"}),e.when("/roles/list/{path:.*}","/roles/list")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.roles").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(u.title)}function o(){function t(){i.toast("success"),u.toggleAddRole=!u.toggleAddRole,u.tableParams.reload()}n.createRole(u.role).then(t)}function s(){u.role.name=null,u.toggleAddRole=!u.toggleAddRole}function l(t){u.toggleEditRole[t]=!u.toggleEditRole[t],u.roles[t]=angular.copy(u.tempRoles[t])}function c(e,a){function r(){i.toast("success"),u.roles.splice(a,1),u.tempRoles=angular.copy(u.roles)}t().then(function(){e&&n.deleteRole(e).then(r)})}function d(t,e){function a(){i.toast("success"),u.toggleEditRole[e]=!u.toggleEditRole[e],
u.tempRoles[e]=angular.copy(u.roles[e])}var r={caption:t.caption};i.compareObjects(u.roles[e],u.tempRoles[e])||n.editCaptionOfRole(t.role,r).then(a)}function m(t){function e(t){return u.roles=t?t:[],u.tempRoles=angular.copy(u.roles),u.roles}var a={role:t.filter().role?t.filter().role:null};return n.getAllRoles(a).then(e)}var u=this;u.role={},u.roles=[],u.tempRoles=[],u.tableParams=new a({},{counts:[],getData:m}),u.toggleAddRole=!0,u.toggleEditRole=[],u.title="RolesListController",u.rolePattern=/_*[A-z\d]*/,u.createRole=o,u.cancelAddRole=s,u.cancelEditRole=l,u.deleteRole=c,u.updateRole=d,r()}t.$inject=["$confirm","$log","NgTableParams","UserService","Util"],angular.module("app.roles").controller("RolesListController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(){e.log(h.title,h.role),p()}function l(t,e){t=t?t:h.permission;var a={permissionId:t.id};return r.assignPermissionToRole(h.role,a).then(function(t){return console.log(a," added to ",h.role),e?c():void 0})}function c(t){console.log("callback",t),t&&o.toast("success"),h.tableParams.reload()}function d(){var t=[];h.permissions.forEach(function(e){t.push(l(e,!1))}),h.permissions=[],a.all(t).then(c)}function m(){h.permission=null,h.toggleAddPermission=!h.toggleAddPermission}function u(e,a){function n(){o.toast("success"),h.rolePermissions.splice(a,1),h.data.permissions=angular.copy(h.rolePermissions)}var i={permissionId:e};e&&t().then(function(){r.deletePermissionFromRole(h.role,i).then(n)})}function p(){function t(t){h.allPermissions=t?t.content:[]}r.getAllPermissions().then(t)}function g(t){function e(t){h.allPermissions=t?t.content:[]}var a={caption:t},n={page:0,size:50,sort:"name,desc"};r.getPermissions(a,n).then(e)}function v(){function t(t){return h.data=t?t:{},h.rolePermissions=angular.copy(h.data.refinedPermissions),h.rolePermissions}return h.role?r.getRole(h.role).then(t):void 0}var h=this;h.data={},h.allPermissions=[],h.permission={},h.role=n.role,h.rolePermissions=[],h.tableParams=new i({},{counts:[],getData:v}),h.permissions=[],h.toggleAddPermission=!1,h.title="RoleDetailsController",h.assignPermissionToRole=l,h.assignPermissionsToRole=d,h.cancelAddPermission=m,h.deletePermissionFromRole=u,h.refreshPermissions=g,s()}t.$inject=["$confirm","$log","$q","$stateParams","NgTableParams","UserService","Util"],angular.module("app.roles").controller("RoleDetailsController",t)}(),function(){"use strict";angular.module("app.report",[])}(),function(){"use strict";function t(t){function e(e){var a=i+"/getReportNumber";return t(a).put(null,e,null)}function a(e){return t(e).get()}function n(t){window.open(t,"_blank")}var i="report";return{getReportNumber:e,getHtmlReport:a,getNonHtmlReport:n}}t.$inject=["RequestService"],angular.module("app.report").factory("ReportService",t)}(),function(){"use strict";function t(t,e){t.state("root.report",{controller:"ReportController",controllerAs:"vm",templateUrl:"app/components/report/report.html",url:"/report"}),e.when("/report/{path:.*}","/report")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.report").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){a.log(C.title),console.log("vm.selectedReport = ",C.selectedReport),u().then(function(){var t=[{content:O(++N)+"- مدت زمان صرف شده نظارت‌ها (روز)",htmlReportApi:"report/getDaysSpentReport/?reportNumber=",nonHtmlReportApi:"api/report/getDaysSpentReport/?reportNumber=",filters:{organizationLevel:!0,province:!0},index:N},{content:O(++N)+"- میانگین مدت زمان صرف شده نظارت‌ها به تفکیک هر استان (روز)",htmlReportApi:"report/getLengthReportAggregated/?reportNumber=",nonHtmlReportApi:"api/report/getLengthReportAggregated/?reportNumber=",filters:{organizationLevel:!0},index:N},{content:O(++N)+"-  گزارش عمکردی کارشناسان",htmlReportApi:"report/getUsersPerformanceReport/?reportNumber=",nonHtmlReportApi:"api/report/getUsersPerformanceReport/?reportNumber=",filters:{organizationLevel:!0,province:!0},index:N},{content:O(++N)+"- گزارش عدم رفع انحرافات در پیگیری ها",htmlReportApi:"report/getMonitoringTraceReport/?reportNumber=",nonHtmlReportApi:"api/report/getMonitoringTraceReport/?reportNumber=",filters:{organizationLevel:!0,province:!0,traceStatus:!0},index:N},{content:O(++N)+"-  گزارش مبالغ تسهیلات و مبالغ پرداخت شده",htmlReportApi:"report/getAmountPaymentAndContractReport/?reportNumber=",nonHtmlReportApi:"api/report/getAmountPaymentAndContractReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  گزارش تعداد و مبالغ قراردادهای بازدید شده",htmlReportApi:"report/getAmountAndCountPaymentAndContractReport/?reportNumber=",nonHtmlReportApi:"api/report/getAmountAndCountPaymentAndContractReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N}];C.reportList=C.reportList.concat(t)});var t=new Date;t=t.setDate(t.getDate()+1),C.reportParams.toConfirmDate=moment(t).format("YYYY-MM-DD"),C.reportParams.toTraceDate=moment(t).format("YYYY-MM-DD"),P(),E(),I()}function u(){return r.getAllCheckList().then(function(t){t.forEach(function(t){t.content=O(++N)+"- گزارش چک لیست : "+t.content,t.htmlReportApi="report/checkList/getReport/"+t.id+"/?reportNumber=",t.nonHtmlReportApi="api/report/checkList/getReport/"+t.id+"/?reportNumber=",t.index=N,t.filters={organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},C.reportList.push(t)})})}function p(){if(C.group){if(C.selectedReports&&C.selectedReports.length)return v();if(C.reportsText)return h(C.reportsText)}return g(C.selectedReport)}function g(t){var a=moment();C.duration=0,C.loading=!0;var i={contractType:C.reportParams.contractType,reportType:C.reportParams.reportType,organizationLevel:"ALL"===C.reportParams.organizationLevel?null:C.reportParams.organizationLevel,highAmount:C.reportParams.highAmount,lowAmount:C.reportParams.lowAmount,index:t.index,includedCodes:C.reportParams.codesIncluded&&C.reportParams.codesIncluded.length?C.reportParams.codesIncluded:null,excludedCodes:C.reportParams.codesExcluded&&C.reportParams.codesExcluded.length?C.reportParams.codesExcluded:null,includedIsics:C.reportParams.includedIsics&&C.reportParams.includedIsics.length?C.reportParams.includedIsics:null,excludedIsics:C.reportParams.excludedIsics&&C.reportParams.excludedIsics.length?C.reportParams.excludedIsics:null,creditSupplyResourceIds:C.reportParams.creditSupplyResources&&C.reportParams.creditSupplyResources.length?C.reportParams.creditSupplyResources:null,creditSupplyResourceText:C.reportParams.creditSupplyResourceText,provinceIds:C.reportParams.provinceIds&&C.reportParams.provinceIds.length?C.reportParams.provinceIds:null,statusId:C.reportParams.statusId,fromTraceDate:C.reportParams.fromTraceDate?C.reportParams.fromTraceDate:null,toTraceDate:C.reportParams.toTraceDate?C.reportParams.toTraceDate:null,contractFromDate:C.reportParams.contractFromDate?C.reportParams.contractFromDate:null,contractToDate:C.reportParams.contractToDate?C.reportParams.contractToDate:null,monitoringFromDate:C.reportParams.monitoringFromDate?C.reportParams.monitoringFromDate:null,monitoringToDate:C.reportParams.monitoringToDate?C.reportParams.monitoringToDate:null};t.noFromDate||(i.fromConfirmDate=C.reportParams.fromConfirmDate),t.noToDate||(i.toConfirmDate=C.reportParams.toConfirmDate),console.log("params",i),n.getReportNumber(i).then(function(i){if("HTML"!==C.reportParams.reportType){var r=t.nonHtmlReportApi+i;console.log(r),n.getNonHtmlReport(r),C.loading=!1}else if("HTML"===C.reportParams.reportType){var o=document.getElementById("dynamicReport");o.innerHTML='<div class="row text-center">در حال بارگذاری ...</div>';var r=t.htmlReportApi+i;console.log("first request",a.diff(moment())),n.getHtmlReport(r).then(function(t){return t=t.replace(/SansSerif/g,"Vazir"),o.innerHTML=t,C.currentReport=t,console.log("second request",a.diff(moment())),C.duration=Math.floor(moment().diff(a)/1e3)+" ثانیه",C.loading=!1,t},function(t){o.innerHTML='<div class="row text-center">گزارش مورد نظر موجود نیست!</div>',C.duration=Math.floor(moment().diff(a)/1e3)+" ثانیه",C.loading=!1})}e.sessionStorage.setItem(C.selectedReport.content,"true")})}function v(){console.log("get reports"),C.reportParams.reportType="EXCEL",C.selectedReports.forEach(function(t){g(t)})}function h(t){var e=[];if(console.log("getReportsByIndex",t),t.match(/\d+-\d+/)){console.log("match",t.match(/\d+/g));for(var a=t.match(/\d+/g).map(function(t){return parseInt(t,10)}),n=a[0];n<=a[1];n++)e.push(n)}else{if(!t.match(/[\d+,]*\d+/))return void Util.toast("error","Not valid input");console.log("match",t.match(/\d+/g)),e=t.match(/\d+/g).map(function(t){return parseInt(t,10)})}return f(e)}function f(t){console.log("indices",t);var e=C.reportList.filter(function(e){return t.indexOf(e.index)>0});console.log("reports",e),C.selectedReports=e,v()}function A(t){return e.sessionStorage.getItem(t.content)}function b(t){return i.searchAll({query:t}).then(function(t){return C.codes=t||[],C.codes})}function P(){return l.getAllCreditSupplyResources().then(function(t){return C.resources=t||[],C.resources})}function E(){return o.getAllProvinces().then(function(t){return C.provinces=t?t:[],C.provinces})}function T(){return C.searchItem.branchIds=[],C.searchItem.provinceIds&&0!==C.searchItem.provinceIds.length?o.getAllBranchesByProvinceList(C.searchItem.provinceIds).then(function(t){return C.branches=t?t:[],C.branches}):(C.branches=[],C.branches)}function I(){d.getAllIsics().then(function(t){C.isicList=t||[],console.log("vm.isicList = ",C.isicList)})}function S(t){var e=C.reportList.length;return C.selectedReport&&C.selectedReport.index?(t+=C.selectedReport.index,t--,t%=e,void(C.selectedReport=C.reportList[t])):void(C.selectedReport=1===t?C.reportList[0]:C.reportList[e-1])}var C=this;C.title="Report Controller",C.selectedReport={},C.reportParams={reportType:"HTML",codesIncluded:[],codesExcluded:[],lowAmount:1e9},C.reportTypes=["HTML","EXCEL"],C.reportLevels=["STAFF","PROVINCE","BRANCH","ALL"],C.htmlSrc="",C.host=t,C.group=!1,C.traceSteps=c.getStepsSync.concat([{id:null,title:"همه موارد"}]);var O=s("pNumber");C.getReportStatus=A,C.getBranchesByProvinceIds=T,C.submit=p;var N=0;C.selectedReports=[],C.searchItem={},C.isicList=[],C.reportList=[{content:O(++N)+"- تعداد قرار داد های بازدید شده به تفکیک هر استان",htmlReportApi:"report/numberOfContractReport/?reportNumber=",nonHtmlReportApi:"api/report/numberOfContractReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت قرار داد های بازدید شده بر اساس منبع تامین اعتبار",htmlReportApi:"report/resourceTypeReport/?reportNumber=",nonHtmlReportApi:"api/report/resourceTypeReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت اخذ وثایق و تضمینات بر اساس مفاد مصوبه ابلاغی به تفکیک هر استان",htmlReportApi:"report/assuranceConflictReport/?reportNumber=",nonHtmlReportApi:"api/report/assuranceConflictReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- قرار داد های بازدید شده بر اساس وضعیت فعالیت به تفکیک هر استان",htmlReportApi:"report/contractActivenessAggByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/contractActivenessAggByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت قرار داد های بازدید شده بر اساس رکن اعتباری تصویب کننده به تفکیک هر استان",htmlReportApi:"report/contractDAPAggStatByProvince/?reportNumber=",nonHtmlReportApi:"api/report/contractDAPAggStatByProvince/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت قرار داد های بازدید شده بر اساس نوع قرار داد به تفکیک هر استان",htmlReportApi:"report/contractPlanTypeAggByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/contractPlanTypeAggByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت قرار داد های بازدید شده بر اساس نوع عقد به تفکیک هر استان",htmlReportApi:"report/contractTypeAggStatByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/contractTypeAggStatByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت مطابقت پیشرفت فیزیکی قرار داد های بازدید شده با مفاد مصوبات ابلاغی به تفکیک بخش ها و هر استان",htmlReportApi:"report/invoiceConflictReport/?reportNumber=",nonHtmlReportApi:"api/report/invoiceConflictReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- رعایت شرایط قبل از انعقاد قرارداد به تفکیک هر استان",htmlReportApi:"report/preCondRegardAggByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/preCondRegardAggByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت عملکرد شعبه عامل در خصوص اجرای مصوبه به تفکیک هر استان",htmlReportApi:"report/agentBranchPerformanceEvaluationReport/?reportNumber=",nonHtmlReportApi:"api/report/agentBranchPerformanceEvaluationReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- اقدامات ابلاغی به مدیریت استان ها جهت رفع نواقص و انحرافات (انحرافات مربوط به متقاضیان و تعاونی ها)",htmlReportApi:"report/applicantPerformanceEvaluationReport/?reportNumber=",nonHtmlReportApi:"api/report/applicantPerformanceEvaluationReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت دریافت سهم آورده متقاضی بر اساس مفاد مصوبات ابلاغی",htmlReportApi:"report/applicantSharedConflictPaymentReport/?reportNumber=",nonHtmlReportApi:"api/report/applicantSharedConflictPaymentReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت اخذ وثایق و تضمینات بر اساس مفاد مصوبه ابلاغی به تفکیک نوع وثیقه و هر استان",htmlReportApi:"report/assuranceConflictByTypeReport/?reportNumber=",nonHtmlReportApi:"api/report/assuranceConflictByTypeReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- تعداد قرار داد های دارای انحراف و فاقد هر گونه انحراف به تفکیک هر استان",htmlReportApi:"report/contractConflictsReport/?reportNumber=",nonHtmlReportApi:"api/report/contractConflictsReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  تعداد قرار داد های مشارکتی مصوب شده به تفکیک هر استان",htmlReportApi:"report/contractCountApprovedHighAmountReport/?reportNumber=",nonHtmlReportApi:"api/report/contractCountApprovedHighAmountReport/?reportNumber=",filters:{organizationLevel:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0,creditSupplyResourceText:!0},index:N},{content:O(++N)+"- وضعیت مطابقت پیشرفت فیزیکی قرار داد های بازدید شده با مفاد مصوبات ابلاغی به تفکیک بخش های اقتصادی و هر استان",htmlReportApi:"report/invoiceConflictByTypeReport/?reportNumber=",nonHtmlReportApi:"api/report/invoiceConflictByTypeReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت تطبیق موضوع فعالیت با مجوزهای اخذ شده و قرار داد مصوب",htmlReportApi:"report/licenseConflictReport/?reportNumber=",nonHtmlReportApi:"api/report/licenseConflictReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت مطابقت رویه پرداخت تسهیلات توسط شعبه با مفاد مصوبات ابلاغی به تفکیک بخش‌های اقتصادی و هر استان",htmlReportApi:"report/paymentConflictByTypeReport/?reportNumber=",nonHtmlReportApi:"api/report/paymentConflictByTypeReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت مطابقت رویه پرداخت تسهیلات توسط شعبه با مفاد مصوبات ابلاغی به تفکیک هر استان",htmlReportApi:"report/paymentConflictReport/?reportNumber=",nonHtmlReportApi:"api/report/paymentConflictReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"-  وضعیت قرار داد های بازدید شده بر اساس بخش های اقتصادی به تفکیک هر استان",htmlReportApi:"report/wellFormatContractEconomicSectionAggByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/wellFormatContractEconomicSectionAggByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت عملکرد کارشناس اعتباری در بررسی و تنظیم مصوبه به تفکیک هر استان",htmlReportApi:"report/approverPerformanceEvaluationReport/?reportNumber=",nonHtmlReportApi:"api/report/approverPerformanceEvaluationReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0},index:N},{content:O(++N)+"- وضعیت کارشناسان اعتباری در بررسی و تنظیم مصوبه",htmlReportApi:"report/approverPerformanceEvaluationByDirExpertReport/?reportNumber=",nonHtmlReportApi:"api/report/approverPerformanceEvaluationByDirExpertReport/?reportNumber=",filters:{province:!0},index:N},{content:O(++N)+"-  وضعیت قرار داد های بازدید شده بر اساس کارشناس بازدید کننده اداره نظارت در هر استان",htmlReportApi:"report/monitoringByProvinceReport/?reportNumber=",nonHtmlReportApi:"api/report/monitoringByProvinceReport/?reportNumber=",filters:{organizationLevel:!0,province:!0},index:N},{content:O(++N)+"- نسبت قرارداد‌های مصوب شده به قراردادهای بازدید شده به تفکیک هر استان",htmlReportApi:"report/approvedToMonitoredRateReport/?reportNumber=",nonHtmlReportApi:"api/report/approvedToMonitoredRateReport/?reportNumber=",filters:{organizationLevel:!0,codesIncluded:!0,codesExcluded:!0,creditSupplyResources:!0,lowAmount:!0,highAmount:!0,creditSupplyResourceText:!0},index:N}],C.refreshCodes=b,C.shiftSelectedReport=S,m()}t.$inject=["host","$window","$log","ReportService","ContractCodeService","CheckListService","ProvinceService","$filter","CreditSupplyResourceService","TraceService","IsicService"],angular.module("app.report").controller("ReportController",t)}(),function(){"use strict";angular.module("app.province",[])}(),function(){"use strict";function t(t){function e(e){var a=i+e+"/getAllCities/";return t(a).get()}function a(e){var a=i+e+"/getAllBranches/";return t(a).get()}function n(e){var a=o+"getByProvince/list/";return t(a).put(null,e,null)}var i="baseInfo/province/",r="baseInfo/city/",o="baseInfo/branch/",s=t(i),l=t(r);return{getAllProvinces:s.get,getProvince:s.getById,createProvince:s.post,updateProvince:s.put,deleteProvince:s["delete"],getAllCities:l.get,getCity:l.getById,createCity:l.post,updateCity:l.put,deleteCity:l["delete"],getAllCitiesOfProvince:e,getAllBranchesOfProvince:a,getAllBranchesByProvinceList:n}}t.$inject=["RequestService"],angular.module("app.province").factory("ProvinceService",t)}(),function(){"use strict";function t(t,e){t.state("root.province-list",{controller:"ProvinceListController",controllerAs:"vm",templateUrl:"app/components/province/province-list.html",url:"/province-list"}).state("root.province-cities",{controller:"ProvinceCitiesController",controllerAs:"vm",templateUrl:"app/components/province/province-cities.html",url:"/province-cities?id"}),e.when("/province/{path:.*}","/province")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.province").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(m.title)}function o(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllProvinces(e).then(function(t){return m.provinces=t?t:[],m.provinces})}function s(){n.createProvince(m.province).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),d(),m.tableParams.reload()})}function l(t){n.deleteProvince(t).then(function(){m.tableParams.reload()})}function c(t){n.updateProvince(t.id,t).then(function(){m.tableParams.reload()})}function d(){m.toggleAdd=!m.toggleAdd,m.provice={}}var m=this;m.directive={},m.provinces=[],m.province={},m.tableParams=new a({},{counts:[],getData:o}),m.title="Directive List Controller",m.toggleAdd=!1,m.newItem={},r(),m.create=s,m["delete"]=l,m.update=c,m.cancelAdd=d}t.$inject=["$confirm","$log","NgTableParams","ProvinceService","Util"],angular.module("app.province").controller("ProvinceListController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){e.log(p.title),m(p.id)}function s(){return i.getAllCitiesOfProvince(p.id).then(function(t){return p.cities=t?t:[],p.cities})}function l(){p.city.province=p.province,i.createCity(p.city).then(function(){a.toast("success","APP.MESSAGES.SUCCESS"),p.toggleAdd=!p.toggleAdd,p.tableParams.reload()})}function c(t){i.deleteCity(t).then(function(){p.tableParams.reload()})}function d(t){i.updateCity(t.id,t).then(function(){p.tableParams.reload()})}function m(t){i.getProvince(t).then(function(t){p.province=t?t:{}})}function u(){p.toggleAdd=!p.toggleAdd,p.city.name=""}var p=this;p.directive={},p.cities=[],p.city={},p.tableParams=new n({},{counts:[],getData:s}),p.id=r.id,p.title="Directive List Controller",p.toggleAdd=!1,o(),p.create=l,p["delete"]=c,p.update=d,p.cancelAdd=u}t.$inject=["$confirm","$log","Util","NgTableParams","ProvinceService","$stateParams"],angular.module("app.province").controller("ProvinceCitiesController",t)}(),function(){"use strict";angular.module("app.plan-type",[])}(),function(){"use strict";function t(t){var e="baseInfo/planType/",a=t(e);return{getAllPlanTypes:a.get,getPlanType:a.getById,updatePlanType:a.put}}t.$inject=["RequestService"],angular.module("app.plan-type").factory("PlanTypeService",t)}(),function(){"use strict";function t(t,e){t.state("root.plan-type",{controller:"PlanTypeController",controllerAs:"vm",templateUrl:"app/components/plan-type/plan-type.html",url:"/plan-type"}),e.when("/plan-type/{path:.*}","/plan-type")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.plan-type").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(l.title)}function r(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllPlanTypes(e).then(function(t){return l.planTypes=t?t:[],l.planTypes})}function o(t){n.updatePlanType(t.id,t).then(function(){l.tableParams.reload()})}function s(){l.toggleAdd=!l.toggleAdd,l.content=""}var l=this;l.directive={},l.planTypes=[],l.tableParams=new a({},{counts:[],getData:r}),l.title="Directive List Controller",l.toggleAdd=!1,i(),l.update=o,l.cancelAdd=s}t.$inject=["$confirm","$log","NgTableParams","PlanTypeService"],angular.module("app").controller("PlanTypeController",t)}(),function(){"use strict";angular.module("app.permissions",[])}(),function(){"use strict";function t(t,e){t.state("root.permissions",{"abstract":!0,template:"<div ui-view></div>",url:"/permissions"}).state("root.permissions.list",{controller:"PermissionsListController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/permissions/permissions-list.html",url:"/list"}),e.when("/permission/list{path:.*}","/permission/list")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.permissions").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){t.log(d.title),d.tableParams=new e({},{getData:l})}function r(t){d.toggleEditPermission[t]=!d.toggleEditPermission[t],d.permissions[t]=angular.copy(d.tempPermissions[t])}function o(){d.tableParams.page(0),d.tableParams.reload()}function s(t,e,i){function r(){n.toast("success"),d.toggleEditPermission[e]=!d.toggleEditPermission[e],i&&(d.toggleEditPermission[e+1]=!0),d.tempPermissions[e]=angular.copy(d.permissions[e])}var o={caption:t.caption};n.compareObjects(d.permissions[e],d.tempPermissions[e])?i&&(d.toggleEditPermission[e]=!1,d.toggleEditPermission[e+1]=!0):a.editCaptionOfPermission(t.id,o).then(r)}function l(t){function e(t){return d.permissions=t?t.content:[],d.tempPermissions=angular.copy(d.permissions),d.tableParams.total(t.totalElements),d.allRecordsCount=t.totalElements,d.permissions}var n={size:t.count(),page:t.page()-1};return d.size=t.count(),d.page=t.page()-1,a.getPermissions(d.searchItem,n).then(e)}function c(t,e,a){"Enter"===t.key&&s(e,a,!0),"Tab"===t.key&&t.shiftKey&&a>0?(d.toggleEditPermission[a]=!1,d.toggleEditPermission[a-1]=!0):"Tab"!==t.key||t.shiftKey||(d.toggleEditPermission[a]=!1,d.toggleEditPermission[a+1]=!0)}var d=this;d.permission={},d.permissions=[],d.tempPermissions=[],d.toggleEditPermission=[],d.title="PermissionsController",d.validStates=[{value:!0,title:"فعال"},{value:!1,title:"غیرفعال"},{value:null,title:"همه"}],d.searchItem={valid:!0},d.cancelEditPermission=r,d.updatePermission=s,d.keyPressed=c,d.search=o,i()}t.$inject=["$log","NgTableParams","UserService","Util"],angular.module("app.permissions").controller("PermissionsListController",t)}(),function(){"use strict";function t(t){function e(e){var a=i+e;return t(a).get()}function a(e){var a=i+"owner/"+e;return t(a).get()}function n(e){var a=i+"actuator/"+e;return t(a).get()}var i="workflowprocess/";t(i);return{getProcessType:e,getOwner:a,getActuator:n}}t.$inject=["RequestService"],angular.module("app.monitoring").factory("WorkflowService",t)}(),function(){"use strict";function t(t){function e(e){var a=dt+e+"/isMyMonitoring";return t(a).get()}function a(e,a){var n=dt+"getMonitoringByProvinceAndExperts/"+e;return t(n).put(null,null,a)}function n(e,a){var n=dt+e+"/changeTeamHead",i={username:a};return t(n).put(null,null,i)}function i(e,a){var n=dt+"getMonitoringByProvinceAndExpert/"+e;return t(n).put(null,null,a)}function r(e,a){var n=dt+"getCoExpertByProvince/"+e;return t(n).put(null,null,a)}function o(e){var a=dt+"getExpertByProvince/"+e;return t(a).put(null,null,null)}function s(e,a){var n=dt+e+"/addExpert";return t(n).put(null,null,a)}function l(e,a){var n=dt+e+"/deleteExpert";return t(n).put(null,null,a)}function c(e,a){var n=dt+e+"/setPerformanceEvaluations";return t(n).put(null,null,a)}function d(e){var a=dt+e+"/processLogs";return t(a).get()}function m(e){var a=dt+e+"/processLogLast";return t(a).get()}function u(e){var a=dt+e+"/getAllowedActions";return t(a).get()}function p(e,a){var n=dt+e+"/start";return t(n).put(null,a)}function g(e,a){var n=dt+e+"/secondExpertAccept";return t(n).put(null,a)}function v(e,a){var n=dt+e+"/reject";return t(n).put(null,a)}function h(e,a){var n=dt+e+"/adminCancel";return t(n).put(null,a)}function f(e,a){var n=dt+e+"/firstExpertAccept";return t(n).put(null,a)}function A(e,a){var n=dt+e+"/finalHeadReject";return t(n).put(null,a)}function b(e,a){var n=dt+e+"/branchExpertAccept";return t(n).put(null,a)}function P(e,a){var n=dt+e+"/accept";return t(n).put(null,a)}function E(e,a){var n=dt+e+"/setLocation";return t(n).put(null,{},a)}function T(e,a,n){var i=dt+e+"/updateConflict";return t(i).put(null,a,n)}function I(e,a){var n=dt+e+"/deleteConflict";return t(n)["delete"](null,a)}function S(e){var a=dt+e+"/calculateConflict";return t(a).put()}function C(e,a){var n=dt+e+"/addConflict";return t(n).post(a)}function O(e,a){var n=dt+e+"/addInvoice";return t(n).post(a)}function N(e,a,n){var i=dt+e+"/updateInvoice",r={monitoringInvoiceId:n};return t(i).put(null,a,r)}function R(e,a,n){var i=dt+e+"/batchInsertInvoice";return t(i).put(null,a,n)}function y(e,a){var n=dt+e+"/addPayment";return t(n).post(a)}function M(e,a,n){var i=dt+e+"/updatePayment";return t(i).put(null,a,n)}function D(e,a){var n=dt+e+"/addAssurance";return t(n).post(a)}function L(e,a,n){var i=dt+e+"/updateAssurance";return t(i).put(null,a,n)}function U(e,a,n){var i=dt+e+"/setLicense";return t(i).put(null,a,n)}function w(e,a){var n=dt+e+"/deleteInvoice";return t(n)["delete"](null,a)}function x(e,a){var n=dt+e+"/deletePayment";return t(n)["delete"](null,a)}function $(e,a){var n=dt+e+"/deleteCondition";return t(n)["delete"](null,a)}function _(e,a){var n=dt+e+"/deleteAssurance";return t(n)["delete"](null,a)}function k(e,a){var n=dt+e+"/deleteAttachment";return t(n)["delete"](null,a)}function B(e,a){var n=dt+e+"/unsetLicense";return t(n).put(null,null,a)}function F(e,a,n){var i=dt+e+"/updateLicense";return t(i).put(null,a,n)}function H(e,a,n){var i=dt+e+"/addAttachment";return t(i).multipartPost(a,n)}function G(e,a,n){var i=dt+e+"/updateUserMonitoring";return t(i).put(null,a,n)}function V(e,a){var n=dt+e+"/addCheckList";return t(n).post(a)}function j(e,a){var n=dt+e+"/setFinalExpertComment";return t(n).put(null,a)}function q(e){var a=dt+e+"/getContracts";return t(a).get()}function Y(e){var a=dt+e+"/getInvestmentCost/";return t(a).get()}function z(e,a){var n=dt+e+"/setCondition";return t(n).post(a)}function W(e){var a=dt+e+"/delete";return t(a).put()}function K(e){var a=dt+e+"/deleteByAdmin";return t(a).put()}function X(e){var a=dt+"searchDirective";return t(a).get({dirNumber:e})}function Q(e,a){var n=dt+e+"/addLicenseItem";return t(n).post(a)}function J(e,a){var n=dt+e+"/updateLicenseItem",i={itemId:a.id};return t(n).put(null,a,i)}function Z(e,a){var n=dt+e+"/deleteLicenseItem",i={itemId:a};return t(n)["delete"](null,i)}function tt(e,a){var n=dt+e+"/commitmentConvertLicense/add";return t(n).post(a)}function et(e,a){var n=dt+"/commitmentConvertLicense/"+e+"/update";return t(n).put(null,a)}function at(e,a,n){var i=dt+"commitmentConvertLicense/"+e+"/setDone";return t(i).multipartPost(n,a)}function nt(e,a,n){var i=dt+"commitmentConvertLicense/"+e+"/updateDone";return t(i).multipartPost(n,a)}function it(){return[{id:0,name:"created",title:"ایجاد شده",staff:!0,province:!0,next:[2,2],previous:[]},{id:1,name:"deleted",title:"حذف شده",staff:!0,province:!0,next:[],previous:[]},{id:2,name:"started",title:"کارشناس اول - در حال تکمیل",staff:!0,province:!0,next:[3,3],previous:0},{id:3,name:"calculated",title:"کارشناس اول - محاسبه شده",staff:!0,province:!0,next:[4,4],previous:0},{id:4,name:"firstExpertAccepted",title:"کارشناس دوم - در حال بررسی",staff:!0,province:!0,next:[6,5],previous:0},{id:5,name:"provinceAcceptingWaited",title:"معاون اعتباری حقوقی - در حال بررسی",staff:!1,province:!0,next:[null,7],previous:4},{id:6,name:"teamHeadAcceptingWaited",title:"سرگروه بخش - در حال بررسی",staff:!0,province:!1,next:[8,null],previous:4},{id:7,name:"provinceAccepted",title:"تایید شده در استان",staff:!1,province:!0},{id:8,name:"teamHeadAccepted",title:"رئیس اداره - در حال بررسی",staff:!0,province:!1,next:[9,null],previous:6},{id:9,name:"finalHeadAccepted",title:"تایید شده در ستاد",staff:!0,province:!1},{id:10,name:"branchAccepted",title:"تایید شده در شعبه",staff:!1,province:!1,branch:!0}]}function rt(t,e,a){if("BRANCH"===e&&3===t)return it()[11];if(1===a&&3===t)return rt(4,e);var n="STAFF"===e?0:1,i=it()[t];return i&&i.next&&i.next[n]?it()[i.next[n]]:{title:""}}function ot(t,e){if(1===e&&(5===t||6===t))return it()[2];var a=it()[t];return a&&a.previous?it()[a.previous]:{title:""}}function st(t){var e={},a=moment.duration(moment().diff(moment(t.lastTransitionDate))).asDays();
return e.title=a?Math.ceil(a)+" روز":"امروز",e["class"]=t.currentStep.finalized||!a||2>a?"":4>a?"b-warning-2":6>a?"b-warning-3":8>a?"b-warning-4":"b-warning-5",e}function lt(){return[{value:"ACTIVE",caption:"فعال"},{value:"SEMI_ACTIVE",caption:"نیمه‌فعال"},{value:"INACTIVE",caption:"غیرفعال"},{value:"UNDERWAY",caption:"طرح در دست اجرا"}]}function ct(){return[{id:0,value:"start",name:"start",caption:"آغاز توسط کارشناس اول"},{id:1,value:"delete",name:"delete",caption:"حذف"},{id:2,value:"editing",name:"editing",caption:"ویرایش"},{id:3,value:"reject",name:"firstExpertRejectBeforeCalculating",caption:"بازگشت توسط کارشناس اول پیش از محاسبه مغایرت"},{id:4,value:"calculating",name:"calculating",caption:"محاسبه مغایرت"},{id:5,value:"editing",name:"editingAfterCalculate",caption:"ویرایش پس از محاسبه مغایرت"},{id:6,value:"calculating",name:"conflictEditing",caption:"محاسبه مغایرت"},{id:7,value:"firstExpertAccept",name:"firstExpertAccept",caption:"تائید توسط کارشناس اول"},{id:8,value:"reject",name:"firstExpertReject",caption:"بازگشت توسط کارشناس اول"},{id:9,value:"finalExpertAcceptForProvince",name:"secondExpertAcceptForProvince",caption:"تائید کارشناس دوم در استان و ارسال به مدیر مربوطه"},{id:10,value:"finalExpertAcceptForTeamHead",name:"secondExpertAcceptForTeamHead",caption:"تائید کارشناس دوم در ستاد و ارسال به سرگروه"},{id:11,value:"reject",name:"secondExpertReject",caption:"بازگشت توسط کارشناس دوم"},{id:12,value:"accept",name:"teamHeadAccept",caption:"تائید سرگروه در ستاد"},{id:13,value:"reject",name:"teamHeadReject",caption:"بازگشت توسط سرگروه"},{id:14,value:"accept",name:"finalHeadAccept",caption:"تائید توسط رئیس اداره"},{id:15,value:"finalHeadReject",name:"finalHeadReject",caption:"بازگشت توسط رئیس اداره"},{id:16,value:"accept",name:"provinceAccept",caption:"تائید توسط مدیر استان"},{id:17,value:"reject",name:"provinceReject",caption:"بازگشت توسط مدیر استان"},{id:18,value:"finalExpertAcceptForProvince",name:"finalExpertAcceptForProvince",caption:"تائيد توسط کارشناس در استان"},{id:19,value:"finalExpertAcceptForTeamHead",name:"finalExpertAcceptForTeamHead",caption:"تائيد توسط کارشناس اول و ارسال به سرگروه"},{id:20,value:"editingInUserMonitoring",name:"editingInUserMonitoring",caption:"ویرایش"},{id:21,value:"branchExpertAccept",name:"branchExpertAccept",caption:"تائيد در شعبه"},{id:22,value:"adminCancelFinalizedHead",name:"adminCancelFinalizedHead",caption:"لغو توسط مدیر"},{id:23,value:"adminCancelFinalizedProvince",name:"adminCancelFinalizedProvince",caption:"لغو توسط مدیر"},{id:24,value:"adminCancelFinalizedBranch",name:"adminCancelFinalizedBranch",caption:"لغو توسط مدیر"},{id:25,value:"deleteByAdmin",name:"deleteByAdmin",caption:"حذف توسط مدیر"}]}var dt="monitoring/",mt=t(dt);return{getAllMonitorings:mt.get,getMonitoringById:mt.getById,createMonitoring:mt.post,searchMonitoring:mt.post,updateMonitoring:mt.put,deleteMonitoring:W,deleteMonitoringByAdmin:K,cartableMonitoring:t(dt+"cartable").post,myMonitoringsMission:t(dt+"myMissions").get,myMonitoringsRejectedMission:t(dt+"myRejectedMissions").get,UpdateUserMonitoringInMonitoring:G,AddCheckListToMonitoring:V,AddInvoiceToMonitoring:O,updateInvoiceInMonitoring:N,BatchInsertInvoiceToMonitoring:R,AddPaymentToMonitoring:y,updatePaymentInMonitoring:M,deleteInvoiceFromMonitoring:w,deletePaymentFromMonitoring:x,deleteAttachmentFromMonitoring:k,unsetLicense:B,updateLicenseInMonitoring:F,setLicense:U,addMonitoringLicenseItem:Q,updateMonitoringLicenseItem:J,deleteMonitoringLicenseItem:Z,addFileAttachmentToMonitoring:H,AddAssuranceToMonitoring:D,updateAssuranceInMonitoring:L,deleteAssuranceFromMonitoring:_,SetFinalCommentInMonitoring:j,getAllMonitoringContracts:q,getInvestmentCostMonitoring:Y,SetConditionInMonitoring:z,deleteConditionFromMonitoring:$,AddConflictToMonitoring:C,updateCalculateConflictInMonitoring:S,deleteConflictFromMonitoring:I,updateConflictInMonitoring:T,setLocationInMonitoring:E,startMonitoring:p,firstExpertAcceptMonitoring:f,secondExpertAcceptMonitoring:g,acceptMonitoring:P,branchExpertAccept:b,rejectMonitoring:v,cancelFinalized:h,finalHeadRejectMonitoring:A,getAllowedActionsOnMonitoring:u,getProcessLogs:d,getLastProcessLog:m,getStepsSync:it,getTransitionsSync:ct,getNextStepSync:rt,getPreviousStepSync:ot,getDelaySync:st,getActivenessStatusesSync:lt,setPerformanceEvaluations:c,addUserMonitoring:s,deleteUserMonitoring:l,getExpertByProvince:o,getCoExpertByProvince:r,getMonitoringByProvinceAndExpert:i,getMonitoringByProvinceAndExperts:a,searchDirective:X,isMyMonitoring:e,changeTeamHead:n,addConvertDebit:tt,updateConvertDebit:et,setDoneCommitmentConvertLicense:at,updateDoneCommitmentConvertLicense:nt}}t.$inject=["RequestService"],angular.module("app.monitoring").factory("MonitoringService",t)}(),function(){"use strict";function t(t,e){t.state("root.monitoring",{controller:"MonitoringController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring.html",resolve:{me:["Principal",function(t){return t.identity()}]},url:"/monitoring/{monitoringId}"}).state("monitoring-print",{controller:"MonitoringPrintController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring.print.html",resolve:{},url:"/monitoring-print/{monitoringId}"}).state("root.monitoring-list",{controller:"MonitoringListController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring-list.html",url:"/monitoring-list/?contractId?contractNumber"}).state("root.monitoring-cartable",{controller:"MonitoringCartableController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring-list.html",url:"/monitoring-cartable?steps"}).state("root.monitoring-mission",{controller:"MonitoringMissionController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring-list.html",url:"/monitoring-mission"}).state("root.monitoring-mission-announcement",{controller:"MissionAnnouncementController",controllerAs:"vm",templateUrl:"app/components/monitoring/missionAnnouncement/mission-announcement.html",url:"/monitoring-mission-announcement"}).state("root.monitoring.monitoring-details",{controller:"MonitoringDetailsController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoring-details/monitoring-details.html",url:"/details"}).state("root.monitoring.flowView",{controller:"MonitoringFlowController",controllerAs:"vm",templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",url:"/flowView",resolve:{$uibModalInstance:function(){return null}}}).state("root.monitoring.userMonitorings",{controller:"UserMonitoringsController",controllerAs:"vm",templateUrl:"app/components/monitoring/userMonitorings/userMonitorings.html",url:"/userMonitorings"}).state("root.monitoring.attachments",{controller:"MonitoringAttachmentsController",controllerAs:"vm",templateUrl:"app/components/monitoring/attachments/attachments.html",resolve:{$uibModalInstance:function(){return null},monitoringId:function(){return null}},url:"/attachments"}).state("root.monitoring.invoice",{controller:"MonitoringInvoiceController",controllerAs:"vm",templateUrl:"app/components/monitoring/invoice/invoice-list.html",url:"/invoice-list"}).state("root.monitoring.payments",{controller:"MonitoringPaymentsController",controllerAs:"vm",templateUrl:"app/components/monitoring/payments/payments-list.html",url:"/payments"}).state("root.monitoring.assurance",{controller:"MonitoringAssuranceController",controllerAs:"vm",templateUrl:"app/components/monitoring/assurance/assurance.html",url:"/assurance"}).state("root.monitoring.contract",{controller:"MonitoringContractController",controllerAs:"vm",templateUrl:"app/components/monitoring/contract/contract.html",url:"/contract"}).state("root.monitoring.trace",{controller:"MonitoringTraceController",controllerAs:"vm",templateUrl:"app/components/monitoring/trace/trace.html",url:"/trace?step"}).state("root.monitoring.checkList",{controller:"MonitoringCheckListController",controllerAs:"vm",templateUrl:"app/components/monitoring/checkList/monitoring-checkList.html",url:"/checkList"}).state("root.monitoring.preConditions",{controller:"MonitoringPreConditionsController",controllerAs:"vm",templateUrl:"app/components/monitoring/preConditions/preConditions.html",url:"/preConditions"}).state("root.monitoring.progress",{controller:"MonitoringProgressController",controllerAs:"vm",templateUrl:"app/components/monitoring/progress/progress.html",url:"/progress"}).state("root.monitoring.license",{controller:"MonitoringLicenseController",controllerAs:"vm",templateUrl:"app/components/monitoring/license/license-list.html",url:"/license"}).state("root.monitoring.conflict",{controller:"MonitoringConflictController",controllerAs:"vm",templateUrl:"app/components/monitoring/conflict/conflict-list.html",url:"/conflict"}).state("root.monitoring.comment",{controller:"MonitoringCommentController",controllerAs:"vm",templateUrl:"app/components/monitoring/comment/comment.html",url:"/comment"}).state("root.monitoring.lat-long",{controller:"MonitoringLatLongController",controllerAs:"vm",templateUrl:"app/components/monitoring/lat-long/lat-long.html",url:"/lat-long"}).state("root.convert-debit",{controller:"ConvertDebitController",controllerAs:"vm",templateUrl:"app/components/monitoring/convert-debit/convert-debit.html",url:"/convert-debit"}),e.when("/?contractId/{path:.*}","/monitoring-list")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c){function d(){e.debug("monitoring print module activated;"),m(),R()}function m(){function t(t){return D.monitoring=t?t:{},u(),p(),D.monitoring.directive.dirNumber&&g(),D.monitoringLicenses=t?t.monitoringLicenses:[],v(),h(),f(t),b(t),E(),T(t),D.monitoring.latitude=D.monitoring.latitude||0,D.monitoring.longitude=D.monitoring.longitude||0,C(),D.agentBranchPerformance=D.monitoring.agentBranchPerformanceEvaluation,D.approverPerformance=D.monitoring.approverPerformanceEvaluation,D.applicantPerformance=D.monitoring.applicantPerformanceEvaluation,O(),D.conflicts=t?t.monitoringConflicts:[],D.monitoringLoading=!1,D.monitoring}function e(t){}return r.getMonitoringById(D.monitoringId).then(t,e)}function u(){D.sumDirContractTotalAmount=0,D.sumDirInterestAmount=0,D.sumDirInterestAndOriginAmount=0;D.monitoring.directive.dirNumber;return D.dirContracts=D.monitoring.dirContracts,D.dirContracts.forEach(function(t){D.sumDirContractTotalAmount+=t.totalAmount,D.sumDirInterestAmount+=t.interestAmount}),L++,D.dirContracts}function p(){function t(t){return console.log("getAllMonitoringContracts",t),D.contracts=t?t:[],D.tempContracts=angular.copy(D.contracts),D.sumContractTotalAmount=0,D.sumInterestAmount=0,D.sumRemainingInCurrent=0,D.sumRemainingInNonCurrent=0,D.contracts.forEach(function(t){t.remainingInCurrent=t.remainingInCurrent?t.remainingInCurrent:0,t.remainingInNonCurrent=t.remainingInNonCurrent?t.remainingInNonCurrent:0,D.sumRemainingInCurrent+=t.remainingInCurrent,D.sumRemainingInNonCurrent+=t.remainingInNonCurrent,D.sumContractTotalAmount+=t.totalAmount,D.sumInterestAmount+=t.totalAmount*t.interestRate/100,D.sumInterestAndOriginAmount+=t.totalAmount+t.totalAmount*t.interestRate/100}),L++,D.contracts}if(!D.monitoring.directive.dirNumber)return L++,t([D.monitoring.contract]);var e={directiveNumber:D.monitoring.directive.dirNumber.toString(),stepIds:[7,9,10]},a={page:0,size:1e3};return r.searchMonitoring(e,a).then(function(e){var a=[];return e&&e.content&&e.content.forEach(function(t){i.indexOf(a,t.contract.id,"id")<0&&a.push(t.contract)}),i.indexOf(a,D.monitoring.contract.id,"id")<0&&a.push(D.monitoring.contract),D.searchMonitoringLoading=!1,t(a)})}function g(){D.directive=D.monitoring.directive,D.monitoringPreConditions=D.monitoring.dirConditions,D.monitoring.monitoringConditions.forEach(function(t){D.monitoringPreConditions.forEach(function(e){t.dirCondition.id===e.id&&(e.reply=t.reply,e.originalId=t.id)})}),D.preConditions=[],D.monitoringPreConditions.forEach(function(t){var e={dirCondition:t,monitoring:{id:D.monitoringId},id:t.originalId,reply:t.reply};D.preConditions.push(e)}),L++,console.log(D.preConditions)}function v(){var t={monitoringId:D.monitoringId};s.getDirLicenseConflicts(t).then(function(t){D.licenseConflicts=t?t:[],
// console.log("vm.licenseConflicts = ", vm.licenseConflicts);
D.monitoringLicenses.forEach(function(t){var e=!1;D.licenseConflicts.forEach(function(a){t.dirLicense&&a.id===t.dirLicense.id&&(t.hasConflict=a.conflict,e=!0)}),e||(t.hasConflict="")}),D.getDirLicenseConflictsLoading=!1,L++})}function h(){return D.dirLicenses=D.monitoring.dirLicenses,D.dirLicenses.forEach(function(t){var e=!1;if(D.monitoringLicenses.forEach(function(a){a.dirLicense&&a.dirLicense.id===t.id&&(e=!0)}),!e){var a={monitoring:D.monitoring,dirLicense:t,comment:""};D.monitoringLicenses.push(a)}}),L++,D.monitoringLicenses}function f(t){D.invoices=t?t.monitoringInvoices:[],D.sumPrice=0,D.sumInvoiceBasedCount=0,D.sumMonitoringBasedCount=0,D.invoices.forEach(function(t){D.sumPrice+=t.price,D.sumInvoiceBasedCount+=t.invoiceBasedCount,D.sumMonitoringBasedCount+=t.monitoringBasedCount}),D.dirPaymentPerParts=D.monitoring.dirPayments,A(),D.invoices.forEach(function(t){t.key=t.investmentAction.id});var e=l("orderBy")(D.invoices,"key",!1);return D.invoices=[],D.invoices=angular.copy(e),D.invoices=l("orderBy")(D.invoices,"key",!1),L++,D.invoices}function A(){var t={monitoringId:D.monitoringId};return s.getInvoiceConflict(t).then(function(t){return D.invoiceConflicts=t?t:[],D.dirPaymentPerParts.forEach(function(t){for(var e=!0,a=0;a<D.invoiceConflicts.length;a++)D.invoiceConflicts[a].investmentAction.id===t.investmentAction.id&&(e=!1);e&&D.invoiceConflicts.push({chequeCount:0,directiveBased:t.bankShareAmount+t.applicantShareAmount,investmentAction:t.investmentAction,monitoringBased:0,invoiceBased:0})}),D.sumDirectiveBased=0,D.sumInvoiceBased=0,D.sumMonitoringBased=0,D.invoiceConflicts.forEach(function(t){D.sumDirectiveBased+=t.directiveBased,D.sumInvoiceBased+=t.invoiceBased,D.sumMonitoringBased+=t.monitoringBased}),L++,D.getInvoiceConflictLoading=!1,D.invoiceConflicts})}function b(t){D.payments=t?t.monitoringPayments:[],D.sumBankSharedChequeAmount=0,D.sumApplicantSharedChequeAmount=0,D.payments.forEach(function(t){D.sumBankSharedChequeAmount+=t.bankSharedChequeAmount,D.sumApplicantSharedChequeAmount+=t.applicantSharedChequeAmount}),D.sumTotalAmount=D.sumBankSharedChequeAmount+D.sumApplicantSharedChequeAmount,D.dirPaymentPerParts=D.monitoring.dirPayments,P(),D.payments.forEach(function(t){t.key=t.investmentAction.id});l("orderBy")(D.payments,"key",!1);return D.payments=l("orderBy")(D.payments,"key",!1),L++,D.payments}function P(){D.bankQouta=[],D.applicantQouta=[],D.countQouta=[];var t={monitoringId:D.monitoringId};return s.getPaymentConflict(t).then(function(t){D.paymentConflicts=t?t:[],D.dirPaymentPerParts.forEach(function(t){for(var e=!0,a=0;a<D.paymentConflicts.length;a++)D.paymentConflicts[a].investmentAction.id===t.investmentAction.id&&(e=!1);e&&D.paymentConflicts.push({chequeCount:0,directiveBasedBankShared:t.bankShareAmount,directiveBasedApplicantShared:t.applicantShareAmount,investmentAction:t.investmentAction,paymentBasedApplicantShared:0,paymentBasedBankShared:0,paymentStepCount:t.paymentStepCount})});for(var e=0;e<D.paymentConflicts.length;e++){var a=D.paymentConflicts[e].paymentBasedBankShared?D.paymentConflicts[e].paymentBasedBankShared:0,n=D.paymentConflicts[e].directiveBasedBankShared?D.paymentConflicts[e].directiveBasedBankShared:0,i=D.paymentConflicts[e].paymentBasedApplicantShared?D.paymentConflicts[e].paymentBasedApplicantShared:0,r=D.paymentConflicts[e].directiveBasedApplicantShared?D.paymentConflicts[e].directiveBasedApplicantShared:0;a===n?D.bankQouta[e]="GreenBG":a>n?D.bankQouta[e]="OrangeBG":n>a&&(D.bankQouta[e]="RedBG "),i===r?D.applicantQouta[e]="GreenBG":i>r?D.applicantQouta[e]="GreenBG":r>i&&(D.applicantQouta[e]="RedBG"),D.paymentConflicts[e].paymentStepCount>D.paymentConflicts[e].chequeCount?D.countQouta[e]="RedBG":D.countQouta[e]="GreenBG"}return D.sumDirectiveBasedBankShared=0,D.sumPaymentBasedBankShared=0,D.sumDirectiveBasedApplicantShared=0,D.sumPaymentBasedApplicantShared=0,D.sumPaymentStepCount=0,D.sumChequeCount=0,D.paymentConflicts.forEach(function(t){D.sumDirectiveBasedBankShared+=t.directiveBasedBankShared,D.sumPaymentBasedBankShared+=t.paymentBasedBankShared,D.sumDirectiveBasedApplicantShared+=t.directiveBasedApplicantShared,D.sumPaymentBasedApplicantShared+=t.paymentBasedApplicantShared,D.sumPaymentStepCount+=t.paymentStepCount,D.sumChequeCount+=t.chequeCount}),L++,D.getPaymentConflictLoading=!1,D.paymentConflicts})}function E(){return r.getInvestmentCostMonitoring(D.monitoringId).then(function(t){return D.progresses=t?t:[],D.sumDirectiveBasedAmount=0,D.sumPaymentToDirective=0,D.sumPaymentToDirectivePercent=0,D.sumInvoiceToDirective=0,D.sumInvoiceToDirectivePercent=0,D.sumProgressRate=0,D.progresses.forEach(function(t){t.invoiceBasedAmount=t.invoiceBasedAmount?t.invoiceBasedAmount:0,t.paymentBasedAmount=t.paymentBasedAmount?t.paymentBasedAmount:0,t.invoiceBasedToDirectiveBasedAmountRate=t.invoiceBasedToDirectiveBasedAmountRate?100*t.invoiceBasedToDirectiveBasedAmountRate:0,t.paymentBasedToDirectiveBasedAmountRate=t.paymentBasedToDirectiveBasedAmountRate?100*t.paymentBasedToDirectiveBasedAmountRate:0,t.progressRate=t.progressRate?t.progressRate:0,D.sumDirectiveBasedAmount+=t.directiveBasedAmount,D.sumPaymentToDirective+=t.paymentBasedAmount?t.paymentBasedAmount:0,D.sumInvoiceToDirective+=t.invoiceBasedAmount?t.invoiceBasedAmount:0,D.sumProgressRate+=(t.progressRate?t.progressRate/100:0)*t.directiveBasedAmount,t.invoiceBasedToDirectiveBasedAmountRate=Math.round(t.invoiceBasedToDirectiveBasedAmountRate),t.paymentBasedToDirectiveBasedAmountRate=Math.round(t.paymentBasedToDirectiveBasedAmountRate)}),D.sumProgressRate=D.sumProgressRate/D.sumDirectiveBasedAmount*100,D.sumPaymentToDirectivePercent=D.sumPaymentToDirective/D.sumDirectiveBasedAmount*100,D.sumInvoiceToDirectivePercent=D.sumInvoiceToDirective/D.sumDirectiveBasedAmount*100,console.log("vm.progresses = ",D.progresses),L++,D.getInvestmentCostMonitoringLoading=!1,D.progresses})}function T(t){return D.assurances=t?t.monitoringAssurances:[],D.sumExpertValue=0,D.sumAcceptedValue=0,D.sumMortgagedValue=0,D.assurances.forEach(function(t){D.sumExpertValue+=t.expertValue,D.sumAcceptedValue+=t.expertValue*t.assuranceType.acceptedPercent/100,D.sumMortgagedValue+=t.mortgagedValue}),I(),S(),L++,D.assurances}function I(){var t=D.monitoring.directive.dirRequiredAssurancePercentage?D.monitoring.directive.dirRequiredAssurancePercentage:100;D.totalAmount=(D.monitoring.getTotal+D.monitoring.getTotalInterestAmount)*(t/100),0===D.monitoring.dirAssurances.length&&(D.showFlag=!0),D.dirAssurances=D.monitoring.dirAssurances,L++}function S(){var t={monitoringId:D.monitoringId};return s.getAssuranceConflict(t).then(function(t){return D.assuranceConflicts=t?t:[],D.sumOfSumTakenAssuranceAmount=0,D.dirAssurances.forEach(function(t){for(var e=!0,a=0;a<D.assuranceConflicts.length;a++)D.assuranceConflicts[a].assuranceType.id===t.assuranceType.id&&(e=!1);e&&(console.log("assurance.limit",t.limit),D.assuranceConflicts.push({assuranceType:t.assuranceType,condition:t.limit,dirAssurance:t,directive:{id:D.monitoring.contract.directiveId},dirAssuranceAmount:null,sumTakenAssuranceAmount:0}))}),D.assuranceConflicts.forEach(function(t){t.getConflict=function(){if(this.sumTakenAssuranceAmount&&!this.condition)return"OrangeBG";switch(this.condition){case"MAXIMUM":if(!this.dirAssuranceAmount)break;if(this.sumTakenAssuranceAmount>this.dirAssuranceAmount)return t.conflictAmount=Math.abs(t.dirAssuranceAmount-t.sumTakenAssuranceAmount),"OrangeBG";break;case"MINIMUM":if(!this.dirAssuranceAmount||this.sumTakenAssuranceAmount<this.dirAssuranceAmount)return t.conflictAmount=Math.abs(t.dirAssuranceAmount-t.sumTakenAssuranceAmount),"RedBG";break;case"EQUAL":if(!this.dirAssuranceAmount||this.sumTakenAssuranceAmount<this.dirAssuranceAmount)return t.conflictAmount=Math.abs(t.dirAssuranceAmount-t.sumTakenAssuranceAmount),"RedBG";if(this.sumTakenAssuranceAmount>this.dirAssuranceAmount)return t.conflictAmount=Math.abs(t.dirAssuranceAmount-t.sumTakenAssuranceAmount),"OrangeBG";break;case"REST":if(D.totalAmount>D.sumOfSumTakenAssuranceAmount)return t.conflictAmount=Math.abs(t.dirAssuranceAmount-t.sumTakenAssuranceAmount),"RedBG";break;default:return"non"}return"non"},D.sumOfSumTakenAssuranceAmount+=t.sumTakenAssuranceAmount}),D.totalDifference=D.totalAmount>D.sumOfSumTakenAssuranceAmount?D.totalAmount-D.sumOfSumTakenAssuranceAmount:0,D.assuranceConflicts.forEach(function(t){"REST"===t.condition&&(t.dirAssuranceAmount=D.totalAmount-(D.sumOfSumTakenAssuranceAmount-t.sumTakenAssuranceAmount),t.conflictAmount=D.totalDifference)}),L++,D.getAssuranceConflictLoading=!1,D.assuranceConflicts})}function C(){function t(t){l++,D.monitorings=D.monitorings.concat(t?t.content:[]),1===l&&D.monitoring.directive.dirParentDirectiveNumber||(L++,a(),D.searchMonitoringLatLongLoading=!1)}function e(t){t.content.forEach(function(t){i.indexOf(D.monitorings,t.id,"id")<0&&D.monitorings.push(t)}),a(),D.searchMonitoringLatLongLoading=!1}function a(){console.log("calc",D.monitorings),D.dimensions=[],D.monitorings.forEach(function(t){console.log(t.number,t.latitude,t.latitude),void 0!==t.id&&n(t)})}function n(t){if(t.latitude&&t.longitude){var e={lat:D.monitoring.latitude,lng:D.monitoring.longitude},a={lat:t.latitude,lng:t.longitude},n=o(e,a);return D.dimensions.push({monitoring:t,distance:n/1e3}),n/1e3}}function o(t,e){var a=6378137,n=s(e.lat-t.lat),i=s(e.lng-t.lng),r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(s(t.lat))*Math.cos(s(e.lat))*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),l=a*o;return l}function s(t){return t*Math.PI/180}var l=0;D.monitorings=[],r.searchMonitoring({directiveNumber:D.monitoring.directive.dirNumber}).then(t),D.monitoring.directive.dirParentDirectiveNumber&&r.searchMonitoring({directiveNumber:D.monitoring.directive.dirParentDirectiveNumber}).then(e)}function O(){function t(){D.monitoringCheckListCount=0;for(var t=0;t<D.monitoring.monitoringCheckLists.length;t++)for(var e=0;e<D.monitoringCheckList.length;e++)D.monitoring.monitoringCheckLists[t].checkList.id===D.monitoringCheckList[e].checkList.id&&(D.monitoringCheckListCount++,D.monitoringCheckList[e].checkListStatus=D.monitoring.monitoringCheckLists[t].checkListStatus,D.monitoringCheckList[e].comment=D.monitoring.monitoringCheckLists[t].comment)}return 2===D.monitoring.currentStep.id?o.getEnabledCheckList().then(function(e){D.checkList=e?e:[],D.monitoringCheckList=[];for(var a=0;a<D.checkList.length;a++){var n={checkList:D.checkList[a],checkListStatus:"",comment:"",monitoring:{id:D.monitoringId}};D.monitoringCheckList.push(n)}return t(),D.monitoringCheckList}):2!==D.monitoring.currentStep.id?(D.monitoringCheckList=[],D.monitoringCheckList=D.monitoringCheckList.concat(D.monitoring.monitoringCheckLists),D.monitoringCheckList):void 0}function N(t){return c+"lmsUserManagement/user/"+t.username+"/getSign"}function R(){function t(t){return D.lastProcess=t?t:{},D.getLastMonitoringProcessLogsLoading=!1,D.processLogs}return r.getLastProcessLog(D.monitoringId).then(t)}function y(){n(function(){
// 	vm.searchMonitoringLatLongLoading, vm.getDirLicenseConflictsLoading, vm.getInvoiceConflictLoading,
// 	vm.getPaymentConflictLoading, vm.getAssuranceConflictLoading);
D.loading=D.monitoringLoading||D.searchMonitoringLoading||D.getInvestmentCostMonitoringLoading||D.searchMonitoringLatLongLoading||D.getDirLicenseConflictsLoading||D.getInvoiceConflictLoading||D.getPaymentConflictLoading||D.getAssuranceConflictLoading||D.getLastMonitoringProcessLogsLoading,D.loading?y():window.print()},2200)}function M(){var t=9;return D.monitoringLoading&&t--,D.searchMonitoringLoading&&t--,D.getInvestmentCostMonitoringLoading&&t--,D.searchMonitoringLatLongLoading&&t--,D.getDirLicenseConflictsLoading&&t--,D.getInvoiceConflictLoading&&t--,D.getPaymentConflictLoading&&t--,D.getAssuranceConflictLoading&&t--,D.getLastMonitoringProcessLogsLoading&&t--,Math.floor(t/9*100)}var D=this;D.monitoring={},D.monitoringId=a.monitoringId;var L=0;D.maxCols=10,D.today=new Date,document.title="Monitoring_"+D.monitoringId+"_"+moment(D.today).format("jYY-jM-jD"),D.getSignUrl=N,D.progress=M,D.monitoringLoading=!0,D.searchMonitoringLoading=!0,D.getInvestmentCostMonitoringLoading=!0,D.searchMonitoringLatLongLoading=!0,D.getLastMonitoringProcessLogsLoading=!0,D.getDirLicenseConflictsLoading=!0,D.getInvoiceConflictLoading=!0,D.getPaymentConflictLoading=!0,D.getAssuranceConflictLoading=!0,D.loading=D.monitoringLoading||D.searchMonitoringLoading||D.getInvestmentCostMonitoringLoading||D.searchMonitoringLatLongLoading||D.getDirLicenseConflictsLoading||D.getInvoiceConflictLoading||D.getPaymentConflictLoading||D.getAssuranceConflictLoading||D.getLastMonitoringProcessLogsLoading,d(),y()}t.$inject=["$state","$log","$stateParams","$timeout","Util","MonitoringService","CheckListService","ConflictService","$filter","host"],angular.module("app.monitoring").controller("MonitoringPrintController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){e.debug("monitoring module activated;"),y(),S(),p(!0),f(),M(),B.justCame=!0,B.currentState=t.$current.name}function u(e){return B.currentState=t.$current.name,t.$current.name===e}function p(t){function e(t){return B.monitoring=t?t:{},B.tempMonitoring=angular.copy(t),F.resolve(t),C(),B.justCame&&2===B.monitoring.currentStep.id&&(B.justCame=!1,B.monitoring.directive&&B.monitoring.directive.dirNumber||w()),B.monitoring}function a(t){F.reject(t)}return t?F?F.promise:(F=o.defer(),void i.getMonitoringById(B.monitoringId).then(e,a)):(F=o.defer(),i.getMonitoringById(B.monitoringId).then(e,a))}function g(){B.toggleContractDirectiveEdit=!B.toggleContractDirectiveEdit,p()}function v(){function e(){n.toast("success","APP.MESSAGES.SUCCESS"),B.comment=null,"created"===B.monitoring.currentStep.name&&t.go("root.monitoring.monitoring-details",{monitoringId:B.monitoringId}),p(),s.$broadcast("stateChanged")}switch(B.monitoring.currentStep.name){case"created":i.startMonitoring(B.monitoringId,B.comment).then(e);break;case"started":n.toast("error","APP.MESSAGES.CALCULATE_CONFLICTS_FIRST");break;case"calculated":i.firstExpertAcceptMonitoring(B.monitoringId,B.comment).then(e);break;case"firstExpertAccepted":i.secondExpertAcceptMonitoring(B.monitoringId,B.comment).then(e);break;case"provinceAcceptingWaited":case"teamHeadAcceptingWaited":case"teamHeadAccepted":i.acceptMonitoring(B.monitoringId,B.comment).then(e)}}function h(){switch(B.monitoring.currentStep.name){case"created":case"started":case"calculated":case"firstExpertAccepted":case"provinceAcceptingWaited":case"teamHeadAcceptingWaited":i.rejectMonitoring(B.monitoringId,B.comment).then(function(){n.toast("success","APP.MESSAGES.SUCCESS"),B.comment="",p()});break;case"teamHeadAccepted":i.finalHeadRejectMonitoring(B.monitoringId,B.comment).then(function(){n.toast("success","APP.MESSAGES.SUCCESS"),B.comment="",p()})}}function f(t){function e(t){B.allowedActionList=t,B.allowedAction=!1,angular.forEach(t,function(t){("editing"===t.name||"editingAfterCalculate"===t.name)&&(B.allowedAction=!0)}),V.resolve(B.allowedAction)}function a(t){V.reject(t)}return t&&V?V.promise:(V=o.defer(),i.getAllowedActionsOnMonitoring(B.monitoringId).then(e,a),V.promise)}function A(){B.loading=!0;var e=t.$current.name.split(".")[2];console.log("broadcastig next_"+e,B.allowedAction),s.$broadcast("next_"+e,B.allowedAction)}function b(){var e=t.$current.name.split(".")[2],a=j.indexOf(e);a>=j.length||t.go("root.monitoring."+j[a+1],{monitoringId:B.monitoringId})}function P(){var e=t.$current.name.split(".")[2],a=j.indexOf(e);return a+1<j.length}function E(){B.loading=!0;var e=t.$current.name.split(".")[2];console.log("broadcastig previous_"+e,B.allowedAction),s.$broadcast("previous_"+e,B.allowedAction)}function T(){var e=t.$current.name.split(".")[2],a=j.indexOf(e);0>=a||t.go("root.monitoring."+j[a-1],{monitoringId:B.monitoringId})}function I(){var e=t.$current.name.split(".")[2],a=j.indexOf(e);return a>0}function S(){function t(){for(var t=0;t<a.length;t++)e(a[t])?n[0].classList.remove("in-viewport"):(!e(a[t])||e(i))&&n[0].classList.add("in-viewport")}function e(t){var e=t.getBoundingClientRect();return e.top>=-50&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}var a=document.querySelectorAll(".plan-title"),n=document.querySelectorAll(".custom-sidebar-parent"),i=document.querySelector(".main-content-parent");window.addEventListener("load",t),window.addEventListener("scroll",t)}function C(){console.log("checkStatuses"),B.stepStatus={details:B.monitoring.monitoringDate,contract:!1,license:B.monitoring.monitoringLicenses.length>=B.monitoring.dirLicenses.length,preConditions:B.monitoring.monitoringConditions.length>=B.monitoring.dirConditions.length,invoice:B.monitoring.monitoringInvoices&&B.monitoring.monitoringInvoices.length,payments:B.monitoring.monitoringPayments&&B.monitoring.monitoringPayments.length,assurance:B.monitoring.monitoringAssurances&&B.monitoring.monitoringAssurances.length,latlong:B.monitoring.latitude&&B.monitoring.longitude,checkList:B.monitoring.finalExpertComment&&B.monitoring.approverPerformanceEvaluation&&B.monitoring.applicantPerformanceEvaluation&&B.monitoring.agentBranchPerformanceEvaluation&&B.monitoring.monitoringCheckLists&&B.monitoring.monitoringCheckLists.length,conflict:"started"!==B.monitoring.currentStep.name&&"created"!==B.monitoring.currentStep.name&&"deleted"!==B.monitoring.currentStep.name},B.monitoring.dirContracts.forEach(function(t){t.contract&&t.contract.number===B.monitoring.contract.number&&(B.stepStatus.contract=!0)}),B.stepStatus.progress=B.stepStatus.invoice&&B.stepStatus.payments,O(!0)}function O(t){function e(t){return B.directive=t.directive,H.resolve(B.directive),B.directive}function a(t){return H.reject(t),t}return H=o.defer(),p(t).then(e,a)}function N(){if(!B.monitoring||!B.monitoring.userMonitorings||!l)return!1;for(var t=0;t<B.monitoring.userMonitorings.length;t++)if(B.monitoring.userMonitorings[t].lmsUser.username===l.username)return!0;return!1}function R(){return B.isMyMonitoring}function y(){i.isMyMonitoring(B.monitoringId).then(function(t){console.log("isMyMonitoring = ",t),B.isMyMonitoring=t})}function M(t){function e(t){return B.lastProcess=t?t:{},G.resolve(t),B.processLogs}function a(t){G.reject(t)}return t&&G?G.promise:B.monitoringId?(G=o.defer(),i.getLastProcessLog(B.monitoringId).then(e,a)):void 0}function D(){c.open({animation:!0,templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",controller:"MonitoringFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return{monitoringId:B.monitoring.id}}}})}function L(){var t=c.open({animation:!0,templateUrl:"app/components/monitoring/userMonitorings/userMonitorings.html",controller:"UserMonitoringsController",controllerAs:"vm",backdrop:"static",size:"lg",resolve:{$stateParams:function(){return{monitoringId:B.monitoring.id,monitoring:B.monitoring}}}});t.result.then(function(t){console.log("hasChanged",t),t&&p()})}function U(){c.open({animation:!0,templateUrl:"app/components/monitoring/attachments/attachments.html",controller:"MonitoringAttachmentsController",controllerAs:"vm",size:"lg",resolve:{$stateParams:function(){return{monitoringId:B.monitoring.id}}}})}function w(){if(2===B.monitoring.currentStep.id||3===B.monitoring.currentStep.id){var t=c.open({animation:!0,templateUrl:"app/components/monitoring/directive/edit-directive.html",controller:"EditDirectiveController",controllerAs:"vm",size:"md",resolve:{monitoringId:function(){return B.monitoring.id},directiveNumber:function(){return B.monitoring.contract.directiveNumber},contractId:function(){return B.monitoring.contract.id}}});t.result.then(function(){p().then(function(){s.$broadcast("directiveChanged")})})}}function x(t,e){var a=c.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){p()})}function $(t){t.ctrlKey&&"ArrowLeft"===t.key?A():t.ctrlKey&&"ArrowRight"===t.key&&E()}function _(){var e=c.open({animation:!0,templateUrl:"app/components/monitoring/cancelFinalized/cancel-finalized.html",controller:"CancelFinalizedController",controllerAs:"vm",size:"md",resolve:{monitoring:function(){return B.monitoring}}});e.result.then(function(){n.toast("success","APP.MESSAGES.SUCCESS"),t.go("root.monitoring.monitoring-details",{monitoringId:B.monitoring.id}),p(),s.$broadcast("stateChanged")})}function k(){var e="پس از حذف، اطلاعات این نظارت بایگانی شده و دیگر قادر به انجام عملیات نخواهید بود. آیا مطمئن هستید؟";d({text:e}).then(function(){return i.deleteMonitoringByAdmin(B.monitoringId).then(function(){n.toast("success","APP.MESSAGES.SUCCESS"),t.go("root.monitoring.monitoring-details",{monitoringId:B.monitoring.id}),p(),s.$broadcast("stateChanged")})})}var B=this;B.monitoring={},B.monitoringId=a.monitoringId,B.fromConvertDebit="fromConvertDebit"==a.step,B.toggleContractDirectiveEdit=!1,B.allowedActionList=[];var F=void 0,H=void 0,G=void 0,V=void 0;B.cancelEdit=g,B.isActive=u,B.accept=v,B.reject=h,B.getMonitoring=p,B.getDirective=O,B.getAllowedActions=f,B.getLastMonitoringProcessLogs=M,B.checkStatuses=C,B.isMyMission=N,B.getMine=R,B.setIsMyMonitoring=y,B.next=A,B.hasNext=P,B.previous=E,B.hasPrevious=I,B.openFlowModal=D,B.openDirectiveModal=w,B.openDetailsModal=x,B.openAttachmentModal=U,B.openExpertsModal=L,B.keyDown=$,B.cancelFinalized=_,B.deleteMonitoring=k;var j=["monitoring-details","contract","preConditions","license","invoice","payments","progress","assurance","lat-long","checkList","conflict","trace","comment"];m(),s.$on("next",function(t,e){console.log("on next event",t,e),B.loading=!1,e&&b()}),s.$on("previous",function(){console.log("on previous event"),B.loading=!1,T()})}t.$inject=["$state","$log","$stateParams","Util","MonitoringService","DirectiveService","$q","$rootScope","me","$uibModal","$confirm"],angular.module("app.monitoring").controller("MonitoringController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){e.log(v.title),u(),g()}function c(t){var e={sort:"id,desc"};return angular.forEach(t.sorting(),function(t,a){e.sort=a+","+t}),i.myMonitoringsMission().then(function(t){function a(t,e,n,i){return n.length===i+1?t[n[i]]>e[n[i]]?1:-1:a(t[n[i]],e[n[i]],n,i+1)}v.monitorings=t?t.filter(function(t){return 0===t.currentStep.id}).sort(function(t,n){if(!e.sort)return 0;var i=e.sort.split(",")[0].split("."),r="asc"===e.sort.split(",")[1]?1:-1;return a(t,n,i,0)*r}):[];var n;for(n=0;n<v.monitorings.length;n++)v.monitorings[n].index=n+1;return v.monitorings})}function d(t,e){var a=m(t);n.open({animation:!0,templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",controller:"MonitoringFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return{monitoringId:a.id}}}})}function m(t){for(var e=0;e<v.monitorings.length;e++)if(v.monitorings[e].id===t)return v.monitorings[e]}function u(){return r.getAllEconomicSections().then(function(t){return v.economicSections=t?t:[],v.economicSections})}function p(t,e){var a=n.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){})}function g(){o.getByRole("TEAM_HEAD").then(function(t){t.forEach(function(t){v.teamHeadsMap[t.username]=t}),v.teamHeads=t?t:[]})}var v=this;v.monitoring={},v.monitorings=[],v.teamHeadsMap={},v.tableParams=new a({},{counts:[],getData:c}),v.showGuidance=!0,v.planTypes=s.baseInfo("planTypes"),v.warnings=s.baseInfo("warnings"),v.title="APP.MODULES.MONITORING.TITLES.MISSIONS",v.canDelete=!1,v.openFlowModal=d,v.openDetailsModal=p,v.getDelay=i.getDelaySync,l()}t.$inject=["$document","$log","NgTableParams","$uibModal","MonitoringService","EconomicSectionService","UserService","Util"],angular.module("app.monitoring").controller("MonitoringMissionController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u,p,g,v,h,f){function A(){a.info(G.title),S(),C(),B(),P(),F()}function b(t){for(var e=0;e<G.monitorings.length;e++)if(G.monitorings[e].id===t)return G.monitorings[e]}function P(){h.identity().then(function(t){G.currentUser=t,G.canDelete=h.isInAnyRole(["ADMIN","FINAL_HEAD","PROVINCE_HEAD","PROVINCE_DISPATCHER","BRANCH_DISPATCHER"])})}function E(){if(G.searchItem.contractFromDate=G.contractFromDate,G.searchItem.contractToDate=G.contractToDate,G.searchItem.monitoringFromDate=G.monitoringFromDate,G.searchItem.monitoringToDate=G.monitoringToDate,G.searchItem.createFromDate=G.createFromDate,G.searchItem.createToDate=G.createToDate,G.searchItem.confirmFromDate=G.confirmFromDate,G.searchItem.confirmToDate=G.confirmToDate,G.searchItem.contractNumber=G.searchItem.contractNumber?r("eNumber")(G.searchItem.contractNumber):null,G.searchItem.monitoringNumber=G.searchItem.monitoringNumber?r("eNumber")(G.searchItem.monitoringNumber):null,G.searchItem.directiveNumber=G.searchItem.directiveNumber?r("eNumber")(G.searchItem.directiveNumber):null,G.searchItem.contractId=G.contractId?G.contractId.toString():null,G.searchItem.stepIds=[],G.searchItem.traceStepIds=[],G.steps.forEach(function(t){t.selected&&G.searchItem.stepIds.push(t.id)}),G.traceSteps.forEach(function(t){t.selected&&G.searchItem.traceStepIds.push(t.id)}),G.searchItem.planTypes=[],G.searchItem.activenessStatuses=[],G.planTypes.forEach(function(t){t.selected&&G.searchItem.planTypes.push(t.key)}),G.activenessStatuses.forEach(function(t){t.selected&&G.searchItem.activenessStatuses.push(t.key)}),G.searchItem.economicSectionIds=[],G.economicSections.forEach(function(t){t.selected&&G.searchItem.economicSectionIds.push(t.id)}),G.checkListStatus&&G.checkList){var t=[];t.push(G.checkListStatus),G.searchItem.checkListId=G.checkList.id,G.searchItem.checkListStatuses=t}else G.searchItem.monitoringCheckList=null}function T(t){var a=moment();G.loading=!0,E();var n={page:t.page()-1,size:t.count(),sort:"id,desc"};return angular.forEach(t.sorting(),function(t,e){n.sort=e+","+t}),m.searchMonitoring(G.searchItem,n).then(function(n){G.monitorings=n?n.content:[];var i,r=n.number*n.numberOfElements;for(i=0;i<G.monitorings.length;i++)G.monitorings[i].index=r+i+1,G.monitorings[i].deleteDisabled="created"!==G.monitorings[i].currentStep.name;n&&(t.total(n.totalElements),G.allRecordsCount=n.totalElements);var o=angular.element(document.getElementById("search-result-container"));return G.firstSearch?G.firstSearch=!1:e.scrollToElement(o,Y,q),G.fetchTime=Math.floor(moment().diff(a)/1e3)+" ثانیه",G.loading=!1,G.monitorings},function(t){return G.allRecordsCount=0,G.loading=!1,G.fetchTime=Math.floor(moment().diff(a)/1e3)+" ثانیه",t})}function I(t){E();var e=i.open({animation:!0,templateUrl:"app/components/monitoring/export/columns-modal.html",controller:"ExportMonitoringColumnsModalController",controllerAs:"modalVm",size:"lg",resolve:{checkListItem:function(){return G.checkList}}});e.result.then(function(e){var a={reportType:t,extraSearchObj:G.searchItem,showChecklistsStatus:!0,columns:e[0],checkLists:e[1]};l.getReportNumber(a).then(function(e){if(t){var a="api/report/monitoringSearch?reportNumber="+e;console.log(a),l.getNonHtmlReport(a),p.toast("info","Please wait to receive data")}})},function(){})}function S(){return s.getAllEconomicSections().then(function(t){return G.economicSections=t?t:[],G.economicSections})}function C(){return d.getAllProvinces().then(function(t){return G.provinces=t?t:[],G.provinces})}function O(){return G.searchItem.provinceId||(G.branches=[]),d.getAllBranchesOfProvince(G.searchItem.provinceId).then(function(t){return G.branches=t?t:[],G.branches})}function N(){return G.searchItem.branchIds=[],0===G.searchItem.provinceIds.length?(G.branches=[],G.branches):d.getAllBranchesByProvinceList(G.searchItem.provinceIds).then(function(t){return G.branches=t?t:[],G.branches})}function R(){G.searchItem?(G.searchItem={},G.steps.forEach(function(t){t.selected&&(t.selected=!1)}),G.traceSteps.forEach(function(t){t.selected&&(t.selected=!1)}),G.economicSections.forEach(function(t){t.selected&&(t.selected=!1)}),G.planTypes.forEach(function(t){t.selected&&(t.selected=!1)}),G.activenessStatuses.forEach(function(t){t.selected&&(t.selected=!1)}),G.tableParams.reload()):G.toggleAdd=!G.toggleAdd}function y(){G.tableParams.reload()}function M(){G.tableParams.reload()}function D(t){var e=b(t);i.open({animation:!0,templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",controller:"MonitoringFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return{monitoringId:e.id}}}})}function L(){var t=i.open({animation:!0,templateUrl:"app/components/contract/add-monitoring-modal/add-monitoring.html",controller:"AddMonitoring",controllerAs:"AddMonitoring",size:"md",resolve:{id:function(){return G.contractId},contractIds:function(){return[]}}});t.result.then(function(){G.tableParams.reload()})}function U(t){for(var e=0;e<G.planTypes.length;e++)if(t===G.planTypes[e].value)return G.planTypes[e].title;return"نامشخص"}function w(t){return V.indexOf(t.id)>-1}function x(t){var e=V.indexOf(t.id),a=e>-1;a?V.splice(e,1):V.push(t.id),y()}function $(t){console.log("toggleTraceStep",t.id,j.indexOf(t.id));var e=j.indexOf(t.id),a=e>-1;a?j.splice(e,1):j.push(t.id),y(),console.log(j)}function _(t){t.deleteDisabled||o().then(function(){m.deleteMonitoring(t.id).then(function(){G.tableParams.reload(),p.toast("success")},function(t){p.toast("error",t.message)})})}function k(t,e){var a=i.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){b()})}function B(){v.getByRole("OBSERVER").then(function(t){G.observers=t?t:[]}),v.getByRole("TEAM_HEAD").then(function(t){t.forEach(function(t){G.teamHeadsMap[t.username]=t}),G.teamHeads=t?t:[],console.log("vm.teamHeads = ",G.teamHeads)}),v.getByRoles(["BRANCH_DISPATCHER","FINAL_HEAD","PROVINCE_HEAD"]).then(function(t){G.finalHeads=t?t.content:[]}),v.getByRoles(["ADMIN","BRANCH_DISPATCHER","FINAL_HEAD","PROVINCE_DISPATCHER","STAFF_DISPATCHER"]).then(function(t){G.owners=t?t.content:[]})}function F(){G.checkListStatusList=[{value:"ALL",caption:"-- همه موارد --"},{value:"DONE",caption:"فاقد انحراف"},{value:"VIOLATED",caption:"دارای نقص"},{value:"UNDONE",caption:"دارای انحراف"},{value:"UNRELATEDTODIRECTIVE",caption:"شامل مصوبه نمی‌باشد"}],f.getAllCheckList().then(function(t){G.checkLists=t})}function H(t){return c.searchAllNew({query:t}).then(function(t){return G.codes=t||[],G.codes})}var G=this;G.firstSearch=!0,G.searchItem={},G.monitoring={},G.monitorings=[],G.directives=[],G.planTypes=p.baseInfo("planTypes"),G.activenessStatuses=p.baseInfo("activenessStatuses"),G.economicSections=[],G.provinces=[],G.codes=[],G.type="monitoringList",G.contractId=t.contractId,G.contractNumber=t.contractNumber,G.tableParams=new n({},{counts:[5,10,20,50,100],getData:T}),G.showSearch=!0,G.steps=m.getStepsSync(),G.traceSteps=u.getStepsSync,G.title="APP.MODULES.MONITORING.TITLES.ARCHIVE",G.observers=[],G.teamHeads=[],G.teamHeadsMap={},G.finalHeads=[],G.owners=[];var V=[],j=[],q=1e3,Y=30;G.openModal=L,G.getBranchesByProvince=O,G.getBranchesByProvinceIds=N,G.cancelSearch=R,G.search=y,G.filterStep=M,G.openFlowModal=D,G.planCaption=U,G.toggleStep=x,G.toggleTraceStep=$,G.activeStep=w,G.deleteMonitoring=_,G.openDetailsModal=k,G.exportMonitoring=I,G.planTypeKey=p.getPlanTypeKey,G.getUsers=B,G.getDelay=m.getDelaySync,G.refreshCodes=H,A()}t.$inject=["$stateParams","$document","$log","NgTableParams","$uibModal","$filter","$confirm","EconomicSectionService","ReportService","ContractCodeService","ProvinceService","MonitoringService","TraceService","Util","BranchService","UserService","Principal","CheckListService"],angular.module("app").controller("MonitoringListController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){e.log(I.title,a),p(),g(),v(),T()}function u(t){var e={sort:"id,desc"};return angular.forEach(t.sorting(),function(t,a){e.sort=a+","+t}),l.cartableMonitoring({},e).then(function(t){function a(t,e,n,i){return n.length===i+1?t[n[i]]>e[n[i]]?1:-1:a(t[n[i]],e[n[i]],n,i+1)}I.monitorings=t?t.sort(function(t,n){if(!e.sort)return 0;var i=e.sort.split(",")[0].split("."),r="asc"===e.sort.split(",")[1]?1:-1;return a(t,n,i,0)*r}):[];var n;for(n=0;n<I.monitorings.length;n++)I.monitorings[n].index=n+1;return I.monitorings})}function p(){return o.getAllEconomicSections().then(function(t){return I.economicSections=t?t:[],I.economicSections})}function g(){return s.getAllProvinces().then(function(t){return I.provinces=t?t:[],I.provinces})}function v(){return c.getAllBranches({page:0,size:100}).then(function(t){return I.branches=t?t.content:[],I.branches})}function h(t){return s.getAllCitiesOfProvince(t).then(function(t){return I.citis=t?t:[],I.citis})}function f(){I.searchItem?(I.searchItem={},I.tableParams.reload()):I.toggleAdd=!I.toggleAdd}function A(){I.tableParams.reload()}function b(t){var e=P(t);i.open({animation:!0,templateUrl:"app/components/monitoring/monitoringFlow/monitoring-flow.html",controller:"MonitoringFlowController",controllerAs:"vm",size:"md",resolve:{$stateParams:function(){return{monitoringId:e.id}}}})}function P(t){for(var e=0;e<I.monitorings.length;e++)if(I.monitorings[e].id==t)return I.monitorings[e]}function E(t,e){var a=i.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){})}function T(){d.getByRole("TEAM_HEAD").then(function(t){t.forEach(function(t){I.teamHeadsMap[t.username]=t}),I.teamHeads=t?t:[]})}var I=this;I.searchItem={},I.monitoring={},I.monitorings=[],I.economicSections=[],I.provinces=[],I.teamHeadsMap={},I.canDelete=!1,I.tableParams=new n({},{counts:[],getData:u}),I.planTypes=r.baseInfo("planTypes"),I.warnings=r.baseInfo("warnings"),I.step={},I.steps=l.getStepsSync(),I.showGuidance=!0,I.title="APP.MODULES.MONITORING.TITLES.CARTABLE",I.getAllCityByProvinceId=h,I.cancelSearch=f,I.search=A,I.openFlowModal=b,I.openDetailsModal=E,I.getDelay=l.getDelaySync,m()}t.$inject=["$document","$log","$stateParams","NgTableParams","$uibModal","Util","EconomicSectionService","ProvinceService","MonitoringService","BranchService","UserService"],angular.module("app.monitoring").controller("MonitoringCartableController",t)}(),function(){"use strict";angular.module("app.manage-user-guide",[])}(),function(){"use strict";function t(t){function e(e){var a=o;return t(a).get(e)}function a(e,a){var n=o;return t(n).multipartPost(e,a)}function n(e){var a=o+"/"+e;return t(a).get()}function i(e){var a=o+"/"+e;return t(a)["delete"]()}function r(){return[{id:0,caption:"شروع"},{id:1,caption:"لینک از شروع به ۱"},{id:2,caption:"لینک از شروع به ۲"},{id:3,caption:"لینک از شروع به ۳"},{id:4,caption:"۱- ارجاع ماموریت توسط رئیس اداره"},{id:5,caption:"۲- ارجاع ماموریت توسط معاون اعتباری/حقوقی استان"},{id:6,caption:"۳- ارجاع ماموریت توسط رئیس شعبه"},{id:7,caption:"(۱) لینک از ۱ به ۴"},{id:8,caption:"(۲) لینک از ۱ به ۵"},{id:9,caption:"(۳) لینک از ۲ به ۵"},{id:10,caption:"(۴) لینک از ۳ به ۶"},{id:11,caption:"۴- بازدید طرح توسط کارشناس ستاد"},{id:12,caption:"۵- بازدید طرح توسط کارشناس استان"},{id:13,caption:"۶- بازدید طرح توسط رئیس شعبه"},{id:14,caption:"(۵) لینک از ۴ به ۷"},{id:15,caption:"(۶) لینک از ۵ به ۷"},{id:16,caption:"(۷) لینک از ۵ به ۸"},{id:17,caption:"(۸) لینک از ۶ به پایان"},{id:18,caption:"۷- تائید گزارش بازدید توسط سرگروه بخش اقتصادی"},{id:19,caption:"۸- تائید گزارش توسط معاون اعتباری/حقوقی استان"},{id:20,caption:"(۹) لینک از ۷ به ۹"},{id:21,caption:"(۱۰) لینک از ۸ به پایان"},{id:22,caption:"۹- تائید رئیس اداره نظارت"},{id:23,caption:"(۱۱) لینک از ۹ به پایان"},{id:24,caption:"پایان"}]}var o="help/helpFile",s={getAllHelpAttachmen:e,addAllHelpAttachmen:a,findByStepId:n,getStepsSync:r,deleteAttachment:i};return s}t.$inject=["RequestService"],angular.module("app.manage-user-guide").factory("ManageUserGuideService",t)}(),function(){"use strict";function t(t,e){t.state("root.manage-user-guide",{controller:"ManageUserGuideController",controllerAs:"vm",templateUrl:"app/components/manage-user-guide/manage-user-guide.html",url:"/manage-user-guide"}),e.when("/manage-user-guide/{path:.*}","/manage-user-guide")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.manage-user-guide").config(t)}(),function(){"use strict";function t(t,e,a){function n(){t.log(d.title),i(),r()}function i(){var t={size:1e3};e.getAllHelpAttachmen(t).then(function(t){d.attachments=t.content},function(t){var e=t.status;d.loading=!1,401===e?a.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):a.toast("error","APP.MESSAGES.FAIL","add attachment error")})}function r(){d.steps=e.getStepsSync()}function o(t){var e="";return d.steps.forEach(function(a){a.id===t&&(e=a.caption)}),e}function s(){if(d.loading=!0,d.attachment&&null!==d.step){d.attachment.stepNumber=d.step.id;var t={name:d.attachment.attachment.name};e.addAllHelpAttachmen(d.attachment,t).then(function(){d.attachment={},d.description="",i(),a.toast("success")},function(t){var e=t.status;d.loading=!1,401===e?a.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):a.toast("error","APP.MESSAGES.FAIL","add attachment error")})}}function l(){d.attachment={},d.toggleAddAttachment=!0}function c(t){e.deleteAttachment(t).then(function(){i(),a.toast("success")},function(t){var e=t.status;d.loading=!1,401===e?a.toast("error","APP.ERRORS.Unauthorized user for this action","add attachment 401 error"):a.toast("error","APP.MESSAGES.FAIL","add attachment error")})}var d=this;d.title="Manage User Guide Controller",d.toggleEdit=[],d.attachments=[],d.attachment={},d.steps=[],d.stepNumber=null,d.cancelAddAttachment=l,d.addAllAttachments=s,d.getStepNumberCaption=o,d.deleteAttachment=c,d.close=close,n()}t.$inject=["$log","ManageUserGuideService","Util"],angular.module("app.manage-user-guide").controller("ManageUserGuideController",t)}(),function(){"use strict";angular.module("app.isic",[])}(),function(){"use strict";function t(t){var e="baseInfo/isic/",a=t(e);return{getAllIsics:a.get}}t.$inject=["RequestService"],angular.module("app.isic").factory("IsicService",t)}(),function(){"use strict";function t(t,e){t.state("root.isic-list",{controller:"IsicListController",controllerAs:"vm",templateUrl:"app/components/isic/isic-list.html",url:"/isic-list"}),e.when("/isic/{path:.*}","/isic")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.isic").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){}function o(){return n.getAllIsics().then(function(t){return s.isicList=t?t:[],console.log("vm.isicList = ",s.isicList),s.isicList})}var s=this;s.directive={},s.isicList=[],s.isic={},s.tableParams=new a({},{counts:[],getData:o}),r()}t.$inject=["$confirm","$log","NgTableParams","IsicService","Util"],angular.module("app.isic").controller("IsicListController",t)}(),function(){"use strict";angular.module("app.loginlog",[])}(),function(){"use strict";function t(t,e){t.state("root.loginlog",{"abstract":!0,template:"<div ui-view></div>",url:"/loginlogs"}).state("root.loginlog.list",{controller:"LoginlogListController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/loginlog/loginlog-list.html",url:"/list"}),e.when("/loginlog/list{path:.*}","/loginlog/list")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.loginlog").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){t.log(d.title),s()}function r(){d.tableParams.page(0),d.tableParams.reload()}function o(){d.date="",d.user={}}function s(){function t(t){d.allUsers=t.content}a.searchUsers().then(t)}function l(t){function e(t){return d.loginLogs=t?t.content:[],console.log("vm.loginLogs = ",d.loginLogs),d.tableParams.total(t.totalElements),d.allRecordsCount=t.totalElements,d.loading=!1,d.duration=Math.floor(moment().diff(i)/1e3)+" ثانیه",d.loginLogs}function n(t){d.loading=!1,d.duration=Math.floor(moment().diff(i)/1e3)+" ثانیه",console.error(t)}d.loading=!0;var i=moment();d.duration=0;var r={size:t.count(),page:t.page()-1,username:d.user?d.user.username:null,fromDate:d.fromDate?d.fromDate:null,toDate:d.toDate?d.toDate:null};return angular.forEach(t.sorting(),function(t,e){r.sort=e+","+t}),a.getAllLoginLogs(r).then(e,n)}function c(t){function e(t){return d.users=t.content||[],d.users}return a.searchUsers({query:t}).then(e)}var d=this;d.loginlog={},d.loginLogs=[],d.allUsers=[],d.tableParams=new e({},{getData:l}),d.title="LoginLogListController",d.refreshUsers=c,d.groupFinder=a.groupTitle,d.getAllUsers=s,d.cancelSearch=o,d.search=r,i()}t.$inject=["$log","NgTableParams","UserService","Util"],angular.module("app.loginlog").controller("LoginlogListController",t)}(),function(){"use strict";angular.module("app.investment-action",[])}(),function(){"use strict";function t(t){var e="baseInfo/investmentAction/",a=t(e);return{getAllInvestmentActions:a.get,getInvestmentAction:a.getById,createInvestmentAction:a.post,updateInvestmentAction:a.put,deleteInvestmentAction:a["delete"]}}t.$inject=["RequestService"],angular.module("app.investment-action").factory("InvestmentActionService",t)}(),function(){"use strict";function t(t,e){t.state("root.investment-action",{controller:"InvestmentActionController",controllerAs:"vm",templateUrl:"app/components/investment-action/investment-action.html",url:"/investment-action"}),e.when("/investment-action/{path:.*}","/investment-action")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.investment-action").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(l.title)}function r(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllInvestmentActions(e).then(function(t){return l.investmentActions=t?t:[],l.investmentActions})}function o(){var t={name:l.name,type:l.type};n.createInvestmentAction(t).then(function(){l.toggleAdd=!l.toggleAdd,l.tableParams.reload()})}function s(t){n.updateInvestmentAction(t.id,{name:t.name,type:t.type}).then(function(){l.tableParams.reload()})}var l=this;l.directive={},l.types=[{title:"جاری",value:"CURRENT"},{title:"ثابت",value:"CONSTANT"}],l.investmentActions=[],l.tableParams=new a({},{counts:[],getData:r}),l.title="Directive List Controller",l.toggleAdd=!1,i(),l.create=o,l.update=s}t.$inject=["$confirm","$log","NgTableParams","InvestmentActionService"],angular.module("app").controller("InvestmentActionController",t)}(),function(){"use strict";function t(t,e,a){function n(a){return t.info("homeService called"),e.get(o,{params:a}).then(r)}function i(t){var e=a+"versionManagement/version",n=new XMLHttpRequest;n.onreadystatechange=function(){
4===n.readyState&&t(n.response)},n.open("GET",e,!0),n.send("")}function r(t){return t.data}var o=a+"home/",s={getDashboard:n,getVersion:i};return s}t.$inject=["$log","$http","host"],angular.module("app").factory("homeService",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l){function c(){d.loading=!0,e.identity().then(function(){d.showContracts=e.isInAnyRole(["ADMIN","FINAL_HEAD","PROVINCE_DISPATCHER","STAFF_DISPATCHER","BRANCH_DISPATCHER"]),d.showDirective=e.isInAnyRole(["ADMIN","FINAL_HEAD"]),d.loading=!1},function(){d.loading=!1})}var d=this;d.title="HomeController",c()}t.$inject=["$log","Principal","$window","$state","$timeout","Util","$document","NgTableParams","$rootScope"],angular.module("app").controller("HomeController",t)}(),function(){"use strict";angular.module("app.help",[])}(),function(){"use strict";function t(t){var e="help/",a=t(e);return{getAllHelps:a.get,getHelpById:a.getById,createHelp:a.post,updateHelp:a.put,deleteHelp:a["delete"]}}t.$inject=["RequestService"],angular.module("app.help").factory("HelpService",t)}(),function(){"use strict";function t(t,e){t.state("root.help",{controller:"HelpController",controllerAs:"vm",templateUrl:"app/components/help/help.html",url:"/help"}),e.when("/help/{path:.*}","/help")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.help").config(t)}(),function(){"use strict";function t(t,e,a){function n(){t.log(o.title)}function i(t){for(var e=0;e<o.steps.length;e++)if(o.steps[e].id===t)return o.steps[e].caption;return"?"}function r(t){e.findByStepId(t).then(function(e){if(e){var n=a+"fileManager/attachment/"+e.helpAttachment.id+"/getContent/"+t+"."+e.helpAttachment.type;window.open(n,"_blank")}})}var o=this;o.sample={},o.samples=[],o.tempHelps=[],o.toggleAddHelp=!0,o.toggleEdit=[],o.title="HelpListController",o.steps=e.getStepsSync(),o.openFile=r,o.getCaptionById=i,n()}t.$inject=["$log","ManageUserGuideService","host"],angular.module("app.help").controller("HelpController",t)}(),function(){"use strict";angular.module("app.graphical-report",[])}(),function(){"use strict";function t(t){function e(e){var a=n+"/monthly";return t(a).post(e)}function a(e){var a=n+"/monthlyInput";return t(a).post(e)}var n="report/graphical";return{getMonthly:e,getMonthlyInput:a}}t.$inject=["RequestService"],angular.module("app.graphical-report").factory("GraphicalReportService",t)}(),function(){"use strict";function t(t,e){t.state("root.graphicalReport",{controller:"GraphicalReportController",controllerAs:"vm",templateUrl:"app/components/graphical-report/graphical-report.html",url:"/graphical-report"}),e.when("/graphical-report/{path:.*}","/graphical-report")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.graphical-report").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){a.log(v.title);var t=new Date;t=t.setDate(t.getDate()+1),v.reportParams.toConfirmDate=moment(t).format("YYYY-MM-DD")}function s(){var t={contractType:v.reportParams.contractType,reportType:v.reportParams.reportType,organizationLevel:"ALL"===v.reportParams.organizationLevel?null:v.reportParams.organizationLevel,highAmount:v.reportParams.highAmount,lowAmount:v.reportParams.lowAmount,includedCodes:v.reportParams.codesIncluded&&v.reportParams.codesIncluded.length?v.reportParams.codesIncluded:null,excludedCodes:v.reportParams.codesExcluded&&v.reportParams.codesExcluded.length?v.reportParams.codesExcluded:null,creditSupplyResourceIds:v.reportParams.creditSupplyResources&&v.reportParams.creditSupplyResources.length?v.reportParams.creditSupplyResources:null,creditSupplyResourceText:v.reportParams.creditSupplyResourceText,provinceIds:v.reportParams.provinceIds&&v.reportParams.provinceIds.length?v.reportParams.provinceIds:null,statusId:v.reportParams.statusId};return t.fromConfirmDate=v.reportParams.fromConfirmDate,t.toConfirmDate=v.reportParams.toConfirmDate,t}function l(){var t=moment();v.duration=0,v.loading=!0,i.getMonthly(s()).then(function(e){v.duration=Math.floor(moment().diff(t)/1e3)+" ثانیه",v.loading=!1,v.labels=e.map(function(t){return h(t.year+"/"+t.month)}),v.series=["تعداد بازدید","مجموع مبلغ"],v.data=[e.map(function(t){return t.count}),e.map(function(t){return t.amount})],v.onClick=function(t,e){console.log(t,e)},v.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"}],v.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left",ticks:{beginAtZero:!1,callback:function(t,e,a){return h(t)}}},{id:"y-axis-2",type:"linear",display:!0,position:"right",label:"مبلغ بازدید شده",ticks:{beginAtZero:!1,callback:function(t,e,a){return f(t)}}}]},tooltips:{callbacks:{title:function(t,e){return t[0].xLabel},label:function(t,e){return 0===t.datasetIndex?h(t.yLabel)+" بازدید ":1===t.datasetIndex?f(t.yLabel,"A"):t.yLabel},afterLabel:function(t,e){return""}}}}})}function c(){var t=moment();v.duration=0,v.loading=!0,i.getMonthlyInput(s()).then(function(e){v.duration=Math.floor(moment().diff(t)/1e3)+" ثانیه",v.loading=!1,v.labels=e.map(function(t){return h(t.year+"/"+t.month)}),v.series=["تعداد قرارداد","مجموع مبلغ"],v.data=[e.map(function(t){return t.count}),e.map(function(t){return t.amount})],v.onClick=function(t,e){console.log(t,e)},v.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"}],v.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left",ticks:{beginAtZero:!1,callback:function(t,e,a){return h(t)}}},{id:"y-axis-2",type:"linear",display:!0,position:"right",label:"مبلغ اعطا شده",ticks:{beginAtZero:!1,callback:function(t,e,a){return f(t)}}}]},tooltips:{callbacks:{title:function(t,e){return t[0].xLabel},label:function(t,e){return 0===t.datasetIndex?h(t.yLabel)+" قرارداد ":1===t.datasetIndex?f(t.yLabel,"A"):t.yLabel},afterLabel:function(t,e){return""}}}}})}function d(){var t=moment();v.duration=0,v.loading=!0;var e=[i.getMonthlyInput(s()),i.getMonthly(s())];n.all(e).then(function(e){console.log(e),e[0].forEach(function(t){t.count2=0,e[1].forEach(function(e){e.year===t.year&&e.month===t.month&&(t.count2=e.count)})}),v.labels=e[0].map(function(t){return h(t.year+"/"+t.month)}),v.series=["تعداد قرارداد منعقد شده","تعداد بازدید انجام شده"],v.data=[e[0].map(function(t){return t.count}),e[0].map(function(t){return t.count2})],v.onClick=function(t,e){console.log(t,e)},v.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-1"}],v.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left",ticks:{beginAtZero:!1,callback:function(t,e,a){return h(t)}}}]},tooltips:{callbacks:{title:function(t,e){return t[0].xLabel},label:function(t,e){return 0===t.datasetIndex?h(t.yLabel)+" منعقد شده ":1===t.datasetIndex?h(t.yLabel)+" بازدید شده ":t.yLabel},afterLabel:function(t,e){return""}}}},v.duration=Math.floor(moment().diff(t)/1e3)+" ثانیه",v.loading=!1,r.toast("success","مدت زمان بازگذاری گزارش:"+v.duration)})}function m(){var t=moment();v.duration=0,v.loading=!0;var e=[i.getMonthlyInput(s()),i.getMonthly(s())];n.all(e).then(function(e){e[0].forEach(function(t){t.proportion=0,e[1].forEach(function(e){e.year===t.year&&e.month===t.month&&(t.proportion=e.count/t.count)})}),console.log(e,v.duration),v.labels=e[0].map(function(t){return h(t.year+"/"+t.month)}),v.series=["نسبت تعداد بازدید به تعداد تصویب"],v.data=[e[0].map(function(t){return t.proportion})],console.log("final data",v.data),v.onClick=function(t,e){console.log(t,e)},v.datasetOverride=[{yAxisID:"y-axis-1"}],v.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left",ticks:{beginAtZero:!1,callback:function(t,e,a){return h(t)}}}]},tooltips:{callbacks:{title:function(t,e){return t[0].xLabel},label:function(t,e){return h(t.yLabel.toFixed(4))+"بازدید به تصویب"},afterLabel:function(t,e){return""}}}},v.duration=Math.floor(moment().diff(t)/1e3)+" ثانیه",v.loading=!1,r.toast("success","مدت زمان بازگذاری گزارش:"+v.duration)})}function u(){var t=moment();v.duration=0,v.loading=!0;var e=[i.getMonthlyInput(s()),i.getMonthly(s())];n.all(e).then(function(e){e[0].forEach(function(t){t.proportion=0,e[1].forEach(function(e){e.year===t.year&&e.month===t.month&&(t.proportion=e.amount/t.amount)})}),console.log(e,v.duration),v.labels=e[0].map(function(t){return h(t.year+"/"+t.month)}),v.series=["نسبت تعداد بازدید به تعداد تصویب"],v.data=[e[0].map(function(t){return t.proportion})],console.log("final data",v.data),v.onClick=function(t,e){console.log(t,e)},v.datasetOverride=[{yAxisID:"y-axis-1"}],v.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left",ticks:{beginAtZero:!1,callback:function(t,e,a){return h(t)}}}]},tooltips:{callbacks:{title:function(t,e){return t[0].xLabel},label:function(t,e){return h(t.yLabel.toFixed(4))+"بازدید به تصویب"},afterLabel:function(t,e){return""}}}},v.duration=Math.floor(moment().diff(t)/1e3)+" ثانیه",v.loading=!1,r.toast("success","مدت زمان بازگذاری گزارش:"+v.duration)})}function p(){v.currentReport=v.selectedReport.id,v.reportTitle=v.selectedReport.content,v.selectedReport["function"]()}function g(t){var e=v.reportList.length;return v.selectedReport&&v.selectedReport.index?(t+=v.selectedReport.index,t--,t%=e,void(v.selectedReport=v.reportList[t])):void(v.selectedReport=1===t?v.reportList[0]:v.reportList[e-1])}var v=this;v.title="Graphical Report Controller",v.reportParams={codesIncluded:[],codesExcluded:[]},v.shiftSelectedReport=g,v.submit=p;var h=e("pNumber"),f=e("pCurrency");v.reportLevels=["STAFF","PROVINCE","BRANCH","ALL"],o(),v.reportList=[{index:1,content:"میزان بازدید‌های انجام شده در هر ماه",id:"monthly","function":l},{index:2,content:"میزان قراردادهای اعطا شده در هر ماه",id:"monthlyInput","function":c},{index:3,content:"تعداد قراردادهای اعطا شده و بازدید شده در هر ماه",id:"monthlyInputToOutputCount","function":d},{index:4,content:"نسبت  تعداد قراردادهای اعطا شده و بازدید شده در هر ماه",id:"monthlyInputToOutputCountProportion","function":m},{index:5,content:"نسبت مبلغ قراردادهای اعطا شده و بازدید شده در هر ماه",id:"monthlyInputToOutputAmountProportion","function":u}]}t.$inject=["host","$filter","$log","$q","GraphicalReportService","Util"],angular.module("app.graphical-report").controller("GraphicalReportController",t)}(),function(){"use strict";angular.module("app.employee",[])}(),function(){"use strict";function t(t){function e(e,n){var i=a+n;return t(i).put(null,e)}var a="baseInfo/employee/",n=t(a);return{getAllEmployees:n.get,getEmployee:n.getById,updateEmployee:e,searchEmployees:t(a+"search").post}}t.$inject=["RequestService"],angular.module("app.employee").factory("EmployeeService",t)}(),function(){"use strict";angular.module("app.economic-section",[])}(),function(){"use strict";function t(t){var e="baseInfo/economicSection/",a=t(e);return{getAllEconomicSections:a.get,getEconomicSection:a.getById,createEconomicSection:a.post,updateEconomicSection:a.put,deleteEconomicSection:a["delete"]}}t.$inject=["RequestService"],angular.module("app.economic-section").factory("EconomicSectionService",t)}(),function(){"use strict";function t(t,e){t.state("root.economic-section",{controller:"EconomicSectionController",controllerAs:"vm",templateUrl:"app/components/economic-section/economic-section.html",url:"/economic-section"}),e.when("/economic-section/{path:.*}","/economic-section")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.economic-section").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(d.title)}function r(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllEconomicSections(e).then(function(t){return d.economicSections=t?t:[],d.economicSections})}function o(t){var e={name:t};n.createEconomicSection(e).then(function(){d.toggleAdd=!d.toggleAdd,d.tableParams.reload()})}function s(t){n.deleteEconomicSection(t).then(function(){d.tableParams.reload()})}function l(t){n.updateEconomicSection(t.id,{},{name:t.name}).then(function(){d.tableParams.reload()})}function c(){d.toggleAdd=!d.toggleAdd,d.content=""}var d=this;d.directive={},d.economicSections=[],d.tableParams=new a({},{counts:[],getData:r}),d.title="Directive List Controller",d.toggleAdd=!1,i(),d.create=o,d["delete"]=s,d.update=l,c=c}t.$inject=["$confirm","$log","NgTableParams","EconomicSectionService"],angular.module("app").controller("EconomicSectionController",t)}(),function(){"use strict";angular.module("app.directive-approval-place",[])}(),function(){"use strict";function t(t){var e="baseInfo/directiveApprovalPlace/",a=t(e);return{getAllDirectiveApprovalPlaces:a.get,getDirectiveApprovalPlace:a.getById,createDirectiveApprovalPlace:a.post,updateDirectiveApprovalPlace:a.put,deleteDirectiveApprovalPlace:a["delete"]}}t.$inject=["RequestService"],angular.module("app.directive-approval-place").factory("DirectiveApprovalPlaceService",t)}(),function(){"use strict";function t(t,e){t.state("root.directive-approval-place",{controller:"DirectiveApprovalPlaceController",controllerAs:"vm",templateUrl:"app/components/directive-approval-place/directive-approval-place.html",url:"/directive-approval-place"}),e.when("/directive-approval-place/{path:.*}","/directive-approval-place")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.directive-approval-place").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(m.title)}function o(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllDirectiveApprovalPlaces(e).then(function(t){return m.creditSupplyResources=t?t:[],m.creditSupplyResources})}function s(){if(m.name){var t={name:m.name};n.createDirectiveApprovalPlace(t).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),m.toggleAdd=!m.toggleAdd,m.name="",m.tableParams.reload()})}}function l(t){n.updateDirectiveApprovalPlace(t.id,{},{name:t.name}).then(function(){m.tableParams.reload()})}function c(){m.toggleAdd=!m.toggleAdd,m.content=""}function d(t){13===t.keyCode&&s()}var m=this;m.directive={},m.creditSupplyResources=[],m.tableParams=new a({},{counts:[],getData:o}),m.title="Directive List Controller",m.toggleAdd=!1,r(),m.create=s,m.update=l,m.cancelAdd=c,m.keyPressed=d}t.$inject=["$confirm","$log","NgTableParams","DirectiveApprovalPlaceService","Util"],angular.module("app").controller("DirectiveApprovalPlaceController",t)}(),function(){"use strict";function t(t){function e(e,a){var n=y+e+"/setContract",i={contractId:a};return t(n).put(null,{},i)}function a(e,a){var n=y+e+"/setContractByNumber",i={contractNumber:a};return t(n).put(null,{},i)}function n(e){var a=y+e+"/unsetContract";return t(a).put(null,{},null)}function i(e){var a=R+"search";return t(a).get(e)}function r(e,a){var n=R+e+"/addAssurance";return t(n).post(a)}function o(e,a){var n=R+e+"/addContract";return t(n).post(a)}function s(e,a,n){var i=R+e+"/updateContract";return t(i).put(null,a,n)}function l(e,a,n){var i=R+e+"/updateCondition";return t(i).put(null,a,n)}function c(e,a){var n=R+e+"/addCondition";return t(n).post(a)}function d(e,a){var n=R+e+"/addPayment";return t(n).post(a)}function m(e){var a="dir/dirContract/"+e;return t(a).get()}function u(e,a){var n=R+e+"/setApplicant";return t(n).post(a)}function p(e,a){var n=R+e+"/deleteCondition";return t(n)["delete"](null,a)}function g(e,a){var n=R+e+"/deleteAssurance";return t(n)["delete"](null,a)}function v(e,a){var n=R+e+"/deletePayment";return t(n)["delete"](null,a)}function h(e,a){var n="dir/directive/"+e+"/addBoard";return t(n).post(a)}function f(e){var a="dir/directive/"+e+"/getBoards";return t(a).get()}function A(e,a){var n="dir/directive/"+e+"/updateBoard",i={boardId:a.id};return t(n).put(null,a,i)}function b(e,a){var n="dir/directive/"+e+"/deleteBoard";return t(n)["delete"](null,a)}function P(e,a){var n=R+e+"/deleteContract";return t(n)["delete"](null,a)}function E(e,a){var n=R+e+"/addDirLicense";return t(n).post(a)}function T(e,a){var n=R+e+"/deleteDirLicense";return t(n)["delete"](null,a)}function I(e){var a=R+e+"/getDirLicenses";return t(a).get()}function S(e,a){var n=R+e+"/updatePayment",i={dirPaymentId:a.id};return t(n).put(null,a,i)}function C(e,a){var n=R+e+"/updateAssurance",i={dirAssuranceId:a.id};return t(n).put(null,a,i)}function O(e,a,n){var i=R+e+"/newDirective",r={directiveNumber:a,contractId:n};return t(i).put(null,{},r)}function N(e,a,n){var i=R+e+"/copyDirective",r={directiveNumber:a,monitoringIdFrom:n};return t(i).put(null,{},r)}var R="dir/directive/",y="dir/dirContract/",M=t(R);return{getAllDirectives:M.get,getDirectiveById:M.getById,createDirective:M.post,updateDirective:M.put,deleteDirective:M["delete"],SetApplicantInDirective:u,deleteConditionFromDirective:p,deleteAssuranceFromDirective:g,deletePaymentFromDirective:v,AddBoardToApplicant:h,getBoardsApplicant:f,deleteBoardFromApplicant:b,updateBoardInApplicant:A,AddConditionToDirective:c,AddAssuranceToDirective:r,AddPaymentToDirective:d,AddDirectiveContract:o,updateDirectiveContract:s,updateConditionInDirective:l,getDirectiveContractById:m,deleteDirectiveContract:P,searchDirective:i,setContract:e,setContractByNumber:a,unsetContract:n,addDirLicenseToDirective:E,deleteDirLicenseFromDirective:T,getDirLicenses:I,updatePaymentInDirective:S,updateAssuranceInDirective:C,newDirective:O,copyDirective:N}}t.$inject=["RequestService"],angular.module("app.directive").factory("DirectiveService",t)}(),function(){"use strict";function t(t,e){t.state("root.directive",{controller:"DirectiveController",controllerAs:"vm",templateUrl:"app/components/directive/directive.html",url:"/directive/{directiveId}?contractId?monitoringId?monitoringState"}).state("root.directive-list",{controller:"DirectiveListController",controllerAs:"vm",templateUrl:"app/components/directive/directive-list.html",url:"/directives"}).state("root.directive.details",{controller:"DirectiveDetailsController",controllerAs:"vm",templateUrl:"app/components/directive/directive-details/directive-details.html",url:"/details"}).state("root.directive.applicant",{controller:"ApplicantController",controllerAs:"vm",templateUrl:"app/components/directive/applicant/applicant.html",url:"/applicant"}).state("root.directive.contractPreConditions",{controller:"ContractPreConditionsController",controllerAs:"vm",templateUrl:"app/components/directive/contractPreConditions/contract-preConditions.html",url:"/contractPreConditions"}).state("root.directive.assuranceTypes",{controller:"ContractAssuranceTypesController",controllerAs:"vm",templateUrl:"app/components/directive/assuranceTypes/contract-assuranceTypes.html",url:"/assuranceTypes"}).state("root.directive.paymentPerPart",{controller:"DirectivePaymentPerPartController",controllerAs:"vm",templateUrl:"app/components/directive/paymentPerPart/directive-paymentPerPart.html",url:"/paymentPerPart"}).state("root.directive.license",{controller:"DirectiveLicenseController",controllerAs:"vm",templateUrl:"app/components/directive/dirLicense/directive-license.html",url:"/licenses"}).state("root.directive.contract",{controller:"DirectiveContractListController",controllerAs:"vm",templateUrl:"app/components/directive/contract/contract-list.html",url:"/contract"}),e.when("/directives/{path:.*}","/directives")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){n.debug("directive module activated;"),P.directiveId=r.directiveId,P.currentState=a.$current.name,m().then(d),b()}function c(t){return a.$current.name===t}function d(t){E=e.defer();var a=function(t){return P.directive=t?t.directive:{},E.resolve(P.directive),P.directive},n=function(){E.reject()};return m(t).then(a,n),E.promise}function m(t){function a(t){return P.monitoring=t?t:{},T.resolve(t),P.monitoring}function n(t){T.reject(t)}return t?T?T.promise:(T=e.defer(),void s.getMonitoringById(r.monitoringId).then(a,n)):(T=e.defer(),s.getMonitoringById(r.monitoringId).then(a,n))}function u(t){if(!P.directive)return null;var e={details:!!P.directive.dirApproveDate&&P.directive.dirNumber&&P.directive.dirValidityDuration&&P.directive.directiveApprovalPlace&&P.directive.dirCreditSupplyResource&&P.directive.dirEconomicSection&&P.directive.dirPlanType&&P.directive.branchChiefInGrantingTime&&P.directive.dirBranchPhoneNumber&&P.directive.dirExpert&&P.directive.dirApplicantPhoneNumber&&P.directive.dirActivitySubject&&P.directive.dirProjectLocationAddress,applicant:!!P.monitoring.applicant&&("LEGAL"==P.monitoring.applicant.applicantType?P.monitoring.monitoringBoards.length>0:!0),contract:P.monitoring.dirContracts&&P.monitoring.dirContracts.length>0,contractPreConditions:P.monitoring.dirConditions&&P.monitoring.dirConditions.length>0,license:P.monitoring.dirLicenses&&P.monitoring.dirLicenses.length>0,paymentPerPart:P.monitoring.dirPayments&&P.monitoring.dirPayments.length>0,assuranceTypes:P.monitoring.dirAssurances&&P.monitoring.dirAssurances.length>0};return e[t]}function p(){P.loading=!0,console.log("next"),P.current=a.$current.name.split(".")[2],console.log("	",P.current),i.$broadcast(P.current+"-next",P.allowedAction)}function g(){if(console.log("doNext"),P.current){var t=S.indexOf(P.current);t>=S.length||a.go("root.directive."+S[t+1],{monitoringId:P.monitoringId})}}function v(){var t=a.$current.name.split(".")[2],e=S.indexOf(t);return e<S.length-1}function h(){P.loading=!0,console.log("previous",P.loading),P.current=a.$current.name.split(".")[2],i.$broadcast(P.current+"-previous",P.allowedAction)}function f(){console.log("doPrevious",P.loading);var t=S.indexOf(P.current);0>=t||a.go("root.directive."+S[t-1],{monitoringId:P.monitoringId})}function A(){var t=a.$current.name.split(".")[2],e=S.indexOf(t);return e>0}function b(t){function a(t){P.allowedActionList=t,P.allowedAction=!1,console.log("data sdfsdf = ",t),angular.forEach(t,function(t){("editing"===t.name||"editingAfterCalculate"===t.name)&&(P.allowedAction=!0)}),console.log("successCallbackActions: allowedActionsDeferred",I),I.resolve(P.allowedAction)}function n(t){I.reject(t)}return t&&I?I.promise:(I=e.defer(),console.log("allowedActionsDeferred",I),s.getAllowedActionsOnMonitoring(P.monitoringId).then(a,n),I.promise)}var P=this,E=null,T=void 0,I=void 0;P.isActive=c,P.getDirective=d,P.getMonitoring=m,P.getStatus=u,P.monitoringId=r.monitoringId,P.monitoringState=r.monitoringState,P.contractId=r.contractId,P.next=p,P.hasNext=v,P.previous=h,P.hasPrevious=A,P.getAllowedActions=b;var S=["details","applicant","contract","contractPreConditions","license","paymentPerPart","assuranceTypes"];P.subStates=S,P.subStatesTitle=["APP.MODULES.DIRECTIVE.APPROVE_DETAILS","APP.MODULES.DIRECTIVE.APPLICANT.TITLE","APP.MODULES.DIRECTIVE.CONTRACT.TITLE","APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE","APP.MODULES.DIRECTIVE.LICENSE.TITLE","APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.TITLE","APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TITLE"],l(),i.$on("next",function(t,e){console.log("on next event",t,e),P.loading=!1,e&&g()}),i.$on("previous",function(t,e){P.loading=!1,console.log("on previous event",t,e),e&&f()})}t.$inject=["$confirm","$q","$state","$log","$rootScope","$stateParams","DirectiveService","MonitoringService"],angular.module("app.directive").controller("DirectiveController",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){e.log(m.title)}function s(t){var e={page:t.page()-1,size:t.count(),applicantName:m.search.applicant,number:u(m.search.number),drectiveApprovalPlaceName:m.search.directiveApprovalPlace};return i.searchDirective(e).then(function(e){return m.directives=e?e.content:[],console.log(" vm.directives",m.directives),t.total(e.totalElements),m.directives})}function l(){m.tableParams.reload()}function c(){m.search={},m.tableParams.reload()}function d(e){function a(){m.tableParams.reload(),r.toast("success")}function n(t){r.toast("error",t.message)}t().then(function(){i.deleteDirective(e).then(a,n)})}var m=this,u=a("eNumber");m.directive={},m.directives=[],m.tableParams=new n({},{counts:[5,10,20,50,100],getData:s}),m.title="Directive List Controller",m.search={},m.searchDirective=l,m.deleteDirective=d,m.cancelSearch=c,o()}t.$inject=["$confirm","$log","$filter","NgTableParams","DirectiveService","Util"],angular.module("app").controller("DirectiveListController",t)}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(o.title)}function r(t){var e={page:t.page()-1,size:t.count(),code:t.filter().code?t.filter().code:""};return n.searchCreditSupplyResourceCodesForBaseInfo(e).then(function(e){return o.creditSupplyResources=e?e.content:[],t.total(e.totalElements),o.creditSupplyResources})}var o=this;o.directive={},o.creditSupplyResources=[],o.tableParams=new a({},{counts:[5,10,20,50,100],getData:r}),o.title="Directive List Controller",o.toggleAdd=!1,i()}t.$inject=["$confirm","$log","NgTableParams","CreditSupplyResourceService"],angular.module("app").controller("SubResourceListController",t)}(),function(){"use strict";angular.module("app.credit-supply-resource",[])}(),function(){"use strict";function t(t){var e="baseInfo/creditSupplyResource/",a=t(e);return{getAllCreditSupplyResources:a.get,getAllCreditSupplyResourcesForContract:t("baseInfo/creditSupplyResourceCodesForContract").get,searchCreditSupplyResourcesForContract:t("baseInfo/creditSupplyResourceCodesForContract/search").get,searchCreditSupplyResourceCodesForBaseInfo:t("baseInfo/creditSupplyResourceCodesForContract/searchForBaseInfo").get,getCreditSupplyResource:a.getById,createCreditSupplyResource:a.post,updateCreditSupplyResource:a.put,deleteCreditSupplyResource:a["delete"]}}t.$inject=["RequestService"],angular.module("app.credit-supply-resource").factory("CreditSupplyResourceService",t)}(),function(){"use strict";function t(t,e){t.state("root.credit-supply-resource",{controller:"CreditSupplyResourceController",controllerAs:"vm",templateUrl:"app/components/credit-supply-resource/credit-supply-resource.html",url:"/credit-supply-resource"}).state("root.sub-resource-list",{controller:"SubResourceListController",controllerAs:"vm",templateUrl:"app/components/credit-supply-resource/sub-resource-list.html",url:"/sub-resource-list"}),e.when("/credit-supply-resource/{path:.*}","/credit-supply-resource")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.credit-supply-resource").config(t)}(),function(){"use strict";function t(t,e,a,n){function i(){e.log(m.title)}function r(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllCreditSupplyResources(e).then(function(t){return m.creditSupplyResources=t?t:[],m.creditSupplyResources})}function o(){var t={name:m.name};n.createCreditSupplyResource(t).then(function(){m.toggleAdd=!m.toggleAdd,m.name="",m.tableParams.reload()})}function s(e){t().then(function(){n.deleteCreditSupplyResource(e).then(function(){m.tableParams.reload()})})}function l(t){n.updateCreditSupplyResource(t.id,{},{name:t.name}).then(function(){m.tableParams.reload()})}function c(){m.toggleAdd=!m.toggleAdd,m.content=""}function d(t){13===t.keyCode&&o()}var m=this;m.directive={},m.creditSupplyResources=[],m.tableParams=new a({},{counts:[5,10,20,50,100],getData:r}),m.title="Directive List Controller",m.toggleAdd=!1,i(),m.create=o,m["delete"]=s,m.update=l,m.cancelAdd=c,m.keyPressed=d}t.$inject=["$confirm","$log","NgTableParams","CreditSupplyResourceService"],angular.module("app").controller("CreditSupplyResourceController",t)}(),function(){"use strict";angular.module("app.contract-filter",[])}(),function(){"use strict";function t(t){function e(e){return t(c+"list").get(e)}function a(e){return t(c+"get/").getById(e)}function n(e){return t(c+"delete/")["delete"](e)}function i(e,a){return t(c+"update/").put(e,a)}function r(e){return t(c+"create").post(e)}function o(){return t(c+"getTitles").get()}function s(){return t(c+"getCodes").get()}function l(){return t(c+"getEconomicCodes").get()}var c="contract/filter/";t(c);return{getAllContractFilters:e,getContractFilter:a,createContractFilter:r,updateContractFilter:i,deleteContractFilter:n,getAllTitles:o,getAllCodes:s,getAllEconomicCodes:l}}t.$inject=["RequestService"],angular.module("app.contract-filter").factory("ContractFilterService",t)}(),function(){"use strict";function t(t,e){t.state("root.contract-filter",{controller:"ContractFilterController",controllerAs:"vm",templateUrl:"app/components/contract-filter/contract-filter.html",url:"/contract-filter"}),e.when("/contract-filter/{path:.*}","/contract-filter")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.contract-filter").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(g.title),u(),m(),p()}function o(t){for(var e=0;e<g.types.length;e++)if(g.types[e].value===t)return g.types[e].title;return"فیلد پشتیبانی نشده"}function s(t){var e={page:t.page()-1,size:t.count()};return angular.forEach(t.sorting(),function(t,a){e.sort=a+","+t}),i.getAllContractFilters(e).then(function(e){return g.contractFilters=e?e.content:[],t.total(e.totalElements),g.contractFilters})}function l(){var t={value:g.value,fieldType:g.fieldType};i.createContractFilter(t).then(function(){a.toast("success"),g.value=null,g.fieldType=null,g.tableParams.reload()})}function c(e){t().then(function(){i.deleteContractFilter(e).then(function(){g.tableParams.reload()})})}function d(t){i.updateContractFilter(t.id,{value:t.value,fieldType:t.fieldType}).then(function(){g.tableParams.reload()})}function m(){return i.getAllTitles().then(function(t){return g.values.title=t?t:[],g.values.title})}function u(){return i.getAllCodes().then(function(t){return g.values.code=t?t:[],g.values.code})}function p(){return i.getAllEconomicCodes().then(function(t){return g.values.economicCode=t?t:[],g.values.economicCode})}var g=this;g.directive={},g.types=[{title:"عنوان قرارداد",value:"title"},{title:"کد نوع قرارداد",value:"code"},{title:"کد اقتصادی",value:"economicCode"}],g.contractFilters=[],g.tableParams=new n({},{counts:[5,10,20,50,100],getData:s}),g.title="Contract Filter Controller",g.toggleAdd=!1,g.values={title:[],code:[],economicCode:[]},r(),g.create=l,g["delete"]=c,g.update=d,g.getTitle=o}t.$inject=["$confirm","$log","Util","NgTableParams","ContractFilterService"],angular.module("app.contract-filter").controller("ContractFilterController",t)}(),function(){"use strict";angular.module("app.contract-type",[])}(),function(){"use strict";function t(t){var e="baseInfo/contractType/",a=t(e);return{getAllContractTypes:a.get,getContractType:a.getById,createContractType:a.post,updateContractType:a.put,deleteContractType:a["delete"]}}t.$inject=["RequestService"],angular.module("app.contract-type").factory("ContractTypeService",t)}(),function(){"use strict";function t(t,e){t.state("root.contract-type",{controller:"ContractTypeController",controllerAs:"vm",templateUrl:"app/components/contract-type/contract-type.html",url:"/contract-type"}),e.when("/contract-type/{path:.*}","/contract-type")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.contract-type").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(m.title)}function o(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllContractTypes(e).then(function(t){return m.contractTypes=t?t:[],m.contractTypes})}function s(t){var e={name:t};n.createContractType(e).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),m.toggleAdd=!m.toggleAdd,m.tableParams.reload()})}function l(t){n.deleteContractType(t).then(function(){m.tableParams.reload()})}function c(t){n.updateContractType(t.id,{},{name:t.name}).then(function(){m.tableParams.reload()})}function d(){m.toggleAdd=!m.toggleAdd,m.content=""}var m=this;m.directive={},m.contractTypes=[],m.tableParams=new a({},{counts:[],getData:o}),m.title="Directive List Controller",m.toggleAdd=!1,r(),m.create=s,m["delete"]=l,m.update=c,m.cancelAdd=d}t.$inject=["$confirm","$log","NgTableParams","ContractTypeService","Util"],angular.module("app").controller("ContractTypeController",t)}(),function(){"use strict";angular.module("app.contract-code",[])}(),function(){"use strict";function t(t,e){t.state("root.contract-code",{controller:"ContractCodeController",controllerAs:"vm",
templateUrl:"app/components/contract-code/contract-code.html",url:"/contract-code"}),e.when("/contract-code/{path:.*}","/contract-code")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.contract-code").config(t)}(),function(){"use strict";function t(t){function e(e){return t(i+"searchAll").put(null,e)}function a(e){return t(i+"searchAll/all").put(null,e)}function n(e,a){return t(i+"search").put(null,e,a)}var i="baseInfo/contractCode/",r=t(i);return{getContractCode:r.getById,createContractCode:r.post,updateContractCode:r.put,deleteContractCode:r["delete"],searchAll:e,searchAllNew:a,search:n}}t.$inject=["RequestService"],angular.module("app.contract-code").factory("ContractCodeService",t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){e.log(g.title),u()}function s(t){g.search.contractTypeId=g.search.contractType?g.search.contractType.id:null;var e={page:t.page()-1,size:t.count()};return angular.forEach(t.sorting(),function(t,a){e.sort=a+","+t}),n.search(g.search,e).then(function(e){return g.contractCodes=e?e.content:[],t.total(e.totalElements),g.contractCodes})}function l(){n.createContractCode(g.contractCode).then(function(){r.toast("success","APP.MESSAGES.SUCCESS"),g.toggleAdd=!g.toggleAdd,g.tableParams.reload()})}function c(t){n.deleteContractCode(t).then(function(){g.tableParams.reload()})}function d(t){n.updateContractCode(t.code,t).then(function(){g.tableParams.reload()})}function m(){g.toggleAdd=!g.toggleAdd,g.content=""}function u(){i.getAllContractTypes().then(function(t){return g.contractTypes=t?[{id:null,name:"همه"}].concat(t):[],g.contractTypes})}function p(){g.tableParams.page(1),g.tableParams.reload()}var g=this;g.directive={},g.contractCodes=[],g.contractCode={},g.search={},g.tableParams=new a({},{counts:[5,10,20,50,100],getData:s}),g.title="Directive List Controller",g.toggleAdd=!1,o(),g.create=l,g["delete"]=c,g.update=d,g.cancelAdd=m,g.searchFunction=p}t.$inject=["$confirm","$log","NgTableParams","ContractCodeService","ContractTypeService","Util"],angular.module("app.contract-code").controller("ContractCodeController",t)}(),function(){"use strict";function t(t){function e(e,a){var n=o+e+"/setDirective?directiveNumber="+a;return t(n).post()}function a(e,a){var n=o+e+"/addMonitoringInProvinceLevel";return t(n).post({},a)}function n(e,a){var n=o+e+"/addMonitoringInStaffLevel";return t(n).post({},a)}function i(e,a){var n=o+e+"/addMonitoringInBranchLevel";return t(n).post({},a)}function r(e){var a=o+e+"/toggleNeedToMonitor";return t(a).put()}var o="contract/",s=t(o);return{getAllContracts:s.get,getContractById:s.getById,createContract:s.post,searchContract:s.post,searchContractStaff:t(o+"StaffLevel").post,searchContractProvince:t(o+"ProvinceLevel").post,searchContractBranch:t(o+"BranchLevel").post,updateContract:s.put,deleteContract:s["delete"],getNeedToMonitors:t(o+"getNeedToMonitors").get,setDirectiveToContract:e,addContractMonitoringProvinceLevel:a,addContractMonitoringBranchLevel:i,addContractMonitoringStaffLevel:n,toggleNeedToMonitor:r}}t.$inject=["RequestService"],angular.module("app.contract").factory("ContractService",t)}(),function(){"use strict";function t(t,e){t.state("root.contract-list",{controller:"ContractListController",controllerAs:"vm",templateUrl:"app/components/contract/contract-list.html",resolve:{me:["Principal",function(t){return t.identity()}]},params:{contractNumber:{dynamic:!0},companyName:{dynamic:!0},contractFromDate:{dynamic:!0},contractToDate:{dynamic:!0},minContractAmount:{dynamic:!0},maxContractAmount:{dynamic:!0},economicSectionIds:{dynamic:!0},planTypes:{dynamic:!0},provinceIds:{dynamic:!0},contractType:{dynamic:!0},settlementStateCode:{dynamic:!0},needToMonitor:{dynamic:!0},page:{dynamic:!0},size:{dynamic:!0},sort:{dynamic:!0}},url:"/contracts?:contractNumber&:companyName&:contractFromDate&:contractToDate&:minContractAmount&:maxContractAmount&:economicSectionIds&:planTypes&:provinceIds&:contractType&:settlementStateCode&:needToMonitor&:page&:size&:sort"}).state("root.contract-details",{controller:"ContractDetailsModalController",controllerAs:"modalVm",templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",resolve:{id:["$stateParams",function(t){return t.contractId}],$uibModalInstance:function(){return null},fromMonitoring:function(){return!0}},params:{contractId:{dynamic:!1}},url:"/contract-details/{contractId}"}).state("root.contract-details-modal",{url:"/contract-details-modal/{contractId}",onEnter:["$stateParams","$state","$uibModal","$window",function(t,e,a,n){var i=a.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t.contractId}}});i.result.then(function(){n.history.back()})}]}),e.when("/contracts/{path:.*}","/contracts")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){n.debug("ContractController module activated;"),l.directiveId=i.directiveId,l.currentState=a.$current.name}function s(t){return console.log("currentState = ",t),console.log("$state.$current = ",a.$current),a.$current.name==t}var l=this;l.isActive=s,o()}t.$inject=["$confirm","$q","$state","$log","$stateParams","Util"],angular.module("app.contract").controller("ContractController",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d,m,u,p,g,v,h,f,A){function b(){function a(){document.getElementById("toTopBtn")&&(document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("toTopBtn").style.display="block":document.getElementById("toTopBtn").style.display="none")}e.info("contract module activated"),D(),g.identity().then(function(t){w.currentUser=t,w.searchItem.provinceIds=[],"STAFF"!==w.currentUser.level&&w.currentUser.province&&w.searchItem.provinceIds.push(w.currentUser.province.id)}),window.onscroll=function(){a()},v.all([T(),I()]).then(function(){g.identity().then(function(e){"STAFF"===e.level&&(w.searchItem.minContractAmount=w.searchItem.minContractAmount||15e8);var a={};s.page&&(a.page=s.page),s.size&&(a.count=s.size),w.tableParams=new t(a,{counts:[5,10,20,50,100],getData:E})})})}function P(){var t=w.contracts.length===w.contracts.filter(function(t){return t.selected}).length;w.contracts.forEach(function(e){e.selected=!t})}function E(t){function e(t){return w.fetchTime=Math.floor(moment().diff(i)/1e3)+" ثانیه",w.allRecordsCount=0,w.totalAmount=0,w.loading=!1,t}function a(e){if(e){t.total(e.page.totalElements),w.allRecordsCount=e.page.totalElements,w.totalAmount=e.aggregate.totalAmount;var a=angular.element(document.getElementById("search-result-container"));w.firstSearch?w.firstSearch=!1:A.scrollToElement(a,k,_),w.contracts=e.page.content}return w.fetchTime=Math.floor(moment().diff(i)/1e3)+" ثانیه",w.loading=!1,w.contracts}var i=moment();if(w.loading=!0,x)x=!1,t.page(1);else{if(!F){F=!0;var s=angular.copy(B);return s.page=t.page(),s.size=t.count(),void l.go(l.$current,s).then(function(){B=s,w.tableParams.reload()})}F=!1}var c={page:t.page()-1,size:t.count(),sort:B.sort?B.sort:"contractDate,desc"};if(angular.forEach(t.sorting(),function(t,e){c.sort=e+","+t}),w.searchItem.contractNumber=B.contractNumber,w.searchItem.companyName=B.companyName,w.contractFromDate=B.contractFromDate,w.searchItem.contractFromDate=w.contractFromDate,w.contractToDate=B.contractToDate,w.searchItem.contractToDate=w.contractToDate,w.searchItem.minContractAmount=B.minContractAmount,w.searchItem.maxContractAmount=B.maxContractAmount,w.searchItem.economicSectionIds=[],B.economicSectionIds){var d=B.economicSectionIds.split(",");w.searchItem.economicSectionIds=[],d.forEach(function(t){w.searchItem.economicSectionIds.push(parseInt(t,10)),w.economicSections.forEach(function(e){parseInt(t)===e.id&&(e.selected=!0)})})}if(w.searchItem.planTypes=[],B.planTypes){var m=B.planTypes.split(",");m.forEach(function(t){w.searchItem.planTypes.push(t),w.planTypes.forEach(function(e){t===e.value&&(e.selected=!0)})})}if(B.provinceIds){var u=B.provinceIds.split(",");w.searchItem.provinceIds=[],u.forEach(function(t){w.searchItem.provinceIds.push(parseInt(t,10))})}switch(w.searchItem.contractType=B.contractType,w.searchItem.settlementStateCode=B.settlementStateCode,"true"===B.needToMonitor||B.needToMonitor===!0?w.searchItem.needToMonitor=!0:w.searchItem.needToMonitor=void 0,angular.forEach(w.searchItem,function(t,e){""===t&&(w.searchItem[e]=null)}),n.level){case"STAFF":return r.searchContractStaff(w.searchItem,c).then(a,e);case"PROVINCE":return r.searchContractProvince(w.searchItem,c).then(a,e);case"BRANCH":return r.searchContractBranch(w.searchItem,c).then(a,e);default:o.toast("error","مشاهده لیست قراردادها به دلیل عدم تعیین سطح برای شما ممکن نیست")}}function T(){return u.getAllEconomicSections().then(function(t){return w.economicSections=t?t:[],w.economicSections})}function I(){switch(n.level){case"STAFF":return p.getAllProvinces().then(function(t){return w.provinces=t?[].concat(t):[],w.provinces});case"PROVINCE":w.disabledProvinceList=!0,w.provinces=[n.province]}}function S(){w.searchItem={},w.economicSections.forEach(function(t){t.selected&&(t.selected=!1)}),w.planTypes.forEach(function(t){t.selected&&(t.selected=!1)}),C()}function C(){x=!0;var t={};t.contractNumber=$(w.searchItem.contractNumber),t.companyName=w.searchItem.companyName,t.contractFromDate=w.contractFromDate,t.contractToDate=w.contractToDate,t.minContractAmount=w.searchItem.minContractAmount,t.maxContractAmount=w.searchItem.maxContractAmount,t.economicSectionIds="",w.economicSections.forEach(function(e){e.selected&&(t.economicSectionIds+=e.id+",")}),t.economicSectionIds=t.economicSectionIds.length?t.economicSectionIds.substr(0,t.economicSectionIds.length-1):"",t.planTypes="",w.planTypes.forEach(function(e){e.selected&&(t.planTypes+=e.value+",")}),t.planTypes=t.planTypes.length?t.planTypes.substr(0,t.planTypes.length-1):"",w.searchItem.provinceIds&&w.searchItem.provinceIds.length?(t.provinceIds="",w.searchItem.provinceIds.forEach(function(e){t.provinceIds+=e+","}),t.provinceIds=t.provinceIds.substr(0,t.provinceIds.length-1)):t.provinceIds=null,t.contractType=w.searchItem.contractType,t.settlementStateCode=w.searchItem.settlementStateCode,w.searchItem.needToMonitor?t.needToMonitor=!0:t.needToMonitor=void 0,t.page=1,t.size=w.tableParams.count(),l.go(l.$current,t).then(function(){B=t,w.tableParams.reload()})}function O(t){if(console.log("id = ",t),w.selectedContracts=w.contracts.filter(function(t){return t.selected}),!t&&!w.selectedContracts.length)return void o.toast("error","ابتدا قراردادهای مورد نظر را انتخاب نمایید");var e=i.open({animation:!0,templateUrl:"app/components/contract/add-monitoring-modal/add-monitoring.html",controller:"AddMonitoring",controllerAs:"AddMonitoring",size:"md",resolve:{id:function(){return t},contractIds:function(){return w.selectedContracts.map(function(t){return t.id})}}});e.result.then(function(){w.tableParams.reload()})}function N(t,e){var a=i.open({animation:!0,templateUrl:"app/components/contract/contract-details-modal/contract-details-modal.html",controller:"ContractDetailsModalController",controllerAs:"modalVm",size:"lg",resolve:{id:function(){return t},fromMonitoring:function(){return e}}});a.result.then(function(){w.tableParams.reload()},function(){})}function R(t){t.needToMonitor=!t.needToMonitor,r.toggleNeedToMonitor(t.id).then(function(){})}function y(){var t=0,e=2e3;A.scrollTopAnimated(t,e).then(function(){})}function M(t){var e={reportType:t,extraSearchObj:w.searchItem};c.getReportNumber(e).then(function(e){if(w.loading=!0,t){var a="api/report/contractSearch?reportNumber="+e;console.log(a),c.getNonHtmlReport(a),o.toast("info","Please wait to receive data")}})}function D(){f.getAllIsics().then(function(t){w.isicList=t||[]})}function L(t){var e={page:1,size:30,code:t?t:""};m.searchCreditSupplyResourceCodesForBaseInfo(e).then(function(t){w.resources=t.content||[]})}function U(t){return d.searchAll({query:t}).then(function(t){return w.codes=t||[],w.codes})}var w=this;w.firstSearch=!0,w.searchItem={},w.economicSections=[],w.provinces=[],w.planTypes=o.baseInfo("planTypes"),w.contracts=[],w.codes=[],w.isicList=[],w.selectedContracts=[],w.resources=[],w.settlementStates=[{code:null,title:"همه‌ی موارد"},{code:"1788",title:"پرداخت تسهیلات"},{code:"1791",title:"تسویه شده"}],w.needToMonitoringStatusList=[{status:"terminatedMonitoring",title:"نظارت انجام شده"},{status:"needToMonitoring",title:"نیاز به نظارت دارد"},{status:"notNeedToMonitoring",title:"نیاز به نظارت ندارد"}];var x=!1,$=a("eNumber"),_=1e3,k=30;w.openModal=O,w.openDetailsModal=N,w.cancelSearch=S,w.search=C,w.backToTop=y,w.planTypeKey=o.getPlanTypeKey,w.toggleNeedMonitor=R,w.selectAll=P,w.exportContracts=M,w.refreshCodes=U,w.getAllIsics=D,w.searchCreditSupplyResources=L,b();var B=s,F=!1}t.$inject=["NgTableParams","$log","$filter","me","$uibModal","ContractService","Util","$stateParams","$state","ReportService","ContractCodeService","CreditSupplyResourceService","EconomicSectionService","ProvinceService","Principal","$q","ngTableEventsChannel","IsicService","$document"],angular.module("app.contract").controller("ContractListController",t)}(),function(){"use strict";angular.module("app.conflict",[])}(),function(){"use strict";function t(t){function e(e){return t(i+"getInvoiceConflict/").get(e)}function a(e){return t(i+"getPaymentConflict/").get(e)}function n(e){return t(i+"getLicenseConflict/").get(e)}var i="conflict/";return{getInvoiceConflict:e,getAssuranceConflict:t(i+"getAssuranceConflict/").get,getPaymentConflict:a,getDirLicenseConflicts:n}}t.$inject=["RequestService"],angular.module("app.conflict").factory("ConflictService",t)}(),function(){"use strict";angular.module("app.checkList",[])}(),function(){"use strict";function t(t){function e(){return t(a+"getEnabledCheckList").get()}var a="baseInfo/checkList/",n=t(a);return{getAllCheckList:n.get,getCheckList:n.getById,createCheckList:n.post,updateCheckList:n.put,deleteCheckList:n["delete"],getEnabledCheckList:e}}t.$inject=["RequestService"],angular.module("app.checkList").factory("CheckListService",t)}(),function(){"use strict";function t(t,e){t.state("root.checkList",{controller:"CheckListController",controllerAs:"vm",templateUrl:"app/components/checkList/checkList.html",url:"/checkList"}),e.when("/checkList/{path:.*}","/checkList")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.checkList").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){t.log(u.title),o()}function o(){return e.getAllCheckList().then(function(t){return u.checkList=t?t:[],u.checkList})}function s(){if(u.content){var t={content:u.content,enabled:u.enabled};return e.createCheckList(t).then(function(t){return i.toast("success","APP.MESSAGES.SUCCESS"),u.toggleAdd=!u.toggleAdd,u.tableParams.reload(),u.content="",u.enabled=!1,t})}}function l(t){e.updateCheckList(t.id,t).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),u.tableParams.reload()})}function c(t){t.enabled=!t.enabled,l(t)}function d(){u.toggleAdd=!u.toggleAdd,u.content=""}function m(t){13===t.keyCode&&s()}var u=this;u.title="CheckList Controller",u.toggleAdd=!1,u.checkList=[],u.enabled=!0,u.tableParams=new a({},{counts:[],getData:o}),u.content="",u.create=s,u.update=l,u.changeActivity=c,u.cancelAdd=d,u.keyPressed=m,r()}t.$inject=["$log","CheckListService","NgTableParams","$confirm","Util"],angular.module("app").controller("CheckListController",t)}(),function(){"use strict";angular.module("app.branch",[])}(),function(){"use strict";function t(t){var e="baseInfo/branch/",a=t(e);return{getAllBranches:a.get,searchBranches:t(e+"search").post,getBranch:a.getById,createBranch:a.post,updateBranch:a.put,deleteBranch:a["delete"]}}t.$inject=["RequestService"],angular.module("app.branch").factory("BranchService",t)}(),function(){"use strict";function t(t,e){t.state("root.branch",{controller:"BranchController",controllerAs:"vm",templateUrl:"app/components/branch/branch.html",url:"/branch"}),e.when("/branch/{path:.*}","/branch")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.branch").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r){function o(){e.log(u.title),l()}function s(t){var e={page:t.page()-1,size:t.count()};angular.forEach(t.sorting(),function(t,a){e.sort=a+","+t});var a={};return a.code=parseInt(t.filter().code),a.title=t.filter().title,a.provinceId=t.filter().province?t.filter().province:null,i.searchBranches(a,e).then(function(e){return u.Branches=e?e.content:[],t.total(e.totalElements),u.Branches})}function l(){return n.getAllProvinces().then(function(t){return u.provinces=t?t:[],u.provinces})}function c(){i.createBranch(u.branch).then(function(){r.toast("success","APP.MESSAGES.SUCCESS"),m(),u.tableParams.reload()})}function d(t){i.updateBranch(t.id,t).then(function(){console.log("	success"),r.toast("success"),u.tableParams.reload()})}function m(){u.toggleAdd=!u.toggleAdd,u.branch={}}var u=this;u.directive={},u.Branches=[],u.branch={},u.tableParams=new a({},{counts:[5,10,20,50,100],getData:s}),u.title="Directive List Controller",u.toggleAdd=!1,o(),u.create=c,u.update=d,u.cancelAdd=m}t.$inject=["$confirm","$log","NgTableParams","ProvinceService","BranchService","Util"],angular.module("app.branch").controller("BranchController",t)}(),function(){"use strict";angular.module("app.baseInfo",[])}(),function(){"use strict";function t(t){function e(e,n){var i=a+n;return t(i).put(null,e)}var a="baseInfo/baseInfo/",n=t(a);return{getAllBaseInfos:n.get,getBaseInfo:n.getById,updateBaseInfo:e}}t.$inject=["RequestService"],angular.module("app.baseInfo").factory("BaseInfoService",t)}(),function(){"use strict";function t(t,e){t.state("root.baseInfo",{controller:"BaseInfoController",controllerAs:"vm",templateUrl:"app/components/baseInfo/baseInfo.html",url:"/baseInfo"}),e.when("/baseInfo/{path:.*}","/baseInfo")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.baseInfo").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(c.title)}function o(){return n.getAllBaseInfos().then(function(t){return c.baseInfos=t?t:[],c.baseInfos})}function s(t){return n.getBaseInfo(t).then(function(t){return c.baseInfo=t?t:{},c.baseInfo})}function l(t){return n.updateBaseInfo(t,t.variable).then(function(t){return c.baseInfo=t?t:{},c.tableParams.reload(),i.toast("success"),c.baseInfo})}var c=this;c.baseInfos=[],c.baseInfo={},c.tableParams=new a({},{counts:[],getData:o}),c.title="BaseInfo Controller",r(),c.getAllBaseInfos=o,c.getBaseInfo=s,c.updateBaseInfo=l}t.$inject=["$confirm","$log","NgTableParams","BaseInfoService","Util"],angular.module("app.baseInfo").controller("BaseInfoController",t)}(),function(){"use strict";function t(t){var e="userManagement/",a={getLogin:t(e+"secure/login").post};return a}t.$inject=["RequestService"],angular.module("app").factory("PrimaryUserService",t)}(),function(){"use strict";function t(t){t.state("login",{controller:"LoginController",controllerAs:"vm",templateUrl:"app/components/auth/login/login.html",url:"/login",data:{containerClass:"login-background"},onEnter:["$rootScope",function(t){t.containerClass="login-background"}],onExit:["$rootScope",function(t){t.containerClass=""}]}).state("register",{controller:"RegisterController",controllerAs:"vm",templateUrl:"app/components/auth/register/register.html",url:"/register"}).state("forgetPass",{controller:"ForgetPassController",controllerAs:"vm",templateUrl:"app/components/auth/forget-pass/forget-pass.html",url:"/forget-pass"}).state("resetPass",{controller:"ResetPassController",controllerAs:"vm",templateUrl:"app/components/auth/reset-pass/reset-pass.html",url:"/reset-pass"}).state("unauthorized",{url:"/401",templateUrl:"app/components/auth/errors/401.html"}).state("notFound",{url:"/404",templateUrl:"app/components/auth/errors/404.html"}).state("internalServerError",{url:"/500",templateUrl:"app/components/auth/errors/500.html"})}t.$inject=["$stateProvider"],angular.module("auth").config(t)}(),function(){"use strict";function t(t,e,a,n,i,r,o){function s(e){function n(e,a){var n=e?h+e:h;return t["delete"](n,{params:a}).then(c)["catch"](l)}function i(e){var a="/"===h[h.length-1]?h.substr(0,h.length-1):h;return t.get(a,{params:e}).then(c)["catch"](l)}function o(e,a){return t.get(h+e,{params:a}).then(c)["catch"](l)}function s(e,a){var n={headers:{"Content-Type":void 0},params:a,transformRequest:d},i="/"===h[h.length-1]?h.substr(0,h.length-1):h;return t.post(i,e,n).then(c)["catch"](l)}function m(e,a,n){var i={headers:{"Content-Type":void 0},params:n,transformRequest:d},r=e?h+e:h;return t.put(r,a,i).then(c)["catch"](l)}function u(e,a){var n="/"===h[h.length-1]?h.substr(0,h.length-1):h;return t.post(n,e,{params:a}).then(c)["catch"](l)}function p(e,a,n){var i=e?h+e:h;return t.put(i,a,{params:n}).then(c)["catch"](l)}function g(e,n){var i={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:n},r="/"===h[h.length-1]?h.substr(0,h.length-1):h;return t.post(r,a(e),i).then(c)["catch"](l)}function v(e,n,i){var r={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:i},o=e?h+e:h;return t.put(o,a(n),r).then(c)["catch"](l)}var h=r+e,f={"delete":n,get:i,getById:o,multipartPost:s,multipartPut:m,post:u,put:p,xPost:g,xPut:v};return f}function l(t){var a=t&&t.data&&t.data.message?t.data.message:"";return a.indexOf("Could not read document: Unexpected character")>-1&&(a="xss error message"),a.length&&o.toast("error",a),i(function(){t&&t.status&&401===t.status&&"login"!==e.$current.name&&window.location.reload()},2e3),n.reject(t)}function c(t){return t&&t.data?t.data:void 0}function d(t){var e=new FormData;for(var a in t)t.hasOwnProperty(a)&&e.append(a,t[a]);return e}return s}t.$inject=["$http","$state","$httpParamSerializer","$q","$timeout","host","Util"],angular.module("auth").factory("RequestService",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s){function l(){return p().then(function(){i.toState&&i.toState.data&&i.toState.data.roles&&i.toState.data.roles.length>0&&!u(i.toState.data.roles)&&(d()?(console.log("user is signed in but not authorized for desired state"),n.go("unauthorized")):(console.log("user is not authenticated. It`s impossible, there must be an error!"),i.returnToState=i.toState,i.returnToStateParams=i.toParams,n.go("login")))},function(){n.go("login")})}function c(e){t.info("authenticate : ",e),E=e,I=null!==e}function d(){return I}function m(t){if(!I||!E.roles)return!1;for(var e=0;e<E.roles.length;e+=1)if(E.roles[e].role===t)return!0;return!1}function u(t){if(!I||!E.roles)return!1;for(var e=0;e<t.length;e+=1)if(m(t[e]))return!0;return!1}function p(t){function i(t){n.go("login"),T.reject(t),T=null}function o(t){if(200===t.status)if(console.log("-----------successCallback at identity----------",t.data),t.data.firstLogin)I=!0,E=t.data,T.resolve(E);else{var e="کاربر موظف به تغییر پسورد می باشد! ";s.toast("error",e),I=!0,E=t.data,T.resolve(E),n.go("login")}else i()}return T?T.promise:(T=a.defer(),t===!0&&(console.log("_identity set to undefined"),E=void 0,I=!1),angular.isDefined(E)?(console.log("_identity is resolved"),T.resolve(E),T.promise):(e.get(r+"userManagement/getCurrentUser").then(o)["catch"](i),T.promise))}function g(){T=null}function v(){return E}function h(t){return o("login").xPost(t)}function f(){o("logout").post()["finally"](function(){E=void 0,I=!1,T=null,n.go("login")})}function A(t){var e=t?t:E;if(!e||!e.roles||!e.roles.length)return null;var a={BRANCH:0,MERCHANT:1,PROVINCE:2,ADMIN:3},n=e.roles[0];return e.roles.forEach(function(t){a[t.role]>a[n.role]&&(n=t)}),n}function b(t){if(!E||!E.roles||!E.roles.length)return null;var e=!1;return E.roles.forEach(function(t){"MERCHANT"===t.role&&(e=!0)}),e}function P(){return o("userManagement/getMyPermissions").get()}var E,T,I=!1;return{authorize:l,authenticate:c,isAuthenticated:d,isInRole:m,isInAnyRole:u,identity:p,getIdentity:v,login:h,logout:f,getRole:A,isMerchant:b,resetDefer:g,getMyPermissions:P}}t.$inject=["$log","$http","$q","$state","$rootScope","host","RequestService","Util"],angular.module("auth").factory("Principal",t)}(),function(){"use strict";function t(t,e,a){function n(t){var a=e.defer();return t.timeout=a.promise,t.cancel=a,t}function i(t){return t||e.when(t)}function r(n){a.get("$state");return 401===n.status&&t.error("user is not authenticated",n),403===n.status&&t.error("operation forbidden",n),e.reject(n)}var o={request:n,response:i,responseError:r};return o}t.$inject=["$log","$q","$injector"],angular.module("auth").factory("authInterceptor",t)}(),function(){"use strict";angular.module("app.assurance-type",[])}(),function(){"use strict";function t(t){var e="baseInfo/assuranceType/",a=t(e);return{getAllAssuranceTypes:a.get,getAssuranceType:a.getById,createAssuranceType:a.post,updateAssuranceType:a.put,deleteAssuranceType:a["delete"],getAllAssurances:a.get}}t.$inject=["RequestService"],angular.module("app.assurance-type").factory("AssuranceTypeService",t)}(),function(){"use strict";function t(t,e){t.state("root.assurance-type",{controller:"AssuranceTypeController",controllerAs:"vm",templateUrl:"app/components/assurance-type/assurance-type.html",url:"/assurance-type"}),e.when("/assurance-type/{path:.*}","/assurance-type")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.assurance-type").config(t)}(),function(){"use strict";function t(t,e,a,n,i){function r(){e.log(m.title)}function o(t){var e={directive:t.filter().directive?t.filter().directive:null};return n.getAllAssuranceTypes(e).then(function(t){return m.assuranceTypes=t?t:[],m.assuranceTypes})}function s(){m.assuranceType.type&&m.assuranceType.acceptedPercent&&n.createAssuranceType(m.assuranceType).then(function(){i.toast("success","APP.MESSAGES.SUCCESS"),m.toggleAdd=!m.toggleAdd,m.assuranceType={},m.tableParams.reload()})}function l(t){n.updateAssuranceType(t.id,t).then(function(){m.tableParams.reload()})}function c(){m.toggleAdd=!m.toggleAdd,m.assuranceType={}}function d(t){13===t.keyCode&&s()}var m=this;m.directive={},m.assuranceTypes=[],m.assuranceType={},m.tableParams=new a({},{counts:[],getData:o}),m.title="Directive List Controller",m.toggleAdd=!1,r(),m.create=s,m.update=l,m.cancelAdd=c,m.keyPressed=d}t.$inject=["$confirm","$log","NgTableParams","AssuranceTypeService","Util"],angular.module("app").controller("AssuranceTypeController",t)}(),function(){"use strict";function t(t,e,a){function n(){i||(t[0].cookie="firstLogin=true",e("APP.MESSAGES.WELCOME").then(function(t){a.info(t)},function(t){a.info(t)}))}var i=t[0].cookie.replace(/(?:(?:^|.*;\s*)firstLogin\s*\=\s*([^;]*).*$)|^.*$/,"$1");n()}t.$inject=["$document","$translate","toastr"],angular.module("app").controller("MainController",t)}(),function(){"use strict";function t(t,e,a,n,i){function r(t,e){return angular.toJson(t)===angular.toJson(e)}function o(n,i,r){function o(e){switch(n){case"error":e&&a.error(e),r&&t.error(r);break;case"info":e&&a.info(e),r&&t.info(r);break;case"success":e&&a.success(e),r&&t.log(r);break;case"warn":e&&a.warning(e),r&&t.warn(r);break;default:e&&a.info(e),r&&t.info(r)}}"success"!==n||i||(i="APP.MESSAGES.SUCCESS"),"error"!==n||i||(i="APP.ERRORS.FAIL"),e(i).then(o,o)}function s(t){var e=new FormData;return angular.forEach(t,function(t,a){e.append(a,t)}),e}function l(t){return t?n(t,"jYYYY-jMM-jDD").format("YYYY-MM-DD"):null}function c(t){var e={planTypes:[{value:"ايجادي",title:"ایجادی",key:"OPENING"},{value:"تکميلي",title:"تکمیلی",key:"SUPPLEMENTARY"},{value:"توسعه اي",title:"توسعه‌ای",key:"DEVELOPMENT"},{value:"تعمير",title:"تعمیر",key:"DEVELOPMENT"},{value:"خريد مسکن",title:"خرید مسکن",key:"DEVELOPMENT"},{value:"درحال بهره برداي",title:"در حال بهره برداری",key:"OPERATIONAL"},{value:"تامين سرمايه در گردش",title:"تأمین سرمایه در گردش",key:"OPERATIONAL"},{value:"خريد",title:"خرید",key:"OPERATIONAL"},{value:"خريد کالاهاي مصرفي شخصي",title:"خرید کالاهای مصرفی شخصی",key:"OTHER"},{value:"برگشت اسناد اعتبار",title:"برگشت اسناد اعتبار",key:"OTHER"},{value:"ساير",title:"سایر",key:"OTHER"}],activenessStatuses:[{value:"فعال",title:"فعال",key:"ACTIVE"},{value:"نیمه‌فعال",title:"نیمه‌فعال",key:"SEMI_ACTIVE"},{value:"غیرفعال",title:"غیرفعال",key:"INACTIVE"},{value:"طرح در دست اجرا",title:"طرح در دست اجرا",key:"UNDERWAY"}],warnings:[{value:2,title:"۱ تا ۲ روز",key:"b-warning-0"},{value:4,title:"۳ تا ۴ روز",key:"b-warning-1"},{value:4,title:"۵ تا ۶ روز",key:"b-warning-2"},{value:8,title:"۷ تا ۸ روز",key:"b-warning-3"},{value:10,title:"۹ تا ۱۰ روز",key:"b-warning-4"},{value:12,title:"۱۱ تا ۱۲ روز",key:"b-warning-5"}],standardPlanTypes:[{value:"OPENING",title:"ایجادی"},{value:"SUPPLEMENTARY",title:"تکمیلی"},{value:"DEVELOPMENT",title:"توسعه ای"},{value:"OPERATIONAL",title:"در حال بهره برداری"},{value:"OTHER",title:"سایر"}]};return e[t]}function d(t){for(var e=0;e<c("planTypes").length;e++)if(c("planTypes")[e]&&c("planTypes")[e].value&&c("planTypes")[e].value.indexOf(t)>-1)return c("planTypes")[e].key}function m(t,e,a){if(a&&Array.isArray(a)){if(0===a.length)return-1;if(1===a.length)return m(t,a[0]);var n=a.subarray(1),i=t.map(function(t){return t[a[0]]});return m(i,n)}if(a){for(var r=0;r<t.length;r++)if(t[r][a]===e)return r;return-1}return t.indexOf(e)}function u(t){var e,a=[],n=btoa(t);a=n.split(""),e="="===a[a.length-1]&&"="===a[a.length-2]?2:"="===a[a.length-1]&&"="!=a[a.length-2]?1:0;var i=n.substring(0,n.length-e),r=Math.floor(1e6*Math.random()).toString(),o=r.substring(r.length,r.length-1),s=r.substring(r.length-1,r.length-2),l=i.substring(0,1)+o,c=i.substring(1,2)+s,d=i.substring(2,n.length-e),m=l+c+d+e;return m}var p={compareObjects:r,toast:o,transformRequest:s,sDate:l,jDate:i("jDate"),pNumber:i("pNumber"),eNumber:i("eNumber"),baseInfo:c,indexOf:m,getPlanTypeKey:d,encodeCredential:u};return p}t.$inject=["$log","$translate","toastr","moment","$filter"],angular.module("app").factory("Util",t)}(),function(){"use strict";function t(t,e,a,n,i,r,o,s,l,c,d){function m(){console.log("destroy")}r.getMedia=l,a.templateUrl="app/directives/confirm/confirm-tpl.html",a.defaultLabels.title="",a.defaultLabels.ok="بله",a.defaultLabels.cancel="خیر",a.size="sm",o.params.count=20,o.settings.counts=[10,20,40,60,80,100],o.settings.paginationMaxBlocks=5,o.settings.paginationMinBlocks=2,t.debug("runBlock end"),r.$on("$destroy",m),e.onStart({to:"**"},function(t){var e=t._targetState,a=t._targetState._params;c(function(){var t=(d.getBodySize(),[0,0]),e=d.getCriterionSize(),a=Math.max(parseInt(t[0]),parseInt(e[0]));r.calculatedNavWrapperStyle={"min-height":a-105},r.calculatedMainWrapperStyle={"min-height":a-200}},3e3),"login"!==e.name&&(r.previousState=e,r.previousParams=a,s.authorize())}),e.onSuccess({to:"**"},function(){i.scrollTo(0,0)})}t.$inject=["$log","$transitions","$confirmModalDefaults","$http","$window","$rootScope","ngTableDefaults","Principal","$mdMedia","$timeout","SizeService"],angular.module("app").run(t)}(),function(){"use strict";function t(t,a){t.state("root",{"abstract":!0,controller:"MainController",controllerAs:"vm",resolve:{identity:e},templateUrl:"app/main/main.html"}).state("root.home",{controller:"HomeController",controllerAs:"vm",data:{roles:[]},resolve:{},templateUrl:"app/components/home/home.html",url:"/"}),a.otherwise("/")}function e(t){return t.identity()}t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Principal"],angular.module("app").config(t)}(),function(){"use strict";function t(t){t.useSanitizeValueStrategy("escape"),t.useStaticFilesLoader({prefix:"/data/lang/",suffix:".json"}),t.preferredLanguage("fa_IR_4").fallbackLanguage("fa_IR_4")}t.$inject=["$translateProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(){function t(t){if(angular.isDefined(t)&&null!==t&&""!==t.toString().trim())for(var e=["۱","۲","۳","۴","۵","۶","۷","۸","۹","۰"],a=["1","2","3","4","5","6","7","8","9","0"],n=0,i=e.length;i>n;n+=1)t=t.toString().replace(new RegExp(e[n],"g"),a[n]);
return t}return t}function e(){function t(t){return t?d()(t)+"٪":"۰"}return t}function a(){function t(t,e){return e=e||"؟",t?d()(t)+"متر":e}return t}function n(t){function e(e,a){if(angular.isUndefined(e)||null===e)return"نامشخص ";a=a||"jYY/jMM/jD HH:mm:ss";try{return d()(t(e).format(a).replace("امرداد","مرداد"))}catch(n){return"نامشخص "}}return e}function i(t){function e(e,a){if(angular.isUndefined(e)||null===e)return"نامشخص ";a=a||"jYYYY/jMM/jDD";try{return d()(t(e).format(a).replace("امرداد","مرداد"))}catch(n){return"نامشخص "}}return e}function r(t){function e(e){if(angular.isUndefined(e)||null===e)return"نامشخص ";try{return t(e).format("YYYY-MM-DD")}catch(a){return"نامشخص "}}return e}function o(t){function e(e,a,n){if(angular.isUndefined(e)||null===e)return"نامشخص ";a=a||"YYYY-MM-DD",n=n||"jYYYY/jMM/jDD";try{return e?d()(t(e,a).format(n)):null}catch(i){return"نامشخص "}}return e}function s(t){function e(e,a){if(angular.isUndefined(e)||null===e)return"unknown";a=a||"jYYYY/jMM/jDD";try{return t(e).format(a)}catch(n){return"error"}}return e}function l(t){function e(e){if(angular.isUndefined(e)||null===e)return"نامشخص ";var a=t(e).tz("Asia/Tehran").format("hh:mm");return a}return e}function c(){function t(t){return 1e3>t?[t,"R"]:1e6>t?[t/1e3,"KR"]:1e9>t?[t/1e6,"MR"]:[t/1e9,"GR"]}function e(t){var e=1;return"string"==typeof t&&(t.indexOf("-")>0||t.indexOf("+")>0)&&(e="-"===t[t.length-1]?-1:1,t=t.substring(0,t.length-1)),10>t?[e*t,"R"]:(t/=10,1e3>t?[e*t,"T"]:1e6>t?[e*t/1e3,"KT"]:1e9>t?[e*t/1e6,"MT"]:[e*t/1e9,"GT"])}function a(a,n,i){if(n&&(n=n.toUpperCase()),"A"===n){var r=e(a);a=r[0],n=r[1],i=i||1}else if("AR"===n){var o=t(a);a=o[0],n=o[1]}if(null===a||angular.isUndefined(a))return"";var s=a.toString().split(".");s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");var l;if(i&&s[1]?(i=Math.min(s[1]&&s[1].length,i),s[1]=s[1].substr(0,i),l=d()(s.join("."))):l=d()(s[0]),!n)return l;switch(n){case"R":return l+" ﷼";case"KR":return l+" هزار ﷼";case"MR":return l+" میلیون ﷼";case"GR":return l+" میلیارد ﷼";case"T":return l+" تومان";case"KT":return l+" هزار تومان";case"MT":return l+" میلیون تومان";case"GT":return l+" میلیارد تومان";default:return l}}return a}function d(){function t(t,e){if((void 0===t||null===t)&&e)return e;if(angular.isDefined(t)&&null!==t&&""!==t.toString().trim()){for(var a=["۱","۲","۳","۴","۵","۶","۷","۸","۹","۰"],n=["1","2","3","4","5","6","7","8","9","0"],i=0,r=n.length;r>i;i+=1)t=t.toString().replace(new RegExp(n[i],"g"),a[i]);return t}return""}return t}function m(){function t(t){if(angular.isDefined(t)&&null!==t&&""!==t.toString().trim()){for(var e=["۱","۲","۳","۴","۵","۶","۷","۸","۹","۰"],a=["1","2","3","4","5","6","7","8","9","0"],n=0,i=a.length;i>n;n+=1)t=t.toString().replace(new RegExp(a[n],"g"),e[n]);return t+" ﷼"}return""}return t}function u(){function t(t){return 0>t?Math.abs(t):t}return t}function p(){function t(t,e){var a=[];return angular.isArray(t)?t.forEach(function(t){for(var n=!1,i=Object.keys(e),r=0;r<i.length;r+=1){var o=i[r],s=e[o].toLowerCase();if(t[o]&&-1!==t[o].toString().toLowerCase().indexOf(s)){n=!0;break}}n&&a.push(t)}):a=t,a}return t}function g(t){function e(e,a){return a=a||"jYYYY/jMM/jDD",e?t(e,a).format("YYYY-MM-DD"):null}return e}function v(){function t(t){return t?"APP.SHARE.ENABLE":"APP.SHARE.DISABLE"}return t}function h(){function t(t){return void 0==t?"APP.SHARE.UNDEFINED":t?"APP.SHARE.TRUE":"APP.SHARE.FALSE"}return t}function f(t){function e(e){return t.trustAsHtml(e)}return e}function A(t){function e(e){return t.trustAsResourceUrl(e)}return e}function b(){function t(t){if(!t||!t.measurementUnit)return"";switch(t.measurementUnit){case"INTEGER":return d()(t.currentStatus);case"PRICE":return d()(c()(t.currentStatus)+" تومان ");case"PERCENT":return d()(t.currentStatus+" ٪ ")}return t.currentStatus}return t}function P(){function t(t){if(!t||!t.measurementUnit)return"";switch(t.measurementUnit){case"INTEGER":return"عدد صحیح";case"PRICE":return"مبلغ";case"PERCENT":return"درصد"}return t.currentStatus}return t}function E(){function t(t){if(!t)return"";switch(t){case"MAXIMUM":return"حداکثر";case"MINIMUM":return"حداقل";case"REST":return"مابقی";case"EQUAL":return"برابر"}return t}return t}function T(){function t(t){if(!t)return"";switch(t){case"ORIGIN":return"اصل تسهیلات";case"INTEREST":return"اصل و سود"}return t}return t}function I(){function t(t){if(!t||!t.measurementUnit)return"";switch(t.measurementUnit){case"INTEGER":return"";case"PRICE":return" تومان ";case"PERCENT":return" ٪ "}return t.measurementUnit}return t}function S(){function t(t){return t&&t.targetingPeriod?1===t.targetingPeriod?"ماهانه":t.targetingPeriod<12?d()(t.targetingPeriod)+" ماهه ":12===t.targetingPeriod?"سالانه":t.targetingPeriod:""}return t}function C(){function t(t){return t?"admin"==t?"مدیر سامانه":"PROVINCE"==t?"استان":"BRANCH"==t?"شعبه":"MERCHANT"==t?"فروشگاه":void 0:""}return t}function O(){function t(t){function e(t){return 21>t?n[t]:t%10===0?i[Math.floor(t/10)]+"م":i[Math.floor(t/10)]+" و "+a[t%10]+"م"}if(!t||!t.objective)return"";var a=["صفر","یک","دو","سه","چهار","پنج","شش","هفت","هشت","نه"],n=["صفرم","اول","دوم","سوم","چهارم","پنجم","ششم","هفتم","هشتم","نهم","دهم","یازدهم","دوازدهم","سیزدهم","چهاردهم","پانزدهم","شانزدهم","هفدهم","هجدهم","نوزدهم","بیستم"],i=["صفر","ده","بیست","سی","چهل","پنجاه","شصت","هفتاد","هشتاد","نود","صد"];return t.objective.targetingPeriod<12?"وضعیت مطلوب "+a[t.objective.targetingPeriod]+" ماه "+e(t.periodIndex):12===t.objective.targetingPeriod?"وضعیت مطلوب سال "+e(t.periodIndex):t.periodIndex}return t}function N(){return function(t){if(!t||t.length)return"";var e,a,n,i,r,o,s,l,c,d;return isFinite(t)?(angular.isString(t)||(t=t.toString()),s=["","هزار","میلیون","میلیارد","تریلیون","کوادریلیون","کویینتیلیون","سکستیلیون"],r={0:["","صد","دویست","سیصد","چهارصد","پانصد","ششصد","هفتصد","هشتصد","نهصد"],1:["","ده","بیست","سی","چهل","پنجاه","شصت","هفتاد","هشتاد","نود"],2:["","یک","دو","سه","چهار","پنج","شش","هفت","هشت","نه"],two:["ده","یازده","دوازده","سیزده","چهارده","پانزده","شانزده","هفده","هجده","نوزده"],zero:"صفر"},e=" و ",t=t.split("").reverse().join("").replace(/\d{3}(?=\d)/g,"$&,").split("").reverse().join("").split(",").map(function(t){return Array(4-t.length).join("0")+t}),l=function(){var l;l=[];for(i in t)d=t[i],c=function(){var t,e,i;for(i=[],n=t=0,e=d.length;e>t;n=++t)if(a=d[n],1===n&&"1"===a)i.push(r.two[d[2]]);else{if(2===n&&"1"===d[1]||""===r[n][a])continue;i.push(r[n][a])}return i}(),c=c.join(e),o=c.length>0?" "+s[t.length-i-1]:"",l.push(c+o);return l}(),l=l.filter(function(t){return""!==t.trim()}),l=l.join(e).trim(),""!==l?l:r.zero):""}}function R(){function t(t){var e={CURRENT:"جاری",CONSTANT:"ثابت"};return e[t]}return t}function y(){function t(t){var e={OPENING:"ایجادی",SUPPLEMENTARY:"تکمیلی",DEVELOPMENT:"توسعه ای",OPERATIONAL:"در حال بهره برداری"};return e[t]||"نامشخص"}return t}function M(){function t(t){var e={ACTIVE:"فعال",SEMI_ACTIVE:"نیمه‌فعال",INACTIVE:"غیرفعال",UNDERWAY:"طرح در دست اجرا"};return e[t]||"نامشخص"}return t}function D(){function t(t){var e={LEGAL:"شرکت(حقوقی)",NATURAL:"شخص حقیقی "};return e[t]}return t}function L(){function t(t){var e={DOLLAR:"$",RIAL:"﷼"};return e[t]}return t}function U(){function t(t){var e={MINIMUM:"حداقل",MAXIMUM:"حداکثر",EQUAL:"برابر",REST:"کسری تضمینات تا سقف"};return e[t]}return t}function w(){function t(t){var e={STAFF:"ستادی",PROVINCE:"استانی",BRANCH:"شعبه",ALL:"تمامی سطوح"};return e[t]}return t}function x(){function t(t){var e={staffLimit:"سقف مجاز تعداد کاربران",teamHeadLimit:"سقف مجاز پرونده برای تایید در استان",nonCurrentPlanLimit:"سقف مجاز تسهیلات غیرجاری",currentPlanLimit:"سقف مجاز تسهیلات جاری"};return e[t]}return t}function $(){function t(t){var e={create:"ایجاد",start:"شروع کارشناس اول",editing:"ویرایش توسط کارشناس اول",firstExpertAccept:"تایید کارشناس اول",calculating:"محاسبه مغایرت ها توسط کارشناس اول",conflictEditing:"ویرایش مغایرت ها توسط کارشناس اول",cancelStarting:"لغو شروع",accept:"تایید",reject:"بازگشت",finalExpertAcceptForProvince:"تائيد نهایی کارشناس استان",secondExpertAcceptForProvince:"تایید ناظر استانی",secondExpertAcceptForTeamHead:"تایید سرگروه",finalHeadReject:"لغو توسط مدیر نهایی",finalExpertAcceptForTeamHead:"تائید کارشناس دوم و ارسال به سرگروه",branchExpertAccept:"تائید شده در شعبه",adminCancelFinalizedHead:"لغو توسط مدیر",adminCancelFinalizedProvince:"لغو توسط مدیر",adminCancelFinalizedBranch:"لغو توسط مدیر",deleteByAdmin:"حذف توسط مدیر"};return e[t]}return t}function _(){function t(t){var e={waiting:"در انتظار",alert:"هشدار",see:"مشاهده شده",clear:"پاسخ مناسب از شعبه دریافت شد",fail:"پاسخ مناسب از شعبه دریافت نشد",postpone:"تعویق",attachment:"پیوست",transfer:"انتقال"};return e[t]}return t}function k(){function t(t){var e={APPLICANT:"متقاضی",ISSUER:"صادر کننده",ETC:"سایر"};return e[t]}return t}function B(){function t(t){var e={UNRELATEDTODIRECTIVE:"مشمول مصوبه نیست",UNDONE:"دارای انحراف",VIOLATED:"دارای نقص",DONE:"فاقد انحراف",NO_DEVIATION:"عملکرد فاقد انحراف است ",RELATEDDOCS_WARNING:" صدور اخطاریه بابت ارائه اسناد مرتبط ",LACKOFPROGRESS_PLANREVIEW_WARNING:" صدور اخطاریه بابت عدم پیشرفت فیزیکی متناسب و بازدید مجدد از طرح",TOTAL_WARNING:" صدور اخطاریه بابت ارائه اسناد مرتبط عدم پیشرفت فیزیکی متناسب و بازدید مجدد از طرح ",CONDITIONAL_COMMITMENT_CONVERT:"صدور اخطاریه و بازدید مجدد از طرح در صورت عدم ایفای تعهدات دیون تبدیل به حال گردد",COMMITMENT_CONVERT:"عملکرد متقاضی دارای انحراف است، دیون تبدیل به حال گردد",TRACE_NEEDED:"پیگیری جهت رعایت مفاد مصوبه و اخذ اسناد مرتبط توسط شعبه ",DEVIATION:"عملکرد شعبه دارای انحراف است",INAPPROPRIATE_DIRECTIVE_SETTING:"کارشناس در تنظیم مصوبه بطور مطلوب عمل ننموده است",INAPPROPRIATE_CONTRACT_INVESTIGATION:" کارشناس در بررسی پرونده بطور مطلوب عمل ننموده است ",INAPPROPRIATE_DIRECTIVE_CONTRACT:" کارشناس در تنظیم مصوبه و بررسی پرونده بطور مطلوب عمل ننموده است "};return e[t]?e[t]:t}return t}function F(){function t(t){var e={INCOMPLETED:"دارای نقص",FAILED:"خیر",DONE:"بله"};return e[t]?e[t]:t}return t}function H(){function t(t){return t?1e3>t?t+"B":1e6>t?(t/1e3).toFixed(2)+"KB":1e9>t?(t/1e6).toFixed(2)+"MB":(t/1e9).toFixed(2)+"GB":"0"}return t}function G(t){function e(e){var a="";return t.getStepsSync().forEach(function(t){return e===t.id||e===t.name?void(a=t.title):void 0}),a}return e}function V(t){function e(e){var a="";return t.getTransitionsSync().forEach(function(t){t.id===e&&(a=t.caption)}),a}return e}function j(){function t(t){var e={Completed:"کامل شده",Processing:"در حال پردازش",Exited_with_exception:"ناقص همراه با اشکال"};return e[t]?e[t]:t}return t}n.$inject=["moment"],i.$inject=["moment"],r.$inject=["moment"],o.$inject=["moment"],s.$inject=["moment"],l.$inject=["moment"],g.$inject=["moment"],f.$inject=["$sce"],A.$inject=["$sce"],G.$inject=["MonitoringService"],V.$inject=["MonitoringService"],angular.module("app").filter("eNumber",t).filter("jDate",i).filter("mDate",r).filter("jeDate",s).filter("jDateFromString",o).filter("jDateTime",n).filter("pCurrency",c).filter("pNumber",d).filter("pNumberR",m).filter("pPercent",e).filter("pDistance",a).filter("propsFilter",p).filter("sDate",g).filter("status",v).filter("trueFalse",h).filter("trustedHtml",f).filter("trustedUrl",A).filter("objectiveStatus",b).filter("objectivePeriod",S).filter("unit",P).filter("measure",I).filter("periodTag",O).filter("pDigitWord",N).filter("role",C).filter("investmentType",R).filter("applicantType",D).filter("planType",y).filter("activeness",M).filter("maxmin",E).filter("assuranceCriterion",T).filter("unitList",L).filter("conditionList",U).filter("userLevel",w).filter("baseInfo",x).filter("monitoringDefinition",$).filter("traceDefinition",_).filter("timeFilter",l).filter("makePositive",u).filter("payee",k).filter("checkList",B).filter("conditionStatus",F).filter("fileSize",H).filter("monitoringStep",G).filter("monitoringTransitionCaption",V).filter("updateFilter",j)}(),function(){"use strict";angular.module("app").constant("moment",moment).constant("host","http://"+location.host+"/api/").constant("telRegex",/^[0-9]{8,11}$/).constant("nationalIdRegex",/^[0-9]{10}$/).constant("noSpaceRegex",/^[^\n ]*$/)}(),function(){"use strict";function t(t,e,a,n,i,r){t.debugEnabled(!0),e.interceptors.push("authInterceptor"),a.setOptions({autoClose:!0,calType:"jalali",dtpType:"date",format:"YYYY/MM/DD"}),angular.extend(i,{allowHtml:!0,closeButton:!1,closeHtml:'<button class="pull-left">&times;</button>',extendedTimeOut:500,positionClass:"toast-top-right",preventDuplicates:!1,progressBar:!0,tapToDismiss:!0,target:"body",timeOut:3e3}),n.loadPersian(),r.options({appendToBody:!0})}t.$inject=["$logProvider","$httpProvider","ADMdtpProvider","moment","toastrConfig","$uibTooltipProvider"],angular.module("app").config(t)}(),function(){"use strict";angular.module("app.update-report",[])}(),function(){"use strict";angular.module("app.sample",[])}(),angular.module("app").run(["$templateCache",function(t){t.put("app/main/main.html",'<div id=wrapper><!-- Navigation --><samat-header></samat-header><sidebar></sidebar><div class=content-wrapper role=main><div ui-view="" class=criterion-container></div></div><!--<samat-footer></samat-footer>--><!-- /#page-wrapper --></div>'),t.put("app/components/assurance-type/assurance-type.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><!--<pane-body ng-show="vm.toggleAdd">\r\n                                <form class="form form-horizontal" ng-submit="vm.create(vm.assuranceType)">\r\n                                    <div class="form-group">\r\n                                        <div class="col-sm-8 pull-right">\r\n                                            <div class="row">\r\n                                                <label class="col-sm-1 control-label pull-right"\r\n                                                       data-translate="APP.SHARE.TYPE"></label>\r\n                                                <div class="col-sm-4 pull-right">\r\n                                                    <input class="form-control"\r\n                                                           data-ng-model="vm.assuranceType.type"\r\n                                                           placeholder="نوع">\r\n                                                </div>\r\n                                                <label class="col-sm-2 control-label pull-right"\r\n                                                       data-translate="APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.ACCEPTED_PERCENT"></label>\r\n                                                <div class="col-sm-5 pull-right">\r\n                                                    <input class="form-control"\r\n                                                           type="number" step="0.01"\r\n                                                           data-ng-model="vm.assuranceType.acceptedPercent"\r\n                                                           placeholder="درصد قابل قبول">\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="col-sm-4 pull-right">\r\n                                            <button type="button" class="btn btn-cancel"\r\n                                                    data-ng-click="vm.cancelAdd()">\r\n                                                <span class="fa fa-close"></span>\r\n                                                <span data-translate="APP.ACTIONS.CANCEL"></span>\r\n                                            </button>\r\n                                            <button type="submit" class="btn btn-success">\r\n                                                <span class="fa fa-check"></span>\r\n                                                <span data-translate="APP.ACTIONS.SUBMIT"></span>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </pane-body>--><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.TYPE\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.type></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.type></span></td><td data-title="\'APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.ACCEPTED_PERCENT\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.acceptedPercent|pPercent></span> <span data-ng-show=item.toggle><input class=form-control numbers-only data-ng-class="{\'RedBG\':acceptedPercent.$invalid}" name=acceptedPercent1 data-ng-model=item.acceptedPercent></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr><!-- add row --><tr><td></td><td><input class=form-control type=text data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.assuranceType.type></td><td><input class=form-control numbers-only name=acceptedPercent required data-ng-model=vm.assuranceType.acceptedPercent data-ng-keypress=vm.keyPressed($event)><!--<span data-ng-if="!vm.assuranceType.acceptedPercent" data-ng-class="{\'RedBorder\':!vm.assuranceType.acceptedPercent }"> خطا : تنها عدد با دو رقم اعشار مجاز است.\r\n                                                </span>--></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><i class="icon pe-icon pe-7s-plus f-18 f-bold text-success" data-ng-disabled=!vm.assuranceType.acceptedPercent ng-click=vm.create()></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/baseInfo/baseInfo.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.BASE_INFO.TITLE></h1><!-- <div class="pull-left">\r\n                             <a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd"\r\n                                data-ng-show="!vm.toggleAdd">\r\n                                 <i class="fa fa-plus-circle"></i>\r\n                                 <span data-translate="APP.ACTIONS.SUBMIT">‌</span>\r\n                             </a>\r\n                         </div>--><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><!--<td data-title="\'APP.SHARE.INDEX\'|translate"\r\n                                                data-ng-bind="$index|pNumber"></td>--><td data-title="\'APP.SHARE.CAPTION\'|translate"><span data-ng-bind=item.variable|baseInfo|translate></span></td><td data-title="\'APP.SHARE.VALUE\'|translate"><input class=form-control ui-number-mask=0 uib-tooltip="{{item.value|pCurrency:\'A\'}}" tooltip-trigger="\'focus\'" dir=ltr data-ng-model=item.value></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><button class="btn btn-primary-alt" type=button ng-click=vm.updateBaseInfo(item);><span class="fa fa-save"></span> <span data-translate=APP.ACTIONS.SAVE></span></button></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/branch/branch.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.BRANCH.TITLE></h1><div class=pull-left><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=!vm.toggleAdd><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create()><div class=row><div class=form-group><div class="col-sm-10 pull-right"><label class="col-sm-1 control-label pull-right" data-translate=APP.MODULES.BASIC_INFO.BRANCH.NAME></label><div class="col-sm-3 pull-right"><input class=form-control data-ng-model=vm.branch.title placeholder="نام شعبه"></div><label class="col-sm-1 control-label pull-right" data-translate=APP.MODULES.BASIC_INFO.BRANCH.CODE></label><div class="col-sm-3 pull-right"><input class=form-control type=number data-ng-model=vm.branch.code placeholder="کد شعبه"></div><label class="col-sm-1 control-label pull-right" data-translate=APP.MODULES.BASIC_INFO.BRANCH.PROVINCE></label><div class="col-sm-3 pull-right"><select class=form-control data-ng-options="province.id as province.title for province in vm.provinces" data-ng-model=vm.branch.province.id></select></div></div><div class="col-sm-2 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></div><div class=pane-body data-ng-if=vm.provinces><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.NAME\'|translate" data-sortable="\'title\'" data-filter="{title:\'text\'}"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <input class=form-control type=text data-ng-show=item.toggle data-ng-model=item.title></td><td data-title="\'APP.MODULES.BASIC_INFO.PROVINCE.CODE\'|translate" data-sortable="\'code\'" data-filter="{code:\'text\'}"><span data-ng-show=!item.toggle data-ng-bind=item.code|pNumber></span> <input class=form-control data-ng-show=item.toggle data-ng-model=item.code></td><td data-title="\'APP.MODULES.BASIC_INFO.PROVINCE.PROVINCE\'|translate" data-sortable="\'province.title\'" data-filter="{province:\'select\'}" data-filter-data=vm.provinces><span data-ng-show=!item.toggle data-ng-bind=item.province.title></span><select class=form-control data-ng-show=item.toggle name=province id=province data-ng-options="province.id as province.title for province in vm.provinces" data-ng-model=item.province.id></select></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/checkList/checkList.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.CHECK_LIST.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.MINI_TITLE\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.title></span></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.content></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.content></span></td><td data-title="\'APP.SHARE.ENABLE\'|translate"><i class="icon pe-icon f-18 f-bold" data-ng-show=!item.toggle data-ng-class="{\'pe-7s-check text-success\':item.enabled, \'pe-7s-less text-warning\':!item.enabled}" ng-click=vm.changeActivity(item)></i> <span data-ng-show=item.toggle><input type=checkbox data-ng-model=item.enabled></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr><!-- add row --><tr><td></td><td><input class=form-control type=text data-ng-model=vm.content data-ng-keypress=vm.keyPressed($event)></td><td><input type=checkbox data-ng-model=vm.enabled></td><td><i class="icon pe-icon pe-7s-plus f-18 f-bold text-success" ng-click=vm.create(vm.content)></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/contract/contract-list.html",'<div class="container-fluid contract screen-only"><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span class="icon pe-icon pe-7s-note2 contract"></span> <span data-translate=APP.MODULES.CONTRACT.LIST></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class=row><div class="col-xs-8 pull-right"><div class=row><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control dir=ltr id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><simple-date data-ng-model=vm.contractFromDate name=dateForm id=dateFrom></simple-date></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><simple-date data-ng-model=vm.contractToDate name=dateTo id=dateTo></simple-date></div></div></div><div class=row><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.COMPANY_NAME for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount data-ng-model=vm.searchItem.minContractAmount></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div></div><div class=row><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TYPE for=contract-type></label><input class=form-control id=contract-type name=contractType data-ng-model=vm.searchItem.contractType></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select multiple ng-model=vm.searchItem.provinceIds theme=bootstrap id=province ng-disabled=vm.disabledProvinceList sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="province.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+province.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--credit Supply Resource --><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.SUB_RESOURCE></label><ui-select multiple ng-model=vm.searchItem.creditSupplyResources theme=bootstrap id=selected-resources sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.name}}-{{$item.code}}</ui-select-match><ui-select-choices refresh=vm.searchCreditSupplyResources($select.search) repeat="resource in vm.resources"><div ng-bind-html="resource.name | highlight: $select.search"></div><small ng-bind-html="resource.code | highlight: $select.search"></small></ui-select-choices></ui-select></div></div></div><div class=row><!--settlement status--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.SETTLEMENT_STATUS for=settlementStateCode></label><select class=form-control data-ng-model=vm.searchItem.settlementStateCode id=settlementStateCode name=settlementStateCode data-ng-options="s.code as s.title for s in vm.settlementStates"></select></div></div><!--included codes--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div><div class=row><!--included ISIC--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedIsics theme=bootstrap id=selected-isic-include sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat="isic.code as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}"><div><span ng-bind-html="isic.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+isic.name | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded isic--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedIsics theme=bootstrap id=selected-isic-exclude sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat="isic.code as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}"><div><span ng-bind-html="isic.code | highlight: $select.search"></span></div><small><span ng-bind-html="\' \'+isic.name | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--need to monitoring  status--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.NEED_TO_MONITORING_STATUS for=needToMonitoringStatus></label><select class=form-control data-ng-model=vm.searchItem.needToMonitoringStatus id=needToMonitoringStatus name=needToMonitoringStatus data-ng-options="s.status as s.title for s in vm.needToMonitoringStatusList"></select></div></div></div></div><div class="col-xs-2 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION_SEARCH_TITLE></label>:&nbsp;<div class="btn-group nav-btn-group economic-sections"><label class="btn btn-default" data-ng-repeat="economicSection in vm.economicSections" ng-model=economicSection.selected uib-btn-checkbox><i class="fa fa-check-square-o" ng-show=economicSection.selected></i> <i class="fa fa-square-o" ng-hide=economicSection.selected></i> <img data-ng-src=assets/images/section-icons/{{economicSection.id}}.png alt="" width=25> <span data-ng-bind=economicSection.name></span></label></div></div></div><div class="col-xs-2 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE_SEARCH_TITLE></label>:&nbsp;<div class="btn-group nav-btn-group plan-types"><label class="btn {{planType.key}}" data-ng-repeat="planType in vm.planTypes" ng-model=planType.selected uib-btn-checkbox><i class="fa fa-check-square-o" ng-show=planType.selected></i> <i class="fa fa-square-o" ng-hide=planType.selected></i> <span data-ng-bind=planType.title></span></label><label class="btn default"><i class="fa fa-circle"></i> <span data-translate=APP.SHARE.UNDEFINED></span></label></div></div></div><div class=col-xs-12><div class="col-sm-6 col-md-4 pull-right"><div class="form-group pull-right"><br><label class="pull-left btn btn-default" for=need-to-monitor><input class="pull-right m-l-1" data-ng-model=vm.searchItem.needToMonitor id=need-to-monitor name=needToMonitor type=checkbox> <span data-translate=APP.MODULES.CONTRACT.NEW_CONTRACT></span></label></div></div><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() uib-tooltip="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class="btn btn-primary-alt" type=submit data-ng-click="vm.exportContracts(\'EXCEL\')" ng-attr-title="{{\'APP.ACTIONS.EXPORT\'|translate}}"><i class="fa fa-file-excel-o"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><hr><div class=pane-body><div class=pull-right id=search-result-container data-ng-show=!vm.toggleAdd><a class="btn btn-sm btn-success-alt" ng-click=vm.selectAll()><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.SELECT_ALL>‌</span> </a><a class="btn btn-sm btn-success-alt" ng-click=vm.openModal()><i class="fa fa-add"></i> <span data-translate=APP.MODULES.CONTRACT.MONITORING.ADD_GROUP_MONITORING>‌</span> </a><a class="back-to-top-btn btn btn-default-alt" id=toTopBtn ng-click=vm.backToTop()>فرم جستجو</a></div><div class="row screen-only"><div class=col-xs-12 data-ng-hide=vm.loading><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pCurrency></b> <span data-translate="total amount:"></span> <b data-ng-bind=vm.totalAmount|pCurrency></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." ng-show=vm.loading class=centered height=50></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable few-paddings" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-class="{\'need-monitor\': contract.needToMonitor}" data-ng-repeat="contract in $data"><td data-title="\'\'" data-ng-bind=" (vm.tableParams.page() - 1) * vm.tableParams.count() + $index + 1 |pNumber"></td><td data-title=""><input type=checkbox class=m-1 id=contractId name=contractId data-ng-model=contract.selected></td><td data-title="\'APP.MODULES.CONTRACT.SECTION_TYPE\'|translate" data-ng-attr-title="{{contract.economicSection.name + \'، \' + (contract.planType||\'نامشخص\') + \'، \' + contract.creditSupplyResourceText}}" data-sortable="\'economicSection\'" class="default {{vm.planTypeKey(contract.planType)}}"><img width=25 data-ng-src=assets/images/section-icons/{{contract.economicSection.id}}.png><!--<i class="free-index" data-ng-bind=" (vm.tableParams.page() - 1) * vm.tableParams.count() + $index + 1 |pNumber"></i>--></td><td data-title="\'APP.MODULES.CONTRACT.NUMBER\'|translate" data-sortable="\'number\'"><a data-ng-click=vm.openDetailsModal(contract.id,false) data-ng-attr-title="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}"><span data-ng-bind=contract.number|pNumber></span></a></td><td data-title="\'APP.MODULES.CONTRACT.DATE_S\'|translate" data-sortable="\'contractDate\'" data-ng-bind="contract.contractDate|jDate:\'jYY/jM/jD\'|pNumber"></td><td data-title="\'APP.MODULES.CONTRACT.PLACE\'|translate" data-sortable="\'province\'" data-ng-bind="contract.province.title + \'/\' + contract.branch.title"></td><td data-title="\'APP.MODULES.CONTRACT.APPLICANT_NAME\'|translate" data-sortable="\'companyName\'" data-ng-bind=contract.companyName></td><td data-title="\'APP.MODULES.CONTRACT.TOTAL_AMOUNT\'|translate" data-sortable="\'totalAmount\'" data-ng-attr-title="{{contract.totalAmount|pCurrency:\'A\'}}" data-ng-bind="(contract.totalAmount|pCurrency:\'R\')"></td><td data-title="\'APP.MODULES.CONTRACT.CONTRACT_TYPE\'|translate" data-sortable="\'contractType\'"><span data-ng-bind="(contract.contractType + \'(کد \' + contract.code + \')\')|pNumber"></span><br><small data-ng-bind="(contract.title + \'-\' + contract.economicCodeName + \'(کد اقتصادی \' + contract.economicCode + \')\')|pNumber"></small></td><td data-title="\'APP.MODULES.CONTRACT.SETTLEMENT_STATUS\'|translate" data-sortable="\'settlementStateCode\'" data-ng-bind=contract.settlementStateTitle></td><td data-title="\'APP.MODULES.CONTRACT.NEEDTOMONITOR\'|translate" data-sortable="\'needToMonitor\'"><i class="icon pe-icon f-17" data-ng-class="{\'pe-7s-check text-success\':contract.hasTerminatedMonitoring ,\r\n                                                                   \'pe-7s-mail\':contract.needToMonitor,\r\n                                                                   \'pe-7s-mail-open\':!contract.needToMonitor}"></i></td><td data-title="\'\'|translate"><a ng-click=vm.openModal(contract.id) class="btn btn-sm text-success" data-ng-attr-title="{{\'APP.MODULES.CONTRACT.ADD_MONITORING\'|translate}}"><span class="icon pe-icon pe-7s-add-user f-17 f-bold"></span></a></td></tr></table></div></div></div></div></div></section></div></div></div>'),
t.put("app/components/contract-code/contract-code.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><span class=screen-only data-translate=APP.SHARE.SEARCH></span><form class="dataTables_wrapper dt-bootstrap search-container screen-only" name=reportsForm data-ng-submit=vm.searchFunction()><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE for=code></label><input class=form-control id=code ng-model=vm.search.code name=code type=text></div></div><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE for=title></label><input class=form-control id=title ng-model=vm.search.title name=title type=text></div></div><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE for=contractType></label><select class=form-control data-ng-attr-title="{{\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\'|translate}}" data-ng-options="contractType.id as contractType.name for contractType in vm.contractTypes" name=contractType id=contractType data-ng-model=vm.search.contractType.id></select></div></div><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.MIN_PROVINCE_LIMIT for=minProvinceLimit></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=minProvinceLimit name=minProvinceLimit data-ng-model=vm.search.minProvinceLimit></div></div><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.MAX_PROVINCE_LIMIT for=maxProvinceLimit></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=maxProvinceLimit name=maxProvinceLimit data-ng-model=vm.search.maxProvinceLimit></div></div><div class=col-md-4><div class=form-group><button type=submit class="btn btn-success pull-left" title="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></form><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate" data-ng-bind="((vm.tableParams.page() - 1) * (vm.tableParams.count()) + $index + 1)|pNumber"></td><td data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE\'|translate" data-sortable="\'code\'"><b data-ng-bind=item.code|pNumber></b></td><td data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE\'|translate" data-sortable="\'title\'"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input data-ng-attr-title="{{\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE\'|translate}}" class=form-control type=text data-ng-model=item.title></span></td><td data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.PROVINCE_LIMIT\'|translate" data-sortable="\'provinceLimit\'"><span data-ng-show=!item.toggle data-ng-bind=item.provinceLimit|pCurrency></span> <span data-ng-show=item.toggle><input title="\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.PROVINCE_LIMIT\'|translate" class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=provinceLimit name=provinceLimit data-ng-model=item.provinceLimit></span></td><td data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\'|translate" data-sortable="\'contractType\'"><span data-ng-show=!item.toggle data-ng-bind="item.contractType.name  "></span> <span data-ng-show=item.toggle><select class=form-control data-ng-attr-title="{{\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\'|translate}}" data-ng-options="contractType.id as contractType.name for contractType in vm.contractTypes" name=contractTypeEdit id=contractTypeEdit data-ng-model=item.contractType.id></select></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/contract-filter/contract-filter.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_FILTER.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-ng-table=vm.tableParams data-show-filter=false data-template-pagination=app/directives/ng-table/pagination-tpl.html><tr class=text-center data-ng-repeat="item in $data"><!--id column--><td data-ng-bind=($index+1)|pNumber data-title="\'APP.SHARE.INDEX\'|translate"></td><!--field type column--><td data-sortable="\'fieldType\'" data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_FILTER.FIELD_TYPE\'|translate"><span data-ng-bind=vm.getTitle(item.fieldType) data-ng-show=!item.toggle></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.fieldType ng-options="item.value as item.title for item in vm.types"></select></span></td><!--value column--><td data-title="\'APP.MODULES.BASIC_INFO.CONTRACT_FILTER.VALUE\'|translate"><span data-ng-bind=item.value data-ng-show=!item.toggle></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.value ng-options="item as item for item in vm.values[item.fieldType]"></select></span></td><!--operation column--><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons cancel="item.toggle = !item.toggle" delete=vm.delete(item.id) edit=vm.update(item) has-delete=true has-edit=true toggle=item.toggle></command-buttons></td></tr><!--add row--><tr><td></td><!--field type column in add row--><td><select class=form-control data-ng-model=vm.fieldType ng-options="item.value as item.title for item in vm.types"></select></td><!--value column in add row--><td><select class=form-control data-ng-model=vm.value ng-options="item as item for item in vm.values[vm.fieldType]"></select></td><!--operation column--><td><i class="icon pe-icon pe-7s-plus f-18 f-bold text-success" ng-click=vm.create()></i></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/contract-type/contract-type.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_TYPE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/credit-supply-resource/credit-supply-resource.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.CREDIT_SUPPLY_RESOURCE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate">{{$index+1|pNumber}}</td><td data-title="\'APP.SHARE.NAME\'|translate" data-ng-bind=item.name></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/credit-supply-resource/sub-resource-list.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.SUB_RESOURCE_LIST></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate">{{$index+1|pNumber}}</td><td data-title="\'APP.SHARE.NAME\'|translate" data-ng-bind=item.name></td><td data-title="\'APP.SHARE.CODE\'|translate" data-filter="{code:\'text\'}" data-ng-bind=item.code></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/directive-approval-place/directive-approval-place.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.DIRECTIVE_APPROVAL_PLACE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr><!-- add row --><td></td><td data-title="\'APP.SHARE.NAME\'|translate"><input class=form-control type=text data-ng-model=vm.name data-ng-keypress=vm.keyPressed($event)></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><i class="icon pe-icon pe-7s-plus f-18 f-bold text-success" ng-click=vm.create()></i></td></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/directive/directive-list.html",'<div class="container-fluid directive"><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span class="icon pe-icon pe-7s-pen directive"></span> <span data-translate=APP.MODULES.DIRECTIVE.LIST></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><form class="dataTables_wrapper dt-bootstrap search-container" data-ng-submit=vm.searchDirective()><div class=row><div class="col-xs-4 pull-right"><div class=form-group><label for=directiveApplicantSearch data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></label><input class=form-control id=directiveApplicantSearch name=directiveApplicantSearch data-ng-model=vm.search.applicant></div></div><div class="col-xs-4 pull-right"><div class=form-group><label for=directiveNumberSearch data-translate=APP.MODULES.DIRECTIVE.NUMBER></label><input class=form-control dir=ltr id=directiveNumberSearch name=directiveNumberSearch data-ng-model=vm.search.number></div></div><div class="col-xs-4 pull-right"><div class=form-group><label for=directiveApprovalPlaceSearch data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></label><input class=form-control id=directiveApprovalPlaceSearch name=directiveApprovalPlaceSearch data-ng-model=vm.search.directiveApprovalPlace></div></div><div class=col-xs-12><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() uib-tooltip="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></form></pane-body><hr><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.MODULES.DIRECTIVE.NUMBER\'|translate"><a title="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}" data-ui-sref="root.directive.details({directiveId:item.directive.dirNumber, monitoringId:item.id,monitoringState:\'root.monitoring.monitoring-details\'})"><span data-ng-bind=item.directive.dirNumber|pNumber></span></a></td><td data-title="\'APP.MODULES.DIRECTIVE.APPLICANT.NAME\'|translate" data-ng-bind="item.applicant.applicantName || \'-\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.APPROVE_DATE\'|translate" data-ng-bind=item.directive.dirApproveDate|jDate|pNumber></td><td data-title="\'APP.MODULES.DIRECTIVE.END_DATE\'|translate" data-ng-bind="item.directive.dirValidityDuration|pNumber:\'۰\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE\'|translate" data-ng-bind="item.directive.directiveApprovalPlace.name || \'-\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE\'|translate" data-ng-bind="item.creditSupplyResource.name || \'-\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.CASE_EXPERT\'|translate" data-ng-bind="item.directive.dirExpert.name || \'-\'"></td><!--<td data-title="\'APP.MODULES.DIRECTIVE.ECONOMIC_SECTION\'|translate"\r\n                                                data-ng-bind="item.economicSection.name || \'-\'">\r\n                                            </td>\r\n                                            <td data-title="\'APP.MODULES.DIRECTIVE.PLAN_TYPE\'|translate"\r\n                                                data-ng-bind="item.planType|planType">\r\n                                            </td>--><td data-title="\'\'"><i class="icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer" ng-click=vm.deleteDirective(item.id) data-ng-attr-title="{{\'APP.ACTIONS.DELETE\'|translate}}"></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/directive/directive.html",'<div class="container-fluid directive"><div class=print-only><table class="table table-bordered"><tr><th>وضعیت</th><th>شماره قرارداد</th><th>نام متقاضی</th><th>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th></tr><tr><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td data-ng-bind=vm.monitoring.contract.companyName></td><td data-ng-bind="(vm.monitoring.contract.planType || \'نامشخص\')+\'/\'+(vm.monitoring.contract.economicSection.name || \'نامشخص\')"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td></tr></table></div><h2 class="plan-title screen-only"><span class=ltr-number ng-if=vm.directive.dirNumber data-ng-bind="\'مصوبه شماره \' + (vm.directive.dirNumber|pNumber)"></span> <span class=ltr-number ng-if=!vm.directive.dirNumber data-translate="Register new directive"></span></h2><h4 class=panel-subtitle>ایجاد شده در <span data-ng-bind="vm.monitoring.createDate|jDate:\'jD jMMMM jYY ساعت H:mm\'"></span> <span ng-if="vm.monitoring.organizationLevel===\'STAFF\'">در اداره نظارت بر اعطای تسهیلات </span><span ng-if="vm.monitoring.organizationLevel===\'PROVINCE\'">در استان مربوطه </span><span ng-if="vm.monitoring.organizationLevel===\'BRANCH\'">در شعبه مربوطه</span></h4><div class=row><!-- sidebar directive steps --><div class="col-xs-1 pull-right p-0 custom-sidebar-parent screen-only"><div class=module-wrapper><section class=module><div class="module-inner p-0"><div class=module-content><div class="module-content-inner p-t-0 p-b-0"><nav class="navbar custom-sidebar"><div class="text-center pull-right" data-ng-repeat="step in vm.subStates" ng-class="{\'active\':vm.isActive(\'root.directive.\'+step), \'done\':vm.getStatus(step), \'incomplete\':!vm.getStatus(step)}"><a ng-attr-ui-sref=root.directive.{{step}}><img src=assets/images/monitoring-icons/details.png><div data-translate={{vm.subStatesTitle[$index]}}></div></a><hr></div></nav></div></div></div></section></div></div><!-- main section --><div class="col-xs-11 pull-right main-content-parent col-offset-right-1"><!-- top nav monitoring digest _ This would be disappeared while printing--><div class="row screen-only"><div class="module-wrapper col-xs-12 pull-right"><section class=module><div class="module-content-inner p-1"><div class=pane-body><fieldset data-ng-disabled=!vm.allowedAction><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.STEP></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.LEVEL></i><br><label class=inline data-ng-bind="vm.monitoring.currentStep.title + \'/\' + (vm.monitoring.organizationLevel|userLevel)"></label></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.CONTRACT.NUMBER></i><br><span class=ltr-number data-ng-bind=vm.monitoring.contract.number|pNumber></span></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.APPLICANT_NAME></i><br><b data-ng-bind=vm.monitoring.contract.companyName></b></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.PLAN_TYPE></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.ECONOMIC_SECTION></i><br><b data-ng-bind="(vm.monitoring.contract.planType || \'نامشخص\')+\'/\'+(vm.monitoring.contract.economicSection.name || \'نامشخص\')"></b></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></i><br><span data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></span></div></fieldset></div></div></section></div></div><!--main container--><section class="module directive"><div ui-view></div><div class="module-footer text-center screen-only"><div class=row><div class="col-xs-12 pull-right"><button class="btn btn-default-alt pull-left" ng-click=vm.next() data-ng-disabled="!vm.hasNext() || vm.loading" data-ng-hide="!vm.hasNext() || vm.loading">صفحه بعدی&nbsp;&nbsp; <i class="icon pe-icon pe-7s-back-2 f-17" data-ng-hide=vm.loading></i> <i class="icon pe-icon pe-7s-timer f-17" data-ng-show=vm.loading></i></button> <a class="btn btn-primary" style="margin: auto" data-ng-if=vm.monitoringId data-ui-sref={{vm.monitoringState}}({monitoringId:vm.monitoringId})><i class="icon pe-icon pe-7s-back f-17 f-bold mirrored"></i> <span data-translate=APP.MODULES.DIRECTIVE.BACK_TO_MONITORING></span> </a><button class="btn btn-default-alt pull-right" ng-click=vm.previous() data-ng-disabled="!vm.hasPrevious() || vm.loading" data-ng-hide="!vm.hasPrevious() || vm.loading"><i class="icon pe-icon pe-7s-next-2 f-17 pull-right" data-ng-hide=vm.loading></i> <i class="icon pe-icon pe-7s-timer f-17" data-ng-show=vm.loading></i> &nbsp;&nbsp; صفحه قبلی</button></div></div></div></section></div></div></div>'),t.put("app/components/economic-section/economic-section.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.ECONOMIC_SECTION.TITLE></h1><!-- Omitted code: economic section cannot be added manually for now --><div class=pull-left ng-if=false><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=!vm.toggleAdd><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><!-- :Omitted code --><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><!-- Omitted code: economic section cannot be added manually for now --><pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create(vm.name)><div class=form-group><div class="col-sm-6 pull-right"><div class=row><label class="col-sm-1 control-label pull-right" data-translate=APP.SHARE.NAME></label><div class="col-sm-11 pull-right"><input class=form-control data-ng-model=vm.name placeholder=نام></div></div></div><div class="col-sm-4 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></pane-body><!-- :Omitted code --><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control data-ng-model=item.name></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/graphical-report/graphical-report.html",'<div class=container-fluid><h2 class="approve-title screen-only"></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class="module-heading screen-only"><h1 class="module-title inline" data-translate=APP.MODULES.GRAPHICAL_REPORT.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><span class=screen-only data-translate=APP.MODULES.REPORT.SEARCH></span><form class="dataTables_wrapper dt-bootstrap search-container screen-only" data-ng-submit=vm.submit() name=reportsForm><!--select report--><div class=row ng-if=!vm.group><div class="col-md-8 pull-right sw"><label class="control-label col-xs-12 pull-right" data-translate=APP.MODULES.REPORT.NAME></label><button class="btn btn-default-alt col-sm-12 col-md-1" data-ng-attr-title="{{\'APP.ACTIONS.NEXT\'|translate}}" data-ng-click=vm.shiftSelectedReport(1) type=button><i class="fa fa-caret-left"></i></button><div class="col-sm-12 col-md-10"><ui-select data-ng-model=vm.selectedReport id=selected-report required sortable theme=bootstrap><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><i class=m-r-1 data-ng-bind=$select.selected.index|pNumber></i>-<b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat="report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }"><div ng-bind-html="(vm.getReportStatus(report) ? \'<i class=\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\'></i>\' : \'<i class=\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\'></i>\') + report.content + \'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\'color: white;\\\'>\' + report.index + \'</small>\' | highlight: $select.search"></div></ui-select-choices></ui-select></div><button class="btn btn-default-alt col-sm-12 col-md-1" data-ng-attr-title="{{\'APP.ACTIONS.PREVIOUS\'|translate}}" data-ng-click=vm.shiftSelectedReport(-1) type=button><i class="fa fa-caret-right"></i></button></div></div><!--dates and level--><div class=row><!--from date--><div class="col-md-4 pull-right" data-ng-if=!vm.selectedReport.noFromDate><div class=form-group data-ng-class="{\'has-error\': reportsForm.fromConfirmDate.$invalid}"><label data-translate=APP.MODULES.REPORT.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate required></simple-date></div></div><!--to date--><div class="col-md-4 pull-right" data-ng-if=!vm.selectedReport.noToDate><div class=form-group data-ng-class="{\'has-error\': reportsForm.toConfirmDate.$invalid}"><label data-translate=APP.MODULES.REPORT.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate required></simple-date></div></div><!--organization level--><div class="col-md-4 pull-right" data-ng-show=vm.selectedReport.filters.organizationLevel><div class=form-group><label data-translate=APP.SHARE.REPORT_LEVEL></label><select class=form-control name=reportType ng-model=vm.reportParams.organizationLevel ng-options="level as (level|userLevel) for level in vm.reportLevels"></select></div></div></div><div class=col-md-4><div class=form-group><button class="btn btn-success pull-left" data-ng-disabled=!vm.selectedReport.id title="{{\'APP.ACTIONS.REPORT_VIEW\'|translate}}" type=submit><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form><div class="col-md-12 pull-right m-3"><h3 class=text-center data-ng-hide=vm.loading ng-bind-html=vm.reportTitle></h3><canvas chart-click=vm.onClick chart-data=vm.data chart-dataset-override=vm.datasetOverride chart-labels=vm.labels chart-options=vm.options chart-series=series class="chart chart-line" ng-show="vm.currentReport !== null && !vm.loading" id=line></canvas><!--data-ng-show="vm.currentReport === \'monthly\' || vm.currentReport === \'monthlyInput\' || vm.currentReport === \'monthlyInputToOutputCount\'"--></div><div class="row screen-only" data-ng-show=vm.loading><img alt="در حال بارگذاری ..." class=centered height=50 ng-show=vm.loading src=assets/images/loading-sm.gif></div></div><div class=screen-only><br><br></div><!--<div class="well screen-only" data-ng-hide="vm.loading && !vm.duration">\r\n                                    مدت زمان بارگیری:\r\n                                    {{vm.duration|pNumber}}\r\n                                </div>--></div></div></div></div></section></div></div></div>'),t.put("app/components/help/help-admin.html",'<div class=container-fluid><h2 class=view-title data-translate=APP.MODULES.SAMPLE.TITLE></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.SAMPLE.LIST></h1><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=vm.toggleAddSample data-ng-click="vm.toggleAddSample=!vm.toggleAddSample"><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddSample><form class=form-inline name=addSampleForm data-ng-submit=vm.createSample();addSampleForm.$setPristine() novalidate><div class=form-group data-ng-class="{\'has-error\':addSampleForm.name.$invalid &&!addSampleForm.name.$pristine}"><span class=red-star>*</span><label for=view data-translate=APP.SHARE.NAME></label><input class=form-control type=text id=view name=view auto-focus={{!vm.toggleAddSample}} placeholder="{{\'APP.SHARE.NAME\'|translate}}" data-ng-model=vm.view.name required></div><button class="btn btn-default-alt" type=button data-ng-click=vm.cancelAddSample() uib-tooltip="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-disabled=addSampleForm.$invalid><i class="fa fa-check"></i></button></form></pane-body><pane-body><div class="dataTables_wrapper table-responsive form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=15%><col width=70%><col width=15%></colgroup><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate" data-ng-bind=item.id></td><td data-title="\'APP.SHARE.NAME\'|translate" data-filter="{view:\'text\'}"><span data-ng-bind=item.name data-ng-show=!vm.toggleEditSample[$index]></span><form name=viewForm{{$index}} data-ng-show=vm.toggleEditSample[$index] novalidate><div class=form-group data-ng-class="{\'has-error\':view.$invalid && !view.$pristine}"><input class=form-control type=text auto-focus={{vm.toggleEditSample[$index]}} placeholder="{{\'APP.SHARE.CAPTION\'|translate}}" data-ng-model=item.name name=view required></div></form></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons cancel=vm.cancelEditSample($index) disabled edit="vm.updateSample(item, $index)" delete="vm.deleteSample(item.id, $index)" has-delete=true toggle=vm.toggleEditSample[$index]></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/help/help.html",'<div class=container-fluid><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><i class="icon pe-icon pe-7s-help1 f-17"></i> <span data-translate=APP.MODULES.HELP.TITLE></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class="row text-center"><img src=../../assets/images/lms_flow.jpg usemap=#imgmap><map name=imgmap><area shape=circle coords=355,40,40 style="background-color: antiquewhite" ng-click=vm.openFile(0) alt=start ui-sref=root.help data-ng-attr-title={{vm.getCaptionById(0)}}><area shape=poly coords=397,35,397,45,617,46,617,123,608,124,621,142,636,123,627,123,627,35 ng-click=vm.openFile(1) alt=01 ui-sref=root.help><area shape=poly coords=348,81,361,81,361,122,371,123,356,143,339,122,352,123,348,83 ng-click=vm.openFile(2) alt=02 ui-sref=root.help><area shape=poly coords=314,46,86,46,86,123,96,125,81,140,66,124,75,124,76,34,314,34,315,46 ng-click=vm.openFile(3) alt=03 ui-sref=root.help><area shape=poly coords=542,142,542,302,701,302,700,142 ng-click=vm.openFile(4) alt=r-1 ui-sref=root.help><area shape=poly coords=274,142,275,302,434,301,434,144 ng-click=vm.openFile(5) alt=r-2 ui-sref=root.help><area shape=poly coords=2,145,3,301,160,304,161,143 ng-click=vm.openFile(6) alt=r-3 ui-sref=root.help><area shape=poly coords=616,304,617,360,607,362,621,377,639,362,626,359,627,306 ng-click=vm.openFile(7) alt=g-1 ui-sref=root.help><area shape=poly coords=576,305,577,336,390,334,389,361,382,362,394,378,408,362,400,362,402,349,586,348,585,305 ng-click=vm.openFile(8) alt=g-2 ui-sref=root.help><area shape=poly coords=360,305,360,360,369,361,354,378,340,362,350,361,349,305 ng-click=vm.openFile(9) alt=g-3 ui-sref=root.help><area shape=poly coords=86,305,88,361,93,363,80,379,65,362,74,361,75,304 ng-click=vm.openFile(10) alt=g-4 ui-sref=root.help><area shape=poly coords=541,379,539,541,701,541,700,380 ng-click=vm.openFile(11) alt=r-4 ui-sref=root.help><area shape=poly coords=276,381,274,539,434,541,435,380 ng-click=vm.openFile(12) alt=r-5 ui-sref=root.help><area shape=poly coords=162,380,162,541,2,541,1,382 ng-click=vm.openFile(13) alt=r-6 ui-sref=root.help><area shape=poly coords=616,542,614,589,609,589,621,611,637,590,628,592,628,545 ng-click=vm.openFile(14) alt=g-5 ui-sref=root.help><area shape=poly coords=392,543,390,579,576,582,578,588,571,590,580,608,597,591,587,592,586,570,401,571,401,542 ng-click=vm.openFile(15) alt=g-6 ui-sref=root.help><area shape=poly coords=348,541,350,589,341,589,353,606,368,591,361,589,360,545 ng-click=vm.openFile(16) alt=g-7 ui-sref=root.help><area shape=poly coords=75,542,76,1083,296,1087,294,1099,316,1080,296,1066,295,1076,87,1076,86,541 ng-click=vm.openFile(17) alt=g-8 ui-sref=root.help><area shape=poly coords=539,608,540,769,700,770,701,608 ng-click=vm.openFile(18) alt=r-7 ui-sref=root.help><area shape=poly coords=273,607,276,770,435,770,435,610 ng-click=vm.openFile(19) alt=r-8 ui-sref=root.help><area shape=poly coords=613,771,617,810,608,813,623,831,635,813,627,811,626,769 ng-click=vm.openFile(20) alt=g-9 ui-sref=root.help><area shape=poly coords=351,770,350,1021,342,1022,355,1038,372,1020,361,1019,361,772 ng-click=vm.openFile(21) alt=g-10 ui-sref=root.help><area shape=poly coords=540,830,539,993,700,992,699,832 ng-click=vm.openFile(22) alt=r-9 ui-sref=root.help><area shape=poly coords=616,991,616,1074,416,1074,417,1065,398,1082,413,1095,415,1086,627,1089,627,993 ng-click=vm.openFile(23) alt=g-11 ui-sref=root.help><area shape=circle coords=355,1080,40 style="background-color: antiquewhite" ng-click=vm.openFile(24) alt=end ui-sref=root.help></map></div></div></div></div></section></div></div></div>'),
t.put("app/components/home/home.html",'<div><div class=container-fluid><h2 class=view-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class="module module-projects-overview"><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.HOME.QUICK_ACCESS></h1></div><div class=module-content><div class=module-content-inner><pane-body><ul class="data-page row text-center p-r-0"><li class="item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right" ng-show=vm.showContracts><a class=contract ui-sref=root.contract-page><span aria-hidden=true class="icon pe-icon pe-7s-note2 f-25 contract"></span> <span class=desc data-translate=APP.MODULES.CONTRACT.TITLE></span></a></li><li class="item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right"><a ui-sref=root.monitoring-cartable class=monitoring><span aria-hidden=true class="icon pe-icon pe-7s-glasses f-25 monitoring"></span> <span class=desc data-translate=APP.MODULES.MONITORING.TITLE></span></a></li><li class="item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right"><a class=trace ui-sref="root.trace-page({step: \'cartable\'})"><span aria-hidden=true class="icon pe-icon pe-7s-alarm f-25 trace"></span> <span class=desc data-translate=APP.MODULES.TRACE.TITLE></span></a></li><li class="item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right" ng-show=vm.showDirective><a class=directive ui-sref=root.directive-page><span aria-hidden=true class="icon pe-icon pe-7s-pen f-25 directive"></span> <span class=desc data-translate=APP.MODULES.DIRECTIVE.TITLE></span></a></li></ul></pane-body></div></div></div></section></div></div></div><div class=loading-home ng-show=vm.loading><img src=../../../assets/images/loading.gif class="img-responsive col-lg-6 col-lg-offset-3"></div></div>'),t.put("app/components/investment-action/investment-action.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.INVESTMENT_ACTION.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create(vm.name,vm.type)><div class=row><div class="col-sm-1 pull-right"><label data-translate=APP.SHARE.NAME></label></div><div class="col-sm-3 pull-right"><input class=form-control data-ng-model=vm.name></div><div class="col-sm-1 pull-right"><label data-translate=APP.SHARE.TYPE></label></div><div class="col-sm-3 pull-right"><select class=form-control data-ng-model=vm.type ng-options="item.value as item.title for item in vm.types"></select></div><div class="col-sm-2 pull-right"><button type=submit class="btn btn-success" data-translate=APP.ACTIONS.SUBMIT></button></div></div></form></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title="\'APP.SHARE.STATUS\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.type|investmentType></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.type ng-options="item.value as item.title for item in vm.types"></select></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr><tr><td></td><td><input class=form-control type=text data-ng-model=vm.name></td><td><select class=form-control data-ng-model=vm.type ng-options="item.value as item.title for item in vm.types"></select></td><td><i ng-click=vm.create() class="icon pe-icon pe-7s-plus f-18 f-bold text-success"></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/isic/isic-list.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.ISIC.TITLE></h1><div class=pull-left><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=false><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create()><div class=row><div class=form-group><div class="col-sm-8 pull-right"><label class="col-sm-1 control-label pull-right" data-translate=APP.SHARE.NAME></label><div class="col-sm-3 pull-right"><input class=form-control data-ng-model=vm.isic.title placeholder=نام></div><label class="col-sm-1 control-label pull-right" data-translate=APP.MODULES.BASIC_INFO.ISIC.CODE></label><div class="col-sm-3 pull-right"><input class=form-control type=number data-ng-model=vm.isic.code placeholder=کد></div><!--<label class="col-sm-1 control-label pull-right"\r\n                                                       data-translate="APP.MODULES.BASIC_INFO.ISIC.REGION"></label>\r\n                                                <div class="col-sm-3 pull-right">\r\n                                                    <input class="form-control"\r\n                                                           type="number"\r\n                                                           data-ng-model="vm.isic.region"\r\n                                                           placeholder="منطقه">\r\n                                                </div>--></div><div class="col-sm-4 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate">{{$index+1|pNumber}}</td><td data-title="\'APP.MODULES.BASIC_INFO.ISIC.CODE\'|translate" data-ng-bind=item.code|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate" data-ng-bind=item.name></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/loginlog/loginlog-list.html",'<div class=container-fluid><h2 class=view-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.LOGINLOG.TITLE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class=row><div class="col-xs-12 pull-right"><div class=row><div class="col-sm-6 col-md-4 pull-right"><label data-translate=APP.MODULES.USER.USERNAME></label><ui-select theme=bootstrap id=username name=username data-ng-model=vm.user><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select><!--<ui-select theme="bootstrap" id="username" name="username"\r\n                                                               data-ng-model="vm.user">\r\n                                                        <ui-select-match\r\n                                                                placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}">\r\n                                                            <span data-ng-bind="$select.selected.name"></span>\r\n                                                        </ui-select-match>\r\n                                                        <ui-select-choices\r\n                                                                repeat="user in vm.allUsers | propsFilter : {name: $select.search,username:$select.search}">\r\n                                                            <div ng-bind-html="(user.name+\' (\'+user.username+\')\') | highlight: $select.search">\r\n                                                            </div>\r\n                                                        </ui-select-choices>\r\n                                                    </ui-select>--></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.FROM_DATE></label><simple-date data-ng-model=vm.fromDate name=fromDate id=fromDate></simple-date></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.TO_DATE></label><simple-date data-ng-model=vm.toDate name=toDate id=toDate></simple-date></div></div><div class=col-sm-12><div class="form-group margin-top-md pull-left"><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() uib-tooltip="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></div></div></form></div><hr><div class="row screen-only" data-ng-show=vm.loading><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." ng-show=vm.loading class=centered height=50></div><div class="row screen-only" data-ng-hide=vm.loading><div class=col-xs-12><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> <span>( {{vm.duration|pNumber}} ثانیه)</span></div></div><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=5%><col width=45%><col width=25%><col width=25%></colgroup><tr class=text-center data-ng-repeat="item in $data"><td ng-bind="(vm.tableParams.count() * (vm.tableParams.page()-1) + $index+1)|pNumber"></td><td data-title="\'APP.MODULES.USER.FULL_NAME\'|translate" dir=ltr data-sortable="\'user.name\'" data-ng-bind=item.user.name></td><td data-title="\'APP.SHARE.DATE\'|translate" dir=ltr data-sortable="\'date\'" data-ng-bind=item.date|jDateTime|pNumber></td><td data-title="\'APP.MODULES.LOGINLOG.IP_ADDRESS\'|translate" dir=ltr data-sortable="\'ipAddress\'" data-ng-bind=item.ipAddress></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/manage-user-guide/manage-user-guide.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.MANAGE_USER_GUIDE.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer table-responsive row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParamsAttachment data-show-filter=false><colgroup><col width=30%><col width=45%><col width=15%><col width=10%></colgroup><tr class=text-center data-ng-repeat="item in vm.attachments"><td data-title="\'APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME\'|translate"><a ng-href={{vm.host}}api/fileManager/attachment/{{item.helpAttachment.id}}/getContent/{{item.helpAttachment.name}}.{{item.helpAttachment.type}} target=_blank><!--<span data-ng-bind="item.helpAttachment.name"></span>--> <span class="fa fa-download"></span></a></td><td data-title="\'APP.SHARE.STEP\'|translate" data-ng-bind=vm.getStepNumberCaption(item.stepNumber)></td><td data-title="\'APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER\'|translate" data-ng-bind=item.helpAttachment.creatorLmsUser.name></td><td data-title="\'APP.SHARE.DELETE\'|translate"><span class="icon pe-icon pe-7s-trash f-20 text-danger" data-ng-attr-title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click=vm.deleteAttachment(item.id)></span></td></tr><tr><td><file-upload class="inline col-xs-8 pull-right" file=vm.attachment.attachment data-uploading=vm.uploaded label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><button class="btn btn-default-alt inline" type=button data-ng-click=vm.cancelAddAttachment() title="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button></td><td colspan=2><select class=form-control ng-options="step as step.caption for step in vm.steps" id=step name=step data-ng-model=vm.step required></select></td><td><button class="btn btn-primary-alt inline" ng-click=vm.addAllAttachments() title="{{\'APP.ACTIONS.UPLOAD\'|translate}}" ng-disabled=!vm.attachment><i class="fa fa-upload"></i></button></td></tr></table></div></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/permissions/permissions-list.html",'<div class=container-fluid><h2 class=view-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.PERMISSION.TITLE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class=row><div class="col-xs-12 pull-right"><div class=row><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.PERMISSION.CAPTION for=caption></label><input class=form-control id=caption name=caption data-ng-model=vm.searchItem.caption></div></div><div class="col-sm-6 col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.PERMISSION.APPLY for=valid></label><select class=form-control data-ng-options="state.value as state.title for state in vm.validStates" id=valid name=valid data-ng-model=vm.searchItem.valid></select></div></div></div></div><div class=col-xs-12><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() uib-tooltip="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></form></div><hr><div class=pane-body><div class=row><div class=col-xs-12><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b></div></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=5%><col width=75%><col width=20%></colgroup><tr class=text-center data-ng-repeat="item in $data"><td ng-bind="(vm.page*vm.size + $index+1)|pNumber"></td><td data-title="\'APP.SHARE.CAPTION\'|translate" data-filter="{caption:\'text\'}"><span data-ng-bind=item.caption data-ng-show=!vm.toggleEditPermission[$index]></span><form name=roleForm{{$index}} data-ng-show=vm.toggleEditPermission[$index] novalidate><div class=form-group data-ng-submit=vm.updatePermission(item,$index) data-ng-class="{\'has-error\':role.$invalid && !role.$pristine}"><input class=form-control tabindex="{{$index + 1}}" ng-keypress=vm.keyPressed($event,item,$index) auto-focus={{vm.toggleEditPermission[$index]}} placeholder="{{\'APP.SHARE.CAPTION\'|translate}}" data-ng-model=item.caption name=caption required></div></form></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons cancel=vm.cancelEditPermission($index) has-edit=true disabled edit=vm.updatePermission(item,$index) has-delete=false toggle=vm.toggleEditPermission[$index]></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/monitoring/monitoring-list.html",'<div class="container-fluid monitoring"><back-button data-ng-show=vm.contractId></back-button><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span class="icon pe-icon pe-7s-glasses monitoring"></span> <span data-translate={{vm.title}}></span></h1><div class=pull-left data-ng-show=vm.contractId><a class="btn btn-sm btn-success-alt" ng-click=vm.openModal(vm.contractId)><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.CONTRACT.ADD_MONITORING>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.showSearch><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class=row><div class="col-md-6 pull-right"><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER for=monitoringNumber></label><input class=form-control type=text id=monitoringNumber name=monitoringNumber data-ng-model=vm.searchItem.monitoringNumber></div></div><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMPANY for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><!--contract from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><!--<adm-dtp data-ng-model="vm.contractFromDate"></adm-dtp>--><simple-date data-ng-model=vm.contractFromDate name=contractFromDate></simple-date></div></div><!--contract due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><!--<adm-dtp data-ng-model="vm.contractToDate"></adm-dtp>--><simple-date data-ng-model=vm.contractToDate name=contractToDate></simple-date></div></div><!--monitoring from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.monitoringToDate name=monitoringToDate></simple-date></div></div><!--create from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_FROM></label><simple-date data-ng-model=vm.createFromDate name=createFromDate></simple-date></div></div><!--create due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_TO></label><simple-date data-ng-model=vm.createToDate name=createToDate></simple-date></div></div><!--confirm from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_FROM></label><simple-date data-ng-model=vm.confirmFromDate name=confirmFromDate></simple-date></div></div><!--confirm due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_TO></label><simple-date data-ng-model=vm.confirmToDate name=confirmToDate></simple-date></div></div><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control data-ng-model=vm.searchItem.minContractAmount currency-tooltip="" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount></div></div><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control type=text id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class="col-md-6 pull-right"><div class=form-group><label for=directive data-translate=APP.MODULES.MONITORING.DIRECTIVE_NUMBER></label><input class=form-control type=text id=directive name=directive data-ng-model=vm.searchItem.directiveNumber></div></div><!-- search expert --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.EXPERT></label><ui-select data-ng-model=vm.searchItem.expert><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search teamHead --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.TEAHM_HEAD></label><ui-select data-ng-model=vm.searchItem.teamHead><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.teamHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search finalHead --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.FINAL_HEAD></label><ui-select data-ng-model=vm.searchItem.finalHead><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.finalHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search owner --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.OWNER></label><ui-select data-ng-model=vm.searchItem.owner><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.owners |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search checkList --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></label><ui-select data-ng-model=vm.checkList><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat="item in vm.checkLists |\r\n                                                                        propsFilter : {content: $select.search}"><div ng-bind-html=" item.content | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><!-- search checkList Status --><div class="col-md-12 pull-right"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS_VALUE></label><select class=form-control id=checkListStatus data-ng-model=vm.checkListStatus data-ng-options="status.value as status.caption for status in vm.checkListStatusList"></select></div></div><!--included codes--><div class="col-md-12 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class="col-md-12 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!-- search province --><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><div><ui-select multiple ng-model=vm.searchItem.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="province.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+province.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div><!-- search branch --><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.BRANCH></label><div><!--<select class="form-control"\r\n                                                                ng-options="branch.id as branch.title for branch in vm.branches"\r\n                                                                id="branch" name="branch"\r\n                                                                data-ng-model="vm.searchItem.branchId">\r\n                                                        </select>\r\n                                                        <span class="input-group-addon">\r\n                                                            <i class="fa fa-remove cursor-pointer text-danger"\r\n                                                               ng-click="vm.searchItem.branchId = null"></i>\r\n                                                        </span>--><ui-select multiple ng-model=vm.searchItem.branchIds theme=bootstrap id=branch sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.BRANCH.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="branch.id as branch in vm.branches | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="branch.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+branch.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div></div><div class=col-md-6><div class="col-md-6 pull-right"><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.MONITORING.STEP></label>:&nbsp;<div class="btn-group nav-btn-group limited-width"><label class="btn btn-default" data-ng-repeat="step in vm.steps" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class="{\'fa-check-square-o\':step.selected, \'fa-square-o\':!step.selected}"></i> <span data-ng-bind=step.title style="font-size: 1rem;overflow-wrap: break-word;white-space: initial"></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label>:&nbsp;<div class="btn-group nav-btn-group limited-width"><label class="btn btn-default" data-ng-repeat="step in vm.traceSteps" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class="{\'fa-check-square-o\':step.selected, \'fa-square-o\':!step.selected}"></i> <span data-ng-bind=step.title style="font-size: 1rem;overflow-wrap: break-word;white-space: initial"></span></label></div></div></div></div><div class="col-md-6 pull-right"><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION_SEARCH_TITLE></label>:&nbsp;<div class="btn-group nav-btn-group limited-width economic-sections"><label class="btn btn-default" data-ng-repeat="economicSection in vm.economicSections" ng-model=economicSection.selected uib-btn-checkbox><i class="fa fa-check-square-o" ng-show=economicSection.selected></i> <i class="fa fa-square-o" ng-hide=economicSection.selected></i> <img data-ng-src=assets/images/section-icons/{{economicSection.id}}.png alt="" width=25> <span data-ng-bind=economicSection.name></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE_SEARCH_TITLE></label>:&nbsp;<div class="btn-group nav-btn-group limited-width plan-types"><label class="btn {{planType.key}}" data-ng-repeat="planType in vm.planTypes" ng-model=planType.selected uib-btn-checkbox><i class="fa fa-check-square-o" ng-show=planType.selected></i> <i class="fa fa-square-o" ng-hide=planType.selected></i> <span data-ng-bind=planType.title></span></label><label class="btn default"><i class="fa fa-circle"></i> <span data-translate=APP.SHARE.UNDEFINED></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ACTIVENESS_STATUS_SEARCH_TITLE></label>:&nbsp;<div class="btn-group nav-btn-group limited-width"><label class="btn btn-default" data-ng-repeat="activenessStatuse in vm.activenessStatuses" ng-model=activenessStatuse.selected uib-btn-checkbox><i class=fa data-ng-class="{\'fa-check-square-o\':activenessStatuse.selected, \'fa-square-o\': !activenessStatuse.selected}"></i> <img data-ng-src=assets/images/activeness-icons/{{activenessStatuse.key}}.png alt="" width=25> <span data-ng-bind=activenessStatuse.title style="font-size: 1rem;overflow-wrap: break-word;white-space: initial"></span></label><label class="btn btn-default"><i class="fa fa-circle"></i> <img data-ng-src=assets/images/activeness-icons/undefined.png alt="" width=25> <span data-translate=APP.SHARE.UNDEFINED></span></label></div><!--<ui-select multiple ng-model="vm.searchItem.activenessStatuses" theme="bootstrap"\r\n                                                                   id="activenessStatuse"\r\n                                                                   sortable="true" close-on-select="false">\r\n                                                            <ui-select-match\r\n                                                                    ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PLAN_TYPE.PLACEHOLDER\'|translate}}">\r\n                                                                {{$item.title}}\r\n                                                            </ui-select-match>\r\n                                                            <ui-select-choices\r\n                                                                    repeat="activenessStatuse.value as activenessStatuse in vm.activenessStatuses | propsFilter: {title: $select.search}">\r\n                                                                <div ng-bind-html="activenessStatuse.title | highlight: $select.search"></div>\r\n                                                            </ui-select-choices>\r\n                                                        </ui-select>--></div></div></div></div></div><div class=row><div class=col-xs-12><br><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() ng-attr-title="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit ng-attr-title="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class="btn btn-primary-alt" type=submit data-ng-click="vm.exportMonitoring(\'EXCEL\')" ng-attr-title="{{\'APP.ACTIONS.EXPORT\'|translate}}"><i class="fa fa-file-excel-o"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><div class=pane-body id=search-result-container><div class="row screen-only" data-ng-if=vm.showSearch><div class="col-xs-12 screen-only" data-ng-hide=vm.loading><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." data-ng-show=vm.loading class=centered height=50></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-table-pagination few-paddings" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="monitoring in $data"><td data-title="\'APP.SHARE.INDEX\'|translate"><span data-ng-bind=monitoring.index|pNumber></span></td><td data-title="\'APP.MODULES.CONTRACT.SECTION_TYPE_ACTIVENESS\'|translate" class="default {{monitoring.planType}}" data-sortable="\'planType\'" data-ng-attr-title="{{ (monitoring.contract.economicSection.name || \'نامشخص\') + \'    \' + (monitoring.planType|planType) + \'    \' + (monitoring.activenessStatus|activeness)}}"><img width=25 ng-src=assets/images/section-icons/{{monitoring.contract.economicSection.id}}.png> <img width=15 class="pull-right m-r-2" ng-src="assets/images/activeness-icons/{{monitoring.activenessStatus ? monitoring.activenessStatus : \'undefined\'}}.png"></td><td data-title="\'APP.MODULES.MONITORING.NUMBER\'|translate" data-sortable="\'number\'" class="b-warning {{vm.getDelay(monitoring).class}}"><a dir=ltr data-ng-attr-title={{vm.getDelay(monitoring).title|pNumber}} data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span></a><br ng-if=monitoring.directive.dirNumber><a dir=ltr ng-if=monitoring.directive.dirNumber data-ui-sref="root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\'root.monitoring.monitoring-details\'})"><span data-translate=APP.MODULES.DIRECTIVE.NUMBER></span>: <span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title="\'APP.MODULES.MONITORING.STEP\'|translate" data-sortable="\'currentStepId\'" data-ng-bind="monitoring.currentStep.title "></td><td data-title="(\'APP.MODULES.MONITORING.DATE\'|translate)" data-sortable="\'createDate\'"><div data-ng-show=monitoring.contract.contractDate data-ng-bind="\'قرارداد:\' + (monitoring.contract.contractDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.createDate data-ng-bind="\'ایجاد:\' + (monitoring.createDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.monitoringDate data-ng-bind="\'بازدید:\' + (monitoring.monitoringDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.lastTransitionDate data-ng-bind="\'   عملیات:\' + (monitoring.lastTransitionDate|jDate:\'jYY/jM/jD\')"></div></td><td data-title="\'APP.MODULES.MONITORING.EXPERTS\'|translate" data-sortable="\'userMonitorings.lmsUser.username\'"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind="\'، \' + monitoring.userMonitorings[1].lmsUser.name" ng-if=monitoring.userMonitorings[1]></span><br ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=vm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span><br ng-if=monitoring.finalApproverUser><span ng-if=monitoring.finalApproverUser><span data-translate=APP.MODULES.CONTRACT.MONITORING.APPROVER></span>: <span data-ng-bind=monitoring.finalApproverUser.name></span></span></td><td data-title="\'APP.MODULES.MONITORING.COMPANY\'|translate" data-sortable="\'contract.companyName\'" data-ng-bind=monitoring.contract.companyName></td><td data-title="\'APP.MODULES.MONITORING.AMOUNT\'|translate" data-sortable="\'contract.totalAmount\'" data-ng-attr-title="{{monitoring.contract.totalAmount|pCurrency:\'A\'}}"><a dir=ltr data-ng-attr-title={{monitoring.contract.number|pNumber}} data-ng-click=vm.openDetailsModal(monitoring.contract.id,true)><span data-ng-bind="(monitoring.contract.totalAmount|pCurrency:\'R\')"></span></a></td><!--<td data-title="\'APP.MODULES.CONTRACT.NUMBER\'|translate"\r\n                                                data-sortable="\'contract.number\'">\r\n                                                 <a dir="ltr" ng-attr-title="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}"\r\n                                                    data-ui-sref="root.contract-details({contractId:monitoring.contract.id})">\r\n                                                     <span data-ng-bind="monitoring.contract.number|pNumber"></span>\r\n                                                 </a>\r\n                                                <a dir="ltr"\r\n                                                   data-ng-attr-title="{{monitoring.contract.number|pNumber}}"\r\n                                                   data-ng-click="vm.openDetailsModal(monitoring.contract.id,true)">\r\n                                                    <span data-ng-bind="(monitoring.contract.number|pNumber|limitTo:5)+\'...\'"></span>\r\n                                                </a>\r\n                                            </td>--><!-- <td data-title="\'APP.MODULES.DIRECTIVE.NUMBER\'|translate"\r\n                                                 data-sortable="\'contract.directive.number\'">\r\n                                                 <a dir="ltr"\r\n                                                    data-ng-attr-title="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}"\r\n                                                    data-ui-sref="root.directive.details({directiveId:monitoring.contract.directive.id})">\r\n                                                     <span data-ng-bind="monitoring.contract.directive.number|pNumber"></span>\r\n                                                 </a>\r\n                                             </td>--><td data-title="\'APP.MODULES.MONITORING.PLACE\'|translate" data-sortable="\'payerBranch\'"><span data-ng-bind=monitoring.contract.province.title></span><br data-ng-if=monitoring.contract.branch><span data-ng-if=monitoring.contract.branch data-ng-bind=monitoring.contract.branch.title></span></td><td data-title="\'\'"><a class="btn btn-sm text-info" title="{{\'APP.MODULES.MONITORING.FLOW_VIEW.TITLE\'|translate}}" ng-click=vm.openFlowModal(monitoring.id)><span class="icon pe-icon pe-7s-shuffle f-19 f-bold"></span> </a><a class="btn btn-sm text-highlight" title="{{\'APP.ACTIONS.DOWNLOAD_ALL\'|translate}}" ng-href="{{\'api/monitoring/\'+monitoring.id+\'/getAllFilesZipped/\' + monitoring.number +\'.zip\'}}" target=_blank download={{monitoring.number}}.zip><span class="icon pe-icon pe-7s-download f-19 f-bold"></span> </a><i class="icon pe-icon pe-7s-trash f-19 f-bold text-danger cursor-pointer" title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-class="{\'disabled\': monitoring.deleteDisabled}" data-ng-show="monitoring.ownerUsername === vm.currentUser.username" ng-click=vm.deleteMonitoring(monitoring)></i></td></tr></table></div></div><hr><div class=pane-body ng-show=vm.showGuidance><div class=search-container><h4 data-translate=GUIDANCE></h4><hr><div class="row guidance"><div class="col-md-1 pull-right"><b>بخش اقتصادی:</b></div><div class="col-md-11 pull-right"><div class="col-md-2 pull-right" data-ng-repeat="section in vm.economicSections"><img data-ng-src=assets/images/section-icons/{{section.id}}.png alt="" width=25> <span data-ng-bind=section.name></span></div></div></div><div class="row guidance"><div class="col-md-1 pull-right"><b>نوع طرح:</b></div><div class="col-md-11 pull-right"><div class="col-md-2 pull-right text-center" data-ng-repeat="planType in vm.planTypes"><div class="{{planType.key}} plan-type" data-ng-bind=planType.title></div></div><div class="col-md-2 pull-right text-center"><div class="default plan-type" data-translate=APP.SHARE.UNDEFINED></div></div></div></div><div class="row guidance"><div class="col-md-1 pull-right"><b>توقف در کارتابل:</b></div><div class="col-md-11 pull-right"><div class="col-md-2 pull-right text-center" data-ng-repeat="warning in vm.warnings" style="height: 25px;vertical-align: middle"><div class="monitoring-warning {{warning.key}}" data-ng-bind=warning.title></div></div></div></div></div></div></div></div></div></section></div></div></div>'),
t.put("app/components/monitoring/monitoring.html",'<div class="container-fluid monitoring" tabindex=1000 data-ng-keydown=vm.keyDown($event) auto-focus=true><!--<back-button></back-button>--><h2 class=plan-title><span data-ng-bind="(\'APP.MODULES.MONITORING.TITLE\'|translate) + \' شماره \'"></span> <span data-ng-bind=vm.monitoring.number|pNumber class=ltr-number></span> <span data-ng-bind="\'(\'"></span> <span data-translate=APP.MODULES.MONITORING.EXPERTS></span>: <span data-ng-bind=vm.monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind="\'، \' + vm.monitoring.userMonitorings[1].lmsUser.name" ng-show=vm.monitoring.userMonitorings[1]></span> <span data-ng-bind="\')\'"></span></h2><h4 class=panel-subtitle>ایجاد شده در <span data-ng-bind="vm.monitoring.createDate|jDate:\'jD jMMMM jYY ساعت H:mm\'"></span> <span ng-if="vm.monitoring.organizationLevel===\'STAFF\'">در اداره نظارت بر اعطای تسهیلات </span><span ng-if="vm.monitoring.organizationLevel===\'PROVINCE\'">در استان مربوطه </span><span ng-if="vm.monitoring.organizationLevel===\'BRANCH\'">در شعبه مربوطه </span><!--hide buttons when monitoring from convert debit--> <span data-ng-if=!vm.fromConvertDebit><button type=button class="btn btn-success pull-left" data-ng-if="vm.monitoring.currentStep.name ==\'created\' && vm.isMyMission()" data-ng-click=vm.accept()><span class="fa fa-play"></span> <span data-translate=APP.ACTIONS.START></span></button><!--ui-sref="monitoring-print({monitoringId:vm.monitoringId})"--> <a class="btn btn-primary pull-left" data-ng-href=api/report/monitoringReport/{{vm.monitoring.id}}/report_{{vm.monitoring.number}}.PDF target=_blank data-ng-if="vm.monitoring.currentStep.id > 1"><i class="fa fa-print"></i> <span data-translate=APP.MODULES.MONITORING.PRINT>‌</span> </a><a class="btn btn-warning pull-left m-l-1" data-ng-href=api/report/monitoringReportCustomized/{{vm.monitoring.id}}/report_{{vm.monitoring.number}}.PDF target=_blank data-ng-if="vm.monitoring.currentStep.id > 1"><i class="fa fa-print"></i> <span data-translate=APP.MODULES.MONITORING.PRINTCUSTOMIZED>‌</span> </a>&nbsp; <button class="btn btn-warning-alt pull-left m-l-1" data-ng-click=vm.cancelFinalized() data-ng-if="vm.monitoring.currentStep.finalized && vm.monitoring.currentStep.id != 1"><i class="fa fa-shield"></i> <span data-translate=APP.MODULES.MONITORING.CANCEL>‌</span></button> &nbsp; <button class="btn btn-warning-alt pull-left m-l-1" data-ng-click=vm.deleteMonitoring() data-ng-if="vm.monitoring.currentStep.name ==\'created\'"><i class="fa fa-remove"></i> <span data-translate=APP.ACTIONS.REMOVE>‌</span></button></span></h4><div class=row><!-- sidebar monitoring steps --><!--hide sidebar menu when monitoring from convert debit--><div class="col-xs-1 pull-right p-0 screen-only custom-sidebar-parent" data-ng-if=!vm.fromConvertDebit><div class=module-wrapper><section class=module><div class="module-inner p-0"><div class=module-content><div class="module-content-inner p-t-0 p-b-0"><nav class="navbar custom-sidebar screen-only"><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.monitoring-details\'), \'done\':vm.stepStatus.details, \'incomplete\':!vm.stepStatus.details}"><a ui-sref=root.monitoring.monitoring-details({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/details.png><div data-translate=APP.MODULES.MONITORING.DETAILS></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.contract\'),\'done\':vm.stepStatus.contract, \'incomplete\':!vm.stepStatus.contract}"><a ui-sref=root.monitoring.contract({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/contract.png><div data-translate=APP.MODULES.CONTRACT.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.preConditions\'),\'done\':vm.stepStatus.preConditions, \'incomplete\':!vm.stepStatus.preConditions}"><a ui-sref=root.monitoring.preConditions({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/preConditions.png><div data-translate=APP.MODULES.MONITORING.PRECONDITIONS.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.license\'),\'done\':vm.stepStatus.license, \'incomplete\':!vm.stepStatus.license}"><a ui-sref=root.monitoring.license({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/license.png><div data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.invoice\'), \'done\':vm.stepStatus.invoice, \'incomplete\':!vm.stepStatus.invoice}"><a ui-sref=root.monitoring.invoice({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/invoice.png><div data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.payments\'), \'done\':vm.stepStatus.payments, \'incomplete\':!vm.stepStatus.payments}"><a ui-sref=root.monitoring.payments({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/payment.png><div data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.progress\'), \'done\':vm.stepStatus.progress, \'incomplete\':!vm.stepStatus.progress}"><a ui-sref=root.monitoring.progress({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/progress.png><div data-translate=APP.MODULES.MONITORING.PROGRESS.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.assurance\'), \'done\':vm.stepStatus.assurance, \'incomplete\':!vm.stepStatus.assurance}"><a ui-sref=root.monitoring.assurance({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/assurance.png><div data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.lat-long\'), \'done\':vm.stepStatus.latlong, \'incomplete\':!vm.stepStatus.latlong}"><a ui-sref=root.monitoring.lat-long({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/lat-long.png><div data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.checkList\'), \'done\':vm.stepStatus.checkList, \'incomplete\':!vm.stepStatus.checkList}"><a ui-sref=root.monitoring.checkList({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/checkList.png><div data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></div></a><hr></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.conflict\'), \'done\':vm.stepStatus.conflict, \'incomplete\':!vm.stepStatus.conflict}"><a ui-sref=root.monitoring.conflict({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/conflict.png><div data-translate=APP.MODULES.MONITORING.CONFLICT.TITLE></div></a><hr></div><div class="text-center pull-right mid-complete" ng-class="{\'active\':vm.isActive(\'root.monitoring.trace\')}" data-ng-if="vm.monitoring.currentStep.id > 2 "><a ui-sref=root.monitoring.trace({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/trace.png><div data-translate=APP.MODULES.MONITORING.MONITORING_TRACE></div></a></div><div class="text-center pull-right" ng-class="{\'active\':vm.isActive(\'root.monitoring.comment\'), \'done\':!vm.getMine(), \'incomplete\':vm.getMine()}" data-ng-if="vm.monitoring.currentStep.name !=\'created\' && vm.monitoring.currentStep.name !=\'finalHeadAccepted\'"><a ui-sref=root.monitoring.comment({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/comment.png><div data-translate=APP.MODULES.MONITORING.ACCEPT_REJECT></div></a></div></nav></div></div></div></section></div></div><!-- main section --><div class="col-xs-11 pull-right main-content-parent col-offset-right-1"><!-- top nav monitoring digest _ This is only for print--><div class="row print-only"><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-content><div class="module-content-inner p-t-0 p-b-0"><table class="table table-bordered"><tr><th>وضعیت</th><th>شماره قرارداد</th><th>نام متقاضی</th><th>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th><th>آخرین عملیات</th></tr><tr><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td data-ng-bind=vm.monitoring.contract.companyName></td><td data-ng-bind="(vm.monitoring.contract.planType || \'نامشخص\')+\'/\'+(vm.monitoring.contract.economicSection.name || \'نامشخص\')"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td><td data-ng-bind="(vm.lastProcess.transition.name|monitoringDefinition|translate) + \'،\' + vm.lastProcess.user.name + \' در  \' + (vm.lastProcess.createDate|jDate:\'hh:mm jYY/jM/jD \'|pNumber)"></td></tr></table></div></div></div></section></div></div><!-- top nav monitoring digest _ This would be disappeared while printing--><div class="row screen-only"><div class="module-wrapper col-xs-12 pull-right"><section class=module><div class="module-content-inner p-1"><div class=pane-body><fieldset data-ng-disabled=!vm.allowedAction><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.STEP></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.LEVEL></i><br><label class=inline data-ng-bind="vm.monitoring.currentStep.title + \'/\' + (vm.monitoring.organizationLevel|userLevel)"></label></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.CONTRACT.NUMBER></i><br><a class=ltr-number data-ng-bind=vm.monitoring.contract.number|pNumber data-ng-click=vm.openDetailsModal(vm.monitoring.contract.id,true)></a></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.APPLICANT_NAME></i><br><b data-ng-bind=vm.monitoring.contract.companyName></b></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.PLAN_TYPE></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.ECONOMIC_SECTION></i><br><b data-ng-bind="(vm.monitoring.contract.planType || \'نامشخص\')+\'/\'+(vm.monitoring.contract.economicSection.name || \'نامشخص\')"></b></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></i><br><a ui-sref="root.directive.details({directiveId: vm.monitoring.directive.dirNumber,monitoringId:vm.monitoring.id, monitoringState: vm.currentState})" ng-show=vm.monitoring.directive.dirNumber><span data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></span> </a><i data-ng-hide=vm.monitoring.directive.dirNumber class="icon pe-icon pe-7s-note f-17 cursor-pointer" ng-click=vm.openDirectiveModal()></i></div><div class="monitoring-info col-lg-2 pull-right"><i class=control-label data-translate=APP.MODULES.MONITORING.LAST_OPERATION></i><br><b ng-click=vm.openFlowModal() ng-show=vm.lastProcess.transition data-ng-bind="(vm.lastProcess.transition.name|monitoringDefinition|translate) +\r\n                                                     \'،\' + vm.lastProcess.user.name" data-ng-attr-title="{{vm.lastProcess.createDate|jDate:\'hh:mm jYY/jM/jD \'|pNumber}}"></b></div></fieldset></div></div></section></div><div class="col-xs-12 pull-right" data-ng-show=vm.monitoring.firstDescription><div class="alert warning"><!--<a class="close pull-left"\r\n                           uib-tooltip="بستن"\r\n                           data-ng-click="vm.monitoring.firstDescription=\'\'"\r\n                           aria-label="close" title="close">×</a>--> <strong>پیام!</strong><br><br><label>{{vm.monitoring.firstDescription}}</label></div></div></div><!-- main container --><div class="row negative-margin-print"><div class="module-wrapper col-xs-12"><section class="module monitoring"><!-- where sub-states come --><div ui-view></div><!-- button nav for next and previous page and directive --><!--hide this buttons when monitoring from convert debit--><div class="module-footer text-center screen-only" data-ng-if=!vm.fromConvertDebit><div class=row><div class="col-xs-12 pull-right"><!-- next button --> <button class="btn btn-default-alt pull-left" ng-click=vm.next() data-ng-disabled="!vm.hasNext() || vm.loading">صفحه بعدی&nbsp;&nbsp; <i class="icon pe-icon pe-7s-back-2 f-17"></i></button><!-- flow modal --> <button class="btn btn-primary-alt" ng-click=vm.openFlowModal()><i class="fa fa-refresh"></i> <span data-translate=APP.MODULES.MONITORING.FLOW_VIEW.TITLE></span></button><!-- Directive button --><!--<div class="btn-group" uib-dropdown style="margin: auto">\r\n                                        <a id="split-button" type="button" class="btn btn-primary"\r\n                                           ng-if="vm.monitoring.directive.dirNumber"\r\n                                           ui-sref="root.directive.details({directiveId: vm.monitoring.directive.dirNumber, monitoringId:vm.monitoring.id, monitoringState: vm.currentState})">\r\n                                            مصوبه\r\n                                        </a>\r\n                                        <a id="split-button-empty" type="button" class="btn btn-primary"\r\n                                           ng-if="!vm.monitoring.directive.dirNumber"\r\n                                           ng-click="vm.openDirectiveModal()">\r\n                                            <span class="icon pe-icon pe-7s-attention f-14"></span>\r\n                                            مصوبه\r\n                                        </a>\r\n                                        <button type="button" class="btn btn-primary" uib-dropdown-toggle>\r\n                                            <span class="caret"></span>\r\n                                            <span class="sr-only">Split button!</span>\r\n                                        </button>\r\n                                        <ul class="dropdown-menu" uib-dropdown-menu role="menu"\r\n                                            aria-labelledby="split-button">\r\n                                            <li role="menuitem">\r\n                                                <a class="cursor-pointer" ng-click="vm.openDirectiveModal()">\r\n                                                    <i class="icon pe-icon pe-7s-note f-17 text-primary pull-right"></i>\r\n                                                    <span class="text-primary">تغییر شماره مصوبه</span>\r\n                                                </a>\r\n\r\n                                            </li>\r\n                                            <li class="divider"></li>\r\n                                            <li role="menuitem" data-ng-if="vm.monitoring.directive.dirNumber"><a\r\n                                                    class="cursor-pointer">\r\n                                                <i class="icon pe-icon pe-7s-pen f-17 pull-right"></i>\r\n                                                <span data-ng-bind="vm.monitoring.directive.dirNumber|pNumber"></span>\r\n                                            </a></li>\r\n                                            <li role="menuitem" data-ng-if="!vm.monitoring.directive.dirNumber"><a\r\n                                                    class="cursor-pointer">\r\n                                                <i class="icon pe-icon pe-7s-attention f-17 text-warning pull-right"></i>\r\n                                                <span data-translate="NO_DIRECTIVE"></span>\r\n                                            </a></li>\r\n                                        </ul>\r\n                                    </div>--> <a id=directive-button type=button class="btn btn-primary" ng-if=vm.monitoring.directive.dirNumber ui-sref="root.directive.details({directiveId: vm.monitoring.directive.dirNumber, monitoringId:vm.monitoring.id, monitoringState: vm.currentState})">مصوبه </a><a id=directive-button-empty type=button class="btn btn-primary" ng-if=!vm.monitoring.directive.dirNumber ng-click=vm.openDirectiveModal()><span class="icon pe-icon pe-7s-attention f-14"></span> مصوبه </a><!-- experts modal --> <button class="btn btn-primary-alt" ng-click=vm.openExpertsModal()><i class="fa fa-user-secret"></i> <span data-translate=APP.MODULES.MONITORING.USER_MONITORINGS.TITLE></span></button><!-- previous button --> <button class="btn btn-default-alt pull-right" ng-click="vm.previous() || vm.loading" data-ng-disabled=!vm.hasPrevious()><i class="icon pe-icon pe-7s-next-2 f-17 pull-right"></i> &nbsp;&nbsp; صفحه قبلی</button></div></div></div></section></div></div></div></div></div>'),t.put("app/components/monitoring/monitoring.print.html",'<table class="table table-bordered" style="width: 100%; background-color: whitesmoke;padding: 5px 0 5px 0"><thead style="display: table-header-group"><tr data-ng-if=vm.loading class=screen-only style="font-size: 10px"><td ng-class="{\'bg-success\':!vm.monitoringLoading, \'bg-warning\':vm.monitoringLoading}">جزئیات</td><td ng-class="{\'bg-success\':!vm.searchMonitoringLoading, \'bg-warning\':vm.searchMonitoringLoading}">قراردادها</td><td ng-class="{\'bg-success\':!vm.getInvestmentCostMonitoringLoading, \'bg-warning\':vm.getInvestmentCostMonitoringLoading}">هزینه‌های سرمایه‌گذاری</td><td ng-class="{\'bg-success\':!vm.searchMonitoringLatLongLoading, \'bg-warning\':vm.searchMonitoringLatLongLoading}">مکان جغرافیایی</td><td ng-class="{\'bg-success\':!vm.getDirLicenseConflictsLoading, \'bg-warning\':vm.getDirLicenseConflictsLoading}">مجوزها</td><td ng-class="{\'bg-success\':!vm.getInvoiceConflictLoading, \'bg-warning\':vm.getInvoiceConflictLoading}">پیش‌فاکتور/پیش‌قرارداد</td><td ng-class="{\'bg-success\':!vm.getPaymentConflictLoading, \'bg-warning\':vm.getPaymentConflictLoading}">پرداخت‌ها</td><td ng-class="{\'bg-success\':!vm.getAssuranceConflictLoading, \'bg-warning\':vm.getAssuranceConflictLoading}">وثایق</td><td data-ng-bind=vm.progress()|pPercent></td></tr><tr><th data-ng-attr-colspan={{vm.maxCols}}><div class=text-center><img src=assets/images/tt-bank-1.png width=40 alt=""><h5>اداره نظارت بر اعطای تسهیلات</h5><h3 class=plan-title><span data-ng-bind="(\'APP.MODULES.MONITORING.TITLE\'|translate) + \' شماره \'"></span> <span data-ng-bind=vm.monitoring.number|pNumber class=ltr-number></span> <span data-ng-bind="\'(\'"></span> <span data-translate=APP.MODULES.MONITORING.EXPERTS></span>: <span data-ng-bind=vm.monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind="\'، \' + vm.monitoring.userMonitorings[1].lmsUser.name" ng-show=vm.monitoring.userMonitorings[1]></span> <span data-ng-bind="\')\'"></span></h3></div></th></tr></thead><tfoot style="display: table-footer-group"><tr><td data-ng-attr-colspan={{vm.maxCols}} style="padding: 5px">استخراج شده از سامانه جامع نظارت بر اعطای تسهیلات بانک توسعه تعاون در تاریخ <span data-ng-bind=vm.today|jDate></span> <button class="btn btn-lg btn-info pull-left m-b-1" style="position: fixed; top: 1rem;left:2rem;z-index: 30" data-ng-disabled=vm.loading onclick=window.print()><i class="fa fa-print"></i></button></td></tr></tfoot><tbody data-ng-hide=vm.monitoringLoading><tr class=text-center><th>وضعیت</th><th>شماره قرارداد</th><th colspan=2>نام متقاضی</th><th colspan=2>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th><th colspan=3>آخرین عملیات</th></tr><tr class=text-center><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td colspan=2 data-ng-bind=vm.monitoring.contract.companyName></td><td colspan=2 data-ng-bind="(vm.monitoring.contract.planType || \'نامشخص\')+\'/\'+(vm.monitoring.contract.economicSection.name || \'نامشخص\')"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td><td colspan=3 data-ng-bind="(vm.lastProcess.transition.name|monitoringDefinition|translate) + \'،\' + vm.lastProcess.user.name + \' در  \' + (vm.lastProcess.createDate|jDate:\'hh:mm jYY/jM/jD \'|pNumber)"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody data-ng-hide=vm.monitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h2></th></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.DATE></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PROVINCE></th><th colspan=4 data-translate=APP.MODULES.MONITORING.BRANCH></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.monitoringDate|jDate></td><td colspan=3 data-ng-bind=vm.monitoring.contract.province.title></td><td colspan=4 data-ng-bind=vm.monitoring.payerBranch.title></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PLAN_TYPE></th><th colspan=4 data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.branchChiefInMonitoringTime.name></td><td colspan=3 data-ng-bind=vm.monitoring.planType|planType></td><td colspan=4 data-ng-bind=vm.monitoring.activitySubject></td></tr><tr><th colspan=10 data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS></th></tr><tr><td colspan=10 data-ng-bind=vm.monitoring.projectLocationAddress></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody data-ng-hide=vm.monitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT.DIR_LIST></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONCLUDED_CONTRACT_NUMBER></th></tr><tr class=text-center data-ng-repeat="dircontract in vm.dirContracts"><td data-ng-bind=dircontract.type.name></td><td data-ng-bind="dircontract.totalAmount|pCurrency:\'R\'" data-ng-attr-title="{{dircontract.totalAmount|pCurrency:\'A\'}}"></td><td data-ng-bind=dircontract.interestRate|pPercent></td><td data-ng-bind=dircontract.installmentCount|pNumber></td><td data-ng-bind=dircontract.participationDuration|pNumber></td><td data-ng-bind=dircontract.respiratoryPeriod|pNumber></td><td data-ng-bind=dircontract.installmentInterval|pNumber></td><td data-ng-bind="dircontract.interestAmount|pCurrency:\'R\'" data-ng-attr-title="{{dircontract.interestAmount|pCurrency:\'A\'}}"></td><td data-ng-bind="(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\'R\'" data-ng-attr-title="{{(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\'A\'}}"></td><td><span ng-if=dircontract.contract.number data-ng-bind=dircontract.contract.number|pNumber class=ltr-number id=concludedContractNumber></span></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td data-ng-bind="(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\'R\'" data-ng-attr-title="{{(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\'A\'}}"></td><td></td><td data-ng-show=vm.allowedActions></td><td data-ng-show=vm.allowedActions></td></tr></tbody><tbody data-ng-hide=vm.searchMonitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.DATE></th><th colspan=2 class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></th><th colspan=2 class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.CONTRACT.NUMBER></th></tr><tr class=text-center data-ng-repeat="contract in vm.contracts" data-ng-class="{\'OrangeBG\': vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet(),\r\n                            \'GreenBG\': vm.isMonitoringContract(contract) && vm.isMonitoringContractSet()}"><td data-ng-bind=contract.contractType></td><td data-ng-bind="(contract.totalAmount|pCurrency:\'R\')" data-ng-attr-title="{{contract.totalAmount|pCurrency:\'A\'}}"></td><td data-ng-bind=contract.interestRate|pPercent></td><td data-ng-bind=contract.contractDate|jDate></td><td colspan=2 data-ng-bind="contract.remainingInCurrent|pCurrency:\'R\'"></td><td colspan=2 data-ng-bind="contract.remainingInNonCurrent|pCurrency:\'R\'"></td><td data-ng-bind=contract.respiratoryPeriod|pNumber></td><td data-ng-bind=contract.number|pNumber class=ltr-number></td></tr><!-- sum row --><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumContractTotalAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumContractTotalAmount|pCurrency:\'A\'}}"></td><td></td><td></td><td colspan=2 data-ng-bind="(vm.sumRemainingInCurrent|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumRemainingInCurrent|pCurrency:\'A\'}}"></td><td colspan=2 data-ng-bind="(vm.sumRemainingInNonCurrent|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumRemainingInNonCurrent|pCurrency:\'A\'}}"></td><td></td><td></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h2></th></tr><tr><th colspan=1>#</th><th colspan=5 data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.CONDITION_NAME st-sort=name></th><th colspan=4 data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS></th></tr><tr data-ng-repeat="item in vm.preConditions"><td colspan=1 data-ng-bind="$index + 1"></td><td colspan=5 data-ng-bind=item.dirCondition.condition></td><td colspan=4 data-ng-bind=item.reply|conditionStatus></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.NAME></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.NUMBER></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISSUE_DATE></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISSUED_FROM></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.EXPIRE_DATE></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISINTHENAMEOF_APPLICANT></th><th colspan=4 class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.CONFLICTS></th></tr><tr class=text-center data-ng-class="{\'OrangeBG\':!monitoringLicense.id && !vm.toggleEdit[$index]}" data-ng-repeat="monitoringLicense in vm.monitoringLicenses"><td><i data-ng-bind=monitoringLicense.dirLicense.name></i></td><td><i data-ng-bind=monitoringLicense.number|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=monitoringLicense.issuingDate|jDate data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=monitoringLicense.issuedFrom data-ng-if=!vm.toggleEdit[$index]></i></td><td data-ng-class="{\'RedBG\':monitoringLicense.hasConflict}" data-ng-bind=monitoringLicense.expireDate|jDate></td><td data-ng-bind=monitoringLicense.isInTheNameOfApplicant|trueFalse|translate></td><td colspan=4 data-ng-class="{ \'RedBG\': monitoringLicense.comment && monitoringLicense.comment.length}"><i data-ng-bind=monitoringLicense.comment data-ng-if=!vm.toggleEdit[$index]></i></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></h2></th></tr><!-- heading row: --><tr><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th colspan=2 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th colspan=2 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th></tr><!-- :heading row end --><!-- repeat rows: --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat="invoice in vm.invoices"><td data-ng-bind=invoice.investmentAction.name></td><td data-ng-bind=invoice.number|pNumber></td><td data-ng-bind=invoice.date|jDate|pNumber></td><td data-ng-bind=invoice.description|pNumber colspan=2></td><td data-ng-bind=invoice.unit></td><td data-ng-bind="(invoice.price|pCurrency:\'R\')" colspan=2></td><td data-ng-bind=invoice.invoiceBasedCount|pNumber></td><td data-ng-bind=invoice.monitoringBasedCount|pNumber></td></tr><!-- :repeat rows end --><!-- empty row: --><tr ng-hide=vm.invoices.length class=text-center><td class=text-danger colspan=10 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr><!-- :empty row end --></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.TITLE></h4></th></tr><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVESTMENT_ACTION></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.DIRECTIVE_BASE></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVOICE_BASE></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.MONITOR_BASE></th></tr><tr class=text-center data-ng-repeat="item in vm.invoiceConflicts"><td data-ng-bind=item.investmentAction.name></td><td colspan=3 data-ng-bind="(item.directiveBased|pCurrency:\'R\')" title="{{item.directiveBased|pCurrency:\'A\'}}"></td><td colspan=3 data-ng-class="{\'RedBG\':item.directiveBased > item.invoiceBased }" data-ng-bind="(item.invoiceBased|pCurrency:\'R\')" title="{{item.invoiceBased|pCurrency:\'A\'}}"></td><td colspan=3 data-ng-class="{\'RedBG\':item.directiveBased > item.monitoringBased }" data-ng-bind="(item.monitoringBased|pCurrency:\'R\')" title="{{item.monitoringBased|pCurrency:\'A\'}}"></td></tr><tr class="text-center BlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td colspan=3 data-ng-bind="vm.sumDirectiveBased |pCurrency:\'R\'" title="{{vm.sumDirectiveBased|pCurrency:\'A\'}}"></td><td colspan=3 data-ng-bind="vm.sumInvoiceBased |pCurrency:\'R\'" data-ng-class="{\'DarkRedFill\':vm.sumInvoiceBased < vm.sumDirectiveBased}" title="{{vm.sumInvoiceBased|pCurrency:\'A\'}}"></td><td colspan=3 data-ng-bind="vm.sumMonitoringBased |pCurrency:\'R\'" data-ng-class="{\'DarkRedFill\':vm.sumMonitoringBased < vm.sumDirectiveBased}" title="{{vm.sumMonitoringBased|pCurrency:\'A\'}}"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION rowspan=2></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER></th><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_AMOUNT></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE></th><th class=text-center rowspan=2 colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.SUM></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat="payment in vm.payments"><td data-ng-bind=payment.investmentAction.name></td><td data-ng-bind=payment.chequeDate|jDate|pNumber></td><td data-ng-bind=payment.chequeNumber|pNumber></td><td data-ng-bind="(payment.bankSharedChequeAmount|pCurrency:\'R\')"></td><td data-ng-bind="(payment.applicantSharedChequeAmount|pCurrency:\'R\')"></td><td data-ng-bind="((payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\'R\')" colspan=2></td><td data-ng-class="{\'RedBG\': vm.payeeConflict(payment)}" data-ng-bind=payment.payee|payee></td><td data-ng-class="{\'RedBG\': payment.conflictDescription && payment.conflictDescription.length}" colspan=2 data-ng-bind=payment.conflictDescription></td></tr><!-- sum row --><tr class="text-center LightBlueBG" ng-show=vm.payments.length><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td></td><td></td><td data-ng-bind="vm.sumBankSharedChequeAmount |pCurrency:\'R\'" data-ng-attr-title="{{vm.sumBankSharedChequeAmount |pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumApplicantSharedChequeAmount |pCurrency:\'R\'" data-ng-attr-title="{{vm.sumApplicantSharedChequeAmount |pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumTotalAmount |pCurrency:\'R\'" colspan=2 data-ng-attr-title="{{vm.sumTotalAmount |pCurrency:\'A\'}}"></td><td></td><td colspan=2></td></tr><!-- empty data notification row--><tr class=text-center data-ng-hide=vm.payments.length><td class=text-warning colspan=10 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.TITLE></h4></th></tr><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_BANK_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_BANK_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_APPLICANT_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENT_STEPS></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.ISSUEDCHEQUE_COUNT></th></tr><tr class=text-center data-ng-repeat="item in vm.paymentConflicts"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind="(item.directiveBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{item.directiveBasedBankShared|pCurrency:\'A\'}}"></td><td ng-class=vm.bankQouta[$index] colspan=2 data-ng-bind="(item.paymentBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{item.paymentBasedBankShared|pCurrency:\'A\'}}"></td><td colspan=2 data-ng-bind="(item.directiveBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{item.directiveBasedApplicantShared|pCurrency:\'A\'}}"></td><td ng-class=vm.applicantQouta[$index] colspan=2 data-ng-bind="(item.paymentBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{item.paymentBasedApplicantShared|pCurrency:\'A\'}}"></td><td data-ng-bind=item.paymentStepCount|pNumber></td><td ng-class=vm.countQouta[$index] data-ng-bind=item.chequeCount|pNumber></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumDirectiveBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumDirectiveBasedBankShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumPaymentBasedBankShared|pCurrency:\'R\')" colspan=2 data-ng-class="{\'DarkRedFill\': vm.sumPaymentBasedBankShared < vm.sumDirectiveBasedBankShared , \'DarkOrangeFill\': vm.sumPaymentBasedBankShared > vm.sumDirectiveBasedBankShared }" data-ng-attr-title="{{vm.sumPaymentBasedBankShared|pCurrency:\'A\'}}"></td><td ng-class=vm.applicantQouta[$index] colspan=2 data-ng-bind="(vm.sumDirectiveBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumDirectiveBasedApplicantShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumPaymentBasedApplicantShared|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumPaymentBasedApplicantShared|pCurrency:\'A\'}}" data-ng-class="{\'DarkRedFill\': vm.sumDirectiveBasedApplicantShared > vm.sumPaymentBasedApplicantShared }"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td data-ng-bind=(vm.sumChequeCount|pNumber) data-ng-class="{\'DarkRedFill\': vm.sumPaymentStepCount > vm.sumChequeCount }"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.PROGRESS.LIST></h2></th></tr><tr><th colspan=2 data-ng-bind="\'APP.MODULES.MONITORING.PROGRESS.INVESTMENT_ACTION\'|translate"></th><th colspan=2 data-ng-bind="\'APP.MODULES.MONITORING.PROGRESS.DIRECTIVE_BASE_AMOUNT\'|translate"></th><th colspan=2 data-ng-bind="\'APP.MODULES.MONITORING.PROGRESS.INVOICE_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\'|translate"></th><th colspan=2 data-ng-bind="\'APP.MODULES.MONITORING.PROGRESS.PAYMENT_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\'|translate"></th><th colspan=2 data-ng-bind="\'APP.MODULES.MONITORING.PROGRESS.PROGRESS_RATE\'|translate"></th></tr><tr class=text-center data-ng-repeat="progress in vm.progresses"><td colspan=2 data-ng-bind=progress.investmentAction.name></td><td colspan=2 data-ng-attr-title="{{progress.directiveBasedAmount|pCurrency:\'A\'}}" data-ng-bind="(progress.directiveBasedAmount|pCurrency:\'R\')"></td><td colspan=2 data-ng-attr-title="{{progress.invoiceBasedAmount|pCurrency:\'A\'}}" data-ng-bind="\'(\' + (progress.invoiceBasedToDirectiveBasedAmountRate|number:0|pPercent)  + \') \'\r\n                                 + (progress.invoiceBasedAmount|pCurrency:\'R\')" data-ng-class="{\'RedBG\':progress.invoiceBasedAmount < progress.directiveBasedAmount, \'GreenBG\':progress.invoiceBasedAmount >= progress.directiveBasedAmount}"></td><td colspan=2 data-ng-attr-title="{{progress.paymentBasedAmount|pCurrency:\'A\'}}" data-ng-bind="\'(\' + (progress.paymentBasedToDirectiveBasedAmountRate|number:0|pPercent) + \') \'\r\n                                + (progress.paymentBasedAmount|pCurrency:\'R\')" data-ng-class="{\'OrangeBG\':progress.paymentBasedAmount > progress.directiveBasedAmount, \'GreenBG\':progress.paymentBasedAmount == progress.directiveBasedAmount, \'RedBG\':progress.paymentBasedAmount < progress.directiveBasedAmount}"></td><td colspan=2 data-ng-bind=progress.progressRate|number:0|pPercent data-ng-class="{\'RedBG\':progress.progressRate < 100, \'GreenBG\':progress.progressRate >= 100}"></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate" colspan=2></td><td data-ng-bind="(vm.sumDirectiveBasedAmount|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumDirectiveBasedAmount|pCurrency:\'A\'}}"></td><td data-ng-bind="\'(\' + (vm.sumInvoiceToDirectivePercent|number:0|pPercent) + \') \'\r\n                            + (vm.sumInvoiceToDirective|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumInvoiceToDirective|pCurrency:\'A\'}}" colspan=2></td><td data-ng-bind="\'(\' + (vm.sumPaymentToDirectivePercent|number:0|pPercent) + \') \'\r\n                            + (vm.sumPaymentToDirective|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumPaymentToDirective|pCurrency:\'A\'}}" data-ng-class="{\'DarkOrangeFill\': vm.sumPaymentToDirective > vm.sumDirectiveBasedAmount, \'DarkRedFill\':vm.sumPaymentToDirective < vm.sumDirectiveBasedAmount}"></td><!--<td data-ng-bind="(vm.sumPaymentToDirectivePercent|number:0|pPercent)"></td>--><td data-ng-bind=(vm.sumProgressRate|number:0|pPercent) colspan=2 data-ng-class="{\'DarkRedFill\': vm.sumProgressRate < 100}"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></h2></th></tr><tr><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.ASSURANCE_TYPE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.EXPERT_VALUE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_PERCENT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_VALUE></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.MORTGAGED_VALUE></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT_DESCRIPTION></th></tr><!-- data row ng-repeat --><tr class=text-center data-ng-repeat="assurance in vm.assurances"><td data-ng-bind=assurance.assuranceType.type colspan=2></td><td data-ng-bind="(assurance.expertValue|pCurrency:\'R\')" data-ng-attr-title="{{assurance.expertValue|pCurrency:\'A\'}}"></td><td data-ng-bind=assurance.assuranceType.acceptedPercent|pPercent></td><td data-ng-bind="((assurance.expertValue * assurance.assuranceType.acceptedPercent/100)|pCurrency:\'R\')" colspan=2></td><td data-ng-bind="(assurance.mortgagedValue|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{assurance.mortgagedValue|pCurrency:\'A\'}}" data-ng-class="{\'RedBG\': assurance.mortgagedValue > (assurance.expertValue * assurance.assuranceType.acceptedPercent/100)}"></td><td data-ng-bind=assurance.conflictDescription colspan=2 data-ng-class="{\'RedBG\': assurance.conflictDescription}"></td></tr><!-- sum row --><tr class="text-center LightBlueBG" ng-show=vm.assurances.length><td data-ng-bind="\'APP.SHARE.SUM\'|translate" colspan=2></td><td data-ng-bind="(vm.sumExpertValue|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumExpertValue|pCurrency:\'A\'}}"></td><td>-</td><td data-ng-bind="(vm.sumAcceptedValue|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumAcceptedValue|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumMortgagedValue|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.sumMortgagedValue|pCurrency:\'A\'}}"></td><td colspan=2>-</td></tr><!-- empty row --><tr ng-hide=vm.assurances.length class=text-center><td colspan=6 class=text-danger><span data-translate=NOTHING_HAS_BEEN_SUBMITTED></span></td></tr></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.TITLE></h4></th></tr><!-- heading row --><tr class=text-center><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.ASSURANCE_TYPE></th><th class=text-center colspan=3 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIRECTIVE_CONDITION></th><th class=text-center colspan=3 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM_TAKEN_ASSURANCE_AMOUNT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIFFERENCE_AMOUNT></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-repeat="item in vm.assuranceConflicts"><td data-ng-bind=item.assuranceType.type colspan=2></td><td colspan=3><span data-ng-bind="(item.condition|conditionList) + \' \' +(item.dirAssuranceAmount|pCurrency:\'R\')" data-ng-show="(item.condition && item.dirAssuranceAmount) || item.condition == \'REST\'" data-ng-attr-title="{{item.dirAssuranceAmount|pCurrency:\'A\'}}"></span> <span data-ng-show=!item.condition>در مصوبه قید نشده است</span> <span data-ng-show="!item.dirAssuranceAmount && item.condition && item.condition !=\'REST\'">هنوز وثیقه‌ای ثبت نشده است</span></td><td class={{item.getConflict()}} colspan=3 data-ng-bind="(item.sumTakenAssuranceAmount|pCurrency:\'R\')" data-ng-attr-title="{{item.sumTakenAssuranceAmount|pCurrency:\'A\'}}"></td><td colspan=2 data-ng-bind="item.conflictAmount|pCurrency:\'R\'" data-ng-attr-title="{{item.conflictAmount ? (item.conflictAmount|pCurrency:\'A\'): \'-\'}}"></td></tr><tr class=text-center><td class=LightBlueBG data-ng-bind="\'APP.SHARE.SUM\'|translate" colspan=2></td><td class=LightBlueBG data-ng-bind="(vm.totalAmount|pCurrency:\'R\')" colspan=3 data-ng-attr-title="{{vm.totalAmount|pCurrency:\'A\'}}"></td><td class=LightBlueBG colspan=3 data-ng-class="{\'DarkRedFill\': vm.totalAmount>vm.sumOfSumTakenAssuranceAmount}" data-ng-bind="(vm.sumOfSumTakenAssuranceAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumOfSumTakenAssuranceAmount|pCurrency:\'A\'}}"></td><td class=LightBlueBG data-ng-bind="(vm.totalDifference|pCurrency:\'R\')" colspan=2 data-ng-attr-title="{{vm.totalDifference|pCurrency:\'A\'}}"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></h2></th></tr><tr><th data-translate=APP.MODULES.MONITORING.LAT_LONG.LATITUDE colspan=2></th><td data-ng-bind=vm.monitoring.latitude colspan=3></td><th data-translate=APP.MODULES.MONITORING.LAT_LONG.LONGITUDE colspan=2></th><td data-ng-bind=vm.monitoring.longitude colspan=3></td></tr><tr><th data-ng-attr-colspan={{vm.dimensions.length+1}}><h4>فواصل</h4></th></tr><tr><th data-translate=APP.MODULES.MONITORING.LAT_LONG.NUMBER></th><th ng-repeat="value in vm.dimensions|limitTo:9" data-ng-bind="(value.monitoring.number.split(\'-\')[value.monitoring.number.split(\'-\').length-1])|pNumber" class=ltr-number></th></tr><tr ng-repeat="title in vm.dimensions|limitTo:9"><th data-ng-bind=title.monitoring.number|pNumber class=ltr-number></th><td ng-repeat="value in vm.dimensions" data-ng-bind="(title.distance - value.distance)|makePositive|number|pDistance"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h2></th></tr><tr><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></th><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></th></tr><tr data-ng-repeat="item in vm.monitoringCheckList|checkList"><td data-ng-bind=item.checkList.content colspan=4></td><td data-ng-bind=item.checkListStatus|checkList colspan=2></td><td data-ng-bind=item.comment colspan=4></td></tr><tr><th colspan=10 data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></th></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.applicantPerformance|checkList></td></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.agentBranchPerformance|checkList></td></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.approverPerformance|checkList></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></th><td colspan=7 data-ng-bind=vm.monitoring.finalExpertComment></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style="background-color: white;color: white">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.CONFLICT.LIST></h2></th></tr><tr class=text-center><th class=text-center data-translate=APP.SHARE.INDEX></th><th class=text-center data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE colspan=4></th><th class=text-center data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION colspan=5></th></tr><tr class=text-center data-ng-repeat="conflict in vm.conflicts|orderBy:\'automatic\'" data-ng-class="{\'screen-only\':conflict.cleared}"><td data-ng-class="{\'OrangeBG\':!conflict.automatic,\r\n                                                \'GreenBG\':conflict.automatic && conflict.cleared,\r\n                                                \'RedBG\':conflict.automatic && !conflict.cleared}" data-ng-bind=$index+1|pNumber></td><td data-ng-bind=conflict.title colspan=4></td><td data-ng-bind=conflict.description colspan=5></td></tr><tr class=text-center data-ng-hide="vm.conflicts.length || vm.state !== \'calculated\'"><td colspan=10 class=text-success data-translate=NO_CONFLICT></td></tr><tr><td data-ng-repeat-start="item in vm.monitoring.userMonitorings" colspan=2 data-ng-bind=item.lmsUser.name></td><td data-ng-repeat-end="" colspan=2><img class="img-responsive print-images" ng-src={{vm.getSignUrl(item.lmsUser)}} alt="امضا ثبت نشده است"></td></tr></tbody></table>'),
t.put("app/components/plan-type/plan-type.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.ECONOMIC_SECTION.TITLE></h1><!-- Omitted code: plan type cannot be added manually for now --><div class=pull-left ng-if=false><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=!vm.toggleAdd><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><!-- :Omitted code --><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class="alert alert-warning alert-dismissible" role=alert><strong data-translate=Warning!></strong> <span data-translate="Plan type info"></span></div><!-- :Omitted code --><div class=pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create(vm.name)><div class=form-group><div class="col-sm-6 pull-right"><div class=row><label class="col-sm-1 control-label pull-right" data-translate=APP.SHARE.NAME></label><div class="col-sm-11 pull-right"><input class=form-control data-ng-model=vm.name placeholder=نام></div></div></div><div class="col-sm-4 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></div><!-- :Omitted code --><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-bind=item.title></span></td><td data-title="\'APP.MODULES.BASIC_INFO.PLAN_TYPE.PROVINCE_LIMIT\'|translate"><span data-ng-hide=item.toggle data-ng-bind=item.provinceLimit|pCurrency></span><div data-ng-show=item.toggle class=form-group><input class=form-control data-ng-model=item.provinceLimit ui-number-mask=0 dir=ltr uib-tooltip="{{item.provinceLimit|pCurrency:\'A\'}}" tooltip-trigger="\'focus\'"></div></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel="item.toggle = !item.toggle"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/province/province-cities.html",'<div class=container-fluid><back-button></back-button><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span data-translate=APP.MODULES.BASIC_INFO.PROVINCE.CITY.LIST></span> <span data-ng-bind="\' استان \'"></span> <span data-ng-bind="vm.province.title "></span></h1><div class=pull-left><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=!vm.toggleAdd><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create()><div class=form-group><div class="col-sm-6 pull-right"><div class=row><label class="col-sm-1 control-label pull-right" data-translate=APP.SHARE.NAME></label><div class="col-sm-11 pull-right"><input class=form-control data-ng-model=vm.city.name placeholder=نام></div></div></div><div class="col-sm-4 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.ID\'|translate" data-ng-bind=item.id|pNumber></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle cancel="item.toggle = !item.toggle" has-delete=true delete=vm.delete(item.id)></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/province/province-list.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.BASIC_INFO.PROVINCE.TITLE></h1><div class=pull-left><a class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAdd = !vm.toggleAdd" data-ng-show=false><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class="form form-horizontal" ng-submit=vm.create()><div class=row><div class=form-group><div class="col-sm-8 pull-right"><label class="col-sm-1 control-label pull-right" data-translate=APP.SHARE.NAME></label><div class="col-sm-3 pull-right"><input class=form-control data-ng-model=vm.province.title placeholder=نام></div><label class="col-sm-1 control-label pull-right" data-translate=APP.MODULES.BASIC_INFO.PROVINCE.CODE></label><div class="col-sm-3 pull-right"><input class=form-control type=number data-ng-model=vm.province.code placeholder=کد></div><!--<label class="col-sm-1 control-label pull-right"\r\n                                                       data-translate="APP.MODULES.BASIC_INFO.PROVINCE.REGION"></label>\r\n                                                <div class="col-sm-3 pull-right">\r\n                                                    <input class="form-control"\r\n                                                           type="number"\r\n                                                           data-ng-model="vm.province.region"\r\n                                                           placeholder="منطقه">\r\n                                                </div>--></div><div class="col-sm-4 pull-right"><button type=button class="btn btn-cancel" data-ng-click=vm.cancelAdd()><span class="fa fa-close"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class="btn btn-success"><span class="fa fa-check"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><!--<td data-title="\'APP.SHARE.ID\'|translate"\r\n                                                data-ng-bind="item.id|pNumber">\r\n                                            </td>--><td data-title="\'APP.MODULES.BASIC_INFO.PROVINCE.CODE\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.code|pNumber></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.code></span></td><td data-title="\'APP.SHARE.NAME\'|translate"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.title></span></td><!--<td data-title="\'APP.MODULES.BASIC_INFO.PROVINCE.REGION\'|translate">\r\n                                                <span data-ng-show="!item.toggle"\r\n                                                      data-ng-bind="item.region|pNumber"></span>\r\n                                                <span data-ng-show="item.toggle">\r\n                                                    <input class="form-control" type="text" data-ng-model="item.region">\r\n                                                </span>\r\n                                            </td>--><!-- <td data-title="\'APP.SHARE.OPERATION\'|translate">\r\n                                                <a class="btn btn-sm text-info"\r\n                                                   data-ng-show="!item.toggle"\r\n                                                   ui-sref="root.province-cities({id:item.id})"\r\n                                                   uib-tooltip="{{\'APP.ACTIONS.UPDATE\'|translate}}">\r\n                                                    <span class=" icon pe-icon pe-7s-look f-17"></span>\r\n                                                </a>\r\n                                                <command-buttons has-edit="true"\r\n                                                                 edit="vm.update(item)"\r\n                                                                 cancel="item.toggle = !item.toggle"\r\n                                                                 has-delete="true"\r\n                                                                 delete="vm.delete(item.id)"\r\n                                                                 toggle="item.toggle">\r\n                                                </command-buttons>\r\n                                            </td>--></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/report/report.html",'<div class=container-fluid><h2 class="approve-title screen-only"></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class="module-heading screen-only"><h1 class="module-title inline" data-translate=APP.MODULES.REPORT.LIST></h1><div class=clearfix></div></div>div class="module-content"><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><span class=screen-only data-translate=APP.MODULES.REPORT.SEARCH></span><form class="dataTables_wrapper dt-bootstrap search-container screen-only" name=reportsForm data-ng-submit=vm.submit() novalidate><!--switch group state--><div class=row><div class=btn-group><label class="btn btn-success" ng-model=vm.group uib-btn-radio=true uncheckable data-translate=APP.MODULES.REPORT.GROUP></label><label class="btn btn-success" ng-model=vm.group uib-btn-radio=false uncheckable data-translate=APP.MODULES.REPORT.SINGLE></label></div></div><!--select report in single mode--><div class=row ng-if=!vm.group><div class="col-md-8 pull-right sw"><label class="control-label col-xs-12 pull-right" data-translate=APP.MODULES.REPORT.NAME></label><button class="btn btn-default-alt col-sm-12 col-md-1" type=button data-ng-attr-title="{{\'APP.ACTIONS.NEXT\'|translate}}" data-ng-click=vm.shiftSelectedReport(1)><i class="fa fa-caret-left"></i></button><div class="col-sm-12 col-md-10"><ui-select data-ng-model=vm.selectedReport id=selected-report theme=bootstrap sortable required><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat="report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }"><div ng-bind-html="(vm.getReportStatus(report) ? \'<i class=\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\'></i>\' : \'<i class=\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\'></i>\') + report.content + \'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\'color: white;\\\'>\' + report.index + \'</small>\' | highlight: $select.search"></div></ui-select-choices></ui-select></div><button class="btn btn-default-alt col-sm-12 col-md-1" type=button data-ng-attr-title="{{\'APP.ACTIONS.PREVIOUS\'|translate}}" data-ng-click=vm.shiftSelectedReport(-1)><i class="fa fa-caret-right"></i></button></div><div class="col-md-4 pull-left"><div class=form-group><label data-translate=APP.SHARE.REPORT_TYPE for=report-type></label><select class=form-control ng-model=vm.reportParams.reportType name=reportType id=report-type ng-options="reportType for reportType in vm.reportTypes"></select></div></div></div><!--reprot type--><!--select reports in multiple mode--><div class=row ng-if=vm.group><div class="control-label col-lg-2 pull-right" data-translate=APP.MODULES.REPORT.NAMES></div><div class="form-group sw col-md-12 pull-right"><ui-select data-ng-model=vm.selectedReports multiple reset-search-input=true close-on-select=false theme=bootstrap sortable required><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$item.content></b></span></ui-select-match><ui-select-choices repeat="report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }"><div ng-bind-html="(vm.getReportStatus(report) ? \'<i class=\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\'></i>\' : \'<i class=\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\'></i>\') + report.content + \'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\'color: white;\\\'>\' + report.index + \'</small>\' | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><!--insert range of reports--><div class=row ng-if=vm.group><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.REPORT.REPORT_NUMBERS></label><input class=form-control ng-model=vm.reportsText name=reportsText type=text></div></div></div><!--dates and level--><div class=row><!--from date--><div class="col-md-4 pull-right" data-ng-if="!vm.selectedReport.noFromDate || vm.group"><div class=form-group data-ng-class="{\'has-error\': reportsForm.fromConfirmDate.$invalid}"><label data-translate=APP.MODULES.REPORT.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate required></simple-date></div></div><!--to date--><div class="col-md-4 pull-right" data-ng-if="!vm.selectedReport.noToDate || vm.group"><div class=form-group data-ng-class="{\'has-error\': reportsForm.toConfirmDate.$invalid}"><label data-translate=APP.MODULES.REPORT.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate required></simple-date></div></div><!--organization level--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.organizationLevel"><div class=form-group><label data-translate=APP.SHARE.REPORT_LEVEL></label><select class=form-control ng-model=vm.reportParams.organizationLevel name=reportType ng-options="level as (level|userLevel) for level in vm.reportLevels"></select></div></div></div><!--show date only for report number 55  --><div class=row data-ng-if="vm.selectedReport.htmlReportApi == \'report/getMonitoringTraceReport/?reportNumber=\'"><!--from date--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.REPORT.FROM_DATE_TRACE></label><simple-date data-ng-model=vm.reportParams.fromTraceDate name=fromTraceDate></simple-date></div></div><!--to date--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.REPORT.TO_DATE_TRACE></label><simple-date data-ng-model=vm.reportParams.toTraceDate name=toTraceDate></simple-date></div></div></div><!--codes and credit Supply Resource and isic code--><div class=row><!--included codes--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesIncluded"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.reportParams.codesIncluded theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesExcluded"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.reportParams.codesExcluded theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--credit Supply Resource --><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.creditSupplyResources"><div class=form-group><label data-translate=APP.SHARE.REPORT_CREDIT_SUPPLY_RESOURCE></label><ui-select multiple ng-model=vm.reportParams.creditSupplyResources theme=bootstrap id=selected-resources sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.name}}</ui-select-match><ui-select-choices repeat="resource.id as resource in vm.resources|propsFilter : {name: $select.search}"><div ng-bind-html="resource.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><!--included ISIC--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesIncluded"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_INCLUDED></label><ui-select multiple ng-model=vm.reportParams.includedIsics theme=bootstrap id=selected-isic-include sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat="isic.id as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}"><div><span ng-bind-html="isic.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+isic.name | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded isic--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesIncluded"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.reportParams.excludedIsics theme=bootstrap id=selected-isic-exclude sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat="isic.id as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}"><div><span ng-bind-html="isic.code | highlight: $select.search"></span></div><small><span ng-bind-html="\' \'+isic.name | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div><!--amounts and credit Supply Resource text--><div class=row><!--amount from--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.lowAmount"><div class=form-group><label data-translate=APP.SHARE.REPORT_LOW_AMOUNT for=lowAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=lowAmount name=lowAmount data-ng-model=vm.reportParams.lowAmount></div></div><!--amount to--><div class="col-md-4 pull-right"><div class=form-group data-ng-show="vm.group || vm.selectedReport.filters.highAmount"><label data-translate=APP.SHARE.REPORT_HIGH_AMOUNT for=highAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=highAmount name=highAmount data-ng-model=vm.reportParams.highAmount></div></div><!--credit Supply Resource text--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.creditSupplyResourceText"><div class=form-group><label data-translate=APP.SHARE.REPORT_CREDIT_SUPPLY_RESOURCE_TEXT for=credit-supply-resource-text></label><input class=form-control id=credit-supply-resource-text name=creditSupplyResourceText data-ng-model=vm.reportParams.creditSupplyResourceText></div></div></div><div class=row><div class="col-md-8 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesIncluded"><!--contract from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><simple-date name=contractFromDate data-ng-model=vm.reportParams.contractFromDate></simple-date></div></div><!--contract due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><simple-date data-ng-model=vm.reportParams.contractToDate name=contractToDate></simple-date></div></div></div><div class="col-md-8 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.codesIncluded"><!--monitoring from date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.reportParams.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.reportParams.monitoringToDate name=monitoringToDate></simple-date></div></div></div></div><div class=row><!--provinces--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.province"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select multiple ng-model=vm.reportParams.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="province.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+province.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--traceStatus--><div class="col-md-4 pull-right" data-ng-show="vm.group || vm.selectedReport.filters.traceStatus"><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label><select class=form-control title="{{\'APP.MODULES.MONITORING.TRACE_STEP\'|translate}}" ng-model=vm.reportParams.statusId name=statusId ng-options="step.id as step.title for step in vm.traceSteps"></select></div></div></div><div class=col-md-4><div class=form-group><button type=submit class="btn btn-success pull-left" data-ng-disabled="(!vm.group &&\r\n                                                                          (!vm.selectedReport.htmlReportApi)) ||\r\n                                                                          (vm.group && vm.selectedReports.length < 1 && !vm.reportsText)" title="{{\'APP.ACTIONS.REPORT_VIEW\'|translate}}"><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form><div id=dynamicReport class="col-md-12 pull-right"></div><div class="row screen-only" data-ng-show=vm.loading><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." ng-show=vm.loading class=centered height=50></div></div><div class=screen-only><br><br></div><div class="well screen-only" data-ng-hide="vm.loading && !vm.duration">مدت زمان بارگیری: {{vm.duration|pNumber}}</div></div></div></div></section></div></div></div>'),t.put("app/components/roles/add-permission.html",'<form name=addPermissionForm data-ng-submit=vm.assignPermissionToRole();addPermissionForm.$setPristine() novalidate><!--permission --><div class="col-md-3 pull-right"><span class=text-danger>*</span><label data-translate=APP.MODULES.PERMISSION.NAME></label></div><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\r\n                             \'has-success\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}"><ui-select theme=bootstrap data-ng-model=vm.permission><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat="permission in vm.allPermissions |\r\n                                propsFilter : {name: $select.search,caption:$select.search}"><div ng-bind-html="(permission.caption?permission.name+\'(\'+permission.caption+\')\':permission.name) | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-3 pull-right"><button class="btn btn-info" type=submit data-ng-disabled=addPermissionForm.$invalid><i class="fa fa-check"></i></button> <button class="btn btn-default" type=button data-ng-click=vm.cancelAddPermission()><i class="fa fa-times"></i></button></div></form>'),t.put("app/components/roles/add-role.html",'<form class=form-inline name=addRoleForm data-ng-submit=vm.createRole(addRoleForm);addRoleForm.$setPristine()><div class=form-group data-ng-class="{\'has-error\':addRoleForm.role.$invalid &&\r\n                                    !addRoleForm.role.$pristine}"><span class=red-star>*</span><label for=role data-translate=APP.SHARE.NAME></label><input class=form-control id=role auto-focus={{!vm.toggleAdd}} placeholder="{{\'APP.SHARE.NAME\'|translate}}" data-ng-model=vm.role.role name=role ng-pattern=/^[_A-Z]+$/ required></div><div class=form-group data-ng-class="{\'has-error\':addRoleForm.caption.$invalid &&\r\n                                    !addRoleForm.caption.$pristine}"><span class=red-star>*</span><label for=caption data-translate=APP.SHARE.CAPTION></label><input class=form-control id=caption placeholder="{{\'APP.SHARE.CAPTION\'|translate}}" data-ng-model=vm.role.caption name=caption required></div><div class=form-group><label for=caption data-translate=APP.MODULES.ROLE.PARENT></label><select class=form-control id=parent name=parent data-ng-model=vm.role.parent ng-options="role as role.caption for role in vm.roles"></select></div><button class="btn btn-primary-alt" data-ng-disabled=addRoleForm.$invalid><i class="fa fa-check"></i></button> <button class="btn btn-default-alt" type=button data-ng-click=vm.cancelAddRole()><i class="fa fa-times"></i></button><row><div class="col-md-12 col-sm-12 pull-right"><label for=role ng-show="addRoleForm.role.$invalid && !addRoleForm.role.$pristine " data-translate=APP.MODULES.ROLE.ROLE_REGX_INVALID></label></div></row></form>'),t.put("app/components/roles/role-details.html",'<div class=container-fluid><h2 class=view-title></h2><!-- /.row --><div class=row><div class="module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span data-translate=APP.MODULES.PERMISSION.LIST></span> <i data-ng-bind=vm.data.caption></i></h1><div class=pull-left ng-show=!vm.toggleAddPermission><button class="btn btn-sm btn-success-alt" data-ng-click="vm.toggleAddPermission = !vm.toggleAddPermission"><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.PERMISSION.ACTIONS.ADD></span></button></div></div><!--add PermissionToRole--><div class=module-content><div class=module-content-inner><div><div class=pane-body ng-show=vm.toggleAddPermission><form name=addPermissionForm ng-submit=vm.assignPermissionsToRole();addPermissionForm.$setPristine() class=form-horizontal><div class="form-group col-lg-8 pull-right" ng-class="{\'has-error\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\r\n                                        \'has-success\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}"><label class="col-lg-3 pull-right control-label" data-translate=APP.MODULES.PERMISSION.NAME></label><div class="col-lg-9 pull-right"><ui-select multiple theme=bootstrap id=permissions spinner-class="fa fa-spinner" reset-search-input=false close-on-select=false data-ng-model=vm.permissions><span class="fa fa-plus-circle"></span><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$item.name></span></ui-select-match><ui-select-choices repeat="permission in vm.allPermissions track by $index" refresh=vm.refreshPermissions($select.search) refresh-delay=4><div ng-bind-html="(permission.caption ? permission.caption : permission.name) | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="form-group col-lg-2 pull-right"><button class="btn btn-default-alt" type=reset ng-click=vm.cancelAddPermission() uib-tooltip="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt" uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}" ng-disabled=addPermissionForm.$invalid><i class="fa fa-check"></i></button><!--<button type="button"\r\n                                                    class="btn btn-success-alt" ng-click="vm.assignAllPermissionsToRole();"\r\n                                                    uib-tooltip="{{\'APP.ACTIONS.ADD_ALL\'|translate}}">\r\n                                                <i class="fa fa-plus-square-o"></i>\r\n                                            </button>--></div></form></div><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class=row><div class=col-sm-12><div class=table-responsive><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.CAPTION\'|translate" data-ng-attr-title={{item.name}} data-filter="{caption:\'text\'}"><span data-ng-bind="item.caption || item.name" dir=ltr></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><!--<a class="btn text-success btn-sm"\r\n                                                                   uib-tooltip="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}"\r\n                                                                   ui-sref="root.basic-document-attachment({id:item.id})">\r\n                                                                    <span class="icon pe-icon pe-7s-look f-17 f-bold"></span>\r\n                                                                </a>--><command-buttons delete=vm.deletePermissionFromRole(item.id,$index) has-delete=true></command-buttons></td></tr></table></div></div></div></div></pane-body></div></div></div></div></section></div></div></div><!--\r\n<div class="container-fluid">\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <h3 class="page-header">\r\n                <span data-translate="APP.MODULES.ROLE.DETAILS"></span>\r\n                <span data-ng-bind="vm.data.role"></span>\r\n            </h3>\r\n        </div>\r\n        &lt;!&ndash; /.col-lg-12 &ndash;&gt;\r\n    </div>\r\n    &lt;!&ndash; /.row &ndash;&gt;\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">\r\n                    <div class="panel-title pull-right"\r\n                         data-translate="APP.MODULES.PERMISSION.LIST"></div>\r\n                    <div class="pull-left">\r\n                        <button class="btn btn-sm btn-success"\r\n                                data-ng-show="!vm.toggleAddPermission"\r\n                                data-ng-click="vm.toggleAddPermission=!vm.toggleAddPermission">\r\n                            <i class="fa fa-plus-circle"></i>\r\n                            <span data-translate="APP.MODULES.PERMISSION.ACTIONS.ADD">‌</span>\r\n                        </button>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <div class="panel-body"\r\n                     data-ng-show="vm.toggleAddPermission"\r\n                     data-ng-include="\'app/components/roles/add-permission.html\'">\r\n                </div>\r\n                &lt;!&ndash; /.panel-heading &ndash;&gt;\r\n                <div class="panel-body">\r\n                    <div class="dataTable_wrapper table-responsive">\r\n                        <table class="table table-bordered table-striped table-hover"\r\n                               data-template-pagination="app/directives/ng-table/pagination-tpl.html"\r\n                               data-ng-table="vm.tableParams"\r\n                               data-show-filter="false">\r\n                            <colgroup>\r\n                                <col width="35%"/>\r\n                                <col width="50%"/>\r\n                                <col width="15%"/>\r\n                            </colgroup>\r\n                            <tr class="text-center"\r\n                                data-ng-repeat="item in $data">\r\n                                <td data-title="\'APP.SHARE.NAME\'|translate"\r\n                                    data-ng-bind="item.name">\r\n                                </td>\r\n                                <td data-title="\'APP.SHARE.CAPTION\'|translate"\r\n                                    data-filter="{caption:\'text\'}"\r\n                                    data-ng-bind="item.caption">\r\n                                </td>\r\n                                <td data-title="\'APP.SHARE.OPERATION\'|translate">\r\n                                    <a class="text-danger"\r\n                                       data-ng-click="vm.deletePermissionFromRole(item.id,$index)">\r\n                                        <i class="fa fa-fw fa-remove"></i>\r\n                                    </a>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    &lt;!&ndash; /.table-responsive &ndash;&gt;\r\n                </div>\r\n                &lt;!&ndash; /.panel-body &ndash;&gt;\r\n            </div>\r\n            &lt;!&ndash; /.panel &ndash;&gt;\r\n        </div>\r\n        &lt;!&ndash; /.col-lg-12 &ndash;&gt;\r\n    </div>\r\n\r\n</div>\r\n-->'),
t.put("app/components/roles/roles-list.html",'<div class=container-fluid><h2 class=view-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.ROLE.TITLE></h1><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=vm.toggleAddRole data-ng-click="vm.toggleAddRole=!vm.toggleAddRole"><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.ROLE.ACTIONS.ADD>‌</span></button></div></div><!-- end ngIf: title || meta --><div class=module-content><div class=module-content-inner><div><pane-body><div data-ng-show=!vm.toggleAddRole data-ng-include="\'app/components/roles/add-role.html\'"></div></pane-body><pane-body><div id=DataTables_Table_0_wrapper class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class=row><div class=col-sm-12><table class="row-border hover dataTable no-footer" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.NAME\'|translate" data-ng-bind=item.role></td><td data-title="\'APP.SHARE.CAPTION\'|translate" data-filter="{caption:\'text\'}"><span data-ng-bind=item.caption data-ng-show=!vm.toggleEditRole[$index]></span><form name=roleForm{{$index}} data-ng-show=vm.toggleEditRole[$index] novalidate><div class=form-group data-ng-class="{\'has-error\':role.$invalid && !role.$pristine}"><input class=form-control type=text auto-focus={{vm.toggleEditRole[$index]}} placeholder="{{\'APP.SHARE.CAPTION\'|translate}}" data-ng-model=item.caption name=caption required></div></form></td><td><a data-ui-sref=root.roles.details({role:item.role})><span data-translate=APP.SHARE.VIEW></span> <span data-translate=APP.MODULES.PERMISSION.LIST></span></a></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons cancel=vm.cancelEditRole($index) disabled has-edit=true edit="vm.updateRole(item, $index)" delete="vm.deleteRole(item.role, $index)" has-delete=true toggle=vm.toggleEditRole[$index]></command-buttons></td></tr></table></div></div><div ng-if=false class=row><div class=col-sm-5><div class=dataTables_info id=DataTables_Table_0_info role=status aria-live=polite>Showing 1 to 10 of 57 entries</div></div><div class=col-sm-7><div class="dataTables_paginate paging_full_numbers" id=DataTables_Table_0_paginate><ul class=pagination><li class="paginate_button first disabled" id=DataTables_Table_0_first><a href=# aria-controls=DataTables_Table_0 data-dt-idx=0 tabindex=0>First</a></li><li class="paginate_button previous disabled" id=DataTables_Table_0_previous><a href=# aria-controls=DataTables_Table_0 data-dt-idx=1 tabindex=0>Previous</a></li><li class="paginate_button active"><a href=# aria-controls=DataTables_Table_0 data-dt-idx=2 tabindex=0>1</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=3 tabindex=0>2</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=4 tabindex=0>3</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=5 tabindex=0>4</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=6 tabindex=0>5</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=7 tabindex=0>6</a></li><li class="paginate_button next" id=DataTables_Table_0_next><a href=# aria-controls=DataTables_Table_0 data-dt-idx=8 tabindex=0>Next</a></li><li class="paginate_button last" id=DataTables_Table_0_last><a href=# aria-controls=DataTables_Table_0 data-dt-idx=9 tabindex=0>Last</a></li></ul></div></div></div></div></pane-body></div></div></div><!-- ngIf: showFooter --></div></section></div></div><!--<div class="row" ng-if="false" >\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">\r\n                    <h1 class="pull-right"\r\n                         data-translate="APP.MODULES.ROLE.TITLE"></h1>\r\n                    <div class="pull-left">\r\n                        <button class="btn btn-sm btn-success-alt"\r\n                                data-ng-show="vm.toggleAddRole"\r\n                                data-ng-click="vm.toggleAddRole=!vm.toggleAddRole">\r\n                            <i class="fa fa-plus-circle"></i>\r\n                            <span data-translate="APP.MODULES.ROLE.ACTIONS.ADD">‌</span>\r\n                        </button>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <div class="panel-body"\r\n                     data-ng-show="!vm.toggleAddRole"\r\n                     data-ng-include="\'app/components/roles/add-role.html\'">\r\n                </div>\r\n                &lt;!&ndash; /.panel-heading &ndash;&gt;\r\n                <div class="panel-body">\r\n                    <div class="dataTable_wrapper table-responsive">\r\n                        <table class="table table-bordered table-striped table-hover"\r\n                               data-template-pagination="app/directives/ng-table/pagination-tpl.html"\r\n                               data-ng-table="vm.tableParams"\r\n                               data-show-filter="false">\r\n                            <colgroup>\r\n                                <col width="20%"/>\r\n                                <col width="30%"/>\r\n                                <col width="35%"/>\r\n                                <col width="15%"/>\r\n                            </colgroup>\r\n                            <tr class="text-center"\r\n                                data-ng-repeat="item in $data">\r\n                                <td data-title="\'APP.SHARE.NAME\'|translate"\r\n                                    data-ng-bind="item.role">\r\n                                </td>\r\n                                <td data-title="\'APP.SHARE.CAPTION\'|translate"\r\n                                    data-filter="{caption:\'text\'}">\r\n                                    <span data-ng-bind="item.caption"\r\n                                          data-ng-show="!vm.toggleEditRole[$index]"></span>\r\n                                    <form name="roleForm{{$index}}"\r\n                                          data-ng-show="vm.toggleEditRole[$index]"\r\n                                          novalidate>\r\n                                        <div class="form-group"\r\n                                             data-ng-class="{\'has-error\':role.$invalid && !role.$pristine}">\r\n                                            <input class="form-control"\r\n                                                   type="text"\r\n                                                   auto-focus="{{vm.toggleEditRole[$index]}}"\r\n                                                   placeholder="{{\'APP.SHARE.CAPTION\'|translate}}"\r\n                                                   data-ng-model="item.caption"\r\n                                                   name="caption"\r\n                                                   required>\r\n                                        </div>\r\n                                    </form>\r\n                                </td>\r\n                                <td>\r\n                                    <a data-ui-sref="root.roles.details({role:item.role})">\r\n                                        <span data-translate="APP.SHARE.VIEW"></span>\r\n                                        <span data-translate="APP.MODULES.PERMISSION.LIST"></span>\r\n                                    </a>\r\n                                </td>\r\n                                <td data-title="\'APP.SHARE.OPERATION\'|translate">\r\n                                    <command-buttons has-edit="true" edit="vm.updateRole(item, $index)"\r\n                                                     toggle="vm.toggleEditRole[$index]"\r\n                                                     has-delete="true" delete="vm.deleteRole(item.role, $index)"\r\n                                                     cancel="vm.cancelEditRole($index)"\r\n                                    ></command-buttons>\r\n\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    &lt;!&ndash; /.table-responsive &ndash;&gt;\r\n                </div>\r\n                &lt;!&ndash; /.panel-body &ndash;&gt;\r\n            </div>\r\n            &lt;!&ndash; /.panel &ndash;&gt;\r\n        </div>\r\n    </div>--></div>'),t.put("app/components/trace/add-comment-modal.html",'<div class=modal-header><h3 class=modal-title data-ng-bind="(\'APP.MODULES.TRACE.TITLES.\' + modalVm.action)|translate"></h3></div><div class=modal-body><div class=row data-ng-if="modalVm.action != \'postpone\'"><div class="alert alert-warning" data-translate="Caution! the trace will be exited from current page after this action"></div></div><div class=row><div class="form-group col-sm-12 pull-right" data-ng-if="modalVm.action == \'postpone\'"><label class=control-label data-translate=APP.SHARE.DATE></label><!--<adm-dtp data-ng-model="modalVm.date">\r\n                <input class="form-control"\r\n                       id="date" name="date"\r\n                       data-ng-model="modalVm.date"\r\n                       dtp-input>\r\n            </adm-dtp>--><simple-date data-ng-model=modalVm.date id=date name=date required></simple-date><div class="row m-t-1"><div class="col-sm-12 suggested-dates"><button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=modalVm.setDate(30) data-translate="30 days later"></button> <button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=modalVm.setDate(20) data-translate="20 days later"></button> <button class="btn btn-warning-alt col-xs-2 col-xs-offset-1" data-ng-click=modalVm.setDate(10) data-translate="10 days later"></button> <button class="btn btn-danger-alt col-xs-2 col-xs-offset-1" data-ng-click=modalVm.setDate(5) data-translate="5 days later"></button></div></div></div><div class="form-group col-sm-12 pull-right" data-ng-if="modalVm.action == \'transfer\'"><ui-select data-ng-model=modalVm.user ng-disabled=modalVm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in modalVm.users" group-by=modalVm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=modalVm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.SHARE.DESCRIPTION></label><textarea class=form-control id=comment name=comment data-ng-model=modalVm.comment></textarea></div><div class="form-group col-sm-12"><button class="btn btn-primary-alt pull-left" data-ng-click=modalVm.submit() data-ng-attr-title="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></div>'),t.put("app/components/trace/trace-detail.html",'<div class="container-fluid trace"><!--<back-button></back-button>--><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading ng-class="{\'convert-debit-trace-bg\':vm.trace.forCommitmentConvert}"><h1 class="module-title inline"><label data-translate=APP.MODULES.TRACE.DETAIL.TITLE></label><label ng-if=vm.trace.forCommitmentConvert>(ارسال شده از دیون به حال)</label></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><!--info--><div class=pane-body><div class="contract-container row"><div class="col-sm-3 pull-right"><label class=control-label data-translate=APP.SHARE.ID></label><p data-ng-bind=vm.trace.id|pNumber></p></div><div class="col-sm-3 pull-right"><label class=control-label data-translate=APP.MODULES.TRACE.BOUNDED_USER></label><p data-ng-bind=vm.trace.user.name></p></div><div class="col-sm-3 pull-right"><label class=control-label data-translate=APP.MODULES.TRACE.MONITORING_NUMBER></label><p><a data-ng-if=!vm.trace.forCommitmentConvert data-ng-bind=vm.trace.monitoring.number|pNumber title="مشاهده‌ی نظارت" data-ui-sref=root.monitoring.trace({monitoringId:vm.trace.monitoring.id})></a><label data-ng-if=vm.trace.forCommitmentConvert>{{vm.trace.monitoring.number|pNumber}}</label></p></div><div class="col-sm-3 pull-right"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.STATUS></label><p data-ng-bind=vm.trace.currentStep.title></p></div><div class="col-sm-3 pull-right"><label class=control-label data-translate=APP.SHARE.DATE></label><p data-ng-bind=vm.trace.alertDate|jDate|pNumber></p></div><div class="col-sm-9 pull-right"><label class=control-label data-translate=APP.SHARE.COMMENT></label><p data-ng-bind=vm.trace.description></p></div></div></div><hr><!--operation--><div class=pane-body data-ng-show="vm.isMine && (vm.trace.currentStep.name==\'waiting\' ||\r\n                                                              vm.trace.currentStep.name== \'seen\' || vm.trace.currentStep.name ==\'alerted\')"><h3 class="module-title inline" data-translate=APP.MODULES.TRACE.DETAIL.OPERATION></h3><div class=clearfix></div><div class="contract-container row"><div class="form-group col-sm-12 col-md-6 col-lg-4 pull-right"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.OPERATIONS for=operations></label><select class=form-control name=operations id=operations data-ng-model=vm.operation data-ng-attr-title="{{\'APP.ACTIONS.SELECT\'|translate}}" data-ng-options="operation as operation.title for operation in vm.operations"></select></div><div class="form-group col-sm-12 col-md-6 col-lg-4 pull-right" data-ng-show="vm.operation.id == 3"><label class=control-label for=date data-translate=APP.MODULES.TRACE.DETAIL.POSTPONE_DATE></label><adm-dtp data-ng-model=vm.date full-data=vm.dateDetails><input class=form-control data-ng-disabled=vm.loading id=date name=date data-ng-model=vm.date dtp-input></adm-dtp></div><div class="col-sm-12 col-md-6 col-lg-4 pull-right" data-ng-show="vm.operation.id == 3"><label class=control-label for=date data-translate=APP.MODULES.TRACE.DETAIL.POSTPONE_TO></label><div><button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(30) data-translate="30 days later"></button> <button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(20) data-translate="20 days later"></button> <button class="btn btn-warning-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(10) data-translate="10 days later"></button> <button class="btn btn-danger-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(5) data-translate="5 days later"></button></div></div><div class="form-group col-sm-12 col-md-6 col-lg-8 pull-right" data-ng-show="vm.operation.id == 4"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.USER></label><ui-select data-ng-model=vm.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class="form-group col-sm-12 col-md-6 col-lg-8" data-ng-class="{\'col-sm-10\': vm.trace.currentStep.name==\'seen\' || vm.trace.currentStep.name ==\'alerted\', \'col-sm-12\':vm.trace.currentStep.name==\'waiting\'}" data-ng-show="vm.trace.currentStep.name==\'waiting\' || vm.trace.currentStep.name ==\'alerted\' ||\r\n                                                              vm.trace.currentStep.name== \'seen\'"><label class=control-label data-translate=APP.SHARE.DESCRIPTION></label><textarea class=form-control data-ng-disabled=vm.loading id=comment name=comment data-ng-bind=vm.trace.description data-ng-model=vm.comment>\r\n                                        </textarea></div><div class="col-sm-12 text-left"><button class="btn btn-sm btn-success" data-ng-click=vm.traceCleared() data-ng-disabled="!vm.comment || vm.loading" data-ng-show="(vm.trace.currentStep.name==\'waiting\' ||\r\n                                                              vm.trace.currentStep.name== \'seen\' || vm.trace.currentStep.name ==\'alerted\') && vm.operation.id == 1"><span class="icon pe-icon pe-7s-check f-17 f-bold"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_CLEAR></span></button> <button class="btn btn-sm btn-danger" data-ng-click=vm.traceFailed() data-ng-disabled="!vm.comment || vm.loading" data-ng-show="(vm.trace.currentStep.name==\'waiting\' ||\r\n                                                              vm.trace.currentStep.name== \'seen\' || vm.trace.currentStep.name ==\'alerted\') && vm.operation.id == 2"><span class="icon pe-icon pe-7s-close-circle f-17 f-bold"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_FAILED></span></button> <button class="btn btn-sm btn-warning" data-ng-click=vm.tracePostPone() data-ng-show="vm.operation.id == 3" data-ng-disabled="!vm.comment || !vm.date || vm.loading"><span class="icon pe-icon pe-7s-refresh f-17 f-bold"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_SEEN_POST_PONE></span></button> <button class="btn btn-sm btn-info" data-ng-click=vm.traceTransfer() data-ng-show="vm.operation.id == 4" data-ng-disabled="!vm.comment || !vm.user || vm.loading"><span class="icon pe-icon pe-7s-repeat f-17 f-bold"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRANSFER></span></button></div></div></div><!--attachments and logs--><div class=pane-body><hr><div class=row><!--attachments--><div class="col-lg-5 col-md-12 m-t-2"><h3 class="module-title inline" data-translate=APP.MODULES.TRACE.DETAIL.ATTACHMENTS></h3><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><colgroup><col width=30%><col width=20%><col width=40%><col width=10%></colgroup><tr><th class=text-center data-translate=APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME></th><th class=text-center data-translate=APP.MODULES.TRACE.ATTACHMENTS.CREATOR></th><th class=text-center data-translate=APP.SHARE.DESCRIPTION></th><th class=text-center ng-show=vm.isMine></th></tr><tr data-ng-repeat="attachment in vm.trace.attachments"><td><a ng-href={{attachment.url}} target=_blank data-ng-bind="attachment.name + \'.\'+attachment.type"></a></td><td data-ng-bind=attachment.creatorLmsUser.name></td><td data-ng-bind=attachment.description></td><td><span class="icon pe-icon pe-7s-trash f-20 text-danger" ng-show=attachment.canDelete data-ng-attr-title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click=vm.deleteAttachment(attachment)></span> <span class="icon pe-icon pe-7s-attention f-20 text-danger" data-ng-hide=attachment.canDelete></span></td></tr><!-- add rows --><tr><td colspan=3><file-upload class="inline col-xs-8 pull-right" file=vm.attachment.attachment data-uploading=vm.uploaded label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><button class="btn btn-warning-alt inline" type=button data-ng-click=vm.cancelAddAttachment() title="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button></td><td><button class="btn btn-primary-alt inline" ng-click=vm.addAttachment(); title="{{\'APP.ACTIONS.UPLOAD\'|translate}}" ng-disabled=!vm.attachment><i class="fa fa-upload"></i></button></td></tr><tr><td class=b-0 colspan=3><textarea class=form-control data-ng-model=vm.description style="resize: vertical" placeholder="{{\'APP.SHARE.DESCRIPTION\'|translate}} ... "></textarea></td><td class=b-0></td></tr><tr data-ng-show=vm.trace.attachments.length><td colspan=3><a ng-href=api/trace/{{vm.trace.id}}/getAllFilesZipped/{{vm.trace.id}}.zip target=_blank download={{vm.monitoring.number}}.zip><i class="fa fa-file-archive-o"></i> <span data-translate=APP.ACTIONS.DOWNLOAD_ALL></span></a></td></tr></table></div></div><!--logs--><div class="col-lg-7 col-md-12 m-t-2"><h3 class="module-title inline" data-translate=APP.MODULES.TRACE.DETAIL.TRACE_LOGS></h3><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr><th class=text-center><span ng-bind="\'APP.SHARE.ID\'|translate"></span></th><th class=text-center><span data-ng-bind="\'APP.SHARE.USER\'|translate"></span></th><th class=text-center><span data-ng-bind="\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\'|translate"></span></th><th class=text-center><span data-ng-bind="\'APP.SHARE.DATE\'|translate"></span></th><th class=text-center><span data-ng-bind="\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\'|translate"></span></th><th class=text-center><span data-ng-bind="\'APP.SHARE.DESCRIPTION\'|translate"></span></th></tr><tr class=text-center data-ng-repeat="item in vm.processLog"><td data-ng-bind=item.id|pNumber></td><td data-ng-bind=item.user.name></td><td data-ng-bind=item.transition.name|traceDefinition|translate></td><td data-ng-bind=item.createDate|jDate|pNumber></td><td data-ng-bind=item.createDate|timeFilter|pNumber></td><td data-ng-bind=item.comment|translate></td></tr></table></div></div></div></div></div></div></div></section></div></div></div>'),t.put("app/components/trace/trace.html",'<div class="container-fluid trace"><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span class="icon pe-icon pe-7s-alarm trace"></span> <span data-translate={{vm.title}}></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class=row><!--MONITORING_USER--><div class="col-md-4 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.TRACE.MONITORING_USER></label><ui-select data-ng-model=vm.creator ng-disabled="vm.loading || vm.disableCreator"><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div></div><!--alert from date--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.TRACE.DATE_FROM></label><!--<adm-dtp data-ng-model="vm.alertFromDate"></adm-dtp>--><simple-date data-ng-model=vm.searchItems.fromAlertDate name=alertFromDate></simple-date></div></div><!--alertToDate due date--><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.TRACE.DATE_TO></label><!--<adm-dtp data-ng-model="vm.alertToDate"></adm-dtp>--><simple-date data-ng-model=vm.searchItems.toAlertDate name=alertToDate></simple-date></div></div></div><div class=row><!--ID--><div class="col-md-4 pull-right"><div class=form-group><label class=control-label data-translate=APP.SHARE.ID></label><input class=form-control data-ng-model=vm.searchItems.id placeholder="{{\'APP.SHARE.ID\'|translate}}"></div></div><!-- monitoringId --><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER></label><input class=form-control data-ng-model=vm.searchItems.monitoringNumber placeholder="{{\'APP.MODULES.MONITORING.NUMBER\'|translate}}"></div></div><!-- applicant --><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.TRACE.MONITORING_CUSTOMER></label><input class=form-control data-ng-model=vm.searchItems.applicant placeholder="{{\'APP.MODULES.TRACE.MONITORING_CUSTOMER\'|translate}}"></div></div></div><div class=row><!--BOUNDED_USER--><div class="col-md-4 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.TRACE.BOUNDED_USER></label><ui-select data-ng-model=vm.user ng-disabled="vm.loading || vm.disableUser"><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- province --><!-- search province --><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select ng-model=vm.searchItems.provinceId ng-disabled="vm.loading || vm.disableProvince" id=province sortable><ui-select-match allow-clear=true ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\'|translate}}">{{$select.selected.title}} &lt;{{$select.selected.code}}&gt;</ui-select-match><ui-select-choices repeat="province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="province.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+province.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><div class="col-md-4 pull-right" data-ng-if=vm.isInRoleStaff()><div class="form-group pull-right m-t-2"><label class="pull-left btn btn-default" for=for-commitment-convert><input class="pull-right m-l-1" data-ng-model=vm.searchItems.forCommitmentConvert id=for-commitment-convert name=forCommitmentConvert type=checkbox> <span data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></span></label></div></div><!-- status --><div class="col-md-4 pull-right" data-ng-hide=vm.hideStatuses><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label>:&nbsp;<div class="btn-group nav-btn-group"><label class="btn btn-default" data-ng-hide=step.hide data-ng-repeat="step in vm.traceSteps" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class="{\'fa-check-square-o\':step.selected, \'fa-square-o\':!step.selected}"></i> <span data-ng-bind=step.title></span></label></div></div></div></div><div class=row><div class=col-md-12><br><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() ng-attr-title="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit ng-attr-title="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class="btn btn-primary-alt" type=submit data-ng-click="vm.exportTrace(\'EXCEL\')" ng-attr-title="{{\'APP.ACTIONS.EXPORT\'|translate}}"><i class="fa fa-file-excel-o"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><div class=pane-body id=search-result-container><div class="row screen-only"><div class=col-xs-12 data-ng-hide=vm.loading><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pCurrency></b> (<span data-ng-bind=vm.fetchTime|pNumber></span> )</div><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." ng-show=vm.loading class=centered height=50></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable few-paddings" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.STATUS\'|translate" data-ng-class=vm.getColorOfState(item.currentStep.name)><i data-ng-class=vm.getIconOfState(item.currentStep.name) data-ng-attr-title={{item.currentStep.title}}></i></td><td data-title="\'APP.SHARE.ID\'|translate" data-sortable="\'id\'"><a data-ng-attr-title="{{\'APP.ACTIONS.VIEW\'|translate}}" ui-sref=root.trace-detail({id:item.id})><span data-ng-bind=item.id|pNumber></span></a></td><td data-title="\'APP.MODULES.TRACE.MONITORING_USER\'|translate" data-sortable="\'creator.name\'"><span data-ng-bind=item.creator.name></span></td><td data-title="\'APP.MODULES.TRACE.BOUNDED_USER\'|translate" data-sortable="\'user.name\'"><span data-ng-bind=item.user.name></span></td><td data-title="\'APP.MODULES.TRACE.MONITORING_NUMBER\'|translate" data-sortable="\'monitoring.number\'"><a class="btn btn-sm text-info" ng-if=!item.forCommitmentConvert target=_blank data-ng-attr-title="{{\'APP.ACTIONS.VIEW\'|translate}}" ui-sref=root.monitoring.monitoring-details({monitoringId:item.monitoring.id})><span data-ng-bind=item.monitoring.number|pNumber></span></a><label ng-if=item.forCommitmentConvert><i class="icon pe-icon pe-7s-refresh-2 f-17 text-warning"></i> <span data-ng-bind=item.monitoring.number|pNumber></span></label></td><td data-title="\'APP.MODULES.TRACE.MONITORING_CUSTOMER\'|translate" data-sortable="\'monitoring.applicant.applicantName\'"><a class="btn btn-sm text-info" target=_blank data-ng-attr-title="{{\'APP.ACTIONS.VIEW\'|translate}}" ui-sref="root.directive.applicant({monitoringId:item.monitoring.id,monitoringState:\'root.monitoring.monitoring-details\',directiveId:\'xxxxtrace\'})"><span data-ng-bind=item.monitoring.applicant.applicantName></span></a></td><td data-title="\'APP.MODULES.TRACE.PLACE\'|translate" data-sortable="\'monitoring.contract.province.id\'"><span data-ng-bind=item.monitoring.contract.province.title></span> - <span data-ng-bind=item.monitoring.payerBranch.title></span></td><td data-title="\'APP.SHARE.DATE\'|translate" data-sortable="\'alertDate\'"><span data-ng-bind=item.alertDate|jDate|pNumber></span></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><a class="btn btn-sm text-success" data-ng-show="vm.isValidUser(item) && (vm.steps==\'alerted,seen\' || vm.steps== \'waiting\')" data-ng-attr-title="{{\'APP.MODULES.TRACE.DETAIL.TRACE_CLEAR\'|translate}}" data-ng-click="vm.openModal(item,\'clear\')"><span class="icon pe-icon pe-7s-check f-17 f-bold"></span> </a><a class="btn btn-sm text-danger" data-ng-show="vm.isValidUser(item) && (vm.steps==\'alerted,seen\' || vm.steps== \'waiting\')" data-ng-attr-title="{{\'APP.MODULES.TRACE.DETAIL.TRACE_FAILED\'|translate}}" data-ng-click="vm.openModal(item,\'fail\')"><span class="icon pe-icon pe-7s-close-circle f-17 f-bold"></span> </a><a class="btn btn-sm text-warning" data-ng-show="vm.isValidUser(item) && (vm.steps==\'alerted,seen\' || vm.steps== \'waiting\')" data-ng-attr-title="{{\'APP.MODULES.TRACE.DETAIL.TRACE_SEEN_POST_PONE\'|translate}}" data-ng-click="vm.openModal(item,\'postpone\')"><span class="icon pe-icon pe-7s-refresh f-17 f-bold"></span> </a><a class="btn btn-sm text-info" data-ng-show="vm.isValidUser(item) && (vm.steps==\'alerted,seen\' || vm.steps== \'waiting\')" data-ng-attr-title="{{\'APP.MODULES.TRACE.DETAIL.TRANSFER\'|translate}}" data-ng-click="vm.openModal(item,\'transfer\')"><span class="icon pe-icon pe-7s-repeat f-17 f-bold"></span> </a><a class="btn btn-sm text-info" title="{{\'APP.MODULES.MONITORING.FLOW_VIEW.TITLE\'|translate}}" data-ng-click=vm.openFlowModal(item)><span class="icon pe-icon pe-7s-shuffle f-19 f-bold"></span> </a><a class="btn btn-sm text-highlight" title="{{\'APP.ACTIONS.DOWNLOAD_ALL\'|translate}}" data-ng-href="{{\'api/trace/\'+item.id+\'/getAllFilesZipped/\' + item.id +\'.zip\'}}" target=_blank download={{item.id}}.zip><span class="icon pe-icon pe-7s-download f-19 f-bold"></span></a></td></tr></table></div><div class=row><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="icon pe-icon pe-7s-refresh-2 f-17 text-warning"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></span></div><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="fa fa-circle yellowFill"></i> <span class="module-title inline" data-translate=APP.MODULES.TRACE.WAITING></span></div><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="fa fa-circle OrangeFill"></i> <span class="module-title inline" data-translate=APP.MODULES.TRACE.ALERTED></span></div><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="fa fa-circle GrayFill"></i> <span class="module-title inline" data-translate=APP.MODULES.TRACE.SEEN></span></div><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="fa fa-circle GreenFill"></i> <span class="module-title inline" data-translate=APP.MODULES.TRACE.CLEARED></span></div><div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.TRACE.FAILED></span></div></div></div></div></div></div></section></div></div></div>'),
t.put("app/components/update-report/update-report.html",'<div class=container-fluid><h2 class="approve-title screen-only"></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class="module-heading screen-only"><h1 class="module-title inline" data-translate=APP.MODULES.UPDATE_REPORT.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form class="dataTables_wrapper dt-bootstrap search-container screen-only"><div class=row><label data-translate=APP.MODULES.UPDATE_REPORT.LAST_DATE></label>: <span>{{vm.lastUpdate.endDate|jDateTime|pNumber}}</span></div><div class=row><label data-translate=APP.MODULES.UPDATE_REPORT.STATUS></label>: <span>{{vm.lastUpdate.status|updateFilter}}</span> <i class="fa fa-spinner fa-spin" data-ng-show="vm.lastUpdate.status == \'Processing\'"></i></div><div class=row><button class="btn btn-success form-control" data-ng-disabled=vm.loading data-ng-click=vm.updateReport() data-translate=APP.MODULES.UPDATE_REPORT.UPDATE></button></div></form><div class="row text-center" data-ng-show=vm.loading><label data-ng-show=vm.loading>بانک اطلاعاتی در حال بروز رسانی می باشد لطفا تا کامل شدن این کار صبر کنید ...</label><img alt="در حال برور زسانی گزارشات ..." class=centered height=50 ng-show=vm.loading src=assets/images/loading-sm.gif></div></div><div class=screen-only><br><br></div><!--<div class="well screen-only" data-ng-hide="vm.loading && !vm.duration">\r\n                                    مدت زمان بارگیری:\r\n                                    {{vm.duration|pNumber}}\r\n                                </div>--></div></div></div></div></section></div></div></div>'),t.put("app/components/users/add-edit-user.html",'<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><!-- /.row --><div class=row><div class="module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12"><section class=module><div class=module-inner><div class=module-heading><h1 class=module-title data-ng-if=!vm.username data-translate=APP.MODULES.USER.ACTIONS.ADD></h1><h1 class="module-title inline" data-ng-if=vm.username data-translate=APP.MODULES.USER.ACTIONS.EDIT></h1><a class="btn btn-sm text-info inline" data-ng-if=vm.username data-ui-sref=root.users.details({username:vm.username}) uib-tooltip="{{\'APP.MODULES.USER.ROLES_ACCESSES\'|translate}}"><i class="icon pe-icon pe-7s-info f-20"></i></a></div><!--add document--><div class=module-content><div class=module-content-inner><div><pane-body><form name=userForm novalidate><!--username--><div class=row><div class="col-lg-6 form-group pull-right" data-ng-class="{\'has-error\':(userForm.username.$invalid &&!userForm.username.$pristine)\r\n                                                , \'has-success\': (!userForm.username.$invalid && userForm.username.$dirty)}"><span class=red-star data-ng-show=!vm.username>*</span><label for=username data-translate=APP.MODULES.USER.USERNAME></label><span class=text-danger ng-show="userForm.username.$invalid &&!userForm.username.$pristine" data-translate="username error"></span> <span data-ng-show=vm.username class=form-control data-ng-bind=vm.user.username></span> <input class=form-control type=text id=username name=username data-ng-if=!vm.username ng-pattern=/^[0-9]*$/ data-ng-model=vm.user.username auto-focus=true required></div><div class="col-lg-6 form-group pull-right" data-ng-class="{\'has-error\':userForm.name.$invalid &&!userForm.name.$pristine,\r\n                                                    \'has-success\':userForm.name.$valid &&  userForm.name.$dirty}"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label><input class=form-control type=text id=name name=name data-ng-model=vm.user.name required></div><!--identification--><!--<div class="col-lg-6 form-group pull-right"\r\n                                                 data-ng-class="{\'has-error\':userForm.identification.$invalid &&!userForm.identification.$pristine,\r\n                                                    \'has-success\':userForm.identification.$valid &&  userForm.identification.$dirty}">\r\n                                                <label for="identification"\r\n                                                       data-translate="APP.MODULES.USER.IDENTIFICATION"></label>\r\n                                                <input class="form-control" type="text"\r\n                                                       id="identification" name="identification"\r\n                                                       data-ng-model="vm.user.identification">\r\n                                            </div>--><!--level--><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.level.$invalid &&  !userForm.level.$pristine,\r\n                                                    \'has-success\':userForm.level.$valid &&  userForm.level.$dirty}"><span class=red-star>*</span><label for=level data-translate=APP.MODULES.USER.LEVEL></label><select class=form-control id=level name=level data-ng-options="level.id as level.name for level in vm.levels" data-ng-model=vm.user.level required></select></div></div><!--economicSection--><div class="col-md-6 pull-right" ng-if="vm.user.level === \'STAFF\'"><div class=form-group data-ng-class="{\'has-error\':userForm.economicSection.$invalid &&  !userForm.economicSection.$pristine,\r\n                                                    \'has-success\':userForm.economicSection.$valid &&  userForm.economicSection.$dirty}"><label for=economicSection data-translate=APP.MODULES.USER.ECONOMIC_SECTION></label><div class=input-group><select class=form-control id=economicSection name=economicSection data-ng-options="economicSection.id as economicSection.name for economicSection in vm.economicSections" data-ng-model=vm.user.economicSection.id></select><span class="input-group-addon cursor-pointer" ng-click="vm.user.economicSection = null"><i class="fa fa-remove text-danger"></i></span></div></div></div><!--province--><div class="col-md-6 pull-right" data-ng-if="vm.user.level === \'PROVINCE\' || vm.user.level === \'BRANCH\'"><div class=form-group data-ng-class="{\'has-error\':userForm.province.$invalid &&  !userForm.province.$pristine,\r\n                                                    \'has-success\':userForm.province.$valid &&  userForm.province.$dirty}"><span class=red-star>*</span><label for=province data-translate=APP.MODULES.USER.PROVINCE></label><div class=input-group><select class=form-control data-ng-change=vm.getBranches() id=province name=province data-ng-options="province.id as province.title for province in vm.provinces" data-ng-model=vm.user.province.id required></select><span class="input-group-addon cursor-pointer" ng-click="vm.user.province = null"><i class="fa fa-remove text-danger"></i></span></div></div></div><!--branch--><div class="col-md-6 pull-right" data-ng-if="vm.user.level === \'BRANCH\'"><div class=form-group data-ng-class="{\'has-error\':userForm.branch.$invalid &&  !userForm.branch.$pristine,\r\n                                                    \'has-success\':userForm.branch.$valid &&  userForm.branch.$dirty}"><span class=red-star>*</span><label for=branch data-translate=APP.MODULES.USER.BRANCH></label><div class=input-group><select class=form-control data-ng-change=vm.getBranches() id=branch name=branch data-ng-options="branch.id as branch.title for branch in vm.branches" data-ng-model=vm.user.branch.id required></select><span class="input-group-addon cursor-pointer" ng-click="vm.user.branch = null"><i class="fa fa-remove text-danger"></i></span></div></div></div><!--phoneNumber--><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.phoneNumber.$invalid &&  !userForm.phoneNumber.$pristine,\r\n                                                    \'has-success\':userForm.phoneNumber.$valid &&  userForm.phoneNumber.$dirty}"><label for=phoneNumber data-translate=APP.SHARE.PHONE_NUMBER></label><input class=form-control name=phoneNumber id=phoneNumber data-ng-model=vm.user.phoneNumber></div></div><!--address--><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.address.$invalid &&  !userForm.address.$pristine,\r\n                                                    \'has-success\':userForm.address.$valid &&  userForm.address.$dirty}"><label for=address data-translate=APP.SHARE.ADDRESS></label><textarea class=form-control name=address id=address data-ng-model=vm.user.address></textarea></div></div></div><div ng-if=!vm.username><!--password--><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.password.$invalid && !userForm.password.$pristine,\r\n                                                    \'has-success\':userForm.password.$valid && userForm.password.$dirty}"><span class=red-star>*</span><label for=password data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control type=password id=password name=password data-ng-model=vm.user.password required></div></div><!--repeatPassword--><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':(userForm.repeatPassword.$invalid &&!userForm.repeatPassword.$pristine)\r\n                                                     || vm.user.password != vm.repeatPassword ,\r\n                                                      \'has-success\':(!userForm.repeatPassword.$invalid && userForm.repeatPassword.$dirty)\r\n                                                     && vm.user.password == vm.repeatPassword }"><span class=red-star>*</span><label for=repeatPassword data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control type=password id=repeatPassword name=repeatPassword data-ng-model=vm.repeatPassword required></div></div></div><div class="row form-group"><div class="col-lg-12 pull-left"><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-click=vm.onSubmit(userForm); data-ng-disabled="userForm.$invalid  || !vm.username && (vm.user.password != vm.repeatPassword)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form><form name=resetPassForm data-ng-if=vm.username data-ng-submit=vm.resetPassword(resetPassForm) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class="row form-group"><div class="col-lg-6 pull-right" data-ng-class="{\'has-error\':resetPassForm.newPassword.$invalid &&\r\n                                    !resetPassForm.newPassword.$pristine}"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class="col-lg-6 pull-right" data-ng-class="{\'has-error\':resetPassForm.newPasswordRepeat.$invalid &&\r\n                                    !resetPassForm.newPasswordRepeat.$pristine}"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class="row form-group"><div class="col-lg-12 pull-left"><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-disabled="resetPassForm.$invalid||(vm.newPassword!=vm.newPasswordRepeat)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></pane-body></div></div></div></div></section></div></div></div>'),t.put("app/components/users/assign-permission.html",'<form name=addPermissionForm data-ng-submit=vm.assignPermissionToUser();addPermissionForm.$setPristine() novalidate><!--permission --><div class="col-md-2 pull-right"><span class=text-danger>*</span><label data-translate=APP.MODULES.PERMISSION.NAME></label></div><div class="col-md-4 pull-right"><div class=form-group data-ng-class="{\'has-error\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\r\n                             \'has-success\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}"><ui-select theme=bootstrap data-ng-model=vm.permission><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.caption></span></ui-select-match><ui-select-choices repeat="permission in vm.allPermissions |\r\n                                propsFilter : {name: $select.search,caption:$select.search}"><div ng-bind-html="(permission.caption ? permission.caption :permission.name) | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-3 pull-right"><label data-translate=APP.MODULES.PERMISSION.APPLY></label><select ng-model=vm.permission.denied ng-options="o.v as o.n for o in [{ n: \'سلب گردد\', v: true }, { n: \'اعطا گردد\', v: false }]"></select></div><div class="col-md-3 pull-right"><button class="btn btn-default-alt" type=button data-ng-click=vm.cancelAssignPermission()><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt" type=submit data-ng-disabled=addPermissionForm.$invalid><i class="fa fa-check"></i></button></div></form>'),t.put("app/components/users/assign-role.html",'<form name=addRoleForm data-ng-submit=vm.assignRoleToUser();addRoleForm.$setPristine() novalidate><!--role --><div class="col-md-3 pull-right"><span class=text-danger>*</span><label data-translate=APP.MODULES.ROLE.NAME></label></div><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':addRoleForm.role.$invalid && !addRoleForm.role.$pristine,\r\n                             \'has-success\':addRoleForm.role.$valid && addRoleForm.role.$dirty}"><ui-select theme=bootstrap data-ng-model=vm.role><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.caption></span></ui-select-match><ui-select-choices repeat="role in vm.allRoles |\r\n                                propsFilter : {role: $select.search,caption:$select.search}"><div ng-bind-html="(role.caption?role.caption+\' (\'+role.role+\')\':role.role) | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-3 pull-right"><button class="btn btn-default-alt" type=button data-ng-click=vm.cancelAssignRole()><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt" type=submit data-ng-disabled=addRoleForm.$invalid><i class="fa fa-check"></i></button></div></form>'),t.put("app/components/users/user-details.html",'<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><div class=module-heading><h2 class=view-title><span data-translate=APP.MODULES.USER.DETAILS></span>: &nbsp; <span data-ng-bind=vm.user.name></span>&nbsp; (<span data-ng-bind=vm.user.username></span>)<!-- /.col-lg-12 --></h2></div><div class=row><div class="col-lg-12 tabset-container"><uib-tabset active=activeJustified justified=true tabset-class=nav-tabs-theme-1><uib-tab index=0 heading="{{\'APP.MODULES.USER.INFO\'|translate}}"><!-- /.roles --><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h3 class=module-title data-translate=APP.MODULES.USER.INFO></h3><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><form name=userForm novalidate><!--username--><div class=row><div class="col-lg-6 col-md-6 col-xs-12 form-group pull-right" data-ng-class="{\'has-error\':(userForm.username.$invalid &&!userForm.username.$pristine)\r\n                                                , \'has-success\': (!userForm.username.$invalid && userForm.username.$dirty)}"><span class=red-star data-ng-show=!vm.username>*</span><label for=username data-translate=APP.MODULES.USER.USERNAME></label><span class=text-danger ng-show="userForm.username.$invalid &&!userForm.username.$pristine" data-translate="username error"></span> <span data-ng-show=vm.username class=form-control data-ng-bind=vm.user.username></span> <input class=form-control type=text id=username name=username data-ng-if=!vm.username ng-pattern=/^[0-9]*$/ data-ng-model=vm.user.username auto-focus=true required></div><div class="col-lg-6 col-md-6 col-xs-12 form-group pull-right" data-ng-class="{\'has-error\':userForm.name.$invalid &&!userForm.name.$pristine,\r\n                                                    \'has-success\':userForm.name.$valid &&  userForm.name.$dirty}"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label><input class=form-control type=text id=name name=name data-ng-model=vm.user.name required></div><!--level--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.level.$invalid &&  !userForm.level.$pristine,\r\n                                                    \'has-success\':userForm.level.$valid &&  userForm.level.$dirty}"><span class=red-star>*</span><label for=level data-translate=APP.MODULES.USER.LEVEL></label><select class=form-control id=level name=level data-ng-options="level.id as level.name for level in vm.levels" data-ng-model=vm.user.level required></select></div></div><!--economicSection--><!--<div class="col-lg-6 col-md-6 col-xs-12 pull-right"\r\n                                                             ng-if="vm.user.level === \'STAFF\'">\r\n                                                            <div class="form-group"\r\n                                                                 data-ng-class="{\'has-error\':userForm.economicSection.$invalid &&  !userForm.economicSection.$pristine,\r\n                                                    \'has-success\':userForm.economicSection.$valid &&  userForm.economicSection.$dirty}">\r\n\r\n                                                                <label for="economicSection"\r\n                                                                       data-translate="APP.MODULES.USER.ECONOMIC_SECTION"></label>\r\n                                                                <div class="input-group">\r\n                                                                    <select class="form-control"\r\n                                                                            id="economicSection" name="economicSection"\r\n                                                                            data-ng-options="economicSection.id as economicSection.name for economicSection in vm.economicSections"\r\n                                                                            data-ng-model="vm.user.economicSection.id"></select>\r\n                                                                    <span class="input-group-addon cursor-pointer"\r\n                                                                          ng-click="vm.user.economicSection = null">\r\n                                                            <i class="fa fa-remove text-danger"></i>\r\n                                                        </span>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>--><!--province--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.province.$invalid &&  !userForm.province.$pristine,\r\n                                                    \'has-success\':userForm.province.$valid &&  userForm.province.$dirty}"><span class=red-star>*</span><label for=province data-translate=APP.MODULES.USER.PROVINCE></label><div class=input-group><select class=form-control id=province name=province data-ng-change=vm.getBranches() data-ng-options="province.id as province.title for province in vm.provinces" data-ng-model=vm.user.province.id required></select><span class="input-group-addon cursor-pointer" ng-click="vm.user.province = null"><i class="fa fa-remove text-danger"></i></span></div></div></div><!--branch--><div class="col-lg-6 col-md-6 col-xs-12 pull-right" data-ng-if="vm.user.level === \'BRANCH\'"><div class=form-group data-ng-class="{\'has-error\':userForm.branch.$invalid &&  !userForm.branch.$pristine,\r\n                                                    \'has-success\':userForm.branch.$valid &&  userForm.branch.$dirty}"><span class=red-star>*</span><label for=branch data-translate=APP.MODULES.USER.BRANCH></label><div class=input-group><select class=form-control id=branch name=branch data-ng-options="branch.id as branch.title for branch in vm.branches" data-ng-model=vm.user.branch.id required></select><span class="input-group-addon cursor-pointer" ng-click="vm.user.branch = null"><i class="fa fa-remove text-danger"></i></span></div></div></div><!--phoneNumber--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.phoneNumber.$invalid &&  !userForm.phoneNumber.$pristine,\r\n                                                    \'has-success\':userForm.phoneNumber.$valid &&  userForm.phoneNumber.$dirty}"><label for=phoneNumber data-translate=APP.SHARE.PHONE_NUMBER></label><input class=form-control name=phoneNumber id=phoneNumber data-ng-model=vm.user.phoneNumber></div></div><!--address--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.address.$invalid &&  !userForm.address.$pristine,\r\n                                                    \'has-success\':userForm.address.$valid &&  userForm.address.$dirty}"><label for=address data-translate=APP.SHARE.ADDRESS></label><textarea class=form-control name=address id=address data-ng-model=vm.user.address></textarea></div></div></div><div class=row ng-if=!vm.username><!--password--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':userForm.password.$invalid && !userForm.password.$pristine,\r\n                                                    \'has-success\':userForm.password.$valid && userForm.password.$dirty}"><span class=red-star>*</span><label for=password data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control type=password id=password name=password data-ng-model=vm.user.password required></div></div><!--repeatPassword--><div class="col-lg-6 col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':(userForm.repeatPassword.$invalid &&!userForm.repeatPassword.$pristine)\r\n                                                     || vm.user.password != vm.repeatPassword ,\r\n                                                      \'has-success\':(!userForm.repeatPassword.$invalid && userForm.repeatPassword.$dirty)\r\n                                                     && vm.user.password == vm.repeatPassword }"><span class=red-star>*</span><label for=repeatPassword data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control type=password id=repeatPassword name=repeatPassword data-ng-model=vm.repeatPassword required></div></div></div><div class=row><div class=col-xs-12><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-click=vm.updateUser(userForm); data-ng-disabled="userForm.$invalid  || !vm.username && (vm.user.password != vm.repeatPassword)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form><form name=resetPassForm data-ng-if=vm.username data-ng-submit=vm.resetPassword(resetPassForm) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class="col-lg-6 col-md-6 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':resetPassForm.newPassword.$invalid &&\r\n                                    !resetPassForm.newPassword.$pristine}"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class="col-lg-6 col-md-6 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':resetPassForm.newPasswordRepeat.$invalid &&\r\n                                    !resetPassForm.newPasswordRepeat.$pristine}"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class=col-xs-12><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-disabled="resetPassForm.$invalid||(vm.newPassword!=vm.newPasswordRepeat)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=1 heading="{{\'APP.MODULES.ROLE.LIST\'|translate}}"><!-- /.roles --><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h3 class=module-title data-translate=APP.MODULES.ROLE.LIST></h3><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=!vm.toggleAssignRole data-ng-click="vm.toggleAssignRole=!vm.toggleAssignRole"><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.ROLE.ACTIONS.ADD>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddView><div class=panel-body data-ng-show=vm.toggleAssignRole data-ng-include="\'app/components/users/assign-role.html\'"></div><!-- /.panel-heading --></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="item in vm.userRoles"><td data-title="\'APP.SHARE.NAME\'|translate" data-ng-bind=item.role></td><td data-title="\'APP.SHARE.CAPTION\'|translate" data-filter="{caption:\'text\'}" data-ng-bind=item.caption></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><a class=text-danger data-ng-click=vm.deleteRoleFromUser($index)><!--<span class=" icon pe-icon pe-7s-trash f-17">--><i class="icon pe-icon pe-7s-trash f-17"></i></a></td></tr></table></div></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=2 heading="{{\'APP.MODULES.PERMISSION.LIST\'|translate}}"><!-- /.permissions --><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h3 class="module-title pull-right" data-translate=APP.MODULES.PERMISSION.LIST></h3><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=!vm.toggleAssignPermission data-ng-click="vm.toggleAssignPermission=!vm.toggleAssignPermission"><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.PERMISSION.ACTIONS.ADD>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddPermission><div class=panel-body data-ng-show=vm.toggleAssignPermission data-ng-include="\'app/components/users/assign-permission.html\'"></div><!-- /.panel-heading --></pane-body><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center><th data-translate=APP.SHARE.CAPTION></th><th data-translate=APP.MODULES.PERMISSION.APPLY></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat="item in vm.userPermissions"><td data-ng-bind=item.permission.caption data-ng-attr-title={{item.permission.caption}}></td><td data-ng-bind="(item.denied ? \'Abandoned\' : \'Granted\' )|translate"></td><td><a class=text-danger title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click=vm.deletePermissionFromUser(item.permission.id,$index)><i class="icon pe-icon pe-7s-trash f-17"></i></a></td></tr></table></div></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=3 heading="{{\'APP.MODULES.USER.SIGN_UPLOAD\'|translate}}"><!-- /.permissions --><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h3 class="module-title pull-right" data-translate=APP.MODULES.USER.SIGN_UPLOAD></h3><br><br><div class="col-md-5 pull-left"><img id=myimg ng-src={{vm.signUrl}} alt="امضا بارگذاری نشده است" height=400 width=400></div><div class="col-md-7 pull-right"><!--<div class="inline col-md-12 pull-right ">--><!--<label\r\n                                                   data-translate="APP.MODULES.USER.SIGN"></label>--><div class=form-group><file-upload class="form-control inline p-0 b-0" file=vm.attachment.sign data-uploading=vm.uploaded label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><button class="btn btn-default-alt inline" type=button data-ng-click=vm.cancelAddAttachment() uib-tooltip="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt inline" type=button data-ng-click=vm.attachFile() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}" ng-disabled=!vm.attachment><i class="fa fa-upload"></i></button></div></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body></pane-body></div></div></div></section></div></div></uib-tab></uib-tabset></div></div></div>'),t.put("app/components/users/user-me.html",'<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><div class=row><div class="module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12"><section class=module><div class=module-inner><div class=module-heading><h1 class=module-title data-translate=APP.MODULES.AUTH.MY_PROFILE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form name=userForm data-ng-submit=vm.update() novalidate><div class=row><!--username--><div class="col-lg-3 col-md-6 col-xs-12 pull-right"><label for=username data-translate=APP.MODULES.USER.USERNAME></label>: <b id=username data-ng-bind=vm.user.username></b></div><!--name--><div class="col-lg-3 col-md-6 col-xs-12 pull-right"><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label>: <b id=name data-ng-bind=vm.user.name></b></div><!--level--><div class="col-lg-3 col-md-6 col-xs-12 pull-right"><label for=level data-translate=APP.MODULES.USER.LEVEL></label>: <b id=level data-ng-bind=vm.user.level|userLevel></b></div><!--economicSection--><div class="col-lg-3 col-md-6 col-xs-12 pull-right" data-ng-if="vm.user.level === \'STAFF\'"><label for=economicSection data-translate=APP.MODULES.USER.ECONOMIC_SECTION></label>: <b id=economicSection data-ng-bind=vm.user.economicSection.title></b></div><!--province--><div class="col-lg-3 col-md-6 col-xs-12 pull-right" data-ng-show="vm.user.level === \'PROVINCE\' || vm.user.level === \'BRANCH\'"><label for=province data-translate=APP.MODULES.USER.PROVINCE></label>: <b id=province data-ng-bind=vm.user.province.title></b></div><!--branch--><div class="col-lg-3 col-md-6 col-xs-12 pull-right" data-ng-show="vm.user.level === \'BRANCH\'"><label for=branch data-translate=APP.MODULES.USER.BRANCH></label>: <b id=branch data-ng-bind=vm.user.branch.title></b></div><!--phoneNumber--><div class="col-lg-4 col-md-6 col-xs-12 pull-right form-group"><label for=phone-number data-translate=APP.SHARE.PHONE_NUMBER></label>: <input class=form-control ng-pattern=vm.telRegex name=phoneNumber id=phone-number data-ng-model=vm.user.phoneNumber></div><!--address--><div class="col-lg-8 col-md-6 col-xs-12 pull-right form-group"><label for=address data-translate=APP.SHARE.ADDRESS></label>: <input class=form-control type=text name=address id=address data-ng-model=vm.user.address></div></div><div class=row><div class="col-xs-12 pull-left"><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-disabled=userForm.$invalid><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div><br><!--sign--><div class=row><div class=col-xs-12><h3 data-translate=APP.MODULES.USER.SIGN_UPLOAD></h3></div><div class="col-lg-3 col-md-6 col-xs12 pull-right"><file-upload class="inline col-xs-8 pull-right" file=vm.attachment.sign data-uploading=vm.uploaded label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><button class="btn btn-primary-alt inline" type=button ng-click=vm.setSign();addAttachmentForm.$setPristine() title="{{\'APP.ACTIONS.UPLOAD\'|translate}}" ng-disabled=!vm.attachment><i class="fa fa-upload"></i></button> <button class="btn btn-default-alt inline" type=button data-ng-click=vm.cancelAddAttachment() title="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button></div><div class="col-lg-3 col-md-6 col-xs12 pull-right"><div data-ng-class="{\'danger\': vm.attachment.sign.size > 7000000}" data-ng-show=vm.attachment.sign>حجم فایل: <span data-ng-bind=vm.attachment.sign.size|fileSize></span></div></div><div class="col-lg-6 col-md-12 col-xs12 pull-right"><img class=pull-left ng-src="{{vm.getSignUrl(vm.user)}}?data={{vm.date}}" height=100 alt="امضا ثبت نشده است"></div></div></form><form name=changePassword data-ng-submit=vm.changePassword(changePassword) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class="col-lg-4 col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.oldPassword.$invalid &&\r\n                                    !changePassword.oldPassword.$pristine}"><span class=red-star>*</span><label for=oldPassword data-translate=APP.MODULES.AUTH.OLD_PASSWORD></label><input class=form-control type=password id=oldPassword name=oldPassword data-ng-model=vm.oldPassword required></div><div class="col-lg-4 col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.newPassword.$invalid &&\r\n                                    !changePassword.newPassword.$pristine}"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class="col-lg-4 col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.newPasswordRepeat.$invalid &&\r\n                                    !changePassword.newPasswordRepeat.$pristine}"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class="col-xs-12 pull-left"><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-disabled="changePassword.$invalid||(vm.newPassword!=vm.newPasswordRepeat)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></div></div></div></div></section></div></div></div>'),
t.put("app/components/users/users-list.html",'<div class=container-fluid><h2 class=view-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.USER.LIST></h1><div class=pull-left><!--<a class="btn btn-sm btn-primary-alt m-l-1"\r\n                               data-ng-click="showFilters = !showFilters">\r\n                                <i class="fa fa-search"></i>\r\n                                <span data-translate="APP.ACTIONS.SEARCH"></span>\r\n                            </a>--> <a class="btn btn-sm btn-success-alt" data-ui-sref=root.users.user><i class="fa fa-plus-circle"></i> <span data-translate=APP.MODULES.USER.ACTIONS.ADD></span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer" ng-if="vm.provinces && vm.roles"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat="user in $data"><td data-title="\'APP.SHARE.ENABLE\'|translate" data-sortable="\'isEnable\'" data-filter="{enable:\'select\'}" data-filter-data=vm.userStatus><toggle data-ng-model=user.enable data-ng-change=vm.changeEnabledUser(user) on="{{\'APP.SHARE.ENABLE\'|translate}}" onstyle="btn-success vazir" off="{{\'APP.SHARE.DISABLE\'|translate}}" offstyle="btn-danger vazir"></toggle></td><!--name--><td data-title="\'APP.MODULES.USER.FULL_NAME\'|translate" data-sortable="\'name\'" data-filter="{name:\'text\'}"><a data-ui-sref="root.users.details({username: user.username})" title="{{\'APP.ACTIONS.UPDATE\'|translate}}"><span data-ng-bind=user.name></span></a></td><!--username--><td data-title="\'APP.MODULES.USER.USERNAME\'|translate" data-sortable="\'username\'" data-filter="{username:\'text\'}"><a data-ui-sref="root.users.user({username: user.username})" title="{{\'APP.ACTIONS.UPDATE\'|translate}}"><span data-ng-bind=user.username></span></a></td><!--level--><td data-title="\'APP.MODULES.USER.LEVEL\'|translate" data-sortable="\'level\'" data-filter="{level:\'select\'}" data-filter-data=vm.levels data-ng-bind=user.level|userLevel|translate></td><!--province--><td data-title="\'APP.MODULES.USER.PROVINCE\'|translate" data-sortable="\'province\'" data-filter="{province:\'select\'}" data-filter-data=vm.provinces data-ng-bind=user.province.title></td><!--economicSection--><td data-title="\'APP.MODULES.USER.ECONOMIC_SECTION\'|translate" data-sortable="\'economicSection\'" data-filter="{economicSection:\'select\'}" data-filter-data=vm.economicSections data-ng-bind=user.economicSection.name></td><!--roles--><td data-title="\'APP.MODULES.USER.ROLES\'|translate" data-filter="{role:\'select\'}" data-filter-data=vm.roles><div data-ng-repeat="role in user.roles" data-ng-bind=role.caption class=role></div></td><!--operations--><!--<td data-title="\'APP.SHARE.OPERATION\'|translate">\r\n                                                <a class="btn btn-sm text-danger"\r\n                                                   title="{{\'APP.ACTIONS.DELETE\'|translate}}"\r\n                                                   data-ng-click="vm.deleteUser(user.username,$index)">\r\n                                                    <i class=" icon pe-icon pe-7s-trash f-20"></i>\r\n                                                </a>\r\n                                            </td>--></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/usersReport/usersReport.html",'<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><!-- header --><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.USERS_REPORT.TITLE></h1><div class=clearfix></div></div><!--main area--><div class=module-content><div class=module-content-inner><!--scores table--><div class="pane-body row screen-only"><div class="dataTables_wrapper form-inline dt-bootstrap no-footer col-lg-8 col-lg-offset-2"><table class="hover no-footer row-border dataTable"><tr><th class=text-center colspan=3 data-translate=APP.MODULES.USERS_REPORT.SCORE_TABLE></th></tr><tr><th class=text-center data-translate=APP.MODULES.USERS_REPORT.ACTION></th><th class=text-center data-translate=APP.MODULES.USERS_REPORT.ACCEPT_WEIGHT></th><th class=text-center data-translate=APP.MODULES.USERS_REPORT.REJECT_WEIGHT></th></tr><tr class=text-center data-ng-repeat="item in vm.items" title={{item.step.id}}><td data-ng-bind=item.step.title></td><td><input class=form-control data-ng-disabled=!vm.isAdmin title="{{\'APP.MODULES.USERS_REPORT.ACCEPT_WEIGHT\'|translate}}" dir=ltr data-ng-model=item.ACCEPT data-ng-change="vm.save(item, \'ACCEPT\')" data-ng-model-options="{ debounce: 2000 }"></td><td><input class=form-control data-ng-disabled=!vm.isAdmin title="{{\'APP.MODULES.USERS_REPORT.REJECT_WEIGHT\'|translate}}" dir=ltr data-ng-model=item.REJECT data-ng-change="vm.save(item, \'REJECT\')" data-ng-model-options="{ debounce: 2000 }"></td></tr></table></div></div><!--search form--><div class="pane-body screen-only"><form class="dataTables_wrapper dt-bootstrap search-container" name=reportsForm data-ng-submit=vm.getReport()><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate></simple-date></div></div><div class="col-md-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate></simple-date></div></div><div class="col-md-4 pull-right" data-ng-show=vm.isAdmin><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><select class=form-control ng-model=vm.reportParams.province name=reportType ng-options="province as province.title for province in vm.provinces"></select></div></div><div class="col-sm-6 col-md-4 pull-right" data-ng-show=vm.isAdmin><div class=form-group><label data-translate=APP.MODULES.USER.USERS></label><ui-select multiple ng-model=vm.selectedUsers theme=bootstrap id=selected-users sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.USER.ACTIONS.SEARCH\'|translate}}">{{$item.name}} &lt;{{$item.username}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshUsers($select.search) repeat="user.username as user in vm.users | propsFilter: {name: $select.search, username: $select.search}"><div><span ng-bind-html="user.name | highlight: $select.search"></span> ( <span ng-bind-html="user.username | highlight: $select.search"></span> )</div><small><span ng-bind-html="\'\'+user.province.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><div class=col-md-6><div class=form-group><button type=button class="btn btn-info pull-left m-r-1" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button> <button type=submit class="btn btn-success pull-left" title="{{\'APP.ACTIONS.REPORT_VIEW\'|translate}}"><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form></div><!--main result--><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable user-report-table-header screen-only" style="opacity: 0" id=header-table><tr class=text-center><th><div data-translate=APP.MODULES.USERS_REPORT.PERSON id=th1></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.STEPS id=th2></div></th><th data-ng-repeat="item in vm.items"><div data-ng-bind=item.step.title id=th{{$index+3}}></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_ACCEPT id=th8></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_REJECT id=th9></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_CARTABLE id=th10></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SCORE id=th11></div></th></tr></table><table class="hover no-footer row-border dataTable user-report-table" id=main-table><thead><tr class=text-center><th data-translate=APP.MODULES.USERS_REPORT.PERSON></th><th data-translate=APP.MODULES.USERS_REPORT.STEPS></th><th data-ng-repeat="item in vm.items" data-ng-bind=item.step.title></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_ACCEPT></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_REJECT></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_CARTABLE></th><th data-translate=APP.MODULES.USERS_REPORT.SCORE></th></tr></thead><tbody><tr data-ng-repeat-start="item in vm.report" class=text-center data-ng-hide=item.hidden ng-class="{\'selected\':item.selected}"><td rowspan=3 class=cursor-pointer data-ng-dblclick="item.selected = !item.selected" title="{{\'Double click for select\'|translate}}"><span data-ng-bind="($index+1|pNumber) + \'- \'"></span> <span data-ng-bind=item.user.name></span><div ng-if=item.user.province><span data-ng-bind="\'(\'"></span> <span data-ng-bind=role.caption data-ng-repeat-start="role in item.user.roles"></span> <span data-ng-if=item.user.roles[$index+1] data-ng-repeat-end="">و </span><span data-ng-if=item.user.roles.length>در </span><span data-ng-bind=item.user.province.title></span> <span data-ng-bind="\')\'"></span></div></td><td class=bg-gray-1 data-translate=APP.MODULES.USERS_REPORT.ACCEPT></td><td class="cursor-pointer bg-gray-1" data-ng-bind=userScore.accept|pNumber data-ng-click="vm.showDetails(\'accept\', item.user, vm.items[$index].step)" title="{{item.user.name}}: {{vm.items[$index].step.title}} | تائید = {{vm.items[$index].ACCEPT*userScore.accept|pNumber}}" data-ng-repeat="userScore in item.userScores track by $index"></td><td rowspan=3 class="cursor-pointer bg-gray-1" data-ng-bind=item.sum.accept|pNumber title="{{item.user.name}} : مجموع تائيد = {{item.sum.accept|pNumber}}"></td><td rowspan=3 class="cursor-pointer bg-gray-2" data-ng-bind=item.sum.reject|pNumber title="{{item.user.name}} : مجموع بازگشت = {{item.sum.reject|pNumber}}"></td><td rowspan=3 class="cursor-pointer bg-gray-3" data-ng-bind=item.sum.cartable|pNumber title="{{item.user.name}} : مجموع  کارتابل = {{item.sum.cartable|pNumber}}"></td><td rowspan=3 data-ng-bind=item.finalScore|number:2|pNumber title="{{item.user.name}} : مجموع امتیاز = {{item.finalScore|pNumber}}"></td></tr><tr ng-class="{\'selected\':item.selected}" data-ng-hide=item.hidden><td class=bg-gray-2 data-translate=APP.MODULES.USERS_REPORT.REJECT></td><td class="cursor-pointer bg-gray-2" data-ng-bind=userScore.reject|pNumber data-ng-click="vm.showDetails(\'reject\', item.user, vm.items[$index].step)" title="{{item.user.name}}:{{vm.items[$index].step.title}} | بازگشت = {{vm.items[$index].REJECT*userScore.reject|pNumber}}" data-ng-repeat="userScore in item.userScores track by $index"></td><!--<td class="cursor-pointer bg-gray-2" data-ng-bind="item.sum.reject|pNumber"\r\n                                                title="{{item.user.name}} : مجموع بازگشت = {{item.sum.reject|pNumber}}"></td>--></tr><tr data-ng-repeat-end="" ng-class="{\'selected\':item.selected}" data-ng-hide=item.hidden><td class=bg-gray-3 data-translate=APP.MODULES.USERS_REPORT.CARTABLE></td><td class="cursor-pointer bg-gray-3" data-ng-bind=userScore.cartable|pNumber data-ng-click="vm.showDetails(\'cartable\', item.user, vm.items[$index].step)" title="{{item.user.name}}:{{vm.items[$index].step.title}} | کارتابل = {{userScore.cartable|pNumber}}" data-ng-repeat="userScore in item.userScores track by $index"></td><!--<td class="cursor-pointer bg-gray-3"\r\n                                                data-ng-bind="item.sum.cartable|pNumber"\r\n                                                title="{{item.user.name}} : مجموع  کارتابل = {{item.sum.cartable|pNumber}}"></td>--></tr></tbody><!--<tfoot>--><tr class=text-center data-ng-show="vm.report.length && !vm.selectedUsers.length"><td rowspan=3 class=cursor-pointer><span data-translate=APP.MODULES.USERS_REPORT.SUM></span></td><td class=bg-gray-11 data-translate=APP.MODULES.USERS_REPORT.ACCEPT></td><td class="cursor-pointer bg-gray-11" data-ng-bind=vm.sum[item.step.id].accept|pNumber title="{{\'APP.MODULES.USERS_REPORT.SUM\'|translate}}: {{item.step.title}} | تائید = {{vm.sum[item.step.id].accept|pNumber}}" data-ng-repeat="item in vm.items"></td><td rowspan=3 class="cursor-pointer bg-gray-11" data-ng-bind=vm.sums.accept|pNumber title="مجموع تائيد  {{vm.sums.accept|pNumber}}"></td><td rowspan=3 class="cursor-pointer bg-gray-22" data-ng-bind=vm.sums.reject|pNumber title="مجموع بازگشت  {{vm.sums.reject|pNumber}}"></td><td rowspan=3 class="cursor-pointer bg-gray-33" data-ng-bind=vm.sums.cartable|pNumber title="مجموع  کارتابل {{vm.sums.cartable|pNumber}}"></td><td rowspan=3 data-ng-bind=vm.sums.averageScore|number:2|pNumber></td></tr><tr data-ng-show="vm.report.length && !vm.selectedUsers.length"><td class=bg-gray-22 data-translate=APP.MODULES.USERS_REPORT.REJECT></td><td class="cursor-pointer bg-gray-22" data-ng-bind=vm.sum[item.step.id].reject|pNumber title="{{\'APP.MODULES.USERS_REPORT.SUM\'|translate}}: {{item.step.title}} | بازگشت = {{vm.sum[item.step.id].reject|pNumber}}" data-ng-repeat="item in vm.items"></td></tr><tr data-ng-show="vm.report.length && !vm.selectedUsers.length"><td class=bg-gray-33 data-translate=APP.MODULES.USERS_REPORT.CARTABLE></td><td class="cursor-pointer bg-gray-33" data-ng-bind=vm.sum[item.step.id].cartable|pNumber title="{{\'APP.MODULES.USERS_REPORT.SUM\'|translate}}: {{item.step.title}} | کارتابل = {{vm.sum[item.step.id].cartable|pNumber}}" data-ng-repeat="item in vm.items"></td></tr><!--</tfoot>--></table></div></div></div></div></div></section></div></div></div>'),t.put("app/directives/back-button/back-button.html",'<div class="row m-b-1 m-t-1 back-button-container"><div class=col-xs-12><i class="icon pe-icon pe-7s-back f-17 f-bold mirrored cursor-pointer" data-ng-attr-title="{{\'APP.ACTIONS.BACK\'|translate}}"></i><!--<button class="btn btn-default-alt" type="button">\r\n            <i class="icon pe-icon pe-7s-back f-17 f-bold mirrored"></i>\r\n            <span data-translate="APP.ACTIONS.BACK"></span>\r\n        </button>--></div></div>'),t.put("app/directives/confirm/confirm-tpl.html",'<div class=modal-header ng-if=data.title><h5 class=modal-title data-ng-bind=data.title></h5></div><div class="modal-body text-center"><span class=text-center data-ng-bind="((data.text||\'APP.MESSAGES.SURE\')|translate)|pNumber"></span><br><br><div class=text-center><button class="btn btn-sm btn-info" ng-click=ok() data-ng-bind=data.ok></button> <button class="btn btn-sm btn-danger" ng-click=cancel() data-ng-bind=data.cancel></button></div></div>'),t.put("app/directives/file-upload/file-upload.html",'<span class="btn btn-default fileinput-button"><i class="fa fa-file-o"></i> <span data-ng-bind="(file.name || label)| limitTo:15"></span><!-- The file input field used as target for the file upload widget --> <input class=fileupload name=file type=file accept=".jpg, .png, .doc, .docx, .xls, .xlsx, .pdf, .zip, .rar" data-file-model=file> <i class="fa fa-spinner fa-spin" data-ng-if=uploading></i> </span>'),t.put("app/directives/hierarchy/hierarchy.html",'<div><span ng-repeat="node in parents" ng-bind="node[caption] + \' > \'" ng-click=prone($index) style="margin: 10px" class=pull-right></span><select ng-options="child as child[caption] for child in model[children]" data-ng-model=treeModel ng-change=addChild() id={{id}} class={{class}} ng-show="model[children] && model[children].length"></select></div>'),t.put("app/directives/ng-table/command-buttons.html",'<span><a class="btn btn-sm text-warning" title="{{\'APP.ACTIONS.CANCEL\'|translate}}" data-ng-click=vm.cancel() data-ng-show=vm.toggle><span class="icon pe-icon pe-7s-close f-20"></span> </a><a class="btn btn-sm text-success" title="{{\'APP.ACTIONS.OK\'|translate}}" data-ng-click=vm.edit() data-ng-show=vm.toggle data-ng-class="{\'disabled\':vm.disabled}" data-ng-disabled=vm.disabled><span class="icon pe-icon pe-7s-check f-20"></span> </a><a class="btn btn-sm text-info" title="{{\'APP.ACTIONS.UPDATE\'|translate}}" data-ng-click=vm.toggled() data-ng-show="!vm.toggle && vm.hasEdit"><span class="icon pe-icon pe-7s-note f-20"></span> </a><a class="btn btn-sm text-danger" title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click=vm.delete() data-ng-disabled=vm.disabled data-ng-show="!vm.toggle && vm.hasDelete"><span class="icon pe-icon pe-7s-trash f-20"></span> </a></span>'),t.put("app/directives/ng-table/pagination-tpl.html",'<div class="ng-cloak ng-table-pager" ng-if=params.data.length style="margin: 10px 1px"><ul class="pagination ng-table-pagination pull-left"><li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch=page.type><a ng-switch-when=prev ng-click=params.page(page.number) href="">&raquo;</a> <a ng-switch-when=first ng-click=params.page(page.number) href=""><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=page ng-click=params.page(page.number) href=""><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=more ng-click=params.page(page.number) href="">&#8230;</a> <a ng-switch-when=last ng-click=params.page(page.number) href=""><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=next ng-click=params.page(page.number) href="">&laquo;</a></li></ul><span ng-if="params.settings().counts.length && params.total() > 0" class="ng-table-counts btn-group btn-group-sm"><button ng-repeat="count in params.settings().counts" type=button ng-class="{\'active\':params.count()==count}" ng-click=params.count(count) class="btn btn-default"><span ng-bind=count|pNumber></span></button></span></div>'),t.put("app/directives/simpleDate/simple-date.html","<input class=form-control type=text dir=ltr data-ng-attr-title=\"{{min ? 'مقدار این فیلد باید بعد از تاریخ ' + (min|jDate) + ' باشد' : ''}}\" ui-mask=9999/99/99 model-view-value=true ui-validate=\"{invalidDate : 'isValidDate($value)' }\">"),t.put("app/main/footer/footer.html",'<footer id=footer class="footer screen-only" style=margin-right:180px><!--<div class="container">\r\n        <img class="img-responsive header-background" width="70"\r\n             src="../../assets/images/samat.png">\r\n        <div class="row copyright">\r\n            <i class="fa fa-copyright"></i>\r\n            <span data-translate="APP.MAIN.FOOTER"></span>\r\n        </div>\r\n    </div>--><div><div class=row><div class="module-wrapper col-xs-12"><section class="module module-projects-overview" style="height: 14vh;padding: 1vh; margin-bottom: 0"><div class="module-inner p-t-0 p-b-0"><div class=module-content><div class="module-content-inner p-t-0 p-b-0"><pane-body><img class="img-responsive header-background" width=70 src=../../assets/images/samat.png><div class="row copyright"><i class="fa fa-copyright"></i> <span data-translate=APP.MAIN.FOOTER></span></div></pane-body></div></div></div></section></div></div></div></footer>'),t.put("app/main/header/header.html",'<header class="header screen-only"><div class="btn-group user-section" uib-dropdown dropdown-append-to-body style="position: fixed"><div id=btn-append-to-body class=user-name uib-dropdown-toggle><span data-ng-bind=headerVm.user.name></span> <span class=pe-7s-user></span></div><ul class=dropdown-menu uib-dropdown-menu role=menu aria-labelledby=btn-append-to-body><li role=menuitem><a data-translate=APP.MODULES.AUTH.MY_PROFILE ui-sref=root.users.me()></a></li><li role=menuitem><a><span data-translate=APP.MODULES.AUTH.MY_ROLES></span>:</a></li><li role=menuitem data-ng-repeat="role in headerVm.user.roles"><a><span class="icon pe-icon pe-7s-smile f-17"></span> <span data-ng-bind=role.caption></span></a></li><li role=menuitem data-ng-show=!headerVm.user.roles.length><a class=text-warning data-translate=APP.MODULES.AUTH.NO_ROLE></a></li><li class=divider></li><li role=menuitem><a ng-click=headerVm.logout()><span class="icon pe-icon pe-7s-power f-17"></span> <span data-translate=APP.MODULES.AUTH.LOGOUT></span> </a></li></ul></div><div class="branding float-left"><h1 class="logo text-center p-1"><a href=index.html><!--<img class="logo-icon" src="assets/images/logo-icon.svg" alt="icon"/>--> <img src=../../../assets/images/boreder-logo.png><br><small class=logo-text>سامانه نظارت بر اعطای تسهیلات</small></a></h1></div><div class=topbar ng-if=false><h1 class="inline-block m-r-2 m-t-1"></h1><div class="navbar-tools m-t-1"><!-- Simple dropdown --><div uib-dropdown on-toggle=toggled(open) ng-if="getMedia(\'xl\') || getMedia(\'lg\') || getMedia(\'md\')"><a href id=simple-dropdown uib-dropdown-toggle><i class="icon pe-icon pe-7s-user f-17"></i> <span data-ng-bind=headerVm.user.name>loading....</span> <i class="fa fa-caret-down"></i></a><ul class=dropdown-menu uib-dropdown-menu aria-labelledby=simple-dropdown><li><a ng-click=headerVm.logout() uib-tooltip=خروج><span class="icon pe-icon pe-7s-power f-17"></span> <span>خروج</span></a></li></ul></div><a class="btn btn-default-alt" data-ng-click=headerVm.logout() ng-if="getMedia(\'xs\') || getMedia(\'sm\')"><span class="icon pe-icon pe-7s-power f-17 c-white"></span> <span>خروج</span></a></div></div></header>'),t.put("app/main/sidebar/sidebar.html",'<div class=main-nav-wrapper ng-cloak ng-style=calculatedNavWrapperStyle style="-webkit-transition: min-height 2s; -moz-transition: min-height 2s;-ms-transition: min-height 2s;-o-transition: min-height 2s;transition: min-height 2s"><!-- and Alan would kill me :D --><nav id=main-nav class=main-nav><ul id=menu ng-if=sideVm.loaded><li class=user-item><a data-ng-click="sideVm.signOutToggle = !sideVm.signOutToggle"><!--<i class="icon pe-icon pe-7s-user f-17"></i>--> <span class=nav-label><span data-ng-bind="sideVm.user.name + \' (\' "></span> <span data-ng-bind="\'ستاد\'" ng-if="sideVm.user.level === \'STAFF\'"></span> <span data-ng-bind=sideVm.user.province.title ng-if="sideVm.user.level === \'PROVINCE\'"></span> <span data-ng-bind=sideVm.user.branch.title ng-if="sideVm.user.level === \'BRANCH\'"></span> <span data-ng-bind="\')\'"></span> </span><span class="icon pe-icon pe-7s-user f-20 pull-left"></span></a><ul class=sub-menu data-uib-collapse=sideVm.signOutToggle><li><a ng-click=headerVm.logout() uib-tooltip=خروج><span class="icon pe-icon pe-7s-power f-17"></span> <span>خروج</span></a></li></ul></li><li class=divider></li><li data-ui-sref-active=active data-ng-repeat="item in sideVm.data.items" data-ng-show="sideVm.hasRole(item.authorities) || sideVm.hasPermission(item.permissions)"><a data-ng-if=!item.state data-ng-click=sideVm.check($index)><span class={{item.icon}}></span> <span class=nav-label data-ng-bind=item.caption|translate></span> <span class=nav-label data-ng-show="item.params.count!==undefined" data-ng-bind="\'(\' +(item.params.count|pNumber)+\')\'"></span> <span class="fa arrow" data-ng-show=item.children.length></span> </a><a data-ng-if=item.state data-ui-sref={{item.state}}({{item.params}}) data-ng-click=sideVm.check($index)><span class={{item.icon}}></span> <span class=nav-label data-ng-bind=item.caption|translate></span> <span class=nav-label data-ng-show="item.params.count!==undefined" data-ng-bind="\'(\' +(item.params.count|pNumber)+\')\'"></span> <span class="fa arrow" data-ng-show=item.children.length></span> </a><!--nav-second-level--><ul class=sub-menu data-uib-collapse="sideVm.collapseVar!=$index"><li data-ui-sref-active=active data-ng-repeat="field in item.children" data-ng-show="sideVm.hasRole(field.authorities) || sideVm.hasPermission(field.permissions)"><a data-ng-if=!field.state data-ng-click=sideVm.multiCheck($index)><span class={{field.icon}}></span> <span class=nav-label data-ng-bind=field.caption|translate></span> <span class=nav-label data-ng-show="field.params.count!==undefined" data-ng-bind="\'(\' +(field.params.count|pNumber)+\')\'"></span> <span class="fa arrow" data-ng-show=field.children.length></span> </a><a data-ng-if=field.state data-ui-sref={{field.state}}({{field.params}}) data-ng-click=sideVm.multiCheck($index)><i class={{field.icon}}></i> <span class=nav-label data-ng-bind=field.caption|translate></span> <span class=nav-label data-ng-show="field.params.count!==undefined" data-ng-bind="\'(\' +(field.params.count|pNumber)+\')\'"></span> <span class="fa arrow" data-ng-show=field.children.length></span> </a><!--nav-third-level--><ul class="nav nav-third-level" data-uib-collapse="sideVm.multiCollapseVar!=$index"><li data-ui-sref-active=active data-ng-repeat="child in field.children"><a data-ui-sref={{child.state}}({{child.params}})><i class={{child.icon}}></i> <span data-ng-bind=child.caption|translate></span></a></li></ul><!-- /.nav-third-level --></li></ul><!-- /.nav-second-level --></li></ul></nav></div>'),t.put("app/components/sample/sample.html",'<div class=container-fluid><h2 class=view-title data-translate=APP.MODULES.SAMPLE.TITLE></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.SAMPLE.LIST></h1><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=vm.toggleAddSample data-ng-click="vm.toggleAddSample=!vm.toggleAddSample"><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddSample><form class=form-inline name=addSampleForm data-ng-submit=vm.createSample();addSampleForm.$setPristine() novalidate><div class=form-group data-ng-class="{\'has-error\':addSampleForm.name.$invalid &&!addSampleForm.name.$pristine}"><span class=red-star>*</span><label for=view data-translate=APP.SHARE.NAME></label><input class=form-control type=text id=view name=view auto-focus={{!vm.toggleAddSample}} placeholder="{{\'APP.SHARE.NAME\'|translate}}" data-ng-model=vm.view.name required></div><button class="btn btn-default-alt" type=button data-ng-click=vm.cancelAddSample() uib-tooltip="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button> <button class="btn btn-primary-alt" type=submit uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-disabled=addSampleForm.$invalid><i class="fa fa-check"></i></button></form></pane-body><pane-body><div class="dataTables_wrapper table-responsive form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=15%><col width=70%><col width=15%></colgroup><tr class=text-center data-ng-repeat="item in $data"><td data-title="\'APP.SHARE.INDEX\'|translate" data-ng-bind=item.id></td><td data-title="\'APP.SHARE.NAME\'|translate" data-filter="{view:\'text\'}"><span data-ng-bind=item.name data-ng-show=!vm.toggleEditSample[$index]></span><form name=viewForm{{$index}} data-ng-show=vm.toggleEditSample[$index] novalidate><div class=form-group data-ng-class="{\'has-error\':view.$invalid && !view.$pristine}"><input class=form-control type=text auto-focus={{vm.toggleEditSample[$index]}} placeholder="{{\'APP.SHARE.CAPTION\'|translate}}" data-ng-model=item.name name=view required></div></form></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons cancel=vm.cancelEditSample($index) disabled edit="vm.updateSample(item, $index)" delete="vm.deleteSample(item.id, $index)" has-delete=true toggle=vm.toggleEditSample[$index]></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>'),t.put("app/components/auth/errors/401.html",'<section id=error404-wrapper class=section><div class=container><div class=row><div class="col-md-6 wrapper-1"><div class=details401><h3 data-translate=APP.ERRORS.UNAUTHORIZED></h3><a class="btn btn-flat flat-color" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class="col-md-6 wrapper-1"><div class=error401><span class=huge>401</span></div></div></div></div></section>'),t.put("app/components/auth/errors/404.html",'<section id=error404-wrapper class=section><div class=container><div class=row><div class="col-md-6 wrapper-1"><div class=details404><h3 data-translate=APP.ERRORS.NOT_FOUND></h3><a class="btn btn-flat flat-color" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class="col-md-6 wrapper-1"><div class=error404><span class=huge>404</span></div></div></div></div></section>'),t.put("app/components/auth/errors/500.html",'<section id=error404-wrapper class=section><div class=container><div class=row><div class="col-md-6 wrapper-1"><div class=details500><h3 data-translate=APP.ERRORS.INTERNAL_SERVER_ERROR></h3><a class="btn btn-flat flat-color" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class="col-md-6 wrapper-1"><div class=error401><span class=huge>500</span></div></div></div></div></section>'),t.put("app/components/auth/login/login.html",'<div class=container><div><div class="col-md-4 col-sm-3 col-xs-1"></div><div class="col-md-4 col-sm-6 col-xs-10"><div class="login-panel panel panel-default m-t-5"><div ng-show=!vm.showChangPass class=panel-body><img class="img-responsive login-logo" src=../../../../assets/images/tt-bank-2.png><h3 class=text-center data-translate=APP.MAIN.TITLE></h3><form role=form name=loginForm data-ng-submit=vm.onSubmit() novalidate><fieldset><div class=form-group data-ng-class="{\'has-error\':\r\n                            loginForm.username.$invalid&&!loginForm.username.$pristine }"><label data-translate=APP.MODULES.AUTH.USERNAME></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.USERNAME\'|translate}}" name=username type=text ng-pattern="/^[\\w -]*$/" data-ng-model=vm.username tabindex=1 autofocus required></div><div class=form-group data-ng-class="{\'has-error\':\r\n                            loginForm.password.$invalid&&!loginForm.password.$pristine }"><label data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.PASSWORD\'|translate}}" name=password type=password tabindex=2 data-ng-model=vm.password required></div><!--captcha form--><div class=form-group data-ng-class="{\'has-error\':\r\n                                loginForm.captcha.$invalid&&!loginForm.captcha.$pristine }"><label data-translate=APP.MODULES.AUTH.CAPTCHA></label><img style="width: 200px; margin-bottom: 15px" ng-src="{{vm.captchaUrl}}?time={{vm.date}}"> <button class="btn inline margin-top-sm" type=button ng-click=vm.resetCaptcha() tabindex=4 title="{{\'APP.ACTIONS.RESET_CAPTCHA\'|translate}}"><i class="icon pe-icon pe-7s-refresh f-17"></i></button> <input class="form-control ltr" placeholder="{{\'APP.MODULES.AUTH.CAPTCHA\'|translate}}" name=captcha autocomplete=off ng-pattern="/^[\\w -]*$/" type=text tabindex=3 data-ng-model=vm.userTypeCaptcha required></div><!-- Change this to a button or input when using this as a form --> <button type=submit class="btn btn-primary btn-block" data-ng-disabled=loginForm.$invalid><span data-translate=APP.MODULES.AUTH.LOGIN></span></button></fieldset><br><br><div class="col-md-12 text-center"><span data-ng-if=vm.version><b>(شماره نسخه : {{vm.version|pNumber}})</b></span></div></form></div><div ng-show=vm.showChangPass class=panel-body><img class="img-responsive login-logo" src=../../../../assets/images/tt-bank-2.png><h3 class=text-center data-translate=APP.MAIN.TITLE></h3><form name=changePassword data-ng-submit=vm.changeSecurePassword(changePassword) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class="col-lg-12 col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.oldPassword.$invalid &&\r\n                                    !changePassword.oldPassword.$pristine}"><span class=red-star>*</span><label for=oldPassword data-translate=APP.MODULES.AUTH.OLD_PASSWORD></label><input class=form-control type=password id=oldPassword name=oldPassword data-ng-model=vm.oldPassword required></div><div class="col-lg-12 col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.newPassword.$invalid &&\r\n                                    !changePassword.newPassword.$pristine}"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class="col-lg-12 col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':changePassword.newPasswordRepeat.$invalid &&\r\n                                    !changePassword.newPasswordRepeat.$pristine}"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class="col-xs-12 pull-left"><div class=pull-left><button class="btn btn-primary-alt" type=submit data-ng-disabled="changePassword.$invalid||(vm.newPassword!=vm.newPasswordRepeat)"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></div></div></div></div></div>'),
t.put("app/components/auth/forget-pass/forget-pass.html",'<div class=container><div class=row><div class="col-md-4 col-md-offset-4"><div class="login-panel panel panel-default"><div class=panel-heading><h3 class=panel-title data-translate=APP.MODULES.AUTH.FORGET_PASSWORD></h3></div><div class=panel-body><form role=form name=forgetPassForm novalidate><fieldset><div class=form-group data-ng-class="{\'has-error\':\r\n                            forgetPassForm.username.$invalid&&!forgetPassForm.username.$pristine }"><label data-translate=APP.MODULES.AUTH.USERNAME></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.USERNAME\'|translate}}" name=username type=text data-ng-model=vm.user.username autofocus required></div><!-- Change this to a button or input when using this as a form --> <button class="btn btn-info btn-block" type=submit data-ng-disabled=forgetPassForm.$invalid><span data-translate=APP.ACTIONS.SEND></span></button> <a class="btn btn-link" data-ui-sref=login><span data-translate=APP.MODULES.AUTH.LOGIN></span> </a><a class="btn btn-link" data-ui-sref=register><span data-translate=APP.MODULES.AUTH.REGISTER></span></a></fieldset></form></div></div></div></div></div>'),t.put("app/components/auth/reset-pass/reset-pass.html",'<div class=container><div class=row><div class="col-md-4 col-md-offset-4"><div class="login-panel panel panel-default"><div class=panel-heading><h3 class=panel-title>Please Sign In</h3></div><div class=panel-body><form role=form><fieldset><div class=form-group><input class=form-control placeholder="old Password" name=oldPass type=password></div><div class=form-group><input class=form-control placeholder=Password name=newPass type=password></div><div class=form-group><input class=form-control placeholder=Password name=reNewPass type=password></div><!-- Change this to a button or input when using this as a form --> <button class="btn btn-lg btn-info btn-block" type=submit><span>ارسال</span></button> <a class="btn btn-link" ui-sref=login><span>ورود</span> </a><a class="btn btn-link" ui-sref=register><span>ثبت نام</span> </a><a class="btn btn-link" ui-sref=forgetPass><span>فراموشی گذرواژه</span></a></fieldset></form></div></div></div></div></div>'),t.put("app/components/contract/add-monitoring-modal/add-monitoring.html",'<div class=modal-header><!--<a class="pull-left btn btn-success" data-ng-click="AddMonitoring.ok()">--><!--تایید مقصد--><!--</a>--><h3 class=modal-title data-translate=APP.MODULES.CONTRACT.MONITORING.ADD_MONITORING></h3></div><div class=modal-body><form action="" class=form><div class="row text-center" data-ng-show="AddMonitoring.loading || !AddMonitoring.teamHeads.length || !AddMonitoring.observers.length"><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." class=centered height=50></div><div class=row data-ng-hide="AddMonitoring.loading || !AddMonitoring.teamHeads.length || !AddMonitoring.observers"><!--level --><div data-ng-if=AddMonitoring.canSetLevel class="form-group col-sm-12 pull-right"><label class=control-label for=level data-translate=APP.MODULES.MONITORING.LEVEL></label><select id=level class=form-control data-ng-options="level.value as level.caption for level in AddMonitoring.levels" data-ng-model=AddMonitoring.level></select></div><!--first expert--><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_EXPERT></label><ui-select data-ng-model=AddMonitoring.firstExpert ng-disabled=AddMonitoring.isBranch><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices group-by=AddMonitoring.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" repeat="user in AddMonitoring.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><!--second expert (omitted for branch level)--><div class="form-group col-sm-12 pull-right" data-ng-hide=AddMonitoring.isBranch><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.SECOND_EXPERT></label><ui-select data-ng-model=AddMonitoring.secondExpert><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices group-by=AddMonitoring.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" repeat="user in AddMonitoring.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}" ui-disable-choice="user.username == AddMonitoring.firstExpert.username"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><!--team head (just for staff level)--><div class="form-group col-sm-12 pull-right" data-ng-if="AddMonitoring.level === \'STAFF\'"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></label><ui-select data-ng-model=AddMonitoring.teamHead><ui-select-match allow-clear=false placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind="\'( \' + $select.selected.economicSection.name + \' )\'"></small>--></span></ui-select-match><ui-select-choices repeat="user in AddMonitoring.teamHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><!--<small data-ng-bind-html="user.economicSection.name"></small>--></ui-select-choices></ui-select></div><!--team head (just for staff level)--><div class="form-group col-sm-12 pull-right" data-ng-if="AddMonitoring.level === \'STAFF\'"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.APPROVER></label><ui-select data-ng-model=AddMonitoring.staffApproverUsername><ui-select-match allow-clear=false placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind="\'( \' + $select.selected.economicSection.name + \' )\'"></small>--></span></ui-select-match><ui-select-choices repeat="user in AddMonitoring.staffApprovers |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><!--<small data-ng-bind-html="user.economicSection.name"></small>--></ui-select-choices></ui-select></div><div class="col-md-12 col-xs-12 pull-right form-group"><label data-translate=APP.SHARE.MESSAGE for=firstDescription></label>(<small>حداکثر 200 حرف </small>)<textarea class=form-control style="resize: none" id=firstDescription name=firstDescription data-ng-model=AddMonitoring.firstDescription maxlength=200></textarea></div><!--action buttons--><div class="form-group col-sm-12 pull-right"><button class="pull-left btn btn-success" data-ng-click=AddMonitoring.ok() data-ng-disabled="!AddMonitoring.firstExpert || (AddMonitoring.level === \'STAFF\' && !AddMonitoring.teamHead)"><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class="pull-left btn btn-default m-l-1" data-ng-click=AddMonitoring.cancel()><i class="fa fa-remove"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></form></div>'),t.put("app/components/contract/contract-details-modal/contract-details-modal.html",'<div class=modal-header><a class=pull-left ng-show=modalVm.isModal data-ng-click=modalVm.close()><i class="fa fa-close screen-only"></i></a><h3 class=plan-title data-translate=APP.MODULES.CONTRACT.CONTRACT_DETAILS></h3><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-show=!modalVm.toggleAdd data-ng-if=!modalVm.fromMonitoring data-ng-disabled="!modalVm.teamHeads.length || !modalVm.observers.length" data-ng-click="modalVm.toggleAdd=!modalVm.toggleAdd"><span class="icon pe-icon f-17 f-bold" data-ng-class="{\'pe-7s-add-user\':modalVm.teamHeads.length && modalVm.observers.length, \'pe-7s-hourglass\':!modalVm.teamHeads.length || !modalVm.observers.length}"></span> <span data-translate=APP.MODULES.CONTRACT.ADD_MONITORING></span></button> <button class="btn btn-info-alt" data-ng-hide=modalVm.fromMonitoring onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button> <a class="btn btn-info-alt" data-ng-show=modalVm.fromMonitoring target=_blank ui-sref="root.contract-details({contractId: modalVm.contractId})"><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></a></div></div><div class="modal-body screen-only" data-ng-show=modalVm.toggleAdd><div class=row><div class="form-group col-md-6 pull-right"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_EXPERT></label><ui-select data-ng-model=modalVm.firstExpert><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices group-by=modalVm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" repeat="user in modalVm.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class="form-group col-md-6 pull-right" data-ng-hide=modalVm.isBranch><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.SECOND_EXPERT></label><ui-select data-ng-model=modalVm.secondExpert><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices group-by=modalVm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" repeat="user in modalVm.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}" ui-disable-choice="user.username == modalVm.firstExpert.username"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class="form-group col-md-6 pull-right" data-ng-if="modalVm.currentUser.level === \'STAFF\'"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></label><ui-select data-ng-model=modalVm.teamHead><ui-select-match allow-clear=false placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind="\'( \' + $select.selected.economicSection.name + \' )\'"></small>--></span></ui-select-match><ui-select-choices repeat="user in modalVm.teamHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div data-ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><!--<small data-ng-bind-html="user.economicSection.name"></small>--></ui-select-choices></ui-select></div><div class="form-group col-md-6 pull-right"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_DESCRIPTION></label><textarea class=form-control placeholder="توضیحات شما ..." name=description id=description cols=30 rows=5 data-ng-model=modalVm.firstDescription></textarea></div><div class="form-group col-md-6 pull-right"><button class="btn btn-default col-xs-5 m-t-2" data-ng-click=modalVm.cancelAdd()><i class="fa fa-remove"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class="btn btn-success col-xs-5 col-xs-offset-2 m-t-2" data-ng-click=modalVm.addMonitoring() data-ng-disabled="!modalVm.firstExpert || (modalVm.currentUser.level === \'STAFF\' && !modalVm.teamHead)"><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div><div class="col-xs-12 text-danger" data-translate="no user in area" ng-show=!modalVm.observers.length></div></div></div><div class=modal-body><div class="row contract-container"><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.NUMBER></label>: <span style="display: inline" name=contractNumber data-ng-bind=modalVm.contract.number|pNumber></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></label>: <span data-ng-bind=modalVm.contract.directiveNumber></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT></label>: <span style="display: inline" dng-class="{empty: !modalVm.contract.totalAmount}" data-ng-bind="modalVm.contract.totalAmount | pCurrency |pNumberR"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REPORT_DATE></label>: <span style="display: inline" name=contractReportDate dng-class="{empty: !modalVm.contract.reportDate}" data-ng-bind="modalVm.contract.reportDate | jDate |pNumber"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE></label>: <span style="display: inline" name=contractDate ng-class="{empty: !modalVm.contract.contractDate}" data-ng-bind="modalVm.contract.contractDate | jDate |pNumber"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_DATE></label>: <span style="display: inline" name=contractDate ng-class="{empty: !modalVm.contract.installmentDate}" data-ng-bind="modalVm.contract.installmentDate | jDate |pNumber"></span></div></div><div class="col-xs-12 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TYPE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.contractType}" data-ng-bind="modalVm.contract.contractType || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-12 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TITLE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.title}" data-ng-bind="modalVm.contract.title || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PROVINCE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.province}" data-ng-bind="modalVm.contract.province.title || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.BRANCH></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.branch}" data-ng-bind="modalVm.contract.branch.title || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.COMPANY_NAME></label>: <span style="display: inline" name=contractCompanyName ng-class="{empty: !modalVm.contract.companyName}" data-ng-bind="modalVm.contract.companyName || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE></label>: <span style="display: inline" name=contractPlanType ng-class="{empty: !modalVm.contract.planType}" data-ng-bind="(modalVm.contract.planType) || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION></label>: <span style="display: inline" name=contractEconomicSection ng-class="{empty: !modalVm.contract.economicSection}" data-ng-bind="modalVm.contract.economicSection.name || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INTEREST_RATE></label>: <span style="display: inline" name=contractInterestRate ng-class="{empty: !modalVm.contract.interestRate}" data-ng-bind="(modalVm.contract.interestRate|pPercent) || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_CODE_NAME></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.economicCodeName}" data-ng-bind="(modalVm.contract.economicCodeName) || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_CODE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.economicCode}" data-ng-bind="modalVm.contract.economicCode || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TITLE></label>: <span style="display: inline" name=contractInterestRate ng-class="{empty: !modalVm.contract.title}" data-ng-bind="(modalVm.contract.title) || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CREDIT_SUPPLY_RESOURCE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.creditSupplyResourceText}" data-ng-bind="(modalVm.contract.creditSupplyResourceText)|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_DATE></label>: <span style="display: inline" name=contractInstallmentDate ng-class="{empty: !modalVm.contract.installmentDate}" data-ng-bind="(modalVm.contract.installmentDate|jDate |pNumber )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_INTERVAL></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.installmentInterval}" data-ng-bind="(modalVm.contract.installmentInterval|pNumber )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_NUMBER></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.installmentsNumber}" data-ng-bind="(modalVm.contract.installmentsNumber|pNumber )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.remainingInCurrent}" data-ng-bind="(modalVm.contract.remainingInCurrent|pCurrency:\'R\' )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.remainingInNonCurrent}" data-ng-bind="(modalVm.contract.remainingInNonCurrent|pCurrency:\'R\' )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.RESPIRATORY_PERIOD></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.respiratoryPeriod}" data-ng-bind="(modalVm.contract.respiratoryPeriod|pNumber )|| (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PROVINCE_AVAILABLE></label>: <span style="display: inline" ng-class="{empty: !modalVm.contract.provinceAvailable}" data-ng-bind="(modalVm.contract.provinceAvailable ? \'بله\' : \'خیر\') || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div><div class="col-xs-12 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ADDRESS></label>: <span style="display: inline" name=contractAddress ng-class="{empty: !modalVm.contract.address}" data-ng-bind="modalVm.contract.address || (\'APP.SHARE.UNDEFINED\' | translate)"></span></div></div></div><hr><div class="dataTables_wrapper form-inline dt-bootstrap no-footer" data-ng-if="!modalVm.fromMonitoring && modalVm.tableParams"><h3>نظارت‌های این قرارداد</h3><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=modalVm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="monitoring in $data"><td class="default {{modalVm.planTypeKey(monitoring.contract.planType)}}" data-ng-attr-title="{{ (monitoring.contract.economicSection.name || \'نامخشص\') + \'، \' + (monitoring.contract.planType || \'نامخشص\')}}" data-title="\'APP.MODULES.CONTRACT.SECTION_TYPE\'|translate"><img width=25 class=screen-only ng-src=assets/images/section-icons/{{monitoring.contract.economicSection.id}}.png> <span class=print-only data-ng-bind="(monitoring.contract.economicSection.name || \'نامخشص\') + \'، \' + (monitoring.contract.planType || \'نامخشص\')"></span></td><td data-title="\'APP.MODULES.MONITORING.NUMBER\'|translate"><a dir=ltr target=_blank data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span> _ <span data-ng-bind="monitoring.currentStep.title "></span></a></td><td data-title="\'APP.MODULES.MONITORING.EXPERTS\'|translate"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind="\', \' + monitoring.userMonitorings[1].lmsUser.name" data-ng-if=monitoring.userMonitorings[1]></span><br data-ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=modalVm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span></td><td data-title="\'APP.MODULES.MONITORING.COMPANY\'|translate" data-ng-bind=monitoring.contract.companyName></td><td data-title="\'APP.MODULES.MONITORING.CONTRACT.DATE\'|translate" data-ng-bind="monitoring.contract.contractDate|jDate:\'jYY/jM/jD\'"></td><td data-title="\'APP.MODULES.MONITORING.AMOUNT\'|translate" data-ng-bind="(monitoring.contract.totalAmount|pCurrency:\'R\')" ng-attr-title="{{monitoring.contract.totalAmount|pCurrency:\'A\'}}"></td><td data-title="\'APP.MODULES.DIRECTIVE.NUMBER\'|translate"><a dir=ltr target=_blank data-ng-attr-title="{{\'APP.ACTIONS.DETAILS_VIEW\'|translate}}" data-ui-sref="root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\'root.monitoring.monitoring-details\'})"><span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title="\'APP.MODULES.MONITORING.PLACE\'|translate"><span data-ng-bind=monitoring.contract.province.title></span> <span ng-if=monitoring.payerBranch data-ng-bind="\'،\' +monitoring.payerBranch.title"></span></td></tr><tr><td data-translate=NO_MONITORING_EXIST class="text-center text-warning" data-ng-hide=$data.length colspan=8></td></tr></table></div></div>'),t.put("app/components/directive/applicant/applicant.html",'<div class=module-inner><div class="module-heading screen-only"><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" data-ng-show=vm.allowedAction data-ng-click=vm.SetApplicantInDirective() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-disabled=directiveDetailsForm.$invalid><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class="col-md-5 col-md-offset-1 text-center screen-only" data-ng-show=vm.allowedAction><span class=text-warning ng-show="vm.savingStatus == 0" data-translate="empty monitoring fields"></span> <span class=text-danger ng-show="vm.savingStatus == 1" data-translate="editing monitoring fields"></span> <span class=text-success ng-show="vm.savingStatus == 2" data-translate="saved monitoring fields"></span></div></div><div class=clearfix></div><div class=module-content><div class="module-content-inner screen-only"><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form name=directiveDetailsForm data-ng-submit=directiveDetailsForm.$setPristine() novalidate><fieldset data-ng-disabled="!vm.allowedAction || vm.loading"><div class=row><div class="col-md-6 pull-right"><div class=form-group><label for=applicantType data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TYPE></label><select class=form-control ng-options="type.value as type.title for type in vm.applicantTypes" id=applicantType name=applicantType data-ng-change="vm.savingStatus = 1" data-ng-model=vm.applicant.applicantType></select></div></div></div><div class=row><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':directiveDetailsForm.name.$invalid &&\r\n                                                                            !directiveDetailsForm.name.$pristine}"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></label><input class=form-control id=name name=name data-ng-model=vm.applicant.applicantName data-ng-change="vm.savingStatus = 1" required></div></div><div class="col-md-6 pull-right"><div class=form-group><span class=red-star>*</span><label for=province data-translate=APP.MODULES.DIRECTIVE.APPLICANT.PROVINCE></label><select class=form-control ng-options="province.id as province.title for province in vm.provinces" id=province name=province data-ng-change="vm.savingStatus = 1" data-ng-model=vm.applicant.applicantProvince.id required></select></div></div></div></fieldset></form><div class="row m-t-3" ng-form name=boardDirectorsForm><div class="col-md-12 pull-right" data-ng-show=" vm.lastCheck === \'LEGAL\'"><div class="col-md-12 form-group"><label data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.TITLE></label></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NAME></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.POSITION></th><th class=text-center data-translate=APP.SHARE.OPERATION data-ng-show=vm.allowedAction></th></tr><tr class=text-center data-ng-repeat="item in vm.boards"><td><span data-ng-bind=item.name data-ng-hide=item.editing></span> <input type=text data-ng-model=item.name class=form-control ng-show=item.editing></td><td><span data-ng-bind=item.nationalId|pNumber data-ng-hide=item.editing></span> <input name=nationalId_update class=form-control maxlength=10 minlength=10 data-ng-show=item.editing data-ng-model=item.nationalId ng-pattern=vm.nationalIdRegex required><ul class="validate text-right" data-ng-show=item.editing><li class=text-danger ng-show=boardDirectorsForm.nationalId_update.$error.pattern data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID_VALIDATE></li></ul></td><td><span data-ng-bind=item.position data-ng-hide=item.editing></span> <input type=text data-ng-model=item.position class=form-control ng-show=item.editing></td><td data-ng-show=vm.allowedAction><a class="btn btn-sm text-info" data-ng-hide=item.editing data-ng-click="item.editing = true"><span class="icon pe-icon pe-7s-note f-21"></span> </a><a class="btn btn-sm text-danger" data-ng-hide=item.editing data-ng-click=vm.deleteBoard(item.id)><span class="icon pe-icon pe-7s-trash f-21"></span> </a><a class="btn btn-sm text-warning" data-ng-show=item.editing data-ng-click=vm.cancelUpdate(item)><span class="icon pe-icon pe-7s-close f-21"></span> </a><a class="btn btn-sm text-success" data-ng-show=item.editing data-ng-click=vm.updateBoard(item)><span class="icon pe-icon pe-7s-check f-21"></span></a></td></tr><tr class=text-center data-ng-show=vm.allowedAction><td class="{{vm.applicant.applicantType === \'LEGAL\' && vm.boards.length === 0 ? \'has-error\' : \'\'}}"><input id=boardName name=boardName title="نام عضو هیئت مدیره" data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.name class=form-control data-ng-change=vm.AllowAddBoard() required></td><td class="{{ boardDirectorsForm.nationalId.$error.pattern || (vm.applicant.applicantType === \'LEGAL\' && vm.boards.length === 0) ? \'has-error\' : \'\' }}"><input id=nationalId name=nationalId class=form-control maxlength=10 minlength=10 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.nationalId ng-pattern=vm.nationalIdRegex data-ng-change=" vm.AllowAddBoard()" required><ul class="validate text-right"><li class=text-danger ng-show=boardDirectorsForm.nationalId.$error.pattern data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID_VALIDATE></li></ul></td><td class="{{vm.applicant.applicantType === \'LEGAL\' && vm.boards.length === 0 ? \'has-error\' : \'\'}}"><input id=boardPosition name=boardPosition title=سمت data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.position class=form-control data-ng-change=vm.AllowAddBoard()></td><td><a ng-class=vm.classAddBoard class="btn btn-lg text-success" data-ng-click=vm.addBoardToApplicant()><i class="icon pe-icon pe-7s-plus f-21"></i></a></td></tr></table></div></div></div></div></div></div><div class=print-only><table class="table table-bordered"><tr><th colspan=3 data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TITLE></th></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></th><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.PROVINCE></th></tr><tr><td data-ng-bind=vm.applicant.applicantType|applicantType></td><td data-ng-bind=vm.applicant.applicantName></td><td data-ng-bind=vm.applicant.applicantProvince.title></td></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.TITLE colspan=3></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NAME></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.POSITION></th></tr><tr class=text-center data-ng-repeat="item in vm.boards"><td data-ng-bind=item.name></td><td data-ng-bind=item.nationalId|pNumber></td><td data-ng-bind=item.position></td></tr></table></div></div></div>'),
t.put("app/components/directive/contract/add-edit.html",'<form name=addEditContractForm novalidate><div class=row><div class="col-md-11 pull-right"><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':addEditContractForm.type.$invalid &&\r\n                                                                            !addEditContractForm.type.$pristine}"><span class=red-star>*</span><label for=type data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></label><ui-select ng-model=vm.contract.type.id theme=bootstrap id=type ng-change=vm.fillNecessaryCheckboxes() sortable close-on-select=true><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\'|translate}}"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat="contractType.id as contractType in vm.contractTypes | propsFilter: {name: $select.search}"><div ng-bind-html="contractType.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\':addEditContractForm.amount.$invalid &&\r\n                                                                            !addEditContractForm.amount.$pristine}"><span class=red-star>*</span><label for=amount data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></label><input class=form-control dir=ltr id=amount name=amount data-ng-model=vm.contract.totalAmount currency-tooltip ui-number-mask=0 required></div></div><div class="col-md-4 col-sm-6 pull-right" ng-if="vm.requiredField(\'interestRate\')"><div class=form-group><label for=interestRate data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></label><input class=form-control type=number max=100 min=0 dir=ltr id=interestRate name=interestRate data-ng-model=vm.contract.interestRate></div></div><div class="col-md-4 col-sm-6 pull-right" ng-if="vm.requiredField(\'installmentCount\')"><div class=form-group><label for=installmentCount data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentCount name=installmentCount ng-model=vm.contract.installmentCount></div></div><div class="col-md-4 col-sm-6 pull-right" ng-if="vm.requiredField(\'installmentInterval\')"><div class=form-group><label for=installmentInterval><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></span></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentInterval name=installmentInterval data-ng-model=vm.contract.installmentInterval></div></div><div class="col-md-4 col-sm-6 pull-right" ng-if="vm.requiredField(\'participationDuration\')"><div class=form-group><label for=participationDuration><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></span></label><input class=form-control dir=ltr type=number step=1 min=0 id=participationDuration name=participationDuration data-ng-model=vm.contract.participationDuration></div></div><div class="col-md-4 col-sm-6 pull-right" ng-if="vm.requiredField(\'respiratoryPeriod\')"><div class=form-group><label for=respiratoryPeriod><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></span></label><input class=form-control type=number step=1 dir=ltr min=0 id=respiratoryPeriod name=respiratoryPeriod data-ng-model=vm.contract.respiratoryPeriod></div></div><div class="col-md-4 col-sm-6 pull-right" ng-show="vm.requiredField(\'nominalAmount\')" data-ng-class="{\'has-error\':addEditContractForm.nominalAmount.$invalid &&\r\n                                                                            !addEditContractForm.nominalAmount.$pristine}"><div class=form-group><label for=nominal-amount><span class=red-star>*</span> <span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NOMINAL_AMOUNT></span></label><input class=form-control dir=ltr id=nominal-amount name=nominalAmount data-ng-model=vm.contract.nominalAmount currency-tooltip ui-number-mask=0 data-ng-required="vm.requiredField(\'nominalAmount\')"></div></div><div class="col-md-4 col-sm-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CALCULATE_CONDITION></label><div class=form-inline><label><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT></span> <input ng-model=vm.contract.totalAmountCount type=checkbox></label><label><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT></span> <input ng-model=vm.contract.interestAmountCount type=checkbox></label></div></div></div></div><div class="col-md-1 pull-right text-center p-t-2"><a class=text-success data-ng-click=vm.addEditContract(addEditContractForm) title="{{\'APP.ACTIONS.ADD\'|translate}}" data-ng-disabled=addEditContractForm.$invalid><i class="icon pe-icon pe-7s-plus pe-2x f-bold"></i></a></div></div><div class=row></div></form><div><b>نکته: در صورت تصویب قرارداد مبادلاتی با قسط نامساوی، به مقدار فاصله‌ی اقساط از قسط نخست کسر نموده و باقی را به عنوان دوره‌ی تنفس ثبت کنید.</b></div>'),t.put("app/components/directive/contract/contract-list.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap"><table class="hover no-footer row-border dataTable" data-show-filter=false><tr class=text-center data-ng-class="{\'disappeared\':vm.editing}"><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CALCULATE_CONDITION></th><th data-translate=APP.SHARE.OPERATION style="width: 10%" class=screen-only data-ng-show=vm.allowedAction></th></tr><tr class=text-center data-ng-show=!vm.toggleEdit[$index] data-ng-repeat-start="item in vm.contracts"><td id=TYPE><i data-ng-bind=item.type.name></i></td><td id=AMOUNT><i data-ng-bind="item.totalAmount|pCurrency:\'R\'" title="{{item.totalAmount|pCurrency:\'A\':1}}"></i></td><td id=INTEREST_RATE><i data-ng-bind=item.interestRate|pPercent></i></td><td id=INSTALLMENT_COUNT><i data-ng-bind="item.installmentCount|pNumber:\'-\'"></i></td><td id=INSTALLMENT_INTERVAL><i data-ng-bind="(item.installmentInterval|pNumber:\'-\')"></i></td><td id=PARTICIPATION_DURATION><i data-ng-bind="item.participationDuration|pNumber:\'-\'"></i></td><td id=RESPIRATORY_PERIOD><i data-ng-bind="item.respiratoryPeriod|pNumber:\'-\'"></i></td><td title="{{item.interestAmount|pCurrency:\'A\':1}}" id=CONTRACT_INTEREST data-ng-bind="item.interestAmount|pCurrency:\'R\'"></td><td title="{{item.totalAmount+item.interestAmount|pCurrency:\'A\':1}}" id=INTEREST data-ng-bind="item.totalAmount+item.interestAmount|pCurrency:\'R\'"></td><td data-ng-show=!vm.toggleEdit[$index] id=CALCULATE_CONDITION><div class=checkbox><i data-ng-show="vm.allowedAction || item.totalAmountCount"><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT></span> <input ng-model=item.totalAmountCount type=checkbox data-ng-disabled=!vm.allowedAction title="{{\'APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT\'|translate}}" ng-change=vm.updateContract(item)></i></div><div class=checkbox><i data-ng-show="vm.allowedAction || item.interestAmountCount"><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT></span> <input ng-model=item.interestAmountCount type=checkbox data-ng-disabled=!vm.allowedAction title="{{\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT\'|translate}}" ng-change=vm.updateContract(item)></i></div></td><td class=screen-only data-ng-show=vm.allowedAction id=OPERATION><i class="icon pe-icon pe-7s-note f-20 cursor-pointer text-info" data-ng-hide=vm.toggleEdit[$index] ng-click="vm.toggleEdit[$index] = true;vm.editing = true"></i> <i class="icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger" data-ng-hide=vm.toggleEdit[$index] ng-click=vm.deleteDirContract(item.id)></i></td></tr><tr data-ng-if=vm.toggleEdit[$index] data-ng-repeat-end><td colspan=2><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></label><select class=form-control data-ng-attr-title={{contractType.name}} data-ng-options="contractType.id as contractType.name for contractType  in vm.contractTypes" name=contractTypeEdit id=contractTypeEdit ng-model=item.type.id></select></td><td colspan=3><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></label><input class=form-control dir=ltr id=amountEdit name=amountEdit data-ng-model=item.totalAmount currency-tooltip ui-number-mask=0 required></td><td colspan=2 ng-show="vm.requiredField(\'interestRate\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></label><input class=form-control type=number max=100 min=0 dir=ltr id=interestRateEdit name=interestRateEdit data-ng-model=item.interestRate></td><td colspan=3 ng-show="vm.requiredField(\'participationDuration\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></label><input class=form-control dir=ltr type=number step=1 min=0 id=participationDurationEdit name=participationDurationEdit data-ng-model=item.participationDuration></td><td ng-show="vm.requiredField(\'installmentCount\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentCountEdit name=installmentCountEdit ng-model=item.installmentCount></td><td ng-show="vm.requiredField(\'installmentInterval\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentIntervalEdit name=installmentIntervalEdit data-ng-model=item.installmentInterval></td><td ng-show="vm.requiredField(\'respiratoryPeriod\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></label><input class=form-control type=number step=1 dir=ltr min=0 id=respiratoryPeriodEdit name=respiratoryPeriodEdit data-ng-model=item.respiratoryPeriod></td><td ng-show="vm.requiredField(\'nominalAmount\', item.type)"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NOMINAL_AMOUNT></label><input class=form-control dir=ltr currency-tooltip ui-number-mask=0 id=nominalAmountEdit name=nominalAmountEdit data-ng-model=item.nominalAmount></td><td ng-show="vm.numberOfFields(item.type.id) < 6" data-ng-attr-colspan="{{6 - vm.numberOfFields(item.type.id) - 1}}"></td><td data-ng-show=vm.allowedAction><i class="icon pe-icon pe-7s-close f-20 cursor-pointer text-warning" ng-show=vm.toggleEdit[$index] ng-click=vm.cancelEdit($index)></i> <i class="icon pe-icon pe-7s-check f-20 cursor-pointer text-success" ng-show=vm.toggleEdit[$index] ng-click=vm.updateContract(item,$index)></i></td></tr><!--SUM --><tr class="text-center BlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td colspan=8></td><td title="{{vm.sumAmount|pCurrency:\'A\':1}}" data-ng-bind="vm.sumAmount|pCurrency:\'R\'"></td><td data-ng-show=vm.allowedAction></td></tr></table><div data-ng-include="\'app/components/directive/contract/add-edit.html\'" data-ng-show=vm.allowedAction class=screen-only></div></div></div></div></div></div>'),t.put("app/components/directive/assuranceTypes/contract-assuranceTypes.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><form data-ng-submit=vm.saveDirective() name=requiredPercentageForm><div class="form-group col-md-6 col-xs-12 pull-right"><label for=required-assurance-percentage>درصد وثایق مورد نیاز نسبت به مجموع مبلغ مصوبه</label>:<span class=print-only data-ng-bind=vm.directive.dirRequiredAssurancePercentage|pPercent></span><div class="input-group screen-only" data-ng-show=vm.allowedAction><span class=input-group-addon>%</span> <input class=form-control numbers-only="" name=assurancePercentage required data-ng-model=vm.directive.dirRequiredAssurancePercentage id=required-assurance-percentage min=100> <span class=input-group-btn><button class="btn btn-success" type=submit data-ng-disabled=requiredPercentageForm.$invalid><span class="fa fa-check-circle"></span></button></span></div><span class="form-control screen-only" data-ng-hide=vm.allowedAction data-ng-bind=vm.directive.dirRequiredAssurancePercentage|pPercent></span></div><div data-ng-show=vm.showError class="form-group col-md-6 col-xs-12 pull-left"><span class=red-star>توجه: هیچیک از تضمینات مصوبه، مقدار سود را پوشش نداده است. (بدین منظور باید حداقل یک نوع وثیقه با معیار درصد اصل و سود ثبت گردد.)</span></div></form><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-scope ng-table"><!-- heading row --><tr><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.LIMIT></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.PERCENT></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.CRITERION></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows ng-repeat--><tr ng-repeat="item in vm.contractAssuranceTypes"><td data-ng-bind=item.assuranceType.type></td><td><span data-ng-bind=item.limit|maxmin data-ng-hide=item.editing></span><select class=form-control id=limitItem name=limit data-ng-model=item.limit ng-if=item.editing ng-change=vm.selectType(item) data-ng-options="limit.value as limit.name for limit in vm.limits" required></select></td><td><span data-ng-bind=item.percent|pPercent data-ng-hide=item.editing></span> <input class="input-sm form-control" numbers-only="" ng-if=item.editing name=contractAssuranceTypePercent id=contractAssuranceTypePercentItem data-ng-model=item.percent data-ng-disabled="item.limit === \'REST\'"></td><td><span data-ng-bind=item.criterionAssurance|assuranceCriterion data-ng-hide=item.editing></span><select class=form-control id=criterionItem name=criterion data-ng-model=item.criterionAssurance ng-if=item.editing data-ng-options="criterion.value as criterion.name for criterion in vm.criterions" required></select></td><td class=screen-only data-ng-show=vm.allowedAction><i class="icon pe-icon pe-7s-note f-20 cursor-pointer text-info" data-ng-hide=item.editing ng-click="item.editing = true"></i> <i class="icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger" data-ng-hide=item.editing ng-click=vm.deleteContractAssuranceType(item.id)></i> <i class="icon pe-icon pe-7s-close f-20 cursor-pointer text-warning" ng-show=item.editing ng-click="item.editing = false; vm.retrieve($index)"></i> <i class="icon pe-icon pe-7s-check f-20 cursor-pointer text-success" ng-show=item.editing ng-class="{\'idisabled\': !item.percent}" ng-click="vm.updateContractAssuranceType(item, $index)"></i></td></tr><!-- add row --><tr ng-show="vm.requiredPercentageDone && vm.allowedAction" class=screen-only><td><div class=form-group><select class=form-control id=assuranceType name=assuranceType data-ng-model=vm.contractAssuranceType.assuranceType data-ng-options="assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes" required></select></div></td><td><div class=form-group><select class=form-control id=limit name=limit data-ng-model=vm.contractAssuranceType.limit ng-change=vm.selectType(vm.contractAssuranceType) data-ng-options="limit.value as limit.name for limit in vm.limits" required></select></div></td><td><div class=form-group><input class="input-sm form-control" numbers-only name=contractAssuranceTypePercent id=contractAssuranceTypePercent data-ng-model=vm.contractAssuranceType.percent data-ng-disabled="vm.contractAssuranceType.limit === \'REST\'"></div></td><td><div class=form-group><select class=form-control id=criterion name=criterion data-ng-model=vm.contractAssuranceType.criterionAssurance data-ng-options="criterion.value as criterion.name for criterion in vm.criterions" required></select></div></td><td><a class=text-success ng-click=vm.addContractAssuranceType()><i class="icon pe-icon pe-7s-plus f-20"></i></a></td></tr><!-- empty row--><tr data-ng-hide=vm.requiredPercentageDone class=screen-only><td colspan=5 class="text-warning text-center" data-ng-show=vm.allowedAction>لطفا ابتدا «درصد وثایق مورد نیاز نسبت به مجموع مبلغ مصوبه» را وارد و ثبت نمایید.</td><td colspan=5 class="text-warning text-center" data-ng-hide=vm.allowedAction>هیچ وثیقه‌ای ثبت نشده است.</td></tr></table></div><div class=screen-only data-ng-show=vm.allowedAction><b class=text-danger data-translate="rest assurance note"></b></div><div class="screen-only m-t-4" data-ng-show=vm.allowedAction><b class=text-danger data-translate="combined assurance note"></b> <i class="icon pe-icon f-20 text-primary cursor-pointer" data-ng-class="{\'pe-7s-bottom-arrow\':!showHelpItem, \'pe-7s-up-arrow\': showHelpItem}" ng-click="showHelpItem = !showHelpItem"></i><table class="table table-bordered m-t-1" ng-show=showHelpItem><tr><th class=text-center>درصد ترکیبی مصوبه</th><th><div class="input-group screen-only"><span class=input-group-addon>%</span> <input type=number class=form-control title="درصد ترکیبی در مصوبه" data-ng-model=vm.helpItemTotal data-ng-change=vm.calcHelpItems() data-ng-attr-max={{vm.directive.dirRequiredAssurancePercentage}}></div></th><th></th><th></th></tr><tr><th class=text-center>نوع وثیقه</th><th class=text-center>مبلغ در رهن رفته</th><th class=text-center>مقداری که باید در مصوبه ثبت شود</th><th class=text-center>عملیات</th></tr><tr data-ng-repeat="item in vm.helpItems" class=text-center><td data-ng-bind=item.assuranceType.type></td><td data-ng-bind="item.amount|pCurrency:\'R\'" data-ng-attr-title="{{item.amount|pCurrency:\'A\'}}"></td><td data-ng-bind=item.desc|pNumber></td><td><i class="icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer" ng-click=vm.removeHelpItem($index)></i></td></tr><tr class=text-center><td><select class=form-control name=assuranceType id=assurance-type data-ng-model=vm.helpItem.assuranceType data-ng-options="assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes" required></select></td><td><input class=form-control data-ng-model=vm.helpItem.amount currency-tooltip dir=ltr ui-number-mask=0></td><td>-</td><td><i class="icon pe-icon pe-7s-plus f-20 text-success cursor-pointer" ng-click=vm.addHelpItem()></i></td></tr></table></div></div></div></div></div>'),t.put("app/components/directive/contractPreConditions/contract-preConditions.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-scope ng-table"><colgroup data-ng-if=vm.allowedAction><col width=70%><col width=30%></colgroup><!-- header row --><tr><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.CONDITION_NAME></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows --><tr data-ng-repeat="item in vm.contractPreConditions"><td><span data-ng-bind=item.condition data-ng-hide=item.editing data-ng-dblclick="item.editing = true"></span> <input type=text data-ng-model=item.condition class="input-sm form-control" data-ng-keypress="vm.keyPressed($event, item)" data-ng-show=item.editing></td><td class=screen-only data-ng-show=vm.allowedAction><a class=text-info data-ng-hide=item.editing data-ng-click="item.editing = true"><i class="icon pe-icon pe-7s-note f-20"></i> </a><a class=text-danger data-ng-hide=item.editing data-ng-click=vm.deleteContractPreCondition(item.id)><i class="icon pe-icon pe-7s-trash f-20"></i> </a><a class=text-warning data-ng-show=item.editing data-ng-click=vm.cancelUpdate()><i class="icon pe-icon pe-7s-close f-20"></i> </a><a class=text-success data-ng-show=item.editing data-ng-click=vm.updateContractPreCondition(item)><i class="icon pe-icon pe-7s-check f-20"></i></a></td></tr><tfoot><!-- add row --><tr class=screen-only data-ng-show=vm.allowedAction><td><input class="input-sm form-control" required data-ng-keypress=vm.keyPressed($event) name=contractPreCondition id=contractPreCondition title={{APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.CONDITION_NAME}} data-ng-model=vm.contractPreCondition.condition></td><td><a class=text-success data-ng-click=vm.addContractPreCondition()><i class="icon pe-icon pe-7s-plus f-18"></i></a></td></tr></tfoot></table></div></div></div></div></div>'),t.put("app/components/directive/dirLicense/directive-license.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.LICENSE.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-scope ng-table"><colgroup data-ng-if=vm.allowedAction><col width=70%><col width=30%></colgroup><!-- header row --><tr><th data-translate=APP.MODULES.DIRECTIVE.LICENSE.NAME></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data row --><tr data-ng-repeat="item in vm.dirLicenses"><td data-ng-bind=item.name></td><td class=screen-only data-ng-show=vm.allowedAction><a class=text-danger data-ng-click=vm.deleteDirLicense(item.id)><i class="icon pe-icon pe-7s-trash f-20"></i></a></td></tr><tfoot><!-- add row --><tr class=screen-only data-ng-show=vm.allowedAction><td><input class="input-sm form-control" title={{APP.MODULES.DIRECTIVE.LICENSE.NAME}} data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid)" name=dirLicenseName id=dirLicenseName data-ng-model=vm.dirLicense.name></td><td><a class=text-success data-ng-click=vm.addDirLicense()><i class="icon pe-icon pe-7s-plus f-18"></i></a></td></tr></tfoot></table></div></div></div></div></div>'),t.put("app/components/directive/directive-details/directive-details.html",'<div class="module-inner screen-only"><div class=module-heading><h2 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.APPROVE_DETAILS></h2><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" data-ng-show=vm.allowedAction data-ng-click=vm.saveDirective(directiveDetailsForm) uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class="col-md-5 col-md-offset-1 text-center screen-only" data-ng-show=vm.allowedAction><span class=text-warning ng-show="vm.savingStatus == 0" data-translate="empty monitoring fields"></span> <span class=text-danger ng-show="vm.savingStatus == 1" data-translate="editing monitoring fields"></span> <span class=text-success ng-show="vm.savingStatus == 2" data-translate="saved monitoring fields"></span></div></div><!--<div class="clearfix"></div>--><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form name=directiveDetailsForm data-ng-submit=directiveDetailsForm.$setPristine() novalidate><fieldset data-ng-disabled="!vm.allowedAction || vm.loading"><div class=row><div class="col-md-6 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.number.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.number.$dirty)}"><span class=red-star>*</span><label for=number data-translate=APP.MODULES.DIRECTIVE.NUMBER></label><input class=form-control data-ng-change="vm.savingStatus = 1" id=number name=number data-ng-model=vm.directive.dirNumber ng-pattern=vm.noSpaceRegex tabindex=1 required></div></div><div class="col-md-6 pull-right" data-ng-if=vm.directive.dirParentDirectiveNumber>رونوشت از مصوبه‌ی شماره&nbsp; <a data-ng-bind=vm.directive.dirParentDirectiveNumber class=ltr-number target=_blank ui-sref="root.directive.details({directiveId:vm.directive.dirParentDirectiveNumber, monitoringId:vm.directive.dirParentMonitoring, monitoringState: \'root.monitoring.monitoring-details\'})"></a></div></div><div class=row><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.approveDate.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.approveDate.$dirty)}"><span class=red-star>*</span><label data-translate=APP.MODULES.DIRECTIVE.SIGNIFICATION_DATE></label><simple-date data-ng-change="vm.savingStatus = 1" data-ng-model=vm.directive.dirApproveDate name=approveDate required></simple-date></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.validityDuration.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.validityDuration.$dirty)}"><span class=red-star>*</span><label data-translate=APP.MODULES.DIRECTIVE.END_DATE for=validityDuration></label><input class=form-control type=number data-ng-change="vm.savingStatus = 1" id=validityDuration name=validityDuration data-ng-model=vm.directive.dirValidityDuration min=0 required></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.approvalPlace.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.approvalPlace.$dirty)}"><span class=red-star>*</span><label for=approvalPlace data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="approvalPlace.id as approvalPlace.name for approvalPlace in vm.approvalPlaces" id=approvalPlace name=approvalPlace required data-ng-model=vm.directive.directiveApprovalPlace.id></select></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.supplyResource.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.supplyResource.$dirty)}"><label for=supplyResource data-translate=APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="supplyResource.id as supplyResource.name for supplyResource in vm.supplyResources" id=supplyResource name=supplyResource required data-ng-model=vm.directive.dirCreditSupplyResource.id></select></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.economicSection.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.economicSection.$dirty)}"><label for=economicSection data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="economicSection.id as economicSection.name for economicSection in vm.ecomomicSections" id=economicSection name=economicSection required data-ng-model=vm.directive.dirEconomicSection.id></select></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.planType.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.planType.$dirty)}"><label for=planType data-translate=APP.MODULES.DIRECTIVE.PLAN_TYPE></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="planType.value as planType.title for planType in vm.planTypes" id=planType name=planType required data-ng-model=vm.directive.dirPlanType></select></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': !vm.directive.branchChiefInGrantingTime &&\r\n                                                                                        vm.savingStatus === 1}"><span ng-show="!vm.fillTheFields || !directiveDetailsForm.branchChiefInGrantingTime.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && directiveDetailsForm.branchChiefInGrantingTime.$invalid">*</span><label data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INGRANTTIME></label><ui-select theme=bootstrap id=branchChiefInGrantingTime data-ng-change="vm.savingStatus = 1" data-ng-model=vm.directive.branchChiefInGrantingTime><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind="$select.selected.name + \'(\' + $select.selected.code + \')\'"></span></ui-select-match><ui-select-choices repeat="employee in vm.allEmployees" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html="(employee.name+\' (\'+employee.code+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.branchPhoneNumber.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.branchPhoneNumber.$dirty)}"><span ng-show="!vm.fillTheFields || !directiveDetailsForm.branchPhoneNumber.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && directiveDetailsForm.branchPhoneNumber.$invalid">*</span><label data-translate=APP.MODULES.MONITORING.BRANCH_PHONENUMBER for=branchPhoneNumber></label><input class=form-control type=text data-ng-change="vm.savingStatus = 1" data-ng-change="vm.savingStatus = 1" id=branchPhoneNumber name=branchPhoneNumber data-ng-model=vm.directive.dirBranchPhoneNumber required ng-pattern=vm.telRegex><ul class=validate><li class=text-danger ng-show=directiveDetailsForm.branchPhoneNumber.$error.pattern data-translate=APP.MODULES.MONITORING.VALIDATE_TEL></li></ul></div></div><div class="col-md-4 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': !vm.directive.dirExpert &&\r\n                                                                                        vm.savingStatus === 1}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.DIR_EXPERT_NAME></label><ui-select theme=bootstrap id=applicantPhoneNumber2 data-ng-change="vm.savingStatus = 1" data-ng-model=vm.directive.dirExpert><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind="$select.selected.name + \'(\' + $select.selected.code + \')\'"></span></ui-select-match><ui-select-choices repeat="employee in vm.allEmployees" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html="(employee.name+\' (\'+employee.code+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.applicantPhoneNumber.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.applicantPhoneNumber.$dirty)}"><span ng-show="!vm.fillTheFields || !directiveDetailsForm.applicantPhoneNumber.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && directiveDetailsForm.applicantPhoneNumber.$invalid">*</span><label data-translate=APP.MODULES.MONITORING.APPLICANT_PHONENUMBER for=applicantPhoneNumber></label><input class=form-control type=text data-ng-change="vm.savingStatus = 1" data-ng-change="vm.savingStatus = 1" id=applicantPhoneNumber name=applicantPhoneNumber data-ng-model=vm.directive.dirApplicantPhoneNumber required ng-pattern=vm.telRegex><ul class=validate><li class=text-danger ng-show=directiveDetailsForm.applicantPhoneNumber.$error.pattern data-translate=APP.MODULES.MONITORING.VALIDATE_TEL></li></ul></div></div><div class="col-md-12 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.activitySubject.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.activitySubject.$dirty)}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT for=activitySubject></label><textarea class=form-control data-ng-change="vm.savingStatus = 1" id=activitySubject name=activitySubject style="resize: vertical" placeholder=... data-ng-model=vm.directive.dirActivitySubject required></textarea></div></div><div class="col-md-12 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\': directiveDetailsForm.projectLocationAddress.$invalid &&\r\n                                (vm.savingStatus === 1 || directiveDetailsForm.projectLocationAddress.$dirty)}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS for=projectLocationAddress></label><textarea class=form-control style="resize: vertical" data-ng-change="vm.savingStatus = 1" placeholder=... id=projectLocationAddress name=projectLocationAddress data-ng-model=vm.directive.dirProjectLocationAddress required></textarea></div></div><div class="col-md-12 col-xs-12 pull-right"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.DESCRIPTION for=dirDescription></label><textarea class=form-control style="resize: vertical" data-ng-change="vm.savingStatus = 1" placeholder=... id=dirDescription name=dirDescription data-ng-model=vm.directive.dirDescription></textarea></div></div></div></fieldset></form></div></div></div></div></div><div class=print-only><table class="table table-bordered"><tr><th colspan=4 data-translate=APP.MODULES.DIRECTIVE.APPROVE_DETAILS></th></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPROVE_DATE></th><th data-translate=APP.MODULES.DIRECTIVE.END_DATE></th><th data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></th><th data-translate=APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE></th></tr><tr><td data-ng-bind=vm.directive.dirApproveDate|jDate></td><td data-ng-bind=vm.directive.dirValidityDuration|pNumber></td><td data-ng-bind=vm.directive.directiveApprovalPlace.name></td><td data-ng-bind=vm.directive.dirCreditSupplyResource.name></td></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></th><th data-translate=APP.MODULES.DIRECTIVE.PLAN_TYPE></th><th data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INGRANTTIME></th><th data-translate=APP.MODULES.MONITORING.BRANCH_PHONENUMBER></th></tr><tr><td data-ng-bind=vm.directive.dirEconomicSection.name></td><td data-ng-bind=vm.directive.dirPlanType|planType></td><td data-ng-bind=vm.directive.branchChiefInGrantingTime.name></td><td data-ng-bind=vm.directive.dirBranchPhoneNumber|pNumber></td></tr><tr><th data-translate=APP.MODULES.MONITORING.DIR_EXPERT_NAME></th><th data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th><th data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS colspan=2></th></tr><tr><td data-ng-bind=vm.directive.dirExpert.name></td><td data-ng-bind=vm.directive.dirActivitySubject></td><td data-ng-bind=vm.directive.dirProjectLocationAddress colspan=2></td></tr></table></div>'),
t.put("app/components/directive/paymentPerPart/directive-paymentPerPart.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.TITLE></h1><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><form name=addPaymentForm><table class="hover no-footer row-border dataTable ng-scope ng-table"><!-- header row --><tr><th>#</th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.PART></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.APPLICANT_SHARE_AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.BAKN_SHARE_AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.COUNT_PAYMENT_STEP></th><th data-translate=APP.SHARE.OPERATION style="width: 15%" class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows --><tr data-ng-repeat="item in vm.dirPaymentPerParts"><td data-ng-bind=($index+1)|pNumber></td><td><span data-ng-bind=item.investmentAction.name data-ng-hide=item.editing></span><div class=form-group data-ng-class="{\'has-error\':addPaymentForm.investmentActionItem.$invalid}"><select class=form-control data-ng-if=item.editing title={{APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.PART}} id=investmentActionItem name=investmentActionItem data-ng-model=item.investmentAction data-ng-options="investmentAction as investmentAction.name for investmentAction in vm.investmentActions" required></select></div></td><td><span data-ng-bind="(item.bankShareAmount|pCurrency:\'R\')" data-ng-hide=item.editing data-uib-tooltip="{{item.bankShareAmount|pCurrency:\'A\'}}"></span><div class=form-group data-ng-class="{\'has-error\':addPaymentForm.bankShareAmountItem.$invalid}"><input class="input-sm form-control" data-ng-if=item.editing name=bankShareAmountItem id=bankShareAmountItem data-ng-model=item.bankShareAmount title={{APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.APPLICANT_SHARE_AMOUNT}} data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid, item, $index)" ui-number-mask=0 currency-tooltip dir=ltr required></div></td><td><span data-ng-bind="(item.applicantShareAmount|pCurrency:\'R\')" data-ng-hide=item.editing uib-tooltip="{{item.applicantShareAmount|pCurrency:\'A\'}}"></span><div class=form-group data-ng-class="{\'has-error\':addPaymentForm.applicantShareAmountItem.$invalid}"><input class="input-sm form-control" data-ng-if=item.editing name=applicantShareAmountItem id=applicantShareAmountItem data-ng-model=item.applicantShareAmount data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid, item, $index)" ui-number-mask=0 currency-tooltip dir=ltr required></div></td><td><span data-ng-bind=item.paymentStepCount|pNumber data-ng-hide=item.editing></span><div class=form-group data-ng-class="{\'has-error\':addPaymentForm.stepCountItem.$invalid}"><input class="input-sm form-control" data-ng-if=item.editing name=stepCountItem id=step-count type=number min=1 data-ng-model=item.paymentStepCount dir=ltr data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid, item, $index)" required></div></td><td class=screen-only data-ng-show=vm.allowedAction><i class="icon pe-icon pe-7s-note f-20 cursor-pointer text-info" data-ng-hide=item.editing ng-click="item.editing = true"></i> <i class="icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger" data-ng-hide=item.editing ng-click=vm.deleteDirPaymentPerPart(item.id)></i> <i class="icon pe-icon pe-7s-close f-20 cursor-pointer text-warning" ng-show=item.editing ng-click="item.editing = false;vm.retrieve($index)"></i> <i class="icon pe-icon pe-7s-check f-20 text-success" ng-show=item.editing ng-click="vm.updateDirPaymentPerPart(item, $index, addPaymentForm.$valid)"></i></td></tr><!-- sum row --><tr class="text-center LightBlueBG" ng-show=vm.dirPaymentPerParts.length><td></td><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumBankShareAmount|pCurrency:\'R\')" uib-tooltip="{{vm.sumBankShareAmount|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumApplicantShareAmount|pCurrency:\'R\')" uib-tooltip="{{vm.sumApplicantShareAmount|pCurrency:\'A\'}}"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td></td></tr><tfoot><!-- add row --><tr ng-if=!vm.editing() class=screen-only data-ng-show=vm.allowedAction><td></td><td><select class=form-control id=investmentAction name=investmentAction data-ng-model=vm.dirPaymentPerPart.investmentAction data-ng-options="investmentAction as investmentAction.name for investmentAction in vm.investmentActions" required></select></td><td><input class="input-sm form-control" placeholder="سهم بانک" data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid)" name=bankShareAmount id=bankShareAmount data-ng-model=vm.dirPaymentPerPart.bankShareAmount currency-tooltip ui-number-mask=0 required></td><td><input class="input-sm form-control" placeholder="سهم متقاضی" data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid)" name=applicantShareAmount id=applicantShareAmount currency-tooltip ui-number-mask=0 data-ng-model=vm.dirPaymentPerPart.applicantShareAmount required></td><td><input class="input-sm form-control" data-ng-keypress="vm.keyPressed($event, addPaymentForm.$valid)" placeholder="تعداد مراحل پرداخت" name=countPaymentStep id=countPaymentStep type=number min=1 data-ng-model=vm.dirPaymentPerPart.paymentStepCount required></td><td><i class="icon pe-icon cursor-pointer pe-7s-plus f-20 text-success" ng-click=vm.addDirPaymentPerPart(addPaymentForm.$valid);addPaymentForm.$setPristine() title="{{\'APP.ACTIONS.ADD\'|translate}}"></i></td></tr></tfoot></table></form></div></div></div></div></div>'),t.put("app/components/home/stats/stats.html",'<div class="col-lg-3 col-md-6 pull-right"><div class="panel panel-{{color}}"><div class=panel-heading><div class=row><div class=col-xs-4><i class="fa fa-{{icon}} fa-3x"></i></div><div class="col-xs-8 text-right"><div class=huge data-ng-bind=number|pNumber></div></div><div class=col-xs-12 data-translate={{comments}}></div></div></div><a><div class=panel-footer><span data-translate={{title}}></span><div class=clearfix></div></div></a></div></div>'),t.put("app/components/monitoring/assurance/assurance.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i> <span class=red-star ng-show=vm.showFlag>برای مصوبه مربوط به این نظارت نوع تضمینات مشخص نشده است. ابتدا نوع تضمینات مجاز مصوبه را تعیین نمایید</span><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><!-- data table --><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><!-- data row ng-repeat --><tr class=text-center data-ng-repeat="assurance in $data"><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.ASSURANCE_TYPE\'|translate"><i data-ng-bind=assurance.assuranceType.type data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><select class=form-control data-ng-options="assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes" id=investmentActionEdit name=investmentActionEdit data-ng-model=assurance.assuranceType></select></form></td><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.EXPERT_VALUE\'|translate"><i data-ng-bind="(assurance.expertValue|pCurrency:\'R\')" data-ng-attr-title="{{assurance.expertValue|pCurrency:\'A\'}}" data-ng-hide=vm.toggleEdit[$index]></i> <input data-ng-show=vm.toggleEdit[$index] id=expertValueEdit name=expertValueEdit class=form-control dir=ltr ui-number-mask=0 data-ng-keypress="vm.keyPressed($event, assurance, $index)" data-ng-model=assurance.expertValue></td><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_PERCENT\'|translate" data-ng-bind=assurance.assuranceType.acceptedPercent|pPercent></td><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_VALUE\'|translate" data-ng-bind="((assurance.expertValue * assurance.assuranceType.acceptedPercent/100)|pCurrency:\'R\')"></td><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.MORTGAGED_VALUE\'|translate" data-ng-class="{\'RedBG\': assurance.mortgagedValue > (assurance.expertValue * assurance.assuranceType.acceptedPercent/100)}"><i data-ng-bind="(assurance.mortgagedValue|pCurrency:\'R\')" data-ng-attr-title="{{assurance.mortgagedValue|pCurrency:\'A\'}}" data-ng-hide=vm.toggleEdit[$index]></i> <input data-ng-show=vm.toggleEdit[$index] id=mortgagedValueEdit name=mortgagedValueEdit data-ng-keypress="vm.keyPressed($event, assurance, $index)" class=form-control dir=ltr ui-number-mask=0 data-ng-model=assurance.mortgagedValue></td><td data-title="\'APP.MODULES.MONITORING.ASSURANCE.CONFLICT_DESCRIPTION\'|translate" data-ng-class="{\'RedBG\': assurance.conflictDescription}"><i data-ng-bind=assurance.conflictDescription data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><input id=conflictDescriptionEdit name=conflictDescriptionEdit class=form-control type=text data-ng-keypress="vm.keyPressed($event, assurance, $index)" data-ng-model=assurance.conflictDescription></form></td><td data-title="\'APP.SHARE.COMMENT\'|translate" data-ng-class=""><i data-ng-bind=assurance.description data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><input data-ng-attr-placeholder="{{\'APP.SHARE.COMMENT\'|translate}}" id=description name=description class=form-control type=text data-ng-keypress="vm.keyPressed($event, assurance, $index)" data-ng-model=assurance.description></form></td><td data-title="\'APP.SHARE.OPERATION\'|translate" class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updateAssurance(assurance,$index) delete=vm.deleteAssuranceFromMonitoring(assurance.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><!-- sum row --><tr class="text-center LightBlueBG" ng-show=$data.length><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumExpertValue|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumExpertValue|pCurrency:\'A\'}}"></td><td></td><td data-ng-bind="(vm.sumAcceptedValue|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumAcceptedValue|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumMortgagedValue|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumMortgagedValue|pCurrency:\'A\'}}"></td><td></td><td></td><td></td></tr><!-- empty row --><tr ng-hide=$data.length class=text-center><td colspan=7 class=text-danger><span data-translate=NOTHING_HAS_BEEN_SUBMITTED data-ng-hide=vm.loading></span> <img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." ng-show=vm.loading class=centered height=50></td></tr><!-- add row --><tr data-ng-show="vm.allowedAction && !vm.loading" class=screen-only><td><select class=form-control auto-focus=true tabindex=1 data-ng-options="assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes" id=investmentAction name=investmentAction data-ng-change=vm.calcAcceptedValue() data-ng-model=vm.assurance.assuranceType></select></td><td><input id=expertValue name=expertValue tabindex=2 class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) data-ng-change=vm.calcAcceptedValue() data-ng-model=vm.assurance.expertValue></td><td><span id=acceptedPercent class=form-control data-ng-bind=vm.assurance.assuranceType.acceptedPercent|pPercent></span></td><td><span id=acceptedValue class=form-control data-ng-bind="vm.assurance.acceptedValue|pCurrency:\'R\'" data-ng-attr-title="{{vm.assurance.acceptedValue|pCurrency:\'A\'}}"></span></td><td><input id=mortgagedValue name=mortgagedValue tabindex=3 data-ng-keypress=vm.keyPressed($event) class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=vm.assurance.mortgagedValue></td><td><input id=comment name=comment class=form-control tabindex=4 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.assurance.conflictDescription></td><td><input id=desc name=desc class=form-control tabindex=5 data-ng-attr-placeholder="{{\'APP.SHARE.COMMENT\'|translate}}" data-ng-keypress=vm.keyPressed($event) required data-ng-model=vm.assurance.description></td><td><a class="btn btn-sm text-success" tabindex=5 data-ng-attr-title="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-click=vm.addAssurance()><span class="icon pe-icon pe-7s-plus f-18 f-bold"></span></a></td></tr></table></div><hr><!-- result table table --><div class=module-heading><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><!-- heading row --><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.ASSURANCE_TYPE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIRECTIVE_CONDITION></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM_TAKEN_ASSURANCE_AMOUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIFFERENCE_AMOUNT></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-repeat="item in vm.conflicts"><td data-ng-bind=item.assuranceType.type></td><td><span data-ng-bind="(item.condition|conditionList) + \' \' +(item.dirAssuranceAmount|pCurrency:\'R\')" data-ng-show="(item.condition && item.dirAssuranceAmount) || item.condition == \'REST\'" data-ng-attr-title="{{item.dirAssuranceAmount|pCurrency:\'A\'}}"></span> <span data-ng-show=!item.condition>در مصوبه قید نشده است</span> <span data-ng-show="!item.dirAssuranceAmount && item.condition && item.condition !=\'REST\'">هنوز وثیقه‌ای ثبت نشده است</span></td><td class={{item.getConflict()}} data-ng-bind="(item.sumTakenAssuranceAmount|pCurrency:\'R\')" data-ng-attr-title="{{item.sumTakenAssuranceAmount|pCurrency:\'A\'}}"></td><td data-ng-attr-title="{{item.conflictAmount|pCurrency:\'A\'}}" data-ng-bind="item.conflictAmount|pCurrency:\'R\'"></td></tr><tr class=text-center><td class=LightBlueBG data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM></td><td class=LightBlueBG data-ng-bind="(vm.totalAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.totalAmount|pCurrency:\'A\'}}"></td><td class=LightBlueBG data-ng-class="{\'DarkRedFill\': vm.totalAmount>vm.sumOfSumTakenAssuranceAmount}" data-ng-bind="(vm.sumOfSumTakenAssuranceAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumOfSumTakenAssuranceAmount|pCurrency:\'A\'}}"></td><td class=LightBlueBG data-ng-attr-title="{{vm.totalDifference|pCurrency:\'A\'}}" data-ng-bind="(vm.totalDifference|pCurrency:\'R\')"></td></tr></table><div class="module-footer screen-only"><br><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span><br><i class="fa fa-circle OrangeFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div></div>'),t.put("app/components/monitoring/cancelFinalized/cancel-finalized.html",'<div class=modal-header><span class="pull-left cursor-pointer fa fa-remove text-danger" ng-click=vm.cancel()></span><h3 class=modal-title id=modal-title>لغو دستوری نظارت پس از تائید.</h3></div><div class=modal-body id=modal-body><div class="alert alert-warning alert-dismissible justified"><i class="fa fa-warning"></i> <strong>کاربر گرامی!</strong> شما با دسترسی مدیر سامانه در حال لغو یک نظارت تائيد شده با شماره <b class=ltr-number ng-bind-html=vm.monitoring.number|pNumber></b> مربوط به مشتری <b ng-bind-html=vm.monitoring.contract.companyName></b> هستید. توجه داشته باشید با انچام این عملیات نظارت به حالت ایجاد شده باز می‌گردد و از کلیه گزارشات عملکردی سامانه حذف خواهد شد. پس از انجام این عملیات در صورت صلاحدید می‌توانید این نظارت را حذف نمائید. در غیر این صورت نظارت در لیست ماموریت‌های محوله‌ی کارشناس(های) مربوطه قرار گرفته و قادر به انجام مجدد عملیات نظارت خواهند بود.</div><textarea class=form-control placeholder="دلیل لغو این نظارت ..." name=message id=message cols=30 rows=5 data-ng-model=vm.message></textarea></div><div class=modal-footer><button class="btn btn-primary pull-left" type=button ng-click=vm.ok() data-translate=APP.ACTIONS.OK></button></div>'),t.put("app/components/monitoring/attachments/attachments.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=vm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}" ng-if=vm.isModal></i><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer table-responsive row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParamsAttachment data-show-filter=false><colgroup><col width=30%><col width=15%><col width=45%><col width=10%></colgroup><tr><td colspan=4><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." class=centered height=50 ng-show=vm.loading> <i data-ng-hide=vm.loading class="fa fa-info-circle text-info"></i>&nbsp;<span data-ng-hide=vm.loading data-translate=DOWNLOAD_HELP class=text-info></span></td></tr><tr><th data-translate=APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME></th><th data-translate=APP.SHARE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat="item in vm.attachments"><td data-title="\'APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME\'|translate"><a ng-href={{vm.host}}api/fileManager/attachment/{{item.id}}/getContent/{{item.name}}.{{item.type}} target=_blank download={{item.name}}.{{item.type}}><span data-ng-bind=item.name></span> <span class="fa fa-download"></span></a></td><td data-title="\'APP.SHARE.DESCRIPTION\'|translate" data-ng-bind=item.description></td><td data-title="\'APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER\'|translate" data-ng-bind=item.creatorLmsUser.name></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><span class="icon pe-icon pe-7s-trash f-20 text-danger" data-ng-show=item.canDelete data-ng-attr-title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click="vm.deleteAttachment(item, $index)"></span> <span class="icon pe-icon pe-7s-attention f-20 text-warning" data-ng-hide=item.canDelete></span></td></tr><tr><td><file-upload class="inline col-xs-8 pull-right" file=vm.attachment.attachment data-uploading=vm.uploaded label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><button class="btn btn-default-alt inline" type=button data-ng-click=vm.cancelAddAttachment() title="{{\'APP.ACTIONS.CANCEL\'|translate}}"><i class="fa fa-times"></i></button></td><td data-ng-class="{\'danger\': vm.attachment.attachment.size > 7000000}">حجم فایل: <span data-ng-bind=vm.attachment.attachment.size|fileSize></span></td><td><input class=form-control data-ng-model=vm.description></td><td><button class="btn btn-primary-alt inline" ng-click=vm.attachFile();addAttachmentForm.$setPristine() title="{{\'APP.ACTIONS.UPLOAD\'|translate}}" ng-disabled=!vm.attachment><i class="fa fa-upload"></i></button></td></tr><tr data-ng-show=vm.attachments.length><td colspan=4><a ng-href={{vm.host}}api/monitoring/{{vm.monitoring.id}}/getAllFilesZipped/{{vm.monitoring.number}}.zip target=_blank download={{vm.monitoring.number}}.zip><i class="fa fa-file-archive-o"></i> <span data-translate=APP.ACTIONS.DOWNLOAD_ALL></span></a></td></tr></table></div></div></div></div></div></div>'),t.put("app/components/monitoring/comment/comment.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.ACCEPT_REJECT></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button></div></div></div><div class=clearfix></div><div class=module-content ng-if=vm.monitoring.id><div class=module-content-inner><pane-body><div class="dataTables_wrapper dt-bootstrap no-footer" ng-hide="vm.allowedActionList.length<1 || vm.allowedActionList[0].name===\'start\'"><form name=monitoringConflictForm novalidate><div class=screen-only><div class=col-sm-12 ng-if=vm.lastAction.comment><label><span data-translate=APP.MODULES.MONITORING.LAST_COMMENT></span> <span data-ng-bind="\' توسط: \' + vm.lastAction.user.name"></span></label><p data-ng-bind=vm.lastAction.comment></p></div><div class="col-sm-12 pull-right"><label data-translate=APP.SHARE.COMMENT></label><div class=form-group><textarea class="input-sm form-control" rows=8 placeholder="توضیحات احتمالی ..." id=comment name=comment style="resize: none" data-ng-model=vm.comment>\r\n                                    </textarea></div></div><div class="col-sm-12 pull-right"><button type=button class="btn btn-danger pull-right" data-ng-click=vm.reject() data-ng-hide="vm.monitoring.currentStep.name === \'created\'" data-ng-disabled=!vm.comment><span class="fa fa-close"></span> <span data-ng-bind=vm.previousStepTitle()></span></button> <button type=button class="btn btn-success pull-left" data-ng-if="vm.monitoring.currentStep.name !==\'created\' && vm.monitoring.currentStep.name !==\'started\'" data-ng-click=vm.accept()><span class="fa fa-check"></span> <span data-ng-bind=vm.nextStepTitle()></span></button></div></div></form></div><div class=well ng-hide="vm.allowedActionList.length>0"><p data-translate=AFTER_ACTION_MESSAGE></p></div><div class=well ng-show="vm.allowedActionList[0].name===\'start\'"><p data-translate=START_ACTION_MESSAGE></p></div></pane-body></div></div></div>'),t.put("app/components/monitoring/confirm-convert-debit-modal/confirm-convert-debit-modal.html",'<div class=modal-header><h3 class=modal-title>افزودن / ویرایش تبدیل دیون به حال</h3></div><div class=modal-body><div class=row><!--LETTER NUMBER--><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_NUMBER></label><label data-ng-if=modalVm.commitConvertDebit.done>( <small>تاریخ ثبت نامه : {{modalVm.commitConvertDebit.doneInsertDate|jDate}}</small> )</label><input class=form-control type=text ng-disabled=modalVm.commitConvertDebit.done maxlength=30 id=letterNumber name=letterNumber data-ng-model=modalVm.commitConvertDebit.doneLetterNumber></div><!--letter Date--><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_DATE></label><simple-date name=letterDate id=letterDate data-ng-model=modalVm.commitConvertDebit.doneDate></simple-date></div><div class="form-group col-sm-12 pull-right"><label class=control-label>شرح نامه</label><textarea class=form-control id=description name=description data-ng-model=modalVm.commitConvertDebit.doneDescription>\r\n            </textarea></div><div class="form-group col-sm-12 pull-right"><file-upload class="inline col-xs-3 pull-right" file=modalVm.commitConvertDebit.attachment.attachment label="{{(\'APP.SHARE.BROWSE\'|translate)}}"></file-upload><span class=p-r-1 data-ng-if="modalVm.commitConvertDebit.attachments.length > 0"><lable>دانلود فایل پیوست</lable><a class="btn btn-sm text-highlight" data-ng-href=" {{modalVm.host + \'fileManager/attachment/\' + modalVm.commitConvertDebit.attachments[0].id +\r\n                   \'/getContent/\' +\r\n                   modalVm.commitConvertDebit.attachments[0].name + \'.\' + modalVm.commitConvertDebit.attachments[0].type}}" target=_blank><span title="دانلود پیوست " class="icon pe-icon pe-7s-download f-19 f-bold"></span></a></span></div><!--action buttons--><div class="form-group col-sm-12 pull-right"><button data-ng-disabled="!modalVm.commitConvertDebit.doneLetterNumber || !modalVm.commitConvertDebit.doneDate" class="pull-left btn btn-success" data-ng-click=modalVm.submit()><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class="pull-left btn btn-default m-l-1" data-ng-click=modalVm.cancel()><i class="fa fa-remove"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></div>'),t.put("app/components/monitoring/conflict/conflict-list.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.CONFLICT.LIST></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-8><div class=pull-left><button class="btn btn-sm btn-success-alt" data-ng-if="vm.state==\'calculated\'" data-ng-show=!vm.toggleAdd data-ng-click="vm.toggleAdd=!vm.toggleAdd"><i class="fa fa-plus-circle"></i> <span data-translate=APP.ACTIONS.ADD>‌</span></button> <button class="btn btn-sm btn-warning-alt" data-ng-show=vm.allowedAction data-ng-click=vm.calculateMonitoringConflicts()><i class="fa fa-calculator"></i> <span data-translate=APP.MODULES.MONITORING.CONFLICT.CALCULATE_CONFLICT>‌</span></button> <button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer" data-ng-show=vm.toggleAdd><form name=monitoringConflictForm data-ng-submit=monitoringConflictForm.$setPristine() novalidate><div class=row><div class="col-md-8 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE for=CONFLICT_TITLE></label><input class=form-control type=text id=CONFLICT_TITLE name=CONFLICT_TITLE data-ng-model=vm.monitoringConflict.title required></div></div><div class="col-md-12 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION for=DESCRIPTION></label><textarea class=form-control type=text id=DESCRIPTION name=DESCRIPTION data-ng-model=vm.monitoringConflict.description required>\r\n                                    </textarea></div></div></div><div class=row><div class=col-md-3><br><div class=pull-left><button class="btn btn-warning-alt" data-ng-click=vm.cancelAdd()><i class="fa fa-close"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class="btn btn-primary-alt" data-ng-click=vm.createConflict() title="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></div></form></div></div><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center><th data-translate=APP.SHARE.INDEX></th><th data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE></th><th data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION></th><th data-translate=APP.SHARE.OPERATION class=screen-only></th></tr><tr class=text-center data-ng-repeat="conflict in vm.conflicts|orderBy:\'automatic\'" ng-class="{\'screen-only\':conflict.cleared}"><td data-ng-class="{\'OrangeBG\':!conflict.automatic,\r\n                                                \'GreenBG\':conflict.automatic && conflict.cleared,\r\n                                                \'RedBG\':conflict.automatic && !conflict.cleared}" data-ng-bind=$index+1|pNumber></td><td><a style="color: green" ui-sref={{vm.links[conflict.type]}} ng-bind=conflict.title></a></td><td data-ng-bind=conflict.description></td><td class=screen-only><a class="btn btn-sm text-danger" data-ng-if="vm.state==\'calculated\'" data-ng-show=!conflict.automatic title="{{\'APP.ACTIONS.DELETE\'|translate}}" data-ng-click=vm.deleteConflict(conflict.id)><span class="icon pe-icon pe-7s-trash f-17"></span> </a><i class="pe-7s-comment pe-2x pe-va cursor-pointer text-info" data-ng-if="vm.state==\'calculated\'" data-ng-show=conflict.automatic title="{{\'APP.ACTIONS.MODIFY\'|translate}}" data-ng-click=vm.openModal(conflict)></i></td></tr><tr class=text-center data-ng-hide="vm.conflicts.length || vm.state !== \'calculated\'"><td colspan=4 class=text-success data-translate=NO_CONFLICT></td></tr></table></div><div class="module-footer screen-only"><br><div class=row><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEAR_FALSE></span></div><div class=row><i class="fa fa-circle GreenFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEARED_TRUE></span></div><div class=row><i class="fa fa-circle OrangeFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_EXPERT></span></div></div><div class="module-footer page-break-before print-only"><div class=row><div class="col-sm-6 col-xs-12 col-print-6 pull-right" data-ng-repeat="item in vm.monitoring.userMonitorings"><div class=row><div class="col-xs-3 pull-right"><span data-ng-bind=item.lmsUser.name></span></div><div class="col-xs-9 pull-right"><img class="img-responsive print-images" ng-src={{vm.getSignUrl(item.lmsUser)}} alt="امضا ثبت نشده است"></div></div></div></div></div></div></div></div></div>'),t.put("app/components/monitoring/conflict/update-conflict-modal.html",'<div class=modal-header><h2 class=modal-title data-translate=APP.MODULES.TRACE.SAVE_COMMENT></h2></div><div class=modal-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form name=monitoringConflictForm data-ng-submit=monitoringConflictForm.$setPristine() novalidate><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEARED for=CONFLICT_CLEARED></label><select class=form-control id=CONFLICT_CLEARED name=CONFLICT_CLEARED data-ng-options="auto.id as auto.caption for auto in modalVm.auto" data-ng-model=modalVm.monitoringConflict.cleared required></select></div></div><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE for=CONFLICT_TITLE></label><input class=form-control type=text data-ng-disabled=!modalVm.monitoringConflict.automatic id=CONFLICT_TITLE name=CONFLICT_TITLE data-ng-model=modalVm.monitoringConflict.title required></div></div><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION for=DESCRIPTION></label><textarea class=form-control type=text id=DESCRIPTION name=DESCRIPTION data-ng-model=modalVm.monitoringConflict.description required>\r\n                                    </textarea></div></div><div class=row><br><div class=pull-left><button class="btn btn-warning-alt" data-ng-click=modalVm.cancelAdd()><i class="fa fa-close"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class="btn btn-primary-alt" data-ng-click=modalVm.updateConflictInMonitoring() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></form></div></div>'),
t.put("app/components/monitoring/contract/contract.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.CONTRACT.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-4><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><h4 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.DIR_LIST></h4><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-show-filter=false><tr class=text-center><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th class="text-center screen-only" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONCLUDED_CONTRACT_NUMBER></th></tr><tr class=text-center data-ng-repeat="dircontract in vm.dirContracts"><td data-ng-bind=dircontract.type.name></td><td data-ng-bind="dircontract.totalAmount|pCurrency:\'R\'" data-ng-attr-title="{{dircontract.totalAmount|pCurrency:\'A\'}}"></td><td data-ng-bind=dircontract.interestRate|pPercent></td><td data-ng-bind=dircontract.installmentCount|pNumber></td><td data-ng-bind=dircontract.participationDuration|pNumber></td><td data-ng-bind=dircontract.respiratoryPeriod|pNumber></td><td data-ng-bind=dircontract.installmentInterval|pNumber></td><td data-ng-bind="dircontract.interestAmount|pCurrency:\'R\'" data-ng-attr-title="{{dircontract.interestAmount|pCurrency:\'A\'}}"></td><td data-ng-bind="(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\'R\'" data-ng-attr-title="{{(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\'A\'}}"></td><td><div class="input-group screen-only" data-ng-show=vm.allowedActions><span class=input-group-addon><i class="fa fa-warning" data-ng-hide=dircontract.contract.id></i> <i class="fa fa-check" data-ng-show=dircontract.contract.id></i> </span><input class=form-control required data-ng-attr-title={{dircontract.contract.number|pNumber}} data-ng-model=dircontract.contract.number id=contract-number-from-core> <span class=input-group-btn><button class="btn btn-success" type=button ng-click=vm.setContractNumber(dircontract) data-ng-disabled=requiredPercentageForm.$invalid title=ثبت><span class="fa fa-check-circle"></span></button></span></div><span data-ng-bind=dircontract.contract.number|pNumber data-ng-hide=vm.allowedActions></span></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td data-ng-bind="(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\'R\'" data-ng-attr-title="{{(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\'A\'}}"></td><td></td></tr></table></div></pane-body><hr><pane-body><h4 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h4><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="contract in $data" data-ng-class="{\'OrangeBG\': vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet(),\r\n                            \'GreenBG\': vm.isMonitoringContract(contract) && vm.isMonitoringContractSet()}" data-ng-attr-title="{{vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet() ?\r\n                             \'لطفا قرارداد متناظر این پرونده را در مصوبه تعیین نمایید\'\r\n                             : vm.isMonitoringContract(contract) && vm.isMonitoringContractSet() ?\r\n                             \'قرارداد این نظارت\'\r\n                             :\r\n                             \'\'\r\n                             }}"><td data-title="\'APP.MODULES.CONTRACT.NUMBER\'|translate" data-ng-bind=contract.number|pNumber class=ltr-number></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\'|translate" data-ng-bind=contract.contractType></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT\'|translate" data-ng-bind="(contract.totalAmount|pCurrency:\'R\')" data-ng-attr-title="{{contract.totalAmount|pCurrency:\'A\'}}"></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE\'|translate" data-ng-bind=contract.interestRate|pPercent></td><td data-title="\'APP.MODULES.CONTRACT.DATE\'|translate" data-ng-bind=contract.contractDate|jDate></td><td data-title="\'APP.MODULES.CONTRACT.REMAINING_CURRENT\'|translate" data-ng-bind="contract.remainingInCurrent|pCurrency:\'R\'" data-ng-attr-title="{{contract.remainingInCurrent|pCurrency:\'A\'}}"></td><td data-title="\'APP.MODULES.CONTRACT.REMAINING_NON_CURRENT\'|translate" data-ng-bind="contract.remainingInNonCurrent|pCurrency:\'R\'" data-ng-attr-title="{{contract.remainingInNonCurrent|pCurrency:\'A\'}}"></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD\'|translate" data-ng-bind=contract.respiratoryPeriod|pNumber></td></tr><!-- sum row --><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td></td><td data-ng-bind="(vm.sumContractTotalAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumContractTotalAmount|pCurrency:\'A\'}}"></td><td></td><td></td><td data-ng-bind="(vm.sumRemainingInCurrent|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumRemainingInCurrent|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumRemainingInNonCurrent|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumRemainingInNonCurrent|pCurrency:\'A\'}}"></td><td></td></tr></table></div></pane-body></div></div></div>'),t.put("app/components/monitoring/convert-debit/convert-debit.html",'<div class="container-fluid monitoring"><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class=module-heading><h1 class="module-title inline"><span class="icon pe-icon pe-7s-refresh-2 monitoring"></span> <span data-translate=APP.MODULES.MONITORING.CONVERT_DEBIT></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.showSearch><form class="dataTables_wrapper dt-bootstrap no-footer search-container" data-ng-submit=vm.search()><div class="col-md-12 pull-right"><div class=row><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER for=monitoringNumber></label><input class=form-control type=text id=monitoringNumber name=monitoringNumber data-ng-model=vm.searchItem.monitoringNumber></div></div><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMPANY for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><!--monitoring from date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.monitoringToDate name=monitoringToDate></simple-date></div></div><!--contract from date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><!--<adm-dtp data-ng-model="vm.contractFromDate"></adm-dtp>--><simple-date data-ng-model=vm.contractFromDate name=contractFromDate></simple-date></div></div><!--contract due date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><!--<adm-dtp data-ng-model="vm.contractToDate"></adm-dtp>--><simple-date data-ng-model=vm.contractToDate name=contractToDate></simple-date></div></div><!--create from date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_FROM></label><simple-date data-ng-model=vm.createFromDate name=createFromDate></simple-date></div></div><!--create due date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_TO></label><simple-date data-ng-model=vm.createToDate name=createToDate></simple-date></div></div><!--confirm from date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_FROM></label><simple-date data-ng-model=vm.confirmFromDate name=confirmFromDate></simple-date></div></div><!--confirm due date--><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_TO></label><simple-date data-ng-model=vm.confirmToDate name=confirmToDate></simple-date></div></div><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control data-ng-model=vm.searchItem.minContractAmount currency-tooltip="" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount></div></div><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip="" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div><div class="col-md-3 pull-right"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control type=text id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class="col-md-3 pull-right"><div class=form-group><label for=directive data-translate=APP.MODULES.MONITORING.DIRECTIVE_NUMBER></label><input class=form-control type=text id=directive name=directive data-ng-model=vm.searchItem.directiveNumber></div></div></div><div class=row><!-- search expert --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.EXPERT></label><ui-select data-ng-model=vm.searchItem.expert><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.observers |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search teamHead --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.TEAHM_HEAD></label><ui-select data-ng-model=vm.searchItem.teamHead><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.teamHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search finalHead --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.FINAL_HEAD></label><ui-select data-ng-model=vm.searchItem.finalHead><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.finalHeads |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search owner --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.OWNER></label><ui-select data-ng-model=vm.searchItem.owner><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.owners |\r\n                                propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search checkList --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></label><ui-select data-ng-model=vm.checkList><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat="item in vm.checkLists |\r\n                                                                        propsFilter : {content: $select.search}"><div ng-bind-html=" item.content | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><!-- search checkList Status --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS_VALUE></label><select class=form-control id=checkListStatus data-ng-model=vm.checkListStatus data-ng-options="status.value as status.caption for status in vm.checkListStatusList"></select></div></div><!--included codes--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.SHARE.SEARCH\'|translate}}">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat="code.code as code in vm.codes"><div><span ng-bind-html="code.code | highlight: $select.search"></span></div><small><span ng-bind-html="\'\'+code.title | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><!-- search license commitment convert --><div class="col-md-6 pull-right"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.LICENSE_COMMITMENT_CONVERT></label><select class=form-control id=licenseCommitment data-ng-model=vm.searchItem.isLicenseCommitmentConvert><option value=null>---هیچکدام---</option><option value=true>بله</option><option value=false>خیر</option></select></div></div><!-- search license commitment convert  Done--><div class="col-md-6 pull-right"><div class=form-group data-ng-show="vm.searchItem.isLicenseCommitmentConvert == \'true\'"><label class=control-label data-translate=APP.MODULES.MONITORING.LICENSE_COMMITMENT_CONVERT_DONE></label><select class=form-control id=licenseCommitmentConvertDone data-ng-model=vm.searchItem.licenseCommitmentConvertDone><option value=null>---هیچکدام---</option><option value=true>بله</option><option value=false>خیر</option></select></div></div><!-- search province --><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><div><ui-select multiple ng-model=vm.searchItem.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="province.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+province.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div><!-- search branch --><div class="col-md-6 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.BRANCH></label><div><!--<select class="form-control"\r\n                                                                ng-options="branch.id as branch.title for branch in vm.branches"\r\n                                                                id="branch" name="branch"\r\n                                                                data-ng-model="vm.searchItem.branchId">\r\n                                                        </select>\r\n                                                        <span class="input-group-addon">\r\n                                                            <i class="fa fa-remove cursor-pointer text-danger"\r\n                                                               ng-click="vm.searchItem.branchId = null"></i>\r\n                                                        </span>--><ui-select multiple ng-model=vm.searchItem.branchIds theme=bootstrap id=branch sortable close-on-select=false><ui-select-match ng-attr-placeholder="{{\'APP.MODULES.BASIC_INFO.BRANCH.PLACEHOLDER\'|translate}}">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat="branch.id as branch in vm.branches | propsFilter: {title: $select.search, code: $select.search}"><div ng-bind-html="branch.title | highlight: $select.search"></div><small><span ng-bind-html="\'\'+branch.code | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div></div></div></div><div class=col-xs-12><br><div class=pull-left><button class="btn btn-warning-alt" type=reset data-ng-click=vm.cancelSearch() ng-attr-title="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=submit ng-attr-title="{{\'APP.ACTIONS.SEARCH\'|translate}}"><i class="fa fa-search"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class="btn btn-primary-alt" type=submit data-ng-click="vm.exportMonitoring(\'EXCEL\')" ng-attr-title="{{\'APP.ACTIONS.EXPORT\'|translate}}"><i class="fa fa-file-excel-o"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></form></div><div class=pane-body id=search-result-container><div class="row screen-only" data-ng-if=vm.showSearch><div class="col-xs-12 screen-only" data-ng-hide=vm.loading><span data-translate="All records count:"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." data-ng-show=vm.loading class=centered height=50></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-table-pagination few-paddings" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="monitoring in $data"><td data-title="\'APP.SHARE.INDEX\'|translate"><span data-ng-bind=monitoring.index|pNumber></span></td><td data-title="\'APP.MODULES.MONITORING.NUMBER\'|translate" data-sortable="\'number\'" class="b-warning {{vm.getDelay(monitoring).class}}"><a dir=ltr data-ng-attr-title={{vm.getDelay(monitoring).title|pNumber}} data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span></a><br ng-if=monitoring.directive.dirNumber><a dir=ltr ng-if=monitoring.directive.dirNumber data-ui-sref="root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\'root.monitoring.monitoring-details\'})"><span data-translate=APP.MODULES.DIRECTIVE.NUMBER></span>: <span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title="\'APP.MODULES.MONITORING.STEP\'|translate" data-sortable="\'currentStepId\'" data-ng-bind="monitoring.currentStep.title "></td><td data-title="(\'APP.MODULES.MONITORING.DATE\'|translate)" data-sortable="\'createDate\'"><div data-ng-show=monitoring.contract.contractDate data-ng-bind="\'قرارداد:\' + (monitoring.contract.contractDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.createDate data-ng-bind="\'ایجاد:\' + (monitoring.createDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.monitoringDate data-ng-bind="\'بازدید:\' + (monitoring.monitoringDate|jDate:\'jYY/jM/jD\')"></div><div data-ng-show=monitoring.lastTransitionDate data-ng-bind="\'   عملیات:\' + (monitoring.lastTransitionDate|jDate:\'jYY/jM/jD\')"></div></td><td data-title="\'APP.MODULES.MONITORING.EXPERTS\'|translate" data-sortable="\'userMonitorings.lmsUser.username\'"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind="\'، \' + monitoring.userMonitorings[1].lmsUser.name" ng-if=monitoring.userMonitorings[1]></span><br ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=vm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span></td><td data-title="\'APP.MODULES.MONITORING.COMPANY\'|translate" data-sortable="\'contract.companyName\'" data-ng-bind=monitoring.contract.companyName></td><td data-title="\'APP.MODULES.MONITORING.AMOUNT\'|translate" data-sortable="\'contract.totalAmount\'" data-ng-attr-title="{{monitoring.contract.totalAmount|pCurrency:\'A\'}}"><a dir=ltr data-ng-attr-title={{monitoring.contract.number|pNumber}} data-ng-click=vm.openDetailsModal(monitoring.contract.id,true)><span data-ng-bind="(monitoring.contract.totalAmount|pCurrency:\'R\')"></span></a></td><td data-title="\'APP.MODULES.MONITORING.PLACE\'|translate" data-sortable="\'payerBranch\'"><span data-ng-bind=monitoring.contract.province.title></span><br data-ng-if=monitoring.contract.branch><span data-ng-if=monitoring.contract.branch data-ng-bind=monitoring.contract.branch.title></span></td><td data-title="\'عملیات\'"><span ng-click=vm.addConvertDebitModal(monitoring)><i class="icon pe-icon f-19 f-bold cursor-pointer" ng-class=" ( monitoring.monitoringCommitmentConvertLicenses.length > 0 ) ?\r\n                                                                     \'pe-7s-pen text-info\' : \'pe-7s-plus text-success\'"></i></span></td><td data-title="\'تایید\'"><span data-ng-if="monitoring.monitoringCommitmentConvertLicenses.length > 0  && vm.isAdmin" ng-click=vm.confirmConvertDebitModal(monitoring)><i class="icon pe-icon f-19 f-bold cursor-pointer pe-7s-check" ng-class=" ( monitoring.monitoringCommitmentConvertLicenses[0].done ) ?\r\n                                                                     \'pe-7s-pen text-success\' : \'pe-7s-plus text-info\'"></i></span></td><td data-title="\'پیگیری\'" data-ng-if=vm.isInRoleStaff()><span ng-click=vm.setTrace(monitoring) uib-tooltip="\'ایجاد نظارت\'"><i class="icon pe-icon f-19 f-bold cursor-pointer pe-7s-clock text-warning"></i></span></td></tr></table></div></div></div></div></div></section></div></div></div>'),t.put("app/components/monitoring/convert-debit-modal/add-convert-debit-modal.html",'<div class=modal-header><h3 class=modal-title>افزودن / ویرایش تبدیل دیون به حال</h3></div><div class=modal-body><div class=row><!--LETTER NUMBER--><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_NUMBER></label><label data-ng-if=modalVm.convertDebit.id>( <small>تاریخ ثبت نامه : {{modalVm.convertDebit.insertDate|jDate}}</small> )</label><input class=form-control type=text maxlength=30 id=letterNumber name=letterNumber data-ng-model=modalVm.convertDebit.letterNum></div><!--letter Date--><div class="form-group col-sm-12 pull-right"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_DATE></label><simple-date name=letterDate id=letterDate data-ng-model=modalVm.convertDebit.letterDate></simple-date></div><!--action buttons--><div class="form-group col-sm-12 pull-right"><button data-ng-disabled="!modalVm.convertDebit.letterNum || !modalVm.convertDebit.letterDate" class="pull-left btn btn-success" data-ng-click=modalVm.submit()><i class="fa fa-check"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class="pull-left btn btn-default m-l-1" data-ng-click=modalVm.cancel()><i class="fa fa-remove"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></div>'),t.put("app/components/auth/register/register.html",'<div class=container><div class=row><div class="col-md-4 col-md-offset-4"><div class="login-panel panel panel-default"><div class=panel-heading><h3 class=panel-title data-translate=APP.MODULES.AUTH.REGISTER></h3></div><div class=panel-body><form role=form name=registerForm novalidate><fieldset><div class=form-group data-ng-class="{\'has-error\':\r\n                            registerForm.email.$invalid&&!registerForm.email.$pristine }"><label data-translate=APP.MODULES.AUTH.EMAIL></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.EMAIL\'|translate}}" name=email type=email data-ng-model=vm.user.email autofocus required></div><div class=form-group data-ng-class="{\'has-error\':\r\n                            registerForm.password.$invalid&&!registerForm.password.$pristine }"><label data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.PASSWORD\'|translate}}" name=password type=password data-ng-model=vm.user.password required></div><div class=form-group data-ng-class="{\'has-error\':\r\n                            registerForm.passwordRepeat.$invalid&&!registerForm.passwordRepeat.$pristine }"><label data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control placeholder="{{\'APP.MODULES.AUTH.PASSWORD_REPEAT\'|translate}}" name=passwordRepeat type=password data-ng-model=vm.user.passwordRepeat required></div><!-- Change this to a button or input when using this as a form --> <button class="btn btn-info btn-block" type=submit data-ng-disabled=registerForm.$invalid><span data-translate=APP.MODULES.AUTH.REGISTER></span></button> <a class="btn btn-link" data-ui-sref=login><span data-translate=APP.MODULES.AUTH.LOGIN></span> </a><a class="btn btn-link" data-ui-sref=forgetPass><span data-translate=APP.MODULES.AUTH.FORGET_PASSWORD></span></a></fieldset></form></div></div></div></div></div>'),t.put("app/components/monitoring/directive/edit-directive.html",'<div class=modal-header><i class="icon pe-icon pe-7s-close f-17 pull-left cursor-pointer" ng-click=vm.cancel()></i><h3 class=modal-title data-translate=APP.MODULES.MONITORING.SET_DIRECTIVE></h3></div><div class=modal-body><div class="well text-danger justified">کارشناس گرامی، هم اکنون هیچ شماره مصوبه‌ای برای این نظارت در سامانه ثبت نگردیده است. لازم است پیش از آغاز فرآیند نظارت، مصوبه مربوطه را در سامانه ثبت نمایید. چنانچه مصوبه‌ی این قرارداد باید از نسخه‌های موجود در سامانه استفاده کند، با وارد کردن شماره مصوبه در ورودی بالا، نسخه‌ی مد نظر را برای کپی انتخاب نمایید. در غیر این صورت با خالی گذاشتن ورودی بالا و تنها با ورود شماره مصوبه در ورودی دوم یک مصوبه‌ی جدید ایجاد نمایید.</div><div class="well text-info justified" data-ng-show=vm.contractDirectiveNumber><span>شماره مصوبه ثبت شده در قرارداد: </span><b data-ng-bind=vm.contractDirectiveNumber></b></div><form name=dirForm><div class=row><div class="form-group col-sm-12 pull-right"><label>مصوبه‌ی مرجع</label><ui-select theme=bootstrap id=referenceDirective on-select=vm.referenceSelected($model) data-ng-model=vm.referenceMonitoring ng-model-options="{debounce: 500}"><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind-html="$select.selected.directive.dirNumber + \'&nbsp;<small>_&nbsp;\' + $select.selected.number + \'</small>\'"></span></ui-select-match><ui-select-choices repeat="monitoring in vm.monitoringList" refresh=vm.refreshMonitoringList($select.search) refresh-delay=4><div ng-bind-html="vm.getDirectiveListText(monitoring) | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="form-group col-sm-12 pull-right"><label for=directive-number>شماره مصوبه</label><input class=form-control id=directive-number data-ng-model=vm.directiveNumber placeholder="شماره مصوبه ..." name=directiveNumber></div></div><div class=row><div class=col-sm-12><button type=submit class="btn btn-primary-alt m-t-1 pull-left" ng-click=vm.setDirective() data-ng-disabled="dirForm.$invalid || vm.loading"><span data-translate=APP.ACTIONS.SAVE></span> <i class="fa fa-save"></i></button></div></div></form></div>'),t.put("app/components/monitoring/export/columns-modal.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.EXPORT_COLUMNS></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=modalVm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}"></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=row><div class=col-xs-7><div class=col-xs-12><button class="btn btn-primary" data-ng-click=modalVm.selectAllCheckList(true)><span data-translate=APP.ACTIONS.SELECT_ALL></span> <i class="fa fa-check-square"></i></button> <button class="btn btn-default" data-ng-click=modalVm.selectAllCheckList(false)><span data-translate=APP.ACTIONS.DESELECT_ALL></span> <i class="fa fa-square-o"></i></button></div><div class="checkbox col-xs-12" data-ng-repeat="item in modalVm.checklits"><label><input type=checkbox ng-model=item.checked> <span ng-bind=item.content class=m-r-2 data-ng-class="{\'text-danger\': !item.enabled}"></span></label></div></div><div class=col-xs-5><div class=col-xs-12><button class="btn btn-primary" data-ng-click=modalVm.selectAllColumns(true)><span data-translate=APP.ACTIONS.SELECT_ALL></span> <i class="fa fa-check-square"></i></button> <button class="btn btn-default" data-ng-click=modalVm.selectAllColumns(false)><span data-translate=APP.ACTIONS.DESELECT_ALL></span> <i class="fa fa-square-o"></i></button></div><div class="checkbox col-xs-12" data-ng-repeat="key in modalVm.keys"><label><input type=checkbox ng-model=modalVm.columns[key]> <span ng-bind=key class=m-r-2></span></label></div></div><div class=col-xs-12><button class="btn btn-success col-xs-3" data-ng-click=modalVm.ok()><i class="fa fa-file-excel-o"></i> <span data-translate=APP.ACTIONS.OK></span></button></div></div></div></div></div></div>'),
t.put("app/components/monitoring/dirContract-concludedContract-modal/dirContract-concludedContract.html",'<div class=modal-body><div class=module-inner><div class=module-heading><h2 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h2></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-show-filter=false><tr><th class=text-center></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NUMBER></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.DATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></th><th class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th></tr><tr class=text-center data-ng-repeat="contract in cvm.contracts"><td><input name=checkRadioButton type=radio data-ng-model=cvm.concludedContractId value={{contract.id}} data-ng-checked=cvm.checked[{{contract.id}}]></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.NUMBER\'|translate" data-ng-bind=contract.number|pNumber></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\'|translate" data-ng-bind=contract.contractType|pNumber></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT\'|translate" data-ng-bind="contract.totalAmount|pCurrency:\'R\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE\'|translate" data-ng-bind=contract.interestRate|pPercent></td><td data-title="\'APP.MODULES.CONTRACT.DATE\'|translate" data-ng-bind=contract.contractDate|jDate></td><td data-title="\'APP.MODULES.CONTRACT.REMAINING_CURRENT\'|translate" data-ng-bind="contract.remainingInCurrent|pCurrency:\'R\'"></td><td data-title="\'APP.MODULES.CONTRACT.REMAINING_NON_CURRENT\'|translate" data-ng-bind="contract.remainingInNonCurrent|pCurrency:\'R\'"></td><td data-title="\'APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD\'|translate" data-ng-bind=contract.respiratoryPeriod|pNumber></td></tr></table><div class=pull-left><a class="btn btn-primary" ng-click=cvm.setContract()><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></a></div></div></pane-body></div></div></div></div>'),t.put("app/components/monitoring/invoice/batch-insert-modal.html",'<div class=modal-header><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.INVOICE.BATCH_INSERT></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=modalVm.cancel()></i></div><div class=modal-body><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><thead><tr class=text-center><th data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th><th data-translate=APP.SHARE.OPERATION></th></tr></thead><tbody><tr class=text-center data-ng-repeat="invoice in modalVm.invoices"><td><input data-ng-keypress="modalVm.keyPressed($event, \'number\',$index)" data-ng-model=invoice.number title="{{\'APP.MODULES.MONITORING.INVOICE.NUMBER\'|translate}}" type=text data-ng-attr-id="{{$index + \'-0\'}}" class=form-control></td><td><simple-date data-ng-keypress="modalVm.keyPressed($event, \'date\',$index)" data-ng-model=invoice.date title="{{\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate}}" type=text data-ng-attr-id="{{$index + \'-1\'}}" class=form-control></simple-date></td><td><select data-ng-options="IA.id as IA.name for IA in modalVm.investmentActions" data-ng-model=invoice.investmentAction.id title="{{\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\'|translate}}" type=text data-ng-attr-id="{{$index + \'-2\'}}" class=form-control></select></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'description\',$index)" data-ng-model=invoice.description title="{{\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\'|translate}}" type=text data-ng-attr-id="{{$index + \'-3\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'unit\',$index)" data-ng-model=invoice.unit title="{{\'APP.MODULES.MONITORING.INVOICE.UNIT\'|translate}}" type=text data-ng-attr-id="{{$index + \'-4\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'price\',$index)" data-ng-model=invoice.price title="{{\'APP.MODULES.MONITORING.INVOICE.PRICE\'|translate}}" currency-tooltip dir=ltr ui-number-mask=0 data-ng-attr-id="{{$index + \'-5\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'invoiceBasedCount\',$index)" data-ng-model=invoice.invoiceBasedCount title="{{\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\'|translate}}" type=number data-ng-attr-id="{{$index + \'-6\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'monitoringBasedCount\',$index)" data-ng-model=invoice.monitoringBasedCount title="{{\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\'|translate}}" type=number data-ng-attr-id="{{$index + \'-7\'}}" class=form-control></td><td><i class="icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger" ng-click=modalVm.remove(invoice.id,$index)></i></td></tr><tr class="text-center not-persisted"><td><input data-ng-keypress="modalVm.keyPressed($event, \'number\')" data-ng-model=modalVm.invoice.number title="{{\'APP.MODULES.MONITORING.INVOICE.NUMBER\'|translate}}" type=text data-ng-attr-id="{{modalVm.invoices.length + \'-0\'}}" class=form-control></td><td><simple-date data-ng-keypress="modalVm.keyPressed($event, \'date\')" data-ng-model=modalVm.invoice.date title="{{\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate}}" type=text data-ng-attr-id="{{modalVm.invoices.length + \'-1\'}}" class=form-control></simple-date></td><td><select data-ng-options="IA.id as IA.name for IA in modalVm.investmentActions" data-ng-model=modalVm.invoice.investmentAction.id title="{{\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\'|translate}}" type=text data-ng-attr-id="{{modalVm.invoices.length + \'-2\'}}" class=form-control></select></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'description\')" data-ng-model=modalVm.invoice.description title="{{\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\'|translate}}" type=text data-ng-attr-id="{{modalVm.invoices.length + \'-3\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'unit\')" data-ng-model=modalVm.invoice.unit title="{{\'APP.MODULES.MONITORING.INVOICE.UNIT\'|translate}}" type=text data-ng-attr-id="{{modalVm.invoices.length + \'-4\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'price\')" data-ng-model=modalVm.invoice.price title="{{\'APP.MODULES.MONITORING.INVOICE.PRICE\'|translate}}" currency-tooltip dir=ltr ui-number-mask=0 data-ng-attr-id="{{modalVm.invoices.length + \'-5\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'invoiceBasedCount\')" data-ng-model=modalVm.invoice.invoiceBasedCount title="{{\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\'|translate}}" type=number data-ng-attr-id="{{modalVm.invoices.length + \'-6\'}}" class=form-control></td><td><input data-ng-keypress="modalVm.keyPressed($event, \'monitoringBasedCount\')" data-ng-model=modalVm.invoice.monitoringBasedCount title="{{\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\'|translate}}" type=number data-ng-attr-id="{{modalVm.invoices.length + \'-7\'}}" class=form-control></td><td style="background-color: white!important"><i class="icon pe-icon pe-7s-plus f-21 cursor-pointer text-success" ng-click=modalVm.add()></i></td></tr></tbody><tfoot><tr><td colspan=2>حرکت بین سلول‌ها: <i class="fa fa-arrows"></i> + CTRL</td><td colspan=2>کپی از ستون بالایی: CTRL + space</td><td colspan=1>ثبت و انتقال به سطر بعدی: ENTER</td><td colspan=1>حذف: SHIFT + DELETE</td><td colspan=3><div class="alert alert-warning"><i class="fa fa-warning"></i> توجه! سطر خاکستری (سطر آخر) به لیست افزوده نشده است.</div></td></tr></tfoot></table></div></div></div></div><div class=modal-footer><button class="btn btn-success col-xs-3" data-ng-click=modalVm.ok()><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.OK></span></button></div>'),t.put("app/components/monitoring/invoice/invoice-list.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" data-ng-if=vm.allowedAction ng-click=vm.batchInsert()><i class="fa fa-th-page"></i> <span data-translate=APP.MODULES.MONITORING.INVOICE.BATCH_INSERT></span></button> <button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><!-- heading row: --><tr><th data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th><span data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></span> <i class="fa fa-sort-desc" data-ng-show=vm.showSortInvestmentAction data-ng-click="vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()"></i> <i class="fa fa-sort-asc" data-ng-show=!vm.showSortInvestmentAction data-ng-click="vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()"></i></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th><th data-translate=APP.SHARE.OPERATION style="width: 15%" class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- :heading row end --><!-- repeat rows: --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-class="{\'not-persisted\': !invoice.id}" data-ng-repeat-start="invoice in $data"><td data-title="\'APP.MODULES.MONITORING.INVOICE.NUMBER\'|translate"><i data-ng-bind=invoice.number|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate"><i data-ng-bind=invoice.date|jDate|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\'|translate"><i data-ng-bind=invoice.investmentAction.name data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\'|translate"><i data-ng-bind=invoice.description|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.UNIT\'|translate"><i data-ng-bind=invoice.unit data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.PRICE\'|translate"><i data-ng-bind="(invoice.price|pCurrency:\'R\')" data-ng-hide=vm.toggleEdit[$index] title="{{invoice.price|pCurrency:\'A\'}}"></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\'|translate"><i data-ng-bind=invoice.invoiceBasedCount|pNumber data-ng-hide=vm.toggleEdit[$index]></i></td><td data-title="\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\'|translate"><i data-ng-bind=invoice.monitoringBasedCount|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title="\'APP.SHARE.OPERATION\'|translate" data-ng-show=vm.allowedAction class=screen-only><i class="icon pe-icon pe-7s-note f-20 cursor-pointer text-info" data-ng-hide=vm.toggleEdit[$index] ng-click="vm.toggleEdit[$index] = true;vm.editing = true;"></i> <i class="icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger" data-ng-hide=vm.toggleEdit[$index] ng-click="vm.deleteInvoiceFromMonitoring(invoice.id, $index)"></i></td></tr><tr data-ng-show=vm.toggleEdit[$index]><td colspan=2><input id=numberEdit name=numberEdit class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" data-ng-model=invoice.number></td><td colspan=2><select class=form-control data-ng-options="IA.id as IA.name for IA in vm.investmentActions" id=investmentActionEdit name=investmentActionEdit data-ng-model=invoice.investmentAction.id></select></td><td colspan=2><input class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" id=unitEdit name=unitEdit data-ng-model=invoice.unit></td><td colspan=2><input data-ng-show=vm.toggleEdit[$index] id=invoiceBasedCountEdit name=invoiceBasedCountEdit class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" type=number min=0 data-ng-model=invoice.invoiceBasedCount></td><td data-title="\'APP.SHARE.OPERATION\'|translate" data-ng-show=vm.allowedAction rowspan=2><i class="icon pe-icon pe-7s-close f-20 cursor-pointer text-warning" ng-show=vm.toggleEdit[$index] ng-click=vm.cancelEdit($index)></i> <i class="icon pe-icon pe-7s-check f-20 cursor-pointer text-success" ng-show=vm.toggleEdit[$index] ng-click=vm.updateInvoice(invoice.id,invoice,$index)></i></td></tr><tr data-ng-repeat-end data-ng-show=vm.toggleEdit[$index]><td colspan=2><simple-date data-ng-model=invoice.date id=dateEdit name=dateEdit data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" data-ng-attr-title="{{\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate}}" data-ng-required=vm.isCurrent(invoice.investmentAction.id) data-ng-disabled=vm.loading tabindex=12 required></simple-date></td><td colspan=2><input id=descriptionEdit name=descriptionEdit class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" data-ng-model=invoice.description></td><td colspan=2><input data-ng-show=vm.toggleEdit[$index] id=priceList name=priceList class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=invoice.price></td><td colspan=2><input id=monitoringBasedCountEdit name=monitoringBasedCountEdit class=form-control data-ng-keypress="vm.keyPressed($event, invoice.id,invoice,$index)" type=number min=0 data-ng-model=invoice.monitoringBasedCount></td></tr><!-- :repeat rows end --><!-- empty row: --><tr ng-hide=$data.length class=text-center><td class=text-danger colspan=9 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr><!-- :empty row end --><!-- add rows: --><tr data-ng-if="vm.allowedAction && !vm.loading" class=screen-only><td colspan=2><input id=number name=number data-ng-disabled=vm.loading tabindex=11 auto-focus=true data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.NUMBER\'|translate}}" class=form-control data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.number></td><td colspan=2><select class=form-control data-ng-disabled=vm.loading tabindex=13 data-ng-options="IA.id as IA.name for IA in vm.investmentActions" id=investmentAction name=investmentAction data-ng-model=vm.invoice.investmentAction.id></select></td><td colspan=2><input class=form-control data-ng-disabled=vm.loading tabindex=15 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.UNIT\'|translate}}" id=unit name=unit type=text data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.unit></td><td colspan=2><input id=invoiceBasedCount name=invoiceBasedCount data-ng-disabled=vm.loading tabindex=17 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\'|translate}}" class=form-control type=number min=0 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.invoiceBasedCount></td><td rowspan=2><a class="btn btn-sm text-success" data-ng-hide=vm.loading title="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-click=vm.addInvoice()><span class="icon pe-icon pe-7s-plus f-18 f-bold"></span></a></td></tr><tr data-ng-if=vm.allowedAction class=screen-only><td colspan=2><!--<adm-dtp data-ng-model="vm.invoice.date">\r\n                                    <input class="form-control" type="text" data-ng-disabled="vm.loading" tabindex="12"\r\n                                           data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate}}"\r\n                                           id="date" name="date"\r\n                                           data-ng-model="vm.invoice.date"\r\n                                           dtp-input data-ng-keypress="vm.keyPressed($event)"\r\n                                           required>\r\n                                </adm-dtp>--><simple-date data-ng-model=vm.invoice.date id=date name=date data-ng-keypress=vm.keyPressed($event) data-ng-attr-title="{{\'APP.MODULES.MONITORING.INVOICE.DATE\'|translate}}" data-ng-disabled=vm.loading tabindex=12 required></simple-date></td><td colspan=2><input id=description name=description class=form-control data-ng-keypress=vm.keyPressed($event) tabindex=14 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\'|translate}}" data-ng-disabled=vm.loading data-ng-model=vm.invoice.description></td><td colspan=2><input id=price name=price class=form-control data-ng-disabled=vm.loading data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.PRICE\'|translate}}" currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) tabindex=16 data-ng-model=vm.invoice.price></td><td colspan=2><input id=monitoringBasedCount name=monitoringBasedCount data-ng-disabled=vm.loading data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\'|translate}}" class=form-control type=number min=0 data-ng-keypress=vm.keyPressed($event) tabindex=18 data-ng-model=vm.invoice.monitoringBasedCount></td></tr><!-- :add rows end--></table></div><hr><div class=module-heading><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.DIRECTIVE_BASE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVOICE_BASE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.MONITOR_BASE></th><!--<th class="text-center" data-translate="APP.SHARE.DESCRIPTION"></th>--></tr><tr class=text-center data-ng-repeat="item in vm.conflicts"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind="(item.directiveBased|pCurrency:\'R\')" title="{{item.directiveBased|pCurrency:\'A\'}}"></td><td data-ng-class="{\'RedBG\':item.directiveBased > item.invoiceBased }" data-ng-bind="(item.invoiceBased|pCurrency:\'R\')" title="{{item.invoiceBased|pCurrency:\'A\'}}"></td><td data-ng-class="{\'RedBG\':item.directiveBased > item.monitoringBased }" data-ng-bind="(item.monitoringBased|pCurrency:\'R\')" title="{{item.monitoringBased|pCurrency:\'A\'}}"></td><!--<td data-ng-bind="item.description"></td>--></tr><tr class="text-center BlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="vm.sumDirectiveBased |pCurrency:\'R\'" title="{{vm.sumDirectiveBased|pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumInvoiceBased |pCurrency:\'R\'" data-ng-class="{\'DarkRedFill\':vm.sumInvoiceBased < vm.sumDirectiveBased}" title="{{vm.sumInvoiceBased|pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumMonitoringBased |pCurrency:\'R\'" data-ng-class="{\'DarkRedFill\':vm.sumMonitoringBased < vm.sumDirectiveBased}" title="{{vm.sumMonitoringBased|pCurrency:\'A\'}}"></td></tr></table></div></div><div class=screen-only><div class=row><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div>'),t.put("app/components/monitoring/lat-long/lat-long.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-4><div class=pull-left><button class="btn btn-sm btn-primary-alt" data-ng-show=vm.allowedAction data-ng-disabled=latLongForm.$invalid data-ng-click=vm.updateLatLong() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><span data-translate=APP.ACTIONS.SAVE></span> <i class="fa fa-save"></i></button> <button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form name=latLongForm data-ng-submit=latLongForm.$setPristine() novalidate><fieldset data-ng-disabled=!vm.allowedAction><div class=row><div class="col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':latLongForm.latitude.$dirty && latLongForm.latitude.$invalid}"><label data-translate=APP.MODULES.MONITORING.LAT_LONG.LATITUDE for=latitude></label><input class="form-control number" type=number data-ng-disabled=vm.loading id=latitude name=latitude min=43 max=63 data-ng-model=vm.monitoring.latitude required></div></div><div class="col-md-6 col-xs-12 pull-right"><div class=form-group data-ng-class="{\'has-error\':latLongForm.longitude.$dirty && latLongForm.longitude.$invalid}"><label data-translate=APP.MODULES.MONITORING.LAT_LONG.LONGITUDE for=longitude></label><input class="form-control number" type=number data-ng-disabled=vm.loading id=longitude name=longitude min=20 max=40 data-ng-model=vm.monitoring.longitude required></div></div><div class="col-md-6 col-xs-12 pull-right"><div class=form-group><label data-translate=APP.SHARE.COMMENT for=description></label><textarea class=form-control style="resize: none" data-ng-disabled=vm.loading id=description name=description data-ng-model=vm.monitoring.locationDescription required></textarea></div></div><div class="col-xs-12 pull-right DarkRedFill" data-ng-show="vm.monitoring.id && latLongForm.$invalid"><span data-translate=LOCATION_ERROR data-ng-show="latLongForm.$error.max || latLongForm.$error.min"></span> <span data-translate=LOCATION_ERROR style="color: white"></span></div></div><div class=row><div class=lat-long><table border=1 class="table text-center" style="max-width: 100%; overflow: hidden"><tbody><tr><td data-translate=APP.MODULES.MONITORING.LAT_LONG.NUMBER></td><td ng-repeat="value in vm.dimensions" data-ng-bind="(value.monitoring.number.split(\'-\')[0] +\'-\'+ (value.monitoring.number.split(\'-\')[1]) + \'...\' + value.monitoring.number.split(\'-\')[value.monitoring.number.split(\'-\').length-1])|pNumber" class=ltr-number></td></tr><tr ng-repeat="title in vm.dimensions"><td><span uib-tooltip={{title.info}} data-ng-bind=title.monitoring.number|pNumber class=ltr-number></span></td><td ng-repeat="value in vm.dimensions" data-ng-bind="(title.distance - value.distance)|makePositive|number|pDistance"></td></tr></tbody></table></div></div></fieldset></form></div></div></div></div></div>'),t.put("app/components/monitoring/license/license-list.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-if-filter=false><tr class=text-center data-ng-class="{\'OrangeBG\':!monitoringLicense.id && !vm.toggleEdit[$index]}" data-ng-repeat="monitoringLicense in $data"><td data-title="\'APP.MODULES.MONITORING.LICENSE.NAME\'|translate"><i data-ng-bind=monitoringLicense.dirLicense.name></i></td><td data-title="\'APP.MODULES.MONITORING.LICENSE.NUMBER\'|translate"><i data-ng-bind=monitoringLicense.number|pNumber data-ng-if=!vm.toggleEdit[$index]></i> <input id=numberEdit name=numberEdit class=form-control type=text data-ng-keypress="vm.keyPressed($event, monitoringLicense, $index)" data-ng-model=monitoringLicense.number data-ng-if=vm.toggleEdit[$index]></td><td data-title="\'APP.MODULES.MONITORING.LICENSE.ISSUE_DATE\'|translate"><i data-ng-bind=monitoringLicense.issuingDate|jDate data-ng-if=!vm.toggleEdit[$index]></i><simple-date data-ng-model=monitoringLicense.issuingDate data-ng-if=vm.toggleEdit[$index] id=issuingDateEdit name=issuingDateEdit></simple-date></td><td data-title="\'APP.MODULES.MONITORING.LICENSE.ISSUED_FROM\'|translate"><i data-ng-bind=monitoringLicense.issuedFrom data-ng-if=!vm.toggleEdit[$index]></i> <input id=issuedFromEdit name=issuedFromEdit class=form-control type=text data-ng-keypress="vm.keyPressed($event, monitoringLicense, $index)" data-ng-model=monitoringLicense.issuedFrom data-ng-if=vm.toggleEdit[$index]></td><td data-ng-class="{ \'RedBG\':monitoringLicense.hasConflict}" data-title="\'APP.MODULES.MONITORING.LICENSE.EXPIRE_DATE\'|translate"><i data-ng-bind=monitoringLicense.expireDate|jDate data-ng-if=!vm.toggleEdit[$index]></i><simple-date data-ng-model=monitoringLicense.expireDate data-ng-if=vm.toggleEdit[$index] id=expireDateEdit min={{monitoringLicense.issuingDate}} name=expireDateEdit data-ng-keypress="vm.keyPressed($event, monitoringLicense, $index)"></simple-date></td><td style="width: 12%" data-title="\'APP.MODULES.MONITORING.LICENSE.ISINTHENAMEOF_APPLICANT\'|translate"><i data-ng-bind=monitoringLicense.isInTheNameOfApplicant|trueFalse|translate data-ng-if=!vm.toggleEdit[$index]></i><select class=form-control data-ng-if=vm.toggleEdit[$index] data-ng-options="tf.id as tf.value for tf in vm.trueFalseList" id=isInTheNameOfApplicantEdit name=isInTheNameOfApplicantEdit data-ng-model=monitoringLicense.isInTheNameOfApplicant required></select></td><td data-ng-class="{ \'RedBG\': monitoringLicense.comment && monitoringLicense.comment.length}" data-title="\'APP.MODULES.MONITORING.LICENSE.CONFLICTS\'|translate"><i data-ng-bind=monitoringLicense.comment data-ng-if=!vm.toggleEdit[$index]></i> <input id=comment name=comment data-ng-if=vm.toggleEdit[$index] class=form-control type=text data-ng-model=monitoringLicense.comment data-ng-keypress="vm.keyPressed($event, monitoringLicense, $index)"></td><td class=screen-only data-title="\'APP.SHARE.OPERATION\'|translate"><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updateLicense(monitoringLicense,$index) delete=vm.deleteLicenseFromMonitoring(monitoringLicense.id) has-delete="monitoringLicense.id !=null" toggle=vm.toggleEdit[$index]></command-buttons></td></tr></table><hr><div class=module-heading><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.TITLE></h4><div class=clearfix></div></div><table class="hover no-footer row-border dataTable"><tr class=text-center><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.INDEX></th><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE></th><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat="item in vm.monitoring.monitoringLicenseItems"><td data-title="\'\'|translate" data-ng-bind=($index+1)|pNumber></td><td><span data-ng-bind=item.productionType ng-hide=item.editing></span> <input title="{{\'APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE\'|translate}}" class=form-control ng-show=item.editing data-ng-model=item.productionType></td><td><span data-ng-bind=item.nominalCapacity ng-hide=item.editing></span> <input title="{{\'APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY\'|translate}}" class=form-control ng-show=item.editing data-ng-model=item.nominalCapacity></td><td class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEditItem(item) has-edit=true edit=vm.updateLicenseItem(item,$index) delete=vm.deleteLicenseItem(item.id) has-delete=true toggle=item.editing></command-buttons></td></tr><tr><td data-ng-bind="(vm.monitoring.monitoringLicenseItems.length + 1)|pNumber"></td><td><input title="{{\'APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE\'|translate}}" class=form-control data-ng-model=vm.item.productionType></td><td><input title="{{\'APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY\'|translate}}" class=form-control data-ng-model=vm.item.nominalCapacity></td><td><a class="btn btn-sm text-success" title=افزودن data-ng-click=vm.addLicenseItem()><span class="icon pe-icon pe-7s-plus f-20"></span></a></td></tr></table></div></div></div></div></div>'),t.put("app/components/monitoring/missionAnnouncement/mission-announcement.html",'<div class="container-fluid monitoring"><h2 class=approve-title></h2><div class=row><div class="module-wrapper col-xs-12"><section class=module><div class=module-inner><div class="module-heading screen-only"><h1 class="module-title inline"><span class="icon pe-icon pe-7s-mail-open-file monitoring"></span> <span data-translate=APP.MODULES.MONITORING.MISSIONANOUNCEMENT></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class="screen-only pane-body"><span data-translate=APP.MODULES.MONITORING.SEARCH_EXPERT></span><form class="dataTables_wrapper dt-bootstrap search-container" data-ng-submit=vm.getMonitoringByProvinceAndExperts()><div class=row><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select theme=bootstrap id=province name=province data-ng-change=vm.getExpertByProvince() data-ng-model=vm.province><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.title></span></ui-select-match><ui-select-choices repeat="province in vm.provinces | propsFilter : {title: $select.search,code:$select.search}"><div ng-bind-html="(province.title+\' (\'+province.code+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.EXPERTS_IN_PROVINCE></label><ui-select theme=bootstrap id=experts name=experts data-ng-change=vm.getCoExpertByProvince() data-ng-model=vm.expert><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat="expert in vm.experts | propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="(expert.name+\' (\'+expert.username+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMMON_EXPERTS></label><ui-select theme=bootstrap id=commonExperts name=commonExperts data-ng-change=vm.getMonitoringByProvinceAndExperts() data-ng-model=vm.coexpert><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat="expert in vm.coexperts | propsFilter : {name: $select.search,username:$select.search}"><div ng-bind-html="(expert.name+\' (\'+expert.username+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.DATE_FROM></label><simple-date data-ng-model=vm.dateFrom name=dateFrom id=date-from></simple-date></div></div><div class="col-xs-4 pull-right"><div class=form-group><label data-translate=APP.SHARE.DATE_TO></label><simple-date data-ng-model=vm.dateTo name=dateTo id=date-to></simple-date></div></div><div class="col-xs-4 pull-right"><div class=form-group><label for=daysNumber data-translate=APP.MODULES.MONITORING.MISSIONDAYS></label><input type=text ui-number-mask=0 id=daysNumber data-ng-model=vm.daysNumber class=form-control></div></div><div class="col-xs-4 margin-top-sm screen-only"><div class=pull-left><button class="btn btn-warning-alt" type=button data-ng-click=vm.cancelSearch() uib-tooltip="{{\'APP.ACTIONS.RESET\'|translate}}"><i class="fa fa-refresh"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class="btn btn-primary-alt" type=button onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT></span></button></div></div></div></form></div><hr class="screen-only pane-body"><div class=pane-body id=print-section><div class="row nazanin-font" style=line-height:1.5><div class="col-sm-12 text-center"><span class="text-center font12 nazanin-font">بسمه تعالی</span><br><br></div><div class="col-sm-12 text-center"><span class="text-center font16 nazanin-font">ابلاغیه ماموریت اداری</span><br><br></div><div class=col-sm-12><span class="font16 nazanin-font">آقایان/ خانم ها <b>{{vm.expert.name}} </b><span data-ng-show=vm.coexpert.name>و</span><b> {{vm.coexpert.name}}</b></span></div><div class=col-sm-12><span class="font16 nazanin-font">موضوع : ابلاغ ماموریت بازدید میدانی از طرح های اعتباری استان </span><span class="font16 nazanin-font" data-ng-bind=vm.province.title></span><br></div><div class=col-sm-12><span class="font12 nazanin-font">با سلام</span></div><div class="col-sm-12 justified"><span class="font12 nazanin-font">&nbsp;&nbsp;&nbsp;با عنایت به لزوم نظارت بر عملکرد اعتباری مدیریت شعب استان ها، همچنین بررسی نحوه مصرف صحیح تسهیلات دریافت کنندگان اعتبار، بدینوسیله به شما ماموریت داده می شود طی</span> <b class="font12 nazanin-font" data-ng-bind=vm.daysNumber|pNumber></b> <span class="font12 nazanin-font">روز کاری در هفته جاری/ آتی </span><!--<span class="font12 nazanin-font" data-ng-bind="vm.dateFrom|jDate"></span>--><!--<span class="font12 nazanin-font">تا</span>--><!--<span class="font12 nazanin-font" data-ng-bind="vm.dateTo|jDate"></span>--> <span class="font12 nazanin-font">ضمن عزیمت به استان </span><span class="font12 nazanin-font" data-ng-bind=vm.province.title></span> <span class="font12 nazanin-font">و بازدید از طرح های اعتباری استان به شرح ذیل، گزارش تهیه و از طریق سامانه گزارش‌های مربوطه ثبت گردد.</span><br><br></div></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-show-filter=false><tr class="text-center font14 nazanin-font"><th data-ng-bind="\'APP.MODULES.MONITORING.COMPANY_APPLICANT\'|translate"></th><th data-ng-bind="\'APP.MODULES.CONTRACT.NUMBER\'|translate"></th><th data-ng-bind="\'APP.MODULES.MONITORING.LOANAMOUNT\'|translate"></th><th data-ng-bind="\'APP.MODULES.MONITORING.ECONOMIC_SECTION\'|translate"></th><th data-ng-bind="\'APP.MODULES.MONITORING.PLAN_TYPE\'|translate"></th><th data-ng-bind="\'APP.MODULES.MONITORING.BRANCH\'|translate"></th></tr><tr class="text-center font14 nazanin-font" data-ng-repeat="monitoring in vm.monitorings"><td data-ng-bind=monitoring.contract.companyName></td><td data-ng-bind=monitoring.contract.number|pNumber></td><td data-ng-bind="(monitoring.contract.totalAmount|pCurrency:\'R\')"></td><td data-ng-bind=monitoring.contract.economicSection.name></td><td data-ng-bind=monitoring.contract.planType></td><td data-ng-bind="monitoring.contract.branch.title + \' - \' + (monitoring.contract.branch.code|pNumber)"></td></tr></table></div><div class=row><div class=col-sm-12><br><div class="fa fa-square-o"></div><span class="font16 nazanin-font">در خصوص عملکرد معاونت مربوطه و کارشناس نظارت تحت امر گزارش تهیه و اعلام نظر گردد.</span><br></div><div class="col-sm-4 col-print-4 pull-left text-center"><span class="font14 nazanin-font" data-ng-hide=vm.isProvince>رییس اداره نظارت بر اعطای تسهیلات </span><span class="font14 nazanin-font" data-ng-show=vm.isProvince>معاونت اعتباری حفوقی استان {{vm.province.title}}</span><br><span class="font14 nazanin-font">تاریخ :‌ {{vm.date|jDate}}</span></div></div></div></div></div></div></section></div></div></div>'),
t.put("app/components/monitoring/checkList/monitoring-checkList.html",'<div class="module-inner screen-only"><div class=module-heading><i class="pe-7s-angle-right-circle f-2r" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h1><i class="pe-7s-angle-left-circle f-2r" ng-click=vm.next()></i><div class=col-md-8><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><span class="pe-7s-less text-danger f-bold" ng-show="vm.monitoringCheckListCount !== vm.monitoringCheckList.length"></span> <span class="pe-7s-check text-success f-bold" data-ng-hide="vm.monitoringCheckListCount !== vm.monitoringCheckList.length"></span><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></h4><br><img src=assets/images/loading-sm.gif alt="در حال بارگذاری ..." data-ng-show=vm.loadingCheckList class=centered height=50><form name=checklistForm><div class=contract-container><div class=row><div class="col-lg-4 text-center pull-right f-bold" data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></div><div class="col-lg-5 text-center pull-right f-bold" data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></div><div class="col-lg-3 text-center pull-right form-group f-bold" data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></div></div><div class=row data-ng-repeat-start="item in vm.monitoringCheckList"><div class="col-lg-4 pull-right justified" data-ng-bind=item.checkList.content></div><div class="col-lg-4 text-center pull-right"><fieldset data-ng-disabled=!vm.allowedAction><div class="col-xs-3 pull-right f-1r"><input type=radio ng-model=item.checkListStatus value=DONE> {{"APP.MODULES.MONITORING.CHECKLIST.STATUS.DONE"|translate}}</div><div class="col-xs-3 pull-right f-1r"><input type=radio ng-model=item.checkListStatus value=VIOLATED> {{"APP.MODULES.MONITORING.CHECKLIST.STATUS.VIOLATED"|translate}}</div><div class="col-xs-3 pull-right f-1r"><input type=radio ng-model=item.checkListStatus value=UNDONE> {{"APP.MODULES.MONITORING.CHECKLIST.STATUS.UNDONE"|translate}}</div><div class="col-xs-3 pull-right f-1r"><input type=radio ng-model=item.checkListStatus value=UNRELATEDTODIRECTIVE> {{"APP.MODULES.MONITORING.CHECKLIST.STATUS.UNRELATEDTODIRECTIVE"|translate}}</div></fieldset></div><div class="col-lg-4 text-center pull-right form-group" data-ng-class="{\'has-error\': item.checkListStatus === \'VIOLATED\' || item.checkListStatus === \'UNDONE\'}"><textarea class=form-control type=text data-ng-readonly=!vm.allowedAction data-ng-attr-title={{APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION}} data-ng-attr-name=comment-{{$index}} data-ng-model=item.comment style="cursor: text" cols=2 data-ng-required="item.checkListStatus === \'VIOLATED\' || item.checkListStatus === \'UNDONE\'"></textarea><!--<span class="form-control" data-ng-hide="vm.allowedAction"--><!--data-ng-bind="item.comment"></span>--></div></div><hr data-ng-repeat-end=""></div><div class=pull-left><button class="btn btn-primary-alt m-t-1" data-ng-show=vm.allowedAction data-ng-disabled="checklistForm.$invalid || vm.loadingCheckList" data-ng-click=vm.addCheckListToMonitoring() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><span data-translate=APP.ACTIONS.SAVE></span> <i class="fa fa-save"></i></button></div></form></div><div class=clearfix></div><hr><div class=pane-body><span class="pe-7s-less text-danger f-bold" ng-show="!vm.monitoring.agentBranchPerformanceEvaluation ||\r\n                      !vm.monitoring.applicantPerformanceEvaluation || !vm.monitoring.approverPerformanceEvaluation"></span> <span class="pe-7s-check text-success f-bold" ng-show="vm.monitoring.agentBranchPerformanceEvaluation &&\r\n                      vm.monitoring.applicantPerformanceEvaluation && vm.monitoring.approverPerformanceEvaluation"></span><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></h4><br><div class=contract-container><div class=row><div class="col-md-4 pull-right"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT></label></div><div class="col-md-8 pull-right"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.applicantPerformance value=NO_DEVIATION> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.NO_DEVIATION"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=RELATEDDOCS_WARNING> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.RELATEDDOCS_WARNING"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=LACKOFPROGRESS_PLANREVIEW_WARNING> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.LACKOFPROGRESS_PLANREVIEW_WARNING"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=TOTAL_WARNING> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.TOTAL_WARNING"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=CONDITIONAL_COMMITMENT_CONVERT> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.CONDITIONAL_COMMITMENT_CONVERT"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=COMMITMENT_CONVERT> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.COMMITMENT_CONVERT"|translate}}<br></fieldset></div></div><hr><div class=row><div class="col-md-4 pull-right"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT></label></div><div class="col-md-8 pull-right"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.agentBranchPerformance value=NO_DEVIATION> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.NO_DEVIATION"|translate}}<br><input type=radio ng-model=vm.agentBranchPerformance value=TRACE_NEEDED> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.TRACE_NEEDED"|translate}}<br><input type=radio ng-model=vm.agentBranchPerformance value=DEVIATION> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.DEVIATION"|translate}}<br></fieldset></div></div><hr><div class=row><div class="col-md-4 pull-right"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT></label></div><div class="col-md-8 pull-right"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.approverPerformance value=NO_DEVIATION> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.NO_DEVIATION"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_DIRECTIVE_SETTING> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_DIRECTIVE_SETTING"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_CONTRACT_INVESTIGATION> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_CONTRACT_INVESTIGATION"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_DIRECTIVE_CONTRACT> {{"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_DIRECTIVE_CONTRACT"|translate}}<br></fieldset></div></div></div><div class=pull-left><button class="btn btn-primary-alt m-t-1" data-ng-show=vm.allowedAction data-ng-click=vm.updatePerformanceEvaluation() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><span data-translate=APP.ACTIONS.SAVE></span> <i class="fa fa-save"></i></button></div></div><div class=clearfix></div><hr><div class=pane-body><span class="pe-7s-less text-danger f-bold" ng-show=!vm.monitoring.finalExpertComment></span> <span class="pe-7s-check text-success f-bold" ng-show=vm.monitoring.finalExpertComment></span><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></h4><br><textarea class=form-control rows=4 cols=139 data-ng-show=vm.allowedAction title={{APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT|translate}} data-ng-model=vm.monitoring.finalExpertComment></textarea><span class=form-control data-ng-hide=vm.allowedAction data-ng-bind=vm.monitoring.finalExpertComment></span><div class=pull-left><button class="btn btn-primary-alt m-t-1" data-ng-show=vm.allowedAction data-ng-click=vm.addFinalExpertComment() uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><span data-translate=APP.ACTIONS.SAVE></span> <i class="fa fa-save"></i></button></div><div class=clearfix></div></div></div></div></div><div class="print-only m-l-2"><h1 data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h1><table class="table table-bordered" style="margin-left: 5px"><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></th><th data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></th><th data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></th></tr><tr data-ng-repeat="item in vm.monitoringCheckList|checkList"><td data-ng-bind=item.checkList.content></td><td data-ng-bind=item.checkListStatus|checkList></td><td data-ng-bind=item.comment></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></th></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT></td><td colspan=2 data-ng-bind=vm.applicantPerformance|checkList></td></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT></td><td colspan=2 data-ng-bind=vm.agentBranchPerformance|checkList></td></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT></td><td colspan=2 data-ng-bind=vm.approverPerformance|checkList></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.finalExpertComment></td></tr></table></div>'),t.put("app/components/monitoring/monitoring-details/monitoring-details.html",'<div class="module-inner screen-only"><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h1><i class="pe-7s-angle-left-circle f-2r" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" data-ng-show=vm.allowedAction data-ng-click=vm.editMonitoring(monitoringDetailsForm) data-ng-disabled=monitoringDetailsForm.$invalid uib-tooltip="{{\'APP.ACTIONS.SUBMIT\'|translate}}"><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class="col-md-5 col-md-offset-1 text-center" data-ng-show=vm.allowedAction><span class=text-warning ng-show="vm.savingStatus == 0" data-translate="empty monitoring fields"></span> <span class=text-danger ng-show="vm.savingStatus == 1" data-translate="editing monitoring fields"></span> <span class=text-success ng-show="vm.savingStatus == 2" data-translate="saved monitoring fields"></span></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><form name=monitoringDetailsForm><div class=row><fieldset data-ng-disabled="!vm.allowedAction || vm.loading"><div class="col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.monitoringDate.$invalid}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.DATE></label><!--<adm-dtp data-ng-model="vm.monitoring.monitoringDate">\r\n                                        <input class="form-control" data-ng-change="vm.savingStatus = 1"\r\n                                               id="DATE" name="monitoringDate"\r\n                                               data-ng-model="vm.monitoring.monitoringDate"\r\n                                               dtp-input\r\n                                               required>\r\n                                    </adm-dtp>--><simple-date data-ng-change="vm.savingStatus = 1" ng-attr-min={{vm.monitoring.directive.dirApproveDate}} data-ng-model=vm.monitoring.monitoringDate id=monitoringDate name=monitoringDate required></simple-date><!--{{monitoringDetailsForm.monitoringDate.$error}}--> <span class=help-block data-ng-show=monitoringDetailsForm.monitoringDate.$error.min data-translate="monitoring date min error"></span> <span class=help-block data-ng-show="monitoringDetailsForm.monitoringDate.$error.invalidDate || monitoringDetailsForm.monitoringDate.$error.mask" data-translate="invalid date error"></span> <span class=help-block data-ng-show=monitoringDetailsForm.monitoringDate.$valid style="opacity: 0">_</span></div><div class="col-md-4 col-xs-12 pull-right form-group"><label for=province data-translate=APP.MODULES.MONITORING.PROVINCE></label><span class=form-control data-ng-bind=vm.monitoring.contract.province.title id=province></span></div><div class="col-md-4 col-xs-12 pull-right form-group ui-select-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && !vm.monitoring.payerBranch}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.BRANCH></label><ui-select theme=bootstrap id=branch data-ng-change="vm.savingStatus = 1" data-ng-model=vm.monitoring.payerBranch><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind=$select.selected.title></span></ui-select-match><ui-select-choices repeat="branch in vm.branches | propsFilter : {title: $select.search,code:$select.search}"><div ng-bind-html="(branch.title+\' (\'+branch.code+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class=col-xs-12></div><div class="col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && !vm.monitoring.branchChiefInMonitoringTime}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></label><ui-select theme=bootstrap id=branchChiefInMonitoringTime data-ng-model=vm.monitoring.branchChiefInMonitoringTime><ui-select-match placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}"><span data-ng-bind="$select.selected.name + \'(\' + $select.selected.code + \')\'"></span></ui-select-match><ui-select-choices repeat="employee in vm.allEmployees" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html="(employee.name+\' (\'+employee.code+\')\') | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.planType.$invalid}"><span ng-show="!vm.fillTheFields || !monitoringDetailsForm.planType.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && monitoringDetailsForm.planType.$invalid">*</span><label data-translate=APP.MODULES.MONITORING.PLAN_TYPE for=planType></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="planType.value as planType.title for planType in vm.planTypes" id=planType name=planType data-ng-model=vm.monitoring.planType required></select></div><div class="col-md-4 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.activeness.$invalid}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVENESS for=activeness></label><select class=form-control data-ng-change="vm.savingStatus = 1" ng-options="activeness.value as activeness.caption for activeness in vm.activeness" id=activeness name=activeness data-ng-model=vm.monitoring.activenessStatus required></select><span class=help-block style="opacity: 0">_</span></div><div class="col-md-4 col-xs-12 pull-right form-group"><span class=red-star>*</span><label for=economicSection data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></label><select class=form-control ng-options="economicSection.id as economicSection.name for economicSection in vm.economicSections" id=economicSection name=economicSection data-ng-model=vm.monitoring.economicSection.id></select></div><div class="col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.activitySubject.$invalid}"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT for=activitySubject></label><textarea class=form-control data-ng-attr-title="{{vm.monitoring.activitySubject ? vm.monitoring.activitySubject : (APP.MODULES.MONITORING.ACTIVITY_SUBJECT|translate)}}" data-ng-change="vm.savingStatus = 1" style="resize: vertical" id=activitySubject name=activitySubject data-ng-model=vm.monitoring.activitySubject required></textarea></div><div class="col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.projectLocationAddress.$invalid}"><span ng-show="!vm.fillTheFields || !monitoringDetailsForm.projectLocationAddress.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && monitoringDetailsForm.projectLocationAddress.$invalid">*</span><label data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS for=projectLocationAddress></label><textarea class=form-control style="resize: vertical" data-ng-change="vm.savingStatus = 1" id=projectLocationAddress name=projectLocationAddress data-ng-model=vm.monitoring.projectLocationAddress required></textarea></div><div class="col-md-12 col-xs-12 pull-right form-group" data-ng-class="{\'has-error\':vm.savingStatus == 1 && monitoringDetailsForm.description.$invalid}"><span ng-show="!vm.fillTheFields || !monitoringDetailsForm.description.$invalid">*</span> <span class=red-star ng-show="vm.fillTheFields && monitoringDetailsForm.description.$invalid">*</span><label data-translate=APP.SHARE.COMMENT for=projectLocationAddress></label><textarea class=form-control style="resize: vertical" data-ng-change="vm.savingStatus = 1" id=description name=description data-ng-model=vm.monitoring.description required></textarea></div><!--<div class="col-md-12 col-xs-12 pull-right form-group">\r\n                                    <label data-translate="APP.SHARE.MESSAGE"\r\n                                           for="firstDescription"></label>\r\n                                    <textarea class="form-control" style="resize: none;"\r\n                                              id="firstDescription" name="firstDescription"\r\n                                              data-ng-model="vm.monitoring.firstDescription"\r\n                                              ></textarea>\r\n                                </div>--></fieldset></div></form></div></div></div></div></div><div class=print-only style="margin: 0px 15px"><h2 data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h2><table class="table table-bordered"><tr><th data-translate=APP.MODULES.MONITORING.DATE></th><th data-translate=APP.MODULES.MONITORING.PROVINCE></th><th data-translate=APP.MODULES.MONITORING.BRANCH></th></tr><tr><td data-ng-bind=vm.monitoring.monitoringDate|jDate></td><td data-ng-bind=vm.monitoring.contract.province.title></td><td data-ng-bind=vm.monitoring.payerBranch.title></td></tr><tr><th data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></th><th data-translate=APP.MODULES.MONITORING.PLAN_TYPE></th><th data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th></tr><tr><td data-ng-bind=vm.monitoring.branchChiefInMonitoringTime.name></td><td data-ng-bind=vm.monitoring.planType|planType></td><td data-ng-bind=vm.monitoring.activitySubject></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.projectLocationAddress></td></tr><tr><th data-translate=APP.SHARE.COMMENT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.description></td></tr></table></div>'),t.put("app/components/monitoring/monitoringFlow/monitoring-flow.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.FLOW_VIEW.LIST></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=vm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="well well-sm" ng-if="vm.actuator || vm.creator"><div class=row ng-if=vm.actuator><b class=col-xs-8 data-ng-bind=vm.actuator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.ACTUATOR></div></div><div class=row ng-if=vm.creator><b class=col-xs-4 data-ng-bind=vm.createDate|jDate></b> <b class=col-xs-4 data-ng-bind=vm.creator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.CREATOR></div></div></div><div class=row><div class=col-xs-12><label for=show-all class="pull-right btn btn-default"><input type=checkbox class="pull-right m-l-1" id=show-all name=showAll data-ng-model=vm.showAll> <span data-translate=APP.MODULES.MONITORING.FLOW_VIEW.SHOW_ALL></span></label></div></div><div class="dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-show="(processLog.transition.name != \'editing\' && processLog.transition.name != \'calculating\' && processLog.comment != \'Authentication Failed\') || vm.showAll" data-ng-repeat="processLog in $data"><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.USERNAME\'|translate" data-ng-bind=processLog.user.name></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\'|translate" data-ng-bind=processLog.transition.id|monitoringTransitionCaption></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.DATE\'|translate" data-ng-bind=processLog.createDate|jDate></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\'|translate" data-ng-bind=processLog.createDate|timeFilter|pNumber></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.COMMENT\'|translate" data-ng-bind="processLog.comment ? (processLog.comment|translate) : \'-\'"></td></tr></table></div></div></div></div></div>'),t.put("app/components/monitoring/preConditions/preConditions.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.setConditionInMonitoring()><i class="fa fa-save"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable ng-scope ng-table"><tr><th>#</th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.CONDITION_NAME></th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS></th><th data-ng-show=vm.allowedAction></th></tr><tr data-ng-repeat="item in vm.preConditions"><td style="width: 10%">{{ $index + 1 }}</td><td style="width: 30%" data-ng-bind=item.dirCondition.condition></td><td style="width: 40%"><textarea data-ng-model=item.description class="form-control input-sm" data-ng-show=vm.allowedAction title="{{\'APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.DESCRIPTION\'|translate}}"></textarea><div data-ng-bind=item.description data-ng-hide=vm.allowedAction></div></td><td style="width: 20%"><select class=form-control title="{{\'APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS\'|translate}}" id=itemReply name=itemReply data-ng-show=vm.allowedAction data-ng-model=item.reply data-ng-options="reply.value as reply.name for reply in vm.replys" required></select><span data-ng-bind=item.reply|conditionStatus data-ng-hide=vm.allowedAction></span></td><td class=screen-only data-ng-show=vm.allowedAction><i class="icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer" ng-click=vm.deletePrecondition(item) ng-show=item.dirCondition.originalId></i></td></tr><tfoot></tfoot></table></div></pane-body></div></div></div>'),t.put("app/components/monitoring/progress/progress.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.PROGRESS.LIST></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat="progress in $data"><td data-title="\'APP.MODULES.MONITORING.PROGRESS.INVESTMENT_ACTION\'|translate" data-ng-bind=progress.investmentAction.name></td><td data-title="\'APP.MODULES.MONITORING.PROGRESS.DIRECTIVE_BASE_AMOUNT\'|translate" data-ng-attr-title="{{progress.directiveBasedAmount|pCurrency:\'A\'}}" data-ng-bind="(progress.directiveBasedAmount|pCurrency:\'R\')"></td><td data-title="\'APP.MODULES.MONITORING.PROGRESS.INVOICE_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\'|translate" data-ng-attr-title="{{progress.invoiceBasedAmount|pCurrency:\'A\'}}" data-ng-bind="\'(\' + (progress.invoiceBasedToDirectiveBasedAmountRate|number:0|pPercent)  + \') \'\r\n                                 + (progress.invoiceBasedAmount|pCurrency:\'R\')" data-ng-class="{\'RedBG\':progress.invoiceBasedAmount < progress.directiveBasedAmount, \'GreenBG\':progress.invoiceBasedAmount >= progress.directiveBasedAmount}"></td><td data-title="\'APP.MODULES.MONITORING.PROGRESS.PAYMENT_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\'|translate" data-ng-attr-title="{{progress.paymentBasedAmount|pCurrency:\'A\'}}" data-ng-bind="\'(\' + (progress.paymentBasedToDirectiveBasedAmountRate|number:0|pPercent) + \') \'\r\n                                + (progress.paymentBasedAmount|pCurrency:\'R\')" data-ng-class="{\'OrangeBG\':progress.paymentBasedAmount > progress.directiveBasedAmount, \'GreenBG\':progress.paymentBasedAmount == progress.directiveBasedAmount, \'RedBG\':progress.paymentBasedAmount < progress.directiveBasedAmount}"></td><td data-title="\'APP.MODULES.MONITORING.PROGRESS.PROGRESS_RATE\'|translate" data-ng-bind=progress.progressRate|number:0|pPercent data-ng-class="{\'RedBG\':progress.progressRate < progress.paymentBasedToDirectiveBasedAmountRate,\r\n                                 \'GreenBG\':progress.progressRate >= progress.paymentBasedToDirectiveBasedAmountRate}"></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumDirectiveBasedAmount|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumDirectiveBasedAmount|pCurrency:\'A\'}}"></td><td data-ng-bind="\'(\' + (vm.sumInvoiceToDirectivePercent|number:0|pPercent) + \') \'\r\n                            + (vm.sumInvoiceToDirective|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumInvoiceToDirective|pCurrency:\'A\'}}" data-ng-class="{\'DarkRedFill\':vm.sumInvoiceToDirective < vm.sumDirectiveBasedAmount}"></td><td data-ng-bind="\'(\' + (vm.sumPaymentToDirectivePercent|number:0|pPercent) + \') \'\r\n                            + (vm.sumPaymentToDirective|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumPaymentToDirective|pCurrency:\'A\'}}" data-ng-class="{\'DarkOrangeFill\': vm.sumPaymentToDirective > vm.sumDirectiveBasedAmount, \'DarkRedFill\':vm.sumPaymentToDirective < vm.sumDirectiveBasedAmount}"></td><!--<td data-ng-bind="(vm.sumPaymentToDirectivePercent|number:0|pPercent)"></td>--><td data-ng-bind=(vm.sumProgressRate|number:0|pPercent) data-ng-class="{\'DarkRedFill\': vm.sumProgressRate < vm.sumPaymentToDirectivePercent}"></td></tr></table></div><div class=screen-only><div class=row><i class="fa fa-circle GreenFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.NOCONFLICT></span></div><div class=row><i class="fa fa-circle OrangeFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div><div class=row><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></pane-body></div></div></div>'),t.put("app/components/monitoring/payments/payments-list.html",'<div class=module-inner><div class=module-heading><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></h1><i class="pe-7s-angle-left-circle f-2r screen-only" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class="btn btn-sm btn-primary-alt" ng-click=vm.openAttachmentModal()><i class="fa fa-file-o"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class="btn btn-sm btn-info-alt" onclick=window.print()><i class="fa fa-print"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><!-- main section --><div class="dataTables_wrapper dt-bootstrap no-footer"><!-- data table --><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><thead><tr><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE></th><th rowspan=2><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></span> <i class="fa fa-sort-desc" data-ng-show=vm.showSortInvestmentAction data-ng-click="vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()"></i> <i class="fa fa-sort-asc" data-ng-show=!vm.showSortInvestmentAction data-ng-click="vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()"></i></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_AMOUNT></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION></th><th rowspan=2 data-translate=APP.SHARE.OPERATION class=screen-only style="min-width: 95px"></th></tr><tr><th data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT></th><th data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT></th><th data-translate=APP.MODULES.MONITORING.PAYMENTS.SUM></th></tr></thead><tbody><!-- data rows ng-repeat --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat-start="payment in $data"><td><i data-ng-bind=payment.chequeDate|jDate|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=payment.investmentAction.name data-ng-show=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=payment.chequeNumber|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind="(payment.bankSharedChequeAmount|pCurrency:\'R\')" data-ng-hide=vm.toggleEdit[$index] data-ng-attr-title="{{payment.bankSharedChequeAmount|pCurrency:\'A\'}}"></i></td><td><i data-ng-bind="(payment.applicantSharedChequeAmount|pCurrency:\'R\')" data-ng-hide=vm.toggleEdit[$index] data-ng-attr-title="{{payment.applicantSharedChequeAmount|pCurrency:\'A\'}}"></i></td><td data-ng-bind="((payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\'R\')" data-ng-attr-title="{{(payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\'A\'}}"></td><td data-ng-class="{\'RedBG\': vm.payeeConflict(payment)}"><i data-ng-bind=payment.payee|payee data-ng-show=!vm.toggleEdit[$index]></i></td><td data-ng-class="{\'RedBG\': payment.conflictDescription && payment.conflictDescription.length}"><i data-ng-bind=payment.conflictDescription data-ng-show=!vm.toggleEdit[$index]></i><!--<form name="paymentForm{{$index}}" data-ng-show="vm.toggleEdit[$index]" novalidate>\r\n\r\n                                </form>--></td><td><i data-ng-bind=payment.description data-ng-show=!vm.toggleEdit[$index]></i></td><td class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updatePayment(payment.id,payment,$index) delete=vm.deletePaymentFromMonitoring(payment.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><!-- edit rows --><tr class=text-center data-ng-if=vm.toggleEdit[$index]><td colspan=3><simple-date data-ng-model=payment.chequeDate id=chequeDateEdit name=chequeDateEdit data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" required></simple-date></td><td colspan=3><input name=bankSharedChequeAmountEdit class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=payment.bankSharedChequeAmount data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" data-ng-show=vm.toggleEdit[$index]></td><td colspan=3><select id=payee-edit name=payee class=form-control data-ng-options="payee.key as payee.caption for payee in vm.payees" data-ng-model=payment.payee></select></td><td rowspan=3><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updatePayment(payment.id,payment,$index) delete=vm.deletePaymentFromMonitoring(payment.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><tr data-ng-if=vm.toggleEdit[$index]><td colspan=3><select class=form-control data-ng-options="IA.id as IA.name for IA in vm.investmentActions" id=investmentActionEdit name=investmentActionEdit data-ng-model=payment.investmentAction.id></select></td><td colspan=3 style="border-top: none"><input name=applicantSharedChequeAmountEdit class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=payment.applicantSharedChequeAmount data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" data-ng-show=vm.toggleEdit[$index]></td><td colspan=3><textarea id=conflictDescriptionEdit name=conflictDescriptionEdit data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" class=form-control rows=4 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\'|translate}} ..." data-ng-model=payment.conflictDescription></textarea></td></tr><tr data-ng-if=vm.toggleEdit[$index] data-ng-repeat-end=""><td colspan=3><input id=chequeNumberEdit name=chequeNumberEdit class=form-control data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" data-ng-model=payment.chequeNumber></td><td colspan=3 style="border-top: none"><span id=chequeTotalAmountEdit class=form-control data-ng-attr-title="{{(payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\'A\'}}" data-ng-bind="((\'APP.MODULES.MONITORING.PAYMENTS.SUM\'|translate) + \': \' + (payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency)"></span></td><td colspan=3><textarea id=descriptionEdit name=descriptionEdit data-ng-keypress="vm.keyPressed($event, null, payment.id, payment, $index)" class=form-control rows=4 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\'|translate}} ..." data-ng-model=payment.description></textarea></td></tr><!-- sum row --><tr class="text-center LightBlueBG" ng-show=$data.length><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td></td><td></td><td data-ng-bind="vm.sumBankSharedChequeAmount |pCurrency:\'R\'" data-ng-attr-title="{{vm.sumBankSharedChequeAmount |pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumApplicantSharedChequeAmount |pCurrency:\'R\'" data-ng-attr-title="{{vm.sumApplicantSharedChequeAmount |pCurrency:\'A\'}}"></td><td data-ng-bind="vm.sumTotalAmount |pCurrency:\'R\'" data-ng-attr-title="{{vm.sumTotalAmount |pCurrency:\'A\'}}"></td><td></td><td></td><td></td><td class=screen-only></td></tr><!-- empty data notification row--><tr class=text-center ng-hide=$data.length><td class=text-warning colspan=9 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr></tbody></table><!-- add form --><form name=addPaymentForm class=screen-only><table class="hover no-footer row-border dataTable"><tbody><!-- add rows --><tr class=text-center data-ng-show=vm.allowedAction><td colspan=3><div class="form-group has-feedback"><simple-date data-ng-model=vm.payment.chequeDate id=chequeDate name=chequeDate auto-focus=true tabindex=1 data-ng-keypress="vm.keyPressed($event, addPaymentForm)" data-ng-attr-title="{{\'APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE\'|translate}}" required></simple-date><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE class="form-control-feedback text-feedback rtl"></span></div></td><td colspan=3><div class="form-group has-feedback"><input id=bankSharedChequeAmount name=bankSharedChequeAmount tabindex=4 class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=vm.payment.bankSharedChequeAmount data-ng-keypress="vm.keyPressed($event, addPaymentForm)" data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT\'|translate}}"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT data-ng-show=vm.payment.bankSharedChequeAmount class="form-control-feedback text-feedback rtl"></span></div></td><td colspan=3><div class="form-group has-feedback"><select id=payee name=payee class="form-control rtl" tabindex=6 data-ng-attr-title="{{\'APP.MODULES.MONITORING.PAYMENTS.PAYEE\'|translate}}" data-ng-options="payee.key as payee.caption for payee in vm.payees" data-ng-model=vm.payment.payee></select><span data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE class="form-control-feedback text-feedback ltr p-l-3"></span></div></td><td rowspan=3><i class="icon pe-icon pe-7s-plus f-18 f-bold text-success" tabindex=8 data-ng-show=vm.allowedAction data-ng-attr-title="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-click=vm.addPayment(addPaymentForm)></i></td></tr><tr data-ng-show=vm.allowedAction><td colspan=3><div class="form-group has-feedback"><select class="form-control rtl" tabindex=2 data-ng-options="IA.id as IA.name for IA in vm.investmentActions" id=investmentAction name=investmentAction data-ng-model=vm.payment.investmentAction.id></select><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION class="form-control-feedback text-feedback ltr p-l-3"></span></div></td><td colspan=3 style="border-top: none"><div class="form-group has-feedback"><input id=applicantSharedChequeAmount name=applicantSharedChequeAmount class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) data-ng-keypress="vm.keyPressed($event, addPaymentForm)" data-ng-model=vm.payment.applicantSharedChequeAmount tabindex=5 data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT\'|translate}}"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT data-ng-show=vm.payment.applicantSharedChequeAmount class="form-control-feedback text-feedback rtl"></span></div></td><td colspan=3><div class=form-group><label for=conflictDescription data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></label><textarea id=conflictDescription name=conflictDescription class=form-control tabindex=7 rows=4 style="resize: none" data-ng-keypress="vm.keyPressed($event, addPaymentForm)" data-ng-attr-title="{{\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\'|translate}} ..." data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\'|translate}} ..." data-ng-model=vm.payment.conflictDescription></textarea></div></td></tr><tr data-ng-show=vm.allowedAction><td colspan=3><div class="form-group has-feedback"><input id=chequeNumber name=chequeNumber class="form-control rtl" tabindex=3 placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER\'|translate}}" data-ng-model=vm.payment.chequeNumber required data-ng-keypress="vm.keyPressed($event, addPaymentForm)"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER data-ng-show=vm.payment.chequeNumber class="form-control-feedback text-feedback ltr p-l-1"></span></div></td><td colspan=3 style="border-top: none"><span id=chequeTotalAmount class=form-control data-ng-bind="((\'APP.MODULES.MONITORING.PAYMENTS.SUM\'|translate) + \': \' + (vm.payment.bankSharedChequeAmount + vm.payment.applicantSharedChequeAmount)|pCurrency)"></span></td><td colspan=3><div class=form-group><label for=description data-translate=APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION></label><textarea id=description name=escription class=form-control tabindex=8 rows=4 style="resize: none" data-ng-keypress="vm.keyPressed($event, addPaymentForm)" data-ng-attr-title="{{\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\'|translate}} ..." data-ng-attr-placeholder="{{\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\'|translate}} ..." data-ng-model=vm.payment.description></textarea></div></td></tr><!-- :add rows end --></tbody></table></form></div><hr><!-- validation section --><div class=module-heading><h4 class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_BANK_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_BANK_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENT_STEPS></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.ISSUEDCHEQUE_COUNT></th></tr><tr class=text-center data-ng-repeat="item in vm.conflicts"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind="(item.directiveBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{item.directiveBasedBankShared|pCurrency:\'A\'}}"></td><td ng-class=vm.bankQouta[$index] data-ng-bind="(item.paymentBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{item.paymentBasedBankShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(item.directiveBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{item.directiveBasedApplicantShared|pCurrency:\'A\'}}"></td><td ng-class=vm.applicantQouta[$index] data-ng-bind="(item.paymentBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{item.paymentBasedApplicantShared|pCurrency:\'A\'}}"></td><td data-ng-bind=item.paymentStepCount|pNumber></td><td ng-class=vm.countQouta[$index] data-ng-bind=item.chequeCount|pNumber></td></tr><tr class="text-center LightBlueBG"><td data-ng-bind="\'APP.SHARE.SUM\'|translate"></td><td data-ng-bind="(vm.sumDirectiveBasedBankShared|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumDirectiveBasedBankShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumPaymentBasedBankShared|pCurrency:\'R\')" data-ng-class="{\'DarkRedFill\': vm.sumPaymentBasedBankShared < vm.sumDirectiveBasedBankShared , \'DarkOrangeFill\': vm.sumPaymentBasedBankShared > vm.sumDirectiveBasedBankShared }" data-ng-attr-title="{{vm.sumPaymentBasedBankShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumDirectiveBasedApplicantShared|pCurrency:\'R\')" data-ng-class=vm.applicantQouta[$index] data-ng-attr-title="{{vm.sumDirectiveBasedApplicantShared|pCurrency:\'A\'}}"></td><td data-ng-bind="(vm.sumPaymentBasedApplicantShared|pCurrency:\'R\')" data-ng-attr-title="{{vm.sumPaymentBasedApplicantShared|pCurrency:\'A\'}}" data-ng-class="{\'DarkRedFill\': vm.sumDirectiveBasedApplicantShared > vm.sumPaymentBasedApplicantShared }"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td data-ng-bind=(vm.sumChequeCount|pNumber) data-ng-class="{\'DarkRedFill\': vm.sumPaymentStepCount > vm.sumChequeCount }"></td></tr></table></div><div class=screen-only><div class=row><i class="fa fa-circle GreenFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.NOCONFLICT></span></div><div class=row><i class="fa fa-circle OrangeFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div><div class=row><i class="fa fa-circle RedFill"></i> <span class="module-title inline" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div></div>'),
t.put("app/components/monitoring/trace/trace.html",'<div class=module-inner><!--hide navigation button on called from convert debit --><div class=module-heading data-ng-if=!vm.fromConvertDebit><i class="pe-7s-angle-right-circle f-2r screen-only" ng-click=vm.previous()></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE></h1><div class=clearfix></div></div><div class="module-heading convert-debit-trace-bg" data-ng-if=vm.fromConvertDebit><i class="pe-7s-stopwatch pe-5x f-2r screen-only"></i><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper form-inline dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable" ng-if=vm.monitoring.id><tr class=text-center><th data-translate=APP.SHARE.ID></th><th data-translate=APP.MODULES.TRACE.BOUNDED_USER></th><th data-translate=APP.SHARE.STATUS></th><th data-translate=APP.SHARE.DATE></th><th data-translate=APP.MODULES.TRACE.DESCRIPTION></th><th></th></tr><tr class=text-center data-ng-hide=item.editing data-ng-repeat-start="item in vm.traces"><td><a class="btn btn-sm text-info" title="{{\'APP.ACTIONS.VIEW\'|translate}}" ui-sref=root.trace-detail({id:item.id}) data-ng-bind=item.id|pNumber></a></td><td><span data-ng-bind=item.user.name></span></td><td><span data-ng-bind=item.currentStep.title></span></td><td style="min-width: 90px"><span data-ng-bind=item.alertDate|jDate|pNumber></span></td><td colspan=2><span data-ng-bind=item.description></span></td><td><i class="icon pe-icon pe-7s-trash f-20 text-danger" ng-click=vm.deleteTrace(item) data-ng-show=item.canEdit title="{{\'APP.ACTIONS.REMOVE\'|translate}}"></i> <i class="icon pe-icon pe-7s-note f-20 text-info" ng-click="item.editing = true" data-ng-show=item.canEdit title="{{\'APP.ACTIONS.UPDATE\'|translate}}"></i></td></tr><tr data-ng-repeat-end data-ng-show=item.editing><td></td><td colspan=2><ui-select data-ng-model=item.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td><simple-date data-ng-model=item.alertDate id=date-edit name=MONITORING_DATE required></simple-date></td><td colspan=2><textarea class=form-control data-ng-disabled=vm.loading id=description-edit name=description data-ng-model=item.description required></textarea></td><td><i class="icon pe-icon pe-7s-check f-20 text-success" title="{{\'APP.ACTIONS.SUBMIT\'|translate}}" data-ng-show="item.editing && !vm.loading" data-ng-click=vm.updateTrace(item)></i> <i class="icon pe-icon pe-7s-close f-20 text-warning" title="{{\'APP.ACTIONS.CANCEL\'|translate}}" data-ng-show="item.editing && !vm.loading" data-ng-click=vm.cancelUpdate(item)></i></td></tr><tr data-ng-show=vm.canAdd><td></td><td colspan=2><ui-select data-ng-model=vm.trace.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.MODULES.TRACE.BOUNDED_USER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td><simple-date data-ng-model=vm.trace.alertDate id=DATE name=MONITORING_DATE required></simple-date><div class="row m-t-1 m-r-1 m-l-1"><div class="col-sx-12 suggested-dates"><button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(30) data-translate="30 days later"></button> <button class="btn btn-success-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(20) data-translate="20 days later"></button> <button class="btn btn-warning-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(10) data-translate="10 days later"></button> <button class="btn btn-danger-alt col-xs-2 col-xs-offset-1" data-ng-click=vm.setDate(5) data-translate="5 days later"></button></div></div></td><td colspan=2><textarea class=form-control data-ng-disabled=vm.loading id=description name=description data-ng-model=vm.trace.description required></textarea></td><td><i class="icon pe-icon pe-7s-plus f-20 text-success" title="{{\'APP.ACTIONS.ADD\'|translate}}" data-ng-hide=vm.loading data-ng-click=vm.addTrace()></i></td></tr></table></div><div class="alert alert-warning" role=alert><p><b><i class="fa fa-warning"></i> کاربر گرامی! </b>ثبت هر پیگیری در سامانه به منزله‌ی تهیه و ارسال یک نامه‌ی پیگیری به شعبه مربوطه می‌باشد. لذا <b>پیش از نهایی کردن پاسخ به یک نامه‌ی پیگیری، ثبت پیگیری جدید امکان‌پذیر نیست.</b> در صورت نیاز می‌توانید پیگیری یک نامه را به کارشناسان دیگر ارجاع دهید. همچنین بر اساس تشخیص کارشناس مهلت پاسخ یک نامه توسط کارشناس مسئول پیگیری قابل تمدید است.</p><p>همچنین توجه نمایید تعیین وضعیت‌های <span class=GreenBG><i class="fa fa-check"></i>&nbsp;<i><b data-ng-bind=vm.steps[3].title></b></i></span> و <span class=RedBG><i class="fa fa-thumbs-o-down"></i>&nbsp;<i><b data-ng-bind=vm.steps[4].title></b></i></span> برای پیگیری به منظور اعمال نظر نهایی کارشناس بر اساس نامه‌نگاری با شعبه‌ی مربوطه بوده و قابل بازگشت نیستند.</p></div></div></div></div></div>'),t.put("app/components/monitoring/userMonitorings/userMonitorings.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.USER_MONITORINGS.LIST></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=vm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="dataTables_wrapper dt-bootstrap no-footer"><table class="hover no-footer row-border dataTable"><tr class=text-center data-ng-if=vm.monitoring.teamHeadUserName><td><div data-ng-hide=vm.editHead><label data-ng-bind=vm.monitoring.teamHead.name></label><a class=text-info data-ng-attr-title="{{\'APP.SHARE.UPDATE\'|translate}}" data-ng-click="vm.editHead = true" data-ng-show="vm.monitoring.currentStep.id != 6"><span class="icon pe-icon pe-7s-note f-18 f-bold"></span></a></div><div data-ng-show=vm.editHead><div class="col-xs-10 pull-right"><ui-select data-ng-model=vm.newTeamHead ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b></span></ui-select-match><ui-select-choices repeat="user in vm.teamHeads|propsFilter : {name: $select.search,username:$select.search}" refresh-delay=4><div ng-bind-html=" user.name + \' - \' + user.username | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class=col-xs-2><a class=text-success data-ng-click=vm.changeTeamHead()><span class="icon pe-icon pe-7s-check f-18 f-bold"></span></a></div></div></td><td data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></td><td></td></tr><tr class=text-center data-ng-repeat="userMonitoring in vm.userMonitorings"><td data-title="\'APP.MODULES.MONITORING.USER_MONITORINGS.NAME\'|translate"><label data-ng-bind=userMonitoring.lmsUser.name data-ng-show=!vm.toggleEdit[$index]></label><select class=form-control data-ng-show=vm.toggleEdit[$index] name=expertName id=expertName ng-options="user.username as user.name for user in vm.allUsers" ng-model=userMonitoring.lmsUser.username></select></td><td data-translate=APP.MODULES.CONTRACT.MONITORING.EXPERT></td><td data-title="\'APP.MODULES.MONITORING.USER_MONITORINGS.SIGNATURE\'|translate"><img id=myimg ng-src={{vm.getSignUrl(userMonitoring.lmsUser)}} height=50 width=50 alt="امضا موجود نیست"></td><td data-title=""><command-buttons data-ng-if="vm.state==\'created\'" cancel=vm.cancelEdit($index) edit=vm.editUserMonitoring(userMonitoring,$index) delete=vm.deleteUserMonitoring(userMonitoring,$index) has-edit=false has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><tr class=text-center data-ng-show="vm.state==\'created\' && vm.userMonitorings.length < 2"><td><ui-select data-ng-model=vm.newUserMonitoring ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder="{{(\'APP.SHARE.SEARCH_PLACEHOLDER\'|translate)}}..."><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind="\' - \'"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind="\'( \' + $select.selected.province.title + \' )\'"></small></span></ui-select-match><ui-select-choices repeat="user in vm.users" group-by=vm.groupFinder group-filter="[\'ستاد\',\'استان\',\'شعبه\']" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html="\'<b>\' + user.name + \'</b> - \' + user.username | highlight: $select.search"></div><small data-ng-if="user.province && user.level === \'PROVINCE\'" data-ng-bind-html=user.province.title></small> <small data-ng-if="user.branch && user.level === \'BRANCH\'" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td></td><td data-title="\'APP.SHARE.OPERATION\'|translate"><a class=text-success ng-click=vm.addUserMonitoring()><i class="icon pe-icon pe-7s-plus f-18 f-bold"></i></a></td></tr></table></div></div></div></div></div>'),t.put("app/components/trace/trace-flow/trace-flow.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.MONITORING.FLOW_VIEW.LIST></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=vm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="well well-sm" ng-if="vm.actuator || vm.creator"><div class=row ng-if=vm.actuator><b class=col-xs-8 data-ng-bind=vm.actuator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.ACTUATOR></div></div><div class=row ng-if=vm.creator><b class=col-xs-4 data-ng-bind=vm.createDate|jDate></b> <b class=col-xs-4 data-ng-bind=vm.creator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.CREATOR></div></div></div><div class="dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table"><table class="hover no-footer row-border dataTable" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-show="(processLog.comment != \'Authentication Failed\') || vm.showAll" data-ng-repeat="processLog in $data"><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.USERNAME\'|translate" data-ng-bind=processLog.user.name></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\'|translate" data-ng-bind=processLog.transition.name|traceDefinition|translate></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.DATE\'|translate" data-ng-bind=processLog.createDate|jDate></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\'|translate" data-ng-bind=processLog.createDate|timeFilter|pNumber></td><td data-title="\'APP.MODULES.MONITORING.FLOW_VIEW.COMMENT\'|translate" data-ng-bind="processLog.comment ? (processLog.comment|translate) : \'-\'"></td></tr></table></div></div></div></div></div>'),t.put("app/components/users/filters/isEnabled.html",'<toggle data-ng-model=params.filter()[name] on="{{\'APP.SHARE.ENABLE\'|translate}}" onstyle="btn-success vazir" off="{{\'APP.SHARE.DISABLE\'|translate}}" offstyle="btn-danger vazir"></toggle>'),t.put("app/components/usersReport/scoreDetail/scoreDetail.html",'<div class=module-inner><div class=module-heading><h1 class="module-title inline" data-translate=APP.MODULES.USERS_REPORT.DETAILS.TITLE></h1><i class="fa fa-close pull-left cursor-pointer text-danger" ng-click=vm.close() data-ng-attr-title="{{\'APP.ACTIONS.CLOSE\'|translate}}"></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class="well well-sm"><div class=row><b class=col-xs-4 data-ng-bind=vm.scoreItem.action|translate></b> <b class=col-xs-4 data-ng-bind=vm.scoreItem.step.title></b> <b class=col-xs-4 data-ng-bind=vm.scoreItem.user.name></b></div></div><div class="dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table"><table class="hover no-footer row-border dataTable"><tr class=text-center><th data-translate=APP.SHARE.INDEX></th><th><span data-ng-if="vm.scoreItem.action != \'cartable\'" data-translate=APP.MODULES.USERS_REPORT.DETAILS.ACTION_DATE></span> <span data-ng-if="vm.scoreItem.action != \'cartable\'">/</span> <span data-translate=APP.MODULES.USERS_REPORT.DETAILS.CREATE_DATE></span></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.ACTOR data-ng-if="vm.scoreItem.action != \'cartable\'"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.MONITORING_NUMBER></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.CONTRACT_NUMBER></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.APPLICANT></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.PROVINCE></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.FROM_STEP data-ng-if="vm.scoreItem.action != \'cartable\'"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.TO_STEP data-ng-if="vm.scoreItem.action != \'cartable\'"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.COMMENT data-ng-if="vm.scoreItem.action != \'cartable\'"></th></tr><tr class=text-center data-ng-repeat="scoreReport in vm.items"><td data-ng-bind=$index+1|pNumber></td><td><span data-ng-if="vm.scoreItem.action != \'cartable\'" data-ng-bind=scoreReport.actionDate|jDate></span><br data-ng-if="vm.scoreItem.action != \'cartable\'"><span data-ng-bind=scoreReport.lightMonitoring.createDate|jDate></span></td><td data-ng-bind="(scoreReport.processLog.user.name|pNumber) + \' - \' + (scoreReport.processLog.user.username|pNumber)" data-ng-if="vm.scoreItem.action != \'cartable\'"></td><td data-ng-bind=scoreReport.lightMonitoring.number|pNumber></td><td data-ng-bind=scoreReport.lightMonitoring.contract.number|pNumber></td><td data-ng-bind=scoreReport.lightMonitoring.contract.companyName></td><td data-ng-bind=scoreReport.lightMonitoring.contract.province.title></td><td data-ng-bind=scoreReport.processLog.fromStepId|monitoringStep data-ng-if="vm.scoreItem.action != \'cartable\'"></td><td data-ng-bind=scoreReport.processLog.toStepId|monitoringStep data-ng-if="vm.scoreItem.action != \'cartable\'"></td><td data-ng-bind=scoreReport.processLog.comment data-ng-if="vm.scoreItem.action != \'cartable\'"></td></tr></table></div></div></div></div></div>'),t.put("app/main/header/header-notification/header-notification.html",'<ul class="nav navbar-top-links navbar-left"><li class=dropdown uib-dropdown><a class="dropdown-toggle pointer" data-toggle=dropdown uib-dropdown-toggle><i class="fa fa-user fa-fw"></i> <span data-ng-bind=vm.user.name></span> <i class="fa fa-caret-down"></i></a><ul class="dropdown-menu dropdown-user" uib-dropdown-menu><li><a data-ui-sref=root.users.profile({username:vm.user.username})><i class="fa fa-user-circle fa-fw"></i> <span data-translate=APP.MODULES.AUTH.PROFILE></span></a></li><li><a data-ng-click=vm.logout();><i class="fa fa-sign-out fa-fw"></i> <span data-translate=APP.MODULES.AUTH.LOGOUT></span></a></li></ul><!-- /.dropdown-user --></li><!-- /.dropdown --></ul>'),t.put("app/main/sidebar/sidebar-search/sidebar-search.html",'<li class=sidebar-search><div class="input-group custom-search-form"><input type=text ng-model=vm.query class=form-control placeholder="جستجو ..."> <span class=input-group-btn><button class="btn btn-default" type=button><i class="fa fa-search"></i></button></span></div></li>')}]);
//# sourceMappingURL=../maps/scripts/app-8e2ace21f7.js.map
