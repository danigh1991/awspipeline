{"version":3,"sources":["scripts/app.js"],"names":["getPeityDirective","chartType","restrict","scope","data","options","link","element","$el","$","JSON","parse","console","log","text","join","peity","$watchCollection","newData","oldData","change","angular","module","sidebarSearch","templateUrl","replace","query","controller","SidebarSearchCtrl","controllerAs","bindToController","directive","headerNotification","headerCtrl","$translate","Principal","changeLanguage","langKey","use","logout","vm","this","Languages","key","title","user","getIdentity","$inject","ScoreDetailController","$uibModalInstance","$log","UsersReportService","scoreItem","activate","getDetails","close","dismiss","steps","step","id","push","items","forEach","action","username","fromDate","toDate","provinceId","then","value","concat","TraceFlowController","NgTableParams","$stateParams","TraceService","isModal","tableParams","counts","getData","getAllTraceProcessLogs","traceId","getProcessLogsTrace","processLogs","monitor","actuator","creator","createDate","UserMonitoringsController","host","$filter","MonitoringService","ProvinceService","$scope","UserService","Util","monitoring","userMonitorings","tempUserMonitorings","copy","state","currentStep","name","getMonitoring","getTeamHeads","getSignUrl","signUrl","cancelEdit","index","toggleEdit","addUserMonitoring","isObserver","newUserMonitoring","roles","role","toast","params","expertUsername","monitoringId","hasChanged","deleteUserMonitoring","userMonitoring","lmsUser","editUserMonitoring","compareObjects","userMonitoringId","date","UpdateUserMonitoringInMonitoring","refreshUsers","successCallback","users","content","organizationLevel","contract","province","searchUsers","loading","getByRole","teamHeadsMap","teamHeads","getMonitoringById","changeTeamHead","newTeamHead","teamHead","editHead","reason","status","allUsers","observers","fulldate","provinces","groupFinder","groupTitle","MonitoringTraceController","$confirm","checkAdd","getAllTraces","getTracesByMonitoring","traces","identity","trace","canEdit","createUsername","originalTraces","cancelAdd","doNotUpdate","$parent","addTrace","alertDate","description","forCommitmentConvert","fromConvertDebit","newTrace","createTrace","updateTrace","editing","cancelUpdate","i","length","deleteTrace","canAdd","setDate","days","tmpDate","Date","getDate","getStepsSync","openAttachmentModal","next","previous","$on","event","update","$emit","MonitoringProgressController","$rootScope","updateAllowedActions","getInvestmentCostMonitoring","progresses","sumDirectiveBasedAmount","sumPaymentToDirective","sumPaymentToDirectivePercent","sumInvoiceToDirective","sumInvoiceToDirectivePercent","sumProgressRate","progress","invoiceBasedAmount","paymentBasedAmount","invoiceBasedToDirectiveBasedAmountRate","paymentBasedToDirectiveBasedAmountRate","progressRate","directiveBasedAmount","Math","round","floor","reload","getAllowedActions","allowedAction","MonitoringPreConditionsController","DirectiveService","dirNumber","handlePreConditions","monitoringPreConditions","dirConditions","monitoringConditions","monitoringCondition","monitoringPreCondition","dirCondition","reply","originalId","preConditions","preCondition","setConditionInMonitoring","subPreConditions","SetConditionInMonitoring","deletePrecondition","precondition","monitoringConditionId","deleteConditionFromMonitoring","replys","MonitoringPaymentsController","ConflictService","InvestmentActionService","getAllInvestmentActions","sort","payments","reverse","firstLoad","monitoringPayments","sumBankSharedChequeAmount","sumApplicantSharedChequeAmount","payment","bankSharedChequeAmount","applicantSharedChequeAmount","sumTotalAmount","getDirectivePayments","getAllConflict","investmentAction","investmentActions","getPaymentConflict","conflicts","dirPaymentPerParts","dirPaymentPart","notExist","chequeCount","directiveBasedBankShared","bankShareAmount","directiveBasedApplicantShared","applicantShareAmount","paymentBasedApplicantShared","paymentBasedBankShared","paymentStepCount","bankQouta","applicantQouta","countQouta","sumDirectiveBasedBankShared","sumPaymentBasedBankShared","sumDirectiveBasedApplicantShared","sumPaymentBasedApplicantShared","sumPaymentStepCount","sumChequeCount","conflist","addPayment","form","$invalid","AddPaymentToMonitoring","updatePayment","PaymentId","monitoringPaymentId","updatePaymentInMonitoring","deletePaymentFromMonitoring","dirPayments","keyPressed","paymentId","keyCode","shiftKey","payeeConflict","payee","contractNums","contractNum","number","split","indexOf","payees","caption","showSortInvestmentAction","MonitoringFlowController","getAllMonitoringProcessLogs","getProcessLogs","removingProcessLogs","transition","pop","splice","removingCalculateProcessLogs","index_c","showAll","MonitoringDetailsController","EconomicSectionService","telRegex","EmployeeService","getAllEconomicSections","getAllBranches","editMonitoring","theForm","$ivalid","monitoringDate","payerBranch","branchChiefInMonitoringTime","planType","activenessStatus","activitySubject","projectLocationAddress","fillTheFields","f1","f2","monitoringConflicts","tempMonitoring","economicSection","e","updateMonitoring","savingStatus","economicSections","getAllBranchesOfProvince","branches","getAllCityByProvinceId","getAllCitiesOfProvince","citis","getDirective","promise","dirActivitySubject","dirProjectLocationAddress","refreshEmployees","body","toString","searchEmployees","allEmployees","monitorings","planTypes","baseInfo","activeness","getActivenessStatusesSync","MissionAnnouncementController","moment","format","isProvince","level","getExpertByProvince","getAllProvince","cancelSearch","expert","coexpert","daysNumber","getMonitoringByProvinceAndExperts","firstExpertUsername","secondExpertUsername","selectedMonitorings","getMonitoringByProvinceAndExpert","getCoExpertByProvince","coexperts","experts","getAllProvinces","PrintElem","mywindow","window","open","elemId","printSection","document","getElementById","write","innerHTML","getElementsByName","innerText","focus","print","MonitoringLicenseController","monitoringLicenses","getDirLicenseConflicts","getDirLicenses","dirLicenses","dirLicense","found","monitoringLicense","dumMonitoringLicense","comment","updateLicense","license","issuingDate","expireDate","dirLicenseId","setLicense","addLicenseItem","addMonitoringLicenseItem","item","updateLicenseItem","updateMonitoringLicenseItem","cancelEditItem","hasFound","conflict","hasConflict","deleteLicenseFromMonitoring","monitoringLicenseId","unsetLicense","deleteLicenseItem","deleteMonitoringLicenseItem","trueFalseList","MonitoringLatLongController","getAllRelativeMonitorings","successCalback","resCount","m","map","dirParentDirectiveNumber","calc","searchMonitoring","directiveNumber","dimensions","t","undefined","latitude","longitude","calcDimension","updateLatLong","doNotReload","locationDescription","setLocationInMonitoring","dimension","calcSuccessCallback","place","p1","lat","lng","p2","dim","getDistance","userMonitoringNames","substr","info","distance","R","dLat","rad","dLong","a","sin","cos","c","atan2","sqrt","d","x","PI","latLongForm","$valid","MonitoringInvoiceController","$uibModal","invoices","monitoringInvoices","sumPrice","sumInvoiceBasedCount","sumMonitoringBasedCount","invoice","price","invoiceBasedCount","monitoringBasedCount","orderedArray","getInvoiceConflict","directiveBased","monitoringBased","invoiceBased","sumDirectiveBased","sumInvoiceBased","sumMonitoringBased","addInvoice","newInvoice","tempInvoiceDate","AddInvoiceToMonitoring","querySelector","updateInvoice","invoiceId","editSuccess","editFailure","updateInvoiceInMonitoring","deleteInvoiceFromMonitoring","$index","monitoringInvoiceId","isCurrent","iaId","inve","type","batchInsert","modalInstance","animation","size","windowClass","resolve","result","res","BatchInsertInvoiceToMonitoring","unitList","toggleAddEdit","tempInvoices","today","BatchInsertModalController","ok","cancel","add","remove","deleteItem","attr","focusNext","ctrlKey","currentTarget","preventDefault","selectionStart","focusSide","dir","indices","attributes","nodeValue","parseInt","newTargetId","ExportMonitoringColumnsModalController","CheckListService","checkListItem","active","keys","Object","columns","getChecklist","finalCheckList","checklits","checked","selectAllColumns","flag","selectAllCheckList","getAllCheckList","بخش اقتصادی","نوع طرح","وضعیت فعالیت","وضعیت","تاریخ قرارداد","تاریخ ایجاد","تاریخ بازدید","تاریخ تائید","کارشناس (ها)","سرگروه","نام متقاضی","مبلغ تسهیلات","استان","شعبه","تائید کننده","شماره مصوبه","تاریخ تصویب مصوبه","کارشناس اعتباری مصوب کننده","رئیس شعبه در زمان تصویب","رئیس شعبه در زمان بازدید","شماره قرارداد","EditDirectiveController","$state","contractId","setDirective","referenceMonitoring","eNumber","copyDirective","newDirective","go","directiveId","monitoringState","$current","refreshMonitoringList","searchDirective","monitoringList","referenceSelected","selected","getDirectiveListText","contractDirectiveNumber","ConcludedContractController","dirContract","contracts","setContract","concludedContractId","AddConvertDebitModal","convertDebit","monitoringCommitmentConvertLicenses","submit","updateConvertDebit","addConvertDebit","letterDate","letterNum","ConvertDebitController","$document","ReportService","ContractCodeService","BranchService","getUsers","getCurrentUser","currentUser","isAdmin","isInAnyRole","isInRoleStaff","isInRole","prepareSearchItem","searchItem","contractFromDate","contractToDate","monitoringFromDate","monitoringToDate","createFromDate","createToDate","confirmFromDate","confirmToDate","contractNumber","monitoringNumber","stepIds","traceStepIds","es","traceSteps","activenessStatuses","economicSectionIds","checkListStatus","checkList","checkListStatusList","checkListId","checkListStatuses","monitoringCheckList","tParams","startTime","page","count","sorting","applicantPerformanceEvaluation","numberPageElements","numberOfElements","deleteDisabled","total","totalElements","allRecordsCount","searchResultContainer","firstSearch","scrollToElement","offset","duration","fetchTime","diff","exportMonitoring","reportType","extraSearchObj","showChecklistsStatus","checkLists","getReportNumber","reportNumber","url","getNonHtmlReport","getBranchesByProvince","getBranchesByProvinceIds","branchIds","provinceIds","getAllBranchesByProvinceList","as","toggleAdd","search","filterStep","openFlowModal","openModal","contractIds","addConvertDebitModal","confirmConvertDebitModal","setTrace","getPlanCaption","activeStep","toggleStep","exists","toggleTraceStep","deleteMonitoring","message","openDetailsModal","fromMonitoring","getByRoles","finalHeads","owners","refreshCodes","q","searchAllNew","codes","directives","showSearch","planCaption","planTypeKey","getPlanTypeKey","getDelay","getDelaySync","ConfirmConvertDebitModal","commitConvertDebit","file","attachment","done","updateDoneCommitmentConvertLicense","setDoneCommitmentConvertLicense","doneDate","doneLetterNumber","doneDescription","mDate","updateConflictController","monitoringConflict","modalVm","updateConflictInMonitoring","monitoringConflictId","auto","MonitoringConflictController","getAllMonitoringConflicts","calculateMonitoringConflicts","updateCalculateConflictInMonitoring","createConflict","AddConflictToMonitoring","deleteConflict","deleteConflictFromMonitoring","links","NO_PAYING_PAYMENT","INVALID_STEPCOUNT_PAYMENT","COUNT_CONFLICT_PAYMENT","CONFLICT_PAYMENT","AMOUNT_CONFLICT_BANK_SHARED_PAYMENT","AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT","NO_AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT","CONFLICT_ASSURANCE","NOT_EXIST_CONFLICT_ASSURANCE","COUNT_CONFLICT_INVOICE","NO_MONITORINGBASED_CONFLICT_INVOICE","CONFLICT_INVOICE","CONFLICT_LICENSE","CONFLICT_CHECKLIST","CONFLICT_ADDRESS","CONFLICT_LAT_LONG","CONFLICT_PRECONDITION","CONFLICT_PROGRESS","CONFLICT_DATE","CONFLICT_ECONOMIC_SECTION","CONFLICT_DIR_NUMBER","CONFLICT_PLAN_TYPE","MonitoringContractController","ContractTypeService","getAllMonitoringDirContracts","unsetConcludedContract","dirContractId","unsetContract","getAllMonitoringContracts","tempContracts","sumContractTotalAmount","sumInterestAmount","sumRemainingInCurrent","sumRemainingInNonCurrent","remainingInCurrent","remainingInNonCurrent","totalAmount","interestRate","sumInterestAndOriginAmount","directiveNumberEqual","openConcludedContractModal","setContractNumber","setContractByNumber","getDirContracts","sumDirContractTotalAmount","sumDirInterestAmount","sumDirInterestAndOriginAmount","dirContracts","interestAmount","allowedActions","isMonitoringContract","isMonitoringContractSet","stepStatus","contractTypes","MonitoringCommentController","$q","accept","details","assurance","dirAssurances","dirApproveDate","dirValidityDuration","directiveApprovalPlace","dirCreditSupplyResource","dirEconomicSection","dirPlanType","branchChiefInGrantingTime","dirBranchPhoneNumber","dirExpert","dirApplicantPhoneNumber","applicant","applicantType","monitoringBoards","startMonitoring","errorCallback","branchExpertAccept","firstExpertAcceptMonitoring","secondExpertAcceptMonitoring","acceptMonitoring","reject","rejectMonitoring","finalHeadRejectMonitoring","setIsMyMonitoring","getLastMonitoringProcessLogs","$broadcast","allowedActionList","nextStepTitle","nextStep","getNextStepSync","previousStepTitle","getPreviousStepSync","lastAction","lastProcess","MonitoringCheckListController","loadingCheckList","updatePerformanceEvaluation","applicantPerformance","agentBranchPerformanceEvaluation","agentBranchPerformance","approverPerformanceEvaluation","approverPerformance","setPerformanceEvaluations","f","getEnabledCheckList","monitoringCheckListItem","fillMonitoringCheckList","monitoringCheckLists","monitoringCheckListCount","j","addFinalExpertComment","SetFinalCommentInMonitoring","finalExpertComment","addCheckListToMonitoring","caller","finalMonitoringCheckList","AddCheckListToMonitoring","nextLock","all","CancelFinalizedController","cancelFinalized","MonitoringAttachmentsController","attachFile","addFileAttachmentToMonitoring","response","deleteAttachment","creatorLmsUser","includes","attachmentId","attachments","deleteAttachmentFromMonitoring","cancelAddAttachment","toggleAddAttachment","successCallBack","canDelete","errorCallBack","MonitoringAssuranceController","AssuranceTypeService","getAllAssuranceTypes","assurances","monitoringAssurances","sumExpertValue","sumAcceptedValue","sumMortgagedValue","expertValue","assuranceType","acceptedPercent","mortgagedValue","handleDirAssurances","dirRequiredAssurancePercentage","requiredAssuranceAmount","showFlag","assuranceTypes","signed","amount","absConflictAmount","abs","getAssuranceConflict","sumOfSumTakenAssuranceAmount","condition","limit","dirAssurance","dirAssuranceAmount","sumTakenAssuranceAmount","getConflict","conflictAmount","totalDifference","addAssurance","AddAssuranceToMonitoring","updateAssurance","monitoringAssuranceId","updateAssuranceInMonitoring","deleteAssuranceFromMonitoring","calcAcceptedValue","acceptedValue","samatStats","color","comments","icon","model","DirectivePaymentPerPartController","getInvestmentActions","getPaymentParts","filter","t2","dirPaymentPerPartsTemp","sumBankShareAmount","sumApplicantShareAmount","paymentPerPart","deleteDirPaymentPerPart","dirPaymentId","deletePaymentFromDirective","addDirPaymentPerPart","isValid","dirPaymentPerPart","AddPaymentToDirective","updateDirPaymentPerPart","inValid","v","updatePaymentInDirective","retrieve","DirectiveDetailsController","DirectiveApprovalPlaceService","CreditSupplyResourceService","noSpaceRegex","getAllApprovalPlaces","getAllSupplyResources","getDirectiveById","saveDirective","updateDirective","createDirective","directiveDetailsForm","ecomomicSections","getAllCreditSupplyResources","supplyResources","getAllDirectiveApprovalPlaces","approvalPlaces","caseExperts","DirectiveLicenseController","getLicenses","deleteDirLicense","deleteDirLicenseFromDirective","addDirLicense","addDirLicenseToDirective","ContractPreConditionsController","getPreconditions","contractPreConditions","defaultItems","deleteContractPreCondition","dirConditionId","deleteConditionFromDirective","addContractPreCondition","AddConditionToDirective","contractPreCondition","updateContractPreCondition","updateConditionInDirective","DirectiveContractListController","$window","getAllContractType","fillNecessaryCheckboxes","totalAmountCount","interestAmountCount","getAllContractTypes","sumInstallmentCount","installmentCount","calcSumAmounts","sumAmount","getDirContractById","getDirectiveContractById","addEditContract","updateContract","addContract","AddDirectiveContract","updateDirectiveContract","backToList","stay","scrollTo","getContractInterest","contractInterest","interest","editDirContract","deleteDirContract","deleteDirectiveContract","requiredField","field","fieldsTypes","installmentInterval","participationDuration","respiratoryPeriod","nominalAmount","numberOfFields","numbersById","1","2","3","4","5","6","7","8","9","10","11","12","13","14","ContractAssuranceTypesController","getAssuranceTypes","getAssurances","getAllAssurances","contractAssuranceTypes","contractAssuranceTypesTemp","sumPercent","showError","contractAssuranceType","percent","criterionAssurance","requiredPercentageDone","deleteContractAssuranceType","dirAssuranceId","deleteAssuranceFromDirective","addContractAssuranceType","AddAssuranceToDirective","updateContractAssuranceType","updateAssuranceInDirective","selectType","addHelpItem","helpItem","newItem","helpItems","calcHelpItems","removeHelpItem","sum","helpItemTotal","desc","limits","criterions","showHelpItem","ApplicantController","nationalIdRegex","getApplicant","lastCheck","boards","showLegal","getBoardsApplicant","board","addBoardToApplicant","nationalId","AddBoardToApplicant","updateBoard","updateBoardInApplicant","deleteBoard","boardId","deleteBoardFromApplicant","setApplicantInDirective","chechBoard","SetApplicantInDirective","AllowAddBoard","classAddBoard","applicantTypes","ContractDetailsModalController","ContractService","$timeout","debug","getContract","getProvinces","editContractDirective","tempContract","setDirectiveToContract","reportDate","contractDate","getContractById","code","addMonitoring","firstExpert","expertUsername1","expertUsername2","secondExpert","teamHeadUserName","firstDescription","pNumber","error","addContractMonitoringStaffLevel","addContractMonitoringProvinceLevel","addContractMonitoringBranchLevel","searchData","test","toggleContractDirectiveEdit","AddMonitoring","isBranch","getStaffApprover","levels","canSetLevel","addGroupMonitoring","ids","staffApproverUsername","addContractMonitoring","staffApprovers","ResetPassController","RegisterController","LoginController","homeService","PrimaryUserService","getVersion","onSubmit","showChangPass","firstLogin","settlementStateCode","resetCaptcha","encodeCredential","password","userTypeCaptcha","getLogin","changeSecurePassword","newPassword","repeatNewPassword","newPasswordRepeat","oldPassword","$setPristine","version","captchaUrl","ForgetPassController","sidebarService","$http","getSidebar","get","service","sidebar","SidebarCtrl","getUserName","getMyStat","check","collapseVar","multiCheck","y","multiCollapseVar","hasRole","authorities","hasPermission","permissions","permission","denied","myStat","needToMonitorContractsNumber","myCartableMonitoringsNumber","myCreatedMonitoringsNumbers","children","subItem","myAlertedTracesNumber","myWaitingTracesNumber","selectedMenu","getMyPermissions","loaded","signOutToggle","samatHeader","HeaderCtrl","headerVm","navOpen","samatFooter","simpleDate","attrs","ngModelCtrl","$watch","newValue","min","max","isValidDate","$setValidity","$formatters","$parsers","require","fromUser","transformedInput","dotPosition1","substring","dotPosition2","$setViewValue","$render","commandButtons","ButtonsController","delete","disabled","edit","hasDelete","toggle","hasEdit","hasEditPage","toggled","hierarchy","updateModel","parents","Array","prototype","last","tree","getChildren","searched","queue","node","child","addChild","treeModel","prone","slice","bind","run","fn","defaults","pie","delimiter","fill","height","radius","width","donut","innerRadius","line","stroke","strokeWidth","bar","padding","gauge","linkFunc","createGauge","borders","el","margin","barWidth","svg","chart","sectionIndx","ref","needle","arcStartRad","arcEndRad","totalPercent","startPadRad","endPadRad","arc","realMax","numSections","d3","select","top","offsetWidth","right","bottom","left","append","style","percToRad","padRad","outerRadius","chartInset","startAngle","endAngle","alfa","l","xCurrent","yCurrent","current","beta","Needle","drawOn","animateOn","degToRad","percToDeg","perc","deg","len","radius1","mkCmd","self","delay","ease","selectAll","tween","percentOfPercent","centerX","centerY","leftX","leftY","rightX","rightY","thetaRad","topX","topY","fileUpload","label","uploading","fileModel","target","files","$apply","currencyTooltip","$compile","$injector","compileFunc","removeAttr","ngModel","$id","compile","backButton","goBack","history","back","autoFocus","RequestService","getScoreByStep","score","stepId","SCORE","report","REPORT","getAllScores","createScore","post","getAllSteps","getScore","getById","getReport","factory","routeConfig","$stateProvider","$urlRouterProvider","when","config","UsersReportController","makeItems","reportParams","toConfirmDate","getSteps","getScores","hiddenStepIds","finalized","s1","s2","cartable","scores","checks","save","s","create","errorHandler","preProcess","fromConfirmDate","addZeroRecordUsers","finalProcess","k","sums","averageScore","properData","generateReport","filterByUsername","reportItem","userScores","finalScore","userScoreItems","hasOwnProperty","getScoreByActionAndStep","record","showDetails","backdrop","selectedUsers","hidden","indexedUsers","getAllActiveUsers","scrollFunction","opacity","scrollTop","documentElement","display","offsetHeight","onscroll","getMe","baseLms","setSign","sign","multipartPost","getSignForUser","roleId","deferred","defer","cacheIndex","usersCache","time","TIME_OUT","rolesId","assignPermissionToUser","base","deletePermissionFromUser","changeEnabledUser","put","resetPassword","secureResetPassword","updateUser","assignRoleToUser","deleteRoleFromUser","getUserPermission","setSignForMe","assignPermissionToRole","assignAllPermissions","deletePermissionFromRole","editCaptionOfRole","editCaptionOfPermission","permissionId","getAllLoginLogs","loginLog","userLevels","STAFF","PROVINCE","BRANCH","lmsUserSearch","changePassword","createRole","createUser","createSecureUser","deleteRole","deleteUser","getAllPermissions","getPermissions","getAllRoles","getPermission","getRole","getUser","getUsersList","updateMe","abstract","template","UsersListController","enable","enabled","identification","economicSectionId","enableUser","userStatus","UserMeController","UserDetailsController","timestamp","getTime","imageExtensions","toUpperCase","renderImg","cancelAssignPermission","toggleAssignPermission","cancelAssignRole","toggleAssignRole","userPermissions","userRoles","allPermissions","allRoles","getBranches","successCallbackPermissions","failureCallBack","branch","newUsername","getSign","AddEditUserController","repeatPassword","traceCleared","traceFailed","tracePostPone","traceTransfer","traceFindByUser","addAttachmentToTrace","deleteAttachmentFromTrace","TR","getTrace","mine","issues","TraceController","prepareSearch","searchItems","ownerUsername","actuatorUsername","restricted","tempStepIds","getTraces","stepNames","stepName","tmp","isValidUser","getColorOfState","cls","getIconOfState","exportTrace","disableProvince","hide","disableCreator","disableUser","hideStatuses","TraceDetailController","getTraceById","me","isMine","att","processLog","pl","addAttachment","newDate","operations","operation","AddCommentController","UpdateReportService","updateReport","baseReport","getUpdateInfo","UpdateReportController","lastUpdate","SizeService","getContentWrapperSize","canvas","clientHeight","clientWidth","getBodySize","getCriterionSize","SampleService","sample","getAllSamples","getSampleById","createSample","updateSample","deleteSample","SampleController","cancelAddSample","toggleAddSample","cancelEditSample","samples","tempSamples","RolesListController","toggleAddRole","cancelAddRole","cancelEditRole","toggleEditRole","tempRoles","updateRole","rolePattern","RoleDetailsController","notif","successCallbackAssignPermission","assignPermissionsToRole","promises","cancelAddPermission","toggleAddPermission","rolePermissions","refreshPermissions","nameQuery","refinedPermissions","putUrl","getHtmlReport","ReportController","IsicService","selectedReport","getList","nonFunctionalReports","htmlReportApi","nonHtmlReportApi","filters","traceStatus","codesIncluded","codesExcluded","creditSupplyResources","lowAmount","highAmount","reportList","toTraceDate","getAllIsics","group","selectedReports","getReports","reportsText","getReportsByIndex","contractType","includedCodes","excludedCodes","includedIsics","excludedIsics","creditSupplyResourceIds","creditSupplyResourceText","statusId","fromTraceDate","noFromDate","noToDate","currentReport","sessionStorage","setItem","input","match","boundaries","getReportByIndices","reports","getReportStatus","getItem","searchAll","resources","isicList","shiftSelectedReport","reportTypes","reportLevels","htmlSrc","approvedToMonitoredRate","branchUrl","cityUrl","city","getProvince","createProvince","updateProvince","deleteProvince","getAllCities","getCity","createCity","updateCity","deleteCity","ProvinceListController","provice","ProvinceCitiesController","getProvinceById","cities","PlanTypeService","ES","getAllPlanTypes","getPlanType","updatePlanType","PlanTypeController","PermissionsListController","cancelEditPermission","toggleEditPermission","tempPermissions","updatePermission","editNext","validStates","valid","getProcessType","getOwner","getActuator","isMyMonitoring","getLastProcessLog","getAllowedActionsOnMonitoring","InvoiceId","updateLicenseInMonitoring","setFinalCommentInMonitoring","deleteMonitoringByAdmin","itemId","staff","getNextStep","currentStepId","numberOfExperts","iLevel","getPreviousStep","lastTransitionDate","asDays","ceil","getActivenessStatuses","getTransitions","getAllMonitorings","createMonitoring","cartableMonitoring","myMonitoringsMission","myMonitoringsRejectedMission","getTransitionsSync","MonitoringPrintController","handleInvoices","handlePayments","handleAssurances","monitoringLoading","waitCount","searchMonitoringLoading","licenseConflicts","getDirLicenseConflictsLoading","getAllInvoiceConflict","invoiceConflicts","getInvoiceConflictLoading","getAllPaymentConflict","paymentConflicts","getPaymentConflictLoading","getInvestmentCostMonitoringLoading","getAllAssuranceConflict","requiredAssurancePercentage","getTotal","getTotalInterestAmount","assuranceConflicts","getAssuranceConflictLoading","searchMonitoringLatLongLoading","successCallbackParent","pSuccessCallback","getLastMonitoringProcessLogsLoading","checkLoading","maxCols","MonitoringController","viewPortCheck","justCame","currentState","isActive","monitoringDeferred","checkStatuses","openDirectiveModal","allowedActionsDeferred","doNext","subStates","hasNext","doPrevious","hasPrevious","addClassOnScroll","elements","isElementInViewport","classList","mainContent","rect","getBoundingClientRect","innerHeight","querySelectorAll","addEventListener","latlong","directiveDeferred","isMyMission","getMine","processLogsDeferred","pErrorCallBack","openExpertsModal","keyDown","arg1","arg2","MonitoringMissionController","getAllMissions","cmp","b","order","parentSelector","showGuidance","warnings","MonitoringListController","checkCanDelete","MonitoringCartableController","ManageUserGuideService","getAllHelpAttachmen","addAllHelpAttachmen","findByStepId","ManageUserGuideController","getAllAttachments","getAllStep","getStepNumberCaption","addAllAttachments","stepNumber","LoginlogListController","getAllUsers","loginLogs","loginlog","isic","IsicListController","getDashboard","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","send","HomeController","showContracts","showDirective","IA","getInvestmentAction","createInvestmentAction","updateInvestmentAction","deleteInvestmentAction","InvestmentActionController","types","HelpService","help","getAllHelps","getHelpById","createHelp","updateHelp","deleteHelp","HelpController","getCaptionById","openFile","helpAttachment","tempHelps","toggleAddHelp","GraphicalReportService","getMonthly","getMonthlyInput","GraphicalReportController","monthly","labels","year","month","series","onClick","points","evt","datasetOverride","yAxisID","scales","yAxes","position","ticks","beginAtZero","values","pCurrency","tooltips","callbacks","tooltipItem","xLabel","datasetIndex","yLabel","afterLabel","monthlyInput","monthlyInputToOutputCount","calls","count2","item2","monthlyInputToOutputCountProportion","proportion","toFixed","monthlyInputToOutputAmountProportion","reportTitle","function","updateEmployee","employee","BR","getAllEmployees","getEmployee","getEconomicSection","createEconomicSection","updateEconomicSection","deleteEconomicSection","EconomicSectionController","DAP","getDirectiveApprovalPlace","createDirectiveApprovalPlace","updateDirectiveApprovalPlace","deleteDirectiveApprovalPlace","DirectiveApprovalPlaceController","concludedContractNumber","UpdateBoardInApplicant","dirPayment","monitoringFrom","monitoringIdFrom","getAllDirectives","deleteDirective","DirectiveController","directiveDefered","getStatus","statuses","successCallbackActions","errorCallbackActions","subStatesTitle","DirectiveListController","applicantName","drectiveApprovalPlaceName","SubResourceListController","searchCreditSupplyResourceCodesForBaseInfo","CSR","getAllCreditSupplyResourcesForContract","searchCreditSupplyResourcesForContract","getCreditSupplyResource","createCreditSupplyResource","updateCreditSupplyResource","deleteCreditSupplyResource","CreditSupplyResourceController","getContractType","createContractType","updateContractType","deleteContractType","ContractTypeController","ContractFilterService","getOne","deleteOne","getAllTitles","getAllCodes","getAllEconomicCodes","getAllContractFilters","getContractFilter","createContractFilter","updateContractFilter","deleteContractFilter","ContractFilterController","getTitle","fieldType","contractFilters","contractFilter","economicCode","getContractCode","createContractCode","updateContractCode","deleteContractCode","ContractCodeController","getAllContractCodes","contractTypeId","contractCodes","contractCode","searchFunction","toggleNeedToMonitor","getAllContracts","createContract","searchContract","searchContractStaff","searchContractProvince","searchContractBranch","deleteContract","getNeedToMonitors","dynamic","companyName","minContractAmount","maxContractAmount","needToMonitor","onEnter","ContractController","ContractListController","ngTableEventsChannel","initialParams","aggregate","newSearch","pageStateSaved","stateParamsCopy","stateParams","ecIds","pTypes","plan","pt","pIds","disabledProvinceList","selectedContracts","toggleNeedMonitor","backToTop","scrollTopAnimated","exportContracts","searchCreditSupplyResources","settlementStates","needToMonitoringStatusList","MCL","getCheckList","createCheckList","updateCheckList","deleteCheckList","CheckListController","changeActivity","searchBranches","getBranch","createBranch","updateBranch","deleteBranch","BranchController","Branches","BaseInfoService","updateBaseInfo","getAllBaseInfos","getBaseInfo","BaseInfoController","baseInfos","variable","baseUser","containerClass","onExit","$httpParamSerializer","theService","delet","path","URL","headers","Content-Type","transformRequest","multipartPut","xPost","xPut","location","formData","FormData","authorize","toState","isAuthenticated","returnToState","returnToStateParams","toParams","authenticate","_identity","_authenticated","force","identityDeferred","isDefined","resetDefer","login","MERCHANT","ADMIN","isMerchant","authInterceptor","onRequest","timeout","onResponse","onResponseError","Authentication","request","responseError","ATR","getAssuranceType","createAssuranceType","updateAssuranceType","deleteAssuranceType","AssuranceTypeController","MainController","toastr","cookie","msg","object1","object2","toJson","toaster","success","warning","warn","sDate","standardPlanTypes","array","object","isArray","newKey","subarray","newArray","newEncode","encoded","btoa","newInput1","rand","random","digit1","digit2","newInput2","newInput3","newInput5","endNewInput","jDate","runBlock","$transitions","$confirmModalDefaults","ngTableDefaults","$mdMedia","destroy","getMedia","defaultLabels","settings","paginationMaxBlocks","paginationMinBlocks","onStart","to","trans","_targetState","_params","wrapperSize","ch","calculatedNavWrapperStyle","min-height","calculatedMainWrapperStyle","previousState","previousParams","onSuccess","otherwise","local","$translateProvider","useSanitizeValueStrategy","useStaticFilesLoader","prefix","suffix","preferredLanguage","fallbackLanguage","eNumberFilter","trim","persianNumbers","englishNumbers","numbersLen","RegExp","pPercent","pPercentFilter","pDistance","pDistanceFilter","alternative","jDateTime","jDateTimeFilter","dateTime","isUndefined","jDateFilter","mDateFilter","jDateFromString","formatSource","formatResult","jeDate","jeDateFilter","timeFilter","timeFilter1","formattedTime","tz","getR","getT","pCurrencyFilter","currency","mantis","r","parts","pNumberFilter","alt","pNumberR","makePositive","makePositiveFilter","propsFilter","propsFilterFunc","props","out","itemMatches","prop","toLowerCase","sDateFilter","statusFilter","trueFalse","trueFalseFilter","trustedHtml","$sce","trustedHtmlFilter","trustAsHtml","trustedUrl","trustedUrlFilter","trustAsResourceUrl","objectiveStatus","objectiveStatusFilter","objective","measurementUnit","currentStatus","unit","unitFilter","maxmin","maxminFilter","param","assuranceCriterion","assuranceCriterionFilter","measure","measureFilter","objectivePeriod","objectivePeriodFilter","targetingPeriod","showRoles","showRolesFilter","periodTag","periodTagFilter","period","ith","sith","tens","sn","periodIndex","pDigitWord","str","digit","iThree","numbers","part","resultThree","three","isFinite","isString","0","two","zero","results","results1","investmentType","investmentTypeFilter","CURRENT","CONSTANT","planTypeFilter","OPENING","SUPPLEMENTARY","DEVELOPMENT","OPERATIONAL","activenessFilter","ACTIVE","SEMI_ACTIVE","INACTIVE","UNDERWAY","applicantTypeFilter","LEGAL","NATURAL","unitListFilter","DOLLAR","RIAL","conditionList","conditionFilter","MINIMUM","MAXIMUM","EQUAL","REST","userLevel","userLevelFilter","ALL","staffLimit","teamHeadLimit","nonCurrentPlanLimit","currentPlanLimit","monitoringDefinition","start","firstExpertAccept","calculating","conflictEditing","cancelStarting","finalExpertAcceptForProvince","secondExpertAcceptForProvince","secondExpertAcceptForTeamHead","finalHeadReject","finalExpertAcceptForTeamHead","adminCancelFinalizedHead","adminCancelFinalizedProvince","adminCancelFinalizedBranch","deleteByAdmin","traceDefinition","waiting","alert","see","clear","fail","postpone","transfer","payeeFilter","APPLICANT","ISSUER","ETC","checkListFilter","UNRELATEDTODIRECTIVE","UNDONE","VIOLATED","DONE","NO_DEVIATION","RELATEDDOCS_WARNING","LACKOFPROGRESS_PLANREVIEW_WARNING","TOTAL_WARNING","CONDITIONAL_COMMITMENT_CONVERT","COMMITMENT_CONVERT","TRACE_NEEDED","DEVIATION","INAPPROPRIATE_DIRECTIVE_SETTING","INAPPROPRIATE_CONTRACT_INVESTIGATION","INAPPROPRIATE_DIRECTIVE_CONTRACT","conditionStatus","conditionStatusFilter","INCOMPLETED","FAILED","fileSize","fileSizeFilter","monitoringStep","monitoringStepFunction","monitoringTransitionCaption","monitoringTransitionCaptionFunction","transtion","updateFilter","Completed","Processing","Exited_with_exception","constant","$logProvider","$httpProvider","ADMdtpProvider","toastrConfig","$uibTooltipProvider","debugEnabled","interceptors","setOptions","autoClose","calType","dtpType","extend","allowHtml","closeButton","closeHtml","extendedTimeOut","positionClass","preventDuplicates","progressBar","tapToDismiss","timeOut","loadPersian","appendToBody","$templateCache"],"mappings":"AAw4NA,QAASA,mBAAkBC,GACvB,YAEA,QACIC,SAAU,KACVC,OACIC,KAAM,IACNC,QAAS,KAEbC,KAAM,SAAUH,EAAOI,GACnB,GAAIC,GAAMC,EAAEF,EAEc,iBAAfJ,GAAMC,OAEbD,EAAMC,KAAOM,KAAKC,MAAMR,EAAMC,OAElCQ,QAAQC,IAAI,SACZD,QAAQC,IAAIV,EAAMC,MAClBI,EAAIM,KAAKX,EAAMC,KAAKW,KAAK,MACzBP,EAAIQ,MAAMf,EAAWE,EAAME,SAE3BF,EAAMc,iBAAiB,OAAQ,SAAUC,EAASC,GAC1CA,GAAWD,IAGQ,gBAAZA,KACPA,EAAUR,KAAKC,MAAMO,IAGzBV,EAAIM,KAAKI,EAAQH,KAAK,MACtBP,EAAIY,eAt6NpB,WACI,YAEAC,SACKC,OAAO,OAEJ,sBACA,kBACA,qBACA,YACA,aACA,UACA,yBACA,SACA,eACA,YACA,YACA,YACA,iBACA,cACA,UACA,WACA,kBACA,aACA,WAGA,OACA,YACA,aACA,gBACA,6BACA,oBACA,oBACA,wBACA,+BACA,uBACA,eACA,eACA,6BACA,+BACA,uBACA,eACA,qBACA,iBACA,YACA,eACA,gBACA,eACA,kBACA,YACA,YACA,aACA,eACA,aACA,kBACA,eACA,wBACA,WACA,gBACA,WACA,sBACA,4BAKZ,WAEI,YAcA,SAASC,KACL,OACIC,YAAa,sDACbtB,SAAU,IACVuB,SAAS,EACTtB,OACIuB,MAAO,KAEXC,WAAYC,EACZC,aAAc,KACdC,kBAAkB,GAM1B,QAASF,MArBTP,QACKC,OAAO,OACPS,UAAU,gBAAiBR,MA0BpC,WACI,YAcA,SAASS,KACL,OACIF,kBAAkB,EAClBH,WAAYM,EACZJ,aAAc,KACdL,YAAa,+DACbtB,SAAU,IACVuB,SAAS,EACTtB,UAKR,QAAS8B,GAAWC,EAAYC,GAiB5B,QAASC,GAAeC,GACpBH,EAAWI,IAAID,GAGnB,QAASE,KACLJ,EAAUI,SArBd,GAAIC,GAAKC,IACTD,GAAGE,YAEKC,IAAK,QACLC,MAAO,mBAGPD,IAAK,QACLC,MAAO,mBAGfJ,EAAGK,KAAOV,EAAUW,cAEpBN,EAAGJ,eAAiBA,EACpBI,EAAGD,OAASA,EAjChBN,EAAWc,SAAW,aAAc,aAApC1B,QACKC,OAAO,OACPS,UAAU,qBAAsBC,MA+CzC,WACI,YAEAX,SACKC,OAAO,wBAUhB,WACI,YAOA,SAAS0B,GAAsBC,EAAmBC,EAAMC,EAAoBC,GAUxE,QAASC,KACLH,EAAKrC,IAAI2B,EAAGI,MAAQ,aAAcQ,GAClCE,IAGJ,QAASC,KACLN,EAAkBO,UAGtB,QAASF,KACL,GAAIG,KACsB,KAAtBL,EAAUM,KAAKC,GACfF,GAAS,EAAG,EAAG,GAEfA,EAAMG,KAAKR,EAAUM,KAAKC,IAC9BnB,EAAGqB,SACHJ,EAAMK,QAAQ,SAAUJ,GACpBP,EAAmBG,WAAWF,EAAUW,OAAQX,EAAUP,KAAKmB,SAAUN,EAAMN,EAAUa,SAAUb,EAAUc,OAAOd,EAAUe,YAAYC,KAAK,SAAUC,GACrJ7B,EAAGqB,MAAQrB,EAAGqB,MAAMS,OAAOD,OA3BvC,GAAI7B,GAAKC,IACTD,GAAGe,MAAQA,EACXf,EAAGY,UAAYA,EACfZ,EAAGI,MAAQ,0BAEXS,IAVJL,EAAsBD,SAAW,oBAAqB,OAAQ,qBAAsB,aADpF1B,QACKC,OAAO,kBACPK,WAAW,wBAAyBqB,MAuC7C,WACI,YAEA3B,SACKC,OAAO,mBAShB,WACI,YAOA,SAASiD,GAAoBtB,EAAmBuB,EAAeC,EAAcvB,EAAMwB,GAgB/E,QAASrB,KACLzC,QAAQC,IAAI2B,EAAGI,MAAQ,cACvBJ,EAAGmC,QAAgC,OAAtB1B,EACbT,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASC,IAIjB,QAASA,KACL,MAAIvC,GAAGwC,QACIN,EAAaO,oBAAoBzC,EAAGwC,SAASZ,KAChD,SAAUhE,GAGN,MADAoC,GAAG0C,YAAc9E,KAAUkE,OAAOlE,MAC3BoC,EAAG0C,cALtB,OAYJ,QAAS3B,KACLN,EAAkBO,UAtCtB,GAAIhB,GAAKC,IAETD,GAAG2C,WACH3C,EAAG0C,eACH1C,EAAGwC,QAAUP,EAAad,GAC1BnB,EAAGe,MAAQA,EACXf,EAAGI,MAAQ,wBACXJ,EAAG4C,SAAWX,EAAa5B,KAC3BL,EAAG6C,QAAUZ,EAAaY,QAC1B7C,EAAG8C,WAAab,EAAaa,WAE7BjC,IAfJkB,EAAoBxB,SAAW,oBAAqB,gBAAiB,eAAgB,OAAQ,gBAF7F1B,QACKC,OAAO,aACPK,WAAW,sBAAuB4C,MAkD3C,WACI,YAOA,SAASgB,GAA0BrC,EAAMsC,EAAMvC,EAAmBwC,EAASC,EAAmBC,EAAiBC,EAAQC,EAAapB,EAAcqB,EAAM3D,GAgCpJ,QAASkB,KACLH,EAAKrC,IAAI2B,EAAGI,OACZM,EAAKrC,IAAI4D,GACZjC,EAAGmC,UAAY1B,EACRT,EAAGmC,SACHnC,EAAGuD,WAAatB,EAAasB,WAC7BvD,EAAGwD,gBAAkBxD,EAAGuD,WAAWC,gBACnCxD,EAAGyD,oBAAsB5E,QAAQ6E,KAAK1D,EAAGwD,iBACzCxD,EAAG2D,MAAQ3D,EAAGuD,WAAWK,YAAYC,MAGrCC,IACJC,IAGJ,QAASC,GAAW3D,GAEhB,MADAL,GAAGiE,QAAUjE,EAAGgD,KAAO,2BAA4B3C,EAAKmB,SAAU,WAC3DxB,EAAGiE,QAGd,QAASC,GAAWC,GAChBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGwD,gBAAgBW,GAAStF,QAAQ6E,KAAK1D,EAAGyD,oBAAoBU,IAGpE,QAASE,KACL,GAAIC,IAAa,CAKjB,IAJAtE,EAAGuE,kBAAkBC,MAAMlD,QAAQ,SAAUmD,GACvB,aAAdA,EAAKA,OACLH,GAAa,MAEhBA,EAED,WADAhB,GAAKoB,MAAM,QAAS,iCAGxB,IAAIC,IACAC,eAAiB5E,EAAGuE,kBAAkB/C,SAE1C0B,GAAkBmB,kBAAkBrE,EAAG6E,aAAcF,GAAQ/C,KAAK,SAAUhE,GACxEkG,IACA9D,EAAGuE,qBACHjB,EAAKoB,MAAM,UAAW,wBACzBI,GAAa,GACX,WACC9E,EAAGuE,uBAIX,QAASQ,GAAqBC,EAAgBb,GAC1C,GAAIQ,IACAC,eAAiBI,EAAeC,QAAQzD,SAE5C0B,GAAkB6B,qBAAqB/E,EAAG6E,aAAcF,GAAQ/C,KAAK,SAAUhE,GAC3EkG,IACHgB,GAAa,EACVxB,EAAKoB,MAAM,UAAW,0BAI9B,QAASQ,GAAmBF,EAAgBb,GACxC,IAAKb,EAAK6B,eAAenF,EAAGwD,gBAAgBW,GAAQnE,EAAGyD,oBAAoBU,IAAS,CAChF,GAAIQ,IAAUS,iBAAkBJ,EAAe7D,GAC/C6D,GAAeK,KAAOL,EAAeK,KAAOpC,EAAQ,SAAS+B,EAAeK,MAAQ,KACpFnC,EAAkBoC,iCAAiCtF,EAAG6E,aAAcG,EAAgBL,GAAQ/C,KACxF,WACI0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGyD,oBAAoBU,GAAStF,QAAQ6E,KAAK1D,EAAGwD,gBAAgBW,IAChEL,EAAc9D,EAAG6E,cACpBC,GAAa,GAEd,WACIxB,EAAKoB,MAAM,QAAS,oBAAqB,gCAMzD,QAASa,GAAarG,GAIlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MALuC,UAApCzF,EAAGuD,WAAWoC,kBAAgC,KAAO3F,EAAGuD,WAAWqC,SAASC,SAAS1E,EACtG,OAAOkC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAQxD,QAASzB,KACL/D,EAAG+F,SAAU,EACb1C,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,KACtBoC,EAAG+F,SAAU,IAIrB,QAASjC,KACL,MAAOZ,GAAkBiD,kBAAkBnG,EAAG6E,cAAcjD,KACxD,SAAUhE,GAKN,MAJAoC,GAAGuD,WAAa3F,EAAOA,KACvBoC,EAAGwD,gBAAkBxD,EAAGuD,WAAWC,gBACnCxD,EAAGyD,oBAAsB5E,QAAQ6E,KAAK1D,EAAGwD,iBACzCxD,EAAG2D,MAAQ/F,EAAKgG,YAAYC,KACrB7D,EAAGuD,aAKzB,QAASxC,KACRN,EAAkBM,MAAM+D,GAGtB,QAASsB,KACApG,EAAGqG,aAAgBrG,EAAGqG,YAAY7E,UAEvC0B,EAAkBkD,eAAepG,EAAGuD,WAAWpC,GAAInB,EAAGqG,YAAY7E,UAAUI,KAAK,WAC7E5B,EAAGuD,WAAW+C,SAAWzH,QAAQ6E,KAAK1D,EAAGqG,aACzCrG,EAAGqG,aAAc,EACjBrG,EAAGuG,UAAW,EACdjD,EAAKoB,MAAM,YACZ,SAAU8B,GACY,KAAjBA,EAAOC,QACPnD,EAAKoB,MAAM,QAAS,0DA5JhC,GAAI1E,GAAKC,KACR6E,GAAa,CACd9E,GAAGuD,cACHvD,EAAGuE,qBACHvE,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGwD,mBACHxD,EAAGyD,uBACHzD,EAAG0G,YACH1G,EAAG2G,aACN3G,EAAGI,MAAQ,0CACRJ,EAAGoE,cACHpE,EAAG4G,YACH5G,EAAGiG,gBACHjG,EAAGkG,YAAcrC,KAAM,wBACvB7D,EAAG6F,YACH7F,EAAG6G,aACH7G,EAAGgD,KAAOA,EACbhD,EAAGe,MAAQA,EAERf,EAAGkE,WAAaA,EAChBlE,EAAGkF,mBAAqBA,EACxBlF,EAAG+E,qBAAuBA,EAC1B/E,EAAGqE,kBAAoBA,EACvBrE,EAAGgE,WAAaA,EAChBhE,EAAGuF,aAAeA,EAClBvF,EAAGoG,eAAiBA,EACpBpG,EAAG8G,YAAczD,EAAY0D,WAC7BlG,IA9BJkC,EAA0BxC,SAAW,OAAQ,OAAQ,oBAAqB,UAAW,oBAAqB,kBAAmB,SAAU,cAAe,eAAgB,OAAQ,aAH9K1B,QACKC,OAAO,kBACPK,WAAW,4BAA6B4D,MA0KjD,WACI,YAOA,SAASiE,GAA0B9E,EAAcxB,EAAMuC,EAAShB,EAAcoB,EAAaD,EAAQzD,EAChEsH,EAAUjF,EAAesB,GA6BxD,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ0D,GAAc,GAAMlC,KAAKsF,GACzBC,IAIJ,QAASA,KACL,MAAOjF,GAAakF,sBAAsBpH,EAAG6E,cAAcjD,KACvD,SAAUhE,GAWN,MAVAQ,SAAQC,IAAI,YAAaT,EAAK8H,SAC9B1F,EAAGqH,OAASzJ,EAAOA,EAAK8H,WACxB/F,EAAU2H,WAAW1F,KAAK,SAAUvB,GAChCL,EAAGqH,OAAO/F,QAAQ,SAAUiG,GACxBA,EAAMC,QAAUD,EAAME,iBAAmBpH,EAAKmB,SAC9CkG,EAAeH,EAAMpG,IAAMtC,QAAQ6E,KAAK6D,OAIhDvH,EAAG+F,SAAU,EACN/F,EAAGqH,SAItB,QAASM,KACL3H,EAAGuH,SAGP,QAASzD,GAAc8D,GACnB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAChD,SAAUhE,GAEN,MADAoC,GAAGuD,WAAa3F,EAAOA,KAChBoC,EAAGuD,aAKtB,QAASuE,KACL,GAAK9H,EAAGuH,MAAMQ,WAAc/H,EAAGuH,MAAMlH,MAASL,EAAGuH,MAAMS,YAAvD,CAEAhI,EAAG+F,SAAU,EACb/F,EAAGuH,MAAMU,qBAAuBjI,EAAGkI,iBAAmBlI,EAAGkI,iBAAmB,KAC5ElI,EAAGuH,MAAMhE,YAAcpC,GAAInB,EAAGuD,WAAWpC,GACzC,IAAIgH,GAAWtJ,QAAQ6E,KAAK1D,EAAGuH,MAE/BrF,GAAakG,YAAYD,GAAUvG,KAC/B,WACI0B,EAAKoB,MAAM,UAAW,wBACtByC,IACAnH,EAAG2H,aACJ,WACC3H,EAAG+F,SAAU,KAIzB,QAASsC,GAAYd,GACZA,EAAMQ,WAAcR,EAAMlH,MAASkH,EAAMS,cAE9ChI,EAAG+F,SAAU,EACb/F,EAAGsI,SAAU,EACbf,EAAMhE,YAAcpC,GAAInB,EAAGuD,WAAWpC,IACtCoG,EAAMU,qBAAuBjI,EAAGkI,iBAAmBlI,EAAGkI,iBAAmB,KACzEhG,EAAamG,YAAYd,EAAMpG,GAAIoG,GAAO3F,KAAK,WAC3C0B,EAAKoB,MAAM,UAAW,wBACtB6C,EAAMe,SAAU,EAChBtI,EAAGsI,SAAU,EACbtI,EAAG+F,SAAU,GACd,WACC/F,EAAG+F,SAAU,KAIrB,QAASwC,GAAahB,GAClB,IAAK,GAAIiB,GAAI,EAAGA,EAAIxI,EAAGqH,OAAOoB,OAAQD,IAC9BxI,EAAGqH,OAAOmB,GAAGrH,KAAOoG,EAAMpG,KAC1BnB,EAAGqH,OAAOmB,GAAKd,EAAeH,EAAMpG,IACpCnB,EAAGqH,OAAOmB,GAAGF,SAAU,EAE/BtI,GAAG+F,SAAU,EAGjB,QAAS2C,GAAYnB,GACjBN,IAAWrF,KAAK,WACZ5B,EAAG+F,SAAU,EACb7D,EAAawG,YAAYnB,EAAMpG,IAAIS,KAAK,WACpC0B,EAAKoB,MAAM,UAAW,wBACtByC,QAKZ,QAAS5B,GAAarG,GAIlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MALuC,UAApCzF,EAAGuD,WAAWoC,kBAAgC,KAAO3F,EAAGuD,WAAWqC,SAASC,SAAS1E,EACtG,OAAOkC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAQxD,QAAS0B,KACLvH,EAAU2H,WAAW1F,KAAK,SAAUvB,GAChCL,EAAG2I,QAAS,IAepB,QAASC,GAAQC,GACb,GAAIC,GAAU,GAAIC,KAClBD,GAAQF,QAAQE,EAAQE,UAAYH,GACpC7I,EAAGuH,MAAMQ,UAAY9E,EAAQ,SAASA,EAAQ,UAAU6F,IArJ5D,GAAI9I,GAAKC,IACTD,GAAGuH,SACHvH,EAAG0G,WACH,IAAIgB,KACJ1H,GAAG+F,SAAU,EACb/F,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGkI,iBAAwC,oBAArBjG,EAAaf,KAEnClB,EAAG8H,SAAWA,EACd9H,EAAG2H,UAAYA,EACf3H,EAAGqI,YAAcA,EACjBrI,EAAGuI,aAAeA,EAClBvI,EAAG0I,YAAcA,EACjB1I,EAAGuF,aAAeA,EAClBvF,EAAG4I,QAAUA,EACb5I,EAAGiB,MAAQiB,EAAa+G,aACxBjJ,EAAG8G,YAAczD,EAAY0D,WAE7B/G,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAChCpJ,EAAGI,MAAQ,8BAGXS,IAgIAuC,EAAOiG,IAAI,aAAc,SAAUC,EAAOC,GACtCnL,QAAQC,IAAI,sBAAuBkL,GACnCnG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOiG,IAAI,iBAAkB,SAAUC,EAAOC,GAC1CnL,QAAQC,IAAI,0BAA2BkL,GACvCnG,EAAOoG,MAAM,YAAY,KAlKjCxC,EAA0BzG,SAAW,eAAgB,OAAQ,UAAW,eAAgB,cAAe,SAAU,YAAa,WAAY,gBAAiB,QAJ3J1B,QACKC,OAAO,kBACPK,WAAW,4BAA6B6H,MAyKjD,WACI,YAOA,SAASyC,GAA6BC,EAAYzH,EAAcvB,EAAMsB,EAAekB,EAAmBE,EAAQE,GA2B5G,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACfuJ,GAAqB,GAGtB,QAASC,KACL,MAAO1G,GAAkB0G,4BAA4B5J,EAAG6E,cAAcjD,KAClE,SAAUhE,GA2BN,MA1BAoC,GAAG6J,WAAajM,EAAOA,KACvBoC,EAAG8J,wBAA0B,EAChC9J,EAAG+J,sBAAwB,EACxB/J,EAAGgK,6BAA+B,EACrChK,EAAGiK,sBAAwB,EACxBjK,EAAGkK,6BAA+B,EAClClK,EAAGmK,gBAAkB,EACrBnK,EAAG6J,WAAWvI,QAAQ,SAAU8I,GAE5BA,EAASC,mBAAqBD,EAASC,mBAAqBD,EAASC,mBAAqB,EAC1FD,EAASE,mBAAqBF,EAASE,mBAAqBF,EAASE,mBAAoB,EAC5FF,EAASG,uCAAyCH,EAASG,uCAA2F,IAAlDH,EAASG,uCAA+C,EAC5JH,EAASI,uCAAyCJ,EAASI,uCAA2F,IAAlDJ,EAASI,uCAA+C,EACzJJ,EAASK,aAAeL,EAASK,aAAeL,EAASK,aAAe,EAExEzK,EAAG8J,yBAA2BM,EAASM,qBAC1C1K,EAAG+J,uBAAyBK,EAASE,mBAAqBF,EAASE,mBAAqB,EACxFtK,EAAGiK,uBAAyBG,EAASC,mBAAqBD,EAASC,mBAAqB,EACxFrK,EAAGmK,kBAAoBC,EAASK,aAAgBL,EAASK,aAAe,IAAO,GAAKL,EAASM,qBAE1FN,EAASG,uCAAyCI,KAAKC,MAAMR,EAASG,wCACtEH,EAASI,uCAAyCG,KAAKC,MAAMR,EAASI,0CAE1ExK,EAAGmK,gBAAkBQ,KAAKE,MAAO7K,EAAGmK,gBAAkBnK,EAAG8J,wBAA2B,KACpF9J,EAAGgK,6BAA+BW,KAAKE,MAAM7K,EAAG+J,sBAAwB/J,EAAG8J,wBAA0B,KACrG9J,EAAGkK,6BAA+BS,KAAKE,MAAM7K,EAAGiK,sBAAwBjK,EAAG8J,wBAA0B,KAC9F9J,EAAG6J,aAKtB,QAAS3F,GAAWC,GAChBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGoK,YACHpK,EAAGoC,YAAY0I,SAGtB,QAASnB,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IA1EnB,GAAIoC,GAAKC,IAETD,GAAGuD,cACHvD,EAAG6J,cACH7J,EAAGoK,YACHpK,EAAGoE,cACHpE,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASsH,IAEb5J,EAAG8J,wBAA0B,EAC7B9J,EAAGgK,6BAA+B,EAClChK,EAAGkK,6BAA+B,EAClClK,EAAGmK,gBAAkB,EACrBnK,EAAGI,MAAQ,6CAEXJ,EAAG6E,aAAe5C,EAAa4C,aAE/B7E,EAAGkE,WAAaA,EACnBlE,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAE7BvI,IAuDH6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGpBD,EAAWL,IAAI,gBAAiB,SAAUC,EAAOC,GAC7CnL,QAAQC,IAAI,yBAA0BkL,GACtCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,oBAAqB,SAAUC,EAAOC,GACjDnL,QAAQC,IAAI,6BAA8BkL,GAC1CnG,EAAOoG,MAAM,YAAY,KA3FjCC,EAA6BlJ,SAAW,aAAc,eAAgB,OAAQ,gBAAiB,oBAAqB,SAAU,QAL9H1B,QACKC,OAAO,kBACPK,WAAW,+BAAgCsK,MAuGpD,WACI,YAOA,SAASwB,GAAkC7H,EAAOsG,EAAYzH,EAAcvB,EAAMwK,EAAkBhI,EAAmBI,GAuBnH,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACf+F,GAAkB,GAClBwD,GAAqB,GAGzB,QAASxD,GAAkByB,GAC1B,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACnD,SAAUhE,GAGT,MAFAoC,GAAGuD,WAAa3F,EAAOA,KACXoC,EAAGT,UAAYS,EAAGuD,WAAWhE,UACrCS,EAAGuD,WAAWhE,UAAU4L,WAC3BC,IACOpL,EAAGuD,YAFX,SAOH,QAAS6H,KACRpL,EAAGqL,wBAA0BrL,EAAGuD,WAAW+H,cAC3CtL,EAAGuD,WAAWgI,qBAAqBjK,QAAQ,SAAUkK,GACpDxL,EAAGqL,wBAAwB/J,QAAQ,SAAUmK,GACxCD,EAAoBE,aAAavK,KAAOsK,EAAuBtK,KAClEsK,EAAuBE,MAAQH,EAAoBG,MACnDF,EAAuBG,WAAaJ,EAAoBrK,GACzCsK,EAAuBzD,YAAcwD,EAAoBxD,iBAI3EhI,EAAG6L,iBACH7L,EAAGqL,wBAAwB/J,QAAQ,SAAUmK,GAC5C,GAAIK,IACHJ,aAAcD,EACdlI,YAAapC,GAAInB,EAAG6E,cACpB1D,GAAIsK,EAAuBG,WACfD,MAAOF,EAAuBE,MAC9B3D,YAAayD,EAAuBzD,YAEjDhI,GAAG6L,cAAczK,KAAK0K,KAKrB,QAASC,KAYL,QAASvG,KACLlC,EAAKoB,MAAM,WACXyB,GAAkB,GAZtB,IAAK,GADD6F,MACKxD,EAAI,EAAGA,EAAIxI,EAAG6L,cAAcpD,OAAQD,IACxCxI,EAAG6L,cAAcrD,GAAGmD,QACjB3L,EAAG6L,cAAcrD,GAAGkD,aAAanI,YAC7BpC,GAAInB,EAAG6E,cAEjBmH,EAAiB5K,KAAKpB,EAAG6L,cAAcrD,IAIzC,OAAOtF,GAAkB+I,yBAAyBjM,EAAG6E,aAAcmH,GAAkBpK,KAAK4D,GAWjG,QAASmE,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAItB,QAASsO,GAAmBC,GAE3B,GAAIxH,IACHyH,sBAAuBD,EAAaT,aAAaE,WAElD1I,GAAkBmJ,8BAA8BrM,EAAGuD,WAAWpC,GAAIwD,GAAQ/C,KAAK,WAC9E0B,EAAKoB,MAAM,WACXyB,GAAkB,IAChB,WACF7C,EAAKoB,MAAM,WAvGV,GAAI1E,GAAKC,IACTD,GAAGuD,cACHvD,EAAGqL,2BACHrL,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGT,aACHS,EAAG6L,iBACH7L,EAAGsM,SACDzK,MAAO,cAAegC,KAAM,cAC5BhC,MAAO,SAAUgC,KAAM,QACvBhC,MAAO,OAAQgC,KAAM,QAEvB7D,EAAGI,MAAQ,4CACdJ,EAAG+L,yBAA2BA,EAC9B/L,EAAGkM,mBAAqBA,EACxBlM,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAE7BvI,IAyFH6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGpBD,EAAWL,IAAI,qBAAsB,SAAUC,EAAOC,GAClDnL,QAAQC,IAAI,8BAA+BkL,GACvCA,EACAwC,IAA2BnK,KAAK,WAC5BwB,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,QAAQ,KAG7BE,EAAWL,IAAI,yBAA0B,SAAUC,EAAOC,GACtDnL,QAAQC,IAAI,kCAAmCkL,GAC3CA,EACAwC,IAA2BnK,KAAK,WAC5BwB,EAAOoG,MAAM,YAAY,KAG7BpG,EAAOoG,MAAM,YAAY,KAjIrCyB,EAAkC1K,SAAW,SAAU,aAAc,eAAgB,OAAQ,mBAAoB,oBAAqB,QANtI1B,QACKC,OAAO,kBACPK,WAAW,oCAAqC8L,MA4IzD,WACC,YAOA,SAASsB,GAA6B7C,EAAYzC,EAAUhF,EAAcvB,EAAMuC,EAASjB,EAAewK,EAAiBpJ,EACnFF,EAAmBuJ,EAAyBvB,EAAkB5H,GAmDnG,QAASzC,KACRH,EAAKrC,IAAI2B,EAAGI,OACZsM,IACA/C,GAAqB,GAGtB,QAASgD,KACRvO,QAAQC,IAAI,6BAA8B2B,EAAG4M,UAC7C5M,EAAG4M,SAASC,UACZzO,QAAQC,IAAI,2BAA4B2B,EAAG4M,UAG5C,QAASzG,KACR,MAAO/C,GAAOyE,QAAQ7H,GAAG8D,cAAcgJ,GAAWlL,KACjD,SAAUhE,GACTkP,GAAY,EACZ9M,EAAGuD,WAAa3F,EAChBoC,EAAG4M,SAAWhP,EAAOA,EAAKmP,sBAC1B/M,EAAGgN,0BAA4B,EAC/BhN,EAAGiN,+BAAiC,EACpCjN,EAAG4M,SAAStL,QAAQ,SAAU4L,GAC7BlN,EAAGgN,2BAA6BE,EAAQC,uBACxCnN,EAAGiN,gCAAkCC,EAAQE,8BAE9CpN,EAAGqN,eAAiBrN,EAAGgN,0BAA4BhN,EAAGiN,+BAEtDK,IACAC,IAEAvN,EAAG4M,SAAStL,QAAQ,SAAU4L,GAC7BA,EAAQ/M,IAAM+M,EAAQM,iBAAiBrM,IAEb8B,GAAQ,WAAWjD,EAAG4M,SAAU,OAAO,EAGlE,OAFA5M,GAAG4M,SAAW3J,EAAQ,WAAWjD,EAAG4M,SAAU,OAAO,GAE9C5M,EAAG4M,WAIb,QAASF,KACR,MAAOD,GAAwBC,0BAA0B9K,KACxD,SAAUhE,GAET,MADAoC,GAAGyN,kBAAoB7P,EAAOA,KACvBoC,EAAGyN,oBAIb,QAASF,KACR,GAAI5I,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgBkB,mBAAmB/I,GAAQ/C,KACjD,SAAUhE,GACToC,EAAG2N,UAAY/P,EAAOA,KACtBoC,EAAG4N,mBAAmBtM,QAAQ,SAAUuM,GAEvC,IAAK,GADDC,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAG2N,UAAUlF,OAAQD,IACpCxI,EAAG2N,UAAUnF,GAAGgF,iBAAiBrM,KAAO0M,EAAeL,iBAAiBrM,KAC3E2M,GAAW,EAETA,IACH9N,EAAG2N,UAAUvM,MACZ2M,YAAa,EACbC,yBAA0BH,EAAeI,gBACzCC,8BAA+BL,EAAeM,qBAC9CX,iBAAkBK,EAAeL,iBACjCY,4BAA6B,EAC7BC,uBAAwB,EACxBC,iBAAkBT,EAAeS,oBAIpC,KAAK,GAAI9F,GAAI,EAAGA,EAAIxI,EAAG2N,UAAUlF,OAAQD,IAAK,CAC7C,GAAI6F,GAAyBrO,EAAG2N,UAAUnF,GAAG6F,uBAAyBrO,EAAG2N,UAAUnF,GAAG6F,uBAAyB,EAC3GL,EAA2BhO,EAAG2N,UAAUnF,GAAGwF,yBAA2BhO,EAAG2N,UAAUnF,GAAGwF,yBAA2B,EACjHI,EAA8BpO,EAAG2N,UAAUnF,GAAG4F,4BAA8BpO,EAAG2N,UAAUnF,GAAG4F,4BAA8B,EAC1HF,EAAgClO,EAAG2N,UAAUnF,GAAG0F,8BAAgClO,EAAG2N,UAAUnF,GAAG0F,8BAAgC,CAEhIG,KAA2BL,EAC9BhO,EAAGuO,UAAU/F,GAAK,UAEV6F,EAAyBL,EACjChO,EAAGuO,UAAU/F,GAAK,WAEewF,EAAzBK,IACRrO,EAAGuO,UAAU/F,GAAK,UAGf4F,IAAgCF,EACnClO,EAAGwO,eAAehG,GAAK,UAEf4F,EAA8BF,EACtClO,EAAGwO,eAAehG,GAAK,UAEe0F,EAA9BE,IACRpO,EAAGwO,eAAehG,GAAK,SAGpBxI,EAAG2N,UAAUnF,GAAG8F,iBAAmBtO,EAAG2N,UAAUnF,GAAGuF,YACtD/N,EAAGyO,WAAWjG,GAAK,QAEnBxI,EAAGyO,WAAWjG,GAAK,UAkBrB,MAfAxI,GAAG0O,4BAA8B,EACjC1O,EAAG2O,0BAA4B,EAC/B3O,EAAG4O,iCAAmC,EACtC5O,EAAG6O,+BAAiC,EACpC7O,EAAG8O,oBAAsB,EACzB9O,EAAG+O,eAAiB,EACpB/O,EAAG2N,UAAUrM,QAAQ,SAAU0N,GAC9BhP,EAAG0O,6BAA+BM,EAAShB,yBAC3ChO,EAAG2O,2BAA6BK,EAASX,uBACzCrO,EAAG4O,kCAAoCI,EAASd,8BAChDlO,EAAG6O,gCAAkCG,EAASZ,4BAC9CpO,EAAG8O,qBAAuBE,EAASV,iBACnCtO,EAAG+O,gBAAkBC,EAASjB,cAGxB/N,EAAG2N,YAIb,QAASsB,GAAWC,GACfA,EAAKC,UAGTjM,EAAkBkM,uBAAuBpP,EAAG6E,aAAc7E,EAAGkN,SAAStL,KACrE,WACC0B,EAAKoB,MAAM,WACX1E,EAAGkN,WACHlN,EAAGoC,YAAY0I,SACfyC,MAIH,QAAS8B,GAAcC,EAAWpC,EAAS/I,GAE1C,GAAIQ,IAAU4K,oBAAqBD,EAC1BpC,GAAQ3J,YACJA,WAAYvD,EAAGuD,WAAWpC,IAEvC+B,EAAkBsM,0BAA0BxP,EAAG6E,aAAcqI,EAASvI,GAAQ/C,KAC7E,WACC0B,EAAKoB,MAAM,WACXR,EAAWC,KAId,QAASsL,GAA4BtO,GACpC8F,IAAWrF,KAAK,WACf,GAAIT,EAAI,CACP,GAAIwD,IAAU4K,oBAAqBpO,EACnC+B,GAAkBuM,4BAA4BzP,EAAG6E,aAAcF,GAAQ/C,KACtE,WACC0B,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,SACfyC,SAOL,QAASrJ,GAAWC,GACnBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGoC,YAAY0I,SACfyC,IAID,QAASD,KACR,MAAOtN,GAAG4N,mBAAqB5N,EAAGuD,WAAWmM,YAG9C,QAASC,GAAWrG,EAAO4F,EAAMU,EAAW1C,EAAS/I,GAC9B,KAAlBmF,EAAMuG,SAAmBvG,EAAMwG,WAC9BF,EAAWP,EAAcO,EAAW1C,EAAS/I,GAC5C8K,EAAWC,IAIlB,QAASa,GAAc7C,GACtB,GAAsB,WAAlBA,EAAQ8C,MAAZ,CAEA,GAAIC,IAAgB,MAAO,MAAO,MAAO,OACrCC,EAAclQ,EAAGuD,WAAWqC,SAASuK,OAAOC,MAAM,KAAK,EAC3D,OAAOH,GAAaI,QAAQH,GAAe,GAI5C,QAASvG,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAlPtB,GAAIoC,GAAKC,IAETD,GAAGkN,WACHlN,EAAG4M,YACH5M,EAAG2N,aACH3N,EAAGyN,qBACHzN,EAAGoE,aACH,IAAI0I,IAAY,CAChB9M,GAAGoC,YAAc,GAAIJ,OACpBK,UACAC,QAAS6D,IAEVnG,EAAGsQ,SACDnQ,IAAK,YAAaoQ,QAAS,WAC3BpQ,IAAK,SAAUoQ,QAAS,eACxBpQ,IAAK,MAAOoQ,QAAS,SAEvBvQ,EAAGI,MAAQ,4CACXJ,EAAGuO,aACHvO,EAAGwO,kBACHxO,EAAGyO,cACHzO,EAAGgN,0BAA4B,EAC/BhN,EAAGiN,+BAAiC,EACpCjN,EAAGqN,eAAiB,EAEpBrN,EAAG0O,4BAA8B,EACjC1O,EAAG2O,0BAA4B,EAC/B3O,EAAG4O,iCAAmC,EACtC5O,EAAG6O,+BAAiC,EACpC7O,EAAG8O,oBAAsB,EACzB9O,EAAG+O,eAAiB,EACpB/O,EAAGwQ,0BAA2B,EAE9BxQ,EAAG6E,aAAe5C,EAAa4C,aAE/B7E,EAAGiP,WAAaA,EAChBjP,EAAGqP,cAAgBA,EACnBrP,EAAGyP,4BAA8BA,EACjCzP,EAAGkE,WAAaA,EAChBlE,EAAG2M,KAAOA,EACV3M,EAAG2P,WAAaA,EAChB3P,EAAG+P,cAAgBA,EACnB/P,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAEhCvI,IAyMA6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGjBD,EAAWL,IAAI,gBAAiB,SAAUC,EAAOC,GAC7CnL,QAAQC,IAAI,yBAA0BkL,GACtCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,oBAAqB,SAAUC,EAAOC,GACjDnL,QAAQC,IAAI,6BAA8BkL,GAC1CnG,EAAOoG,MAAM,YAAY,KAnQpC+C,EAA6BhM,SAAW,aAAc,WAAY,eAAgB,OAAQ,UAAW,gBAAiB,kBAAmB,SAAU,oBAAqB,0BAA2B,mBAAoB,QAPvN1B,QACEC,OAAO,kBACPK,WAAW,+BAAgCoN,MA6Q9C,WACI,YAOA,SAASkE,GAAyBhQ,EAAmBuB,EAAeC,EAAcvB,EAAMwC,GAapF,QAASrC,KACLH,EAAKrC,IAAI2B,EAAGI,MAAQ,cACvBJ,EAAGmC,QAAgC,OAAtB1B,EACVT,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASoO,IAIjB,QAASA,KACL,MAAI1Q,GAAG6E,aACI3B,EAAkByN,eAAe3Q,EAAG6E,cAAcjD,KACrD,SAAUhE,GACNQ,QAAQC,IAAIT,GACZoC,EAAG0C,YAAc9E,KAAUkE,OAAOlE,EAAK8E,gBACvC1C,EAAG4C,SAAWhF,EAAKgF,SACnB5C,EAAG6C,QAAUjF,EAAKiF,QAClB7C,EAAG8C,WAAalF,EAAKkF,UAGrB,IAAI8N,KAKJ,KAJA5Q,EAAG0C,YAAYpB,QAAQ,SAAUO,EAAOsC,GACN,YAA1BtC,EAAMgP,WAAWhN,MAAsBM,EAAQ,EAAInE,EAAG0C,YAAY+F,QAAwD,YAA9CzI,EAAG0C,YAAYyB,EAAQ,GAAG0M,WAAWhN,MACjH+M,EAAoBxP,KAAK+C,KAE1ByM,EAAoBnI,QAAQ,CAC/B,GAAItE,GAAQyM,EAAoBE,KAChC9Q,GAAG0C,YAAYqO,OAAO5M,EAAO,GAKjC,GAAI6M,KAKJ,KAJAhR,EAAG0C,YAAYpB,QAAQ,SAAUO,EAAOsC,GACN,gBAA1BtC,EAAMgP,WAAWhN,MAA0BM,EAAQ,EAAInE,EAAG0C,YAAY+F,QAAwD,gBAA9CzI,EAAG0C,YAAYyB,EAAQ,GAAG0M,WAAWhN,MACrHmN,EAA6B5P,KAAK+C,KAEnC6M,EAA6BvI,QAAQ,CACxC,GAAIwI,GAAUD,EAA6BF,KAC3C9Q,GAAG0C,YAAYqO,OAAOE,EAAS,GAInC,MAAOjR,GAAG0C,cAjCtB,OAwCP,QAAS3B,KACRN,EAAkBO,UA/DhB,GAAIhB,GAAKC,IAETD,GAAG2C,WACH3C,EAAG0C,eACH1C,EAAG6E,aAAe5C,EAAa4C,aAClC7E,EAAGe,MAAQA,EACRf,EAAGI,MAAQ,6BACXJ,EAAGkR,SAAU,EAEbrQ,IAPJ4P,EAAyBlQ,SAAW,oBAAqB,gBAAiB,eAAgB,OAAQ,qBARlG1B,QACKC,OAAO,kBACPK,WAAW,2BAA4BsR,MA2EhD,WACI,YAOA,SAASU,GAA4BlO,EAASI,EAAa3C,EAAMgJ,EAAYxG,EAAmBC,EAC3DiO,EAAwBnP,EAAcqB,EAAM+N,EAAUjO,EAAQkO,GA8B/F,QAASzQ,KACLH,EAAKrC,IAAI2B,EAAGI,OACZmR,IACHpL,GAAkB,GAAMvE,KAAK,WAC5B4P,MAIF,QAAStN,KACLiC,GAAkB,GAGzB,QAASsL,GAAeC,GACjB,GAAIA,GAAWA,EAAQC,WACjB3R,EAAGuD,WAAWqO,gBAAkB5R,EAAGuD,WAAWsO,aAAe7R,EAAGuD,WAAWuO,6BACtE9R,EAAGuD,WAAWwO,UAAY/R,EAAGuD,WAAWyO,kBAAoBhS,EAAGuD,WAAW0O,iBAC1EjS,EAAGuD,WAAW2O,wBAA0BlS,EAAGuD,WAAWyE,aAI7D,MAFAhI,GAAGmS,eAAgB,EACnB7O,EAAKoB,MAAM,QAAS,sCAEhB9C,KAAM,SAAUwQ,EAAIC,GAChBjU,QAAQC,UAAWgU,IACfA,GAAoB,kBAAPA,IACbA,KAOZrS,GAAGuD,WAAWC,gBAAgB,IAC1BhC,SAAYxB,EAAGuD,WAAWC,gBAAgB,GAAGhC,UAEjDxB,EAAGuD,WAAWC,gBAAgB,GAAKxD,EAAGuD,WAAWC,gBAAgB,IAC7DhC,SAAYxB,EAAGuD,WAAWC,gBAAgB,GAAGhC,UAC7C,KACJxB,EAAGuD,WAAWqC,UAAYzE,GAAInB,EAAGuD,WAAWqC,SAASzE,GAAIgP,OAAQnQ,EAAGuD,WAAWqC,SAASuK,QACxFnQ,EAAGuD,WAAW+O,sBAEd,IAAIC,KACJ,KACIA,GACIV,aAAc1Q,GAAInB,EAAGuD,WAAWsO,YAAY1Q,IAC5C8Q,gBAAiBjS,EAAGuD,WAAW0O,gBAC/BF,SAAU/R,EAAGuD,WAAWwO,SACxB/J,YAAahI,EAAGuD,WAAWyE,YAC3B8J,6BAA8B3Q,GAAInB,EAAGuD,WAAWuO,4BAA4B3Q,IAC5E6Q,iBAAkBhS,EAAGuD,WAAWyO,iBAChCQ,gBAAiBxS,EAAGuD,WAAWiP,gBAC/BN,uBAAwBlS,EAAGuD,WAAW2O,uBACtCN,eAAgB5R,EAAGuD,WAAWqO,eAAiB5R,EAAGuD,WAAWqO,eAAiB,MAQpF,MAAOa,IAKT,MAAOvP,GAAkBwP,iBAAiB1S,EAAG6E,aAAc0N,GAAgB3Q,KACvE,WACI0B,EAAKoB,MAAM,UAAW,wBACtByB,GAAkB,GACrBnG,EAAG2S,aAAe,GAEnB,cAOZ,QAASpB,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKtB,QAASpB,KAEL,MAAOrO,GAAgB0P,yBAAyB7S,EAAGuD,WAAWqC,SAASC,SAAS1E,IAAIS,KAChF,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WAItB,QAASC,GAAuB5R,GAC5B,MAAOgC,GAAgB6P,uBAAuB7R,GAAIS,KAC9C,SAAUhE,GAEN,MADAoC,GAAGiT,MAAQrV,EAAOA,KACXoC,EAAGiT,QAItB,QAAS9M,GAAkByB,GAEvB,MADH5H,GAAG+F,SAAU,EACN3C,EAAOyE,QACAzE,EAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAChD,SAAUhE,GAQN,MAPAoC,GAAGuD,WAAa3F,EAAOA,KACnBoC,EAAGuD,WAAWsC,UACdkN,EAAuB/S,EAAGuD,WAAWsC,SAAS1E,IAElDwI,GAAqB,GACrBuJ,GAAa,GACblT,EAAG+F,SAAU,EACN/F,EAAGuD,YACX,WACCvD,EAAG+F,SAAU,IAZzB,OAgBP,QAASmN,GAAatL,GACf,GAAKxE,EAAOyE,QAAZ,CAEN,GAAIsL,GAAU/P,EAAOyE,QAAQ7H,GAAGkT,aAAatL,EAE7C,OAAIuL,IAAWA,EAAQvR,KACfuR,EAAQvR,KAAK,SAAUhE,IAExBoC,EAAGuD,WAAWqO,gBAAkBhU,IACpCoC,EAAGuD,WAAW0O,gBAAkBrU,EAAKwV,mBACrCpT,EAAGuD,WAAW2O,uBAAyBtU,EAAKyV,8BAI9CzR,KAAM,WACLxD,QAAQC,IAAI,kCAKf,QAASsL,GAAqB/B,GACnBxE,EAAOyE,SACPzE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAC7C,SAAUhE,GACNoC,EAAGgL,cAAgBpN,IAItC,QAAS0V,GAAiBpU,GACzB,IAAKA,GAAmB,KAAVA,EACb,QACD,IAAIqU,IACHrU,MAAOA,EAAMsU,WAEdlC,GAAgBmC,gBAAgBF,MAAU3R,KAAK,SAAUhE,GACxDoC,EAAG0T,aAAe9V,EAAK8H,UAzLtB,GAAI1F,GAAKC,IACTD,GAAGuD,cACHvD,EAAGuS,kBACHvS,EAAG2T,eACH3T,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAG6G,aACH7G,EAAGiT,SACHjT,EAAG8S,YACH9S,EAAG4S,oBACH5S,EAAG0G,YACN1G,EAAG2S,aAAe,EAClB3S,EAAG0T,gBACA1T,EAAGI,MAAQ,gCACXJ,EAAG4T,UAAYtQ,EAAKuQ,SAAS,qBAChC7T,EAAG8T,WAAa5Q,EAAkB6Q,4BAC/B/T,EAAGmS,eAAgB,EACnBnS,EAAGqR,SAAWA,EAEdrR,EAAGkE,WAAaA,EAChBlE,EAAGyR,eAAiBA,EACpBzR,EAAG+S,uBAAyBA,EAC/B/S,EAAGsT,iBAAmBA,EACtBtT,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAC7BvI,IAoKH6I,EAAWL,IAAI,eAAgB,WACpBjG,EAAOyE,SACV8B,GAAqB,KAE7BD,EAAWL,IAAI,mBAAoB,WAC9BjG,EAAOyE,SACVqL,GAAa,KAEZxJ,EAAWL,IAAI,0BAA2B,SAAUC,EAAOC,GACvDnL,QAAQC,IAAI,mCAAoCkL,GAC5CA,EACAkI,IAAiB7P,KAAK,WAClBwB,EAAOoG,MAAM,QAAQ,IACtB,WACCpG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,QAAQ,KAG7BE,EAAWL,IAAI,8BAA+B,SAAUC,EAAOC,GAC3DnL,QAAQC,IAAI,uCAAwCkL,GAChDA,EACAkI,IAAiB7P,KAAK,WAClBwB,EAAOoG,MAAM,YAAY,KAG7BpG,EAAOoG,MAAM,YAAY,KAtNrC2H,EAA4B5Q,SAAW,UAAW,cAAe,OAAQ,aAAc,oBAAqB,kBAAmB,yBAA0B,eAAgB,OAAQ,WAAY,SAAU,mBATvM1B,QACKC,OAAO,kBACPK,WAAW,8BAA+BgS,MAwOnD,WACI,YAOA,SAAS6C,GAA8B/Q,EAASI,EAAa3C,EAAMgJ,EAAYxG,EAAmBC,EAC7DxD,GAuBjC,QAASkB,KACLH,EAAKrC,IAAI2B,EAAGI,OACZJ,EAAGqF,KAAO4O,OAAO,GAAIlL,OAAQmL,OAAO,cACpCvU,EAAU2H,WAAW1F,KAAK,SAAUvB,GAChCL,EAAGmU,WAA4B,aAAf9T,EAAK+T,MAClBpU,EAAGmU,YACFnU,EAAG6F,SAAWxF,EAAKwF,SACnB7F,EAAG6G,WAAa7G,EAAG6F,UACnBwO,KAEAC,MAQZ,QAASC,KACLvU,EAAG6F,YACH7F,EAAGwU,UACHxU,EAAGyU,YACHzU,EAAGqF,KAAO4O,OAAO,GAAIlL,OAAQmL,OAAO,cACpClU,EAAG0U,WAAW,GAGlB,QAASC,KACL,GAAIhQ,IACAiQ,oBAAsB5U,EAAGwU,OAAOhT,SAChCqT,qBAAuB7U,EAAGyU,SAASjT,SAEvC0B,GAAkByR,kCAAkC3U,EAAG6F,SAAS1E,GAAIwD,GAAQ/C,KAAK,SAAUhE,GACvFoC,EAAG2T,YAAc/V,EACjBoC,EAAG2T,YAAYrS,QAAQ,SAAUiC,GAC9BvD,EAAG8U,oBAAoBvR,EAAWpC,KAAM,MAKnD,QAAS4T,KACL,GAAIpQ,IACAiQ,oBAAsB5U,EAAGwU,OAAOhT,SAEpC0B,GAAkB6R,iCAAiC/U,EAAG6F,SAAS1E,GAAIwD,GAAQ/C,KAAK,SAAUhE,GACtFoC,EAAG2T,YAAc/V,EACjBQ,QAAQC,IAAIT,GACZoC,EAAG2T,YAAYrS,QAAQ,SAAUiC,GAC7BvD,EAAG8U,oBAAoBvR,EAAWpC,KAAM,MAKpD,QAAS6T,KACL,GAAIrQ,IACAhD,WAAa3B,EAAG6F,SAAS1E,GAE7B+B,GAAkB8R,sBAAsBhV,EAAGwU,OAAOhT,SAAUmD,GAAQ/C,KAAK,SAAUhE,GAC/EoC,EAAGiV,UAAYrX,EACfmX,MAIR,QAASV,KACLnR,EAAkBmR,oBAAoBrU,EAAG6F,SAAS1E,IAAIS,KAAK,SAAUhE,GACjEoC,EAAGwU,UACHxU,EAAGyU,YACHzU,EAAGkV,QAAUtX,IAIrB,QAAS0W,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAASuO,KACL,GAAIC,GAAWC,OAAOC,KAAK,GAAI,QAAS,wBACpCC,EAAS,gBACTC,EAAeC,SAASC,eAAeH,EAc3C,OAbAH,GAASK,SAASE,MAAM,sBAAwBF,SAAStV,MAAQ,YACjEiV,EAASK,SAASE,MAAM,kBACxBP,EAASK,SAASE,MAAMH,EAAaI,WACrCR,EAASK,SAASE,MAAM,kBAExBP,EAASK,SAASI,kBAAkB,UAAUC,UAAY,MAE1DV,EAASK,SAAS3U,QAClBsU,EAASW,SAKF,EArHX,GAAIhW,GAAKC,IACTD,GAAGI,MAAQ,4CACXJ,EAAG6F,YACH7F,EAAG6G,aACH7G,EAAGwU,UACHxU,EAAGkV,WACHlV,EAAGyU,YACHzU,EAAGiV,aACHjV,EAAG8U,uBAEH9U,EAAG2T,eAEH3T,EAAGqU,oBAAsBA,EACzBrU,EAAGgV,sBAAwBA,EAC3BhV,EAAG2U,kCAAoCA,EACvC3U,EAAGuU,aAAeA,EAClBvU,EAAGiW,MAAQb,EAEXvU,IAfJmT,EAA8BzT,SAAW,UAAW,cAAe,OAAQ,aAAc,oBAAqB,kBAAmB,aAVjI1B,QACKC,OAAO,kBACPK,WAAW,gCAAiC6U,MAmIrD,WACC,YAOA,SAASkC,GAA4BxM,EAAYzC,EAAUhF,EAAcvB,EAAMuC,EAASjB,EACnDwK,EAAiBpJ,EAAQF,EAAmBI,GA6BhF,QAASzC,KACRH,EAAKrC,IAAI2B,EAAGI,OACZuJ,GAAqB,GACrBxD,GAAkB,GAGnB,QAASA,GAAkByB,GAC1B,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACnD,SAAUhE,GACToC,EAAGuD,WAAa3F,EAAOA,KACvBoC,EAAGmW,mBAAqBvY,EAAOA,EAAKuY,sBACpCC,IACApW,EAAGoC,YAAc,GAAIJ,OACpBK,UACAC,QAAS+T,MAKb,QAASA,KAkBR,MAjBArW,GAAGsW,YAActW,EAAGuD,WAAW+S,YAC/BtW,EAAGsW,YAAYhV,QAAQ,SAAUiV,GAChC,GAAIC,IAAQ,CAMZ,IALAxW,EAAGmW,mBAAmB7U,QAAQ,SAAUmV,GACnCA,EAAkBF,YAAcE,EAAkBF,WAAWpV,KAAOoV,EAAWpV,KAClFqV,GAAQ,MAGLA,EAAO,CACX,GAAIE,IACHnT,WAAYvD,EAAGuD,WACfgT,WAAYA,EACZI,QAAS,GAEV3W,GAAGmW,mBAAmB/U,KAAKsV,MAGtB1W,EAAGmW,mBAKX,QAASS,GAAcC,EAAS1S,GAE/B,GADA/F,QAAQC,IAAIwY,EAAQC,YAAcD,EAAQE,WAAYF,EAAQC,YAAaD,EAAQE,YAC/EF,EAAQC,YAAcD,EAAQE,WAEjC,WADAzT,GAAKoB,MAAM,QAAS;;;AAKrB,GAAIC,IAAUqS,aAAcH,EAAQN,WAAWpV,GAC/C0V,GAAQtT,YACPpC,GAAI0V,EAAQtT,WAAWpC,IAExB+B,EAAkB+T,WAAWjX,EAAG6E,aAAcgS,EAASlS,GAAQ/C,KAC9D,WACC0B,EAAKoB,MAAM,WACXR,EAAWC,IACT,WACF0S,GAAWhT,KAAMgT,EAAQhT,QAMtB,QAASqT,KACLhU,EAAkBiU,yBAAyBnX,EAAG6E,aAAc7E,EAAGoX,MAAMxV,KAAK,WACtE0B,EAAKoB,MAAM,WACXyB,IACAnG,EAAGoX,SACJ,cAKP,QAASC,GAAkBD,GACvBlU,EAAkBoU,4BAA4BtX,EAAG6E,aAAcuS,GAAMxV,KAAK,WACtE0B,EAAKoB,MAAM,WACX6S,EAAeH,IAChB,cAKb,QAAShB,KACR,GAAIzR,IAAUE,aAAc7E,EAAG6E,aAE/B2H,GAAgB4J,uBAAuBzR,GAAQ/C,KAC9C,SAAUhE,GACToC,EAAG2N,UAAY/P,EAAOA,KAEtBoC,EAAGmW,mBAAmB7U,QAAQ,SAAUmV,GACvC,GAAIe,IAAW,CACfxX,GAAG2N,UAAUrM,QAAQ,SAAUmW,GAC1BhB,EAAkBF,YAAckB,EAAStW,KAAOsV,EAAkBF,WAAWpV,KAChFsV,EAAkBiB,YAAcD,EAASA,SACzCD,GAAW,KAGRA,IAAUf,EAAkBiB,YAAc,QAKnD,QAASC,GAA4BxW,GACpC8F,IAAWrF,KAAK,WACf,GAAIT,EAAI,CACP,GAAIwD,IAAUiT,oBAAqBzW,EACnC+B,GAAkB2U,aAAa7X,EAAG6E,aAAcF,GAAQ/C,KACvD,WACC0B,EAAKoB,MAAM,WACXyB,SAMC,QAAS2R,GAAkB3W,GACvB8F,IAAWrF,KAAK,WACRT,GACA+B,EAAkB6U,4BAA4B/X,EAAG6E,aAAc1D,GAAIS,KAC/D,WACI0B,EAAKoB,MAAM,WACXyB,QAM1B,QAASjC,GAAWC,GACnBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCgC,IACAiQ,IAGK,QAASmB,GAAeH,GACpBA,EAAK9O,SAAU,EACfnC,IAGV,QAASwD,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAItB,QAAS+R,GAAWrG,EAAOuN,EAAS1S,GACb,KAAlBmF,EAAMuG,SAAmBvG,EAAMwG,UAClC8G,EAAcC,EAAS1S,GAjLzB,GAAInE,GAAKC,IACTD,GAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGuD,cACHvD,EAAGmW,sBACHnW,EAAGsW,eACHtW,EAAG2N,aAEH3N,EAAG6W,WACH7W,EAAGI,MAAQ,yCAEXJ,EAAGgY,gBAAkB7W,IAAI,EAAMU,MAAO,QAASV,IAAI,EAAOU,MAAO,QAEjE7B,EAAG4W,cAAgBA,EACnB5W,EAAG2X,4BAA8BA,EAC3B3X,EAAG8X,kBAAoBA,EAC7B9X,EAAGkE,WAAaA,EACVlE,EAAGuX,eAAiBA,EACpBvX,EAAGqX,kBAAoBA,EACvBrX,EAAGkX,eAAiBA,EAC1BlX,EAAG2P,WAAaA,EAChB3P,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAEhCvI,IA6JA6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGjBD,EAAWL,IAAI,eAAgB,SAAUC,EAAOC,GAC5CnL,QAAQC,IAAI,wBAAyBkL,GACrCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,mBAAoB,SAAUC,EAAOC,GAChDnL,QAAQC,IAAI,4BAA6BkL,GACzCnG,EAAOoG,MAAM,YAAY,KA7LpC0M,EAA4B3V,SAAW,aAAc,WAAY,eAAgB,OAAQ,UAAW,gBAAiB,kBAAmB,SAAU,oBAAqB,QAXvK1B,QACEC,OAAO,kBACPK,WAAW,8BAA+B+W,MA8M7C,WACC,YAOA,SAAS+B,GAA4BvO,EAAYzG,EAASvC,EAAMwC,EAAmBjB,EAAcmB,EAAQE,GAmBxG,QAASzC,KACRH,EAAKrC,IAAI2B,EAAGI,OACHJ,EAAG+F,SAAU,EACtBI,GAAkB,GAAMvE,KAAKsW,GAC7BvO,GAAqB,GAGtB,QAASuO,KAOR,QAASC,GAAeva,GAYvB,MAXAwa,KACIxa,GAAQA,EAAK8H,SAAW9H,EAAK8H,QAAQ+C,QACxC7K,EAAK8H,QAAQpE,QAAQ,SAAU+W,GAC1BrY,EAAG2T,YAAY2E,IAAI,SAAUlB,GAChC,MAAOA,GAAKjW,KACVkP,QAAQgI,EAAElX,IAAM,GAClBnB,EAAG2T,YAAYvS,KAAKiX,KAIvBja,QAAQC,IAAiB,IAAb+Z,EAAgBpY,EAAGuD,WAAWhE,UAAUgZ,0BACnC,IAAbH,GAAkBpY,EAAGuD,WAAWhE,UAAUgZ,8BAC9BvY,EAAG+F,SAAU,IAG7ByS,SACYxY,EAAG+F,SAAU,IAvB1B,GAAIqS,GAAW,CACflV,GAAkBuV,kBAAkBC,gBAAiB1Y,EAAGuD,WAAWhE,UAAU4L,YAAYvJ,KAAKuW,GAC9F/Z,QAAQC,IAAI,mDAAoD2B,EAAGuD,WAAWhE,UAAUgZ,0BACpFvY,EAAGuD,WAAWhE,UAAUgZ,0BAC3BrV,EAAkBuV,kBAAkBC,gBAAiB1Y,EAAGuD,WAAWhE,UAAUgZ,2BAA2B3W,KAAKuW,GAuB/G,QAASK,KACRpa,QAAQC,IAAI,OAAQ2B,EAAG2T,aACd3T,EAAG2Y,cACZ3Y,EAAG2T,YAAYrS,QAAQ,SAAUsX,GACPC,SAATD,EAAEzX,IAAoByX,EAAEE,UAAYF,EAAEG,WACtCC,EAAcJ,KAIhC,QAASzS,GAAkByB,GAC1B,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACnD,SAAUhE,GAIT,MAHAoC,GAAGuD,WAAa3F,EAAOA,KACvBoC,EAAGuD,WAAWuV,SAAW9Y,EAAGuD,WAAWuV,UAAY,GACnD9Y,EAAGuD,WAAWwV,UAAY/Y,EAAGuD,WAAWwV,WAAa,GAC9C/Y,EAAGuD,aAIP,QAAS0V,GAAcC,GACnB9a,QAAQC,IAAI+E,EACZ,IAAIuB,IACZmU,SAAU9Y,EAAGuD,WAAWuV,SACxBC,UAAW/Y,EAAGuD,WAAWwV,UACzBI,oBAAqBnZ,EAAGuD,WAAW4V,oBAE3B,OAAOjW,GAAkBkW,wBAAwBpZ,EAAG6E,aAAcF,GAAQ/C,KAClF,WACC0B,EAAKoB,MAAM,UAAW,wBACFwU,GAAa/S,GAAkB,GAAOvE,KAAK4W,GAC/DxY,EAAGqZ,eAKN,QAASnV,KACRiC,GAAkB,GAGb,QAAS6S,GAAczV,GAKnB,QAAS+V,GAAoB1b,GACzB,GAAI2b,GAAQ3b,EAAOA,IACnB,IAAI2b,EAAMT,UAAYS,EAAMR,UAAW,CACnC,GAAIS,IACAC,IAAKzZ,EAAGuD,WAAWuV,SACnBY,IAAK1Z,EAAGuD,WAAWwV,WAEnBY,GACAF,IAAKF,EAAMT,SACXY,IAAKH,EAAMR,WAEXa,EAAMC,EAAYL,EAAIG,GACtBG,EAAsB,EAC1B9Z,GAAGuD,WAAWC,gBAAgBlC,QAAQ,SAAU0D,GAC5C8U,GAAuB9U,EAAeC,QAAQpB,KAAO,QAEzDiW,EAAsBA,EAAoBC,OAAO,EAAGD,EAAoBrR,OAAO,EAC/E,IAAImJ,GAAiB5R,EAAGuD,WAAWqO,eAAiB3O,EAAQ,SAASjD,EAAGuD,WAAWqO,gBAAkB,QACjGoI,EAAO,aAAeF,EAAsB,qBAA4BlI,EAAiB,gBAAkB5R,EAAGuD,WAAW4V,oBACvI,YAAcnZ,EAAGuD,WAAWwV,UAAY,YAAc/Y,EAAGuD,WAAWuV,QAO1D,OANA9Y,GAAG2Y,WAAWvX,MACVmC,WAAYgW,EACZU,SAAUL,EAAM,IAChBI,KAAOA,IAGJJ,EAAM,KA9B9B5Z,EAAGqZ,UAAY,KAoCNC,EAAoB/V,GAG9B,QAASsW,GAAYL,EAAIG,GACxB,GAAIO,GAAI,QACJC,EAAOC,EAAIT,EAAGF,IAAMD,EAAGC,KACvBY,EAAQD,EAAIT,EAAGD,IAAMF,EAAGE,KACxBY,EAAI3P,KAAK4P,IAAIJ,EAAO,GAAKxP,KAAK4P,IAAIJ,EAAO,GAC5CxP,KAAK6P,IAAIJ,EAAIZ,EAAGC,MAAQ9O,KAAK6P,IAAIJ,EAAIT,EAAGF,MACxC9O,KAAK4P,IAAIF,EAAQ,GAAK1P,KAAK4P,IAAIF,EAAQ,GACpCI,EAAI,EAAI9P,KAAK+P,MAAM/P,KAAKgQ,KAAKL,GAAI3P,KAAKgQ,KAAK,EAAIL,IAC/CM,EAAIV,EAAIO,CACZ,OAAOG,GAOR,QAASjR,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAvJtB,GAAIoC,GAAKC,IACTD,GAAGuD,cACHvD,EAAG2T,eACH3T,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAG2Y,cAEH3Y,EAAGI,MAAQ,iCAEXJ,EAAGiZ,cAAgBA,EACnBjZ,EAAGkE,WAAaA,EAChBlE,EAAG6Z,YAAcA,EACjB7Z,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAChCvI,GAkIA,IAAIuZ,GAAM,SAAUS,GACnB,MAAOA,GAAIlQ,KAAKmQ,GAAK,IAUtBpR,GAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGjBD,EAAWL,IAAI,gBAAiB,SAAUC,EAAOC,GAC7CnL,QAAQC,IAAI,yBAA0BkL,GAClCA,GAAUnG,EAAO2X,aAAe3X,EAAO2X,YAAYC,OACnD/B,GAAc,GAAMrX,KAAK,WACrBwB,EAAOoG,MAAM,QAAQ,MAGzBrD,IACA/C,EAAOoG,MAAM,QAAQ,MAG7BE,EAAWL,IAAI,oBAAqB,SAAUC,EAAOC,GACjDnL,QAAQC,IAAI,6BAA8BkL,GACtCA,GAAUnG,EAAO2X,aAAe3X,EAAO2X,YAAYC,OACnD/B,GAAc,GAAMrX,KAAK,WACrBwB,EAAOoG,MAAM,YAAY,MAG7BrD,IACA/C,EAAOoG,MAAM,YAAY,MA7KxCyO,EAA4B1X,SAAW,aAAc,UAAW,OAAQ,oBAAqB,eAAgB,SAAU,QAZvH1B,QACEC,OAAO,kBACPK,WAAW,8BAA+B8Y,MA6L7C,WACI,YAOA,SAASgD,GAA4BhU,EAAUhF,EAAcvB,EAAMuC,EAASjB,EAAewK,EAAiBpJ,EAAQsG,EAC/ExG,EAAmBgY,EAAWzO,EAAyBvB,EAAkB5H,GAgD1G,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZsM,IACH/C,GAAqB,GAGtB,QAASgD,KAEL3M,EAAGmb,SAAStO,UAIhB,QAAS1G,KAEL,MADA/H,SAAQC,IAAI,oBAAqByO,GAC1B1J,EAAOyE,QAAQ7H,GAAG8D,cAAcgJ,GAAWlL,KAC9C,SAAUhE,GACNkP,GAAY,EACf9M,EAAGuD,WAAa3F,EACboC,EAAGmb,SAAWvd,EAAOA,EAAKwd,sBAC1Bpb,EAAGqb,SAAU,EACbrb,EAAGsb,qBAAsB,EACzBtb,EAAGub,wBAAyB,EAC5Bvb,EAAGmb,SAAS7Z,QAAQ,SAAUka,GAC1Bxb,EAAGqb,UAAaG,EAAQC,MACxBzb,EAAGsb,sBAAuBE,EAAQE,kBAClC1b,EAAGub,yBAA0BC,EAAQG,uBAG5CrO,IACAC,IAGGvN,EAAGmb,SAAS7Z,QAAQ,SAAUka,GAC3BA,EAAQrb,IAAMqb,EAAQhO,iBAAiBrM,IAE1C,IAAIya,GAAe3Y,EAAQ,WAAWjD,EAAGmb,SAAU,OAAO,EAM1D,OALAnb,GAAGmb,YACHnb,EAAGmb,SAAWtc,QAAQ6E,KAAKkY,GAC3B5b,EAAGmb,SAAWlY,EAAQ,WAAWjD,EAAGmb,SAAU,OAAO,GAG9Cnb,EAAGmb,WAItB,QAASzO,KACL,MAAOD,GAAwBC,0BAA0B9K,KACrD,SAAUhE,GAEN,MADAoC,GAAGyN,kBAAoB7P,EAAOA,KACvBoC,EAAGyN,oBAItB,QAASF,KACL,GAAI5I,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgBqP,mBAAmBlX,GAAQ/C,KAC9C,SAAUhE,GA2BN,MA1BAoC,GAAG2N,UAAY/P,EAAOA,KACzBoC,EAAG4N,mBAAmBtM,QAAQ,SAAUuM,GAEvC,IAAK,GADDC,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAG2N,UAAUlF,OAAQD,IACpCxI,EAAG2N,UAAUnF,GAAGgF,iBAAiBrM,KAAO0M,EAAeL,iBAAiBrM,KAC3E2M,GAAW,EAETA,IACH9N,EAAG2N,UAAUvM,MACZ2M,YAAa,EACb+N,eAAgBjO,EAAeI,gBAAkBJ,EAAeM,qBAChEX,iBAAkBK,EAAeL,iBACjCuO,gBAAiB,EACjBC,aAAc,MAIjBhc,EAAGic,kBAAoB,EACvBjc,EAAGkc,gBAAkB,EACrBlc,EAAGmc,mBAAqB,EACrBnc,EAAG2N,UAAUrM,QAAQ,SAAUmW,GAE9BzX,EAAGic,mBAAoBxE,EAASqE,eAC7B9b,EAAGkc,iBAAkBzE,EAASuE,aAC9Bhc,EAAGmc,oBAAqB1E,EAASsE,kBAE9B/b,EAAG2N,YAItB,QAASyO,GAAWC,GACnB,MAAItW,GAAJ,QAEAA,GAAU,EACP/F,EAAGsc,gBAAkBtc,EAAGwb,QAAQnW,KAE5BgX,EACAA,EAAW9Y,YACPpC,GAAInB,EAAGuD,WAAWpC,IAGtBnB,EAAGwb,QAAQjY,YACPpC,GAAInB,EAAGuD,WAAWpC,IAGnB+B,EAAkBqZ,uBAAuBvc,EAAG6E,aAAewX,EAAaA,EAAarc,EAAGwb,SAAU5Z,KACrG,WAOI,MANA0B,GAAKoB,MAAM,WACX1E,EAAGwb,WACHxb,EAAGoC,YAAY0I,SACfyC,IACHxH,GAAU,EACVlH,QAAQd,QAAQ2X,SAAS8G,cAAc,YAAYxG,SACzC,GACR,WAIC,MAHAhW,GAAGwb,QAAQnW,KAAOrF,EAAGsc,gBACrBhZ,EAAKoB,MAAM,QAAS,kDAC1BqB,GAAU,GACG,KAInB,QAAS0W,GAAcC,EAAWlB,EAASrX,GAYvC,QAASwY,GAAY/e,GACjBQ,QAAQC,IAAI,4CACRT,GACA0F,EAAKoB,MAAM,WACXR,EAAWC,IACK0U,SAATjb,IACPoC,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCoJ,KAEJpH,IAGJ,QAASyW,GAAYhf,GACjBQ,QAAQC,IAAI,cAAeT,GAC3B0F,EAAKoB,MAAM,SAxBVgY,GAGDlB,EAAQjY,YACJpC,GAAInB,EAAGuD,WAAWpC,IAEtB+B,EAAkB2Z,0BAA0B7c,EAAG6E,aAAc2W,EAASkB,GAAW9a,KAAK+a,EAAaC,IALnGxe,QAAQC,IAAI+d,EAAWZ,GAAS5Z,KAAK+a,EAAaC,IA2B1D,QAASE,GAA4B3b,EAAI4b,GACrC9V,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACJ,GAAIwD,IAAUqY,oBAAqB7b,EACnC+B,GAAkB4Z,4BAA4B9c,EAAG6E,aAAcF,GAAQ/C,KACnE,WACI0B,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,SACfyC,UAGRvN,GAAGmb,SAASpK,OAAOgM,EAAQ,KAMvC,QAAS7Y,GAAWC,GAChBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGoC,YAAY0I,SACfyC,IAGP,QAAS5D,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAItB,QAAS0P,KACR,MAAOtN,GAAG4N,mBAAqB5N,EAAGuD,WAAWmM,YAG9C,QAASuN,GAAUC,GAClB,GAAKld,EAAGyN,kBAAR,CAEA,IAAK,GAAI0P,KAAQnd,GAAGyN,kBACnB,GAAI0P,EAAKhc,KAAO+b,GAAsB,YAAdC,EAAKC,KAC5B,OAAO,CAET,QAAO,GAGL,QAASC,KACL,GAAIC,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,4DACbG,WAAY,6BACZE,aAAc,UACdme,KAAM,KACNC,YAAa,eACbC,SACIlQ,iBAAoB,WAChB,MAAOxN,GAAGyN,mBAEd0N,SAAY,WACR,MAAOnb,GAAGmb,UAEdtW,aAAgB,WACZ,MAAO7E,GAAG6E,gBAKtByY,GAAcK,OAAO/b,KACjB,SAAUgc,GACNA,EAAItc,QAAQ,SAAU8V,GAClBA,EAAK7T,YACDpC,GAAInB,EAAGuD,WAAWpC,MAG1B/C,QAAQC,IAAIuf,GACZ1a,EAAkB2a,+BAA+B7d,EAAG6E,aAAc+Y,GAAKhc,KACnE,WACI0B,EAAKoB,MAAM,WACX1E,EAAGwb,WACHxb,EAAGoC,YAAY0I,SACfyC,IACAxH,GAAU,EACVlH,QAAQd,QAAQ2X,SAAS8G,cAAc,YAAYxG,SACpD,WACChW,EAAGwb,QAAQnW,KAAOrF,EAAGsc,gBACrBhZ,EAAKoB,MAAM,QAAS,kDACpBqB,GAAU,KAGnB,cAKX,QAAS4J,GAAWrG,EAAOoT,EAAWlB,EAASrX,GAC3B,KAAlBmF,EAAMuG,SAAmBvG,EAAMwG,WAC9B4M,EAAWD,EAAcC,EAAWlB,EAASrX,GAC5CiY,KAnSJ,GAAIpc,GAAKC,IAETD,GAAGuD,cACHvD,EAAGmb,YACHnb,EAAGwb,WACHxb,EAAG2N,aACH3N,EAAGyN,qBACHzN,EAAGoE,aACH,IAAI0I,IAAY,CAChB9M,GAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS6D,IAEbnG,EAAG8d,WACE1d,MAAO,IAAKyB,MAAO,SACnBzB,MAAO,IAAKyB,MAAO,WAExB7B,EAAG+d,eAAgB,EACnB/d,EAAGqb,SAAU,EACbrb,EAAGic,kBAAmB,EACtBjc,EAAGkc,gBAAiB,EACpBlc,EAAGmc,mBAAoB,EACvBnc,EAAGsb,qBAAsB,EACzBtb,EAAGub,wBAAyB,EAC5Bvb,EAAGwQ,0BAA2B,CACjC,IAAIzK,IAAU,CACX/F,GAAGge,gBACHhe,EAAGie,MAAQ,GAAIlV,MACf/I,EAAGI,MAAQ,4CAEXJ,EAAG6E,aAAe5C,EAAa4C,aAE/B7E,EAAGoc,WAAaA,EAChBpc,EAAG8c,4BAA8BA,EACjC9c,EAAGyc,cAAgBA,EACnBzc,EAAGkE,WAAaA,EAChBlE,EAAG2M,KAAOA,EACb3M,EAAGid,UAAYA,EACfjd,EAAG2P,WAAaA,EACb3P,EAAGqd,YAAcA,EACpBrd,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAE7BvI,IA2PH6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAGpBD,EAAWL,IAAI,eAAgB,SAAUC,EAAOC,GAC5CnL,QAAQC,IAAI,wBAAyBkL,GACrCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,mBAAoB,SAAUC,EAAOC,GAChDnL,QAAQC,IAAI,4BAA6BkL,GACzCnG,EAAOoG,MAAM,YAAY,KA7SjCyR,EAA4B1a,SAAW,WAAY,eAAgB,OAAQ,UAAW,gBAAiB,kBAAmB,SAAU,aAAc,oBAAqB,YAAa,0BAA2B,mBAAoB,QAbnO1B,QACKC,OAAO,kBACPK,WAAW,8BAA+B8b,MAgUnD,WACI,YAOA,SAASiD,GAA2Bxd,EAAMD,EAAmB2C,EAAQE,EAAMJ,EAAmBsK,EAAkB2N,EAAUtW,EAAcoC,GAiBpI,QAASpG,KACLH,EAAKrC,IAAI,uCAAwC8c,GAGrD,QAASgD,KACL1d,EAAkBM,MAAMf,EAAGmb,UAG/B,QAASiD,KACL3d,EAAkBO,QAAQhB,EAAGmb,UAGjC,QAASkD,KACL,GAAIhC,GAAaxd,QAAQ6E,KAAK1D,EAAGwb,QACjCxb,GAAGmb,SAAS/Z,KAAKib,GACjBrc,EAAGwb,SACChO,iBAAkB2N,EAAS1S,OAAS5J,QAAQ6E,KAAKyX,EAASA,EAAS1S,OAAS,GAAG+E,kBAAoB,MAI3G,QAAS8Q,GAAOnd,EAAIgD,GACZhD,EACAod,EAAWpd,EAAIgD,IAEfnE,EAAGmb,SAASpK,OAAO5M,EAAO,GAC1BnE,EAAGwb,SACChO,iBAAkB2N,EAAS1S,OAAS5J,QAAQ6E,KAAKyX,EAASA,EAAS1S,OAAS,GAAG+E,kBAAoB,OAK/G,QAAS+Q,GAAWpd,EAAIgD,GACpB8C,IAAWrF,KAAK,WACRT,GACA+B,EAAkB4Z,4BAA4BjY,GAAemY,oBAAqB7b,IAAKS,KACnF,WACI0B,EAAKoB,MAAM,WACX4Z,EAAO,KAAMna,OAMjC,QAASwL,GAAWrG,EAAOkV,EAAMzB,GAE7B3e,QAAQC,IAAIiL,GACU,KAAlBA,EAAMuG,QACSgJ,SAAXkE,EACA0B,EAAUnV,EAAQA,EAAMwG,SAAW,GAAK,GAExCuO,IAGmB,KAAlB/U,EAAMuG,SACPvG,EAAMoV,SAAuC,UAA5BpV,EAAMqV,cAAcvB,QACrC9T,EAAMsV,iBACNH,EAAUnV,EAAO,KAIE,KAAlBA,EAAMuG,SACPvG,EAAMoV,SAAuC,UAA5BpV,EAAMqV,cAAcvB,QACrC9T,EAAMsV,iBACNH,EAAUnV,EAAO,IAGE,KAAlBA,EAAMuG,SACPvG,EAAMqV,cAAcE,gBAAkBvV,EAAMqV,cAAc9c,MAAM2R,WAAW/K,QAAUa,EAAMoV,UAC3FI,EAAUxV,EAAO,IAEE,KAAlBA,EAAMuG,SAC+B,GAAtCvG,EAAMqV,cAAcE,gBAAuBvV,EAAMoV,UACjDI,EAAUxV,EAAO,GAEE,IAAlBA,EAAMuG,QACPvG,EAAMoV,UACD3B,EAGIA,EAAS,IACd/c,EAAGmb,SAAS4B,GAAQyB,GAAQ3f,QAAQ6E,KAAK1D,EAAGmb,SAAS4B,EAAS,GAAGyB,KAHjExe,EAAGwb,QAAQgD,GAAQ3f,QAAQ6E,KAAK1D,EAAGmb,SAASnb,EAAGmb,SAAS1S,OAAS,GAAG+V,KAQrD,KAAlBlV,EAAMuG,SACPvG,EAAMwG,UAAYiN,GAClBuB,EAAOte,EAAGmb,SAAS4B,GAAQ5b,GAAI4b,GAK3C,QAAS0B,GAAUnV,EAAOyV,GACtB,GAAIC,GAAU1V,EAAMqV,cAAcM,WAAW9d,GAAG+d,UAAU9O,MAAM,IAChE4O,GAAQ,GAAKG,SAASH,EAAQ,GAAI,IAAMD,CACxC,IAAIK,GAAcJ,EAAQ,GAAK,IAAMA,EAAQ,EAC7CngB,SAAQd,QAAQ2X,SAASC,eAAeyJ,IAAcpJ,QAG1D,QAAS8I,GAAUxV,EAAOyV,GACtB,GAAIC,GAAU1V,EAAMqV,cAAcM,WAAW9d,GAAG+d,UAAU9O,MAAM,IAChE4O,GAAQ,GAAKG,SAASH,EAAQ,GAAI,IAAMD,CACxC,IAAIK,GAAcJ,EAAQ,GAAK,IAAMA,EAAQ,EAC7CngB,SAAQd,QAAQ2X,SAASC,eAAeyJ,IAAcpJ,QAvH1D,GAAIhW,GAAKC,IACTD,GAAGyN,kBAAoBD,EACvBxN,EAAGme,GAAKA,EACRne,EAAGoe,OAASA,EACZpe,EAAGmb,SAAWA,EACdnb,EAAGwb,SACChO,iBAAkB2N,EAAS1S,OAAS5J,QAAQ6E,KAAKyX,EAASA,EAAS1S,OAAS,GAAG+E,kBAAoB,MAEvGxN,EAAGqe,IAAMA,EACTre,EAAGse,OAASA,EACZte,EAAG2P,WAAaA,EAEhB9O,IAJJqd,EAA2B3d,SAAW,OAAQ,oBAAqB,SAAU,OAAQ,oBAAqB,mBAAoB,WAAY,eAAgB,YAd1J1B,QACKC,OAAO,kBACPK,WAAW,6BAA8B+e,MAqIlD,WACI,YAEArf,SACKC,OAAO,sBAShB,WACI,YAOA,SAASugB,GAAuC5e,EAAmB6e,EAAkBC,GAoCjF,QAASC,KACLphB,QAAQC,IAAI,+DACZ2B,EAAGyf,KAAOC,OAAOD,KAAKzf,EAAG2f,SACzBC,IAGJ,QAAS7e,KACLN,EAAkBO,UAGtB,QAASmd,KACL,GAAI0B,KACJ7f,GAAG8f,UAAUxe,QAAQ,SAAU8V,GACvBA,EAAK2I,SACLF,EAAeze,KAAKgW,KAE5B3W,EAAkBM,OAAOf,EAAG2f,QAASE,IAGzC,QAASG,GAAiBC,GACtBjgB,EAAGyf,KAAKne,QAAQ,SAAUnB,GACtBH,EAAG2f,QAAQxf,GAAO8f,IAI1B,QAASC,GAAmBD,GACxBjgB,EAAG8f,UAAUxe,QAAQ,SAAU8V,GAC3BA,EAAK2I,QAAUE,IAIvB,QAASL,KACLN,EAAiBa,kBAAkBve,KAAK,SAAUke,GAC9C9f,EAAG8f,UAAYA,EACf1hB,QAAQC,IAAI2B,EAAG8f,UAAWP,GAC1Bvf,EAAG8f,UAAUxe,QAAQ,SAAU8V,GAC3BA,EAAK2I,QAAUR,GAAiBnI,EAAKjW,IAAMoe,EAAcpe,OAvErE,GAAInB,GAAKC,IAETD,GAAGe,MAAQA,EACXf,EAAGme,GAAKA,EACRne,EAAGggB,iBAAmBA,EACtBhgB,EAAGkgB,mBAAqBA,EACxBlgB,EAAG2f,SACCS,eAAe,EACfC,WAAW,EACXC,gBAAgB,EAChBC,SAAS,EACTC,iBAAiB,EACjBC,eAAe,EACfC,gBAAgB,EAChBC,eAAe,EACfC,gBAAgB,EAChBC,UAAU,EACVC,cAAc,EACdC,gBAAgB,EAChBC,SAAS,EACTC,QAAQ,EACRC,eAAe,EACfC,eAAe,EACfC,qBAAqB,EACrBC,8BAA8B,EAC9BC,2BAA2B,EAC3BC,4BAA4B,EAC5BC,iBAAiB,GAIrBhC,IAtBJH,EAAuC9e,SAAW,oBAAqB,mBAAoB,iBAf3F1B,QACKC,OAAO,gBACPK,WAAW,yCAA0CkgB,MAuF9D,WACC,YAOA,SAASoC,GAAwBhhB,EAAmBiJ,EAAYgY,EAAQze,EAAS4B,EAC7C6T,EAAiBiJ,EAAYzW,EAAkBhI,EAAmBI,GAoBrG,QAASzC,KACCzC,QAAQC,IAAI2B,EAAGI,MAAQ,oBAAqByE,EAAc8c,GAGpE,QAASxD,KACR1d,EAAkBM,MAAM,QAGzB,QAASqd,KACR3d,EAAkBO,QAAQ,UAG3B,QAAS4gB,KACC5hB,EAAG+F,SAAU,EACb/F,EAAG0Y,gBAAkB1Y,EAAG0Y,kBAAoB1Y,EAAG6hB,oBAAsB7hB,EAAG6hB,oBAAoBtiB,UAAU4L,UAAY,MAC3HnL,EAAG0Y,gBAAkBoJ,EAAQ9hB,EAAG0Y,iBAChCta,QAAQC,IAAI,eAAgB2B,EAAG6hB,oBAAqB7hB,EAAG0Y,iBACnD1Y,EAAG0Y,gBACF1Y,EAAG6hB,oBACN3W,EAAiB6W,cAAcld,EAAc7E,EAAG0Y,gBAAiB1Y,EAAG6hB,oBAAoB1gB,IAAIS,KAAK,WAChG0B,EAAKoB,MAAM,UAAW,wBACtByZ,IACkBne,EAAG+F,SAAU,GAC7B,WACF/F,EAAG+F,SAAU,IAGCmF,EAAiB8W,aAAand,EAAc7E,EAAG0Y,gBAAiBiJ,GAAY/f,KAAK,WAC/F0B,EAAKoB,MAAM,UAAW,wBACtBpB,EAAKoB,MAAM,UAAW,8BACtBgd,EAAOO,GAAG,0BACTC,YAAaliB,EAAG0Y,gBAChB7T,aAAcA,EACdsd,gBAAiBT,EAAOU,SAASve,OAElCsa,IACkBne,EAAG+F,SAAU,GAC7B,WACF/F,EAAG+F,SAAU,KAKH/F,EAAG+F,SAAU,EACbzC,EAAKoB,MAAM,QAAS,uCAKlC,QAAS2d,GAAsBnjB,GAE9B,MAAKA,IAAmB,KAAVA,EAEPgE,EAAkBof,gBAAgBR,EAAQ5iB,EAAMsU,aAAa5R,KACnE,SAAUhE,GAET,MADAoC,GAAGuiB,eAAiB3kB,EAAOA,KACpBoC,EAAGuiB,iBAJJviB,EAAGuiB,eAQZ,QAASC,GAAkBC,GAEtBA,EAASljB,WAAakjB,EAASljB,UAAU4L,YAC5CnL,EAAG0Y,gBAAkB+J,EAASljB,UAAU4L,WAG1C,QAASuX,GAAqBnf,GAC7B,GAAIM,GAA6C,IAAtCN,EAAWC,gBAAgBiF,OAAelF,EAAWC,gBAAgB,GAAGyB,QAAQpB,KACpD,IAAtCN,EAAWC,gBAAgBiF,OAC1BlF,EAAWC,gBAAgB,GAAGyB,QAAQpB,KAAO,MAAQN,EAAWC,gBAAgB,GAAGyB,QAAQpB,KAAO,EACpG,OAAON,GAAWhE,UAAU4L,UAAY,aAC5BlI,EAAQ,SAASM,EAAWqO,gBAAkB,SAAW/N,EAAO,+CAC5BN,EAAW4M,OAAS,WA3FrE,GAAInQ,GAAKC,IACTD,GAAGI,MAAQ,gBACX,IACI0hB,IADU7e,EAAQ,WACRA,EAAQ,WAChBjD,GAAG2iB,wBAA0BjK,EACnC1Y,EAAGuiB,kBAGHviB,EAAGoe,OAASA,EACZpe,EAAG4hB,aAAeA,EAClB5hB,EAAGqiB,sBAAwBA,EAC3BriB,EAAGwiB,kBAAoBA,EACvBxiB,EAAG0iB,qBAAuBA,EAC1B1iB,EAAGme,GAAKA,EAERtd,IAND4gB,EAAwBlhB,SAAW,oBAAqB,aAAc,SAAU,UAAW,eAAgB,kBAAmB,aAAc,mBAAoB,oBAAqB,QAhBrL1B,QACEC,OAAO,gBACPK,WAAW,0BAA2BsiB,MAqGzC,WACC,YAOA,SAASmB,GAA4BniB,EAAmBoiB,EAAaC,EAAW5X,EAC3C5H,EAAM3D,EAAWsD,GAgBrD,QAASpC,KACR,GAAIb,EAAG6iB,YAAYjd,SAClB,IAAK,GAAI4C,GAAI,EAAGA,EAAIxI,EAAG8iB,UAAUra,OAAQD,IACxC,GAAIxI,EAAG8iB,UAAUta,GAAGrH,IAAMnB,EAAG6iB,YAAYjd,SAASzE,GAAI,CACrDnB,EAAG+f,QAAQ/f,EAAG8iB,UAAUta,GAAGrH,IAAM,MACjC,QAMJ,QAAS4hB,KACR/iB,EAAG+F,SAAU,EACT/F,EAAGgjB,qBACM9X,EAAiB6X,YAAY/iB,EAAG6iB,YAAY1hB,GAAInB,EAAGgjB,qBAAqBphB,KAAK,WACvF0B,EAAKoB,MAAM,WACXyZ,IACAne,EAAG+F,SAAU,GACX,WACF/F,EAAG+F,SAAU,IAOjB,QAASoY,KACR1d,EAAkBM,QA1CnB,GAAIf,GAAKC,IACTD,GAAGI,MAAQ,gDAEXJ,EAAG6iB,YAAcA,EACjB7iB,EAAG8iB,UAAYA,EACf9iB,EAAG4F,YACH5F,EAAG+f,WACH/f,EAAGgjB,oBAAsB,GAEzBhjB,EAAG+iB,YAAcA,EAEjBliB,IADD+hB,EAA4BriB,SAAW,oBAAqB,cAAe,YAAa,mBAAoB,OAAQ,YAAa,WAjBjI1B,QACEC,OAAO,kBACPK,WAAW,8BAA+ByjB,MA4D7C,WACI,YAOA,SAASK,GAAqBxiB,EAAmBwC,EAASG,EAAQG,EAAYD,EAAMJ,GAchF,QAASrC,KACLsF,IAGJ,QAASA,KACLnG,EAAGkjB,aAAeljB,EAAGuD,WAAW4f,oCAAoC1a,OAAS,EACzEzI,EAAGuD,WAAW4f,oCAAoC,GAAK,KAG/D,QAASC,KACDpjB,EAAGkjB,aAAa/hB,GAChBkiB,IAEAC,IAIR,QAASA,KACL,GAAI1lB,IACA2lB,WAAYvjB,EAAGkjB,aAAaK,WAC5BC,UAAWxjB,EAAGkjB,aAAaM,UAE/BtgB,GAAkBogB,gBAAgBtjB,EAAGuD,WAAWpC,GAAIvD,GAAMgE,KAAK,WAC3D0B,EAAKoB,MAAM,UAAW,wBACtByZ,MAIR,QAASkF,KACL,GAAIzlB,IACA2lB,WAAYvjB,EAAGkjB,aAAaK,WAC5BC,UAAWxjB,EAAGkjB,aAAaM,UAE/BtgB,GAAkBmgB,mBAAmBrjB,EAAGkjB,aAAa/hB,GAAIvD,GAAMgE,KAAK,WAChE0B,EAAKoB,MAAM,UAAW,wBACtByZ,MAIR,QAASC,KACL3d,EAAkBO,QAAQ,UAG9B,QAASmd,KACL1d,EAAkBM,QAzDtB,GAAIf,GAAKC,IAETD,GAAGuD,WAAaA,EAChBvD,EAAGkjB,gBAGHljB,EAAGojB,OAASA,EACZpjB,EAAGoe,OAASA,EAEZvd,IAGJoiB,EAAqB1iB,SAAW,oBAAqB,UAAW,SAAU,aAAc,OAAQ,qBAlBhG1B,QACKC,OAAO,OACPK,WAAW,uBAAwB8jB,MAoE5C,WACI,YAOA,SAASQ,GAAuBxhB,EAAcyf,EAAQgC,EAAWhjB,EAAMsB,EAAegB,EAAMkY,EAAWjY,EAASgE,EAChFmK,EAAwBuS,EAAeC,EAAqBzgB,EAC5DD,EAAmBhB,EAAcoB,EAAMugB,EAAexgB,EAAa1D,EACnE2f,GA6D5B,QAASze,KACLH,EAAKsZ,KAAKha,EAAGI,OACbmR,IACA+C,IACAwP,IACAC,IACAnE,IAGJ,QAASmE,KACLpkB,EAAU2H,WAAW1F,KAAK,SAAUhE,GAChCoC,EAAGgkB,YAAcpmB,EACjBoC,EAAGikB,QAAUtkB,EAAUukB,aAAa,YAI5C,QAASC,KACL,MAAOxkB,GAAUykB,SAAS,oBAG9B,QAAStgB,GAAc3C,GACnB,IAAK,GAAIqH,GAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACvC,GAAIxI,EAAG2T,YAAYnL,GAAGrH,KAAOA,EACzB,MAAOnB,GAAG2T,YAAYnL,GAMlC,QAAS6b,KA4CL,GA3CArkB,EAAGskB,WAAWC,iBAAmBvkB,EAAGukB,iBACpCvkB,EAAGskB,WAAWE,eAAiBxkB,EAAGwkB,eAClCxkB,EAAGskB,WAAWG,mBAAqBzkB,EAAGykB,mBACtCzkB,EAAGskB,WAAWI,iBAAmB1kB,EAAG0kB,iBACpC1kB,EAAGskB,WAAWK,eAAiB3kB,EAAG2kB,eAClC3kB,EAAGskB,WAAWM,aAAe5kB,EAAG4kB,aAChC5kB,EAAGskB,WAAWO,gBAAkB7kB,EAAG6kB,gBACnC7kB,EAAGskB,WAAWQ,cAAgB9kB,EAAG8kB,cACjC9kB,EAAGskB,WAAWS,eAAiB/kB,EAAGskB,WAAWS,eAAiB9hB,EAAQ,WAAWjD,EAAGskB,WAAWS,gBAAkB,KACjH/kB,EAAGskB,WAAWU,iBAAmBhlB,EAAGskB,WAAWU,iBAAmB/hB,EAAQ,WAAWjD,EAAGskB,WAAWU,kBAAoB,KACvHhlB,EAAGskB,WAAW5L,gBAAkB1Y,EAAGskB,WAAW5L,gBAAkBzV,EAAQ,WAAWjD,EAAGskB,WAAW5L,iBAAmB,KACpH1Y,EAAGskB,WAAW3C,WAAa3hB,EAAG2hB,WAAa3hB,EAAG2hB,WAAWnO,WAAa,KACtExT,EAAGskB,WAAWW,WACdjlB,EAAGskB,WAAWY,gBAEdllB,EAAGiB,MAAMK,QAAQ,SAAU6jB,GACnBA,EAAG1C,UACHziB,EAAGskB,WAAWW,QAAQ7jB,KAAK+jB,EAAGhkB,MAEtCnB,EAAGolB,WAAW9jB,QAAQ,SAAU6jB,GACxBA,EAAG1C,UACHziB,EAAGskB,WAAWY,aAAa9jB,KAAK+jB,EAAGhkB,MAG3CnB,EAAGskB,WAAW1Q,aACd5T,EAAGskB,WAAWe,sBAEdrlB,EAAG4T,UAAUtS,QAAQ,SAAU6jB,GACvBA,EAAG1C,UACHziB,EAAGskB,WAAW1Q,UAAUxS,KAAK+jB,EAAGhlB,OAExCH,EAAGqlB,mBAAmB/jB,QAAQ,SAAU6jB,GAChCA,EAAG1C,UACHziB,EAAGskB,WAAWe,mBAAmBjkB,KAAK+jB,EAAGhlB,OAGjDH,EAAGskB,WAAWgB,sBAEdtlB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,UACHziB,EAAGskB,WAAWgB,mBAAmBlkB,KAAK+jB,EAAGhkB,MAG7CnB,EAAGulB,iBAAmBvlB,EAAGwlB,UAAW,CACpC,GAAIC,KACJA,GAAoBrkB,KAAKpB,EAAGulB,iBAC5BvlB,EAAGskB,WAAWoB,YAAc1lB,EAAGwlB,UAAUrkB,GACzCnB,EAAGskB,WAAWqB,kBAAoBF,MAMlCzlB,GAAGskB,WAAWsB,oBAAsB,KAI5C,QAASnN,GAAiBoN,GACtB,GAAIC,GAAY7R,QAChBjU,GAAG+F,SAAU,EACbse,GACA,IAAI1f,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACdrZ,KAAM,UAOV,OALA9N,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAG9B7B,EAAGskB,WAAW4B,+BAAiC,qBACxChjB,EAAkBuV,iBAAiBzY,EAAGskB,WAAY3f,GAAQ/C,KAC7D,SAAUhE,GACNoC,EAAG2T,YAAc/V,EAAOA,EAAK8H,UAC7B,IAAI8C,GACA2d,EAAqBvoB,EAAKuS,OAASvS,EAAKwoB,gBAC5C,KAAK5d,EAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACnCxI,EAAG2T,YAAYnL,GAAGrE,MAAQgiB,EAAqB3d,EAAI,EACnDxI,EAAG2T,YAAYnL,GAAG6d,eAAwD,YAAvCrmB,EAAG2T,YAAYnL,GAAG5E,YAAYC,IAEjEjG,KACAioB,EAAQS,MAAM1oB,EAAK2oB,eACnBvmB,EAAGwmB,gBAAkB5oB,EAAK2oB,cAE9B,IAAIE,GAAwB5nB,QAAQd,QAAQ2X,SAASC,eAAe,2BAKpE,OAJI3V,GAAG0mB,YAAa1mB,EAAG0mB,aAAc,EAChChD,EAAUiD,gBAAgBF,EAAuBG,EAAQC,GAC9D7mB,EAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC7D9lB,EAAG+F,SAAU,EACN/F,EAAG2T,aACX,SAAUnN,GAIT,MAHAxG,GAAGwmB,gBAAkB,EACrBxmB,EAAG+F,SAAU,EACb/F,EAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SACtDtf,IAInB,QAASwgB,GAAiBC,GACtB5C,GACA,IAAI/G,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,sDACbG,WAAY,yCACZE,aAAc,UACdme,KAAM,KACNE,SACI6B,cAAiB,WACb,MAAOvf,GAAGwlB,aAKtBlI,GAAcK,OAAO/b,KACjB,SAAUgc,GACN,GAAIjZ,IACAsiB,WAAYA,EACZC,eAAgBlnB,EAAGskB,WACnB6C,sBAAsB,EACtBxH,QAAS/B,EAAI,GACbwJ,WAAYxJ,EAAI,GAGpB+F,GAAc0D,gBAAgB1iB,GAAQ/C,KAAK,SAAU0lB,GACjD,GAAIL,EAAY,CACZ,GAAIM,GAAM,4CAA8CD,CACxDlpB,SAAQC,IAAIkpB,GACZ5D,EAAc6D,iBAAiBD,GAC/BjkB,EAAKoB,MAAM,OAAQ,mCAG5B,cAMX,QAAS6M,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAItB,QAAS0B,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAAS4gB,KAGL,MAFKznB,GAAGskB,WAAW3iB,aACf3B,EAAG8S,aACA3P,EAAgB0P,yBAAyB7S,EAAGskB,WAAW3iB,YAAYC,KACtE,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WAItB,QAAS4U,KAEL,MADA1nB,GAAGskB,WAAWqD,aAC2B,IAArC3nB,EAAGskB,WAAWsD,YAAYnf,QAC1BzI,EAAG8S,YACI9S,EAAG8S,UAGP3P,EAAgB0kB,6BAA6B7nB,EAAGskB,WAAWsD,aAAahmB,KAC3E,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WAItB,QAASyB,KACDvU,EAAGskB,YACHtkB,EAAGskB,cACHtkB,EAAGiB,MAAMK,QAAQ,SAAU6jB,GACnBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAGolB,WAAW9jB,QAAQ,SAAU6jB,GACxBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAG4T,UAAUtS,QAAQ,SAAU6jB,GACvBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAGqlB,mBAAmB/jB,QAAQ,SAAUwmB,GAChCA,EAAGrF,WACHqF,EAAGrF,UAAW,KAEtBziB,EAAGoC,YAAY0I,UAEf9K,EAAG+nB,WAAa/nB,EAAG+nB,UAI3B,QAASC,KACLhoB,EAAGoC,YAAY0I,SAGnB,QAASmd,KACLjoB,EAAGoC,YAAY0I,SAGnB,QAASod,GAAc/mB,GACnB,GAAIoC,GAAaO,EAAc3C,EAC/B+Z,GAAU3F,MACNgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAActB,EAAWpC,QAQ7C,QAASgnB,KACL,GAAI7K,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,mEACbG,WAAY,gBACZE,aAAc,gBACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOnB,GAAG2hB,YAEdyG,YAAa,WACT,YAKZ9K,GAAcK,OAAO/b,KACjB,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASud,GAAqB9kB,GAC1B,GAAI+Z,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,uBACZE,aAAc,UACdme,KAAM,KACNE,SACIna,WAAY,WACR,MAAOA,MAKnB+Z,GAAcK,OAAO/b,KAAK,WACtB5B,EAAGoC,YAAY0I,WAIvB,QAASwd,GAAyB/kB,GAC9B,GAAI+Z,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,yFACbG,WAAY,2BACZE,aAAc,UACdme,KAAM,KACNE,SACIna,WAAY,WACR,MAAOA,MAKnB+Z,GAAcK,OAAO/b,KAAK,WACtB5B,EAAGoC,YAAY0I,WAIvB,QAASyd,GAAShlB,GACdnF,QAAQC,IAAI,gBAAiBkF,GAC7Bme,EAAOO,GAAG,yBAA0Bpd,aAActB,EAAWpC,GAAID,KAAM,qBAG3E,QAASsnB,GAAeroB,GACpB,IAAK,GAAIqI,GAAI,EAAGA,EAAIxI,EAAG4T,UAAUnL,OAAQD,IACrC,GAAIrI,IAAQH,EAAG4T,UAAUpL,GAAG3G,MACxB,MAAO7B,GAAG4T,UAAUpL,GAAGpI,KAE/B,OAAO,SAWX,QAASqoB,GAAWvnB,GAChB,MAAO+jB,GAAQ5U,QAAQnP,EAAKC,IAAM,GAOtC,QAASunB,GAAWxnB,GAEhB,GAAIiD,GAAQ8gB,EAAQ5U,QAAQnP,EAAKC,IAC7BwnB,EAASxkB,EAAQ,EACjBwkB,GACA1D,EAAQlU,OAAO5M,EAAO,GAEtB8gB,EAAQ7jB,KAAKF,EAAKC,IACtB6mB,IAIJ,QAASY,GAAgB1nB,GACrB9C,QAAQC,IAAI,kBAAmB6C,EAAKC,GAAI+jB,EAAa7U,QAAQnP,EAAKC,IAClE,IAAIgD,GAAQ+gB,EAAa7U,QAAQnP,EAAKC,IAClCwnB,EAASxkB,EAAQ,EACjBwkB,GACAzD,EAAanU,OAAO5M,EAAO,GAE3B+gB,EAAa9jB,KAAKF,EAAKC,IAC3B6mB,IACA5pB,QAAQC,IAAI6mB,GAGhB,QAAS2D,GAAiBtlB,GAClBA,EAAW8iB,gBAEfpf,IAAWrF,KAAK,WACZsB,EAAkB2lB,iBAAiBtlB,EAAWpC,IAAIS,KAAK,WACnD5B,EAAGoC,YAAY0I,SACfxH,EAAKoB,MAAM,YACZ,SAAU+N,GACTnP,EAAKoB,MAAM,QAAS+N,EAAEqW,aAKlC,QAASC,GAAiB5nB,EAAI6nB,GAC1B,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,WACIkC,MAIZ,QAASggB,KACLzgB,EAAY2C,UAAU,YAAYpE,KAAK,SAAUhE,GAC7CoC,EAAG2G,UAAY/I,EAAOA,OAE1ByF,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,OAE1ByF,EAAY4lB,YAAY,oBAAqB,aAAc,kBAAkBrnB,KAAK,SAAUhE,GACxFoC,EAAGkpB,WAAatrB,EAAOA,EAAK8H,aAEhCrC,EAAY4lB,YAAY,QAAS,oBAAqB,aAAc,sBAAuB,qBAAqBrnB,KAAK,SAAUhE,GAC3HoC,EAAGmpB,OAASvrB,EAAOA,EAAK8H,aAIhC,QAASka,KACL5f,EAAGylB,sBACE5jB,MAAO,MAAO0O,QAAS,oBACvB1O,MAAO,OAAQ0O,QAAS,gBACxB1O,MAAO,WAAY0O,QAAS,cAC5B1O,MAAO,SAAU0O,QAAS,iBAC1B1O,MAAO,uBAAwB0O,QAAS,wBAE7C+O,EAAiBa,kBAAkBve,KAAK,SAAUhE,GAC9CoC,EAAGonB,WAAaxpB,IAIxB,QAASwrB,GAAaC,GAClB,MAAOzF,GAAoB0F,cAAcpqB,MAAOmqB,IAAIznB,KAAK,SAAUhE,GAE/D,MADAoC,GAAGupB,MAAQ3rB,MACJoC,EAAGupB,QA3flB,GAAIvpB,GAAKC,IACTD,GAAG0mB,aAAc,EACjB1mB,EAAGskB,cACHtkB,EAAGuD,cACHvD,EAAG2T,eACH3T,EAAGwpB,cACHxpB,EAAG4T,UAAYtQ,EAAKuQ,SAAS,aAC7B7T,EAAGqlB,mBAAqB/hB,EAAKuQ,SAAS,sBACtC7T,EAAG4S,oBACH5S,EAAG6G,aACH7G,EAAGupB,SACHvpB,EAAGod,KAAO,iBACVpd,EAAG2hB,WAAa1f,EAAa0f,WAC7B3hB,EAAG+kB,eAAiB9iB,EAAa8iB,eACjC/kB,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASmW,IAEbzY,EAAGypB,YAAa,EAChBzpB,EAAGiB,MAAQiC,EAAkB+F,eAC7BjJ,EAAGolB,WAAaljB,EAAa+G,aAE7BjJ,EAAG2G,aACH3G,EAAGkG,aACHlG,EAAGiG,gBACHjG,EAAGkpB,cACHlpB,EAAGmpB,SAEH,IAAIlE,MACAC,KACA2B,EAAW,IACXD,EAAS,EAEb5mB,GAAGmoB,UAAYA,EACfnoB,EAAGynB,sBAAwBA,EAC3BznB,EAAG0nB,yBAA2BA,EAC9B1nB,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EACZhoB,EAAGioB,WAAaA,EAChBjoB,EAAGkoB,cAAgBA,EACnBloB,EAAG0pB,YAAclB,EACjBxoB,EAAG0oB,WAAaA,EAChB1oB,EAAG4oB,gBAAkBA,EACrB5oB,EAAGyoB,WAAaA,EAChBzoB,EAAG6oB,iBAAmBA,EACtB7oB,EAAG+oB,iBAAmBA,EACtB/oB,EAAGgnB,iBAAmBA,EACtBhnB,EAAG2pB,YAAcrmB,EAAKsmB,eACtB5pB,EAAG8jB,SAAWA,EACd9jB,EAAG6pB,SAAW3mB,EAAkB4mB,aAChC9pB,EAAGopB,aAAeA,EAClBppB,EAAGqoB,qBAAuBA,EAC1BroB,EAAGsoB,yBAA2BA,EAC9BtoB,EAAGuoB,SAAWA,EACdvoB,EAAGmkB,cAAgBA,EAEnBtjB,IA9CJ4iB,EAAuBljB,SAAW,eAAgB,SAAU,YAAa,OAAQ,gBAAiB,OAAQ,YAAa,UAAW,WAAY,yBAA0B,gBAAiB,sBAAuB,kBAAmB,oBAAqB,eAAgB,OAAQ,gBAAiB,cAAe,YAAa,oBAnB7T1B,QACKC,OAAO,OACPK,WAAW,yBAA0BskB,MA8gB9C,WACI,YAOA,SAASsG,GAAyBtpB,EAAmBwC,EAASG,EAAQG,EAAYD,EAAMN,EAAME,GAe1F,QAASrC,KACLsF,IAGJ,QAASA,KACLnG,EAAGgqB,mBAAqBhqB,EAAGuD,WAAW4f,oCAAoC1a,OAAS,EAC/EzI,EAAGuD,WAAW4f,oCAAoC,GAAK,KAG/D,QAASC,KAEL,GAAI6G,GAAOjqB,EAAGgqB,mBAAmBE,UAEjC,OADA9rB,SAAQC,IAAI4rB,GACRA,EAAKC,WAAW1M,KAAO,QACvBla,GAAKoB,MAAM,QAAS,uCAIpB1E,EAAGgqB,mBAAmBG,KACtBC,IAEAC,KAIR,QAASA,KACL,GAAI1lB,IACA2lB,SAAUtqB,EAAGgqB,mBAAmBM,SAChCC,iBAAkBvqB,EAAGgqB,mBAAmBO,iBACxCviB,YAAahI,EAAGgqB,mBAAmBQ,iBAEnC5sB,EAAOoC,EAAGgqB,mBAAmBE,UACjChnB,GAAkBmnB,gCAAgCrqB,EAAGgqB,mBAAmB7oB,GAAIwD,EAAQ/G,GAAMgE,KAAK,WAC3F0B,EAAKoB,MAAM,UAAW,wBACtByZ,MAIR,QAASiM,KACL,GAAIzlB,IACA2lB,SAAUG,EAAMzqB,EAAGgqB,mBAAmBM,UACtCC,iBAAkBvqB,EAAGgqB,mBAAmBO,iBACxCviB,YAAahI,EAAGgqB,mBAAmBQ,iBAGnC5sB,EAAOoC,EAAGgqB,mBAAmBE,UACjChnB,GAAkBknB,mCAAmCpqB,EAAGgqB,mBAAmB7oB,GAAIwD,EAAQ/G,GAAMgE,KAAK,WAC9F0B,EAAKoB,MAAM,UAAW,wBACtByZ,MAIR,QAASC,KACL3d,EAAkBO,QAAQ,UAG9B,QAASmd,KACL1d,EAAkBM,QAvEtB,GAAIf,GAAKC,KAELwqB,EAAQxnB,EAAQ,QACpBjD,GAAGuD,WAAaA,EAChBvD,EAAGgqB,sBACHhqB,EAAGgD,KAAOA,EAEVhD,EAAGojB,OAASA,EACZpjB,EAAGoe,OAASA,EAEZvd,IAIJkpB,EAAyBxpB,SAAW,oBAAqB,UAAW,SAAU,aAAc,OAAQ,OAAQ,qBApB5G1B,QACKC,OAAO,OACPK,WAAW,2BAA4B4qB,MAkFhD,WACI,YAOA,SAASW,GAAyBjqB,EAAmBwB,EAAc0oB,EAAoBznB,EAAmBI,GAkBtG,QAASzC,KACLzC,QAAQC,IAAIusB,EAAQxqB,OAGxB,QAASyqB,KACL,GAAID,EAAQD,mBAAoB,CAC5B,GAAIhmB,IAAUmmB,qBAAsBF,EAAQD,mBAAmBxpB,GAC/DypB,GAAQD,mBAAmBpnB,YACvBpC,GAAIwpB,EAAmBpnB,WAAWpC,IAEtC+B,EAAkB2nB,2BAA2BD,EAAQ/lB,aAAc+lB,EAAQD,mBAAoBhmB,GAAQ/C,KACnG,WACI0B,EAAKoB,MAAM,WACXjE,EAAkBM,WAKlC,QAAS4G,KACLlH,EAAkBM,QApCtB,GAAI6pB,GAAU3qB,IAEd2qB,GAAQxqB,MAAQ,8BAChBwqB,EAAQD,mBAAqBA,EAC7BC,EAAQ/lB,aAAe5C,EAAa4C,aACpC+lB,EAAQG,OACH5pB,IAAI,EAAMoP,QAAS,aACnBpP,IAAI,EAAOoP,QAAS,cAGzBqa,EAAQC,2BAA6BA,EACrCD,EAAQjjB,UAAYA,EAEpB9G,IAEJ6pB,EAAyBnqB,SAAW,oBAAqB,eAAgB,qBAAsB,oBAAqB,QArBpH1B,QACKC,OAAO,kBACPK,WAAW,2BAA4BurB,MA6ChD,WACI,YAOA,SAASM,GAA6BhoB,EAAKiE,EAAUiU,EAAWlZ,EAAeC,EAAcvB,EAAMwC,EAAmBI,EAAMF,GAiDxH,QAASvC,KACLH,EAAKrC,IAAI2B,EAAGI,OACf6qB,IAGD,QAASA,KACL,MAAO7nB,GAAOyE,QAAQ7H,GAAG8D,cAAcgJ,GAAWlL,KAC9C,SAAUhE,GAMN,MALAkP,IAAY,EACf9M,EAAGuD,WAAa3F,EAChBoC,EAAGgL,cAAmD,YAAnChL,EAAGuD,WAAWK,YAAYC,MAAyD,eAAnC7D,EAAGuD,WAAWK,YAAYC,KAC1F7D,EAAG2D,MAAQ/F,EAAKgG,YAAYC,KAC5B7D,EAAG2N,UAAY/P,EAAOA,EAAK0U,uBACpBtS,EAAG2N,YAKtB,QAASud,KACL,GAAI5sB,GAAO,kBAEX2I,IAAU3I,KAAMA,IAAOsD,KAAK,WACxB,MAAOsB,GAAkBioB,oCAAoCnrB,EAAG6E,cAAcjD,KAC1E,WACCqpB,QAKb,QAASG,KACDprB,EAAG2qB,oBACHznB,EAAkBmoB,wBAAwBrrB,EAAG6E,aAAc7E,EAAG2qB,oBAAoB/oB,KAC9E,WACI0B,EAAKoB,MAAM,WACXiD,IACHsjB,MAKb,QAASK,GAAenqB,GAChBnB,EAAG2qB,oBACH1jB,IAAWrF,KAAK,WACZ,GAAI+C,IAAUmmB,qBAAsB3pB,EACpC+B,GAAkBqoB,6BAA6BvrB,EAAG6E,aAAcF,GAAQ/C,KACpE,WACI0B,EAAKoB,MAAM,WACdumB,QAMjB,QAAStjB,KACL3H,EAAG2qB,sBACH3qB,EAAG+nB,WAAa/nB,EAAG+nB,UAGvB,QAAS/jB,GAAW3D,GAGhB,MADHL,GAAGiE,QAAUjE,EAAGgD,KAAO,0BAA4B3C,EAAKmB,SAAW,WACzDxB,EAAGiE,QAGd,QAASkkB,GAAUwC,GACf,GAAIrN,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,UACdme,KAAM,KACNE,SACIiN,mBAAoB,WAChB,MAAOA,MAKnBrN,GAAcK,OAAO/b,KACjB,WACCqpB,KACE,cAjIX,GAAIjrB,GAAKC,IAETD,GAAG2qB,sBACH3qB,EAAG2N,aACH3N,EAAG6E,aAAe5C,EAAa4C,YAC/B,IAAIiI,IAAY,CAChB9M,GAAG+nB,WAAY,EACf/nB,EAAGuD,cACHvD,EAAGgD,KAAOA,EACVhD,EAAGkrB,6BAA+BA,EAClClrB,EAAGorB,eAAiBA,EACpBprB,EAAGsrB,eAAiBA,EACpBtrB,EAAG2H,UAAYA,EACf3H,EAAGgE,WAAaA,EAChBhE,EAAGmoB,UAAYA,EACfnoB,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC9ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAC7BpJ,EAAGwrB,OACCC,kBAAqB,2BACrBC,0BAA6B,2BAC7BC,uBAA0B,2BAC1BC,iBAAoB,2BACpBC,oCAAuC,2BACvCC,yCAA4C,2BAC5CC,4CAA+C,2BAC/CC,mBAAsB,4BACtBC,6BAAgC,4BAChCC,uBAA0B,0BAC1BC,oCAAuC,0BACvCC,iBAAoB,0BACpBC,iBAAoB,0BACpBC,mBAAsB,4BACtBC,iBAAoB,qCACpBC,kBAAqB,2BACrBC,sBAAyB,gCACzBC,kBAAqB,2BACrBC,cAAiB,qCACjBC,0BAA6B,qCAC7BC,oBAAuB,qCACvBC,mBAAsB,sCAG1B9sB,EAAGI,MAAQ,8CAEXS,IAyFAuC,EAAOiG,IAAI,gBAAiB,SAAUC,EAAOC,GACzCnL,QAAQC,IAAI,yBAA0BkL,GACtCnG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOiG,IAAI,oBAAqB,SAAUC,EAAOC,GAC7CnL,QAAQC,IAAI,6BAA8BkL,GAC1CnG,EAAOoG,MAAM,YAAY,KA7HjCwhB,EAA6BzqB,SAAW,OAAQ,WAAY,YAAa,gBAAiB,eAAgB,OAAQ,oBAAqB,OAAQ,UAtB/I1B,QACKC,OAAO,kBACPK,WAAW,+BAAgC6rB,MAsJpD,WACI,YAOA,SAAS+B,GAA6BzpB,EAAMtB,EAAeC,EAAcvB,EAAMwC,EACzC8pB,EAAqB9hB,EAAkBgQ,EAAW9X,GAkCpF,QAASvC,KACLH,EAAKrC,IAAI2B,EAAGI,OACf6sB,GAA6B,GAC7BtjB,GAAqB,GAGtB,QAASujB,GAAuBC,GAC5BjiB,EAAiBkiB,cAAcD,GAAevrB,KAAK,WAClDqrB,GAA6B,GAC1B3pB,EAAKoB,MAAM,aAInB,QAAS2oB,KA8BR,QAAS7nB,GAAgB5H,GAmBxB,MAlBAQ,SAAQC,IAAI,4BAA6BT;AACzCoC,EAAG8iB,UAAYllB,EAAOA,KAEtBoC,EAAGstB,cAAgBzuB,QAAQ6E,KAAK1D,EAAG8iB,WACnC9iB,EAAGutB,uBAAyB,EAC5BvtB,EAAGwtB,kBAAoB,EACvBxtB,EAAGytB,sBAAwB,EAC3BztB,EAAG0tB,yBAA2B,EAC9B1tB,EAAG8iB,UAAUxhB,QAAQ,SAAUsE,GAC9BA,EAAS+nB,mBAAqB/nB,EAAS+nB,mBAAqB/nB,EAAS+nB,mBAAqB,EAC1F/nB,EAASgoB,sBAAwBhoB,EAASgoB,sBAAwBhoB,EAASgoB,sBAAwB,EAEnG5tB,EAAGytB,uBAAyB7nB,EAAS+nB,mBACrC3tB,EAAG0tB,0BAA4B9nB,EAASgoB,sBACxC5tB,EAAGutB,wBAA0B3nB,EAASioB,YACtC7tB,EAAGwtB,mBAAqB5nB,EAASioB,YAAcjoB,EAASkoB,aAAe,IACvE9tB,EAAG+tB,4BAA8BnoB,EAASioB,YAAejoB,EAASioB,YAAcjoB,EAASkoB,aAAe,MAElG9tB,EAAG8iB,UA1CX,IAAK9iB,EAAGuD,WAAWhE,UAAU4L,UAC5B,MAAO3F,IAAiBxF,EAAGuD,WAAWqC,UACvC,IAAI2N,IACGya,qBAAsBhuB,EAAGuD,WAAWhE,UAAU4L,UAAUqI,WAC9DyR,SAAU,EAAG,EAAG,KAEbtgB,GACHohB,KAAM,EACNvI,KAAM,IAEP,OAAOta,GAAkBuV,iBAAiBlF,EAAM5O,GAAQ/C,KACvD,SAAUhE,GACT,GAAIklB,KAQJ,OAPIllB,IAAQA,EAAK8H,SAChB9H,EAAK8H,QAAQpE,QAAQ,SAAUO,GAC1ByB,EAAK+M,QAAQyS,EAAWjhB,EAAM+D,SAASzE,GAAI,MAAQ,GACtD2hB,EAAU1hB,KAAKS,EAAM+D,YAEpBtC,EAAK+M,QAAQyS,EAAW9iB,EAAGuD,WAAWqC,SAASzE,GAAI,MAAQ,GAC9D2hB,EAAU1hB,KAAKpB,EAAGuD,WAAWqC,UACvBJ,EAAgBsd,KA4B1B,QAASmL,GAA2BpL,GAChC,GAAIA,EAAYjd,SAAU,CACtB5F,EAAG8iB,UAAYjkB,QAAQ6E,KAAK1D,EAAGstB,cAC/B,KAAK,GAAI9kB,GAAI,EAAGA,EAAIxI,EAAG8iB,UAAUra,OAAQD,IACrC,GAAIxI,EAAG8iB,UAAUta,GAAGrH,KAAO0hB,EAAYjd,SAASzE,GAAI,CAChDnB,EAAG8iB,UAAUta,GAAGuX,QAAU,MAC1B,YAKR/f,GAAG8iB,UAAYjkB,QAAQ6E,KAAK1D,EAAGstB,cAGnC,IAAIhQ,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,mGACbG,WAAY,8BACZE,aAAc,MACdme,KAAM,KACNE,SACImF,YAAa,WACT,MAAOA,IAEXC,UAAW,WACP,MAAO9iB,GAAG8iB,aAKtBxF,GAAcK,OAAO/b,KAAK,WACzBxD,QAAQC,IAAI,eACZ4uB,GAA6B,IAC3B,cAKP,QAASiB,GAAkBrL,GAClBA,EAAYjd,SAASuK,QAOtB0S,EAAYjd,SAASuK,OAAS7M,EAAKwe,QAAQe,EAAYjd,SAASuK,QAChEjF,EAAiBijB,oBAAoBtL,EAAY1hB,GAAI0hB,EAAYjd,SAASuK,QAAQvO,KAAK,WACnF0B,EAAKoB,MAAM,WACXuoB,GAA6B,GAC7BjtB,EAAG+F,SAAU,GACd,WACCzC,EAAKoB,MAAM,SACXuoB,GAA6B,GAC7BjtB,EAAG+F,SAAU,KAdjBmF,EAAiBkiB,cAAcvK,EAAY1hB,IAAIS,KAAK,WAChDqrB,GAA6B,GAC7BtjB,IACArG,EAAKoB,MAAM,aAe1B,QAASuoB,GAA6BrlB,GAelC,QAASwmB,KACRpuB,EAAGquB,0BAA4B,EAC/BruB,EAAGsuB,qBAAuB,EAC1BtuB,EAAGuuB,8BAAgC,CACjBvuB,GAAGuD,WAAWhE,UAAU4L,SAM1C,OALAnL,GAAGwuB,aAAexuB,EAAGuD,WAAWirB,aAChCxuB,EAAGwuB,aAAaltB,QAAQ,SAAUuhB,GACjC7iB,EAAGquB,2BAA6BxL,EAAYgL,YAC5C7tB,EAAGsuB,sBAAwBzL,EAAY4L,iBAEjCzuB,EAAGwuB,aAxBXpwB,QAAQC,IAAI,gCACL2B,EAAG6E,cACNzB,EAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACtC,SAAUhE,GACNoC,EAAGuD,WAAa3F,EAAOA,KAC1BwwB,IACGhwB,QAAQC,IAAI2B,EAAGwuB,cACfxuB,EAAGoC,YAAc,GAAIJ,OACvBK,UACAC,QAAS+qB,MAoB1B,QAAS1jB,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAG0uB,eAAiB9wB,IAIvB,QAAS+wB,GAAqB/oB,GAC7B,MAAO5F,GAAGuD,YAAcvD,EAAGuD,WAAWqC,UAAYA,EAASuK,SAAWnQ,EAAGuD,WAAWqC,SAASuK,OAG9F,QAASye,KACR,MAAOxrB,GAAOyE,QAAQ7H,GAAG6uB,WAAWjpB,SAzMlC,GAAI5F,GAAKC,IAETD,GAAG2C,WACH3C,EAAGuD,cACHvD,EAAG8iB,aACH9iB,EAAGstB,iBACHttB,EAAGwuB,gBACHxuB,EAAGoE,cACHpE,EAAG4F,YACH5F,EAAG8uB,iBACH9uB,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGutB,uBAAyB,EAC5BvtB,EAAGwtB,kBAAoB,EACvBxtB,EAAG+tB,2BAA6B,EAEhC/tB,EAAGquB,0BAA4B,EAC/BruB,EAAGsuB,qBAAuB,EAC1BtuB,EAAGuuB,8BAAgC,EAEnCvuB,EAAGiuB,2BAA6BA,EAChCjuB,EAAGktB,uBAAyBA,EAC/BltB,EAAG2uB,qBAAuBA,EAC1B3uB,EAAG4uB,wBAA0BA,EAC1B5uB,EAAGkuB,kBAAoBA,EAC1BluB,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAE7BpJ,EAAGI,MAAQ,8CAEXS,IA8KAuC,EAAOiG,IAAI,gBAAiB,SAAUC,EAAOC,GACzCnL,QAAQC,IAAI,wBAAyBkL,GACrCnG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOiG,IAAI,oBAAqB,SAAUC,EAAOC,GAC7CnL,QAAQC,IAAI,4BAA6BkL,GACzCnG,EAAOoG,MAAM,YAAY,KAnMjCujB,EAA6BxsB,SAAW,OAAQ,gBAAiB,eAAgB,OAAQ,oBAAqB,sBAAuB,mBAAoB,YAAa,UAvBtK1B,QACKC,OAAO,kBACPK,WAAW,+BAAgC4tB,MA6NpD,WACC,YAOA,SAASgC,GAA4B/rB,EAAMgsB,EAAI/sB,EAAcvB,EAAMwC,EAAmBI,EAAMF,EAAQsG,GA0BnG,QAAS7I,KACRH,EAAKrC,IAAI2B,EAAGI,OACZ0D,GAAc,GACLoP,GAAa,GACtBnI,GAAkB,GACT4F,IAGV,QAAS7M,GAAc8D,GACtB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACnD,SAAUhE,GAGT,MAFAoC,GAAGuD,WAAa3F,EAAOA,KACvBmN,IACO/K,EAAGuD,aAIP,QAAS2P,GAAatL,GAClB,MAAOxE,GAAOyE,QAAQ7H,GAAGkT,aAAatL,GAAahG,KAC/C,SAAUhE,GAEN,MADAoC,GAAGT,UAAY3B,EAAOA,KACfoC,EAAGT,YAI5B,QAAS0vB,KAEC,GADT7wB,QAAQC,IAAI,SAAU+E,EAAOyE,QAAQ7H,GAAG6uB,aAC1BzrB,EAAOyE,QAAQ7H,GAAG6uB,WAAWK,QAE9B,WADA5rB,GAAKoB,MAAM,QAAS,yDAGxB,KAAKtB,EAAOyE,QAAQ7H,GAAG6uB,WAAWM,aAAenvB,EAAGuD,WAAW6rB,eAAiBpvB,EAAGuD,WAAW6rB,cAAc3mB,OAAS,GAEjH,WADAnF,GAAKoB,MAAM,QAAS,2DAGxB,KAAKtB,EAAOyE,QAAQ7H,GAAG6uB,WAAWhjB,cAE9B,WADAvI,GAAKoB,MAAM,QAAS,uCAGxB,KAAKtB,EAAOyE,QAAQ7H,GAAG6uB,WAAWhY,QAE9B,WADAvT,GAAKoB,MAAM,QAAS,kCAGxB,MAAM1E,EAAGT,UAAU8vB,gBAAkBrvB,EAAGT,UAAU4L,WAAanL,EAAGT,UAAU+vB,qBAAuBtvB,EAAGT,UAAUgwB,wBAA0BvvB,EAAGT,UAAUiwB,yBAA2BxvB,EAAGT,UAAUkwB,oBAAsBzvB,EAAGT,UAAUmwB,aAAe1vB,EAAGT,UAAUowB,2BAA6B3vB,EAAGT,UAAUqwB,sBAAwB5vB,EAAGT,UAAUswB,WAAa7vB,EAAGT,UAAUuwB,yBAA2B9vB,EAAGT,UAAU6T,oBAAsBpT,EAAGT,UAAU8T,2BAE9a,WADA/P,GAAKoB,MAAM,QAAS,2DAGxB,MAAM1E,EAAGuD,WAAWwsB,YAAyD,UAA1C/vB,EAAGuD,WAAWwsB,UAAUC,cAA6BhwB,EAAGuD,WAAW0sB,iBAAiBxnB,OAAS,GAAI,IAEhI,WADAnF,GAAKoB,MAAM,QAAS,mDAGxB,MAAM1E,EAAGuD,WAAWmM,aAAe1P,EAAGuD,WAAWmM,YAAYjH,OAAS,GAElE,WADAnF,GAAKoB,MAAM,QAAS,uCAGxB,KAAKtB,EAAOyE,QAAQ7H,GAAG6uB,WAAWrT,QAE9B,WADAlY,GAAKoB,MAAM,QAAS,kCAGxB,KAAKtB,EAAOyE,QAAQ7H,GAAG6uB,WAAWjiB,SAE9B,WADAtJ,GAAKoB,MAAM,QAAS,kCAIjC,QADAtG,QAAQC,IAAI,SAAU2B,EAAGuD,WAAWK,YAAYC,MACxC7D,EAAGuD,WAAWK,YAAYC,MACjC,IAAK,UACJX,EAAkBgtB,gBAAgBlwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,EACrF,MAED,KAAK,UACJ7sB,EAAKoB,MAAM,QAAS,yCACpB,MAED,KAAK,aACoC,WAApC1E,EAAGuD,WAAWoC,kBACjBzC,EAAkBktB,mBAAmBpwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,GAExFjtB,EAAkBmtB,4BAA4BrwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,EAClG,MAED,KAAK,sBACJjtB,EAAkBotB,6BAA6BtwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,EAClG,MAED,KAAK,0BACL,IAAK,0BACL,IAAK,mBACJjtB,EAAkBqtB,iBAAiBvwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,IAMzF,QAASK,KACR,OAAQxwB,EAAGuD,WAAWK,YAAYC,MACjC,IAAK,UACL,IAAK,UACL,IAAK,aACL,IAAK,sBACL,IAAK,0BACL,IAAK,0BACJX,EAAkButB,iBAAiBzwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,EACtF,MAED,KAAK,mBACJjtB,EAAkBwtB,0BAA0B1wB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAAiB2qB,IASlG,QAAS3qB,KACRpH,QAAQC,IAAI,WACZiF,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG2W,QAAU,KACb7S,IACSV,EAAOyE,QAAQ7H,GAAG2wB,oBAClBvtB,EAAOyE,QAAQ7H,GAAG4wB,+BAC3BlnB,EAAWmnB,WAAW,gBAGvB,QAASV,GAAc1d,GACtBrU,QAAQC,IAAIoU,GAGb,QAAS1H,GAAkBnD,GAC1BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAAK,WACrD5B,EAAG8wB,kBAAoB1tB,EAAOyE,QAAQ7H,GAAG8wB,kBACzC9wB,EAAGgL,cAAgB5H,EAAOyE,QAAQ7H,GAAGgL,gBAIvC,QAAS+lB,KACR,GAAIC,GAAW9tB,EAAkB+tB,gBAAgBjxB,EAAGuD,WAAWK,YAAYzC,GAAInB,EAAGuD,WAAWoC,kBAAmB3F,EAAGuD,WAAWC,gBAAgBiF,OAC9I,OAAOuoB,IAAYA,EAAS5wB,MAAMgQ,MAAM,KAAK3H,OAAS,EAAI,gBAAkB,cAI7E,QAASyoB,KACR,GAAIF,GAAW9tB,EAAkBiuB,oBAAoBnxB,EAAGuD,WAAWK,YAAYzC,GAAInB,EAAGuD,WAAWC,gBAAgBiF,OACjH,OAAOuoB,IAAYA,EAAS5wB,MAAMgQ,MAAM,KAAK3H,OAAS,EAAI,aAAeuoB,EAAS5wB,MAAMgQ,MAAM,KAAK,GAAK,wBAInG,QAASO,KACdvN,EAAOyE,QAAQ7H,GAAG4wB,8BAA6B,GAAMhvB,KAAK,WACzD5B,EAAGoxB,WAAahuB,EAAOyE,QAAQ7H,GAAGqxB,cA9KpC,GAAIrxB,GAAKC,IAETD,GAAG2qB,sBACH3qB,EAAG2N,aACH3N,EAAG6E,aAAe5C,EAAa4C,YAE/B7E,GAAG+nB,WAAY,EACf/nB,EAAGuD,cACHvD,EAAGgD,KAAOA,EACVhD,EAAGivB,OAASA,EACZjvB,EAAGwwB,OAASA,EACZxwB,EAAG8D,cAAgBA,EACnB9D,EAAG+K,kBAAoBA,EACvB/K,EAAG+wB,cAAgBA,EACnB/wB,EAAGkxB,kBAAoBA,EACjBlxB,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBACjDlJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAEhCpJ,EAAGI,MAAQ,8CAEXS,IA6JM6I,EAAWL,IAAI,eAAgB,SAAUC,EAAOC,GAC5CnL,QAAQC,IAAI,wBAAyBkL,GACrCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,mBAAoB,SAAUC,EAAOC,GAChDnL,QAAQC,IAAI,4BAA6BkL,GACzCnG,EAAOoG,MAAM,YAAY,KAvKpCulB,EAA4BxuB,SAAW,OAAQ,KAAM,eAAgB,OAAQ,oBAAqB,OAAQ,SAAU,cAxBpH1B,QACEC,OAAO,kBACPK,WAAW,8BAA+B4vB,MAkM7C,WACI,YAOA,SAASuC,GAA8B5nB,EAAYzH,EAAcvB,EAAM0C,EAAQ4rB,EAAI9rB,EAAmBoc,EAAkBhc,GAwBpH,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZJ,EAAGuxB,kBAAmB,EACtBprB,IACHwD,GAAqB,GAItB,QAAS6nB,KACL,GAAI7sB,IACAuhB,+BAAgClmB,EAAGyxB,qBACnCC,iCAAkC1xB,EAAG2xB,uBACrCC,8BAA+B5xB,EAAG6xB,oBAGtC3uB,GAAkB4uB,0BAA0B9xB,EAAG6E,aAAcF,GAAQ/C,KAAK,SAAUhE,GAChF0F,EAAKoB,MAAM,WACXyB,GAAkB,IACnB,WACCA,GAAkB,KAI1B,QAASA,GAAkByB,GACvB,MAAIxE,GAAOyE,QACAzE,EAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAChD,SAAUhE,GAMN,MALAoC,GAAGuD,WAAa3F,EAChBoC,EAAG2xB,uBAAyB3xB,EAAGuD,WAAWmuB,iCAC1C1xB,EAAG6xB,oBAAsB7xB,EAAGuD,WAAWquB,8BACvC5xB,EAAGyxB,qBAAuBzxB,EAAGuD,WAAW2iB,+BACxC/F,IACOngB,EAAGuD,cAGlB3B,KAAM,SAAUmwB,GACZ,MAAOA,OAKnB,QAAS5R,KAER,MADG/hB,SAAQC,IAAI,gBAAiB2B,EAAGuD,YACE,IAAjCvD,EAAGuD,WAAWK,YAAYzC,GAChBme,EAAiB0S,sBAAsBpwB,KAC1C,SAAUhE,GACNoC,EAAGwlB,UAAY5nB,EAAOA,KACtBoC,EAAG4lB,sBACH,KAAK,GAAIpd,GAAI,EAAGA,EAAIxI,EAAGwlB,UAAU/c,OAAQD,IAAK,CAC1C,GAAIypB,IACAzM,UAAWxlB,EAAGwlB,UAAUhd,GACxB+c,gBAAiB,GACjB5O,QAAS,GACTpT,YACIpC,GAAInB,EAAG6E,cAGf7E,GAAG4lB,oBAAoBxkB,KAAK6wB,GAKhC,MAHAC,KAEAlyB,EAAGuxB,kBAAmB,EACfvxB,EAAG4lB,sBAGiB,IAAjC5lB,EAAGuD,WAAWK,YAAYzC,IAC5BnB,EAAG4lB,uBACH5lB,EAAG4lB,oBAAsB5lB,EAAG4lB,oBAAoB9jB,OAAO9B,EAAGuD,WAAW4uB,sBAErEnyB,EAAGuxB,kBAAmB,EACfvxB,EAAG4lB,qBALZ,OASN,QAASsM,KACLlyB,EAAGoyB,yBAA2B,CAC9B,KAAK,GAAI5pB,GAAI,EAAGA,EAAIxI,EAAGuD,WAAW4uB,qBAAqB1pB,OAAQD,IAC3D,IAAK,GAAI6pB,GAAI,EAAGA,EAAIryB,EAAG4lB,oBAAoBnd,OAAQ4pB,IAC3CryB,EAAGuD,WAAW4uB,qBAAqB3pB,GAAGgd,UAAUrkB,KAChDnB,EAAG4lB,oBAAoByM,GAAG7M,UAAUrkB,KACpCnB,EAAGoyB,2BACHpyB,EAAG4lB,oBAAoByM,GAAG9M,gBAAkBvlB,EAAGuD,WAAW4uB,qBAAqB3pB,GAAG+c,gBAClFvlB,EAAG4lB,oBAAoByM,GAAG1b,QAAU3W,EAAGuD,WAAW4uB,qBAAqB3pB,GAAGmO,SAM1F,QAAS2b,KACLpvB,EAAkBqvB,4BAA4BvyB,EAAG6E,aAAc7E,EAAGuD,WAAWivB,oBAAoB5wB,KAC7F,WACIuE,GAAkB,GAClB7C,EAAKoB,MAAM,YACZ,WACLyB,MAIN,QAASssB,GAAyBC,GAC9B1yB,EAAGuxB,kBAAmB,EAClBmB,GACAt0B,QAAQC,IAAI,+BAAiCq0B,EAEjD,KAAK,GADDC,MACKnqB,EAAI,EAAGA,EAAIxI,EAAG4lB,oBAAoBnd,OAAQD,IAC/CxI,EAAG4lB,oBAAoBpd,GAAGjF,YACtBpC,GAAInB,EAAGuD,WAAWpC,IAEyB,KAA9CnB,EAAG4lB,oBAAoBpd,GAAG+c,iBACvBoN,EAAyBvxB,KAAKpB,EAAG4lB,oBAAoBpd,GAG7DtF,GAAkB0vB,yBAAyB5yB,EAAG6E,aAAc8tB,GAA0B/wB,KAClF,WACI5B,EAAGuxB,kBAAmB,EACtBprB,GAAkB,GAClB7C,EAAKoB,MAAM,YAEf,WACI1E,EAAGuxB,kBAAmB,EACtBprB,MAKf,QAASwD,GAAqB/B,GACnBxE,EAAOyE,SACPzE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAC7C,SAAUhE,GACNoC,EAAGgL,cAAgBpN,IAvJnC,GAAIoC,GAAKC,IACTD,GAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGwlB,aACHxlB,EAAG4lB,uBACH5lB,EAAGI,MAAQ,0CACXJ,EAAGuD,cAEHvD,EAAG2xB,0BACH3xB,EAAG6xB,uBACH7xB,EAAGyxB,wBAEHzxB,EAAGwyB,mBAAoB,GAEvBxyB,EAAGsyB,sBAAwBA,EAC3BtyB,EAAGyyB,yBAA2BA,EACjCzyB,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAC7BpJ,EAAGwxB,4BAA8BA,EAEjC3wB,IAuIH6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,IAGpB,IAAIkpB,IAAW,CACfnpB,GAAWL,IAAI,iBAAkB,SAAUC,EAAOC,GAC1CspB,IAEJz0B,QAAQC,IAAI,0BAA2BkL,EAAQspB,GAC/CA,GAAW,EACPtpB,EACAylB,EAAG8D,KAAKL,EAAyB,wBAAyBH,IAAyBd,MAAgC5vB,KAAK,WACpHuE,IAAoBvE,KAAK,WACrBswB,IACAW,GAAW,EACXzvB,EAAOoG,MAAM,QAAQ,OAI7BpG,EAAOoG,MAAM,QAAQ,MAG7BE,EAAWL,IAAI,qBAAsB,SAAUC,EAAOC,GAClDnL,QAAQC,IAAI,8BAA+BkL,GACvCA,EACAylB,EAAG8D,KAAKL,EAAyB,4BAA6BH,IAAyBd,MAAgC5vB,KAAK,WACxHuE,IAAoBvE,KAAK,WACrBswB,IACA9uB,EAAOoG,MAAM,YAAY,OAIjCpG,EAAOoG,MAAM,YAAY,KAzKrC8nB,EAA8B/wB,SAAW,aAAc,eAAgB,OAAQ,SAAU,KAAM,oBAAqB,mBAAoB,QAzBxI1B,QACKC,OAAO,kBACPK,WAAW,gCAAiCmyB,MAsMrD,WACI,YAOA,SAASyB,GAA0BxvB,EAAYL,EAAmBzC,EAAmB6C,GAWjF,QAASzC,KACLzC,QAAQC,IAAI2B,EAAGI,MAAQ,cAG3B,QAASge,KACL3d,EAAkBO,UAGtB,QAASmd,KACL,MAAKne,GAAG8oB,YAIR5lB,GAAkB8vB,gBAAgBhzB,EAAGuD,WAAWpC,GAAInB,EAAG8oB,SAASlnB,KAAK,SAAUC,GAC3EpB,EAAkBM,SACnB,SAAUyF,GACT/F,EAAkBO,gBANlBsC,GAAKoB,MAAM,QAAS,gCApB5B,GAAI1E,GAAKC,IAETD,GAAGI,MAAQ,8BACXJ,EAAGoe,OAASA,EACZpe,EAAGme,GAAKA,EACRne,EAAGuD,WAAaA,EAChB1C,IAcJkyB,EAA0BxyB,SAAW,aAAc,oBAAqB,oBAAqB,QA1B7F1B,QACKC,OAAO,kBACPK,WAAW,4BAA6B4zB,MAyCjD,WACI,YAOA,SAASE,GAAgChsB,EAAUxG,EAAmBC,EAAMwC,EAAmBjB,EAAcqB,EACpEF,EAAQzD,GAoB7C,QAASkB,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ0D,GAAc,GAGlB,QAASovB,KACL,GAAIlzB,EAAGkqB,WAAWA,WAAW1M,KAAO,IAEhC,WADAla,GAAKoB,MAAM,QAAS,yCAA0C,yCAIlE,IADA1E,EAAG+F,SAAU,EACT/F,EAAGkqB,WAAY,CACflqB,EAAGgI,YAAchI,EAAGgI,aAAe,IAEnC,IAAIrD,IACAd,KAAM7D,EAAGkqB,WAAWA,WAAWrmB,KAC/BmE,YAAahI,EAAGgI,YAEpB9E,GAAkBiwB,8BAA8BnzB,EAAGuD,WAAWpC,GAAInB,EAAGkqB,WAAYvlB,GAAQ/C,KAAK,WACtFkC,GAAc,GACd9D,EAAGkqB,cACHlqB,EAAGgI,YAAc,GACjB1E,EAAKoB,MAAM,YAEf,SAAU0uB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAEpEpB,EAAKoB,MAAM,QAAS,oBAAqB,2BAM7D,QAAS2uB,GAAiBjc,EAAMjT,GAC5BxE,EAAU2H,WAAW1F,KAAK,SAAUoiB,GAC3BA,EAAYxiB,WAAa4V,EAAKkc,eAAe9xB,UAAc7B,EAAUykB,SAAS,sBAAwB,EAAE,EAAE,IAAImP,SAASvzB,EAAGuD,WAAWK,YAAYzC,IAClJ8F,IAAWrF,KAAK,SAAUwxB,GACtB,GAAIzuB,IACA6uB,aAAcxzB,EAAGyzB,YAAYtvB,GAAOhD,GAGxC+B,GAAkBwwB,+BAA+B1zB,EAAGuD,WAAWpC,GAAIwD,GAAQ/C,KAAK,WACxE5B,EAAGyzB,YAAY1iB,OAAO5M,EAAO,GAC7Bb,EAAKoB,MAAM,YAEf,WACIpB,EAAKoB,MAAM,QAAS,oBAAqB,8BAIrDpB,EAAKoB,MAAM,QAAS,mEAAoE,4CAKpG,QAASivB,KACL3zB,EAAGkqB,cACHlqB,EAAG4zB,qBAAsB,EAG7B,QAAS9vB,GAAc8D,GAQnB,QAASisB,GAAgBj2B,GAKrB,MAJAoC,GAAGuD,WAAa3F,EAAOA,KACvBoC,EAAGyzB,YAAczzB,EAAGuD,WAAWkwB,YAC/BzzB,EAAG+F,SAAU,EACb+tB,IACO9zB,EAAGuD,WAGd,QAASwwB,KACL/zB,EAAG+F,SAAU,EAfjB,MADA/F,GAAG+F,SAAU,EACT3C,EAAOyE,QAAQ7H,GACRoD,EAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAAKiyB,EAAiBE,OAE1E7wB,GAAkBiD,kBAAkBnG,EAAG6E,cAAcjD,KAAKiyB,EAAiBE,GAgBnF,QAASD,KACLn0B,EAAU2H,WAAW1F,KAAK,SAAUoiB,GAChChkB,EAAGyzB,YAAYnyB,QAAQ,SAAU4oB,GAC7BA,EAAW4J,UAAa9P,EAAYxiB,WAAa0oB,EAAWoJ,eAAe9xB,UAAc7B,EAAUykB,SAAS,sBAAwB,EAAE,EAAE,IAAImP,SAASvzB,EAAGuD,WAAWK,YAAYzC,QAK3L,QAASJ,KACLN,EAAkBO,UAhHtB,GAAIhB,GAAKC,IACTD,GAAGuD,cACHvD,EAAG6E,aAAe5C,EAAa4C,cAAgBA,aAC/C7E,EAAG2T,eACH3T,EAAGI,MAAQ,oCACXJ,EAAGoE,cACHpE,EAAGyzB,eACHzzB,EAAGkqB,cACHlqB,EAAGmC,UAAY1B,EAEfT,EAAG2zB,oBAAsBA,EACzB3zB,EAAGqzB,iBAAmBA,EACtBrzB,EAAGkzB,WAAaA,EAChBlzB,EAAGe,MAAQA,EAEXF,IAKJoyB,EAAgC1yB,SAAW,WAAY,oBAAqB,OAAQ,oBAAqB,eAAgB,OAAQ,SAAU,aA3B3I1B,QACKC,OAAO,OACPK,WAAW,kCAAmC8zB,MA4HvD,WACI,YAOA,SAASe,GAA8BtqB,EAAYzC,EAAUhF,EAAcvB,EAAMsB,EAAewK,EAAiBpJ,EAC1EF,EAAmBgI,EAAkB+oB,EAAsB3wB,GAwC9F,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ8zB,IACHvqB,GAAqB,GAGtB,QAASxD,KACL,MAAO/C,GAAOyE,QAAQ7H,GAAG8D,cAAcgJ,GAAWlL,KAC9C,SAAUhE,GAcN,MAbAoC,GAAGuD,WAAa3F,EAChBkP,GAAY,EACZ9M,EAAGm0B,WAAav2B,EAAOA,EAAKw2B,wBAC5Bp0B,EAAGq0B,eAAiB,EACpBr0B,EAAGs0B,iBAAmB,EACtBt0B,EAAGu0B,kBAAoB,EACvBv0B,EAAGm0B,WAAW7yB,QAAQ,SAAU6tB,GAC5BnvB,EAAGq0B,gBAAkBlF,EAAUqF,YAC/Bx0B,EAAGs0B,kBAAoBnF,EAAUqF,YAAcrF,EAAUsF,cAAcC,gBAAgB,IACvF10B,EAAGu0B,mBAAqBpF,EAAUwF,iBAEzCC,IACArnB,IACUvN,EAAGm0B,aAIzB,QAASS,KAC2B50B,EAAGuD,WAAWhE,WAAaS,EAAGuD,WAAWhE,UAAUs1B,+BAAkC70B,EAAGuD,WAAWhE,UAAUs1B,+BAAiC,GAC3K70B,GAAG6tB,YAAc7tB,EAAGuD,WAAWuxB,wBAC/B90B,EAAG6tB,YAAcljB,KAAKE,MAAM7K,EAAG6tB,aACM,IAAvC7tB,EAAGuD,WAAW6rB,cAAc3mB,SAC/BzI,EAAG+0B,UAAW,GACf/0B,EAAGovB,cAAgBpvB,EAAGuD,WAAW6rB,cAI/B,QAAS8E,KACL,MAAOD,GAAqBC,uBAAuBtyB,KAC/C,SAAUhE,GAEN,MADAoC,GAAGg1B,eAAiBp3B,EAAOA,KACpBoC,EAAGg1B,iBAItB,QAASC,GAAOC,GACZ,GAAIC,GAAoBxqB,KAAKyqB,IAAIF,EACjC,OAAIA,GAAS,EACFC,EAAoB,IACb,EAATD,EACEC,EAAoB,IACxB,EAEX,QAAS5nB,KACL,GAAI5I,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgB6oB,qBAAqB1wB,GAAQ/C,KAChD,SAAUhE,GAgFN,MA/EAQ,SAAQC,IAAI,uBAAwBT,GACpCoC,EAAG2N,UAAY/P,EAAOA,KACtBoC,EAAGs1B,6BAA+B,EAErCt1B,EAAGovB,cAAc9tB,QAAQ,SAAU6tB,GAElC,IAAK,GADDrhB,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAG2N,UAAUlF,OAAQD,IAC/B,GAAIxI,EAAG2N,UAAUnF,GAAGisB,cAActzB,KAAOguB,EAAUsF,cAActzB,GAAI,CACjE2M,GAAW,CACX,OAIVA,IACA1P,QAAQC,IAAI,yBAA0B8wB,GACzCnvB,EAAG2N,UAAUvM,MACZqzB,cAAetF,EAAUsF,cACzBc,UAAWpG,EAAUqG,MACrBC,aAActG,EACd5vB,WACC4B,GAAInB,EAAGuD,WAAWqC,SAASsc,aAE5BwT,mBAAoB,KACpBC,wBAAyB,OAKzB31B,EAAG2N,UAAUrM,QAAQ,SAAUmW,GAC9BA,EAASme,YAAc,WAChB,GAAIC,GAAiBpe,EAASie,mBAAmBje,EAASke,uBAGhE,IAFMle,EAASoe,eAAiBZ,EAAOY,GAEnC51B,KAAK01B,0BAA4B11B,KAAKs1B,UACzC,MAAO,UAER,QAAQt1B,KAAKs1B,WACZ,IAAK,UAEJ,IAAKt1B,KAAKy1B,mBACT,KACD,IAAIz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBACxB,MAAO,UAEvB,MACD,KAAK,UACJ,IAAKz1B,KAAKy1B,oBAAsBz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBACpD,MAAO,OAEvB,MACD,KAAK,QACJ,IAAKz1B,KAAKy1B,oBAAsBz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBACpD,MAAO,OAEvB,IAAIz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBACxB,MAAO,UAEvB,MACD,KAAK,OACJ,GAAI11B,EAAG6tB,YAAc7tB,EAAGs1B,6BACvB,MAAO,OAER,MACD,SACC,MAAO,MAET,MAAO,OAELt1B,EAAGs1B,8BAAgC7d,EAASke,0BAEnD31B,EAAG81B,gBAAkBb,EAAOj1B,EAAG6tB,YAAc7tB,EAAGs1B,8BAChDt1B,EAAG2N,UAAUrM,QAAQ,SAAUmW,GAEH,SAAvBA,EAAS8d,YACH9d,EAASie,mBAAsB11B,EAAG6tB,aAAe7tB,EAAGs1B,6BAA+B7d,EAASke,yBAA2B,EAAI31B,EAAG6tB,aAAe7tB,EAAGs1B,6BAA+B7d,EAASke,yBAA2B,EACnNle,EAASoe,eAAiB71B,EAAG81B,mBAGxC91B,EAAG+F,SAAU,EACH/F,EAAG2N,WAEf,WACD3N,EAAG+F,SAAU,IAInB,QAASgwB,KACJ/1B,EAAG+F,UAEP/F,EAAG+F,SAAU,EACV7C,EAAkB8yB,yBAAyBh2B,EAAG6E,aAAc7E,EAAGmvB,WAAWvtB,KACtE,WACI0B,EAAKoB,MAAM,WACX1E,EAAGmvB,aACHnvB,EAAGoC,YAAY0I,SACfyC,KACD,WACLvN,EAAG+F,SAAU,KAInB,QAASkwB,GAAgB9G,EAAWhrB,GAChC,GAAIgrB,EAAW,CACd,GAAInvB,EAAG+F,QACN,MACD/F,GAAG+F,SAAU,CACV,IAAIpB,IAAUuxB,sBAAuB/G,EAAUhuB,GAC/CguB,GAAU5rB,YACNpC,GAAInB,EAAGuD,WAAWpC,IAEtB+B,EAAkBizB,4BAA4Bn2B,EAAG6E,aAAcsqB,EAAWxqB,GAAQ/C,KAC9E,WACI0B,EAAKoB,MAAM,WACXR,EAAWC,IACZ,WACLnE,EAAG+F,SAAU,KAKvB,QAASqwB,GAA8Bj1B,GACnC8F,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACP,GAAInB,EAAG+F,QACN,MACD/F,GAAG+F,SAAU,CACV,IAAIpB,IAAUuxB,sBAAuB/0B,EACrC+B,GAAkBkzB,8BAA8Bp2B,EAAG6E,aAAcF,GAAQ/C,KACrE,WACI0B,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,cAOnC,QAASurB,KACJr2B,EAAGmvB,UAAUsF,eAAiBz0B,EAAGmvB,UAAUsF,cAAcC,iBAAmB10B,EAAGmvB,UAAUqF,cACtFx0B,EAAGmvB,UAAUmH,cAAgBt2B,EAAGmvB,UAAUsF,cAAcC,gBAAkB10B,EAAGmvB,UAAUqF,YAAc,KAI7G,QAAStwB,GAAWC,GAChBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGoC,YAAY0I,SACfyC,IAGP,QAAS5D,GAAqB/B,GAC7BxE,EAAOyE,QAAQ7H,GAAG+K,kBAAkBnD,GAAahG,KAChD,SAAUhE,GACToC,EAAGgL,cAAgBpN,IAItB,QAAS+R,GAAWrG,EAAOoT,EAAWlB,EAASrX,GACxB,KAAlBmF,EAAMuG,SAAmBvG,EAAMwG,WAC9B4M,EAAWuZ,EAAgBvZ,EAAWlB,EAASrX,GAC9C4xB,KA9PJ,GAAI/1B,GAAKC,IAETD,GAAGuD,cACHvD,EAAGm0B,cACHn0B,EAAGmvB,aACHnvB,EAAG2N,aACH3N,EAAGg1B,kBACHh1B,EAAGoE,aACH,IAAI0I,IAAY,CAChB9M,GAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS6D,IAEbnG,EAAG+d,eAAgB,EACnB/d,EAAG+0B,UAAW,EACd/0B,EAAGI,MAAQ,8CACXJ,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAG6tB,YAAc,EACjB7tB,EAAG81B,gBAAkB,EAErB91B,EAAGq0B,eAAiB,EACpBr0B,EAAGs0B,iBAAmB,EACtBt0B,EAAGu0B,kBAAoB,EAEvBv0B,EAAGs1B,6BAA+B,EAElCt1B,EAAG+1B,aAAeA,EAClB/1B,EAAGi2B,gBAAkBA,EACrBj2B,EAAGo2B,8BAAgCA,EACnCp2B,EAAGq2B,kBAAoBA,EACvBr2B,EAAGkE,WAAaA,EACnBlE,EAAG2P,WAAaA,EAChB3P,EAAGkJ,oBAAsB9F,EAAOyE,QAAQ7H,GAAGkJ,oBAC3ClJ,EAAGmJ,KAAO/F,EAAOyE,QAAQ7H,GAAGmJ,KAC5BnJ,EAAGoJ,SAAWhG,EAAOyE,QAAQ7H,GAAGoJ,SAChCpJ,EAAG+F,SAAU,EACVlF,IA8NH6I,EAAWL,IAAI,eAAgB,WAC1BjG,EAAOyE,SACV8B,GAAqB,KAEpBD,EAAWL,IAAI,iBAAkB,SAAUC,EAAOC,GAC9CnL,QAAQC,IAAI,0BAA2BkL,GACvCnG,EAAOoG,MAAM,QAAQ,KAGzBE,EAAWL,IAAI,qBAAsB,SAAUC,EAAOC,GAClDnL,QAAQC,IAAI,8BAA+BkL,GAC3CnG,EAAOoG,MAAM,YAAY,KAxPjCwqB,EAA8BzzB,SAAW,aAAc,WAAY,eAAgB,OAAQ,gBAAiB,kBAAmB,SAAU,oBAAqB,mBAAoB,uBAAwB,QA5B1M1B,QACKC,OAAO,kBACPK,WAAW,gCAAiC60B,MAuRrD,WACI,YAaA,SAASuC,KACL,OACIv3B,YAAa,uCACbtB,SAAU,IACVuB,SAAS,EACTtB,OACI64B,MAAS,IACTC,SAAY,IACZvH,QAAW,IACXwH,KAAQ,IACRC,MAAS,IACT9yB,KAAQ,IACRsM,OAAU,IACV/P,MAAS,MAlBrBvB,QACKC,OAAO,OACPS,UAAU,aAAcg3B,MAsBjC,WACI,YAEA13B,SACKC,OAAO,uBAYhB,WACI,YAOA,SAAS83B,GAAkClV,EAAQza,EAAUhF,EAAcmB,EAAQ8H,EAAkBuB,EAAyBnJ,GAmB1H,QAASzC,KACLzC,QAAQC,IAAI,4CACfw4B,IAAuBj1B,KAAK,WACvBK,EAAa4C,cAChBiyB,GAAgB,KAGf1zB,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI9B,QAAS6rB,KACF,MAAOpqB,GAAwBC,0BAA0B9K,KACrD,SAAUhE,GAEN,MADAoC,GAAGyN,kBAAoB7P,EAAOA,KACvBoC,EAAGyN,oBAIzB,QAASqpB,GAAgBlvB,GACxB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAC1C,SAAUhE,GAgBT,MAfAoC,GAAG4N,mBAAqBhQ,EAAOA,EAAK8R,eACpC1P,EAAG4N,mBAAmBtM,QAAQ,SAAUsX,GACvCA,EAAEpL,iBAAmBxN,EAAGyN,kBAAkBspB,OAAO,SAAUC,GAC1D,MAAOA,GAAG71B,KAAOyX,EAAEpL,iBAAiBrM,KAClC,KAEJnB,EAAGi3B,uBAAyBp4B,QAAQ6E,KAAK1D,EAAG4N,oBACzC5N,EAAGk3B,mBAAqB,EACxBl3B,EAAGm3B,wBAA0B,EAC7Bn3B,EAAG8O,oBAAsB,EACzB9O,EAAG4N,mBAAmBtM,QAAQ,SAAU81B,GACpCp3B,EAAGk3B,oBAAsBE,EAAenpB,gBACxCjO,EAAGm3B,yBAA2BC,EAAejpB,qBAC7CnO,EAAG8O,qBAAuBsoB,EAAe9oB,mBAEzCtO,EAAG4N,qBAInB,QAASypB,GAAwBl2B,GAS7B,QAASqE,KACLlC,EAAKoB,MAAM,WACdoyB,GAAgB,GAVjB7vB,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACJ,GAAIwD,IACA2yB,aAAcn2B,EAErB+J,GAAiBqsB,2BAA2Bt1B,EAAa4C,aAAcF,GAAQ/C,KAAK4D,MAShG,QAASgyB,GAAqBC,GAOvB,QAASjyB,KACLlC,EAAKoB,MAAM,WACX1E,EAAG03B,qBACNZ,GAAgB,GATvB,GAAKW,EAKL,MAHAz3B,GAAG03B,kBAAkBn0B,cAGd2H,EAAiBysB,sBAAsB11B,EAAa4C,aAAc7E,EAAG03B,mBAAmB91B,KAAK4D,GAQrG,QAASoyB,GAAwBF,EAAmBvzB,GACnD,GAAI0zB,IAAU,CACdh5B,SAAQyC,QAAQo2B,EAAmB,SAAUI,GAClCjf,SAANif,IACHD,GAAU,KAERA,IAEJz5B,QAAQC,IAAIq5B,GACZxsB,EAAiB6sB,yBAAyB91B,EAAa4C,aAAc6yB,GAAmB91B,KAAK,WAC5F0B,EAAKoB,MAAM,WACXgzB,EAAkBpvB,SAAU,EAC/BwuB,GAAgB,GACb92B,EAAGi3B,uBAAuB9yB,GAAStF,QAAQ6E,KAAK1D,EAAG4N,mBAAmBzJ,IAC7DnE,EAAGi3B,uBAAuB9yB,GAAStF,QAAQ6E,KAAK1D,EAAG4N,mBAAmBzJ,IACtEnE,EAAGk3B,mBAAqB,EACxBl3B,EAAGm3B,wBAA0B,EAC7Bn3B,EAAG8O,oBAAsB,EACzB9O,EAAG4N,mBAAmBtM,QAAQ,SAAU81B,GACpCp3B,EAAGk3B,oBAAsBE,EAAenpB,gBACxCjO,EAAGm3B,yBAA2BC,EAAejpB,qBAC7CnO,EAAG8O,qBAAuBsoB,EAAe9oB,oBAEpD,WACF0pB,EAAS7zB,GACA2yB,GAAgB,GACzBxzB,EAAKoB,MAAM,YAIb,QAASszB,GAAS7zB,GACjBnE,EAAG4N,mBAAmBzJ,GAAStF,QAAQ6E,KAAK1D,EAAGi3B,uBAAuB9yB,IAGvE,QAASmE,KACR,IAAK,GAAIE,GAAI,EAAGA,EAAIxI,EAAG4N,mBAAmBnF,OAAQD,IACjD,GAAIxI,EAAG4N,mBAAmBpF,GAAGF,QAC5B,OAAO,EAIV,QAASqH,GAAWrG,EAAOmuB,EAASrgB,EAAMjT,GACnB,KAAlBmF,EAAMuG,UACLuH,EACHwgB,EAAwBxgB,EAAMjT,GAE9BqzB,EAAqBC,IAvIrB,GAAIz3B,GAAKC,IACTD,GAAG4N,sBACH5N,EAAG03B,qBACH13B,EAAGyN,qBACHzN,EAAGk3B,mBAAqB,EACxBl3B,EAAGm3B,wBAA0B,EAC7Bn3B,EAAG8O,oBAAsB,EAEzB9O,EAAGq3B,wBAA0BA,EAC7Br3B,EAAGw3B,qBAAuBA,EAC7Bx3B,EAAG43B,wBAA0BA,EAC7B53B,EAAGg4B,SAAWA,EACdh4B,EAAGsI,QAAUA,EACbtI,EAAG2P,WAAaA,EACb9O,IA6HAuC,EAAOiG,IAAI,sBAAuB,WAC9BjL,QAAQC,IAAI,gCACZ+E,EAAOoG,MAAM,QAAQ,KAEzBpG,EAAOiG,IAAI,0BAA2B,WAClCjL,QAAQC,IAAI,oCACZ+E,EAAOoG,MAAM,YAAY,KA1HjCotB,EAAkCr2B,SAAW,SAAU,WAAY,eAAgB,SAAU,mBAAoB,0BAA2B,QA7B5I1B,QACKC,OAAO,iBACPK,WAAW,oCAAqCy3B,MA0JzD,WACI,YAOA,SAASqB,GAA2BvW,EAAQzf,EAAcvB,EAAM0C,EAAQ8H,EAAkB5H,EAAMD,EAAa+N,EACzEnO,EAASi1B,EAA+BC,EAA6BC,EAAc/mB,EAAUC,GA0B7H,QAASzQ,KACLH,EAAKrC,IAAI2B,EAAGI,OAEZi4B,IACAC,IACA/mB,IACCvR,EAAG6E,cACH0zB,GAAiB,GAElBn1B,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI9B,QAASwtB,GAActpB,GAEtB,MAAIA,GAAKC,cACRnP,EAAG2S,aAAe,QAGf3S,EAAG6E,aACG4zB,IAEAC,KAIR,QAASA,KAELxtB,EAAiBwtB,gBAAgB14B,EAAGT,WAAWqC,KAC3C,SAAUhE,GACN0F,EAAKoB,MAAM,WACXgd,EAAOO,GAAG,0BAA0BC,YAAYtkB,EAAKuD,OAIjE,QAASs3B,KAIL,MAHHz4B,GAAG+F,SAAU,EAEV3H,QAAQC,IAAI+E,EAAOu1B,qBAAqBxpB,UACpC/L,EAAOu1B,qBAAqBxpB,UAC5B7L,EAAKoB,MAAM,QAAS,mCACpB1E,EAAG+F,SAAU,GAETnE,KAAM,SAAUwQ,EAAIC,GAChB,MAAkB,kBAAPA,GACAA,IADX,UAKLnH,EAAiButB,gBAAgBz4B,EAAG6E,aAAc7E,EAAGT,WAAWqC,KACnE,WACI0B,EAAKoB,MAAM,WACd1E,EAAG2S,aAAe,EAClB4lB,GAAiB,IACf,WACCj1B,EAAKoB,MAAM,SACX1E,EAAG+F,SAAU,IAIzB,QAASwL,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG44B,iBAAmBh7B,EAAOA,KACtBoC,EAAG44B,mBAKtB,QAASN,KACL,MAAOH,GAA4BU,8BAA8Bj3B,KAC7D,SAAUhE,GAEN,MADAoC,GAAG84B,gBAAkBl7B,EAAOA,KACrBoC,EAAG84B,kBAKtB,QAAST,KACL,MAAOH,GAA8Ba,gCAAgCn3B,KACjE,SAAUhE,GAEN,MADAoC,GAAGg5B,eAAiBp7B,EAAOA,KACpBoC,EAAGg5B,iBAMzB,QAAST,GAAiB3wB,GACzB,MAAOxE,GAAOyE,QAAQ7H,GAAGkT,aAAatL,GAAahG,KACzC,SAAUhE,GAON,MANHQ,SAAQC,IAAI,oCAAqCT,GACjDoC,EAAGT,UAAY3B,EAAOA,KAItBoC,EAAG+F,SAAU,EACH/F,EAAGT,YAYtB,QAAS+T,GAAiBpU,GAEtB,IAAKA,GAAmB,KAAVA,EACV,QACJ,IAAIqU,IACArU,MAAOA,EAAMsU,WAEjBlC,GAAgBmC,gBAAgBF,MAAU3R,KAAK,SAAUhE,GACrDoC,EAAG0T,aAAe9V,EAAK8H,UA/I/B,GAAI1F,GAAKC,IACAgD,GAAQ,QACjBjD,GAAGT,aACHS,EAAGg5B,kBACHh5B,EAAG84B,mBACH94B,EAAGi5B,eACHj5B,EAAG44B,oBACH54B,EAAG4T,UAAYtQ,EAAKuQ,SAAS,qBAChC7T,EAAGI,MAAQ,8BACRJ,EAAGo4B,aAAeA,EACrBp4B,EAAG2S,aAAe,EAClB3S,EAAG6E,aAAe5C,EAAa4C,aAC5B7E,EAAGqR,SAAWA,EAEdxQ,IACAb,EAAGw4B,cAAgBA,EACnBx4B,EAAG04B,gBAAkBA,EACxB14B,EAAGmS,eAAgB,EAChBnS,EAAG2S,aAAe,EAClB3S,EAAG0T,gBACH1T,EAAGsT,iBAAmBA,EACzBtT,EAAG+F,SAAU,EA8HV3C,EAAOiG,IAAI,eAAgB,SAAUC,EAAOC,GACxCnL,QAAQC,IAAI,wBAAyBkL,GACjCA,EACAkvB,IAAkB72B,KAAK,WACnBwB,EAAOoG,MAAM,QAAQ,IACtB,WACCpG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,QAAQ,KAI7BpG,EAAOiG,IAAI,mBAAoB,SAAUC,EAAOC,GAC5CnL,QAAQC,IAAI,4BAA6BkL,GACrCA,EACAkvB,IAAkB72B,KAAK,WACnBwB,EAAOoG,MAAM,YAAY,IAC1B,WACCpG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,YAAY,KAlJrCyuB,EAA2B13B,SAAW,SAAU,eAAgB,OAAQ,SAAU,mBAAoB,OAAQ,cAAe,yBAA0B,UAAW,gCAAiC,8BAA+B,eAAgB,WAAY,mBA9B9P1B,QACKC,OAAO,iBACPK,WAAW,6BAA8B84B,MA0LlD,WACI,YAOA,SAASiB,GAA2BjyB,EAAUhF,EAAcvB,EAAM0C,EAAQ8H,EAAkB5H,GAaxF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZhC,QAAQC,IAAI,oCACX4D,EAAa4C,cAChBs0B,GAAY,GAEV/1B,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI9B,QAASmuB,GAAYvxB,GACpB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAC1C,SAAUhE,GAGN,MAFHoC,GAAGsW,YAAc1Y,EAAOA,EAAK0Y,eAC1BlY,QAAQC,IAAI,oBAAqB2B,EAAGsW,aAC7BtW,EAAGT,YAItB,QAAS65B,GAAiBj4B,GACtB8F,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACJ,GAAIwD,IAAUqS,aAAc7V,EAC/B+J,GAAiBmuB,8BAA8Bp3B,EAAa4C,aAAcF,GAAQ/C,KAC3E,WACI0B,EAAKoB,MAAM,WACdy0B,GAAY,QAM7B,QAASG,KACR,MAAOpuB,GAAiBquB,yBAAyBt3B,EAAa4C,aAAc7E,EAAGuW,YAAY3U,KACpF,WACI0B,EAAKoB,MAAM,WACX1E,EAAGuW,cACN4iB,GAAY,KAIxB,QAASxpB,GAAWrG,GACG,KAAlBA,EAAMuG,SACTypB,IAxDC,GAAIt5B,GAAKC,IACTD,GAAGsW,eACHtW,EAAGuW,cACHvW,EAAGT,aAEHS,EAAGo5B,iBAAmBA,EACtBp5B,EAAGs5B,cAAgBA,EACtBt5B,EAAG2P,WAAaA,EACb9O,IAoDAuC,EAAOiG,IAAI,eAAgB,WACvBjL,QAAQC,IAAI,yBACZ+E,EAAOoG,MAAM,QAAQ,KAEzBpG,EAAOiG,IAAI,mBAAoB,WAC3BjL,QAAQC,IAAI,6BACZ+E,EAAOoG,MAAM,YAAY,KAzCjC0vB,EAA2B34B,SAAW,WAAY,eAAgB,OAAQ,SAAU,mBAAoB,QA/BxG1B,QACKC,OAAO,iBACPK,WAAW,6BAA8B+5B,MA8ElD,WACI,YAOA,SAASM,GAAgCvyB,EAAUhF,EAAcvB,EAAMwK,EAAkB5H,EAAMF,GAc3F,QAASvC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZhC,QAAQC,IAAI,oCACX4D,EAAa4C,cAChB40B,GAAiB,GAEfr2B,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI9B,QAASyuB,GAAiB7xB,GACzB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAC1C,SAAUhE,GAGT,MAFAoC,GAAG05B,sBAAwB97B,EAAOA,EAAK0N,iBACpCtL,EAAG25B,aAAe96B,QAAQ6E,KAAK1D,EAAG05B,uBAC9B15B,EAAG05B,wBAInB,QAASE,GAA2Bz4B,GAChC8F,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACJ,GAAIwD,IAAUk1B,eAAgB14B,EACjC+J,GAAiB4uB,6BAA6B73B,EAAa4C,aAAcF,GAAQ/C,KAC1E,WACI0B,EAAKoB,MAAM,WACd+0B,GAAiB,QAOlC,QAASM,KACR,MAAO7uB,GAAiB8uB,wBAAwB/3B,EAAa4C,aAAc7E,EAAGi6B,sBAAsBr4B,KAC7F,WACI0B,EAAKoB,MAAM,WACX1E,EAAGi6B,wBACNR,GAAiB,KAK1B,QAASS,GAA2B3E,GAChC,GAAI5wB,IACAk1B,eAAgBtE,EAAUp0B,GAE9B,OAAO+J,GAAiBivB,2BAA2Bl4B,EAAa4C,aAAc0wB,EAAW5wB,GAAQ/C,KAC7F,WACI0B,EAAKoB,MAAM,WACX+0B,GAAiB,KAK7B,QAASlxB,KACLvI,EAAG05B,sBAAwB76B,QAAQ6E,KAAK1D,EAAG25B,cAG/C,QAAShqB,GAAWrG,EAAOisB,GACvBn3B,QAAQC,IAAIiL,EAAMuG,SACF,KAAlBvG,EAAMuG,QACI0lB,EACA2E,EAA2B3E,GAE3BwE,IACqB,KAAlBzwB,EAAMuG,SACT0lB,GACAhtB,IAlFZ,GAAIvI,GAAKC,IACTD,GAAG05B,yBACH15B,EAAGi6B,wBAEHj6B,EAAG45B,2BAA6BA,EAChC55B,EAAG+5B,wBAA0BA,EAC7B/5B,EAAGk6B,2BAA6BA,EAChCl6B,EAAGuI,aAAeA,EACrBvI,EAAG2P,WAAaA,EACb9O,IA8EAuC,EAAOiG,IAAI,6BAA8B,WACrCjL,QAAQC,IAAI,uCACZ+E,EAAOoG,MAAM,QAAQ,KAEzBpG,EAAOiG,IAAI,iCAAkC,WACzCjL,QAAQC,IAAI,2CACZ+E,EAAOoG,MAAM,YAAY,KAnEjCgwB,EAAgCj5B,SAAW,WAAY,eAAgB,OAAQ,mBAAoB,OAAQ,UAhC3G1B,QACKC,OAAO,iBACPK,WAAW,kCAAmCq6B,MAuGvD,WACI,YAOA,SAASY,GAAgCnzB,EAAUjF,EAAeC,EAAcvB,EAAM0C,EAAQ8H,EACrD8hB,EAAqB1pB,EAAM+2B,GAsChE,QAASx5B,KACLH,EAAKrC,IAAI2B,EAAGI,OACZk6B,IACHx2B,GAAc,GACXV,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI3B,QAASuvB,KACsB,IAAxBv6B,EAAG8iB,UAAUra,QACZzI,EAAG4F,SAAS40B,kBAAmB,EAC/Bx6B,EAAG4F,SAAS60B,qBAAsB,GAE7Bz6B,EAAG8iB,UAAUra,QAAU,GAAuD,IAAlDzI,EAAG8iB,UAAU9iB,EAAG8iB,UAAUra,OAAS,GAAG2U,KAAKjc,KAAqC,IAAxBnB,EAAG4F,SAASwX,KAAKjc,IAAoC,KAAxBnB,EAAG4F,SAASwX,KAAKjc,KACvInB,EAAG4F,SAAS40B,kBAAmB,EAC/Bx6B,EAAG4F,SAAS60B,qBAAsB,EAClCz6B,EAAG4F,SAASioB,YAAc7tB,EAAG8iB,UAAU9iB,EAAG8iB,UAAUra,OAAS,GAAGolB,YAAc7tB,EAAG8iB,UAAU9iB,EAAG8iB,UAAUra,OAAS,GAAGgmB,iBAGpHzuB,EAAG4F,SAAS40B,kBAAmB,EAC/Bx6B,EAAG4F,SAAS60B,qBAAsB,GAI1C,QAASH,KACLtN,EAAoB0N,sBAAsB94B,KACtC,SAAUhE,GAEN,MADAoC,GAAG8uB,cAAgBlxB,EAAOA,KACnBoC,EAAG8uB,gBAIzB,QAAShrB,GAAc8D,GACtB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAC1C,SAAUhE,GAuBN,MAtBAoC,GAAG8iB,UAAYllB,EAAOA,EAAK4wB,gBAE3BxuB,EAAG4F,SAASkoB,aAAe,EACC,IAAxB9tB,EAAG8iB,UAAUra,QACbzI,EAAG4F,SAAS40B,kBAAmB,EAC/Bx6B,EAAG4F,SAAS60B,qBAAsB,IAGlCz6B,EAAG4F,SAAS40B,kBAAmB,EAC/Bx6B,EAAG4F,SAAS60B,qBAAsB,GAEtCz6B,EAAGutB,uBAAyB,EAC5BvtB,EAAG26B,oBAAsB,EACzB36B,EAAGwtB,kBAAoB,EACvBxtB,EAAG+tB,2BAA6B,EAChC/tB,EAAG8iB,UAAUxhB,QAAQ,SAAUsE,GAC3B5F,EAAGutB,wBAA0B3nB,EAASioB,YACtC7tB,EAAG26B,qBAAuB/0B,EAASg1B,iBACnC56B,EAAGwtB,mBAAqB5nB,EAAS6oB,eACjCzuB,EAAG+tB,4BAA8BnoB,EAASioB,YAAcjoB,EAAS6oB,iBAErEoM,IACO76B,EAAG8iB,YAItB,QAAS+X,KACL76B,EAAG86B,UAAY,EACf96B,EAAG8iB,UAAUxhB,QAAQ,SAAUsE,GACvBA,EAAS60B,sBACTz6B,EAAG86B,WAAal1B,EAAS6oB,gBACzB7oB,EAAS40B,mBACTx6B,EAAG86B,WAAal1B,EAASioB,eAIrC,QAASkN,GAAmB55B,GACxB+J,EAAiB8vB,yBAAyB75B,GAAIS,KAC1C,SAAUhE,GAGN,MAFAoC,GAAG2hB,WAAaxgB,EAChBnB,EAAG4F,SAAWhI,EAAOA,KACdoC,EAAG4F,WAItB,QAASq1B,GAAgBvpB,GACjB1R,EAAG2hB,WACHuZ,EAAexpB,GAEfypB,EAAYzpB,GAIpB,QAASypB,GAAYzpB,GACjB,MAAIA,IAAWA,EAAQvC,aACnB7L,GAAKoB,MAAM,QAAS,kDAG3BwG,GAAiBkwB,qBAAqBn5B,EAAa4C,aAAc7E,EAAG4F,UAAUhE,KACvE,WACI0B,EAAKoB,MAAM,WACP1E,EAAG4F,SAASwX,MAAgC,IAAxBpd,EAAG4F,SAASwX,KAAKjc,KACrCnB,EAAG4F,SAASkoB,aAAe,GAC/B1vB,QAAQC,IAAI2B,EAAG4F,UACf9B,GAAc,GACjB9D,EAAG4F,cAKZ,QAASs1B,GAAet1B,EAASzB,GAC7B,GAAIQ,IAAUwoB,cAAevnB,EAAWA,EAASzE,GAAKnB,EAAG2hB,WACzD/b,GAAWA,EAAWA,EAAW5F,EAAG4F,SACvCsF,EAAiBmwB,wBAAwBp5B,EAAa4C,aAAce,EAAUjB,GAAQ/C,KAC/E,WACI0B,EAAKoB,MAAM,WACXm2B,IACA32B,EAAWC,KAKvB,QAASm3B,GAAWC,GAChBv7B,EAAG4F,YACE21B,GAAQlB,EAAQmB,SAAS,EAAG,GAGrC,QAASC,KACDz7B,EAAG4F,SAASioB,aAAe7tB,EAAG4F,SAASkoB,cACvC9tB,EAAG4F,SAAS81B,iBAAmB17B,EAAG4F,SAASioB,YAAc7tB,EAAG4F,SAASkoB,aAAe,IACpF9tB,EAAG4F,SAAS+1B,SAAW37B,EAAG4F,SAASioB,YAAc7tB,EAAG4F,SAAS81B,mBAE7D17B,EAAG4F,SAAS81B,iBAAmB,EAC/B17B,EAAG4F,SAAS+1B,SAAW,GAI/B,QAASC,GAAgBz6B,GACrBnB,EAAGsI,SAAWtI,EAAGsI,QACjByyB,EAAmB55B,GACnBs6B,IAGJ,QAASI,GAAkB16B,GACvB8F,IAAWrF,KAAK,WACZ,GAAIT,EAAI,CACJ,GAAIwD,IAAUwoB,cAAehsB,EAChC+J,GAAiB4wB,wBAAwB75B,EAAa4C,aAAcF,GAAQ/C,KACrE,WACI0B,EAAKoB,MAAM,WACdZ,GAAc,QAMlC,QAASi4B,GAAcC,EAAO5e,GACvB,GAAI6e,IACAnO,cAAiB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IACrD8M,kBAAqB,EAAG,EAAG,GAAI,GAAI,GAAI,IACvCsB,qBAAwB,EAAG,EAAG,GAAI,GAAI,GAAI,IAC1CC,uBAA0B,EAAG,EAAG,EAAG,EAAG,EAAG,GACzCC,mBAAsB,EAAG,GAAI,GAAI,GAAI,IACrCC,eAAkB,IAG5B,OADAjf,GAAOA,GAAQpd,EAAG4F,SAASwX,KACpBA,EAAO6e,EAAYD,GAAO3rB,QAAQ+M,EAAKjc,IAAM,IAAK,EAG1D,QAASm7B,GAAen7B,GACvB,GAAIo7B,IACMC,EAAG,EACHC,EAAG,EACZC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,GAAI,EACKC,GAAI,EACbC,GAAI,EACJC,GAAI,EAEL,OAAOd,GAAYp7B,GAIjB,QAAS+C,GAAWC,GAChBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACzCnE,EAAGsI,SAAU,EACbxE,GAAc,GAlOf,GAAI9D,GAAKC,IAETD,GAAGT,aACHS,EAAG8iB,aACH9iB,EAAG4F,YACH5F,EAAG8uB,iBACH9uB,EAAGoC,YAAc,GAAIJ,OACjBK,UACHC,QAASwB,IAEV9D,EAAG+d,eAAgB,EACnB/d,EAAGutB,uBAAyB,EAC5BvtB,EAAG26B,oBAAsB,EACzB36B,EAAGwtB,kBAAoB,EACvBxtB,EAAG+tB,2BAA6B,EAChC/tB,EAAG86B,UAAY,EACf96B,EAAGoE,cAEHpE,EAAGI,MAAQ,kCAEdJ,EAAG6E,aAAe5C,EAAa4C,aAE5B7E,EAAGi7B,gBAAkBA,EACrBj7B,EAAG+6B,mBAAqBA,EACxB/6B,EAAGs7B,WAAaA,EAChBt7B,EAAGy7B,oBAAsBA,EACzBz7B,EAAG47B,gBAAkBA,EACrB57B,EAAG67B,kBAAoBA,EACvB77B,EAAGk7B,eAAiBA;AACpBl7B,EAAG+7B,cAAgBA,EACtB/7B,EAAGs8B,eAAiBA,EACjBt8B,EAAGkE,WAAaA,EAChBlE,EAAGu6B,wBAA0BA,EAE7B15B,IAmMAuC,EAAOiG,IAAI,gBAAiB,WACxBjL,QAAQC,IAAI,0BACZ+E,EAAOoG,MAAM,QAAQ,KAEzBpG,EAAOiG,IAAI,oBAAqB,WAC5BjL,QAAQC,IAAI,8BACZ+E,EAAOoG,MAAM,YAAY,KAjNjC4wB,EAAgC75B,SAAW,WAAY,gBAAiB,eAAgB,OAAQ,SAAU,mBAAoB,sBAAuB,OAAQ,WAjC7J1B,QACKC,OAAO,iBACPK,WAAW,kCAAmCi7B,MAyPvD,WACC,YAOA,SAASkD,GAAiCr2B,EAAUhF,EAAcmB,EAAQ8H,EAAkB+oB,EAAsB3wB,GA+BjH,QAASzC,KACRzC,QAAQC,IAAI,qCACZk/B,IACIt7B,EAAa4C,cAChB24B,GAAc,GAENp6B,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAIjC,QAASuyB,KACR,MAAOtJ,GAAqBwJ,mBAAmB77B,KAC9C,SAAUhE,GAET,MADAoC,GAAGg1B,eAAiBp3B,EAAOA,KACpBoC,EAAGg1B,iBAIb,QAASwI,GAAc51B,GACtB,MAAOxE,GAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KACnD,SAAUhE,GAWT,MAVAoC,GAAGT,UAAY3B,EAAOA,EAAK2B,aAC3BS,EAAG09B,uBAAyB9/B,EAAOA,EAAKwxB,iBACxCpvB,EAAG29B,2BAA6B9+B,QAAQ6E,KAAK1D,EAAG09B,wBAChD19B,EAAG49B,WAAa,EACD59B,EAAG69B,WAAY,EACf79B,EAAG09B,uBAAuBp8B,QAAQ,SAAUw8B,GAC1D99B,EAAG49B,YAAcE,EAAsBC,QACQ,YAA5CD,EAAsBE,qBAAkCh+B,EAAG69B,WAAY,KAE3E79B,EAAGi+B,uBAAyBj+B,EAAGT,UAAUs1B,gCAAkC,IACpE70B,EAAGT,YAIb,QAAS2+B,GAA4B/8B,GAUpC,QAASqE,KACRlC,EAAKoB,MAAM,WACX84B,GAAc,GAXfv2B,IAAWrF,KAAK,WACf,GAAIT,EAAI,CACP,GAAIwD,IACHw5B,eAAgBh9B,EAEjB+J,GAAiBkzB,6BAA6Bn8B,EAAa4C,aAAcF,GAAQ/C,KAAK4D,MAUzF,QAAS64B,KAGR,QAAS74B,KACRlC,EAAKoB,MAAM,WACX1E,EAAG89B,yBACHN,GAAc,GALf,MAAOtyB,GAAiBozB,wBAAwBr8B,EAAa4C,aAAc7E,EAAG89B,uBAAuBl8B,KAAK4D,GAS3G,QAASgzB,KACR,MAAOttB,GAAiButB,gBAAgBx2B,EAAa4C,aAAc7E,EAAGT,WAAWqC,KAAK,WACrF0B,EAAKoB,MAAM,WACX1E,EAAGi+B,wBAAyB,CAC5B,KAAK,GAAIz1B,GAAI,EAAGA,EAAIxI,EAAG09B,uBAAuBj1B,OAAQD,IACrD,GAA2C,SAAvCxI,EAAG09B,uBAAuBl1B,GAAGgtB,MAAkB,CAClDx1B,EAAG09B,uBAAuBl1B,GAAGu1B,QAAU/9B,EAAGT,UAAUs1B,+BACpD0J,EAA4Bv+B,EAAG09B,uBAAuBl1B,GAAIA,EAC1D,SAGA,cAKJ,QAAS+1B,GAA4BpP,EAAWhrB,GAC5CgrB,EAAU4O,SACZ7yB,EAAiBszB,2BAA2Bv8B,EAAa4C,aAAcsqB,GAAWvtB,KAAK,WACtF0B,EAAKoB,MAAM,WACXyqB,EAAU7mB,SAAU,EACpBtI,EAAG29B,2BAA2Bx5B,GAAStF,QAAQ6E,KAAK1D,EAAG09B,uBAAuBv5B,KAC5E,WACF6zB,EAAS7zB,KAIZ,QAAS6zB,GAAS7zB,GACjBnE,EAAG09B,uBAAuBv5B,GAAStF,QAAQ6E,KAAK1D,EAAG29B,2BAA2Bx5B,IAG/E,QAASs6B,GAAWrnB,GACA,SAAfA,EAAKoe,QACRpe,EAAK2mB,QAAU/9B,EAAGT,UAAUs1B,gCAG9B,QAAS6J,KAEC,GADAtgC,QAAQC,IAAI2B,EAAG2+B,UACV3+B,EAAG2+B,SAASlK,eAAkBz0B,EAAG2+B,SAASzJ,OAA/C,CAET,GAAI0J,GAAU//B,QAAQ6E,KAAK1D,EAAG2+B,SAC9B3+B,GAAG6+B,UAAUz9B,KAAKw9B,GAClB5+B,EAAG2+B,YACHG,KAGD,QAASC,GAAe56B,GACvBnE,EAAG6+B,UAAU9tB,OAAO5M,EAAO,GAC3B26B,IAGD,QAASA,KACR,GAAIE,GAAM,CACVh/B,GAAG6+B,UAAUv9B,QAAQ,SAAU8V,GAC9B4nB,GAAO5nB,EAAK8d,SAEbl1B,EAAG6+B,UAAUv9B,QAAQ,SAAU8V,GAC9BA,EAAK2mB,QAAU/9B,EAAGi/B,eAAiB7nB,EAAK8d,OAAS8J,GACjD5nB,EAAK8nB,KAAO,SAAW9nB,EAAK2mB,QAAU,aAAoB3mB,EAAKqd,cAAcrX,KAAO,uBAtJtF,GAAIpd,GAAKC,IACTD,GAAG09B,0BACH19B,EAAG89B,yBACH99B,EAAGT,aACHS,EAAGg1B,kBACHh1B,EAAGm/B,SAAWt9B,MAAO,UAAWgC,KAAM,WACpChC,MAAO,UAAWgC,KAAM,UACxBhC,MAAO,QAASgC,KAAM,UACtBhC,MAAO,OAAQgC,KAAM,UAGvB7D,EAAGo/B,aAAev9B,MAAO,SAAUgC,KAAM,gBAAiBhC,MAAO,WAAYgC,KAAM,cACnF7D,EAAG49B,WAAa,EAChB59B,EAAG2+B,YACH3+B,EAAG6+B,aACH7+B,EAAGq/B,cAAe,EAElBr/B,EAAGk+B,4BAA8BA,EACjCl+B,EAAGq+B,yBAA2BA,EAC9Br+B,EAAGw4B,cAAgBA,EACnBx4B,EAAGu+B,4BAA8BA,EACjCv+B,EAAGg4B,SAAWA,EACdh4B,EAAGy+B,WAAaA,EAChBz+B,EAAG0+B,YAAcA,EACjB1+B,EAAG++B,eAAiBA,EACd/+B,EAAG8+B,cAAgBA,EACzBj+B,IAgIMuC,EAAOiG,IAAI,sBAAuB,SAAUC,EAAOC,GAC/CnL,QAAQC,IAAI,gCACRkL,EACAivB,IAAgB52B,KAAK,WACjBwB,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,QAAQ,KAK7BpG,EAAOiG,IAAI,0BAA2B,SAAUC,EAAOC,GACnDnL,QAAQC,IAAI,oCACRkL,EACAivB,IAAgB52B,KAAK,WACjBwB,EAAOoG,MAAM,YAAY,KAG7BpG,EAAOoG,MAAM,YAAY,KAjJxC8zB,EAAiC/8B,SAAW,WAAY,eAAgB,SAAU,mBAAoB,uBAAwB,QAlC9H1B,QACEC,OAAO,iBACPK,WAAW,mCAAoCm+B,MAyLlD,WACI,YAOA,SAASgC,GAAoBr4B,EAAUhF,EAAcvB,EAAMyC,EAAiB+H,EAAkB5H,EAAMi8B,EAAiBn8B,GAiCjH,QAASvC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZkU,IACCtU,EAAG6E,cACN26B,GAAa,GAEXp8B,EAAOyE,QAAQ7H,GAAG+K,mBAAkB,GAAMnJ,KAAK,SAAUoJ,GACrDhL,EAAGgL,cAAgBA,IAI9B,QAASw0B,GAAa53B,GACrBxE,EAAOyE,QAAQ7H,GAAG8D,cAAc8D,GAAahG,KAC5C,SAAUhE,GAYT,MAVAoC,GAAG+vB,UAAYnyB,EAAKmyB,UACR/vB,EAAGy/B,UAAY7hC,EAAKmyB,UAAWnyB,EAAKmyB,UAAUC,cAAe,GACzEhwB,EAAG0/B,OAAS9hC,EAAKqyB,iBACI,OAAjBjwB,EAAG+vB,WAC6B,UAA/B/vB,EAAG+vB,UAAUC,gBAChBhwB,EAAG2/B,WAAY,GAGjBvhC,QAAQC,IAAI,kBAAmB2B,EAAG+vB,WAClC3xB,QAAQC,IAAI,eAAgB2B,EAAG0/B,QACxB1/B,EAAG+vB,YAIV,QAASzb,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAKzB,QAAS+4B,KACR,MAAO10B,GAAiB00B,mBAAmB39B,EAAa4C,cAAcjD,KAC5D,SAAUhE,GAGN,MAFAoC,GAAG0/B,OAAS9hC,EAAOA,KACnBoC,EAAG6/B,SACI7/B,EAAG0/B,SAIzB,QAASI,KAEE9/B,EAAG6/B,MAAMh8B,MAAQ7D,EAAG6/B,MAAME,YAC7B70B,EAAiB80B,oBAAoB/9B,EAAa4C,aAAc7E,EAAG6/B,OAAOj+B,KACvE,WACI0B,EAAKoB,MAAM,WACXtB,EAAOyE,QAAQ7H,GAAG8D,eAAc,GACnC9D,EAAG6/B,SACAD,MAIZ,QAASK,GAAYJ,GACbA,EAAMh8B,MAAQg8B,EAAME,YACpB70B,EAAiBg1B,uBAAuBj+B,EAAa4C,aAAcg7B,GAAOj+B,KACtE,WACI0B,EAAKoB,MAAM,WACXtB,EAAOyE,QAAQ7H,GAAG8D,eAAc,GAChC87B,MAIhB,QAASr3B,GAAas3B,GAClBA,EAAMv3B,SAAU,EAChBs3B,IAGJ,QAASO,GAAYC,GACjBhiC,QAAQC,IAAI,gBACZ4I,IAAWrF,KAAK,WACZ,GAAI+C,IAAUy7B,QAASA,EAC1Bl1B,GAAiBm1B,yBAAyBp+B,EAAa4C,aAAcF,GAAQ/C,KACtE,WACIwB,EAAOyE,QAAQ7H,GAAG8D,eAAc,GAChCR,EAAKoB,MAAM,WACXk7B,QAKhB,QAASU,GAAwBC,GAE7B,MADAniC,SAAQC,IAAI,0BAA2B2B,EAAG+vB,WACtCwQ,GAAcvgC,EAAG+vB,WAA4C,UAA/B/vB,EAAG+vB,UAAUC,eAAkD,IAArBhwB,EAAG0/B,OAAOj3B,QAClFnF,EAAKoB,MAAM,QAAS,0DAEhB9C,KAAM,WACFwB,EAAOyE,QAAQ7H,GAAG+F,SAAU,KAIrC/F,EAAG+vB,UAAkB7kB,EAAiBs1B,wBAAwBv+B,EAAa4C,aAAc7E,EAAG+vB,WAAWnuB,KACtG,WAEC5B,EAAG2S,aAAe,EACf6sB,IACAl8B,EAAKoB,MAAM,aALnB,OASJ,QAASiD,KACJ1F,EAAa4C,aAChB26B,GAAa,GAEPx/B,EAAGT,aAIX,QAASkhC,KACDzgC,EAAG6/B,MAAMh8B,MAAQ7D,EAAG6/B,MAAME,WAC1B//B,EAAG0gC,cAAgB,GAEnB1gC,EAAG0gC,cAAgB,WAG9B,QAAS/wB,GAAWrG,GACG,KAAlBA,EAAMuG,SACTiwB,IA3JC,GAAI9/B,GAAKC,IAETD,GAAGT,aACHS,EAAG+vB,aACH/vB,EAAGiT,SACHjT,EAAGiT,SACHjT,EAAG6G,aACH7G,EAAG6/B,SACH7/B,EAAG0/B,UACH1/B,EAAG2/B,WAAY,EACf3/B,EAAG2gC,iBACE9+B,MAAO,QAASzB,MAAO,gBACvByB,MAAO,UAAWzB,MAAO,cAEjCJ,EAAG6E,aAAe5C,EAAa4C,aAE5B7E,EAAGI,MAAQ,8BACXJ,EAAGu/B,gBAAkBA,EACrBv/B,EAAG0gC,cAAgB,WAEtB1gC,EAAGwgC,wBAA0BF,EAC1BtgC,EAAGmgC,YAAcA,EACpBngC,EAAG8/B,oBAAsBA,EACtB9/B,EAAG2H,UAAYA,EACf3H,EAAGygC,cAAgBA,EACtBzgC,EAAG2P,WAAaA,EACb3P,EAAGuI,aAAeA,EAClBvI,EAAGigC,YAAcA,EACjBp/B,IAmIAuC,EAAOiG,IAAI,iBAAkB,SAAUC,EAAOC,GAC1CnL,QAAQC,IAAI,2BACRkL,GAAUvJ,EAAG+vB,UACV/vB,EAAG+vB,WAAWuQ,GAAwB,GAAM1+B,KAAK,WAChDwB,EAAOoG,MAAM,QAAQ,IACtB,WACCpG,EAAOoG,MAAM,QAAQ,KAGzBpG,EAAOoG,MAAM,QAAQ,KAK7BpG,EAAOiG,IAAI,qBAAsB,SAAUC,EAAOC,GAC9CnL,QAAQC,IAAI,+BACRkL,GAAUvJ,EAAG+vB,UACbuQ,GAAwB,GAAM1+B,KAAK,WAC/BwB,EAAOoG,MAAM,YAAY,IAC1B,WACCpG,EAAOoG,MAAM,YAAY,KAG7BpG,EAAOoG,MAAM,YAAY,KAzJrC81B,EAAoB/+B,SAAW,WAAY,eAAgB,OAAQ,kBAAmB,mBAAoB,OAAQ,kBAAmB,UAnCrI1B,QACKC,OAAO,iBACPK,WAAW,sBAAuBmgC,MAkM3C,WACC,YAOA,SAASsB,GAA+Blf,EAAQze,EAASyG,EAAYhJ,EAAMD,EAAmBU,EAAImC,EAAMD,EAAa1D,EAAWqpB,EACxF6X,EAAiB19B,EAAiBD,EAAmBlB,EAAe8+B,EAAUjd,GA2BrH,QAASrE,KACR9e,EAAKqgC,MAAM,qCACXC,IACArhC,EAAU2H,WAAW1F,KAAK,SAAUhE,GACnCoC,EAAGgkB,YAAcpmB,EACjBkmB,IACyC,UAAzB9jB,EAAGgkB,YAAY5P,MAAmBrQ,IACjC/D,EAAGkG,iBAErB+6B,IACAjhC,EAAGmC,UAAY1B,EAGhB,QAASygC,KACR,IAAK59B,EAAK6B,eAAenF,EAAG4F,SAASrG,UAAWS,EAAGmhC,aAAa5hC,WAAY,GAC1D4Q,OAAQnQ,EAAG4F,SAASrG,UAAU4Q,QAC/C0wB,GAAgBO,uBAAuBphC,EAAG4F,SAASzE,GAAInB,EAAG4F,SAASrG,UAAU4Q,QAAQvO,KACpF,SAAUhE,GACT0F,EAAKoB,MAAM,UAAW,wBACtB1E,EAAGmhC,aAAa5hC,UAAYV,QAAQ6E,KAAK1D,EAAG4F,SAASrG,WACjD3B,EAAAA,SACH0F,EAAKoB,MAAM,UAAW,8BACtBgd,EAAOO,GAAG,0BACTC,YAAatkB,EAAKuD,OAIrB,WACCmC,EAAKoB,MAAM,QAAS,oBAAqB,oBACzC1E,EAAG4F,SAASrG,UAAYV,QAAQ6E,KAAK1D,EAAGmhC,aAAa5hC,cAMzD,QAASyhC,KAGR,QAASx7B,GAAgB5H,GAaxB,MAZAoC,GAAG4F,SAAWhI,EACdoC,EAAG4F,SAASy7B,WAAa,GAAIt4B,MAAK/I,EAAG4F,SAASy7B,YAC9CrhC,EAAG4F,SAAS07B,aAAe,GAAIv4B,MAAK/I,EAAG4F,SAAS07B,cAC3CtY,EAKOhpB,EAAGmC,SACd2+B,EAASxrB,OAAOW,MAAO,KALvBjW,EAAGoC,YAAc,GAAIJ,OACpBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASwB,IAMJ9D,EAAG4F,SAfX,MAAOi7B,GAAgBU,gBAAgBvhC,EAAG2hB,YAAY/f,KAAK4D,GAmB5D,QAASzE,KACRN,EAAkBO,UAGnB,QAAS8iB,KACRzgB,EAAY2C,UAAU,WAAYhG,EAAG6F,SAAS1E,IAAIS,KAAK,SAAUhE,GAChEoC,EAAG2G,UAAY/I,EAAOA,OAIlB,QAASmG,KACLV,EAAY2C,UAAU,YAAa,MAAMpE,KAAK,SAAUhE,GACpDA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,KACtBQ,QAAQC,IAAI2B,EAAGiG,aAAa,QAI1C,QAASg7B,KACR99B,EAAgBgS,kBAAkBvT,KAAK,SAAUhE,GAChDoC,EAAG6G,YAAc1F,GAAI,KAAMqgC,KAAM,KAAMphC,MAAO,QAAQ0B,OAAOlE,KAI/D,QAAS6jC,KACR,GAAKzhC,EAAG0hC,YAAR,CAEA1hC,EAAG+F,SAAU,CACb,IAAIpB,IACHg9B,gBAAmB3hC,EAAG0hC,YAAYlgC,SACtBogC,gBAAmB5hC,EAAG6hC,aAAe7hC,EAAG6hC,aAAargC,SAAW,KAChEsgC,iBAAoB9hC,EAAGsG,SAAWtG,EAAGsG,SAAS9E,SAAW,KACzDugC,iBAAoB/hC,EAAG+hC,iBAAmB/hC,EAAG+hC,iBAAmB,KAE7EpiC,GAAU2H,WAAW1F,KAAK,WASzB,QAAS4D,GAAgB5H,GACxB0F,EAAKoB,MAAM,UAAW,kBAAoBs9B,EAAQpkC,EAAKuS,QAAU,wBACjEzG,EAAWF,MAAM,gBACjBs3B,EAAS,WACRrgC,EAAkBM,QAClBf,EAAG+F,SAAU,GACX,KAIJ,QAASoqB,GAAc8R,GACtB3+B,EAAKoB,MAAM,QAAS,aAAeu9B,EAAMx7B,QACzCzG,EAAG+F,SAAU,EApBe,UAAzB/F,EAAGgkB,YAAY5P,MAClBysB,EAAgBqB,gCAAgCliC,EAAG2hB,WAAYhd,GAAQ/C,KAAK4D,EAAiB2qB,GAC1D,aAAzBnwB,EAAGgkB,YAAY5P,MACzBysB,EAAgBsB,mCAAmCniC,EAAG2hB,WAAYhd,GAAQ/C,KAAK4D,EAAiB2qB,GAEhG0Q,EAAgBuB,iCAAiCpiC,EAAG2hB,WAAYhd,GAAQ/C,KAAK4D,MAoBhF,QAASmC,KACR3H,EAAG+nB,WAAY,EACf/nB,EAAG0hC,eACH1hC,EAAG6hC,gBAGJ,QAAS/9B,KACR,GAAIa,IACHohB,KAAM,EACNvI,KAAM,KAEH6kB,GACS1gB,WAAc3hB,EAAG4F,SAASzE,GAC1B8jB,SAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEpD,OAAO/hB,GAAkBuV,iBAAiB4pB,EAAY19B,GAAQ/C,KAC7D,SAAUhE,GAIT,MAHAoC,GAAG2T,YAAc/V,EAAOA,EAAK8H,WACxB1F,EAAGmC,SACPmT,OAAOW,QACDjW,EAAG2T,cAnKb,GAAI3T,GAAKC,IAETD,GAAG2hB,WAAaxgB,EAChBnB,EAAG+nB,WAAY,EACf/nB,EAAGyF,QACH,IAAIu8B,GAAU/+B,EAAQ,UACtBjD,GAAG2G,aACH3G,EAAG6F,YACH7F,EAAG4F,YACH5F,EAAGmhC,gBACGnhC,EAAGiG,gBACHjG,EAAGsiC,KAAO,OAChBtiC,EAAGuiC,6BAA8B,EACjCviC,EAAGgpB,eAAiBA,EAEpB5qB,QAAQC,IAAI,uBAAwB2B,EAAGgpB,gBACvChpB,EAAGe,MAAQA,EACXf,EAAG2H,UAAYA,EACf3H,EAAGyhC,cAAgBA,EACnBzhC,EAAGkhC,sBAAwBA,EACrBlhC,EAAG8G,YAAczD,EAAY0D,WAEnCyY,IAODohB,EAA+BrgC,SAAW,SAAU,UAAW,aAAc,OAAQ,oBAAqB,KAAM,OAAQ,cAAe,YAAa,iBAAkB,kBAAmB,kBAAmB,oBAAqB,gBAAiB,WAAY,iBApC9P1B,QACEC,OAAO,gBACPK,WAAW,iCAAkCyhC,MAiLhD,WACI,YAOA,SAAS4B,GAAc/hC,EAAmBihB,EAAQze,EAAS69B,EAAUp3B,EAAYtG,EAAQjC,EAAIinB,EAAayY,EAAiBx9B,EAAaC,EAAM3D,EAAWwD,GAwBrJ,QAAStC,KACLzC,QAAQC,IAAI2B,EAAGI,MAAQ,oBAAqBe,EAAIinB,GAChDpoB,EAAGyiC,UAAY9iC,EAAUukB,aAAa,QAAS,aAAc,mBAAoB,sBAAuB,kBACxGlkB,EAAGgkB,YAAcrkB,EAAUW,cAC3BN,EAAG6F,SAAW7F,EAAGgkB,YAAYne,SAC7Bie,IAC6B,UAAzB9jB,EAAGgkB,YAAY5P,OACfrQ,IACA2+B,KACG1iC,EAAGkG,eACVvG,EAAU2H,WAAW1F,KAAK,SAAUhE,GAChCQ,QAAQC,IAAIT,GACR+B,EAAUukB,aAAa,QAAS,aAAc,sBAC9ClkB,EAAGoU,MAAQpU,EAAG2iC,OAAO,GAAG9gC,MACxB7B,EAAG4iC,aAAc,GACVjjC,EAAUukB,aAAa,sBAAuB,kBACrDlkB,EAAGoU,MAAQpU,EAAG2iC,OAAO,GAAG9gC,MAExB7B,EAAGoU,MAAQpU,EAAG2iC,OAAO,GAAG9gC,QA0BpC,QAASsc,KACDne,EAAGmB,GAAI0hC,GAAoB7iC,EAAGmB,KACzBinB,EAAY3f,OAAS,GAAGo6B,EAAmBza,GAIxD,QAAShK,KACL3d,EAAkBO,QAAQ,UAG9B,QAAS6hC,GAAmBC,GACxB9iC,EAAG+F,SAAU,CACb,IAAIpB,IACAg9B,gBAAmB3hC,EAAG0hC,YAAYlgC,SAClCogC,gBAAmB5hC,EAAG6hC,aAAe7hC,EAAG6hC,aAAargC,SAAW,KAChEsgC,iBAAoB9hC,EAAGsG,SAAWtG,EAAGsG,SAAS9E,SAAW,KACzDuhC,sBAAyB/iC,EAAG+iC,sBAAwB/iC,EAAG+iC,sBAAsBvhC,SAAW,KACxFugC,iBAAoB/hC,EAAG+hC,iBAAmB/hC,EAAG+hC,iBAAmB,KAEpEe,GAAIxhC,QAAQ,SAAUqgB,GAClBqhB,EAAsBrhB,EAAYhd,KAI1C,QAASq+B,GAAsBrhB,EAAYhd,GASvC,QAASa,GAAgB5H,GACrB0F,EAAKoB,MAAM,UAAW,kBAAoBs9B,EAAQpkC,EAAKuS,QAAU,wBACjEzG,EAAWF,MAAM,gBACbxJ,EAAGyiC,WACH/gB,EAAOO,GAAG,sCAAuCpd,aAAcjH,EAAKuD,KACpE/C,QAAQC,IAAI,UAEhByiC,EAAS,WACL1iC,QAAQC,IAAI,uBACZoC,EAAkBM,QAClBf,EAAG+F,SAAU,GACd,KAKP,QAASoqB,KAELnwB,EAAG+F,SAAU,EA1Bb/F,EAAGoU,QAAUpU,EAAG2iC,OAAO,GAAG9gC,MAC1Bg/B,EAAgBqB,gCAAgCvgB,EAAYhd,GAAQ/C,KAAK4D,EAAiB2qB,GACnFnwB,EAAGoU,QAAUpU,EAAG2iC,OAAO,GAAG9gC,MACjCg/B,EAAgBsB,mCAAmCxgB,EAAYhd,GAAQ/C,KAAK4D,EAAiB2qB,GAE7F0Q,EAAgBuB,iCAAiCzgB,EAAYhd,GAAQ/C,KAAK4D,GAyBlF,QAASse,KACLzgB,EAAY2C,UAAU,YAAYpE,KAAK,SAAUhE,GAC7CoC,EAAG2G,UAAY/I,EAAOA,KAClBoC,EAAGyiC,WACHziC,EAAG0hC,YAAc/hC,EAAUW,iBAIvC,QAASyD,KACLV,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CoC,EAAGkG,UAAYtI,EAAOA,OAI9B,QAAS8kC,KACL,GAAIl+B,IAAS,iBAAkB,aAC/BnB,GAAY4lB,WAAWzkB,GAAO5C,KAAK,SAAUhE,GACzCoC,EAAGijC,eAAiBrlC,EAAOA,EAAK8H,aA3IxC,GAAI1F,GAAKC,IACTD,GAAGI,MAAQ,iBACXJ,EAAGmB,GAAKA,EACRnB,EAAGooB,YAAcA,EACjBpoB,EAAGyF,QACH,IAAIu8B,GAAU/+B,EAAQ,UACtBjD,GAAG2G,aACH3G,EAAG2iC,SACE9gC,MAAS,QAAS0O,QAAW,SAC7B1O,MAAS,WAAY0O,QAAW,UAChC1O,MAAS,SAAU0O,QAAW,SAKnCvQ,EAAGoe,OAASA,EACZpe,EAAGme,GAAKA,EACRne,EAAG8G,YAAczD,EAAY0D,WAE7BlG,IAYJ2hC,EAAcjiC,SAAW,oBAAqB,SAAU,UAAW,WAAY,aAAc,SAAU,KAAM,cAAe,kBAAmB,cAAe,OAAQ,YAAa,mBArCnL1B,QACKC,OAAO,gBACPK,WAAW,gBAAiBqjC,MAsJrC,WACI,YAEA3jC,SACKC,OAAO,QACJ,iBAKZ,WACI,YAOA,SAASokC,GAAoBxiC,GAQzB,QAASG,KACLH,EAAKsZ,KAAK,+BARd,GAAIha,GAAKC,IACTD,GAAGI,MAAQ,sBAEXS,IA6BJqiC,EAAoB3iC,SAAW,QAtC/B1B,QACKC,OAAO,QACPK,WAAW,sBAAuB+jC,MAkB3C,WACI,YAOA,SAASC,GAAmBziC,GAQxB,QAASG,KACLH,EAAKsZ,KAAK,6BARd,GAAIha,GAAKC,IACTD,GAAGI,MAAQ,qBAEXS,IA8BJsiC,EAAmB5iC,SAAW,QAvC9B1B,QACKC,OAAO,QACPK,WAAW,qBAAsBgkC,MAkB1C,WACI,YAOA,SAASC,GAAgB1iC,EAAM4C,EAAMN,EAAM0e,EAAQ2hB,EAAa1jC,EAAW+J,EAAYo3B,EAAUz9B,EACxEigC,GAmBrB,QAASziC,KACLH,EAAKsZ,KAAK,2BACVupB,IAGJ,QAASC,KAUL,QAASh+B,KAELs7B,EAAS,WACLnhC,EAAU2H,WAAW1F,KAAK,SAAUhE,GAG5B,GADAoC,EAAGyjC,eAAiB7lC,EAAK8lC,YACpB1jC,EAAGyjC,cAAe,CACnB,GAAIxf,GAAUtkB,EAAUukB,aAAa,QAAS,aAAc,mBAAoB,gBAAiB,qBAC7FD,GACAvC,EAAOO,GAAG,sBAAuB0hB,oBAAuB,SAExDjiB,EAAOO,GAAG,iCAItB,SAAUggB,GACN7jC,QAAQC,IAAI,UAAW4jC,EACvB,IAAI3jC,GAAO,wBACXgF,GAAKoB,MAAM,QAASpG,GACpBslC,OAGT,KAGP,QAAS7P,KACL6P,IAnCJ,GAAIhmC,IACA4D,SAAY8B,EAAKugC,iBAAiB7jC,EAAGwB,UACrCsiC,SAAYxgC,EAAKugC,iBAAiB7jC,EAAG8jC,WAErCn/B,GACAo/B,gBAAmB/jC,EAAG+jC,gBAE1BT,GAAmBU,SAASpmC,EAAM+G,GAAQ/C,KAAK4D,EAAiBuuB,GAgCpE,QAASkQ,GAAqB/0B,GAC1B,GAAItR,IACAsmC,YAAe5gC,EAAKugC,iBAAiB7jC,EAAGkkC,aACxCC,kBAAqB7gC,EAAKugC,iBAAiB7jC,EAAGokC,mBAC9CC,YAAe/gC,EAAKugC,iBAAiB7jC,EAAGqkC,aAE5ChhC,GAAY4gC,qBAAqBrmC,GAAMgE,KAAK,WACxC0B,EAAKoB,MAAM,WACX1E,EAAGkkC,YAAc,KACjBlkC,EAAGokC,kBAAoB,KACvBpkC,EAAGqkC,YAAc,KACjBn1B,EAAKo1B,cACL,IAAIrgB,GAAUtkB,EAAUukB,aAAa,QAAS,aAAc,mBAAoB,gBAAiB,qBAC7FD,GACAvC,EAAOO,GAAG,sBAAuB0hB,oBAAuB,SAExDjiB,EAAOO,GAAG,iCAStB,QAAS2hB,KACL5jC,EAAG+jC,gBAAkB,GACrB/jC,EAAGqF,KAAO,GAAI0D,MAGlB,QAASw6B,KACLvjC,EAAGukC,QAAUlB,EAAYE,WAAW,SAAUgB,GAC1CvkC,EAAGukC,QAAUA,IA/FrB,GAAIvkC,GAAKC,IACTD,GAAGI,MAAQ,kBACXshB,EAAOrhB,KAAOL,EAAGK,KACjBL,EAAGK,QACHL,EAAGyjC,eAAgB,EACnBzjC,EAAGwkC,WAAaxhC,EAAO,WACvB5E,QAAQC,IAAI,qBAAsB2B,EAAGwkC,YACrCxkC,EAAGqF,KAAO,GAAI0D,MAEd/I,EAAGwjC,SAAWA,EACdxjC,EAAG4jC,aAAeA,EAClB5jC,EAAGikC,qBAAuBA,EAG1BpjC,IAmBJuiC,EAAgB7iC,SAAW,OAAQ,OAAQ,OAAQ,SAAU,cAAe,YAAa,aAAc,WAAY,cAAe,sBAxClI1B,QACKC,OAAO,QACPK,WAAW,kBAAmBikC,MA4GvC,WACI,YAOA,SAASqB,GAAqB/jC,GAQ1B,QAASG,KACLH,EAAKqgC,MAAM,gCARf,GAAI/gC,GAAKC,IACTD,GAAGI,MAAQ,uBAEXS,IAgCJ4jC,EAAqBlkC,SAAW,QAzChC1B,QACKC,OAAO,QACPK,WAAW,uBAAwBslC,MAkB5C,WAEI,YAcA,SAASC,GAAeC,GAMpB,QAASC,KACL,MAAOD,GAAME,IAAI,uBAAuBjjC,KAAK4D,GAGjD,QAASA,GAAgB4tB,GACrB,MAAOA,GAASx1B,KATpBqC,KAAK2kC,WAAaA,EAmCtBF,EAAenkC,SAAW,SA1C1B1B,QACKC,OAAO,OACPgmC,QAAQ,iBAAkBJ,MAkBnC,WAEI,YAcA,SAASK,GAAQplC,GAWb,QAASqlC,GAAYN,EAAgBthC,EAAQzD,EAAW0D,GA2BpD,QAAStD,KACLJ,EAAUI,SAGd,QAASklC,KACLtlC,EAAU2H,WAAW1F,KACjB,SAAUhE,GACNoC,EAAGK,KAAOzC,IAKtB,QAASiD,KACLokC,IACHC,IAGD,QAASC,GAAMtqB,GACPA,IAAM7a,EAAGolC,YACTplC,EAAGolC,YAAc,EAGjBplC,EAAGolC,YAAcvqB,EAIzB,QAASwqB,GAAWC,GACZA,IAAMtlC,EAAGulC,iBACTvlC,EAAGulC,iBAAmB,EAGtBvlC,EAAGulC,iBAAmBD,EAI9B,QAASE,GAAQC,GACb,IAAKA,IAAgBA,EAAYh9B,OAC7B,OAAO,CAEN,KAAKzI,EAAGK,KAAKmE,QAAUxE,EAAGK,KAAKmE,MAAMiE,OACtC,OAAO,CAEX,KAAK,GAAID,GAAI,EAAGA,EAAIi9B,EAAYh9B,OAAQD,IACpC,IAAK,GAAI6pB,GAAI,EAAGA,EAAIryB,EAAGK,KAAKmE,MAAMiE,OAAQ4pB,IACtC,GAAIoT,EAAYj9B,KAAOxI,EAAGK,KAAKmE,MAAM6tB,GAAG5tB,KACpC,OAAO,CAInB,QAAO,EAGX,QAASihC,GAAcC,GACnB,IAAKA,IAAgBA,EAAYl9B,OAC7B,OAAO,CAEN,KAAKzI,EAAG2lC,cAAgB3lC,EAAG2lC,YAAYl9B,OACxC,OAAO,CAEX,KAAK,GAAID,GAAI,EAAGA,EAAIm9B,EAAYl9B,OAAQD,IACpC,IAAK,GAAI6pB,GAAI,EAAGA,EAAIryB,EAAG2lC,YAAYl9B,OAAQ4pB,IACvC,GAAIsT,EAAYn9B,KAAOxI,EAAG2lC,YAAYtT,GAAGuT,WAAW/hC,OAAS7D,EAAG2lC,YAAYtT,GAAGwT,OAC3E,OAAO,CAInB,QAAO,EAGd,QAASX,KACR7hC,EAAY6hC,YAAYtjC,KAAK,SAAUhE,GACtCoC,EAAG8lC,OAASloC,EACZ8mC,EAAeE,aAAahjC,KAC3B,SAAUhE,GACToC,EAAGpC,KAAOA,EACVoC,EAAGpC,KAAKyD,MAAMC,QAAQ,SAAU8V,GACX,8BAAhBA,EAAK7G,QACR6G,EAAKzS,OAAOqhB,MAAQhmB,EAAG8lC,OAAOC,6BACJ,gCAAhB3uB,EAAK7G,SACf6G,EAAKzS,OAAOqhB,MAAQhmB,EAAG8lC,OAAOE,4BAA8BhmC,EAAG8lC,OAAOG,4BACtE7uB,EAAK8uB,SAAS5kC,QAAQ,SAAU6kC,GACR,mCAAnBA,EAAQ51B,UAA8C41B,EAAQxhC,OAAOqhB,MAAQhmB,EAAG8lC,OAAOE,6BACpE,mCAAnBG,EAAQ51B,UAA8C41B,EAAQxhC,OAAOqhB,MAAQhmB,EAAG8lC,OAAOG,gCAElE,2BAAhB7uB,EAAK7G,UACf6G,EAAKzS,OAAOqhB,MAAQhmB,EAAG8lC,OAAOM,sBAAwBpmC,EAAG8lC,OAAOO,sBAChEjvB,EAAK8uB,SAAS5kC,QAAQ,SAAU6kC,GACR,8BAAnBA,EAAQ51B,UAAyC41B,EAAQxhC,OAAOqhB,MAAQhmB,EAAG8lC,OAAOM,uBAC/D,6BAAnBD,EAAQ51B,UAAwC41B,EAAQxhC,OAAOqhB,MAAQhmB,EAAG8lC,OAAOO,gCAjHzF,GAAIrmC,GAAKC,IACTD,GAAGsmC,aAAe,YAClBtmC,EAAGolC,YAAc,EACjBplC,EAAGulC,iBAAmB,EACtBvlC,EAAG8lC,UACH9lC,EAAG2lC,eAEHhmC,EAAU2H,WAAW1F,KAAK,WACtB5B,EAAGK,KAAOV,EAAUW,cACpBX,EAAU4mC,mBAAmB3kC,KAAK,SAAUC,GACxC7B,EAAG2lC,YAAc9jC,EACjB7B,EAAGwmC,QAAS,MAGpBxmC,EAAGmlC,MAAQA,EACXnlC,EAAGqlC,WAAaA,EAChBrlC,EAAGwlC,QAAUA,EACbxlC,EAAG0lC,cAAgBA,EACnB1lC,EAAGK,QACHL,EAAGymC,eAAgB,EACnBzmC,EAAGD,OAASA,EACZC,EAAGilC,YAAcA,EAEjBpkC,IAmGHuC,EAAOiG,IAAI,eAAgB,WAC1B67B,IACA9mC,QAAQC,IAAI,kBAxId,MA4CA2mC,GAAYzkC,SAAW,iBAAkB,SAAU,YAAa,gBA3C5DvB,YAAa,gCACbtB,SAAU,IACVuB,SAAS,EACTE,WAAY6lC,EACZ3lC,aAAc,SACdC,kBAAkB,GA+B1BylC,EAAQxkC,SAAW,aA3CnB1B,QACKC,OAAO,OACPS,UAAU,UAAWwlC,MAmJ9B,WAEI,YAaA,SAAS2B,KAWL,QAASC,GAAWhnC,GAShB,QAAS6f,KACLylB,IACA7mC,QAAQC,IAAI,4BAGhB,QAAS4mC,KACLtlC,EAAU2H,WAAW1F,KACjB,SAAUhE,GACNgpC,EAASvmC,KAAOzC,IAK5B,QAASmC,KACL3B,QAAQC,IAAI,UACZsB,EAAUI,SAvBd,GAAI6mC,GAAW3mC,IACf2mC,GAASC,SAAU,EACnBD,EAASvmC,QACTumC,EAAS7mC,OAASA,EAClB6mC,EAAS3B,YAAcA,EAEvBzlB,IAjBJ,MA6CAmnB,GAAWpmC,SAAW,cA5ClBvB,YAAa,8BACbtB,SAAU,IACVuB,SAAS,EACTE,WAAYwnC,EACZtnC,aAAc,WACdC,kBAAkB,GAZ1BT,QACKC,OAAO,OACPS,UAAU,cAAemnC,MA+ClC,WAEI,YAaA,SAASI,KACL,OACI9nC,YAAa,8BACbtB,SAAU,IACVuB,SAAS,GATjBJ,QACKC,OAAO,OACPS,UAAU,cAAeunC,MAYlC,WACC,YAOA,SAASC,KAcR,QAASjpC,GAAKH,EAAOI,EAASipC,EAAOC,GACpCtpC,EAAMupC,OAAO,WACZ,MAAOnpC,GAAQygB,KAAK,QAClB,SAAU2oB,GAERH,EAAMI,MACTzpC,EAAMypC,IAAM,GAAIr+B,MAAKoW,SAAS6nB,EAAMI,SAK7BzpC,EAAMupC,OAAO,WACT,MAAOnpC,GAAQygB,KAAK,QACrB,SAAU2oB,GAELH,EAAMK,MACN1pC,EAAM0pC,IAAM,GAAIt+B,MAAKoW,SAAS6nB,EAAMK,SAMrD1pC,EAAM2pC,YAAc,SAAUzlC,GAE7B,GAAI+b,IAAM,EACNhD,EAAI/B,MACR,IAAc,iBAAVhX,EACH,MAAO+b,EACR,KACsB,gBAAV/b,IACV+Y,EAAI3G,OAAOpS,EAAO,cAClB+b,EAAMhD,EAAE6c,WACmB,gBAAV51B,KACjB+Y,EAAI3G,OAAOpS,EAAO,KAClB+b,EAAMhD,EAAE6c,WAGR,MAAOhlB,IAOG,MAFAw0B,GAAYM,aAAa,MAAQ3sB,GAAKjd,EAAMypC,IAAOxsB,EAAEmM,KAAKppB,EAAMypC,KAAO,IAAK,GAC5EH,EAAYM,aAAa,MAAQ3sB,GAAKjd,EAAM0pC,IAAOzsB,EAAEmM,KAAKppB,EAAM0pC,KAAO,GAAI,GACpEzpB,GAIpBqpB,EAAYO,YAAYpmC,KAAK,SAAUS,GACtC,MAAKA,IAGgB,gBAAVA,GACVA,EAAQoS,OAAOpS,GAAOqS,OAAO,iBACJ,gBAAVrS,KACfA,EAAQoS,OAAOpS,EAAO,cAAcqS,OAAO,kBAErCrS,GAPCA,IAWTolC,EAAYQ,SAASrmC,KAAK,SAAUS,GAKnC,MAHqB,gBAAVA,KACVA,EAAQoS,OAAOpS,EAAO,iBAAiBqS,OAAO,eAExCrS,IA/ET,GAAItC,IACHzB,KAAMA,EACNmB,SAAS,EACTvB,SAAU,IACVgqC,QAAS,UACT1oC,YAAa,6CAMd,OAAOO,GAjBRV,QACEC,OAAO,OACPS,UAAU,aAAcwnC,MA2F3BloC,QAAQC,OAAO,OAAOS,UAAU,cAAe,WAC3C,OACImoC,QAAS,UACT5pC,KAAM,SAAUH,EAAOI,EAASygB,EAAMyoB,GAClC,QAASU,GAASrpC,GACd,GAAIA,EAAM,CACN,GAAIspC,GAAmBtpC,EAAKW,QAAQ,YAAa,IAC7C4oC,EAAeD,EAAiBv3B,QAAQ,KACxCwK,EAAIvc,EAAKwpC,UAAUD,EAAa,EAAGD,EAAiBn/B,QACpDs/B,EAAeltB,EAAExK,QAAQ,IAU7B,OATG03B,GAAa,KAAIH,EAAmBA,EAAiBE,UAAU,EAAGD,EAAaE,EAAa,IAK3FH,IAAqBtpC,IACrB2oC,EAAYe,cAAcJ,GAC1BX,EAAYgB,WAETL,EAEX,MAAO/uB,QAGXouB,EAAYQ,SAASrmC,KAAKumC,OAKtC,WACI,YAOA,SAASO,KACL,GAAI3oC,IACAD,kBAAkB,EAClBH,WAAYgpC,EACZ9oC,aAAc,KACd3B,SAAU,IACVC,OACIygB,OAAQ,KACRgqB,SAAQ,KACRC,SAAU,KACVC,KAAM,KACNC,UAAW,KACXC,OAAQ,KACRC,QAAS,KACTC,YAAa,MAEjB1pC,YAAa,+CAEjB,OAAOO,GAKX,QAAS4oC,KAKL,QAASQ,KACL,MAAI3oC,GAAG0oC,gBACH1oC,GAAGsoC,YAGPtoC,EAAGwoC,QAAUxoC,EAAGwoC,QARpB,GAAIxoC,GAAKC,IACTD,GAAG2oC,QAAUA,EA/BjB9pC,QACKC,OAAO,OACPS,UAAU,iBAAkB2oC,MAyCrC,WACI,YAOA,SAASU,KAgBL,QAAS9qC,GAAKH,EAAOI,EAASipC,GA6D1B,QAAS6B,KACLlrC,EAAMg5B,MAAQh5B,EAAMmrC,QAAQnrC,EAAMmrC,QAAQrgC,OAAS,GA7DlDsgC,MAAMC,UAAUC,OACjBF,MAAMC,UAAUC,KAAO,WACnB,MAAOhpC,MAAKA,KAAKwI,OAAS,KAGlC9K,EAAMwD,GAAK6lC,EAAM7lC,IAAM,YACvBxD,EAAAA,SAAcqpC,EAAAA,UAAe,YAC7BrpC,EAAM4S,QAAU5S,EAAM4S,SAAW,OACjC5S,EAAMuoC,SAAWvoC,EAAMuoC,UAAY,gBACnCvoC,EAAMmrC,SAAWnrC,EAAMurC,MACvBL,IAMAlrC,EAAMwrC,YAAc,SAAUC,GAC1B,IAAKzrC,EAAMurC,KAEP,WADA9qC,SAAQ6jC,MAAM,wBAAyBtkC,EAAMurC,KAAME,EAGvD,KAAKA,EACD,OAAQzrC,EAAMurC,KAElB,KADA,GAAIG,IAAS1rC,EAAMurC,MACZG,EAAM5gC,QAAQ,CACjB,GAAI6gC,GAAOD,EAAMv4B,KAIjB,IAHAw4B,EAAK3rC,EAAMuoC,UAAU5kC,QAAQ,SAAUioC,GACnCF,EAAMjoC,KAAKmoC,KAEXD,EAAKnoC,KAAOioC,EAASjoC,GACrB,MAAOmoC,GAAK3rC,EAAMuoC,UAE1B,UAQJvoC,EAAM6rC,SAAW,WACR7rC,EAAM8rC,YAGX9rC,EAAMmrC,QAAQ1nC,KAAKvC,QAAQ6E,KAAK/F,EAAM8rC,YACtCZ,MAOJlrC,EAAM+rC,MAAQ,SAAUvlC,GACpBxG,EAAMmrC,QAAUnrC,EAAMmrC,QAAQa,MAAM,EAAGxlC,EAAQ,GAC/C0kC,KAtER,GAAItpC,IACAzB,KAAMA,EACNmB,SAAS,EACTvB,SAAU,IACVsB,YAAa,0CAEbrB,OACIurC,KAAQ,IACR34B,QAAW,KACX21B,SAAY,KACZvP,MAAS,KAGjB,OAAOp3B,GAnBXV,QACKC,OAAO,OACPS,UAAU,YAAaqpC,MA6HhC/pC,QAAQC,OAAO,gBACVS,UAAU,gBAAiB/B,kBAAkBosC,KAAK3pC,KAAM,QACxDV,UAAU,kBAAmB/B,kBAAkBosC,KAAK3pC,KAAM,UAC1DV,UAAU,gBAAiB/B,kBAAkBosC,KAAK3pC,KAAM,QACxDV,UAAU,iBAAkB/B,kBAAkBosC,KAAK3pC,KAAM,SACzD4pC,IAAI,WACD,YAEA5rC,GAAE6rC,GAAGtrC,MAAMurC,SAASC,KAChBC,UAAW,KACXC,MAAO,UAAW,UAAW,WAC7BC,OAAQ,KACRC,OAAQ,GACRC,MAAO,MAGXpsC,EAAE6rC,GAAGtrC,MAAMurC,SAASO,OAChBL,UAAW,KACXC,MAAO,UAAW,UAAW,WAC7BC,OAAQ,KACRI,YAAa,KACbH,OAAQ,GACRC,MAAO,MAGXpsC,EAAE6rC,GAAGtrC,MAAMurC,SAASS,MAChBP,UAAW,IACXC,KAAM,UACNC,OAAQ,GACR9C,IAAK,KACLD,IAAK,EACLqD,OAAQ,UACRC,YAAa,EACbL,MAAO,IAGXpsC,EAAE6rC,GAAGtrC,MAAMurC,SAASY,KAChBV,UAAW,IACXC,MAAO,WACPC,OAAQ,GACR9C,IAAK,KACLD,IAAK,EACLwD,QAAS,GACTP,MAAO,MAInB,WAEI,YAcA,SAASQ,GAAM5nC,EAASo3B,GAepB,QAASyQ,GAASntC,EAAOI,GA4DrB,QAASgtC,KACL,GAAIhN,GAASvI,EAAOwV,EAASC,EAAIC,EAAQb,EAAOF,EAAQgB,EAAUf,EAAQgB,EAAKC,EAAOC,EAAa9iC,EAC/F+iC,EAAKC,EACLC,EAAaC,EAAWC,EAAcC,EAAaC,EAAWC,CA8BlE,KA7BA/N,EAAUpgC,EAAMu3B,OAASv3B,EAAM0pC,IAC/B7R,EAAQ73B,EAAMouC,QAAUpuC,EAAM0pC,IAC9B2D,GAAW,EAAGxV,EAAQwW,GAAc,EAAIxW,GAASwW,GACjDL,EAAe,IAGfV,EAAKgB,GAAGC,OAAOnuC,EAAQ,IACvBmtC,GACIiB,IAA4B,GAAvBlB,EAAG,GAAG,GAAGmB,YACdC,MAA8B,GAAvBpB,EAAG,GAAG,GAAGmB,YAChBE,OAA+B,GAAvBrB,EAAG,GAAG,GAAGmB,YACjBG,KAA6B,GAAvBtB,EAAG,GAAG,GAAGmB,aAEnB/B,EAA+B,EAAvBY,EAAG,GAAG,GAAGmB,YAAkBlB,EAAOqB,KAAOrB,EAAOmB,MACxDlC,EAASE,GAAS,IAClBc,EAAmB,GAARd,EACXD,EAASz/B,KAAKy8B,IAAIiD,EAAOF,GAAU,EAGnCiB,EAAMH,EAAGuB,OAAO,OACXhuB,KAAK,QAAS6rB,EAAQa,EAAOqB,KAAOrB,EAAOmB,OAC3C7tB,KAAK,SAAU2rB,EAASe,EAAOiB,IAAMjB,EAAOoB,OAAgC,GAAvBrB,EAAG,GAAG,GAAGmB,aAC9D5tB,KAAK,QAAS,SAAW7gB,EAAM0pC,KAC/B7oB,KAAK,QAAS,SAAW7gB,EAAM0pC,KAC/BoF,MAAM,UAAW,SACjBA,MAAM,SAAU,QACrBpB,EAAQD,EAAIoB,OAAO,KACdhuB,KAAK,YAAa,cAAgB6rB,EAAuB,EAAda,EAAOqB,MAAa,EAAI,MAAQpC,EAASe,EAAOiB,KAAO,EAAI,KAEtGb,EAAc9iC,EAAI,EAAG+iC,EAAMS,EAAkBT,GAAL,EAAgBA,GAAL/iC,EAAWA,GAAK+iC,EACnED,EAAmBC,GAAL,IAAa/iC,IAAMA,EAClCijC,EAAciB,EAAUf,EAAeX,EAAQxiC,EAAI,IACnDkjC,EAAYD,EAAciB,EAAU1B,EAAQxiC,IAC5CmjC,GAAgBX,EAAQxiC,EAAI,GAC5BojC,EAA8B,IAAhBN,EAAoB,EAAIqB,EAAS,EAC/Cd,EAAYP,IAAgBU,EAAc,EAAIW,EAAS,EACvDb,EAAMG,GAAGb,IAAIU,MAAMc,YAAYxC,EAASyC,GAAYtC,YAAYH,EAASyC,EAAa1B,GAAU2B,WAAWrB,EAAcG,GAAamB,SAASrB,EAAYG,GAC3JR,EAAMmB,OAAO,QAAQhuB,KAAK,QAAS,kBAAoB8sB,GAAa9sB,KAAK,IAAKstB,EASlF,IAAIkB,GAAON,EAAU/uC,EAAMu3B,OAASv3B,EAAM0pC,IAAM,GAC5C4F,EAAI5C,EAAQ,EAAI,IAAMc,EAEtB+B,GAAYviC,KAAK6P,IAAIwyB,GAAQC,EAAI,IACjCE,GAAYxiC,KAAK4P,IAAIyyB,GAAQC,EAAI,IACjCG,EAAUzvC,EAAMu3B,OAAS,KAAQv3B,EAAMu3B,OAAS,EAEhDmY,EAAOX,EAAU/uC,EAAMouC,QAAUpuC,EAAM0pC,IAAM,IACnC18B,KAAK6P,IAAI6yB,GAAQJ,GACjBtiC,KAAK4P,IAAI8yB,GAAQJ,CAE/B5B,GAAMmB,OAAO,QACRC,MAAM,cAAe,gBACrBA,MAAM,YAAa,WAChB,MAAQ,IAAKpC,EAAQ,IAAO,OAE/B7rB,KAAK,IAAK0uB,GACV1uB,KAAK,IAAK2uB,GACV3uB,KAAK,cAAe,WAEjB,MAAO4uB,GAAUzvC,EAAM0pC,IAAM,GAAQ,QAAU,QAElD/oC,KAAK0jC,EAASr3B,KAAKE,MAAMuiC,EAAUzvC,EAAM0pC,IAAM,KAAQ,QAa5DmE,EAAS,GAAI8B,GAAe,IAARjD,EAAsB,IAARA,GAClCmB,EAAO+B,OAAOlC,EAAO,GACrBG,EAAOgC,UAAUnC,EAAOtN,GAhJ5B,GAEIuP,GAAQT,EAAYY,EAAUzB,EAAaW,EAAQe,EAAWhB,EAF9D1K,EAAU/+B,EAAQ,UACNA,GAAQ,YAExB+oC,GAAc,EACdW,EAAS,IACTE,EAAa,GAGba,EAAY,SAAUC,GAClB,MAAc,KAAPA,GAEXjB,EAAY,SAAUiB,GAClB,MAAOF,GAASC,EAAUC,KAE9BF,EAAW,SAAUG,GACjB,MAAOA,GAAMjjC,KAAKmQ,GAAK,KAI3BwyB,EAAS,WACL,QAASA,GAAOO,EAAKC,GACjB7tC,KAAK4tC,IAAMA,EACX5tC,KAAKmqC,OAAS0D,EA+BlB,MA5BAR,GAAOtE,UAAUuE,OAAS,SAAUtC,EAAI0C,GAEpC,MADA1C,GAAGuB,OAAO,UAAUhuB,KAAK,QAAS,iBAAiBA,KAAK,KAAM,GAAGA,KAAK,KAAM,GAAGA,KAAK,IAAKve,KAAKmqC,QACvFa,EAAGuB,OAAO,QAAQhuB,KAAK,QAAS,UAAUA,KAAK,IAAKve,KAAK8tC,MAAMJ,KAE1EL,EAAOtE,UAAUwE,UAAY,SAAUvC,EAAI0C,GACvC,GAAIK,EAEJ,OADAA,GAAO/tC,KACAgrC,EAAGp6B,aAAao9B,MAAM,KAAKC,KAAK,WAAWrnB,SAAS,KAAMsnB,UAAU,WAAWC,MAAM,WAAY,WACpG,MAAO,UAAUC,GACb,GAAIjkC,EAEJ,OADAA,GAAWikC,EAAmBV,EACvB1B,GAAGC,OAAOjsC,MAAMue,KAAK,IAAKwvB,EAAKD,MAAM3jC,QAIxDkjC,EAAOtE,UAAU+E,MAAQ,SAAUJ,GAC/B,GAAIW,GAASC,EAASC,EAAOC,EAAOC,EAAQC,EAAQC,EAAUC,EAAMC,CAUpE,OATAF,GAAWlC,EAAUiB,EAAO,GAC5BW,EAAU,EACVC,EAAU,EACVM,EAAOP,EAAUruC,KAAK4tC,IAAMljC,KAAK6P,IAAIo0B,GACrCE,EAAOP,EAAUtuC,KAAK4tC,IAAMljC,KAAK4P,IAAIq0B,GACrCJ,EAAQF,EAAUruC,KAAKmqC,OAASz/B,KAAK6P,IAAIo0B,EAAWjkC,KAAKmQ,GAAK,GAC9D2zB,EAAQF,EAAUtuC,KAAKmqC,OAASz/B,KAAK4P,IAAIq0B,EAAWjkC,KAAKmQ,GAAK,GAC9D4zB,EAASJ,EAAUruC,KAAKmqC,OAASz/B,KAAK6P,IAAIo0B,EAAWjkC,KAAKmQ,GAAK,GAC/D6zB,EAASJ,EAAUtuC,KAAKmqC,OAASz/B,KAAK4P,IAAIq0B,EAAWjkC,KAAKmQ,GAAK,GACxD,KAAO0zB,EAAQ,IAAMC,EAAQ,MAAQI,EAAO,IAAMC,EAAO,MAAQJ,EAAS,IAAMC,GAEpFrB,KA+FXvC,IACAlsC,QAAQd,QAAQs8B,GAASuP,KAAK,SAAU,WAEpCqC,GAAGC,OAAO,aAAevuC,EAAM0pC,KAAK/oB,SACpCysB,MAzKR,MA+CAD,GAASvqC,SAAW,QAAS,YA9CzB7C,SAAU,IACVuB,SAAS,EACTtB,OACI0pC,IAAK,KACLnS,OAAQ,IACR6W,QAAS,IACT3E,IAAK,IACL+D,SAAU,MAEdrtC,KAAMgtC,GA8BdD,EAAMtqC,SAAW,UAAW,WA9C5B1B,QACKC,OAAO,OACPS,UAAU,QAASsrC,MAsL5B,WACI,YAOA,SAASkE,KACL,GAAIxvC,IACA7B,SAAU,IACVC,OACIsxB,OAAQ,IACRhF,KAAM,IACN+kB,MAAO,IACPC,UAAW,KAEfjwC,YAAa,8CAEjB,OAAOO,GAhBXV,QACKC,OAAO,OACPS,UAAU,aAAcwvC,MAmBjC,WACI,YAQA,SAASG,KAUL,QAASpxC,GAAKH,EAAOI,GAGjB,QAASa,GAAO0K,GACZ,GAAI2gB,GAAO3gB,EAAM6lC,OAAOC,MAAM,EAC9BzxC,GAAMuxC,UAAYjlB,EAAOA,EAAOpR,OAChClb,EAAM0xC,SALVtxC,EAAQ6rC,KAAK,SAAUhrC,GAV3B,GAAIW,IACAzB,KAAMA,EACNJ,SAAU,IACVC,OACIuxC,UAAW,KAGnB,OAAO3vC,GAdXV,QACKC,OAAO,OACPS,UAAU,YAAa2vC,MA6BhC,WAEI,YAcA,SAASI,GAAgBC,EAAU7lC,EAAY8lC,GAS3C,QAASC,GAAYxE,EAAIjE,GAExBiE,EAAGyE,WAAW,oBACXzE,EAAGzsB,KAAK,cAAe,MAAQwoB,EAAM2I,QAAU,0BAC/C1E,EAAGzsB,KAAK,kBAAmB,UAC3B,IAAIsrB,GAAKyF,EAAStE,EAElB,OAAO,UAAUttC,GAChB,IAAI+L,EAAW/L,EAAMiyC,IAAIp8B,WAAawzB,EAAM7lC,IAA5C,CAEAuI,EAAW/L,EAAMiyC,IAAIp8B,WAAawzB,EAAM7lC,KAAM,CAE9C,KACC2oC,EAAGnsC,GACF,MAAO8U,OAtBd,MAiDAg9B,GAAYlvC,SAAW,KAAM,UAhDzB7C,SAAU,IACVuB,SAAS,EACTyoC,QAAS,UACTmI,QAASJ,GAsCjBH,EAAgB/uC,SAAW,WAAY,aAAc,aAhDrD1B,QACKC,OAAO,OACPS,UAAU,kBAAmB+vC,MAoCtC,WACI,YAOA,SAASQ,GAAWpuB,GAchB,QAAS5jB,GAAKH,EAAOI,GAEjB,QAASgyC,KACLC,QAAQC,OACRtyC,EAAM0xC,SAHVtxC,EAAQ6rC,KAAK,QAASmG,GAd1B,GAAIxwC,IACAzB,KAAMA,EACNmB,SAAS,EACTvB,SAAU,IACVC,OACIkH,aAAgB,KAChB8c,WAAc,KACdO,YAAe,MAEnBljB,YAAa,8CAEjB,OAAOO,GAiCXuwC,EAAWvvC,SAAW,UAlDtB1B,QACKC,OAAO,OACPS,UAAU,aAAcuwC,MA6BjC,WACI,YAOA,SAASI,GAAUpP,GAUf,QAAShjC,GAAKH,EAAOI,GACjBJ,EAAMupC,OAAO,YAAa,SAAUrlC,GAClB,SAAVA,GACAi/B,EAAS,WACL/iC,EAAQ,GAAGiY,YAb3B,GAAIzW,IACAzB,KAAMA,EACNJ,SAAU,IACVC,OACIuyC,UAAW,KAGnB,OAAO3wC,GAsCX2wC,EAAU3vC,SAAW,YAnDrB1B,QACKC,OAAO,OACPS,UAAU,YAAa2wC,MA2BhC,WACI,YAEArxC,SACKC,OAAO,yBAQhB,WACI,YAOA,SAAS6B,GAAmBwvC,GAkBxB,QAASC,GAAejvC,EAAID,GACxB,MAAOivC,GAAeE,EAAQlvC,EAAK,IAAMD,GAAM2jC,MAGnD,QAAS/jC,GAAWS,EAAQC,EAAU8uC,EAAQ7uC,EAAUC,EAAOC,GAC3D,MAAOwuC,GAAe,+BAA+BtL,KACjDtjC,OAAQA,EACRC,SAAUA,EACV8uC,OAAQA,EACR7uC,SAAUA,EACVC,OAAQA,EACRC,WAAWA,IA5BnB,GAAI0uC,GAAQ,kBACRE,EAAQJ,EAAeE,GACvBG,EAAS,yBACTC,EAASN,EAAeK,EAC5B,QACIE,aAAcH,EAAM1L,IACpB8L,YAAaJ,EAAMK,KAEnBC,YAAaV,EAAeE,EAAQ,gBAAgBxL,IACpDiM,SAAUP,EAAMQ,QAChBX,eAAgBA,EAChBY,UAAWP,EAAO5L,IAClB/jC,WAAYA,GAkCpBH,EAAmBJ,SAAW,kBApD9B1B,QACKC,OAAO,mBACPmyC,QAAQ,qBAAsBtwC,MAwCvC,WACI,YAOA,SAASuwC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,oBACHxE,WAAY,wBACZE,aAAc,KACdL,YAAa,8CACbuoB,IAAK,iBAGb6pB,EAAmBC,KAAK,yBAA0B,gBAuCtDH,EAAY3wC,SAAW,iBAAkB,sBArDzC1B,QACKC,OAAO,mBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASK,GAAsBtqC,EAAUvG,EAAMwa,EAAW9X,EAAQpB,EAAerB,EAAoB2C,EAAMH,EAAiBE,EAAa1D,GAoBrI,QAASkB,KACLH,EAAKrC,IAAI2B,EAAGI,OACZT,EAAU2H,WAAW1F,KAAK,SAAUC,GAChC7B,EAAGikB,QAAUtkB,EAAUukB,aACnB,QAAS,mBAAoB,eAEjC9lB,QAAQC,IAAI2B,EAAGikB,WAEnButB,IACAvQ,GACA,IAAIhjB,GAAQ,GAAIlV,KAChBkV,GAAQA,EAAMrV,QAAQqV,EAAMjV,UAAY,GACxChJ,EAAGyxC,aAAaC,cAAgBz9B,OAAOgK,GAAO/J,OAAO,cAGzD,QAASs9B,KACLG,IAAW/vC,KAAKgwC,GAGpB,QAASD,KACL,MAAOhxC,GAAmBkwC,cAAcjvC,KAAK,SAAUX,GACnDjB,EAAGg/B,MACH,IAAI6S,IAAiB,EAAG,EAAG,EAC3B5wC,GAAMG,MACFD,GAAI,EACJ0C,KAAM,cACNzD,MAAO,cACP0xC,WAAW,IAEf7wC,EAAM0L,KAAK,SAAUolC,EAAIC,GACrB,MAAOD,GAAG5wC,GAAK6wC,EAAG7wC,KAEtBF,EAAMK,QAAQ,SAAUJ,GACpBA,EAAKd,MAAQc,EAAKd,MAAMgQ,MAAM,KAAK,GAC9BlP,EAAK4wC,WAAcD,EAActe,SAASryB,EAAKC,KAChDnB,EAAGqB,MAAMD,MACLF,KAAMA,IAEdlB,EAAGg/B,IAAI99B,EAAKC,KACR8tB,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,OAO1B,QAASL,KACLjxC,EAAmB+vC,eAAe9uC,KAAK,SAAUswC,GAC7CA,EAAO5wC,QAAQ,SAAU+uC,GACrB8B,EAAO9B,EAAMjzB,KAAO,GAAKizB,EAAMC,QAAUD,EAAMlvC,GAC/CnB,EAAGqB,MAAMC,QAAQ,SAAU8V,GACnBA,EAAKlW,KAAKC,KAAOkvC,EAAMC,SACvBl5B,EAAKi5B,EAAMjzB,MAAQizB,EAAMA,aAQ7C,QAAS+B,GAAKh7B,EAAMgG,GAChB,GAAIi1B,IACAlxC,GAAMgxC,EAAO/0B,EAAO,GAAKhG,EAAKlW,KAAKC,IACnCkvC,MAASj5B,EAAKgG,GACdlc,MACIC,GAAMiW,EAAKlW,KAAKC,IAEpBmvC,OAAUl5B,EAAKlW,KAAKC,GACpBic,KAAQA,EAEZk1B,GAAOD,GAGX,QAASC,GAAOjC,GACZ,MAAO1vC,GAAmBgwC,YAAYN,GAG1C,QAASpP,KACL99B,EAAgBgS,kBAAkBvT,KAAK,SAAUC,GAC7C7B,EAAG6G,UAAY7G,EAAG6G,UAAU/E,OAAOD,KAI3C,QAASmvC,KAeL,QAASuB,KACLjvC,EAAKoB,MAAM,QAAS,gCAfxB8tC,GAEA,IAAI7tC,KACA3E,GAAGyxC,eACH9sC,EAAOlD,SAAWzB,EAAGyxC,aAAagB,gBAClC9tC,EAAOjD,OAAS1B,EAAGyxC,aAAaC,cAChC/sC,EAAOhD,WAAa3B,EAAGyxC,aAAa5rC,SAAW7F,EAAGyxC,aAAa5rC,SAAS1E,GAAK,MAEjFR,EAAmBqwC,UAAUrsC,GAAQ/C,KAAK,SAAUhE,GAChDoC,EAAGwwC,OAAS5yC,EACZ80C,IAAqB9wC,KAAK+wC,EAAcJ,IAEzCA,GAWP,QAASC,KACLxyC,EAAGwwC,UACH3xC,QAAQyC,QAAQtB,EAAGg/B,IAAK,SAAUlH,EAAG8a,GACjC5yC,EAAGg/B,IAAI4T,IACH3jB,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,KAGlBjyC,EAAG6yC,MACC5jB,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,EACVa,aAAc,EACdrtC,MAAO,GAOf,QAASktC,KACLI,IACAC,IACAC,IAMJ,QAASD,KACLhzC,EAAGwwC,OAAOlvC,QAAQ,SAAU4xC,GACxBA,EAAWC,cACXD,EAAWE,WAAa,EACxBF,EAAWlU,KACP/P,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,GAEdjyC,EAAGqB,MAAMC,QAAQ,SAAU8V,GACvB87B,EAAWC,WAAW/xC,KAAKiyC,EAAeH,EAAY97B,MAE1DpX,EAAG6yC,KAAKptC,QACRzF,EAAG6yC,KAAKC,cAAgBI,EAAWE,aAKvCpzC,EAAG6yC,KAAKC,aAAe9yC,EAAG6yC,KAAKC,aAAe9yC,EAAG6yC,KAAKptC,MAG1D,QAAS4tC,GAAeH,EAAY97B,GAChC,GAAIuG,IACAsR,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,EAuBd,OArBIiB,GAAW7wC,OAAOixC,eAAel8B,EAAKlW,KAAKC,MAE3Cwc,EAAOsR,OAASikB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8tB,QAAU,EAC1DtR,EAAO6S,OAAS0iB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAIqvB,QAAU,EAC1D7S,EAAOs0B,SAAWiB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8wC,UAAY,EAE9DiB,EAAWlU,IAAI/P,QAAUikB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8tB,QAAU,EACnEikB,EAAWlU,IAAIxO,QAAU0iB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAIqvB,QAAU,EACnE0iB,EAAWlU,IAAIiT,UAAYiB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8wC,UAAY,EAEvEjyC,EAAGg/B,IAAI5nB,EAAKlW,KAAKC,IAAI8tB,QAAUikB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8tB,QAAU,EACzEjvB,EAAGg/B,IAAI5nB,EAAKlW,KAAKC,IAAIqvB,QAAU0iB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAIqvB,QAAU,EACzExwB,EAAGg/B,IAAI5nB,EAAKlW,KAAKC,IAAI8wC,UAAYiB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8wC,UAAY,EAE7EjyC,EAAG6yC,KAAK5jB,QAAUikB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8tB,QAAU,EAC5DjvB,EAAG6yC,KAAKriB,QAAU0iB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAIqvB,QAAU,EAC5DxwB,EAAG6yC,KAAKZ,UAAYiB,EAAW7wC,OAAO+U,EAAKlW,KAAKC,IAAI8wC,UAAY,GAEpEiB,EAAWE,YAAcG,EAAwBn8B,EAAKlW,KAAKC,GAAI,UAAYwc,EAAOsR,OAC5EskB,EAAwBn8B,EAAKlW,KAAKC,GAAI,UAAYwc,EAAO6S,OACzD7S,EAAOs0B,SACNt0B,EAGX,QAAS41B,GAAwBjD,EAAQ/uC,GACrC,GAAIoc,GAAS9E,MAQb,OAPA7Y,GAAGqB,MAAMC,QAAQ,SAAU8V,GACnBA,EAAKlW,KAAKC,KAAOmvC,IACjB3yB,EAASvG,EAAK7V,MAGAsX,eAAX8E,IACPvf,QAAQ6jC,MAAM,UAAY1gC,EAAS,6BAA+B+uC,GAC/D3yB,EAMX,QAASo1B,KACL/yC,EAAGwwC,OAAOlvC,QAAQ,SAAUkyC,GAExBA,EAAOnxC,OAAO,IACV4sB,OAAQ,EACRuB,OAAQ,EACRyhB,SAAU,GAEdpzC,QAAQyC,QAAQkyC,EAAOnxC,OAAQ,SAAU2jB,EAAO7lB,GAClC,EAANA,GAAkB,GAAPA,IAEXqzC,EAAOnxC,OAAO,GAAG4sB,OAASjJ,EAAMiJ,QAAU,EAC1CukB,EAAOnxC,OAAO,GAAGmuB,OAASxK,EAAMwK,QAAU,EAC1CgjB,EAAOnxC,OAAO,GAAG4vC,UAAYjsB,EAAMisB,UAAY,EAE/CjsB,EAAMiJ,OAAS,EACfjJ,EAAMwK,OAAS,EACfxK,EAAMisB,SAAW,OAQjC,QAASwB,GAAYlyC,EAAQlB,EAAMa,GAC/B9C,QAAQC,IAAI,8BAA8B2B,EAAGyxC,aAAa5rC,SAC1D,IAAIjF,IACAW,OAAQA,EACRlB,KAAMA,EACNa,KAAMA,EACNS,WAAa3B,EAAGyxC,aAAa5rC,SAAW7F,EAAGyxC,aAAa5rC,SAAS1E,GAAK,KACtEM,SAAUzB,EAAGyxC,aAAezxC,EAAGyxC,aAAagB,gBAAkB,KAC9D/wC,OAAQ1B,EAAGyxC,aAAezxC,EAAGyxC,aAAaC,cAAgB,KAG9Dx2B,GAAU3F,MACNgI,WAAW,EACXve,YAAa,0DACbG,WAAY,wBACZE,aAAc,KACdq0C,SAAU,SACVl2B,KAAM,KACNE,SACI9c,UAAa,WACT,MAAOA,OAKnBxC,QAAQC,IAAI,SAAUuC,GAG1B,QAAS2E,GAAarG,GAIlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MAJd,MAAOpC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAWxD,QAASytC,KAEDjzC,EAAG2zC,cAAclrC,OACjBzI,EAAGwwC,OAAOlvC,QAAQ,SAAU4xC,GACxBA,EAAWU,OAAS5zC,EAAG2zC,cAActjC,QAAQ6iC,EAAW7yC,KAAKmB,UAAY,IAG7ExB,EAAGwwC,OAAOlvC,QAAQ,SAAU4xC,GACxBA,EAAWU,QAAS,IAQhC,QAASlB,KACL,GAAI/wC,GAAa3B,EAAGyxC,aAAa5rC,SAAW7F,EAAGyxC,aAAa5rC,SAAS1E,GAAK,KACtE0yC,IAIJ,OAHA7zC,GAAGwwC,OAAOlvC,QAAQ,SAAUkyC,GACxBK,EAAaL,EAAOnzC,KAAKmB,WAAY,IAElC6B,EAAYywC,kBAAkBnyC,GAAYC,KAAK,SAAU6D,GAY5D,MAXIzF,GAAGikB,SACHxe,EAAMnE,QAAQ,SAAUjB,GACfwzC,EAAaxzC,EAAKmB,WAEnBxB,EAAGwwC,OAAOpvC,MACNiB,UACAhC,KAAMA,MAKfL,EAAGwwC,SAqClB,QAASuD,KAEDr+B,SAASC,eAAe,kBACxBD,SAASC,eAAe,gBAAgB82B,MAAMuH,QAAU,IACpDt+B,SAASnC,KAAK0gC,UAAY,KAAOv+B,SAASw+B,gBAAgBD,UAAY,IACtEv+B,SAASC,eAAe,gBAAgB82B,MAAM0H,QAAU,QAExDz+B,SAASC,eAAe,gBAAgB82B,MAAM0H,QAAU,QAhXpE,GAAIn0C,GAAKC,IACTD,GAAGqB,QACH,IAAI8wC,KACJnyC,GAAGyxC,gBACHzxC,EAAG6G,YACC1F,GAAI,KACJf,MAAO,kBAEXJ,EAAGI,MAAQ,0BACXJ,EAAGyzC,YAAcA,EACjBzzC,EAAG8G,YAAczD,EAAY0D,WAC7B/G,EAAGuF,aAAeA,EAClBvF,EAAGoyC,KAAOA,EACVpyC,EAAGgxC,UAAYA,EACfhxC,EAAGizC,iBAAmBA,EACtBpyC,IAyTAuC,EAAO8jC,OACH,WACI,OAAQroC,QAAQd,QAAQ,eAAe,GAAGquC,YAAavtC,QAAQd,QAAQ,eAAe,GAAGq2C,cAAc71C,KAAK,MAEhH,SAAUsD,GACN,IACIzD,QAAQC,IAAI,qBAAsBwD,EAAMuO,MAAM,MAE9CsF,SAASC,eAAe,gBAAgB82B,MAAMpC,MAAQxoC,EAAMuO,MAAM,KAAK,GAAK,KAC5EsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM;AACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,OAAO82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KACjFsF,SAASC,eAAe,QAAQ82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,KAClFsF,SAASC,eAAe,QAAQ82B,MAAMpC,MAAUxoC,EAAMuO,MAAM,KAAK,GAAK,GAAM,GAAM,IAClF,IAAIi6B,GAAQxrC,QAAQd,QAAQ,iBAAiB,GAAGquC,WAChDhuC,SAAQC,IAAIgsC,EAAOA,EAAQ,IAC7B,MAAO53B,GACLrU,QAAQ6jC,MAAM,sCAAuCxvB,MAMjE6C,OAAO++B,SAAW,WACdN,KAtTRxC,EAAsBhxC,SAAW,WAAY,OAAQ,YAAa,SAAU,gBAAiB,qBAAsB,OAAQ,kBAAmB,cAAe,aAtD7J1B,QACKC,OAAO,mBACPK,WAAW,wBAAyBoyC,MA4X7C,WACI,YAEA1yC,SACKC,OAAO,mBAShB,WACI,YAOA,SAASuE,GAAY8sC,EAAgBnhB,EAAI/a,GAmErC,QAASqgC,KACL,GAAI/sB,GAAMgtB,EAAU,OACpB,OAAOpE,GAAe5oB,GAAKsd,IAAItd,GAGnC,QAASitB,GAAQhzC,EAAUizC,GACvB,GAAIltB,GAAMgtB,EAAU,SAAW/yC,EAAW,UAC1C,OAAO2uC,GAAe5oB,GAAKmtB,cAAcD,EAAM,MAGnD,QAASE,GAAenzC,GACpB,GAAI+lB,GAAMgtB,EAAU,SAAW/yC,EAAW,UAC1C,OAAO2uC,GAAe5oB,GAAKsd,IAAItd,GAGnC,QAASvhB,GAAU4uC,EAAQjzC,GACvB,GAAIkzC,GAAW7lB,EAAG8lB,QACdvtB,EAAMgtB,EAAU,4BAChB5vC,IACAhD,KACAgD,EAAOhD,WAAaA,GAEpBizC,IACAjwC,EAAOF,KAAOmwC,EAElB,IAAIG,GAAaxtB,EAAM,OAASqtB,GAAU,GAAK,OAASjzC,GAAc,EACtE,OAAIqzC,GAAWD,IACXC,EAAWD,GAAYn3C,MACvBqW,IAAS8S,KAAKiuB,EAAWD,GAAYE,MAAQC,GAC7C92C,QAAQC,IAAI,aAAe02C,GAC3BF,EAASn3B,QAAQs3B,EAAWD,GAAYn3C,MACjCi3C,EAAS1hC,SAEbg9B,EAAe5oB,GAAKsd,IAAIlgC,GAAQ/C,KAAK,SAAUC,GAMlD,MALAmzC,GAAWD,IACPn3C,KAAMiE,EACNozC,KAAMhhC,KAEV4gC,EAASn3B,QAAQ7b,GACVA,GACR,SAAU2E,GAGT,MAFAwuC,GAAWD,GAAc,KACzBF,EAASrkB,OAAOhqB,GACTA,IAIf,QAASstC,GAAkBnyC,GACvB,GAAI4lB,GAAMgtB,EAAU,0BAChB5vC,IAIJ,OAHIhD,KACAgD,EAAOhD,WAAaA,GAEjBwuC,EAAe5oB,GAAKsd,IAAIlgC,GAGnC,QAASskB,GAAWksB,GAChB,GAAIN,GAAW7lB,EAAG8lB,QACdvtB,EAAMgtB,EAAU,QAChB/vC,KACAuwC,EAAaxtB,CACjB4tB,GAAQ7zC,QAAQ,SAAUmD,GACtBswC,GAAe,MAAQtwC,EACvBD,EAAMpD,MAAMqD,KAAKA,KAErB,IAAI7G,IACA4G,MAAOA,EAEX,OAAIwwC,GAAWD,IACXC,EAAWD,GAAYn3C,MACvBqW,IAAS8S,KAAKiuB,EAAWD,GAAYE,MAAQC,GAC7C92C,QAAQC,IAAI,aAAe02C,GAC3BF,EAASn3B,QAAQs3B,EAAWD,GAAYn3C,MACjCi3C,EAAS1hC,SAEbg9B,EAAe5oB,GAAKqpB,KAAKhzC,GAAOmoB,KAAM,EAAGvI,KAAM,MAAQ5b,KAAK,SAAUC,GAKzE,MAJAmzC,GAAWD,IACPn3C,KAAMiE,EACNozC,KAAMhhC,KAEHpS,GACR,SAAU2E,GAET,MADAwuC,GAAWD,GAAc,KAClBvuC,IAIf,QAAS4uC,GAAuB5zC,EAAUmD,GACtC,GAAI4iB,GAAM8tB,EAAO,SAAW7zC,EAAW,mBACvC,OAAO2uC,GAAe5oB,GAAKqpB,KAAK,KAAMjsC,GAG1C,QAAS2wC,GAAyB9zC,EAAUmD,GACxC,GAAI4iB,GAAM8tB,EAAO,SAAW7zC,EAAW,mBACvC,OAAO2uC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS4wC,GAAkB/zC,EAAUmD,GACjC,GAAI4iB,GAAM8tB,EAAO,SAAW7zC,EAAW,gBACvC,OAAO2uC,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAG7C,QAAS8wC,GAAcj0C,EAAU5D,GAC7B,GAAI2pB,GAAM8tB,EAAO,SAAW7zC,EAAW,gBACvC,OAAO2uC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAAS83C,GAAoBl0C,EAAU5D,GACnC,GAAI2pB,GAAM8tB,EAAO,gBAAkB7zC,EAAW,gBAC9C,OAAO2uC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAAS+3C,GAAWn0C,EAAU5D,GAC1B,GAAI2pB,GAAMgtB,EAAU,SAAW/yC,CAC/B,OAAO2uC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASg4C,GAAiBp0C,EAAUmD,GAChC,GAAI4iB,GAAMgtB,EAAU,SAAW/yC,EAAW,aAC1C,OAAO2uC,GAAe5oB,GAAKqpB,KAAK,KAAMjsC,GAG1C,QAASkxC,GAAmBr0C,EAAUmD,GAClC,GAAI4iB,GAAM8tB,EAAO,SAAW7zC,EAAW,aACvC,OAAO2uC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASmxC,GAAkBt0C,GACvB,GAAI+lB,GAAM8tB,EAAO,SAAW7zC,EAAW,iBACvC,OAAO2uC,GAAe5oB,GAAKsd,MAG/B,QAASkR,GAAatB,GAClB,GAAIltB,GAAMgtB,EAAU,oBACpB,OAAOpE,GAAe5oB,GAAKmtB,cAAcD,GAU7C,QAASuB,GAAuBvxC,EAAME,GAClC,GAAI4iB,GAAM8tB,EAAO,SAAW5wC,EAAO,mBACnC,OAAO0rC,GAAe5oB,GAAKqpB,QAASjsC,GAGxC,QAASsxC,GAAqBrB,GAC1B,GAAIrtB,GAAM8tB,EAAO,SAAWT,EAAS,uBACrC,OAAOzE,GAAe5oB,GAAKqpB,SAI/B,QAASsF,GAAyBzxC,EAAME,GACpC,GAAI4iB,GAAM8tB,EAAO,SAAW5wC,EAAO,mBACnC,OAAO0rC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASwxC,GAAkB1xC,EAAME,GAC7B,GAAI4iB,GAAM8tB,EAAO,SAAW5wC,CAC5B,OAAO0rC,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAU7C,QAASyxC,GAAwBC,EAAc1xC,GAC3C,GAAI4iB,GAAM8tB,EAAO,eAAiBgB,CAClC,OAAOlG,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAS/C,QAAS2xC,GAAgB3xC,GACrB,GAAI4iB,GAAMgvB,EAAW,iBACrB,OAAOpG,GAAe5oB,GAAKsd,IAAIlgC,GAGnC,QAASugC,GAAUvgC,GACf,GAAI4iB,GAAMgtB,EAAU,YACpB,OAAOpE,GAAe5oB,GAAKsd,IAAIlgC,GAGnC,QAAS6xC,KACL,OACIC,MAAS,OACTC,SAAY,QACZC,OAAU,QAIlB,QAAS5vC,GAAW1G,GAChB,MAAOm2C,KAAan2C,EAAK+T,OA5Q7B,GAAIihC,GAAO,iBACPd,EAAU,oBACVgC,EAAWlB,EAAO,aAClBzP,EAAauK,EAAekF,EAAO,gBACnC5wC,EAAO0rC,EAAekF,EAAO,UAC7Bh1C,EAAO8vC,EAAekF,EAAO,UAC7BpwC,EAAUkrC,EAAeoE,EAAU,UACtCqC,EAAgBzG,EAAeoE,EAAU,gBACtCzP,GACAkR,uBAAwBA,EACxBC,qBAAsBA,EACtBb,uBAAwBA,EACxBG,kBAAmBA,EACnBsB,eAAgB1G,EAAekF,EAAO,mBAAmBzE,KACzD3M,qBAAsBkM,EAAekF,EAAO,0BAA0BzE,KACtEkG,WAAYryC,EAAKmsC,KACjBmG,WAAY9xC,EAAQ2rC,KACpBoG,iBAAkB7G,EAAekF,EAAO,iBAAiBzE,KACzDsF,yBAA0BA,EAC1BZ,yBAA0BA,EAC1B2B,WAAYxyC,EAAAA,UACZyyC,WAAY72C,EAAAA,UACZ+1C,wBAAyBA,EACzBD,kBAAmBA,EACnBgB,kBAAmBvR,EAAWf,IAC9BuS,eAAgBxR,EAAWgL,KAC3ByG,YAAa5yC,EAAKogC,IAClB9gB,eAAgBosB,EAAekF,EAAO,OAAOxQ,IAC7CyS,cAAe1R,EAAWmL,QAC1BwG,QAAS9yC,EAAKssC,QACdyG,QAASn3C,EAAK0wC,QACduD,MAAOA,EACVmD,aAActH,EAAeoE,EAAU,UAAU3D,KACjD9qC,YAAa8wC,EAAc/R,IACxB7+B,UAAWA,EACXijB,WAAYA,EACZwsB,cAAeA,EACfC,oBAAqBA,EACrBC,WAAYA,EACZC,iBAAkBA,EAClBC,mBAAoBA,EACpBrB,QAASA,EACTG,eAAiBA,EACjB2B,gBAAiBA,EACjBpR,UAAWA,EACXn+B,WAAYA,EACZ2wC,SAAUvH,EAAeoE,EAAU,OAAOiB,IAC1CM,kBAAmBA,EACnBC,aAAcA,EACdjC,kBAAmBA,GAInBoB,EAAW,IACXF,IACJ,OAAOlQ,GANXzhC,EAAY9C,SAAW,iBAAkB,KAAM,UAvD/C1B,QACKC,OAAO,aACPmyC,QAAQ,cAAe5tC,MAuRhC,WACI,YAOA,SAAS6tC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,cACHg0C,YAAU,EACVj6B,WACAk6B,SAAU,sBACVrwB,IAAK,WAER5jB,MAAM,mBACHxE,WAAY,sBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,uCACbuoB,IAAK,UAER5jB,MAAM,sBACHxE,WAAY,wBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,yCACbuoB,IAAK,uBAER5jB,MAAM,mBACHxE,WAAY,wBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,0CACbuoB,IAAK,mBAER5jB,MAAM,iBACHxE,WAAY,mBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,oCACbuoB,IAAK,QAIb6pB,EAAmBC,KAAK,SAAU,eAClCD,EAAmBC,KAAK,wBAAyB,eAArDH,EAAY3wC,SAAW,iBAAkB,sBAxDzC1B,QACKC,OAAO,aACPwyC,OAAOJ,MA2DhB,WACC,YAOA,SAAS2G,GAAoB5wC,EAAUvG,EAAMsB,EAAeqB,EAAaF,EAAiBiO,EAAwB9N,GAsBjH,QAASzC,KACRH,EAAKrC,IAAI2B,EAAGI,OACZ+U,IAAkBvT,KAAK,WACtB2P,IAAyB3P,KAAK,WAC7By1C,IAAcz1C,KAAK,WAClB5B,EAAGoC,YAAc,GAAIJ,IACpBgkB,MAAO,GACcD,KAAM,EACNgR,QAAS+gB,QAAQ,GACjB7xB,SACIpiB,KAAM,SAG/BxB,QAAS,EAAG,GAAI,GAAI,IACpBC,QAASm1C,UAOd,QAAStiC,KACR,MAAOhS,GAAgBgS,kBAAkBvT,KACxC,SAAUhE,GAET,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAKb,QAASwwC,KAGR,QAAS7xC,GAAgB5H,GAOxB,MANAoC,GAAGwE,MAAQ5G,EAAOA,EAAK0a,IAAI,SAAUzW,GACpC,OACCV,GAAIU,EACJzB,MAAOyB,EAAM0O,cAGRvQ,EAAGwE,MATX,MAAOnB,GAAYg0C,cAAcz1C,KAAK4D,GAavC,QAAS+L,KACR,MAAOH,GAAuBG,yBAAyB3P,KACtD,SAAUhE,GAQT,MAPAoC,GAAG4S,iBAAmBhV,EAAOA,EAAK0a,IAAI,SAAUzW,GAC/C,OACCV,GAAIU,EAAMV,GACVf,MAAOyB,EAAMgC,WAGfzF,QAAQC,IAAI2B,EAAG4S,kBACR5S,EAAG4S,mBAKb,QAAS2iC,GAAkBl1C,GAC1B,GAAIsE,IAAUozC,QAAS13C,EAAKy3C,OAC5Bz0C,GAAYkyC,kBAAkBl1C,EAAKmB,SAAUmD,GAAQ/C,KACpD,WACC0B,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,UAEhB,WACC9K,EAAGoC,YAAY0I,WAKlB,QAASosC,GAAW11C,EAAU2C,GAO7B,QAASqB,KACRlC,EAAKoB,MAAM,WACX1E,EAAGyF,MAAMsL,OAAO5M,EAAO,GARxB8C,IAAWrF,KAAK,WACXJ,GACH6B,EAAY6zC,WAAW11C,GAAUI,KAAK4D,KAUzC,QAASiyC,GAAa5xB,GAoBrB,QAASrgB,GAAgB5H,GAGxB,MAFAoC,GAAGyF,MAAQ7H,EAAK8H,QAChBmgB,EAAQS,MAAM1oB,EAAK2oB,eACZvmB,EAAGyF,MAtBX,GAAId,IACHohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,SAEX1B,GACHzgB,KAAMgiB,EAAQkR,SAASlzB,KACvBrC,SAAwC,KAA9BqkB,EAAQkR,SAASv1B,SAAkBqkB,EAAQkR,SAASv1B,SAAW,KACzEw2C,eAAoD,KAApCnyB,EAAQkR,SAASihB,eAAwBnyB,EAAQkR,SAASihB,eAAiB,KAC3F5jC,MAAkC,KAA3ByR,EAAQkR,SAAS3iB,MAAeyR,EAAQkR,SAAS3iB,MAAQ,KAChEzS,WAA0C,KAA9BkkB,EAAQkR,SAASlxB,SAAkBggB,EAAQkR,SAASlxB,SAAW,KAC3EpB,KAAgC,KAA1BohB,EAAQkR,SAAStyB,KAAcohB,EAAQkR,SAAStyB,KAAO,KACjDwzC,kBAAwD,KAArCpyB,EAAQkR,SAASvkB,gBAAyBqT,EAAQkR,SAASvkB,gBAAkB,KAChGslC,OAAoCj/B,SAA5BgN,EAAQkR,SAAS+gB,OAAuBjyB,EAAQkR,SAAS+gB,OAAS,KAKvF,OAHAj5C,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GACnDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEpBwB,EAAYo0C,aAAanzB,EAAY3f,GAAQ/C,KAAK4D,GA5H1D,GAAIxF,GAAKC,IACTD,GAAGI,MAAQ,sBACXJ,EAAGk4C,cACHl4C,EAAGyF,SACHzF,EAAG2iC,SACDxhC,GAAI,QAASf,MAAO,UACpBe,GAAI,WAAYf,MAAO,WACvBe,GAAI,SAAUf,MAAO,SAEjBJ,EAAGm4C,aACEh3C,IAAI,EAAMf,MAAO,SACjBe,IAAI,EAAOf,MAAO,aAG7BJ,EAAGu1C,kBAAoBA,EACvBv1C,EAAGk3C,WAAaA,EAEhBr2C,IAkCDg3C,EAAoBt3C,SAAW,WAAY,OAAQ,gBAAiB,cAAe,kBAAmB,yBAA0B,QAzDhI1B,QACEC,OAAO,aACPK,WAAW,sBAAuB04C,MA2IrC,WACI,YAOA,SAASO,GAAiBnxC,EAAUvG,EAAMghB,EAAQzf,EAActC,EAAW2D,EAAMD,EAAagO,EAAUrO,GAuBpG,QAASnC,KACLzC,QAAQC,IAAI2B,EAAGI,OACfo3C,IAGJ,QAASA,KAGL,QAAShyC,GAAgB5H,GACrBoC,EAAGK,KAAOzC,EAHd+B,EAAU2H,WAAW1F,KAAK4D,GAO9B,QAASqxC,GAAe3nC,GACpB,GAAIqE,IACA2wB,YAAe5gC,EAAKugC,iBAAiB7jC,EAAGkkC,aACxCC,kBAAqB7gC,EAAKugC,iBAAiB7jC,EAAGokC,mBAC9CC,YAAe/gC,EAAKugC,iBAAiB7jC,EAAGqkC,aAG5ChhC,GAAY4gC,qBAAqB1wB,GAAM3R,KAAK,WACxC0B,EAAKoB,MAAM,WACX1E,EAAGkkC,YAAc,KACjBlkC,EAAGokC,kBAAoB,KACvBpkC,EAAGqkC,YAAc,KACjBn1B,EAAKo1B,iBAMb,QAAS/6B,KACL,MAAOlG,GAAYq0C,SAAS,KAAM13C,EAAGK,MAAMuB,KAAK,SAAUC,GACtDyB,EAAKoB,MAAM,aAInB,QAASV,GAAW3D,GAGhB,MADAL,GAAGiE,QAAUjB,EAAO,0BAA4B3C,EAAKmB,SAAW,WACzDxB,EAAGiE,QAGd,QAASuwC,KAGL,MAFAp2C,SAAQC,IAAI,8CACR2B,EAAGkqB,WAAWuqB,MACdz0C,EAAGkqB,WAAWuqB,KAAKj3B,KAAO,QAC1Bla,GAAKoB,MAAM,QAAS,yCAA0C,2CAGlE1E,EAAG+F,SAAU,OACT/F,EAAGkqB,aACHlqB,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWuqB,KAAK5wC,KAClF7D,EAAGgI,YAAchI,EAAGgI,aAAe,GACnC3E,EAAY0yC,aAAa/1C,EAAGkqB,YAAYtoB,KACpC,WACI5B,EAAGqF,KAAO,GAAI0D,MACd/I,EAAGkqB,cACH5mB,EAAKoB,MAAM,YAEf,SAAU0uB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,gDAEpBpB,EAAKoB,MAAM,QAAS,0BAxFxC,GAAI1E,GAAKC,IACTD,GAAGI,MAAQ,mBACXJ,EAAGK,QAEHL,EAAG62C,eAAiBA,EACpB72C,EAAGuJ,OAASA,EACZvJ,EAAGgE,WAAaA,EAChBhE,EAAGw0C,QAAUA,EACbx0C,EAAG6G,aACH7G,EAAG4S,oBACH5S,EAAGqF,KAAO,GAAI0D,MACd/I,EAAG2iC,SACExhC,GAAI,QAAS0C,KAAM,UACnB1C,GAAI,WAAY0C,KAAM,WACtB1C,GAAI,SAAU0C,KAAM,SAEzB7D,EAAGqR,SAAWA,EAEdxQ,IAkCJu3C,EAAiB73C,SAAW,WAAY,OAAQ,SAAU,eAAgB,YAAa,OAAQ,cAAe,WAAY,QA1D1H1B,QACKC,OAAO,aACPK,WAAW,mBAAoBi5C,MAuGxC,WACI,YAOA,SAASC,GAAsBpxC,EAAUjE,EAAMtC,EAAMuB,EAAcoB,EAAa+N,EAAwBjO,EAAiBG,GA0CrH,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZJ,EAAGwB,SAAWS,EAAaT,QAC3B,IAAI82C,IAAY,GAAKvvC,OAAQwvC,SAC7Bv4C,GAAGiE,QAAUjE,EAAGgD,KAAO,0BAA4BhD,EAAGwB,SAAW,eAAiB82C,EAClFd,IACAH,IACAF,IACAhiC,IACA5D,IAGJ,QAASoiB,KACL3zB,EAAGkqB,cACHlqB,EAAG4zB,qBAAsB,EAG7B,QAASV,KACDlzB,EAAGkqB,aACHlqB,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWrmB,KAAO7D,EAAGkqB,WAAWuqB,KAAK5wC,KAElF7D,EAAGw4C,iBAAmB,MAAO,OAAQ,MAAO,MAAO,OACmC,KAAlFx4C,EAAGw4C,gBAAgBnoC,QAAQrQ,EAAGkqB,WAAWrmB,KAAKuM,MAAM,KAAKU,MAAM2nC,eAC/Dp1C,EAAYmxC,QAAQx0C,EAAGwB,SAAUxB,EAAGkqB,YAAYtoB,KAC5C,WACI,GAAI02C,IAAY,GAAKvvC,OAAQwvC,SAC7Bv4C,GAAGiE,QAAUjE,EAAGgD,KAAO,2BAA6BhD,EAAGwB,SAAW,eAAiB82C,EACnFr6C,EAAE,UAAUugB,KAAK,MAAOxe,EAAGiE,SAC3BjE,EAAGkqB,cACH5mB,EAAKoB,MAAM,YAEf,SAAU0uB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACR,MAAVA,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAEpEpB,EAAKoB,MAAM,QAAS,oBAAqB,2BAIrDpB,EAAKoB,MAAM,QAAS,+BAAgC,wBACpD1E,EAAGkqB,gBAKf,QAASyqB,KACLtxC,EAAYsxC,eAAe30C,EAAGwB,UAAUI,KACpC,SAAUwxB,GACNpzB,EAAG04C,WAAY,EACft6C,QAAQC,IAAI,cAAe+0B,IAE/B,SAAUA,GACNh1B,QAAQC,IAAI,oBAAqB+0B,KAK7C,QAASgiB,KACL,GAAIzwC,IACA0xC,aAAcr2C,EAAG4lC,WAAWzkC,GAC5B0kC,OAAQ7lC,EAAG4lC,WAAWC,OAE1B5+B,KAAWrF,KAAK,WACZyB,EAAY+xC,uBAAuBp1C,EAAGwB,SAAUmD,GAAQ/C,KAAK,WACzD0B,EAAKoB,MAAM,WACX8yC,QAOZ,QAAS5B,KACL,GAAIjxC,IAAUF,KAAMzE,EAAGyE,KAAKA,KAC5BwC,KAAWrF,KAAK,WACZyB,EAAYuyC,iBAAiB51C,EAAGwB,SAAUmD,GAAQ/C,KAAK,WACnD0B,EAAKoB,MAAM,WACX8yC,QAKZ,QAASmB,KACL34C,EAAG4lC,WAAa,KAChB5lC,EAAG44C,wBAA0B54C,EAAG44C,uBAGpC,QAASC,KACL74C,EAAGyE,KAAO,KACVzE,EAAG84C,kBAAoB94C,EAAG84C,iBAG9B,QAASxD,GAAyBn0C,EAAIgD,GAClC,GAAIQ,IAAU0xC,aAAcl1C,EACxBA,IACA8F,IAAWrF,KAAK,WACZyB,EAAYiyC,yBAAyBt1C,EAAGwB,SAAUmD,GAAQ/C,KAAK,WAC3D0B,EAAKoB,MAAM,WACX1E,EAAG+4C,gBAAgBhoC,OAAO5M,EAAO,OAQjD,QAAS0xC,GAAmB1xC,GAOxB,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAGK,KAAKmE,MAAMuM,OAAO5M,EAAO,GAC5BnE,EAAGg5C,UAAYn6C,QAAQ6E,KAAK1D,EAAGK,KAAKmE,OATxC,GAAIG,IAAUF,KAAMzE,EAAGK,KAAKmE,MAAML,GAAOM,KAEzCwC,KAAWrF,KAAK,WACZyB,EAAYwyC,mBAAmB71C,EAAGwB,SAAUmD,GAAQ/C,KAAK4D,KAUjE,QAAS2xC,KAGL,QAAS3xC,GAAgB5H,GACrBoC,EAAGi5C,eAAiBr7C,EAAOA,EAAK8H,WAHpCrC,EAAY8zC,mBAAmBpxB,KAAM,EAAGvI,KAAM,MAAS5b,KAAK4D,GAOhE,QAAS6xC,KAGL,QAAS7xC,GAAgB5H,GACrBoC,EAAGk5C,SAAWt7C,EAAOA,KAHzByF,EAAYg0C,cAAcz1C,KAAK4D,GAOnC,QAASgyC,KAKL,QAAShyC,GAAgB5H,GACrBoC,EAAGK,KAAOzC,EAEVoC,EAAGg5C,UAAYn6C,QAAQ6E,KAAK9F,EAAK4G,OAC7BxE,EAAGK,KAAKwF,UACRszC,IACJ91C,EAAYyyC,kBAAkB91C,EAAGwB,UAAUI,KAAKw3C,GAGpD,QAASA,GAA2Bx7C,GAChCoC,EAAG+4C,gBAAkBn7C,EAdrBoC,EAAGwB,UACH6B,EAAYm0C,QAAQx3C,EAAGwB,UAAUI,KAAK4D,GAkB9C,QAAS2P,KACL,MAAOhS,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAMtB,QAAS0K,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKtB,QAAS+iC,KAYL,QAASnwC,KACLlC,EAAKoB,MAAM,WAGf,QAAS20C,KACL/1C,EAAKoB,MAAM,QAAS,oBAAqB,6BAhBzC1E,EAAGK,KAAK23C,gBAAkBh4C,EAAGK,KAAK23C,eAAevvC,OAAS,GAC1DnF,EAAKoB,MAAM,QAAS,uCAEf1E,EAAGwB,WACc,WAAlBxB,EAAGK,KAAK+T,QACRpU,EAAGK,KAAKi5C,OAAS,MACC,UAAlBt5C,EAAGK,KAAK+T,QACRpU,EAAGK,KAAKmS,gBAAkB,MAC9BnP,EAAYsyC,WAAW31C,EAAGwB,SAAUxB,EAAGK,MAAMuB,KAAK4D,EAAiB6zC,IAY3E,QAAS5D,GAAcvmC,GACnB,GAAIg1B,GAAc5gC,EAAKugC,iBAAiB7jC,EAAGkkC,aACvCqV,EAAcj2C,EAAKugC,iBAAiB7jC,EAAGwB,SAC3C6B,GAAYqyC,oBAAoB6D,EAAarV,GAAatiC,KAAK,WAC3D0B,EAAKoB,MAAM,WACX1E,EAAGkkC,YAAc,KACjBlkC,EAAGokC,kBAAoB,KACvBl1B,EAAKo1B,iBAMb,QAAS6U,KACL,MAAKn5C,GAAGK,KAAKwF,SAEN1C,EAAgB0P,yBAAyB7S,EAAGK,KAAKwF,SAAS1E,IAAIS,KACjE,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WALlB,OA5PJ,GAAI9S,GAAKC,IACTD,GAAGi5C,kBACHj5C,EAAGk5C,YACHl5C,EAAG4lC,cACH5lC,EAAG6lC,QAAS,EACZ7lC,EAAGyE,QACHzE,EAAGI,MAAQ,wBACXJ,EAAG44C,wBAAyB,EAC5B54C,EAAG84C,kBAAmB,EACtB94C,EAAGK,QACHL,EAAG+4C,mBACH/4C,EAAGg5C,aACHh5C,EAAGkqB,cACHlqB,EAAGgD,KAAOA,EAEVhD,EAAGo1C,uBAAyBA,EAC5Bp1C,EAAG41C,iBAAmBA,EACtB51C,EAAG24C,uBAAyBA,EAC5B34C,EAAG64C,iBAAmBA,EACtB74C,EAAGs1C,yBAA2BA,EAC9Bt1C,EAAG61C,mBAAqBA,EACxB71C,EAAG2zB,oBAAsBA,EACzB3zB,EAAGkzB,WAAaA,EAChBlzB,EAAGw5C,QAAU7E,EACb30C,EAAG21C,WAAaA,EAChB31C,EAAGy1C,cAAgBA,EACnBz1C,EAAGm5C,YAAcA,EACjBn5C,EAAG6G,aACH7G,EAAG4S,oBACH5S,EAAG2iC,SACExhC,GAAI,QAAS0C,KAAM,UACnB1C,GAAI,WAAY0C,KAAM,WACtB1C,GAAI,SAAU0C,KAAM,SAEzB7D,EAAGiE,QAAU,GACbjE,EAAG04C,WAAY,EAEf73C,IAgBJw3C,EAAsB93C,SAAW,WAAY,OAAQ,OAAQ,eAAgB,cAAe,yBAA0B,kBAAmB,QA3DzI1B,QACKC,OAAO,aACPK,WAAW,wBAAyBk5C,MA8Q7C,WACI,YAOA,SAASoB,GAAsBxyC,EAAUvG,EAAMghB,EAAQzf,EAAcmP,EAAwBjO,EAAiBE,EAAaC,GAqBvH,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,MAAOJ,EAAGwB,UACtBg2C,IACAriC,IACA5D,IAGJ,QAAS4D,KACL,MAAOhS,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAMtB,QAASsyC,KACL,MAAKn5C,GAAGK,KAAKwF,SAEN1C,EAAgB0P,yBAAyB7S,EAAGK,KAAKwF,SAAS1E,IAAIS,KACjE,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WALlB,OAWJ,QAASikC,KACL/2C,EAAGK,KAAK6jC,YAAclkC,EAAGK,KAAKyjC,SAC9BzgC,EAAY0zC,WAAW/2C,EAAGK,MAAMuB,KAAK,WACjC0B,EAAKoB,MAAM,WACX1E,EAAG05C,eAAiB,KACpBh4B,EAAOO,GAAG,sBAAuBzgB,SAAUxB,EAAGK,KAAKmB,aAM3D,QAASg2C,KAKL,QAAShyC,GAAgB5H,GACrBoC,EAAGK,KAAOzC,EALVoC,EAAGwB,UACH6B,EAAYm0C,QAAQx3C,EAAGwB,UAAUI,KAAK4D,GAQ9C,QAAS+L,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKtB,QAAS4wB,GAASt0B,GACVlP,EAAGwB,SACHm0C,KAEAoB,IACA7nC,EAAKo1B,gBAIb,QAASqR,KASL,QAASnwC,KACLlC,EAAKoB,MAAM,WAGf,QAAS20C,KACL/1C,EAAKoB,MAAM,QAAS,oBAAqB,6BAbzC1E,EAAGK,KAAK23C,gBAAkBh4C,EAAGK,KAAK23C,eAAevvC,OAAS,GAC1DnF,EAAKoB,MAAM,QAAS,iDAAkD,uCAElE1E,EAAGwB,UACH6B,EAAYsyC,WAAW31C,EAAGwB,SAAUxB,EAAGK,MAAMuB,KAAK4D,EAAiB6zC,GAa/E,QAAS5D,GAAcvmC,GACnB,GAAIg1B,GAAc5gC,EAAKugC,iBAAiB7jC,EAAGkkC,aACvCqV,EAAcj2C,EAAKugC,iBAAiB7jC,EAAGwB,SAC3C6B,GAAYqyC,oBAAoB6D,EAAarV,GAAatiC,KAAK,WAC3D0B,EAAKoB,MAAM,WACX1E,EAAGkkC,YAAc,KACjBlkC,EAAGokC,kBAAoB,KACvBl1B,EAAKo1B,iBAjHb,GAAItkC,GAAKC,IACTD,GAAGI,MAAQ,wBACXJ,EAAGK,QACHL,EAAGwB,SAAWS,EAAaT,SAE3BxB,EAAGwjC,SAAWA,EACdxjC,EAAGy1C,cAAgBA,EACnBz1C,EAAGm5C,YAAcA,EACjBn5C,EAAG6G,aACH7G,EAAG4S,oBACH5S,EAAG2iC,SACExhC,GAAI,QAAS0C,KAAM,UACnB1C,GAAI,WAAY0C,KAAM,WACtB1C,GAAI,SAAU0C,KAAM,SAGzBhD,IAsCJ44C,EAAsBl5C,SAAW,WAAY,OAAQ,SAAU,eAAgB,yBAA0B,kBAAmB,cAAe,QA5D3I1B,QACKC,OAAO,aACPK,WAAW,wBAAyBs6C,MAiI7C,WACI,YAOA,SAASv3C,GAAaiuC,GAkClB,QAASwJ,GAAax4C,EAAIvD,GACtB,GAAI2pB,GAAM8tB,EAAOl0C,EAAK,QACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAAS6E,GAAoBtB,GACzB,GAAIomB,GAAM8tB,EAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS+U,GAAYz4C,EAAIvD,GACrB,GAAI2pB,GAAM8tB,EAAOl0C,EAAK,OACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASi8C,GAAc14C,EAAIvD,EAAM+G,GAC7B,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,WACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASm1C,GAAc34C,EAAIvD,EAAM+G,GAC7B,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,WACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASo1C,GAAgBv4C,GACrB,GAAI+lB,GAAM8tB,EAAO7zC,EAAW,OAC5B,OAAO2uC,GAAe5oB,GAAKsd,MAGlC,QAASz9B,GAAsBvC,GACxB,GAAImjB,IACTnjB,aAAcA,EAET,OAAOsrC,GAAekF,EAAO,UAAUzE,KAAK5oB,GAGnD,QAASgyB,GAAqB74C,EAAI+oB,EAAYvlB,GAC7C,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKmtB,cAAcxqB,EAAYvlB,GAGtD,QAASs1C,GAA0B94C,EAAIqyB,GACtC,GAAIjM,GAAM8tB,EAAOl0C,EAAK,mBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,MAAO3c,aAAcA,IA7ErD,GAAI6hB,GAAO,SACP6E,EAAK/J,EAAekF,EACxB,QACIluC,aAAc+yC,EAAGrV,IACjBsV,SAAUD,EAAGnJ,QACb3oC,YAAa8xC,EAAGtJ,KAChBvoC,YAAa6xC,EAAG1E,IAChB9sC,YAAawxC,EAAAA,UACblyB,OAAQmoB,EAAekF,EAAO,UAAUzE,KACxCwJ,KAAMjK,EAAekF,EAAO,QAAQzE,KACpCyJ,OAAQlK,EAAekF,EAAO,UAAUzE,KAExC+I,aAAcA,EACdC,YAAaA,EACbC,cAAeA,EACfC,cAAeA,EACfr3C,oBAAqBA,EACxBs3C,gBAAiBA,EACjB3yC,sBAAuBA,EAEvB4yC,qBAAsBA,EACnBC,0BAA2BA,EAC3BhxC,eACK9H,GAAI,EAAG0C,KAAM,UAAWzD,MAAO,YAAa0xC,WAAW,IACvD3wC,GAAI,EAAG0C,KAAM,UAAWzD,MAAO,QAAS0xC,WAAW,IACnD3wC,GAAI,EAAG0C,KAAM,OAAQzD,MAAO,aAAc0xC,WAAW,IACrD3wC,GAAI,EAAG0C,KAAM,UAAWzD,MAAO,+BAAgC0xC,WAAW,IAC1E3wC,GAAI,EAAG0C,KAAM,SAAUzD,MAAO,gCAAiC0xC,WAAW,KA4BvF5vC,EAAa3B,SAAW,kBA7DxB1B,QACKC,OAAO,aACPmyC,QAAQ,eAAgB/uC,MAuFjC,WACI,YAOA,SAASgvC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,mBACHxE,WAAY,kBACZE,aAAc,KACdL,YAAa,kCACb2F,QACI1D,MAAO,eACPmc,KAAM,QAEVmK,IAAK,sBAER5jB,MAAM,qBACHxE,WAAY,wBACZE,aAAc,KACdL,YAAa,yCACbuoB,IAAK,qBAGb6pB,EAAmBC,KAAK,mBAAoB,UAsChDH,EAAY3wC,SAAW,iBAAkB,sBA9DzC1B,QACKC,OAAO,aACPwyC,OAAOJ,MA0BhB,WACI,YAOA,SAASoJ,GAAgB55C,EAAMuB,EAAciZ,EAAWwI,EAAWzgB,EAASjB,EAAeE,EAAcmB,EAChF1D,EAAW2D,EAAMqgB,EAAexgB,GAiFrD,QAAStC,KACLzC,QAAQC,IAAI2B,EAAGI,MAAQ,cACvBkU,IAGJ,QAAS6P,KACL,MAAOxkB,GAAUykB,SAAS,oBAG9B,QAASm2B,KAKL,GAJAv6C,EAAGw6C,YAAYC,cAAgBz6C,EAAG6C,QAAU7C,EAAG6C,QAAQrB,SAAW,KAClExB,EAAGw6C,YAAYE,iBAAmB16C,EAAGK,KAAOL,EAAGK,KAAKmB,SAAW,KAC/DxB,EAAGw6C,YAAYx1B,iBAAmBlD,EAAQ9hB,EAAGw6C,YAAYx1B,kBACzDhlB,EAAGw6C,YAAYzqB,UAAY/vB,EAAGw6C,YAAYzqB,WAAa/vB,EAAGw6C,YAAYzqB,UAAUtnB,OAASzI,EAAGw6C,YAAYzqB,UAAY,KACnG,SAAb/vB,EAAGiB,MACHjB,EAAGw6C,YAAYv1B,WACfjlB,EAAGolB,WAAW9jB,QAAQ,SAAUJ,GACxBA,EAAKuhB,UACLziB,EAAGw6C,YAAYv1B,QAAQ7jB,KAAKF,EAAKC,UAEtC,CACH,GAAIw5C,IAAa,EACbC,IACJ56C,GAAGolB,WAAW9jB,QAAQ,SAAUJ,GACxBA,EAAKuhB,WACLk4B,GAAa,EACbC,EAAYx5C,KAAKF,EAAKC,OAG1Bw5C,IAAY36C,EAAGw6C,YAAYv1B,QAAU21B,IAIjD,QAASC,GAAUh1B,GAgCf,QAASrgB,GAAgB5H,GAErB,GADAoC,EAAGqH,OAASzJ,EAAOA,EAAK8H,WACpB9H,EAAM,CACNioB,EAAQS,MAAM1oB,EAAK2oB,eACnBvmB,EAAGwmB,gBAAkB5oB,EAAK2oB,aAC1B,IAAIE,GAAwB5nB,QAAQd,QAAQ2X,SAASC,eAAe,2BAChE3V,GAAG0mB,YAAa1mB,EAAG0mB,aAAc,EAChChD,EAAUiD,gBAAgBF,EAAuBG,EAAQC,GAIlE,MAFA7mB,GAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC7D9lB,EAAG+F,SAAU,EACN/F,EAAGqH,OAGd,QAAS8oB,GAAc3pB,GAInB,MAHAxG,GAAGwmB,gBAAkB,EACrBxmB,EAAG+F,SAAU,EACb/F,EAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SACtDtf,EAjDX,GAAIsf,GAAY7R,QAChBjU,GAAG+F,SAAU,CACb,IAAIkf,KAEJjlB,GAAGolB,WAAW9jB,QAAQ,SAAUJ,GAC5B45C,EAAUx5C,QAAQ,SAAUy5C,GACpBA,IAAa75C,EAAK2C,MAClBohB,EAAQ7jB,KAAKF,EAAKC,QAG9BnB,EAAGw6C,YAAYv1B,QAAUA,EACzBjlB,EAAGw6C,YAAYvyC,qBAAuBjI,EAAGw6C,YAAYvyC,qBAAuBjI,EAAGw6C,YAAYvyC,qBAAuB,KAElHsyC,GACA,IAAI51C,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACdrZ,KAAM,UAKV,QAHA9N,QAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEtB7B,EAAGod,MACP,IAAK,SACD,MAAOlb,GAAa8lB,OAAOhoB,EAAGw6C,YAAa71C,GAAQ/C,KAAK4D,EAAiB2qB,EAC7E,KAAK,OACD,MAAOjuB,GAAak4C,KAAKp6C,EAAGw6C,YAAa71C,GAAQ/C,KAAK4D,EAAiB2qB,EAC3E,KAAK,SACD,MAAOjuB,GAAam4C,OAAOr6C,EAAGw6C,YAAa71C,GAAQ/C,KAAK4D,EAAiB2qB,IAyBrF,QAAS/nB,GAAYvE,EAAMuZ,GACvB,GAAI49B,IAAOn3C,KAAMA,EAAMuZ,KAAMA,EAC7Blb,GAAakG,YAAY4yC,GAAKp5C,KAAK,WAC/B5B,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAIvB,QAASpC,GAAYvH,GACjBe,EAAawG,YAAYvH,GAAIS,KACzB,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASqd,GAAU5gB,EAAOhG,GAEtB,GADAnD,QAAQC,IAAIkJ,EAAM3D,YAAYzC,IACD,IAAzBoG,EAAM3D,YAAYzC,GAElB,WADAmC,GAAKoB,MAAM,OAAQ,oDAGvB,IAAI4Y,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,8CACbG,WAAY,uBACZE,aAAc,UACdme,KAAM,KACNE,SACInW,MAAO,WACH,MAAOA,IAEXhG,OAAQ,WACJ,MAAOA,MAKnB+b,GAAcK,OAAO/b,KACjB,WACI5B,EAAGoC,YAAY0I,UAChB,cAKX,QAASmwC,GAAY1zC,GACjB,MAAQvH,GAAGgkB,YAAYxiB,WAAa+F,EAAMlH,KAAKmB,SAGnD,QAAS05C,GAAgBv3C,GACrB,GAAIw3C,GAAM,EACV,QAAQx3C,GACJ,IAAK,UACDw3C,EAAM,UACN,MAEJ,KAAK,UACDA,EAAM,UACN,MAEJ,KAAK,OACDA,EAAM,QACN,MAEJ,KAAK,UACDA,EAAM,SACN,MAEJ,KAAK,SACDA,EAAM,QAId,MAAOA,GAGX,QAASC,GAAez3C,GACpB,GAAIw3C,GAAM,EACV,QAAQx3C,GACJ,IAAK,UACDw3C,EAAM,4BACN,MAEJ,KAAK,UACDA,EAAM,4BACN,MAEJ,KAAK,OACDA,EAAM,iBACN,MAEJ,KAAK,UACDA,EAAM,oBACN,MAEJ,KAAK,SACDA,EAAM,4BAId,MAAOA,GAGX,QAAS5mC,KACLvU,EAAGw6C,eACHx6C,EAAGolB,WAAW9jB,QAAQ,SAAUJ,GAC5BA,EAAKuhB,UAAW,IAEpBziB,EAAGoC,YAAY0I,SAGnB,QAASkd,KACLhoB,EAAGoC,YAAY0I,SAGnB,QAASuwC,GAAYp0B,GACjBszB,GACA,IAAI51C,IACAsiB,WAAYA,EACZC,eAAgBlnB,EAAGw6C,YAGvB72B,GAAc0D,gBAAgB1iB,GAAQ/C,KAAK,SAAU0lB,GAEjD,GADAtnB,EAAG+F,SAAU,EACTkhB,EAAY,CACZ,GAAIM,GAAM,uCAAyCD,CACnDlpB,SAAQC,IAAIkpB,GACZ5D,EAAc6D,iBAAiBD,GAC/BjkB,EAAKoB,MAAM,OAAQ,kCAK/B,QAAS4P,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAAStB,GAAarG,GAGlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MAJd,MAAOpC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAQxD,QAAS0iB,GAAc3gB,GACnB2T,EAAU3F,MACNgI,WAAW,EACXve,YAAa,kDACbG,WAAY,sBACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,MAAOsF,OAtUvB,GAAIvH,GAAKC,IACTD,GAAGqH,UACHrH,EAAG0mB,aAAc,CACjB,IAAI5E,GAAU7e,EAAQ,WAClB63C,EAAY74C,EAAahB,MAAQgB,EAAahB,MAAMmP,MAAM,OAC9DpQ,GAAGod,KAAOnb,EAAamb,KACvBpd,EAAGiB,MAAQgB,EAAahB,MACxBjB,EAAG2W,QAAU,GACb3W,EAAGyN,qBACHzN,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASu4C,GAEb,IAAIh0B,GAAW,IACXD,EAAS,EACb5mB,GAAGI,MAAQ,0BAEXJ,EAAG+nB,WAAY,EACf/nB,EAAGw6C,eACHx6C,EAAG2G,aACH3G,EAAGolB,WAAaljB,EAAa+G,aAE7BtJ,EAAU2H,WAAW1F,KAAK,SAAUC,GAQhC,OAPA7B,EAAGgkB,YAAcniB,EACjBzD,QAAQC,IAAI,qBAAsB2B,EAAGgkB,aACrChkB,EAAGs7C,gBAA2C,UAAzBt7C,EAAGgkB,YAAY5P,MAChCpU,EAAGs7C,kBAAiBt7C,EAAGw6C,YAAY74C,WAAa3B,EAAGgkB,YAAYne,SAAS1E,IAC5EnB,EAAGolB,WAAW9jB,QAAQ,SAAUJ,GAC5BA,EAAKq6C,MAAO,IAERv7C,EAAGiB,OACP,IAAK,OACDjB,EAAGI,OAAqB,WAAZJ,EAAGod,KAAoB,WAAyB,WAAZpd,EAAGod,KAAoB,WAAa,QACpFpd,EAAGw7C,eAA6B,WAAZx7C,EAAGod,KACvBpd,EAAGy7C,YAA0B,SAAZz7C,EAAGod,IACpB,MAEJ,KAAK,eACDpd,EAAGI,OAAS,aACZJ,EAAGy7C,aAAc,EACjBz7C,EAAGolB,WAAW,GAAGm2B,MAAO,EACxBv7C,EAAGolB,WAAW,GAAGm2B,MAAO,EACxBv7C,EAAGolB,WAAW,GAAGm2B,MAAO,CACxB,MAEJ,KAAK,UACDv7C,EAAGI,OAAS,YACZJ,EAAGy7C,aAAc,EACjBz7C,EAAG07C,cAAe,CAClB,MAEJ,KAAK,iBACD17C,EAAGI,OAAS,aACZJ,EAAGy7C,aAAc,EACjBz7C,EAAGolB,WAAW,GAAGm2B,MAAO,EACxBv7C,EAAGolB,WAAW,GAAGm2B,MAAO,EACxBv7C,EAAGolB,WAAW,GAAGm2B,MAAO,KAMpCv7C,EAAGsyC,OAASlqC,EACZpI,EAAAA,UAAY0I,EACZ1I,EAAGmoB,UAAYA,EACfnoB,EAAGi7C,YAAcA,EACjBj7C,EAAGk7C,gBAAkBA,EACrBl7C,EAAGo7C,eAAiBA,EACpBp7C,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EACZhoB,EAAGuF,aAAeA,EAClBvF,EAAGq7C,YAAcA,EACjBr7C,EAAGkoB,cAAgBA,EACnBloB,EAAG8G,YAAczD,EAAY0D,WAC7B/G,EAAGmkB,cAAgBA,EAEnBtjB,IApBJy5C,EAAgB/5C,SAAW,OAAQ,eAAgB,YAAa,YAAa,UAAW,gBAAiB,eAAgB,cAAe,YAAa,OAAQ,gBAAiB,mBA/D9K1B,QACKC,OAAO,aACPK,WAAW,kBAAmBm7C,MAkVvC,WACI,YAOA,SAASqB,GAAsBj7C,EAAMuC,EAASD,EAAMd,EAAcmB,EAAapB,EAAcqB,EAAM3D,EAAWsH,GAuC1G,QAASpG,KACLH,EAAKrC,IAAI2B,EAAGI,OACZw7C,IACAjrC,IAGJ,QAASirC,KACL,MAAO15C,GAAai4C,SAASn6C,EAAGmB,IAAIS,KAAK,SAAUhE,GAc/C,MAbAoC,GAAGuH,MAAQ3J,EAAOA,KAElB+B,EAAU2H,WAAW1F,KAAK,SAAUi6C,GAChC77C,EAAGgkB,YAAc63B,EACjB77C,EAAG87C,OAASD,EAAGr6C,WAAaxB,EAAGuH,MAAMlH,KAAKmB,SAC1CxB,EAAGuH,MAAMksB,YAAYnyB,QAAQ,SAAUy6C,GAEnCA,EAAIjoB,UAAYioB,EAAIzoB,eAAe9xB,WAAaxB,EAAGgkB,YAAYxiB,SAC/Du6C,EAAIx0B,IAAMvkB,EAAO,0BAA4B+4C,EAAI56C,GAAK,eAAiB46C,EAAIl4C,KAAO,IAAMk4C,EAAI3+B,OAEhGpd,EAAG+F,SAAU,IAGV/F,EAAGuH,QAIlB,QAASoJ,KACLzO,EAAaO,oBAAoBzC,EAAGmB,IAAIS,KACpC,SAAUhE,GACNoC,EAAGg8C,WAAap+C,EAAOA,KACvBoC,EAAGg8C,WAAah8C,EAAGg8C,WAAWjlB,OAAO,SAAUklB,GAE3C,MADA79C,SAAQC,IAAI,sBAAmC,OAAZ49C,EAAG57C,MAClB,OAAZ47C,EAAG57C,SAK3B,QAAS67C,KAEL,GADAl8C,EAAG+F,SAAU,EACT/F,EAAGkqB,WAAY,CACflqB,EAAGgI,YAAchI,EAAGgI,aAAe,IAEnC,IAAIrD,IACAd,KAAM7D,EAAGkqB,WAAWA,WAAWrmB,KAC/BmE,YAAahI,EAAGgI,YAGpB9F,GAAa83C,qBAAqBh6C,EAAGuH,MAAMpG,GAAInB,EAAGkqB,WAAYvlB,GAAQ/C,KAClE,WACIg6C,IACAjrC,IACA3Q,EAAGkqB,cACHlqB,EAAGgI,YAAc,GACjB1E,EAAKoB,MAAM,YAEf,WACI1E,EAAG+F,SAAU,KAM7B,QAAS4tB,KACL3zB,EAAGkqB,cACHlqB,EAAG4zB,qBAAsB,EAG7B,QAASP,GAAiBnJ,GAClBlqB,EAAGgkB,YAAYxiB,WAAa0oB,EAAWoJ,eAAe9xB,UAE1DyF,IAAWrF,KAAK,WACZ5B,EAAG+F,SAAU,EACb7D,EAAa+3C,0BAA0Bj6C,EAAGuH,MAAMpG,GAAI+oB,EAAW/oB,IAAIS,KAAK,WACpE0B,EAAKoB,MAAM,WACXk3C,IACAjrC,KACD,WACC3Q,EAAG+F,SAAU,MAOzB,QAAS4zC,KACL,MAAI35C,GAAGK,MAAQL,EAAGqF,SACd/B,GAAKoB,MAAM,OAAQ,qEAGnB1E,EAAG2W,SAAW3W,EAAGmB,KACjBnB,EAAG+F,SAAU,EACb7D,EAAay3C,aAAa35C,EAAGmB,GAAInB,EAAG2W,SAAS/U,KACzC,WACI0B,EAAKoB,MAAM,WACXk3C,IACAjrC,KACDojB,KAIf,QAAS6lB,KACL,MAAI55C,GAAGK,MAAQL,EAAGqF,SACd/B,GAAKoB,MAAM,OAAQ,qEAGnB1E,EAAG2W,SAAW3W,EAAGmB,KACjBnB,EAAG+F,SAAU,EACb7D,EAAa03C,YAAY55C,EAAGmB,GAAInB,EAAG2W,SAAS/U,KACxC,WACI0B,EAAKoB,MAAM,WACXk3C,IACAjrC,KACDojB,KAIf,QAAS8lB,KAKL,GAAI75C,EAAG2W,SAAW3W,EAAGmB,GAAI,CACrB,GAAIwD,IACAw3C,QAASn8C,EAAGqF,KAAOpC,EAAQ,SAASjD,EAAGqF,MAAQ,KAEnDrF,GAAG+F,SAAU,EACb/F,EAAG2W,SAAW,oBAAsB1T,EAAQ,WAAWjD,EAAGqF,MAAQ,KAClEnD,EAAa23C,cAAc75C,EAAGmB,GAAInB,EAAG2W,QAAShS,GAAQ/C,KAClD,WACI0B,EAAKoB,MAAM,WACXk3C,IACAjrC,IACA3Q,EAAG2W,QAAU,IACdod,IAIf,QAAS+lB,KAKL,GAAI95C,EAAG2W,SAAW3W,EAAGK,MAAQL,EAAGmB,GAAI,CAChC,GAAIwD,IACAnD,SAAUxB,EAAGK,KAAOL,EAAGK,KAAKmB,SAAW,KAE3CxB,GAAG+F,SAAU,EACb/F,EAAG2W,SAAW,qBAAuB3W,EAAGK,KAAKwD,KAAO,IACpD3B,EAAa43C,cAAc95C,EAAGmB,GAAInB,EAAG2W,QAAShS,GAAQ/C,KAClD,WACI0B,EAAKoB,MAAM,WACXk3C,IACAjrC,IACA3Q,EAAG2W,QAAU,IACdod,IAIf,QAASA,GAAcX,GACnB,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAEpEpB,EAAKoB,MAAM,QAAS,qBAG5B,QAASa,GAAarG,GAGlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MAJd,MAAOpC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAQxD,QAASoD,GAAQC,GACb,GAAIC,GAAU,GAAIC,KAClBD,GAAQF,QAAQE,EAAQE,UAAYH,GACpC7I,EAAGqF,KAAOpC,EAAQ,UAAU6F,GAxNhC,GAAI9I,GAAKC,IACTD,GAAGuH,SACHvH,EAAGg8C,cACHh8C,EAAG2W,QAAU,GACb3W,EAAGqF,KAAO,KACVrF,EAAGI,MAAQ,4BACXJ,EAAGmB,GAAKc,EAAad,GACrBnB,EAAGyF,SACHzF,EAAGK,KAAO,KACVL,EAAG8G,YAAczD,EAAY0D,WAC7B/G,EAAG+F,SAAU,EACb/F,EAAG87C,QAAS,EACZ97C,EAAGo8C,aACEj7C,GAAI,EAAGf,MAAO,oCACde,GAAI,EAAGf,MAAO,wCACde,GAAI,EAAGf,MAAO,mDACde,GAAI,EAAGf,MAAO,8BAGnBJ,EAAGq8C,UAAYr8C,EAAGo8C,WAAW,GAE7Bp8C,EAAG47C,aAAeA,EAClB57C,EAAG25C,aAAeA,EAClB35C,EAAG45C,YAAcA,EACjB55C,EAAG65C,cAAgBA,EACnB75C,EAAG85C,cAAgBA,EACnB95C,EAAG2Q,eAAiBA,EACpB3Q,EAAGk8C,cAAgBA,EACnBl8C,EAAG2zB,oBAAsBA,EACzB3zB,EAAGqzB,iBAAmBA,EACtBrzB,EAAGuF,aAAeA,EAClBvF,EAAG4I,QAAUA,EAEb/H,IAyBJ86C,EAAsBp7C,SAAW,OAAQ,UAAW,OAAQ,eAAgB,cAAe,eAAgB,OAAQ,YAAa,YAhEhI1B,QACKC,OAAO,aACPK,WAAW,wBAAyBw8C,MAkO7C,WACI,YAOA,SAASW,GAAqB77C,EAAmBwC,EAASsE,EAAOhG,EAAQW,EAAcmB,EAAaC,GAoBhG,QAASzC,KACLzC,QAAQC,IAAIusB,EAAQxqB,OAGxB,QAASgjB,KACkB,UAAnBwH,EAAQrpB,OACRo4C,EAAa/uB,EAAQrjB,MAAMpG,IACD,SAAnBypB,EAAQrpB,OACfq4C,EAAYhvB,EAAQrjB,MAAMpG,IACA,aAAnBypB,EAAQrpB,OACfs4C,EAAcjvB,EAAQrjB,MAAMpG,IACF,aAAnBypB,EAAQrpB,QACfu4C,EAAclvB,EAAQrjB,MAAMpG,IAKpC,QAASw4C,GAAax4C,GACdypB,EAAQjU,QACRzU,EAAay3C,aAAax4C,EAAIypB,EAAQjU,SAAS/U,KAC3C,WACI0B,EAAKoB,MAAM,WACXjE,EAAkBM,SACnBgzB,GAEPzwB,EAAKoB,MAAM,QAAS,mCAI5B,QAASk1C,GAAYz4C,GACbypB,EAAQjU,QACRzU,EAAa03C,YAAYz4C,EAAIypB,EAAQjU,SAAS/U,KAC1C,WACI0B,EAAKoB,MAAM,WACXjE,EAAkBM,SACnBgzB,GAEPzwB,EAAKoB,MAAM,QAAS,mCAI5B,QAASm1C,GAAc14C,GACnB,GAAIypB,EAAQjU,QAAS,CACjB,GAAIhS,IACAw3C,QAASvxB,EAAQvlB,KAErBulB,GAAQjU,SAAW,oBAAsB1T,EAAQ,mBAAmB2nB,EAAQvlB,MAAQ,KACpFnD,EAAa23C,cAAc14C,EAAIypB,EAAQjU,QAAShS,GAAQ/C,KACpD,WACI0B,EAAKoB,MAAM,WACXjE,EAAkBM,SACnBgzB,OAEPzwB,GAAKoB,MAAM,QAAS,mCAI5B,QAASo1C,GAAc34C,GACnB,GAAIypB,EAAQvqB,MAAQuqB,EAAQjU,QAAS,CACjC,GAAIhS,IACAnD,SAAUopB,EAAQvqB,KAAKmB,SAE3BopB,GAAQjU,SAAW,qBAAuBiU,EAAQvqB,KAAKwD,KAAO,IAC9D3B,EAAa43C,cAAc34C,EAAIypB,EAAQjU,QAAShS,GAAQ/C,KACpD,WACI0B,EAAKoB,MAAM,WACXjE,EAAkBM,SACnBgzB,OAEPzwB,GAAKoB,MAAM,QAAS,mCAI5B,QAASqvB,GAAcX,GACnB,GAAI3sB,GAAS2sB,EAAS3sB,MACR,MAAVA,EACAnD,EAAKoB,MAAM,QAAS,wBAGpBpB,EAAKoB,MAAM,QAAS,SAI5B,QAASa,GAAarG,GAGlB,QAASsG,GAAgB5H,GAErB,MADAgtB,GAAQnlB,MAAQ7H,EAAK8H,YACdklB,EAAQnlB,MAJnB,MAAOpC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GAQxD,QAASoD,GAAQC,GACb,GAAIC,GAAU,GAAIC,KAClBD,GAAQF,QAAQE,EAAQE,UAAYH,GACpC+hB,EAAQvlB,KAAOpC,EAAQ,SAASA,EAAQ,UAAU6F,IAlHtD,GAAI8hB,GAAU3qB,IAEd2qB,GAAQxqB,MAAQ,0BAChBwqB,EAAQrjB,MAAQA,EAChBqjB,EAAQrpB,OAASA,EACjBqpB,EAAQnlB,SACRmlB,EAAQvqB,KAAO,KACfuqB,EAAQjU,QAAU,GAClBiU,EAAQ7kB,SAAU,EAClB6kB,EAAQ9jB,YAAczD,EAAY0D,WAElC6jB,EAAQrlB,aAAeA,EACvBqlB,EAAQxH,OAASA,EACjBwH,EAAQhiB,QAAUA,EAElB/H,IA4CJy7C,EAAqB/7C,SAAW,oBAAqB,UAAW,QAAS,SAAU,eAAgB,cAAe,QAjElH1B,QACKC,OAAO,aACPK,WAAW,uBAAwBm9C,MA+H5C,WACI,YAOA,SAASC,GAAoBpM,GAWzB,QAASqM,KACL,GAAIj1B,GAAMk1B,EAAa,yBACvB,OAAOtM,GAAe5oB,GAAKiuB,MAI/B,QAASkH,KACL,GAAIn1B,GAAMk1B,EAAa,kCACvB,OAAOtM,GAAe5oB,GAAKsd,MAlB/B,GAAI4X,GAAa,QACjB,QACID,aAAeA,EACfE,cAAgBA,GAyDxBH,EAAoBh8C,SAAW,kBAlE/B1B,QACKC,OAAO,OACPmyC,QAAQ,sBAAuBsL,MAiCxC,WACI,YAQA,SAASrL,GAAYC,EAAgBC,GAEjCD,EACKxtC,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdL,YAAa,kDACbuoB,IAAK,mBAIb6pB,EAAmBC,KAAK,2BAA4B,kBAmDxDH,EAAY3wC,SAAW,iBAAkB,sBAnEzC1B,QACKC,OAAO,OACPwyC,OAAOJ,MAmBhB,WACI,YAMA,SAASyL,GAAuB35C,EAAMC,EAASs5C,EAAqBj5C,GAShE,QAASzC,KACL67C,IAGJ,QAASA,KACLH,EAAoBG,gBAAgB96C,KAAK,SAAUhE,GAE3CoC,EAAG48C,WAAah/C,EAAOA,KACvBoC,EAAG+F,QAAkC,cAAxB/F,EAAG48C,WAAWn2C,SAKvC,QAAS+1C,KACLx8C,EAAG+F,SAAU,EACb/F,EAAG48C,WAAWn2C,OAAO,aACrB81C,EAAoBC,eAAe56C,KAAK,WAEhC5B,EAAG+F,SAAU,EACb22C,MA3BZ,GAAI18C,GAAKC,IAETD,GAAGw8C,aAAaA,EAEhB37C,IA0DJ87C,EAAuBp8C,SAAW,OAAQ,UAAW,sBAAuB,QApE5E1B,QACKC,OAAO,OACPK,WAAW,yBAA0Bw9C,MA2C9C,WACC,YAOA,SAASE,GAAYn5B,GAUpB,QAASo5B,KACR,GAAIC,GAASl+C,QAAQd,QAAQ,oBAAoB,EACjD,OAAKg/C,IAGGA,EAAOC,aAAcD,EAAOE,cAHf,EAAG,GAMzB,QAASC,KACR,GAAIH,GAASl+C,QAAQd,QAAQ,QAAQ,EAGrC,QAAQg/C,EAAOC,aAAcD,EAAOE,aAGrC,QAASE,KACR,GAAIJ,GAASl+C,QAAQd,QAAQ,wBAAwB,EACrD,OAAKg/C,IAGYA,EAAOC,aAAcD,EAAOE,cAHxB,EAAG,GAzBzB,OACCH,sBAAuBA,EACvBK,iBAAkBA,EAClBD,YAAaA,GA2DfL,EAAYt8C,SAAW,aArEvB1B,QACEC,OAAO,OACPmyC,QAAQ,cAAe4L,MA2C1B,WACI,YAOA,SAASO,GAAcjN,GACnB,GAAIkF,GAAO,UACPgI,EAAOlN,EAAekF,EAC1B,QACIiI,cAAeD,EAAOxY,IACtB0Y,cAAeF,EAAOtM,QACtByM,aAAcH,EAAOzM,KACrB6M,aAAcJ,EAAO7H,IACrBkI,aAAcL,EAAAA,WAyDtBD,EAAc78C,SAAW,kBAtEzB1B,QACKC,OAAO,OACPmyC,QAAQ,gBAAiBmM,MAoBlC,WACI,YAOA,SAASlM,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,eACHxE,WAAY,iBACZE,aAAc,KACdL,YAAa,oCACbuoB,IAAK,YAGb6pB,EAAmBC,KAAK,oBAAqB,WAyDjDH,EAAY3wC,SAAW,iBAAkB,sBAvEzC1B,QACKC,OAAO,OACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASyM,GAAiB12C,EAAUvG,EAAMsB,EAAeo7C,EAAe95C,GAuBpE,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAASo9C,KAEL,QAASh4C,KACLlC,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,SAHnBsyC,EAAcI,aAAax9C,EAAGq9C,QAAQz7C,KAAK4D,GAO/C,QAASo4C,KACL59C,EAAGq9C,OAAS,KACZr9C,EAAG69C,iBAAmB79C,EAAG69C,gBAG7B,QAASC,GAAiB35C,GACtBnE,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAG+9C,QAAQ55C,GAAStF,QAAQ6E,KAAK1D,EAAGg+C,YAAY75C,IAGpD,QAASu5C,GAAaL,EAAQl5C,GAM1B,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAG+9C,QAAQhtC,OAAO5M,EAAO,GACzBnE,EAAGg+C,YAAcn/C,QAAQ6E,KAAK1D,EAAG+9C,SARrC92C,IAAWrF,KAAK,WACRy7C,GACAD,EAAcM,aAAaL,GAAQz7C,KAAK4D,KAUpD,QAASi4C,GAAarmC,EAAMjT,GAOxB,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAGoE,WAAWD,IAAUnE,EAAGoE,WAAWD,GACtCnE,EAAGg+C,YAAY75C,GAAStF,QAAQ6E,KAAK1D,EAAG+9C,QAAQ55C,IATpD8C,IAAWrF,KAAK,WACZ,IAAK0B,EAAK6B,eAAenF,EAAG+9C,QAAQ55C,GAAQnE,EAAGg+C,YAAY75C,IAAS,CAChE,GAAIvG,IAAMiG,KAAKuT,EAAKvT,KACpBu5C,GAAcK,aAAarmC,EAAKjW,GAAGvD,GAAMgE,KAAK4D,MAW1D,QAAS83C,GAAcz3B,GAKnB,QAASrgB,GAAgB5H,GAGrB,MAFAoC,GAAG+9C,QAAUngD,EAAOA,KACpBoC,EAAGg+C,YAAcn/C,QAAQ6E,KAAK1D,EAAG+9C,SAC1B/9C,EAAG+9C,QAPd,GAAIp5C,IACA04C,OAAQx3B,EAAQkR,SAASsmB,OAASx3B,EAAQkR,SAASsmB,OAAS,KAEhE,OAAOD,GAAcE,cAAc34C,GAAQ/C,KAAK4D,GA5EpD,GAAIxF,GAAKC,IACTD,GAAGq9C,UACHr9C,EAAG+9C,WACH/9C,EAAGg+C,eACHh+C,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASg7C,IAEbt9C,EAAG69C,iBAAkB,EACrB79C,EAAGoE,cACHpE,EAAGI,MAAQ,uBAEXJ,EAAGw9C,aAAeA,EAClBx9C,EAAG49C,gBAAkBA,EACrB59C,EAAG89C,iBAAmBA,EACtB99C,EAAG09C,aAAeA,EAClB19C,EAAGy9C,aAAeA,EAElB58C,IAgDJ88C,EAAiBp9C,SAAW,WAAY,OAAQ,gBAAiB,gBAAiB,QAxElF1B,QACKC,OAAO,OACPK,WAAW,mBAAoBw+C,MA2FxC,WACI,YAEA9+C,SACKC,OAAO,mBAIhB,WACI,YAOA,SAASoyC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,cACHg0C,YAAU,EACVC,SAAU,sBACVrwB,IAAK,WAER5jB,MAAM,mBACHxE,WAAY,sBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,uCACbuoB,IAAK,UAER5jB,MAAM,sBACHxE,WAAY,wBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,yCACbuoB,IAAK,mBAIb6pB,EAAmBC,KAAK,wBAAyB,eAuCrDH,EAAY3wC,SAAW,iBAAkB,sBAzEzC1B,QACKC,OAAO,aACPwyC,OAAOJ,MAqChB,WACI,YAOA,SAAS+M,GAAoBh3C,EAAUvG,EAAMsB,EAAeqB,EAAaC,GAwBrE,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAAS02C,KAEL,QAAStxC,KACLlC,EAAKoB,MAAM,WACX1E,EAAGk+C,eAAiBl+C,EAAGk+C,cACvBl+C,EAAGoC,YAAY0I,SAJnBzH,EAAYyzC,WAAW92C,EAAGyE,MAAM7C,KAAK4D,GAQzC,QAAS24C,KACLn+C,EAAGyE,KAAKZ,KAAO,KACf7D,EAAGk+C,eAAiBl+C,EAAGk+C,cAG3B,QAASE,GAAej6C,GACpBnE,EAAGq+C,eAAel6C,IAAUnE,EAAGq+C,eAAel6C,GAC9CnE,EAAGwE,MAAML,GAAStF,QAAQ6E,KAAK1D,EAAGs+C,UAAUn6C,IAGhD,QAAS8yC,GAAWxyC,EAAMN,GAMtB,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAGwE,MAAMuM,OAAO5M,EAAO,GACvBnE,EAAGs+C,UAAYz/C,QAAQ6E,KAAK1D,EAAGwE,OARnCyC,IAAWrF,KAAK,WACR6C,GACApB,EAAY4zC,WAAWxyC,GAAM7C,KAAK4D,KAU9C,QAAS+4C,GAAWnnC,EAAMjT,GAOtB,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAGq+C,eAAel6C,IAAUnE,EAAGq+C,eAAel6C,GAC9CnE,EAAGs+C,UAAUn6C,GAAStF,QAAQ6E,KAAK1D,EAAGwE,MAAML,IAThD,GAAIQ,IACA4L,QAAS6G,EAAK7G;CAEbjN,GAAK6B,eAAenF,EAAGwE,MAAML,GAAQnE,EAAGs+C,UAAUn6C,KACnDd,EAAY8yC,kBAAkB/+B,EAAK3S,KAAME,GAAQ/C,KAAK4D,GAU9D,QAAS6xC,GAAYxxB,GAKjB,QAASrgB,GAAgB5H,GAGrB,MAFAoC,GAAGwE,MAAQ5G,EAAOA,KAClBoC,EAAGs+C,UAAYz/C,QAAQ6E,KAAK1D,EAAGwE,OACxBxE,EAAGwE,MAPd,GAAIG,IACAF,KAAMohB,EAAQkR,SAAStyB,KAAOohB,EAAQkR,SAAStyB,KAAO,KAE1D,OAAOpB,GAAYg0C,YAAY1yC,GAAQ/C,KAAK4D,GA9EhD,GAAIxF,GAAKC,IACTD,GAAGyE,QACHzE,EAAGwE,SACHxE,EAAGs+C,aACHt+C,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS+0C,IAEbr3C,EAAGk+C,eAAgB,EACnBl+C,EAAGq+C,kBACHr+C,EAAGI,MAAQ,sBACXJ,EAAGw+C,YAAc,aAEjBx+C,EAAG82C,WAAaA,EAChB92C,EAAGm+C,cAAgBA,EACnBn+C,EAAGo+C,eAAiBA,EACpBp+C,EAAGi3C,WAAaA,EAChBj3C,EAAGu+C,WAAaA,EAEhB19C,IAiDJo9C,EAAoB19C,SAAW,WAAY,OAAQ,gBAAiB,cAAe,QA1EnF1B,QACKC,OAAO,aACPK,WAAW,sBAAuB8+C,MA6F3C,WACI,YAOA,SAASQ,GAAsBx3C,EAAUvG,EAAMsuB,EAAI/sB,EAAcD,EAAeqB,EAAaC,GA0BzF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,MAAOJ,EAAGyE,MACtB0yC,IAGJ,QAASnB,GAAuBpQ,EAAY8Y,GACxC9Y,EAAaA,EAAaA,EAAa5lC,EAAG4lC,UAC1C,IAAIjhC,IAAU0xC,aAAczQ,EAAWzkC,GACvC,OAAOkC,GAAY2yC,uBAAuBh2C,EAAGyE,KAAME,GAAQ/C,KAAK,SAAUC,GAEtE,MADAzD,SAAQC,IAAIsG,EAAQ,aAAc3E,EAAGyE,MACjCi6C,EACOC,IADX,SAKR,QAASA,GAAgCD,GACrCtgD,QAAQC,IAAI,WAAYqgD,GACpBA,GAAOp7C,EAAKoB,MAAM,WACtB1E,EAAGoC,YAAY0I,SAGnB,QAAS8zC,KACL,GAAIC,KACJ7+C,GAAG2lC,YAAYrkC,QAAQ,SAAUskC,GAC7BiZ,EAASz9C,KAAK40C,EAAuBpQ,GAAY,MAErD5lC,EAAG2lC,eACH3W,EAAG8D,IAAI+rB,GAAUj9C,KAAK+8C,GAc1B,QAASG,KACL9+C,EAAG4lC,WAAa,KAChB5lC,EAAG++C,qBAAuB/+C,EAAG++C,oBAGjC,QAAS7I,GAAyB/0C,EAAIgD,GAOlC,QAASqB,KACLlC,EAAKoB,MAAM,WACX1E,EAAGg/C,gBAAgBjuC,OAAO5M,EAAO,GACjCnE,EAAGpC,KAAK+nC,YAAc9mC,QAAQ6E,KAAK1D,EAAGg/C,iBAT1C,GAAIr6C,IAAU0xC,aAAcl1C,EACxBA,IACA8F,IAAWrF,KAAK,WACZyB,EAAY6yC,yBAAyBl2C,EAAGyE,KAAME,GAAQ/C,KAAK4D,KAUvE,QAAS2xC,KAEL,QAAS3xC,GAAgB5H,GACrBoC,EAAGi5C,eAAiBr7C,EAAOA,EAAK8H,WAFpCrC,EAAY8zC,oBAAoBv1C,KAAK4D,GAMzC,QAASy5C,GAAmBC,GAWxB,QAAS15C,GAAgB5H,GACrBoC,EAAGi5C,eAAiBr7C,EAAOA,EAAK8H,WAXpC,GAAI9H,IACH2S,QAAS2uC,GAENv6C,GACAohB,KAAM,EACNvI,KAAM,GACN7Q,KAAM,YAEVtJ,GAAY+zC,eAAex5C,EAAM+G,GAAQ/C,KAAK4D,GAOlD,QAAS+xC,KAIL,QAAS/xC,GAAgB5H,GAGrB,MAFAoC,GAAGpC,KAAOA,EAAOA,KACjBoC,EAAGg/C,gBAAkBngD,QAAQ6E,KAAK1D,EAAGpC,KAAKuhD,oBACnCn/C,EAAGg/C,gBANd,MAAIh/C,GAAGyE,KACIpB,EAAYk0C,QAAQv3C,EAAGyE,MAAM7C,KAAK4D,GAD7C,OA7GJ,GAAIxF,GAAKC,IACTD,GAAGpC,QACHoC,EAAGi5C,kBACHj5C,EAAG4lC,cACH5lC,EAAGyE,KAAOxC,EAAawC,KACvBzE,EAAGg/C,mBACHh/C,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASi1C,IAEbv3C,EAAG2lC,eACH3lC,EAAG++C,qBAAsB,EACzB/+C,EAAGI,MAAQ,wBAEXJ,EAAGg2C,uBAAyBA,EAC5Bh2C,EAAG4+C,wBAA0BA,EAC7B5+C,EAAG8+C,oBAAsBA,EACzB9+C,EAAGk2C,yBAA2BA,EAE9Bl2C,EAAGi/C,mBAAqBA,EAExBp+C,IAgDJ49C,EAAsBl+C,SAAW,WAAY,OAAQ,KAAM,eAAgB,gBAAiB,cAAe,QA3E3G1B,QACKC,OAAO,aACPK,WAAW,wBAAyBs/C,MAgI7C,WACI,YAEA5/C,SACKC,OAAO,oBAYhB,WACI,YAOA,SAAS6kB,GAAcwsB,GAWnB,QAAS9oB,GAAgBzpB,GACrB,GAAIwhD,GAAS5O,EAAS,kBACtB,OAAOL,GAAeiP,GAAQ5J,IAAI,KAAM53C,EAAM,MAGlD,QAASyhD,GAAc93B,GACnB,MAAO4oB,GAAe5oB,GAAKsd,MAG/B,QAASrd,GAAiBD,GACtBjS,OAAOC,KAAKgS,EAAK,UApBrB,GAAIipB,GAAS,QACb,QACInpB,gBAAkBA,EAClBg4B,cAAgBA,EAChB73B,iBAAmBA,GAkE3B7D,EAAcpjB,SAAW,kBA5EzB1B,QACKC,OAAO,cACPmyC,QAAQ,gBAAiBttB,MAiClC,WACI,YAQA,SAASutB,GAAYC,EAAgBC,GAEjCD,EACKxtC,MAAM,eACHxE,WAAY,mBACZE,aAAc,KACdL,YAAa,oCACbuoB,IAAK,YAIb6pB,EAAmBC,KAAK,oBAAqB,WA6DjDH,EAAY3wC,SAAW,iBAAkB,sBA7EzC1B,QACKC,OAAO,cACPwyC,OAAOJ,MAsBhB,WACI,YAQA,SAASoO,GAAiBt8C,EAAMq3B,EAAS35B,EAAMijB,EAAeC,EAAqBtE,EAAkBnc,EAC3EF,EAASk1B,EAA6Bj2B,EAAcq9C,GA0Z1E,QAAS1+C,KACLH,EAAKrC,IAAI2B,EAAGI,OACZhC,QAAQC,IAAI,uBAAwB2B,EAAGw/C,gBAEvCC,IAAU79C,KAAK,WACX,GAAI89C,KAiBIh6C,QAASs8B,IAAU79B,GAAS,oCAC5Bw7C,cAAe,2CACfC,iBAAkB,+CAClBC,SACIl6C,mBAAmB,EACnBE,UAAU,GAEd1B,MAAOA,IAIPuB,QAASs8B,IAAU79B,GAAS,8DAC5Bw7C,cAAe,kDACfC,iBAAkB,sDAClBC,SACIl6C,mBAAmB,GAEvBxB,MAAOA,IAmBPuB,QAASs8B,IAAU79B,GAAS,4BAC5Bw7C,cAAe,kDACfC,iBAAkB,sDAClBC,SACIl6C,mBAAmB,EACnBE,UAAU,GAEd1B,MAAOA,IAIPuB,QAASs8B,IAAU79B,GAAS,wCAC5Bw7C,cAAe,iDACfC,iBAAkB,qDAClBC,SACIl6C,mBAAmB,EACnBE,UAAU,EACVi6C,aAAa,GAEjB37C,MAAOA,IAIPuB,QAASs8B,IAAU79B,GAAS,4CAC5Bw7C,cAAe,0DACfC,iBAAkB,8DAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,4CAC5Bw7C,cAAe,kEACfC,iBAAkB,sEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,GAGfnE,GAAGogD,WAAapgD,EAAGogD,WAAWt+C,OAAO49C,IAEzC,IAAIzhC,GAAQ,GAAIlV,KAChBkV,GAAQA,EAAMrV,QAAQqV,EAAMjV,UAAY,GACxChJ,EAAGyxC,aAAaC,cAAgBz9B,OAAOgK,GAAO/J,OAAO,cACrDlU,EAAGyxC,aAAa4O,YAAcpsC,OAAOgK,GAAO/J,OAAO,cACnD2kB,IACAvkB,IACAgsC,IAGJ,QAASb,KACL,MAAOngC,GAAiBa,kBAAkBve,KACtC,SAAUhE,GACNA,EAAK0D,QAAQ,SAAUkvC,GACnBA,EAAO9qC,QAAUs8B,IAAU79B,GAAS,qBAA4BqsC,EAAO9qC,QACvE8qC,EAAOmP,cAAgB,8BAAgCnP,EAAOrvC,GAAK,kBACnEqvC,EAAOoP,iBAAmB,kCAAoCpP,EAAOrvC,GAAK,kBAC1EqvC,EAAOrsC,MAAQA,EACfqsC,EAAOqP,SACHl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBngD,EAAGogD,WAAWh/C,KAAKovC,OAMnC,QAASptB,KACL,GAAIpjB,EAAGugD,MAAO,CACV,GAAIvgD,EAAGwgD,iBAAmBxgD,EAAGwgD,gBAAgB/3C,OACzC,MAAOg4C,IACX,IAAIzgD,EAAG0gD,YACH,MAAOC,GAAkB3gD,EAAG0gD,aAEpC,MAAO1P,GAAUhxC,EAAGw/C,gBAGxB,QAASxO,GAAUR,GACf,GAAI1qB,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,CAEb,IAAIpB,IACAi8C,aAAc5gD,EAAGyxC,aAAamP,aAC9B35B,WAAYjnB,EAAGyxC,aAAaxqB,WAC5BthB,kBAAyD,QAAtC3F,EAAGyxC,aAAa9rC,kBAA8B,KAAO3F,EAAGyxC,aAAa9rC,kBACxFw6C,WAAYngD,EAAGyxC,aAAa0O,WAC5BD,UAAWlgD,EAAGyxC,aAAayO,UAC3B/7C,MAAOqsC,EAAOrsC,MACd08C,cAAe7gD,EAAGyxC,aAAasO,eAAiB//C,EAAGyxC,aAAasO,cAAct3C,OAASzI,EAAGyxC,aAAasO,cAAgB,KACvHe,cAAe9gD,EAAGyxC,aAAauO,eAAiBhgD,EAAGyxC,aAAauO,cAAcv3C,OAASzI,EAAGyxC,aAAauO,cAAgB,KACvHe,cAAe/gD,EAAGyxC,aAAasP,eAAiB/gD,EAAGyxC,aAAasP,cAAct4C,OAASzI,EAAGyxC,aAAasP,cAAgB,KACvHC,cAAehhD,EAAGyxC,aAAauP,eAAiBhhD,EAAGyxC,aAAauP,cAAcv4C,OAASzI,EAAGyxC,aAAauP,cAAgB,KACvHC,wBAAyBjhD,EAAGyxC,aAAawO,uBAAyBjgD,EAAGyxC,aAAawO,sBAAsBx3C,OAASzI,EAAGyxC,aAAawO,sBAAwB,KACzJiB,yBAA0BlhD,EAAGyxC,aAAayP,yBAC1Ct5B,YAAa5nB,EAAGyxC,aAAa7pB,aAAe5nB,EAAGyxC,aAAa7pB,YAAYnf,OAASzI,EAAGyxC,aAAa7pB,YAAc,KAC/Gu5B,SAAUnhD,EAAGyxC,aAAa0P,SAC1BC,cAAephD,EAAGyxC,aAAa2P,cAAgBphD,EAAGyxC,aAAa2P,cAAgB,KAC/Ef,YAAargD,EAAGyxC,aAAa4O,YAAcrgD,EAAGyxC,aAAa4O,YAAc,KAEzE97B,iBAAkBvkB,EAAGyxC,aAAaltB,iBAAmBvkB,EAAGyxC,aAAaltB,iBAAmB,KACxFC,eAAgBxkB,EAAGyxC,aAAajtB,eAAiBxkB,EAAGyxC,aAAajtB,eAAiB,KAClFC,mBAAoBzkB,EAAGyxC,aAAahtB,mBAAqBzkB,EAAGyxC,aAAahtB,mBAAqB,KAC9FC,iBAAkB1kB,EAAGyxC,aAAa/sB,iBAAmB1kB,EAAGyxC,aAAa/sB,iBAAmB,KAKvF8rB,GAAO6Q,aAAY18C,EAAO8tC,gBAAkBzyC,EAAGyxC,aAAagB,iBAC5DjC,EAAO8Q,WAAU38C,EAAO+sC,cAAgB1xC,EAAGyxC,aAAaC,eAC7DtzC,QAAQC,IAAI,SAAUsG,GACtBgf,EAAc0D,gBAAgB1iB,GAAQ/C,KAAK,SAAU0lB,GACjD,GAAmC,SAA/BtnB,EAAGyxC,aAAaxqB,WAAuB,CACvC,GAAIM,GAAMipB,EAAOoP,iBAAmBt4B,CACpClpB,SAAQC,IAAIkpB,GACZ5D,EAAc6D,iBAAiBD,GAI/BvnB,EAAG+F,SAAU,MACV,IAAmC,SAA/B/F,EAAGyxC,aAAaxqB,WAAuB,CAC9C,GAAIlpB,GAAU2X,SAASC,eAAe,gBACtC5X,GAAQ8X,UAAY,wDACpB,IAAI0R,GAAMipB,EAAOmP,cAAgBr4B,CACjClpB,SAAQC,IAAI,gBAAiBynB,EAAUiB,KAAK9S,WAC5C0P,EAAc07B,cAAc93B,GAAK3lB,KAAK,SAAUhE,GAQ5C,MANAA,GAAOA,EAAKqB,QAAQ,aAAc,SAClClB,EAAQ8X,UAAYjY,EACpBoC,EAAGuhD,cAAgB3jD,EACnBQ,QAAQC,IAAI,iBAAkBynB,EAAUiB,KAAK9S,WAC7CjU,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EACNnI,GACR,SAAU4I,GACTzI,EAAQ8X,UAAY,gEACpB7V,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,IAGrBs0B,EAAQmnB,eAAeC,QAAQzhD,EAAGw/C,eAAe95C,QAAS,UAIlE,QAAS+6C,KACLriD,QAAQC,IAAI,eACZ2B,EAAGyxC,aAAaxqB,WAAa,QAC7BjnB,EAAGwgD,gBAAgBl/C,QAAQ,SAAUkvC,GACjCQ,EAAUR,KAIlB,QAASmQ,GAAkBe,GACvB,GAAI1iC,KAEJ,IADA5gB,QAAQC,IAAI,oBAAqBqjD,GAC7BA,EAAMC,MAAM,WAAY,CACxBvjD,QAAQC,IAAI,QAASqjD,EAAMC,MAAM,QAIjC,KAAK,GAHDC,GAAaF,EAAMC,MAAM,QAAQrpC,IAAI,SAAUnU,GAC/C,MAAOgb,UAAShb,EAAO,MAElBqE,EAAIo5C,EAAW,GAAIp5C,GAAKo5C,EAAW,GAAIp5C,IAC5CwW,EAAQ5d,KAAKoH,OAEd,CAAA,IAAIk5C,EAAMC,MAAM,cAQnB,WADAr+C,MAAKoB,MAAM,QAAS,kBANpBtG,SAAQC,IAAI,QAASqjD,EAAMC,MAAM,SACjC3iC,EAAU0iC,EAAMC,MAAM,QAAQrpC,IAAI,SAAUnU,GACxC,MAAOgb,UAAShb,EAAO,MAO/B,MAAO09C,GAAmB7iC,GAG9B,QAAS6iC,GAAmB7iC,GACxB5gB,QAAQC,IAAI,UAAW2gB,EACvB,IAAI8iC,GAAU9hD,EAAGogD,WAAWrpB,OAAO,SAAUyZ,GACzC,MAAOxxB,GAAQ3O,QAAQmgC,EAAOrsC,OAAS,GAE3C/F,SAAQC,IAAI,UAAWyjD,GACvB9hD,EAAGwgD,gBAAkBsB,EACrBrB,IAGJ,QAASsB,GAAgBvR,GACrB,MAAOnW,GAAQmnB,eAAeQ,QAAQxR,EAAO9qC,SAGjD,QAAS0jB,GAAaC,GAClB,MAAOzF,GAAoBq+B,WAAW/iD,MAAOmqB,IAAIznB,KAAK,SAAUhE,GAE5D,MADAoC,GAAGupB,MAAQ3rB,MACJoC,EAAGupB,QAIlB,QAASsP,KACL,MAAOV,GAA4BU,8BAA8Bj3B,KAAK,SAAUhE,GAE5E,MADAoC,GAAGkiD,UAAYtkD,MACRoC,EAAGkiD,YAIlB,QAAS5tC,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YActB,QAAS6gB,KAEL,MADA1nB,GAAGskB,WAAWqD,aACT3nB,EAAGskB,WAAWsD,aAAoD,IAArC5nB,EAAGskB,WAAWsD,YAAYnf,OAKrDtF,EAAgB0kB,6BAA6B7nB,EAAGskB,WAAWsD,aAAahmB,KAC3E,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,YAPd9S,EAAG8S,YACI9S,EAAG8S,UAUlB,QAASwtC,KACLf,EAAYe,cAAc1+C,KAAK,SAAUhE,GACrCoC,EAAGmiD,SAAWvkD,MACdQ,QAAQC,IAAI,iBAAkB2B,EAAGmiD,YAIzC,QAASC,GAAoB/P,GACzB,GAAIxE,GAAM7tC,EAAGogD,WAAW33C,MACxB,OAAKzI,GAAGw/C,gBAAmBx/C,EAAGw/C,eAAer7C,OAI7CkuC,GAAKryC,EAAGw/C,eAAer7C,MACvBkuC,IACAA,GAAKxE,OACL7tC,EAAGw/C,eAAiBx/C,EAAGogD,WAAW/N,UAN9BryC,EAAGw/C,eAAuB,IAANnN,EAAUryC,EAAGogD,WAAW,GAAKpgD,EAAGogD,WAAWvS,EAAM,IAhuB7E,GAAI7tC,GAAKC,IACTD,GAAGI,MAAQ,oBAEXJ,EAAGw/C,kBACHx/C,EAAGyxC,cAAgBxqB,WAAY,OAAQ84B,iBAAmBC,iBAAmBE,UAAW,KACxFlgD,EAAGqiD,aAAe,OAAQ,SAC1BriD,EAAGsiD,cAAgB,QAAS,WAAY,SAAU,OAClDtiD,EAAGuiD,QAAU,GACbviD,EAAGgD,KAAOA,EACVhD,EAAGugD,OAAQ,EACXvgD,EAAGolB,WAAaljB,EAAa+G,aAAanH,SAASX,GAAI,KAAMf,MAAO,cACpE,IAAI4hC,GAAU/+B,EAAQ,UACtBjD,GAAG+hD,gBAAkBA,EACrB/hD,EAAG0nB,yBAA2BA,EAC9B1nB,EAAGojB,OAASA,CACZ,IAAIjf,GAAQ,CACZnE,GAAGwgD,mBACHxgD,EAAGskB,cACHtkB,EAAGmiD,YACHniD,EAAGogD,aAEK16C,QAASs8B,IAAU79B,GAAS,oDAC5Bw7C,cAAe,+CACfC,iBAAkB,mDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,4DAC5Bw7C,cAAe,2CACfC,iBAAkB,+CAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EAEfE,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,0EAC5Bw7C,cAAe,gDACfC,iBAAkB,oDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,mEAC5Bw7C,cAAe,8DACfC,iBAAkB,kEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,oFAC5Bw7C,cAAe,qDACfC,iBAAkB,yDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,yEAC5Bw7C,cAAe,4DACfC,iBAAkB,gEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,oEAC5Bw7C,cAAe,4DACfC,iBAAkB,gEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,yGAC5Bw7C,cAAe,8CACfC,iBAAkB,kDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,wDAC5Bw7C,cAAe,yDACfC,iBAAkB,6DAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,iEAC5Bw7C,cAAe,+DACfC,iBAAkB,mEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,wGAC5Bw7C,cAAe,6DACfC,iBAAkB,iEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,8DAC5Bw7C,cAAe,6DACfC,iBAAkB,iEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,sFAC5Bw7C,cAAe,sDACfC,iBAAkB,0DAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,4EAC5Bw7C,cAAe,gDACfC,iBAAkB,oDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,2DAC5Bw7C,cAAe,8DACfC,iBAAkB,kEAClBC,SACIl6C,mBAAmB,EAEnBs6C,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,EACZe,0BAA0B,GAE9B/8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,iHAC5Bw7C,cAAe,oDACfC,iBAAkB,wDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,iEAC5Bw7C,cAAe,8CACfC,iBAAkB,kDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,0GAC5Bw7C,cAAe,oDACfC,iBAAkB,wDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,wFAC5Bw7C,cAAe,8CACfC,iBAAkB,kDAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,6EAC5Bw7C,cAAe,6EACfC,iBAAkB,iFAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,0EAC5Bw7C,cAAe,4DACfC,iBAAkB,gEAClBC,SACIl6C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,GAEhBh8C,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,mDAC5Bw7C,cAAe,uEACfC,iBAAkB,2EAClBC,SACIh6C,UAAU,GAEd1B,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,wFAC5Bw7C,cAAe,mDACfC,iBAAkB,uDAClBC,SACIl6C,mBAAmB,EAEnBE,UAAU,GAEd1B,MAAOA,IAGPuB,QAASs8B,IAAU79B,GAAS,yEAC5Bw7C,cAAe,sDACfC,iBAAkB,0DAClBC,SACI2C,yBAAwB,EACxB78C,mBAAmB,EAEnBo6C,eAAe,EACfC,eAAe,EACfC,uBAAuB,EAEvBC,WAAW,EACXC,YAAY,EACZe,0BAA0B,GAE9B/8C,MAAOA,IAUfnE,EAAGopB,aAAeA,EAClBppB,EAAGoiD,oBAAsBA,EAGzBvhD,IA7UJy+C,EAAiB/+C,SAAW,OAAQ,UAAW,OAAQ,gBAAiB,sBAAuB,mBAAoB,kBAAmB,UAAW,8BAA+B,eAAgB,eA9EhM1B,QACKC,OAAO,cACPK,WAAW,mBAAoBmgD,MAkvBxC,WACI,YAEAzgD,SACKC,OAAO,sBAYhB,WACI,YAOA,SAASqE,GAAgBgtC,GAyBrB,QAASn9B,GAAuB7R,GAC5B,GAAIomB,GAAM8tB,EAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAGlC,QAAShyB,GAAyB1R,GACjC,GAAIomB,GAAM8tB,EAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG5B,QAAShd,GAA6BD,GAC/B,GAAIL,GAAMk7B,EAAY,qBACtB,OAAOtS,GAAe5oB,GAAKiuB,IAAI,KAAK5tB,EAAa,MApCrD,GAAIytB,GAAO,qBACPqN,EAAU,iBACVD,EAAY,mBACZ58C,EAAWsqC,EAAekF,GAC1BsN,EAAOxS,EAAeuS,EAC1B,QACIvtC,gBAAiBtP,EAASg/B,IAC1B+d,YAAa/8C,EAASkrC,QACtB8R,eAAgBh9C,EAAS+qC,KACzBkS,eAAgBj9C,EAAS2vC,IACzBuN,eAAgBl9C,EAAAA,UAChBm9C,aAAcL,EAAK9d,IACnBoe,QAASN,EAAK5R,QACdmS,WAAYP,EAAK/R,KACjBuS,WAAYR,EAAKnN,IACjB4N,WAAYT,EAAAA,UAEf3vC,uBAAwBA,EACxBH,yBAA0BA,EACvBgV,6BAA6BA,GAsDrC1kB,EAAgB5C,SAAW,kBA/E3B1B,QACKC,OAAO,gBACPmyC,QAAQ,kBAAmB9tC,MA+CpC,WACI,YAOA,SAAS+tC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdL,YAAa,6CACbuoB,IAAK,mBAER5jB,MAAM,wBACHxE,WAAY,2BACZE,aAAc,KACdL,YAAa,+CACbuoB,IAAK,wBAGb6pB,EAAmBC,KAAK,sBAAuB,aA4DnDH,EAAY3wC,SAAW,iBAAkB,sBAhFzC1B,QACKC,OAAO,gBACPwyC,OAAOJ,MAsBhB,WACI,YAOA,SAASmS,GAAuBp8C,EAAUvG,EAAMsB,EAAemB,EAAiBG,GAoB5E,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAAS+U,GAAgB0Q,GACrB,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAO4D,GAAgBgS,gBAAgBxQ,GAAQ/C,KAC3C,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAMtB,QAASg8C,KACL1/C,EAAgB0/C,eAAe7iD,EAAG6F,UAAUjE,KAAK,WAC7C0B,EAAKoB,MAAM,UAAW,wBACtBiD,IACA3H,EAAGoC,YAAY0I,WAKvB,QAASi4C,GAAe5hD,GACpBgC,EAAgB4/C,eAAe5hD,GAAIS,KAC/B,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASg4C,GAAe1rC,GAEpBjU,EAAgB2/C,eAAe1rC,EAAKjW,GAAIiW,GAAMxV,KAC1C,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGsjD,WA9DP,GAAItjD,GAAKC,IACTD,GAAGT,aACHS,EAAG6G,aACH7G,EAAG6F,YACH7F,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS6S,IAEbnV,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACf/nB,EAAG4+B,WACH/9B,IACAb,EAAGsyC,OAASuQ,EACZ7iD,EAAAA,UAAY+iD,EACZ/iD,EAAGuJ,OAASu5C,EACZ9iD,EAAG2H,UAAYA,EA4DnB07C,EAAuB9iD,SAAW,WAAY,OAAQ,gBAAiB,kBAAmB,QAjF1F1B,QACKC,OAAO,gBACPK,WAAW,yBAA0BkkD,MAuE9C,WACI,YAOA,SAASE,GAAyBt8C,EAAUvG,EAAM4C,EAAMtB,EAAemB,EAAiBlB,GAsBpF,QAASpB,KACLH,EAAKrC,IAAI2B,EAAGI,OACZojD,EAAgBxjD,EAAGmB,IAGvB,QAAS6R,KACL,MAAO7P,GAAgB6P,uBAAuBhT,EAAGmB,IAAIS,KACjD,SAAUhE,GAEN,MADAoC,GAAGyjD,OAAS7lD,EAAOA,KACZoC,EAAGyjD,SAMtB,QAASP,KACLljD,EAAG2iD,KAAK98C,SAAW7F,EAAG6F,SACtB1C,EAAgB+/C,WAAWljD,EAAG2iD,MAAM/gD,KAAK,WACrC0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAKvB,QAASs4C,GAAWjiD,GAChBgC,EAAgBigD,WAAWjiD,GAAIS,KAC3B,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASq4C,GAAW/rC,GAEhBjU,EAAgBggD,WAAW/rC,EAAKjW,GAAIiW,GAAMxV,KACtC,WACI5B,EAAGoC,YAAY0I,WAI3B,QAAS04C,GAAgBriD,GACrBgC,EAAgBy/C,YAAYzhD,GAAIS,KAC5B,SAAUhE,GACNoC,EAAG6F,SAAWjI,EAAOA,OAKjC,QAAS+J,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG2iD,KAAK9+C,KAAO,GAvEnB,GAAI7D,GAAKC,IACTD,GAAGT,aACHS,EAAGyjD,UACHzjD,EAAG2iD,QACH3iD,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS0Q,IAEbhT,EAAGmB,GAAKc,EAAad,GACrBnB,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EAEflnB,IAEAb,EAAGsyC,OAAS4Q,EACZljD,EAAAA,UAAYojD,EACZpjD,EAAGuJ,OAAS45C,EACZnjD,EAAG2H,UAAYA,EA2DnB47C,EAAyBhjD,SAAW,WAAY,OAAQ,OAAQ,gBAAiB,kBAAmB,gBAlFpG1B,QACKC,OAAO,gBACPK,WAAW,2BAA4BokD,MAkFhD,WACI,YAEA1kD,SACKC,OAAO,uBAOhB,WACI,YAOA,SAAS4kD,GAAgBvT,GACrB,GAAIkF,GAAO,qBACPsO,EAAGxT,EAAekF,EACtB,QACIuO,gBAAiBD,EAAG9e,IACpBgf,YAAaF,EAAG5S,QAEhB+S,eAAgBH,EAAGnO,KAuE3BkO,EAAgBnjD,SAAW,kBAnF3B1B,QACKC,OAAO,iBACPmyC,QAAQ,kBAAmByS,MAoBpC,WACI,YAOA,SAASxS,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,kBACHxE,WAAY,qBACZE,aAAc,KACdL,YAAa,0CACbuoB,IAAK,eAGb6pB,EAAmBC,KAAK,uBAAwB,cAsEpDH,EAAY3wC,SAAW,iBAAkB,sBApFzC1B,QACKC,OAAO,iBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS6S,GAAmB98C,EAAUvG,EAAMsB,EAAe0hD,GAgBvD,QAAS7iD,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAASwjD,GAAgB/9B,GACrB,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAOmkD,GAAgBE,gBAAgBj/C,GAAQ/C,KAC3C,SAAUhE,GAEN,MADAoC,GAAG4T,UAAYhW,EAAOA,KACfoC,EAAG4T,YAMtB,QAASkwC,GAAe1sC,GAEpBssC,EAAgBI,eAAe1sC,EAAKjW,GAAIiW,GAAMxV,KAC1C,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GA3CjB,GAAI1F,GAAKC,IACTD,GAAGT,aACHS,EAAG4T,aACH5T,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASshD,IAEb5jD,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGuJ,OAASu6C,EACZ9jD,EAAG2H,UAAYA,EAoEnBo8C,EAAmBxjD,SAAW,WAAY,OAAQ,gBAAiB,mBArFnE1B,QACKC,OAAO,OACPK,WAAW,qBAAsB4kD,MAsD1C,WACI,YAEAllD,SACKC,OAAO,yBAIhB,WACI,YAOA,SAASoyC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,oBACHg0C,YAAU,EACVC,SAAU,sBACVrwB,IAAK,iBAER5jB,MAAM,yBACHxE,WAAY,4BACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,mDACbuoB,IAAK,UAIb6pB,EAAmBC,KAAK,4BAA6B,oBA8DzDH,EAAY3wC,SAAW,iBAAkB,sBAtFzC1B,QACKC,OAAO,mBACPwyC,OAAOJ,MA2BhB,WACI,YAOA,SAAS8S,GAA0BtjD,EAAMsB,EAAeqB,EAAaC,GAyBjE,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZJ,EAAGoC,YAAc,GAAIJ,OACjBM,QAAS60C,IAIjB,QAAS8M,GAAqB9/C,GAC1BnE,EAAGkkD,qBAAqB//C,IAAUnE,EAAGkkD,qBAAqB//C,GAC1DnE,EAAG2lC,YAAYxhC,GAAStF,QAAQ6E,KAAK1D,EAAGmkD,gBAAgBhgD,IAG/D,QAAS6jB,KACFhoB,EAAGoC,YAAY2jB,KAAK,GAC1B/lB,EAAGoC,YAAY0I,SAGb,QAASs5C,GAAiBhtC,EAAMjT,EAAOkgD,GAYnC,QAAS7+C,KACLlC,EAAKoB,MAAM,WACX1E,EAAGkkD,qBAAqB//C,IAAUnE,EAAGkkD,qBAAqB//C,GACtDkgD,IACArkD,EAAGkkD,qBAAqB//C,EAAQ,IAAK,GAEzCnE,EAAGmkD,gBAAgBhgD,GAAStF,QAAQ6E,KAAK1D,EAAG2lC,YAAYxhC,IAjB5D,GAAIQ,IACA4L,QAAS6G,EAAK7G,QAGbjN,GAAK6B,eAAenF,EAAG2lC,YAAYxhC,GAAQnE,EAAGmkD,gBAAgBhgD,IAExDkgD,IACPrkD,EAAGkkD,qBAAqB//C,IAAS,EACjCnE,EAAGkkD,qBAAqB//C,EAAQ,IAAK,GAHrCd,EAAY+yC,wBAAwBh/B,EAAKjW,GAAIwD,GAAQ/C,KAAK4D,GAgBlE,QAAS2xC,GAAkBtxB,GAQvB,QAASrgB,GAAgB5H,GAKrB,MAJAoC,GAAG2lC,YAAc/nC,EAAOA,EAAK8H,WAC7B1F,EAAGmkD,gBAAkBtlD,QAAQ6E,KAAK1D,EAAG2lC,aACrC3lC,EAAGoC,YAAYkkB,MAAM1oB,EAAK2oB,eAC1BvmB,EAAGwmB,gBAAkB5oB,EAAK2oB,cACnBvmB,EAAG2lC,YAZd,GAAIhhC,IACA6Y,KAAMqI,EAAQG,QACjBD,KAAMF,EAAQE,OAAS,EAI3B,OAFG/lB,GAAGwd,KAAOqI,EAAQG,QAClBhmB,EAAG+lB,KAAOF,EAAQE,OAAS,EACvB1iB,EAAY+zC,eAAep3C,EAAGskB,WAAY3f,GAAQ/C,KAAK4D,GAU/D,QAASmK,GAAWrG,EAAM8N,EAAK5O,GACZ,UAAZc,EAAMnJ,KACLikD,EAAiBhtC,EAAM5O,GAAG,GACZ,QAAdc,EAAMnJ,KAAiBmJ,EAAMwG,UAAYtH,EAAI,GAC7CxI,EAAGkkD,qBAAqB17C,IAAK,EAC7BxI,EAAGkkD,qBAAqB17C,EAAI,IAAK,GACZ,QAAdc,EAAMnJ,KAAkBmJ,EAAMwG,WACrC9P,EAAGkkD,qBAAqB17C,IAAK,EAC7BxI,EAAGkkD,qBAAqB17C,EAAI,IAAK,GAxFzC,GAAIxI,GAAKC,IACTD,GAAG4lC,cACH5lC,EAAG2lC,eACH3lC,EAAGmkD,mBACHnkD,EAAGkkD,wBACHlkD,EAAGI,MAAQ,wBACXJ,EAAGskD,cACEziD,OAAO,EAAMzB,MAAO,SACpByB,OAAO,EAAOzB,MAAO,YACrByB,MAAO,KAAMzB,MAAO,QAE5BJ,EAAGskB,YACFigC,OAAO,GAGLvkD,EAAGikD,qBAAuBA,EAC1BjkD,EAAGokD,iBAAmBA,EACtBpkD,EAAG2P,WAAaA,EACnB3P,EAAGgoB,OAASA,EAETnnB,IA6DJmjD,EAA0BzjD,SAAW,OAAQ,gBAAiB,cAAe,QAvF7E1B,QACKC,OAAO,mBACPK,WAAW,4BAA6B6kD,MAqGjD,WACI,YAOA,SAAS9gD,GAAkBitC,GAYvB,QAASqU,GAAerjD,GACpB,GAAIomB,GAAM8tB,EAAOl0C,CACjB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS4f,GAAStjD,GACd,GAAIomB,GAAM8tB,EAAO,SAAWl0C,CAC5B,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS6f,GAAYvjD,GACjB,GAAIomB,GAAM8tB,EAAO,YAAcl0C,CAC/B,OAAOgvC,GAAe5oB,GAAKsd,MAvB/B,GAAIwQ,GAAO,kBACWlF,GAAekF,EACrC,QACImP,eAAgBA,EAChBC,SAAUA,EACVC,YAAaA,GA6ErBxhD,EAAkB3C,SAAW,kBAxF7B1B,QACKC,OAAO,kBACPmyC,QAAQ,kBAAmB/tC,MAsCpC,WACI,YAOA,SAASA,GAAkBitC,GAuFvB,QAASwU,GAAe9/C,GACpB,GAAI0iB,GAAM8tB,GAAOxwC,EAAe,iBAChC,OAAOsrC,GAAe5oB,GAAKsd,MAG/B,QAASlwB,GAAkChT,EAAYgD,GACnD,GAAI4iB,GAAM8tB,GAAO,qCAAuC1zC,CACxD,OAAOwuC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASyB,GAAevB,EAAcrD,GAClC,GAAI+lB,GAAM8tB,GAAOxwC,EAAe,kBAC5BF,GACAnD,SAAUA,EAEd,OAAO2uC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASoQ,GAAiCpT,EAAYgD,GAClD,GAAI4iB,GAAM8tB,GAAO,oCAAsC1zC,CACvD,OAAOwuC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASqQ,GAAsBpQ,EAAgBD,GAC3C,GAAI4iB,GAAM8tB,GAAO,yBAA2BzwC,CAC5C,OAAOurC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAAS0P,GAAoB1S,GACzB,GAAI4lB,GAAM8tB,GAAO,uBAAyB1zC,CAC1C,OAAOwuC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM,MAG/C,QAASnxC,GAAkBlD,EAAIwD,GAC3B,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,YACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASI,GAAqB5D,EAAIwD,GAC9B,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASmtB,GAA0B3wB,EAAIwD,GACnC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,4BACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASgM,GAAexP,GACpB,GAAIomB,GAAM8tB,GAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS+f,GAAkBzjD,GACvB,GAAIomB,GAAM8tB,GAAOl0C,EAAK,iBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAASggB,GAA8B1jD,GACnC,GAAIomB,GAAM8tB,GAAOl0C,EAAK,oBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS3U,GAAgB/uB,EAAIvD,GACzB,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,QACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAAS0yB,GAA6BnvB,EAAIvD,GACtC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,qBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAAS6yB,GAAiBtvB,EAAIvD,GAC1B,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,SACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASo1B,GAAgB7xB,EAAIvD,GACzB,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAIzC,QAASyyB,GAA4BlvB,EAAIvD,GACrC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,oBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAAS8yB,GAA0BvvB,EAAIvD,GACnC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASwyB,GAAmBjvB,EAAIvD,GAC5B,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,qBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAAS2yB,GAAiBpvB,EAAIvD,GAC1B,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,SACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASwb,GAAwBjY,EAAIwD,GACjC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAG7C,QAASkmB,GAA2B1pB,EAAIvD,EAAM+G,GAC1C,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,iBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAAS4mB,GAA6BpqB,EAAIwD,GACtC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,iBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASwmB,GAAoChqB,GACzC,GAAIomB,GAAM8tB,GAAOl0C,EAAK,oBACtB,OAAOgvC,GAAe5oB,GAAKiuB,MAG/B,QAASnqB,GAAwBlqB,EAAIvD,GACjC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAAS2e,GAAuBpb,EAAIvD,GAChC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,aACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASif,GAA0B1b,EAAIvD,EAAMknD,GACzC,GAAIv9B,GAAM8tB,GAAOl0C,EAAK,iBAClBwD,GAAUqY,oBAAqB8nC,EACnC,OAAO3U,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASkZ,GAA+B1c,EAAIvD,EAAM+G,GAC9C,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,qBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASyK,GAAuBjO,EAAIvD,GAChC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,aACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAAS4R,GAA0BrO,EAAIvD,EAAM+G,GACzC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASqxB,GAAyB70B,EAAIvD,GAClC,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASu4B,GAA4Bh1B,EAAIvD,EAAM+G,GAC3C,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASsS,GAAW9V,EAAIsV,EAAmB9R,GACvC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,aACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM/+B,EAAmB9R,GAG5D,QAASmY,GAA4B3b,EAAIwD,GACrC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS8K,GAA4BtO,EAAIwD,GACrC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS0H,GAA8BlL,EAAIwD,GACvC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASyxB,GAA8Bj1B,EAAIwD,GACvC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS+uB,GAA+BvyB,EAAIwD,GACxC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,mBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAI5C,QAASkT,GAAa1W,EAAIwD,GACtB,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM,KAAM7wC,GAG/C,QAASogD,GAA0B5jD,EAAIvD,EAAM+G,GACzC,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASwuB,GAA8BhyB,EAAI+oB,EAAYvlB,GACnD,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKmtB,cAAcxqB,EAAYvlB,GAGzD,QAASW,GAAiCnE,EAAI6D,EAAgBL,GAC1D,GAAI4iB,GAAM8tB,GAAOl0C,EAAK,uBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAMxwC,EAAgBL,GAGzD,QAAS8tB,GAAyBtxB,EAAIoC,GAClC,GAAIgkB,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKrtC,GAGpC,QAASyhD,GAA4B7jD,EAAIwV,GACrC,GAAI4Q,GAAM8tB,GAAOl0C,EAAK,wBACtB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM7+B,GAGzC,QAAS0W,GAA0BlsB,GAC/B,GAAIomB,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAASj7B,GAA4BzI,GACjC,GAAIomB,GAAM8tB,GAAOl0C,EAAK,qBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAAS94B,GAAyB5K,EAAIoK,GAClC,GAAIgc,GAAM8tB,GAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKrlC,GAGpC,QAASsd,GAAiB1nB,GACtB,GAAIomB,GAAM8tB,GAAOl0C,EAAK,SACtB,OAAOgvC,GAAe5oB,GAAKiuB,MAG/B,QAASyP,GAAwB9jD,GAC7B,GAAIomB,GAAM8tB,GAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKiuB,MAG/B,QAASlzB,GAAgBnX,GACrB,GAAIoc,GAAM8tB,GAAO,iBACjB,OAAOlF,GAAe5oB,GAAKsd,KAAK15B,UAAWA,IAG/C,QAASgM,GAAyBtS,EAAcuS,GAC5C,GAAImQ,GAAM8tB,GAAOxwC,EAAe,iBAEhC,OAAOsrC,GAAe5oB,GAAKqpB,KAAKx5B,GAGpC,QAASE,GAA4BzS,EAAcuS,GAC/C,GAAImQ,GAAM8tB,GAAOxwC,EAAe,qBAC5BF,GACAugD,OAAQ9tC,EAAKjW,GAEjB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAMp+B,EAAMzS,GAG/C,QAASoT,GAA4B5W,EAAI+jD,GACrC,GAAI39B,GAAM8tB,GAAOl0C,EAAK,qBAClBwD,GACAugD,OAAQA,EAEZ,OAAO/U,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS2e,IAAgBniB,EAAIvD,GACzB,GAAI2pB,GAAM8tB,GAAOl0C,EAAK,+BACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASylB,IAAmBliB,EAAIvD,GAC5B,GAAI2pB,GAAM8tB,GAAO,6BAA8Bl0C,EAAI,SACnD,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,GAGzC,QAASysB,IAAgClpB,EAAIwD,EAAO/G,GAChD,GAAI2pB,GAAM8tB,GAAO,4BAA6Bl0C,EAAI,UAClD,OAAOgvC,GAAe5oB,GAAKmtB,cAAc92C,EAAK+G,GAGlD,QAASylB,IAAmCjpB,EAAIwD,EAAO/G,GACnD,GAAI2pB,GAAM8tB,GAAO,4BAA6Bl0C,EAAI,aAClD,OAAOgvC,GAAe5oB,GAAKmtB,cAAc92C,EAAK+G,GAIlD,QAASgtC,MACL,QACKxwC,GAAI,EAAG0C,KAAM,UAAWzD,MAAO,YAAa+kD,OAAO,EAAMt/C,UAAU,EAAMsD,MAAO,EAAG,GAAIC,cACvFjI,GAAI,EAAG0C,KAAM,UAAWzD,MAAO,UAAW+kD,OAAO,EAAMt/C,UAAU,EAAMsD,QAAUC,cAE9EjI,GAAI,EACJ0C,KAAM,UACNzD,MAAO,6BACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,EAAG,GACVC,SAAU,IAGVjI,GAAI,EACJ0C,KAAM,aACNzD,MAAO,2BACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,EAAG,GACVC,SAAU,IAGVjI,GAAI,EACJ0C,KAAM,sBACNzD,MAAO,6BACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,EAAG,GACVC,SAAU,IAGVjI,GAAI,EACJ0C,KAAM,0BACNzD,MAAO,qCACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,KAAM,GACbC,SAAU,IAGVjI,GAAI,EACJ0C,KAAM,0BACNzD,MAAO,4BACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,EAAG,MACVC,SAAU,IAEbjI,GAAI,EAAG0C,KAAM,mBAAoBzD,MAAO,qBAAsB+kD,OAAO,EAAOt/C,UAAU,IAEnF1E,GAAI,EACJ0C,KAAM,mBACNzD,MAAO,4BACP+kD,OAAO,EACPt/C,UAAU,EACVsD,MAAO,EAAG,MACVC,SAAU,IAEbjI,GAAI,EAAG0C,KAAM,oBAAqBzD,MAAO,oBAAqB+kD,OAAO,EAAMt/C,UAAU,IAElF1E,GAAI,GACJ0C,KAAM,iBACNzD,MAAO,oBACP+kD,OAAO,EACPt/C,UAAU,EACVyzC,QAAQ,IAKpB,QAAS8L,IAAYC,EAAejxC,EAAOkxC,GAEvC,GAAc,WAAVlxC,GAAwC,IAAlBixC,EACtB,MAAO1T,MAAW,GACtB,IAAwB,IAApB2T,GAA2C,IAAlBD,EACzB,MAAOD,IAAY,EAAGhxC,EAC1B,IAAImxC,GAAmB,UAAVnxC,EAAoB,EAAI,EACjCxQ,EAAc+tC,KAAW0T,EAC7B,OAAKzhD,IAAgBA,EAAYuF,MAASvF,EAAYuF,KAAKo8C,GAEpD5T,KAAW/tC,EAAYuF,KAAKo8C,KADvBnlD,MAAO,IAIvB,QAASolD,IAAgBH,EAAeC,GACpC,GAAwB,IAApBA,IAA4C,IAAlBD,GAAyC,IAAlBA,GACjD,MAAO1T,MAAW,EACtB,IAAI/tC,GAAc+tC,KAAW0T,EAC7B,OAAKzhD,IAAgBA,EAAYwF,SAE1BuoC,KAAW/tC,EAAYwF,WADlBhJ,MAAO,IAIvB,QAASypB,IAAStmB,GACd,GAAIqa,MACAiJ,EAAW5S,OAAO4S,SAAU5S,SAAU8S,KAAK9S,OAAO1Q,EAAWkiD,sBAAsBC,QAMvF,OALA9nC,GAAIxd,MAAQymB,EAAWlc,KAAKg7C,KAAK9+B,GAAY,OAAS;AACtDjJ,EAAAA,SAAYra,EAAWK,YAAYkuC,YAAcjrB,GAAuB,EAAXA,EAAe,GAC7D,EAAXA,EAAe,cACA,EAAXA,EAAe,cACA,EAAXA,EAAe,cAAgB,cACpCjJ,EAGX,QAASgoC,MACL,QACK/jD,MAAO,SAAU0O,QAAS,SAC1B1O,MAAO,cAAe0O,QAAS,cAC/B1O,MAAO,WAAY0O,QAAS,YAC5B1O,MAAO,WAAY0O,QAAS,oBAIrC,QAASs1C,MACL,QACK1kD,GAAI,EAAGU,MAAO,QAASgC,KAAM,QAAS0M,QAAS,0BAC/CpP,GAAI,EAAGU,MAAO,SAAUgC,KAAM,SAAU0M,QAAS,QACjDpP,GAAI,EAAGU,MAAO,UAAWgC,KAAM,UAAW0M,QAAS,WAEhDpP,GAAI,EACJU,MAAO,SACPgC,KAAM,qCACN0M,QAAS,iDAEZpP,GAAI,EAAGU,MAAO,cAAegC,KAAM,cAAe0M,QAAS,kBAC3DpP,GAAI,EAAGU,MAAO,UAAWgC,KAAM,wBAAyB0M,QAAS,+BACjEpP,GAAI,EAAGU,MAAO,cAAegC,KAAM,kBAAmB0M,QAAS,kBAC/DpP,GAAI,EAAGU,MAAO,oBAAqBgC,KAAM,oBAAqB0M,QAAS,2BACvEpP,GAAI,EAAGU,MAAO,SAAUgC,KAAM,oBAAqB0M,QAAS,4BAEzDpP,GAAI,EACJU,MAAO,+BACPgC,KAAM,gCACN0M,QAAS,sDAGTpP,GAAI,GACJU,MAAO,+BACPgC,KAAM,gCACN0M,QAAS,gDAEZpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,qBAAsB0M,QAAS,4BAC9DpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,iBAAkB0M,QAAS,yBAC1DpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,iBAAkB0M,QAAS,uBAC1DpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,kBAAmB0M,QAAS,0BAC3DpP,GAAI,GAAIU,MAAO,kBAAmBgC,KAAM,kBAAmB0M,QAAS,2BACpEpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,iBAAkB0M,QAAS,0BAC1DpP,GAAI,GAAIU,MAAO,SAAUgC,KAAM,iBAAkB0M,QAAS,2BAEvDpP,GAAI,GACJU,MAAO,+BACPgC,KAAM,+BACN0M,QAAS,gCAGTpP,GAAI,GACJU,MAAO,+BACPgC,KAAM,+BACN0M,QAAS,6CAEZpP,GAAI,GAAIU,MAAO,0BAA2BgC,KAAM,0BAA2B0M,QAAS,WACpFpP,GAAI,GAAIU,MAAO,qBAAsBgC,KAAM,qBAAsB0M,QAAS,kBAC1EpP,GAAI,GAAIU,MAAO,2BAA4BgC,KAAM,2BAA4B0M,QAAS,kBAEnFpP,GAAI,GACJU,MAAO,+BACPgC,KAAM,+BACN0M,QAAS,kBAGTpP,GAAI,GACJU,MAAO,6BACPgC,KAAM,6BACN0M,QAAS,kBAEZpP,GAAI,GAAIU,MAAO,gBAAiBgC,KAAM,gBAAiB0M,QAAS,kBAhjBzE,GAAI8kC,IAAO,cACP9xC,GAAa4sC,EAAekF,GAChC,QACIyQ,kBAAmBviD,GAAWshC,IAC9B1+B,kBAAmB5C,GAAWwtC,QAC9BgV,iBAAkBxiD,GAAWqtC,KAC7Bn4B,iBAAkBlV,GAAWqtC,KAC7Bl+B,iBAAkBnP,GAAWiyC,IAC7B3sB,iBAAkBA,EAClBo8B,wBAAyBA,EACzBe,mBAAoB7V,EAAekF,GAAO,YAAYzE,KACtDqV,qBAAsB9V,EAAekF,GAAO,cAAcxQ,IAC1DqhB,6BAA8B/V,EAAekF,GAAO,sBAAsBxQ,IAE1Ev/B,iCAAkCA,EAClCstB,yBAA0BH,EAC1BlW,uBAAwBA,EACxBM,0BAA2BA,EAC3BgB,+BAAgCA,EAChCzO,uBAAwBA,EACxBI,0BAA2BA,EAC3BsN,4BAA6BA,EAC7BrN,4BAA6BA,EAC7BikB,+BAAgCA,EAChC7b,aAAcA,EACdktC,0BAA2BA,EAC3B9tC,WAAYA,EACZE,yBAA0BA,EAC1BG,4BAA6BA,EAC7BS,4BAA6BA,EAC7Bob,8BAA+BA,EAC/B6C,yBAA0BA,EAC1BG,4BAA6BA,EAC7BC,8BAA+BA,EAC/B7D,4BAA6ByyB,EAC7B33B,0BAA2BA,EAC3BzjB,4BAA6BA,EAC7BqC,yBAA0BF,EAC1BM,8BAA+BA,EAC/Bgf,wBAAyBA,EACzBF,oCAAqCA,EACrCI,6BAA8BA,EAC9BV,2BAA4BA,EAC5BzR,wBAAyBA,EAEzB8W,gBAAiBA,EACjBG,4BAA6BA,EAC7BC,6BAA8BA,EAC9BC,iBAAkBA,EAClBH,mBAAoBA,EAEpBK,iBAAkBA,EAClBuC,gBAAiBA,EACjBtC,0BAA2BA,EAC3Bm0B,8BAA+BA,EAC/Bl0C,eAAgBA,EAChBi0C,kBAAmBA,EACnB37C,aAAc0oC,GACdwU,mBAAoBN,GACpB50B,gBAAiBm0B,GACjBj0B,oBAAqBq0B,GACrB17B,aAAcD,GACd9V,0BAA2B6xC,GAE3B9zB,0BAA2BA,EAC3BztB,kBAAmBA,EACnBU,qBAAsBA,EAEtBsP,oBAAqBA,EACrBW,sBAAuBA,EACvBD,iCAAkCA,EAClCJ,kCAAmCA,EAEnC2N,gBAAiBA,EACjBqiC,eAAgBA,EAChBv+C,eAAgBA,EAGhBkd,gBAAiBA,GACjBD,mBAAoBA,GACpBgH,gCAAgCA,GAChCD,mCAAmCA,IAE3ClnB,EAAkB3C,SAAW,kBAzF7B1B,QACKC,OAAO,kBACPmyC,QAAQ,oBAAqB/tC,MA+jBtC,WACI,YAOA,SAASguC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,mBACHxE,WAAY,uBACZE,aAAc,KACdL,YAAa,4CAChB0e,SACCm+B,IAAA,YAAI,SAAUl8C,GACb,MAAOA,GAAU2H,cAGhBigB,IAAK,+BAEX5jB,MAAM,oBACNxE,WAAY,4BACZE,aAAc,KACdL,YAAa,kDACb0e,WACA6J,IAAK,qCAEF5jB,MAAM,wBACHxE,WAAY,2BACZE,aAAc,KACdL,YAAa,iDAChBuoB,IAAK,gDAEL5jB,MAAM,4BACHxE,WAAY,+BACZE,aAAc,KACdL,YAAa,iDAChBuoB,IAAK,+BAEL5jB,MAAM,2BACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,iDACbuoB,IAAK,wBAER5jB,MAAM,wCACHxE,WAAY,gCACZE,aAAc,KACdL,YAAa,0EACbuoB,IAAK,qCAER5jB,MAAM,sCACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,uEACbuoB,IAAK,aAER5jB,MAAM,4BACHxE,WAAY,2BACZE,aAAc,KACdL,YAAa,gEAChBuoB,IAAK,YACL7J,SACCjd,kBAAqB,WACpB,MAAO,UAITkD,MAAM,mCACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,iEACbuoB,IAAK,qBAER5jB,MAAM,+BACHxE,WAAY,kCACZE,aAAc,KACdL,YAAa,yDAChB0e,SACCjd,kBAAqB,WACpB,MAAO,OAERoE,aAAgB,WACf,MAAO,QAGN0iB,IAAK,iBAER5jB,MAAM,2BACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,sDACbuoB,IAAK,kBAER5jB,MAAM,4BACHxE,WAAY,+BACZE,aAAc,KACdL,YAAa,wDACbuoB,IAAK,cAER5jB,MAAM,6BACHxE,WAAY,gCACZE,aAAc,KACdL,YAAa,qDACbuoB,IAAK,eAER5jB,MAAM,4BACHxE,WAAY,+BACZE,aAAc,KACdL,YAAa,mDACbuoB,IAAK,cAER5jB,MAAM,yBACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,6CACbuoB,IAAK,gBAER5jB,MAAM,6BACHxE,WAAY,gCACZE,aAAc,KACdL,YAAa,gEACbuoB,IAAK,eAER5jB,MAAM,iCACHxE,WAAY,oCACZE,aAAc,KACdL,YAAa,6DACbuoB,IAAK,mBAER5jB,MAAM,4BACHxE,WAAY,+BACZE,aAAc,KACdL,YAAa,mDACbuoB,IAAK,cAER5jB,MAAM,2BACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,sDACbuoB,IAAK,aAER5jB,MAAM,4BACHxE,WAAY,+BACZE,aAAc,KACdL,YAAa,wDACbuoB,IAAK,cAER5jB,MAAM,2BACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,iDACbuoB,IAAK,aAER5jB,MAAM,4BACHxE,WAAY,8BACZE,aAAc,KACdL,YAAa,mDACbuoB,IAAK,cAER5jB,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdL,YAAa,6DACbuoB,IAAK,mBAGb6pB,EAAmBC,KAAK,yBAA0B,oBA3EtDH,EAAY3wC,SAAW,iBAAkB,sBA1FzC1B,QACKC,OAAO,OACPwyC,OAAOJ,MA2KhB,WACC,YAOG,SAASkV,GAA0B1kC,EAAQhhB,EAAMuB,EAAc6+B,EAAUx9B,EAAMJ,EAAmBoc,EAAkB9S,EAAiBvJ,EAASD,GAgC1I,QAASnC,KACdH,EAAKqgC,MAAM,sCACXj9B,IACA8sB,IAGK,QAAS9sB,KAIL,QAAS+vB,GAAgBj2B,GAkCjC,MAjCAoC,GAAGuD,WAAa3F,EAAOA,KAEXwwB,IACZf,IAEgBrtB,EAAGuD,WAAWhE,UAAU4L,WACvCC,IAGWpL,EAAGmW,mBAAqBvY,EAAOA,EAAKuY,sBAChDC,IACAC,IAEYgwC,EAAezoD,GAEf0oD,EAAe1oD,GAEfgM,IAEA28C,EAAiB3oD,GAEjBoC,EAAGuD,WAAWuV,SAAW9Y,EAAGuD,WAAWuV,UAAY,EAC/D9Y,EAAGuD,WAAWwV,UAAY/Y,EAAGuD,WAAWwV,WAAa,EACrDb,IAEYlY,EAAG2xB,uBAAyB3xB,EAAGuD,WAAWmuB,iCACtD1xB,EAAG6xB,oBAAsB7xB,EAAGuD,WAAWquB,8BACvC5xB,EAAGyxB,qBAAuBzxB,EAAGuD,WAAW2iB,+BACxC/F,IAEYngB,EAAG2N,UAAY/P,EAAOA,EAAK0U,uBAE3BtS,EAAGwmD,mBAAoB,EAC5BxmD,EAAGuD,WAGF,QAASwwB,GAAckO,IAvCvB,MAAO/+B,GAAkBiD,kBAAkBnG,EAAG6E,cAAcjD,KAAKiyB,EAAiBE,GA4CtF,QAAS3F,KACdpuB,EAAGquB,0BAA4B,EAC/BruB,EAAGsuB,qBAAuB,EAC1BtuB,EAAGuuB,8BAAgC,CACjBvuB,GAAGuD,WAAWhE,UAAU4L,SAO1C,OANAnL,GAAGwuB,aAAexuB,EAAGuD,WAAWirB,aAChCxuB,EAAGwuB,aAAaltB,QAAQ,SAAUuhB,GACjC7iB,EAAGquB,2BAA6BxL,EAAYgL,YAC5C7tB,EAAGsuB,sBAAwBzL,EAAY4L,iBAExCg4B,IACOzmD,EAAGwuB,aAGL,QAASnB,KA2BL,QAAS7nB,GAAgB5H,GAoBjC,MAnBAQ,SAAQC,IAAI,4BAA6BT,GACzCoC,EAAG8iB,UAAYllB,EAAOA,KAEtBoC,EAAGstB,cAAgBzuB,QAAQ6E,KAAK1D,EAAG8iB,WACnC9iB,EAAGutB,uBAAyB,EAC5BvtB,EAAGwtB,kBAAoB,EACvBxtB,EAAGytB,sBAAwB,EAC3BztB,EAAG0tB,yBAA2B,EAC9B1tB,EAAG8iB,UAAUxhB,QAAQ,SAAUsE,GAC9BA,EAAS+nB,mBAAqB/nB,EAAS+nB,mBAAqB/nB,EAAS+nB,mBAAqB,EAC1F/nB,EAASgoB,sBAAwBhoB,EAASgoB,sBAAwBhoB,EAASgoB,sBAAwB,EAEpF5tB,EAAGytB,uBAAyB7nB,EAAS+nB,mBACpD3tB,EAAG0tB,0BAA4B9nB,EAASgoB,sBACxC5tB,EAAGutB,wBAA0B3nB,EAASioB,YACtC7tB,EAAGwtB,mBAAqB5nB,EAASioB,YAAcjoB,EAASkoB,aAAe,IACvE9tB,EAAG+tB,4BAA8BnoB,EAASioB,YAAejoB,EAASioB,YAAcjoB,EAASkoB,aAAe,MAEzG24B,IACOzmD,EAAG8iB,UA9CX,IAAK9iB,EAAGuD,WAAWhE,UAAU4L,UAE5B,MADAs7C,KACOjhD,GAAiBxF,EAAGuD,WAAWqC,UAG9B,IAAI2N,IACZmF,gBAAiB1Y,EAAGuD,WAAWhE,UAAU4L,UAAUqI,WACnDyR,SAAU,EAAG,EAAG,KAEbtgB,GACHohB,KAAM,EACNvI,KAAM,IAEP,OAAOta,GAAkBuV,iBAAiBlF,EAAM5O,GAAQ/C,KAAK,SAAUhE,GACtE,GAAIklB,KASJ,OARIllB,IAAQA,EAAK8H,SAChB9H,EAAK8H,QAAQpE,QAAQ,SAAUO,GAC1ByB,EAAK+M,QAAQyS,EAAWjhB,EAAM+D,SAASzE,GAAI,MAAQ,GACtD2hB,EAAU1hB,KAAKS,EAAM+D,YAEpBtC,EAAK+M,QAAQyS,EAAW9iB,EAAGuD,WAAWqC,SAASzE,GAAI,MAAQ,GAC9D2hB,EAAU1hB,KAAKpB,EAAGuD,WAAWqC,UAC9B5F,EAAG0mD,yBAA0B,EACtBlhD,EAAgBsd,KA2BnB,QAAS1X,KACdpL,EAAGT,UAAYS,EAAGuD,WAAWhE,UAC7BS,EAAGqL,wBAA0BrL,EAAGuD,WAAW+H,cAC3CtL,EAAGuD,WAAWgI,qBAAqBjK,QAAQ,SAAUkK,GACpDxL,EAAGqL,wBAAwB/J,QAAQ,SAAUmK,GACxCD,EAAoBE,aAAavK,KAAOsK,EAAuBtK,KAClEsK,EAAuBE,MAAQH,EAAoBG,MACnDF,EAAuBG,WAAaJ,EAAoBrK,QAI3DnB,EAAG6L,iBACH7L,EAAGqL,wBAAwB/J,QAAQ,SAAUmK,GAC5C,GAAIK,IACHJ,aAAcD,EACdlI,YAAapC,GAAInB,EAAG6E,cACpB1D,GAAIsK,EAAuBG,WAC3BD,MAAOF,EAAuBE,MAE/B3L,GAAG6L,cAAczK,KAAK0K,KAEvB26C,IACAroD,QAAQC,IAAI2B,EAAG6L,eAGV,QAASuK,KACd,GAAIzR,IAAUE,aAAc7E,EAAG6E,aAEtB2H,GAAgB4J,uBAAuBzR,GAAQ/C,KACvD,SAAUhE,GACToC,EAAG2mD,iBAAmB/oD,EAAOA;;AAE7BoC,EAAGmW,mBAAmB7U,QAAQ,SAAUmV,GACvC,GAAIe,IAAW,CACfxX,GAAG2mD,iBAAiBrlD,QAAQ,SAAUmW,GACjChB,EAAkBF,YAAckB,EAAStW,KAAOsV,EAAkBF,WAAWpV,KAChFsV,EAAkBiB,YAAcD,EAASA,SACzCD,GAAW,KAGRA,IAAUf,EAAkBiB,YAAc,MAEhD1X,EAAG4mD,+BAAgC,EACnCH,MAIG,QAASpwC,KAmBd,MAlBArW,GAAGsW,YAActW,EAAGuD,WAAW+S,YAC/BtW,EAAGsW,YAAYhV,QAAQ,SAAUiV,GAChC,GAAIC,IAAQ,CAMZ,IALAxW,EAAGmW,mBAAmB7U,QAAQ,SAAUmV,GACnCA,EAAkBF,YAAcE,EAAkBF,WAAWpV,KAAOoV,EAAWpV,KAClFqV,GAAQ,MAGLA,EAAO,CACX,GAAIE,IACHnT,WAAYvD,EAAGuD,WACfgT,WAAYA,EACZI,QAAS,GAEV3W,GAAGmW,mBAAmB/U,KAAKsV,MAG7B+vC,IACOzmD,EAAGmW,mBAGL,QAASkwC,GAAezoD,GAC7BoC,EAAGmb,SAAWvd,EAAOA,EAAKwd,sBAC1Bpb,EAAGqb,SAAW,EACdrb,EAAGsb,qBAAuB,EAC1Btb,EAAGub,wBAA0B,EAC7Bvb,EAAGmb,SAAS7Z,QAAQ,SAAUka,GAC7Bxb,EAAGqb,UAAYG,EAAQC,MACvBzb,EAAGsb,sBAAwBE,EAAQE,kBACnC1b,EAAGub,yBAA2BC,EAAQG,uBAEvC3b,EAAG4N,mBAAqB5N,EAAGuD,WAAWmM,YACtCm3C,IACA7mD,EAAGmb,SAAS7Z,QAAQ,SAAUka,GAC7BA,EAAQrb,IAAMqb,EAAQhO,iBAAiBrM,IAExC,IAAIya,GAAe3Y,EAAQ,WAAWjD,EAAGmb,SAAU,OAAO,EAM1D,OALAnb,GAAGmb,YACHnb,EAAGmb,SAAWtc,QAAQ6E,KAAKkY,GAC3B5b,EAAGmb,SAAWlY,EAAQ,WAAWjD,EAAGmb,SAAU,OAAO,GAErDsrC,IACOzmD,EAAGmb,SAGL,QAAS0rC,KACd,GAAIliD,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgBqP,mBAAmBlX,GAAQ/C,KACjD,SAAUhE,GA8BT,MA7BAoC,GAAG8mD,iBAAmBlpD,EAAOA,KAC7BoC,EAAG4N,mBAAmBtM,QAAQ,SAAUuM,GAEvC,IAAK,GADDC,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAG8mD,iBAAiBr+C,OAAQD,IAC3CxI,EAAG8mD,iBAAiBt+C,GAAGgF,iBAAiBrM,KAAO0M,EAAeL,iBAAiBrM,KAClF2M,GAAW,EAETA,IACH9N,EAAG8mD,iBAAiB1lD,MACnB2M,YAAa,EACb+N,eAAgBjO,EAAeI,gBAAkBJ,EAAeM,qBAChEX,iBAAkBK,EAAeL,iBACjCuO,gBAAiB,EACjBC,aAAc,MAIjBhc,EAAGic,kBAAoB,EACvBjc,EAAGkc,gBAAkB,EACrBlc,EAAGmc,mBAAqB,EACxBnc,EAAG8mD,iBAAiBxlD,QAAQ,SAAUmW,GAEnBzX,EAAGic,mBAAqBxE,EAASqE,eACnD9b,EAAGkc,iBAAmBzE,EAASuE,aAC/Bhc,EAAGmc,oBAAsB1E,EAASsE,kBAGnC0qC,IACAzmD,EAAG+mD,2BAA4B,EACxB/mD,EAAG8mD,mBAIP,QAASR,GAAe1oD,GAC7BoC,EAAG4M,SAAWhP,EAAOA,EAAKmP,sBAC1B/M,EAAGgN,0BAA4B,EAC/BhN,EAAGiN,+BAAiC,EACpCjN,EAAG4M,SAAStL,QAAQ,SAAU4L,GAC7BlN,EAAGgN,2BAA6BE,EAAQC,uBACxCnN,EAAGiN,gCAAkCC,EAAQE,8BAE9CpN,EAAGqN,eAAiBrN,EAAGgN,0BAA4BhN,EAAGiN,+BAE7CjN,EAAG4N,mBAAqB5N,EAAGuD,WAAWmM,YAC/Cs3C,IAEShnD,EAAG4M,SAAStL,QAAQ,SAAU4L,GACtCA,EAAQ/M,IAAM+M,EAAQM,iBAAiBrM,IAEb8B,GAAQ,WAAWjD,EAAG4M,SAAU,OAAO,EAIlE,OAHA5M,GAAG4M,SAAW3J,EAAQ,WAAWjD,EAAG4M,SAAU,OAAO,GAErD65C,IACOzmD,EAAG4M,SAGL,QAASo6C,KACdhnD,EAAGuO,aACHvO,EAAGwO,kBACHxO,EAAGyO,aACH,IAAI9J,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgBkB,mBAAmB/I,GAAQ/C,KACjD,SAAUhE,GACToC,EAAGinD,iBAAmBrpD,EAAOA,KAC7BoC,EAAG4N,mBAAmBtM,QAAQ,SAAUuM,GAEvC,IAAK,GADDC,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAGinD,iBAAiBx+C,OAAQD,IAC3CxI,EAAGinD,iBAAiBz+C,GAAGgF,iBAAiBrM,KAAO0M,EAAeL,iBAAiBrM,KAClF2M,GAAW,EAETA,IACH9N,EAAGinD,iBAAiB7lD,MACnB2M,YAAa,EACbC,yBAA0BH,EAAeI,gBACzCC,8BAA+BL,EAAeM,qBAC9CX,iBAAkBK,EAAeL,iBACjCY,4BAA6B,EAC7BC,uBAAwB,EACxBC,iBAAkBT,EAAeS,oBAIpC,KAAK,GAAI9F,GAAI,EAAGA,EAAIxI,EAAGinD,iBAAiBx+C,OAAQD,IAAK,CACpD,GAAI6F,GAAyBrO,EAAGinD,iBAAiBz+C,GAAG6F,uBAAyBrO,EAAGinD,iBAAiBz+C,GAAG6F,uBAAyB,EACzHL,EAA2BhO,EAAGinD,iBAAiBz+C,GAAGwF,yBAA2BhO,EAAGinD,iBAAiBz+C,GAAGwF,yBAA2B,EAC/HI,EAA8BpO,EAAGinD,iBAAiBz+C,GAAG4F,4BAA8BpO,EAAGinD,iBAAiBz+C,GAAG4F,4BAA8B,EACxIF,EAAgClO,EAAGinD,iBAAiBz+C,GAAG0F,8BAAgClO,EAAGinD,iBAAiBz+C,GAAG0F,8BAAgC,CAE5HG,KAA2BL,EAChDhO,EAAGuO,UAAU/F,GAAK,UAEV6F,EAAyBL,EACjChO,EAAGuO,UAAU/F,GAAK,WAEewF,EAAzBK,IACRrO,EAAGuO,UAAU/F,GAAK,UAGG4F,IAAgCF,EACrDlO,EAAGwO,eAAehG,GAAK,UAEf4F,EAA8BF,EACtClO,EAAGwO,eAAehG,GAAK,UAEe0F,EAA9BE,IACRpO,EAAGwO,eAAehG,GAAK,SAGpBxI,EAAGinD,iBAAiBz+C,GAAG8F,iBAAmBtO,EAAGinD,iBAAiBz+C,GAAGuF,YACpE/N,EAAGyO,WAAWjG,GAAK,QAEnBxI,EAAGyO,WAAWjG,GAAK,UAoBrB,MAjBAxI,GAAG0O,4BAA8B,EACjC1O,EAAG2O,0BAA4B,EAC/B3O,EAAG4O,iCAAmC,EACtC5O,EAAG6O,+BAAiC,EACpC7O,EAAG8O,oBAAsB,EACzB9O,EAAG+O,eAAiB,EACpB/O,EAAGinD,iBAAiB3lD,QAAQ,SAAU0N,GACrChP,EAAG0O,6BAA+BM,EAAShB,yBAC3ChO,EAAG2O,2BAA6BK,EAASX,uBACzCrO,EAAG4O,kCAAoCI,EAASd,8BAChDlO,EAAG6O,gCAAkCG,EAASZ,4BAC9CpO,EAAG8O,qBAAuBE,EAASV,iBACnCtO,EAAG+O,gBAAkBC,EAASjB,cAG/B04C,IACAzmD,EAAGknD,2BAA4B,EACxBlnD,EAAGinD,mBAIP,QAASr9C,KACd,MAAO1G,GAAkB0G,4BAA4B5J,EAAG6E,cAAcjD,KACrE,SAAUhE,GA8BT,MA7BAoC,GAAG6J,WAAajM,EAAOA,KACvBoC,EAAG8J,wBAA0B,EAC7B9J,EAAG+J,sBAAwB,EAC3B/J,EAAGgK,6BAA+B,EAClChK,EAAGiK,sBAAwB,EAC3BjK,EAAGkK,6BAA+B,EAClClK,EAAGmK,gBAAkB,EACrBnK,EAAG6J,WAAWvI,QAAQ,SAAU8I,GAEbA,EAASC,mBAAqBD,EAASC,mBAAqBD,EAASC,mBAAqB,EAC5GD,EAASE,mBAAqBF,EAASE,mBAAqBF,EAASE,mBAAqB,EAC1FF,EAASG,uCAAyCH,EAASG,uCAA2F,IAAlDH,EAASG,uCAA+C,EAC5JH,EAASI,uCAAyCJ,EAASI,uCAA2F,IAAlDJ,EAASI,uCAA+C,EAC5JJ,EAASK,aAAeL,EAASK,aAAeL,EAASK,aAAe,EAEtDzK,EAAG8J,yBAA2BM,EAASM,qBACzD1K,EAAG+J,uBAAyBK,EAASE,mBAAqBF,EAASE,mBAAqB,EACxFtK,EAAGiK,uBAAyBG,EAASC,mBAAqBD,EAASC,mBAAqB,EACxFrK,EAAGmK,kBAAoBC,EAASK,aAAgBL,EAASK,aAAe,IAAO,GAAKL,EAASM,qBAE3EN,EAASG,uCAAyCI,KAAKC,MAAMR,EAASG,wCACxFH,EAASI,uCAAyCG,KAAKC,MAAMR,EAASI,0CAEvExK,EAAGmK,gBAAmBnK,EAAGmK,gBAAkBnK,EAAG8J,wBAA2B,IACzE9J,EAAGgK,6BAA+BhK,EAAG+J,sBAAwB/J,EAAG8J,wBAA0B,IAC1F9J,EAAGkK,6BAA+BlK,EAAGiK,sBAAwBjK,EAAG8J,wBAA0B,IAC1F1L,QAAQC,IAAI,mBAAoB2B,EAAG6J,YACnC48C,IACAzmD,EAAGmnD,oCAAqC,EACjCnnD,EAAG6J,aAKb,QAAS08C,GAAiB3oD,GAazB,MAZAoC,GAAGm0B,WAAav2B,EAAOA,EAAKw2B,wBAC5Bp0B,EAAGq0B,eAAiB,EACpBr0B,EAAGs0B,iBAAmB,EACtBt0B,EAAGu0B,kBAAoB,EACvBv0B,EAAGm0B,WAAW7yB,QAAQ,SAAU6tB,GAC/BnvB,EAAGq0B,gBAAkBlF,EAAUqF,YAC/Bx0B,EAAGs0B,kBAAoBnF,EAAUqF,YAAcrF,EAAUsF,cAAcC,gBAAkB,IACzF10B,EAAGu0B,mBAAqBpF,EAAUwF,iBAEnCC,IACAwyB,IACAX,IACOzmD,EAAGm0B,WAGL,QAASS,KACd,GAAIyyB,GAA8BrnD,EAAGuD,WAAWhE,UAAUs1B,+BAAiC70B,EAAGuD,WAAWhE,UAAUs1B,+BAAiC,GACpJ70B,GAAG6tB,aAAe7tB,EAAGuD,WAAW+jD,SAAWtnD,EAAGuD,WAAWgkD,yBAA2BF,EAA8B,KACvE,IAAvCrnD,EAAGuD,WAAW6rB,cAAc3mB,SAC/BzI,EAAG+0B,UAAW,GACf/0B,EAAGovB,cAAgBpvB,EAAGuD,WAAW6rB,cACjCq3B,IAGK,QAASW,KACd,GAAIziD,IAAUE,aAAc7E,EAAG6E,aAC/B,OAAO2H,GAAgB6oB,qBAAqB1wB,GAAQ/C,KACnD,SAAUhE,GA6ET,MA5EAoC,GAAGwnD,mBAAqB5pD,EAAOA,KAC/BoC,EAAGs1B,6BAA+B,EAClCt1B,EAAGovB,cAAc9tB,QAAQ,SAAU6tB,GAElC,IAAK,GADDrhB,IAAW,EACNtF,EAAI,EAAGA,EAAIxI,EAAGwnD,mBAAmB/+C,OAAQD,IAC7CxI,EAAGwnD,mBAAmBh/C,GAAGisB,cAActzB,KAAOguB,EAAUsF,cAActzB,KACzE2M,GAAW,EAETA,KACH1P,QAAQC,IAAI,kBAAmB8wB,EAAUqG,OACzCx1B,EAAGwnD,mBAAmBpmD,MACrBqzB,cAAetF,EAAUsF,cACzBc,UAAWpG,EAAUqG,MACrBC,aAActG,EACd5vB,WACC4B,GAAInB,EAAGuD,WAAWqC,SAASsc,aAE5BwT,mBAAoB,KACpBC,wBAAyB,OAI5B31B,EAAGwnD,mBAAmBlmD,QAAQ,SAAUmW,GACvCA,EAASme,YAAc,WACtB,GAAI31B,KAAK01B,0BAA4B11B,KAAKs1B,UACzC,MAAO,UACR,QAAQt1B,KAAKs1B,WACZ,IAAK,UAEJ,IAAKt1B,KAAKy1B,mBACT,KACD,IAAIz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBAEvC,MADAje,GAASoe,eAAiBlrB,KAAKyqB,IAAI3d,EAASie,mBAAqBje,EAASke,yBACnE,UAER,MACD,KAAK,UACJ,IAAK11B,KAAKy1B,oBAAsBz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBAEnE,MADAje,GAASoe,eAAiBlrB,KAAKyqB,IAAI3d,EAASie,mBAAqBje,EAASke,yBACnE,OAER,MACD,KAAK,QACJ,IAAK11B,KAAKy1B,oBAAsBz1B,KAAK01B,wBAA0B11B,KAAKy1B,mBAEnE,MADAje,GAASoe,eAAiBlrB,KAAKyqB,IAAI3d,EAASie,mBAAqBje,EAASke,yBACnE,OAER,IAAI11B,KAAK01B,wBAA0B11B,KAAKy1B,mBAEvC,MADAje,GAASoe,eAAiBlrB,KAAKyqB,IAAI3d,EAASie,mBAAqBje,EAASke,yBACnE,UAER,MACD,KAAK,OACJ,GAAI31B,EAAG6tB,YAAc7tB,EAAGs1B,6BAEvB,MADA7d,GAASoe,eAAiBlrB,KAAKyqB,IAAI3d,EAASie,mBAAqBje,EAASke,yBACnE,OAER,MACD,SACC,MAAO,MAET,MAAO,OAER31B,EAAGs1B,8BAAgC7d,EAASke,0BAE7C31B,EAAG81B,gBAAkB91B,EAAG6tB,YAAc7tB,EAAGs1B,6BAA+Bt1B,EAAG6tB,YAAc7tB,EAAGs1B,6BAA+B,EAC3Ht1B,EAAGwnD,mBAAmBlmD,QAAQ,SAAUmW,GAEM,SAAvBA,EAAS8d,YACT9d,EAASie,mBAAqB11B,EAAG6tB,aAAe7tB,EAAGs1B,6BAA+B7d,EAASke,yBAC3Fle,EAASoe,eAAiB71B,EAAG81B,mBAIpD2wB,IACAzmD,EAAGynD,6BAA8B,EAC1BznD,EAAGwnD,qBAIP,QAAStvC,KAOL,QAAS1S,GAAgB5H,GACjCwa,IACApY,EAAG2T,YAAc3T,EAAG2T,YAAY7R,OAAOlE,EAAOA,EAAK8H,YAElC,IAAb0S,GAAkBpY,EAAGuD,WAAWhE,UAAUgZ,2BAE9CkuC,IACAjuC,IACAxY,EAAG0nD,gCAAiC,GAG5B,QAASC,GAAsB/pD,GACvCA,EAAK8H,QAAQpE,QAAQ,SAAU+W,GAC1B/U,EAAK+M,QAAQrQ,EAAG2T,YAAa0E,EAAElX,GAAI,MAAQ,GAC9CnB,EAAG2T,YAAYvS,KAAKiX,KAEtBG,IACAxY,EAAG0nD,gCAAiC,EAG5B,QAASlvC,KACjBpa,QAAQC,IAAI,OAAQ2B,EAAG2T,aACvB3T,EAAG2Y,cACH3Y,EAAG2T,YAAYrS,QAAQ,SAAUsX,GAChCxa,QAAQC,IAAIua,EAAEzI,OAAQyI,EAAEE,SAAUF,EAAEE,UACvBD,SAATD,EAAEzX,IACL6X,EAAcJ,KAIR,QAASI,GAAcO,GAC/B,GAAIA,EAAMT,UAAYS,EAAMR,UAAW,CACtC,GAAIS,IACHC,IAAKzZ,EAAGuD,WAAWuV,SACnBY,IAAK1Z,EAAGuD,WAAWwV,WAEhBY,GACHF,IAAKF,EAAMT,SACXY,IAAKH,EAAMR,WAERa,EAAMC,EAAYL,EAAIG,EAMX,OALf3Z,GAAG2Y,WAAWvX,MACbmC,WAAYgW,EACZU,SAAUL,EAAM,MAGKA,EAAM,KAIrB,QAASC,GAAYL,EAAIG,GACjC,GAAIO,GAAI,QACJC,EAAOC,EAAIT,EAAGF,IAAMD,EAAGC,KACvBY,EAAQD,EAAIT,EAAGD,IAAMF,EAAGE,KACxBY,EAAI3P,KAAK4P,IAAIJ,EAAO,GAAKxP,KAAK4P,IAAIJ,EAAO,GAC5CxP,KAAK6P,IAAIJ,EAAIZ,EAAGC,MAAQ9O,KAAK6P,IAAIJ,EAAIT,EAAGF,MACxC9O,KAAK4P,IAAIF,EAAQ,GAAK1P,KAAK4P,IAAIF,EAAQ,GACpCI,EAAI,EAAI9P,KAAK+P,MAAM/P,KAAKgQ,KAAKL,GAAI3P,KAAKgQ,KAAK,EAAIL,IAC/CM,EAAIV,EAAIO,CACZ,OAAOG,GAGC,QAASR,GAAIS,GACrB,MAAOA,GAAIlQ,KAAKmQ,GAAK,IArEtB,GAAI1C,GAAW,CACfpY,GAAG2T,eACHzQ,EAAkBuV,kBAAkBC,gBAAiB1Y,EAAGuD,WAAWhE,UAAU4L,YAAYvJ,KAAK4D,GAC1FxF,EAAGuD,WAAWhE,UAAUgZ,0BAC3BrV,EAAkBuV,kBAAkBC,gBAAiB1Y,EAAGuD,WAAWhE,UAAUgZ,2BAA2B3W,KAAK+lD,GAqEzG,QAASxnC,KA2BL,QAAS+R,KACLlyB,EAAGoyB,yBAA2B,CAC9B,KAAK,GAAI5pB,GAAI,EAAGA,EAAIxI,EAAGuD,WAAW4uB,qBAAqB1pB,OAAQD,IAC3D,IAAK,GAAI6pB,GAAI,EAAGA,EAAIryB,EAAG4lB,oBAAoBnd,OAAQ4pB,IAC3CryB,EAAGuD,WAAW4uB,qBAAqB3pB,GAAGgd,UAAUrkB,KAChDnB,EAAG4lB,oBAAoByM,GAAG7M,UAAUrkB,KACpCnB,EAAGoyB,2BACHpyB,EAAG4lB,oBAAoByM,GAAG9M,gBAAkBvlB,EAAGuD,WAAW4uB,qBAAqB3pB,GAAG+c,gBAClFvlB,EAAG4lB,oBAAoByM,GAAG1b,QAAU3W,EAAGuD,WAAW4uB,qBAAqB3pB,GAAGmO,SAlCnG,MAAqC,KAAjC3W,EAAGuD,WAAWK,YAAYzC,GACtBme,EAAiB0S,sBAAsBpwB,KAC7C,SAAUhE,GACToC,EAAGwlB,UAAY5nB,EAAOA,KACtBoC,EAAG4lB,sBACH,KAAK,GAAIpd,GAAI,EAAGA,EAAIxI,EAAGwlB,UAAU/c,OAAQD,IAAK,CAC7C,GAAIypB,IACHzM,UAAWxlB,EAAGwlB,UAAUhd,GACxB+c,gBAAiB,GACjB5O,QAAS,GACTpT,YACCpC,GAAInB,EAAG6E,cAGT7E,GAAG4lB,oBAAoBxkB,KAAK6wB,GAG7B,MADAC,KACOlyB,EAAG4lB,sBAG6B,IAAjC5lB,EAAGuD,WAAWK,YAAYzC,IAClCnB,EAAG4lB,uBACH5lB,EAAG4lB,oBAAsB5lB,EAAG4lB,oBAAoB9jB,OAAO9B,EAAGuD,WAAW4uB,sBAC9DnyB,EAAG4lB,qBAHN,OAqBN,QAAS5hB,GAAW3D,GACnB,MAAO2C,GAAO,0BAA4B3C,EAAKmB,SAAW,WAGrD,QAASovB,KAGL,QAASg3B,GAAiBhqD,GAGlC,MAFAoC,GAAGqxB,YAAczzB,EAAOA,KACxBoC,EAAG6nD,qCAAsC,EAClC7nD,EAAG0C,YALX,MAAOQ,GAAkB0hD,kBAAkB5kD,EAAG6E,cAAcjD,KAAKgmD,GAW5D,QAASE,KACLhnB,EAAS;;;AAIL9gC,EAAG+F,QAAU/F,EAAGwmD,mBAAqBxmD,EAAG0mD,yBAA2B1mD,EAAGmnD,oCAClEnnD,EAAG0nD,gCAAkC1nD,EAAG4mD,+BAAiC5mD,EAAG+mD,2BAC5E/mD,EAAGknD,2BAA6BlnD,EAAGynD,6BAA+BznD,EAAG6nD,oCACpE7nD,EAAG+F,QAGJ+hD,IAFAxyC,OAAOW,SAGZ,MAGP,QAAS7L,KACL,GAAIo8B,GAAS,CAUb,OATIxmC,GAAGwmD,mBAAmBhgB,IACtBxmC,EAAG0mD,yBAAyBlgB,IAC5BxmC,EAAGmnD,oCAAoC3gB,IACvCxmC,EAAG0nD,gCAAgClhB,IACnCxmC,EAAG4mD,+BAA+BpgB,IAClCxmC,EAAG+mD,2BAA2BvgB,IAC9BxmC,EAAGknD,2BAA2B1gB,IAC9BxmC,EAAGynD,6BAA6BjhB,IAChCxmC,EAAG6nD,qCAAqCrhB,IACrC77B,KAAKE,MAAM27B,EAAS,EAAI,KA3qBzC,GAAIxmC,GAAKC,IACTD,GAAGuD,cACHvD,EAAG6E,aAAe5C,EAAa4C,YAC/B,IAAI4hD,GAAY,CAChBzmD,GAAG+nD,QAAU,GACb/nD,EAAGie,MAAQ,GAAIlV,MACT2M,SAAStV,MAAQ,cAAgBJ,EAAG6E,aAAe,IAAMoP,OAAOjU,EAAGie,OAAO/J,OAAO,aACvFlU,EAAGgE,WAAaA,EACVhE,EAAGoK,SAAWA,EACpBpK,EAAGwmD,mBAAoB,EACvBxmD,EAAG0mD,yBAA0B,EAC7B1mD,EAAGmnD,oCAAqC,EACxCnnD,EAAG0nD,gCAAiC,EACpC1nD,EAAG6nD,qCAAsC,EAEzC7nD,EAAG4mD,+BAAgC,EACnC5mD,EAAG+mD,2BAA4B,EAC/B/mD,EAAGknD,2BAA4B,EAC/BlnD,EAAGynD,6BAA8B,EAEjCznD,EAAG+F,QAAU/F,EAAGwmD,mBAAqBxmD,EAAG0mD,yBAA2B1mD,EAAGmnD,oCACrEnnD,EAAG0nD,gCAAkC1nD,EAAG4mD,+BAAiC5mD,EAAG+mD,2BAC5E/mD,EAAGknD,2BAA6BlnD,EAAGynD,6BAA+BznD,EAAG6nD,oCAKhEhnD,IAmpBAinD,IA1lBP1B,EAA0B7lD,SAAW,SAAU,OAAQ,eAAgB,WAAY,OAAQ,oBAAqB,mBAAoB,kBAAmB,UAAW,QA3FlK1B,QACEC,OAAO,kBACPK,WAAW,4BAA6BinD,MA2rB3C,WACI,YAOA,SAAS4B,GAAqBtmC,EAAQhhB,EAAMuB,EAAcqB,EAAMJ,EAAmBgI,EACrD8jB,EAAItlB,EAAYmyC,EAAI3gC,EAAWjU,GA4DzD,QAASpG,KACLH,EAAKqgC,MAAM,gCACXpQ,IACAs3B,IACAnkD,GAAc,GACdiH,IACA6lB,IACA5wB,EAAGkoD,UAAW,EACdloD,EAAGmoD,aAAezmC,EAAOU,SAASve,KAGtC,QAASukD,GAASD,GAEd,MADAnoD,GAAGmoD,aAAezmC,EAAOU,SAASve,KAC3B6d,EAAOU,SAASve,OAASskD,EAGpC,QAASrkD,GAAc8D,GAcnB,QAASisB,GAAgBj2B,GAUrB,MATAoC,GAAGuD,WAAa3F,EAAOA,KACvBoC,EAAGuS,eAAiB1T,QAAQ6E,KAAK9F,GACjCyqD,EAAmB3qC,QAAQ9f,GAC3B0qD,IACItoD,EAAGkoD,UAA6C,IAAjCloD,EAAGuD,WAAWK,YAAYzC,KACzCnB,EAAGkoD,UAAW,EACTloD,EAAGuD,WAAWhE,WAAcS,EAAGuD,WAAWhE,UAAU4L,WACrDo9C,KAEDvoD,EAAGuD,WAGd,QAASwwB,GAAckO,GACnBomB,EAAmB73B,OAAOyR,GA1B9B,MAAIr6B,GACIygD,EACOA,EAAmBl1C,SAC9Bk1C,EAAqBr5B,EAAG8lB,YACxB5xC,GAAkBiD,kBAAkBnG,EAAG6E,cAAcjD,KAAKiyB,EAAiBE,KAG3Es0B,EAAqBr5B,EAAG8lB,QACjB5xC,EAAkBiD,kBAAkBnG,EAAG6E,cAAcjD,KAAKiyB,EAAiBE,IAsB1F,QAAS7vB,KACLlE,EAAGuiC,6BAA+BviC,EAAGuiC,4BACrCz+B,IAGJ,QAASmrB,KA0BL,QAASzpB,KACLlC,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG2W,QAAU,KAC0B,YAAnC3W,EAAGuD,WAAWK,YAAYC,MAC1B6d,EAAOO,GAAG,sCAAuCpd,aAAc7E,EAAG6E,eAEtEf,IACA4F,EAAWmnB,WAAW,gBAhC1B,OAAQ7wB,EAAGuD,WAAWK,YAAYC,MAC9B,IAAK,UACDX,EAAkBgtB,gBAAgBlwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EACpE,MAEJ,KAAK,UACDlC,EAAKoB,MAAM,QAAS,yCACpB,MAEJ,KAAK,aACDxB,EAAkBmtB,4BAA4BrwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EAChF,MAEJ,KAAK,sBACDtC,EAAkBotB,6BAA6BtwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,EACjF,MAEJ,KAAK,0BACL,IAAK,0BACL,IAAK,mBACDtC,EAAkBqtB,iBAAiBvwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAAK4D,IAiBjF,QAASgrB,KACL,OAAQxwB,EAAGuD,WAAWK,YAAYC,MAC9B,IAAK,UACL,IAAK,UACL,IAAK,aACL,IAAK,sBACL,IAAK,0BACL,IAAK,0BACDX,EAAkButB,iBAAiBzwB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KAC5D,WACI0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG2W,QAAU,GACb7S,KAER,MAEJ,KAAK,mBACDZ,EAAkBwtB,0BAA0B1wB,EAAG6E,aAAc7E,EAAG2W,SAAS/U,KACrE,WACI0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG2W,QAAU,GACb7S,OAUpB,QAASiH,GAAkBnD,GAOvB,QAASpC,GAAgB5H,GACrBoC,EAAG8wB,kBAAoBlzB,EACvBoC,EAAGgL,eAAgB,EACnBnM,QAAQyC,QAAQ1D,EAAM,SAAUiE,IACT,YAAfA,EAAMgC,MAAqC,0BAAfhC,EAAMgC,QAClC7D,EAAGgL,eAAgB,KAG3Bw9C,EAAuB9qC,QAAQ1d,EAAGgL,eAGtC,QAASmlB,GAAc8R,GACnBumB,EAAuBh4B,OAAOyR,GAjBlC,MAAIr6B,IAAe4gD,EACRA,EAAuBr1C,SAClCq1C,EAAyBx5B,EAAG8lB,QAC5B5xC,EAAkB2hD,8BAA8B7kD,EAAG6E,cAAcjD,KAAK4D,EAAiB2qB,GAiBhFq4B,EAAuBr1C,SAGlC,QAAShK,KACLnJ,EAAG+F,SAAU,CACb,IAAIqnC,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,EAC9ChS,SAAQC,IAAI,oBAAsB+uC,EAASptC,EAAGgL,eAC9CtB,EAAWmnB,WAAW,QAAUuc,EAASptC,EAAGgL,eAUhD,QAASy9C,KACL,GAAIrb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EAC1BjpC,IAASukD,EAAUjgD,QAEvBiZ,EAAOO,GAAG,mBAAqBymC,EAAUvkD,EAAQ,IAAKU,aAAc7E,EAAG6E,eAG3E,QAAS8jD,KACL,GAAIvb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EAC9B,OAAQjpC,GAAQ,EAAKukD,EAAUjgD,OAGnC,QAASW,KACLpJ,EAAG+F,SAAU,CACb,IAAIqnC,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,EAC9ChS,SAAQC,IAAI,wBAA0B+uC,EAASptC,EAAGgL,eAClDtB,EAAWmnB,WAAW,YAAcuc,EAASptC,EAAGgL,eASpD,QAAS49C,KACL,GAAIxb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EACjB,IAATjpC,GAEJud,EAAOO,GAAG,mBAAqBymC,EAAUvkD,EAAQ,IAAKU,aAAc7E,EAAG6E,eAG3E,QAASgkD,KACL,GAAIzb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EAC9B,OAAOjpC,GAAQ,EAInB,QAAS8jD,KAKL,QAASa,KACL,IAAK,GAAItgD,GAAI,EAAGA,EAAIugD,EAAStgD,OAAQD,IAC7BwgD,EAAoBD,EAASvgD,IAC7Bu8B,EAAQ,GAAGkkB,UAAU3qC,OAAO,iBACpB0qC,EAAoBD,EAASvgD,KAAOwgD,EAAoBE,KAChEnkB,EAAQ,GAAGkkB,UAAU5qC,IAAI,eAWrC,QAAS2qC,GAAoB/d,GACzB,GAAIke,GAAOle,EAAGme,uBACd,OACID,GAAKhd,KAAO,KACZgd,EAAK7c,SAAWh3B,OAAO+zC,aAAe3zC,SAASw+B,gBAAgB8I,cAxBvE,GAAI+L,GAAWrzC,SAAS4zC,iBAAiB,eACrCvkB,EAAUrvB,SAAS4zC,iBAAiB,0BACpCJ,EAAcxzC,SAAS8G,cAAc,uBAezClH,QAAOi0C,iBAAiB,OAAQT,GAChCxzC,OAAOi0C,iBAAiB,SAAUT,GAWtC,QAASR,KACLlqD,QAAQC,IAAI,iBACZ2B,EAAG6uB,YACCK,QAAWlvB,EAAGuD,WAAWqO,eACzBhM,UAAY,EACZiR,QAAS7W,EAAGuD,WAAW4S,mBAAmB1N,QAAUzI,EAAGuD,WAAW+S,YAAY7N,OAC9EoD,cAAe7L,EAAGuD,WAAWgI,qBAAqB9C,QAAUzI,EAAGuD,WAAW+H,cAAc7C,OACxF+S,QAAWxb,EAAGuD,WAAW6X,oBAAsBpb,EAAGuD,WAAW6X,mBAAmB3S,OAChFmE,SAAY5M,EAAGuD,WAAWwJ,oBAAsB/M,EAAGuD,WAAWwJ,mBAAmBtE,OACjF0mB,UAAanvB,EAAGuD,WAAW6wB,sBAAwBp0B,EAAGuD,WAAW6wB,qBAAqB3rB,OACtF+gD,QAAWxpD,EAAGuD,WAAWuV,UAAY9Y,EAAGuD,WAAWwV,UACnDyM,UAAaxlB,EAAGuD,WAAWivB,oBAAsBxyB,EAAGuD,WAAWquB,+BACxD5xB,EAAGuD,WAAW2iB,gCAAkClmB,EAAGuD,WAAWmuB,kCAC9D1xB,EAAGuD,WAAW4uB,sBAAwBnyB,EAAGuD,WAAW4uB,qBAAqB1pB,OAChFgP,SAA+C,YAAnCzX,EAAGuD,WAAWK,YAAYC,MAAyD,YAAnC7D,EAAGuD,WAAWK,YAAYC,MAAyD,YAAnC7D,EAAGuD,WAAWK,YAAYC,MAE1I7D,EAAGuD,WAAWirB,aAAaltB,QAAQ,SAAUuhB,GACrCA,EAAYjd,UAAYid,EAAYjd,SAASuK,SAAWnQ,EAAGuD,WAAWqC,SAASuK,SAC/EnQ,EAAG6uB,WAAWjpB,UAAW,KAEjC5F,EAAG6uB,WAAWzkB,SAAWpK,EAAG6uB,WAAWrT,SAAWxb,EAAG6uB,WAAWjiB,SAChEsG,GAAa,GAGjB,QAASA,GAAatL,GAIlB,QAASpC,GAAgB5H,GAGrB,MAFAoC,GAAGT,UAAY3B,EAAK2B,UACpBkqD,EAAkB/rC,QAAQ1d,EAAGT,WACtBS,EAAGT,UAGd,QAASw0B,GAAckO,GAEnB,MADAwnB,GAAkBj5B,OAAOyR,GAClBA,EAVX,MADAwnB,GAAoBz6B,EAAG8lB,QAChBhxC,EAAc8D,GAAahG,KAAK4D,EAAiBuuB,GAe5D,QAAS21B,KACL,IAAK1pD,EAAGuD,aAAevD,EAAGuD,WAAWC,kBAAoBq4C,EACrD,OAAO,CACX,KAAK,GAAIrzC,GAAI,EAAGA,EAAIxI,EAAGuD,WAAWC,gBAAgBiF,OAAQD,IACtD,GAAIxI,EAAGuD,WAAWC,gBAAgBgF,GAAGvD,QAAQzD,WAAaq6C,EAAGr6C,SACzD,OAAO,CAEf,QAAO,EAGX,QAASmoD,KACL,MAAO3pD,GAAG2kD,eAId,QAASh0B,KACLztB,EAAkByhD,eAAe3kD,EAAG6E,cAAcjD,KAAK,SAAUhE,GAC7DQ,QAAQC,IAAI,oBAAqBT,GACjCoC,EAAG2kD,eAAiB/mD,IAK5B,QAASgzB,GAA6BhpB,GASlC,QAASggD,GAAiBhqD,GAGtB,MAFAoC,GAAGqxB,YAAczzB,EAAOA,KACxBgsD,EAAoBlsC,QAAQ9f,GACrBoC,EAAG0C,YAGd,QAASmnD,GAAe5nB,GACpB2nB,EAAoBp5B,OAAOyR,GAf/B,MAAIr6B,IAAegiD,EACRA,EAAoBz2C,QACpBnT,EAAG6E,cACV+kD,EAAsB56B,EAAG8lB,QAClB5xC,EAAkB0hD,kBAAkB5kD,EAAG6E,cAAcjD,KAAKgmD,EAAkBiC,IAFhF,OAkBX,QAAS3hC,KACLhN,EAAU3F,MACNgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAAc7E,EAAGuD,WAAWpC,QAOhD,QAAS2oD,KACL,GAAIxsC,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,iEACbG,WAAY,4BACZE,aAAc,KACdq0C,SAAU,SACVl2B,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAAc7E,EAAGuD,WAAWpC,GAC5BoC,WAAYvD,EAAGuD,eAM/B+Z,GAAcK,OAAO/b,KAAK,SAAUkD,GAChC1G,QAAQC,IAAI,aAAcyG,GACtBA,GACAhB,MAIZ,QAASoF,KACegS,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,yDACbG,WAAY,kCACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAAc7E,EAAGuD,WAAWpC,QAOhD,QAASonD,KACL,GAAqC,IAAjCvoD,EAAGuD,WAAWK,YAAYzC,IAA6C,IAAjCnB,EAAGuD,WAAWK,YAAYzC,GAApE,CAEA,GAAImc,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,0DACbG,WAAY,0BACZE,aAAc,KACdme,KAAM,KACNE,SACI7Y,aAAgB,WACZ,MAAO7E,GAAGuD,WAAWpC,IAEzBuX,gBAAmB,WACf,MAAO1Y,GAAGuD,WAAWqC,SAAS8S,iBAElCiJ,WAAc,WACV,MAAO3hB,GAAGuD,WAAWqC,SAASzE,MAI1Cmc,GAAcK,OAAO/b,KACjB,WACIkC,IAAgBlC,KAAK,WACjB8H,EAAWmnB,WAAW,yBAKtC,QAAS9H,GAAiB5nB,EAAI6nB,GAC1B,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,WACIkC,MAIZ,QAASimD,GAAQzgD,GACTA,EAAMoV,SAAyB,cAAdpV,EAAMnJ,IACvBgJ,IACKG,EAAMoV,SAAyB,eAAdpV,EAAMnJ,KAC5BiJ,IAGR,QAAS4pB,KAEL,GAAI1V,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,kEACbG,WAAY,4BACZE,aAAc,KACdme,KAAM,KACNE,SACIna,WAAc,WACV,MAAOvD,GAAGuD,cAItB+Z,GAAcK,OAAO/b,KAAK,WACtB0B,EAAKoB,MAAM,UAAW,wBACtBgd,EAAOO,GAAG,sCAAuCpd,aAAc7E,EAAGuD,WAAWpC,KAC7E2C,IACA4F,EAAWmnB,WAAW,kBAK9B,QAAShI,KACL,GAAIvqB,GAAO,oGAEX2I,IAAU3I,KAAMA,IAAOsD,KAAK,WACxB,MAAOsB,GAAkB+hD,wBAAwBjlD,EAAG6E,cAAcjD,KAC9D,WACI0B,EAAKoB,MAAM,UAAW,wBACtBgd,EAAOO,GAAG,sCAAuCpd,aAAc7E,EAAGuD,WAAWpC,KAC7E2C,IACA4F,EAAWmnB,WAAW,oBA9gBtC,GAAI7wB,GAAKC,IACTD,GAAGuD,cACHvD,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGkI,iBAAwC,oBAArBjG,EAAaf,KACnClB,EAAGuiC,6BAA8B,EACjCviC,EAAG8wB,oBACH,IAAIu3B,GAAqBxvC,OACrB4wC,EAAoB5wC,OACpB+wC,EAAsB/wC,OAEtB2vC,EAAyB3vC,MAC7B7Y,GAAGkE,WAAaA,EAChBlE,EAAGooD,SAAWA,EACdpoD,EAAGivB,OAASA,EACZjvB,EAAGwwB,OAASA,EACZxwB,EAAG8D,cAAgBA,EACnB9D,EAAGkT,aAAeA,EAClBlT,EAAG+K,kBAAoBA,EACvB/K,EAAG4wB,6BAA+BA,EAClC5wB,EAAGsoD,cAAgBA,EACnBtoD,EAAG0pD,YAAcA,EAEjB1pD,EAAG2pD,QAAUA,EACb3pD,EAAG2wB,kBAAoBA,EACvB3wB,EAAGmJ,KAAOA,EACVnJ,EAAG2oD,QAAUA,EACb3oD,EAAGoJ,SAAWA,EACdpJ,EAAG6oD,YAAcA,EACjB7oD,EAAGkoB,cAAgBA,EACnBloB,EAAGuoD,mBAAqBA,EACxBvoD,EAAG+oB,iBAAmBA,EACtB/oB,EAAGkJ,oBAAsBA,EACzBlJ,EAAG8pD,iBAAmBA,EACtB9pD,EAAG+pD,QAAUA,EACb/pD,EAAGgzB,gBAAkBA,EACrBhzB,EAAG6oB,iBAAmBA,CAGtB,IAAI6/B,IACA,qBACA,WACA,gBACA,UACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,QACA,UAIJ7nD,KA6JA6I,EAAWL,IAAI,OAAQ,SAAU2gD,EAAMC,GACnC7rD,QAAQC,IAAI,gBAAiB2rD,EAAMC,GACnCjqD,EAAG+F,SAAU,EACTkkD,GACAxB,MAwBR/+C,EAAWL,IAAI,WAAY,WACvBjL,QAAQC,IAAI,qBACZ2B,EAAG+F,SAAU,EACb6iD,MA/JRZ,EAAqBznD,SAAW,SAAU,OAAQ,eAAgB,OAAQ,oBAAqB,mBAAoB,KAAM,aAAc,KAAM,YAAa,YA5F1J1B,QACKC,OAAO,kBACPK,WAAW,uBAAwB6oD,MA8hB5C,WACI,YAOA,SAASkC,GAA4BxmC,EAAWhjB,EAAMsB,EAAekZ,EAAWhY,EAC3CkO,EAAwB/N,EAAaC,GAuBtE,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACfmR,IACGuS,IAGP,QAASqmC,GAAetkC,GACjB,GAAIlhB,IACAgI,KAAM,UAKV,OAHN9N,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GACnDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEdqB,EAAkB+iD,uBAAuBrkD,KAC5C,SAAUhE,GACT,QAASwsD,GAAI9vC,EAAG+vC,EAAG5qC,EAAMjX,GACxB,MAAIiX,GAAKhX,SAAWD,EAAI,EAChB8R,EAAEmF,EAAKjX,IAAM6hD,EAAE5qC,EAAKjX,IAAM,EAAI,GAC/B4hD,EAAI9vC,EAAEmF,EAAKjX,IAAK6hD,EAAE5qC,EAAKjX,IAAKiX,EAAMjX,EAAI,GAE9CxI,EAAG2T,YAAc/V,EAAOA,EAAKm5B,OAAO,SAAU1e,GAC7C,MAA4B,KAArBA,EAAEzU,YAAYzC,KACnBwL,KAAK,SAAU2N,EAAG+vC,GACpB,IAAK1lD,EAAOgI,KACX,MAAO,EACR,IAAI8S,GAAO9a,EAAOgI,KAAKyD,MAAM,KAAK,GAAGA,MAAM,KACvCk6C,EAAsC,QAA9B3lD,EAAOgI,KAAKyD,MAAM,KAAK,GAAe,EAAI,EACtD,OAAOg6C,GAAI9vC,EAAG+vC,EAAG5qC,EAAM,GAAK6qC,MAE1B,IAAI9hD,EACJ,KAAKA,EAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACnCxI,EAAG2T,YAAYnL,GAAGrE,MAAQqE,EAAI,CAElC,OAAOxI,GAAG2T,cAItB,QAASuU,GAAc/mB,EAAIopD,GACvB,GAAIhnD,GAAaO,EAAc3C,EAyB/B+Z,GAAU3F,MACNgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAActB,EAAWpC,QAQ7C,QAAS2C,GAAc3C,GACnB,IAAK,GAAIqH,GAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IAC1C,GAAIxI,EAAG2T,YAAYnL,GAAGrH,KAAOA,EACtB,MAAOnB,GAAG2T,YAAYnL,GAMrC,QAAS+I,KACR,MAAOH,GAAuBG,yBAAyB3P,KACtD,SAAUhE,GAET,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKV,QAASmW,GAAiB5nB,EAAG6nB,GACzB,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,cAKR,QAASkiB,KACLzgB,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,OApJ9B,GAAIoC,GAAKC,IACTD,GAAGuD,cACHvD,EAAG2T,eACH3T,EAAGiG,gBACHjG,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS6nD,IAEhBnqD,EAAGwqD,cAAe,EAClBxqD,EAAG4T,UAAYtQ,EAAKuQ,SAAS,aAC7B7T,EAAGyqD,SAAWnnD,EAAKuQ,SAAS,YAC5B7T,EAAGI,MAAQ,yCACXJ,EAAG8zB,WAAY,EAEZ9zB,EAAGkoB,cAAgBA,EACnBloB,EAAG+oB,iBAAmBA,EACzB/oB,EAAG6pB,SAAW3mB,EAAkB4mB,aAE7BjpB,IAoEJqpD,EAA4B3pD,SAAW,YAAa,OAAQ,gBAAiB,YAAa,oBAAqB,yBAA0B,cAAe,QA7FxJ1B,QACKC,OAAO,kBACPK,WAAW,8BAA+B+qD,MAiKnD,WACI,YAOA,SAASQ,GAAyBzoD,EAAcyhB,EAAWhjB,EAAMsB,EAAekZ,EAAWjY,EAASgE,EAAUmK,EAAwBuS,EAAcC,EAClHzgB,EAAiBD,EAAmBhB,EAAcoB,EAAMugB,EAAexgB,EAAa1D,EAAW2f,GA0D7H,QAASze,KACLH,EAAKsZ,KAAKha,EAAGI,OACbmR,IACA+C,IACAwP,IACA6mC,IACA/qC,IAGJ,QAAS9b,GAAc3C,GACnB,IAAK,GAAIqH,GAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACvC,GAAIxI,EAAG2T,YAAYnL,GAAGrH,KAAOA,EACzB,MAAOnB,GAAG2T,YAAYnL,GAKlC,QAASmiD,KACLhrD,EAAU2H,WAAW1F,KAAK,SAAUhE,GAChCoC,EAAGgkB,YAAcpmB,EACjBoC,EAAG8zB,UAAYn0B,EAAUukB,aAAa,QAAS,aAAc,gBAAiB,sBAAuB,wBAI7G,QAASG,KA4CL,GA3CArkB,EAAGskB,WAAWC,iBAAmBvkB,EAAGukB,iBACpCvkB,EAAGskB,WAAWE,eAAiBxkB,EAAGwkB,eAClCxkB,EAAGskB,WAAWG,mBAAqBzkB,EAAGykB,mBACtCzkB,EAAGskB,WAAWI,iBAAmB1kB,EAAG0kB,iBACpC1kB,EAAGskB,WAAWK,eAAiB3kB,EAAG2kB,eAClC3kB,EAAGskB,WAAWM,aAAe5kB,EAAG4kB,aAChC5kB,EAAGskB,WAAWO,gBAAkB7kB,EAAG6kB,gBACnC7kB,EAAGskB,WAAWQ,cAAgB9kB,EAAG8kB,cACjC9kB,EAAGskB,WAAWS,eAAiB/kB,EAAGskB,WAAWS,eAAiB9hB,EAAQ,WAAWjD,EAAGskB,WAAWS,gBAAkB,KACjH/kB,EAAGskB,WAAWU,iBAAmBhlB,EAAGskB,WAAWU,iBAAmB/hB,EAAQ,WAAWjD,EAAGskB,WAAWU,kBAAoB,KACvHhlB,EAAGskB,WAAW5L,gBAAkB1Y,EAAGskB,WAAW5L,gBAAkBzV,EAAQ,WAAWjD,EAAGskB,WAAW5L,iBAAmB,KACpH1Y,EAAGskB,WAAW3C,WAAa3hB,EAAG2hB,WAAa3hB,EAAG2hB,WAAWnO,WAAa,KACtExT,EAAGskB,WAAWW,WACdjlB,EAAGskB,WAAWY,gBAEdllB,EAAGiB,MAAMK,QAAQ,SAAU6jB,GACnBA,EAAG1C,UACHziB,EAAGskB,WAAWW,QAAQ7jB,KAAK+jB,EAAGhkB,MAEtCnB,EAAGolB,WAAW9jB,QAAQ,SAAU6jB,GACxBA,EAAG1C,UACHziB,EAAGskB,WAAWY,aAAa9jB,KAAK+jB,EAAGhkB,MAG3CnB,EAAGskB,WAAW1Q,aACd5T,EAAGskB,WAAWe,sBAEdrlB,EAAG4T,UAAUtS,QAAQ,SAAU6jB,GACvBA,EAAG1C,UACHziB,EAAGskB,WAAW1Q,UAAUxS,KAAK+jB,EAAGhlB,OAExCH,EAAGqlB,mBAAmB/jB,QAAQ,SAAU6jB,GAChCA,EAAG1C,UACHziB,EAAGskB,WAAWe,mBAAmBjkB,KAAK+jB,EAAGhlB,OAGjDH,EAAGskB,WAAWgB,sBAEdtlB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,UACHziB,EAAGskB,WAAWgB,mBAAmBlkB,KAAK+jB,EAAGhkB,MAG7CnB,EAAGulB,iBAAmBvlB,EAAGwlB,UAAW,CACpC,GAAIC,KACJA,GAAoBrkB,KAAKpB,EAAGulB,iBAC5BvlB,EAAGskB,WAAWoB,YAAc1lB,EAAGwlB,UAAUrkB,GACzCnB,EAAGskB,WAAWqB,kBAAoBF,MAMlCzlB,GAAGskB,WAAWsB,oBAAsB,KAI5C,QAASnN,GAAiBoN,GACtB,GAAIC,GAAY7R,QAChBjU,GAAG+F,SAAU,EACbse,GACA,IAAI1f,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACdrZ,KAAM,UAMV,OAJA9N,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAGvBqB,EAAkBuV,iBAAiBzY,EAAGskB,WAAY3f,GAAQ/C,KAC7D,SAAUhE,GACNoC,EAAG2T,YAAc/V,EAAOA,EAAK8H,UAC7B,IAAI8C,GACA2d,EAAqBvoB,EAAKuS,OAASvS,EAAKwoB,gBAC5C,KAAK5d,EAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACnCxI,EAAG2T,YAAYnL,GAAGrE,MAAQgiB,EAAqB3d,EAAI,EACnDxI,EAAG2T,YAAYnL,GAAG6d,eAAwD,YAAvCrmB,EAAG2T,YAAYnL,GAAG5E,YAAYC,IAEjEjG,KACAioB,EAAQS,MAAM1oB,EAAK2oB,eACnBvmB,EAAGwmB,gBAAkB5oB,EAAK2oB,cAE9B,IAAIE,GAAwB5nB,QAAQd,QAAQ2X,SAASC,eAAe,2BAKpE,OAJI3V,GAAG0mB,YAAa1mB,EAAG0mB,aAAc,EAChChD,EAAUiD,gBAAgBF,EAAuBG,EAAQC,GAC9D7mB,EAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC7D9lB,EAAG+F,SAAU,EACN/F,EAAG2T,aACX,SAAUnN,GAIT,MAHAxG,GAAGwmB,gBAAkB,EACrBxmB,EAAG+F,SAAU,EACb/F,EAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SACtDtf,IAInB,QAASwgB,GAAiBC,GACtB5C,GACA,IAAI/G,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,sDACbG,WAAY,yCACZE,aAAc,UACdme,KAAM,KACNE,SACI6B,cAAiB,WACb,MAAOvf,GAAGwlB,aAKtBlI,GAAcK,OAAO/b,KACjB,SAAUgc,GACN,GAAIjZ,IACAsiB,WAAYA,EACZC,eAAgBlnB,EAAGskB,WACnB6C,sBAAsB,EACtBxH,QAAS/B,EAAI,GACbwJ,WAAYxJ,EAAI,GAGpB+F,GAAc0D,gBAAgB1iB,GAAQ/C,KAAK,SAAU0lB,GACjD,GAAIL,EAAY,CACZ,GAAIM,GAAM,4CAA8CD,CACxDlpB,SAAQC,IAAIkpB,GACZ5D,EAAc6D,iBAAiBD,GAC/BjkB,EAAKoB,MAAM,OAAQ,mCAG5B,cAMX,QAAS6M,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAItB,QAAS0B,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAAS4gB,KAGL,MAFKznB,GAAGskB,WAAW3iB,aACf3B,EAAG8S,aACA3P,EAAgB0P,yBAAyB7S,EAAGskB,WAAW3iB,YAAYC,KACtE,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WAItB,QAAS4U,KAEL,MADA1nB,GAAGskB,WAAWqD,aAC2B,IAArC3nB,EAAGskB,WAAWsD,YAAYnf,QAC1BzI,EAAG8S,YACI9S,EAAG8S,UAGP3P,EAAgB0kB,6BAA6B7nB,EAAGskB,WAAWsD,aAAahmB,KAC3E,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,KACdoC,EAAG8S,WAItB,QAASyB,KACDvU,EAAGskB,YACHtkB,EAAGskB,cACHtkB,EAAGiB,MAAMK,QAAQ,SAAU6jB,GACnBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAGolB,WAAW9jB,QAAQ,SAAU6jB,GACxBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAG4T,UAAUtS,QAAQ,SAAU6jB,GACvBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAGqlB,mBAAmB/jB,QAAQ,SAAUwmB,GAChCA,EAAGrF,WACHqF,EAAGrF,UAAW,KAEtBziB,EAAGoC,YAAY0I,UAEf9K,EAAG+nB,WAAa/nB,EAAG+nB,UAI3B,QAASC,KACLhoB,EAAGoC,YAAY0I,SAGnB,QAASmd,KACLjoB,EAAGoC,YAAY0I,SAGnB,QAASod,GAAc/mB,GACnB,GAAIoC,GAAaO,EAAc3C,EAC/B+Z,GAAU3F,MACNgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAActB,EAAWpC,QAQ7C,QAASgnB,KACL,GAAI7K,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,mEACbG,WAAY,gBACZE,aAAc,gBACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOnB,GAAG2hB,YAEdyG,YAAa,WACT,YAKZ9K,GAAcK,OAAO/b,KACjB,WACI5B,EAAGoC,YAAY0I,WAI3B,QAAS0d,GAAeroB,GACpB,IAAK,GAAIqI,GAAI,EAAGA,EAAIxI,EAAG4T,UAAUnL,OAAQD,IACrC,GAAIrI,IAAQH,EAAG4T,UAAUpL,GAAG3G,MACxB,MAAO7B,GAAG4T,UAAUpL,GAAGpI,KAE/B,OAAO,SAWX,QAASqoB,GAAWvnB,GAChB,MAAO+jB,GAAQ5U,QAAQnP,EAAKC,IAAM,GAOtC,QAASunB,GAAWxnB,GAEhB,GAAIiD,GAAQ8gB,EAAQ5U,QAAQnP,EAAKC,IAC7BwnB,EAASxkB,EAAQ,EACjBwkB,GACA1D,EAAQlU,OAAO5M,EAAO,GAEtB8gB,EAAQ7jB,KAAKF,EAAKC,IACtB6mB,IAIJ,QAASY,GAAgB1nB,GACrB9C,QAAQC,IAAI,kBAAmB6C,EAAKC,GAAI+jB,EAAa7U,QAAQnP,EAAKC,IAClE,IAAIgD,GAAQ+gB,EAAa7U,QAAQnP,EAAKC,IAClCwnB,EAASxkB,EAAQ,EACjBwkB,GACAzD,EAAanU,OAAO5M,EAAO,GAE3B+gB,EAAa9jB,KAAKF,EAAKC,IAC3B6mB,IACA5pB,QAAQC,IAAI6mB,GAGhB,QAAS2D,GAAiBtlB,GAClBA,EAAW8iB,gBAEfpf,IAAWrF,KAAK,WACZsB,EAAkB2lB,iBAAiBtlB,EAAWpC,IAAIS,KAAK,WACnD5B,EAAGoC,YAAY0I,SACfxH,EAAKoB,MAAM,YACZ,SAAU+N,GACTnP,EAAKoB,MAAM,QAAS+N,EAAEqW,aAKlC,QAASC,GAAiB5nB,EAAI6nB,GAC1B,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,WACIkC,MAIZ,QAASggB,KACLzgB,EAAY2C,UAAU,YAAYpE,KAAK,SAAUhE,GAC7CoC,EAAG2G,UAAY/I,EAAOA,OAE1ByF,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,KACtBQ,QAAQC,IAAI,kBAAkB2B,EAAGkG,aAErC7C,EAAY4lB,YAAY,oBAAqB,aAAc,kBAAkBrnB,KAAK,SAAUhE,GACxFoC,EAAGkpB,WAAatrB,EAAOA,EAAK8H,aAEhCrC,EAAY4lB,YAAY,QAAS,oBAAqB,aAAc,sBAAuB,qBAAqBrnB,KAAK,SAAUhE,GAC3HoC,EAAGmpB,OAASvrB,EAAOA,EAAK8H,aAIhC,QAASka,KACL5f,EAAGylB,sBACE5jB,MAAO,MAAO0O,QAAS,oBACvB1O,MAAO,OAAQ0O,QAAS,gBACxB1O,MAAO,WAAY0O,QAAS,cAC5B1O,MAAO,SAAU0O,QAAS,iBAC1B1O,MAAO,uBAAwB0O,QAAS,wBAE7C+O,EAAiBa,kBAAkBve,KAAK,SAAUhE,GAC9CoC,EAAGonB,WAAaxpB,IAIxB,QAASwrB,GAAaC,GAClB,MAAOzF,GAAoB0F,cAAcpqB,MAAOmqB,IAAIznB,KAAK,SAAUhE,GAE/D,MADAoC,GAAGupB,MAAQ3rB,MACJoC,EAAGupB,QAxclB,GAAIvpB,GAAKC,IACTD,GAAG0mB,aAAc,EACjB1mB,EAAGskB,cACHtkB,EAAGuD,cACHvD,EAAG2T,eACH3T,EAAGwpB,cACHxpB,EAAG4T,UAAYtQ,EAAKuQ,SAAS,aAC7B7T,EAAGqlB,mBAAqB/hB,EAAKuQ,SAAS,sBACtC7T,EAAG4S,oBACH5S,EAAG6G,aACH7G,EAAGupB,SACHvpB,EAAGod,KAAO,iBACVpd,EAAG2hB,WAAa1f,EAAa0f,WAC7B3hB,EAAG+kB,eAAiB9iB,EAAa8iB,eACjC/kB,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASmW,IAEbzY,EAAGypB,YAAa,EAChBzpB,EAAGiB,MAAQiC,EAAkB+F,eAC7BjJ,EAAGolB,WAAaljB,EAAa+G,aAC7BjJ,EAAGI,MAAQ,wCAEXJ,EAAG2G,aACH3G,EAAGkG,aACHlG,EAAGiG,gBACHjG,EAAGkpB,cACHlpB,EAAGmpB,SAEH,IAAIlE,MACAC,KACA2B,EAAW,IACXD,EAAS,EAEb5mB,GAAGmoB,UAAYA,EACfnoB,EAAGynB,sBAAwBA,EAC3BznB,EAAG0nB,yBAA2BA,EAC9B1nB,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EACZhoB,EAAGioB,WAAaA,EAChBjoB,EAAGkoB,cAAgBA,EACnBloB,EAAG0pB,YAAclB,EACjBxoB,EAAG0oB,WAAaA,EAChB1oB,EAAG4oB,gBAAkBA,EACrB5oB,EAAGyoB,WAAaA,EAChBzoB,EAAG6oB,iBAAmBA,EACtB7oB,EAAG+oB,iBAAmBA,EACtB/oB,EAAGgnB,iBAAmBA,EACtBhnB,EAAG2pB,YAAcrmB,EAAKsmB,eACtB5pB,EAAG8jB,SAAWA,EACd9jB,EAAG6pB,SAAW3mB,EAAkB4mB,aAChC9pB,EAAGopB,aAAeA,EAElBvoB,IAkCJ6pD,EAAyBnqD,SAAW,eAAgB,YAAa,OAAQ,gBAAiB,YAAa,UAAW,WAAY,yBAA0B,gBAAiB,sBAAuB,kBAAmB,oBAAqB,eAAgB,OAAQ,gBAAiB,cAAe,YAAa,oBA9F7S1B,QACKC,OAAO,OACPK,WAAW,2BAA4BurD,MAydhD,WACI,YAOA,SAASE,GAA6BlnC,EAAWhjB,EAAMuB,EAAcD,EAAekZ,EAAW5X,EAAM8N,EAC/DjO,EAAiBD,EAAmB2gB,EAAexgB,GA+BrF,QAASxC,KACRH,EAAKrC,IAAI2B,EAAGI,MAAO6B,GAChBsP,IACA+C,IACA9C,IACAsS,IAGP,QAASrL,GAAiBoN,GACnB,GAAIlhB,IACAgI,KAAM,UAKhB,OAHA9N,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GACnDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEpBqB,EAAkB8iD,sBAAuBrhD,GAAQ/C,KAC9C,SAAUhE,GACT,QAASwsD,GAAI9vC,EAAG+vC,EAAG5qC,EAAMjX,GACxB,MAAIiX,GAAKhX,SAAWD,EAAI,EAChB8R,EAAEmF,EAAKjX,IAAM6hD,EAAE5qC,EAAKjX,IAAM,EAAI,GAC/B4hD,EAAI9vC,EAAEmF,EAAKjX,IAAK6hD,EAAE5qC,EAAKjX,IAAKiX,EAAMjX,EAAI,GAG9CxI,EAAG2T,YAAc/V,EAAOA,EAAK+O,KAAK,SAAU2N,EAAG+vC,GAC9C,IAAK1lD,EAAOgI,KACX,MAAO,EACR,IAAI8S,GAAO9a,EAAOgI,KAAKyD,MAAM,KAAK,GAAGA,MAAM,KACvCk6C,EAAsC,QAA9B3lD,EAAOgI,KAAKyD,MAAM,KAAK,GAAe,EAAI,EACtD,OAAOg6C,GAAI9vC,EAAG+vC,EAAG5qC,EAAM,GAAK6qC,MAE1B,IAAI9hD,EACJ,KAAKA,EAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACnCxI,EAAG2T,YAAYnL,GAAGrE,MAAQqE,EAAI,CAElC,OAAOxI,GAAG2T,cAKtB,QAASpC,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAET,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKnB,QAAS0B,KACL,MAAOnR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAAS2K,KACR,MAAOqS,GAAcrS,gBAAgBuU,KAAQ,EAAGvI,KAAQ,MAAM5b,KACvD,SAAUhE,GAEN,MADAoC,GAAG8S,SAAWlV,EAAOA,EAAK8H,WACnB1F,EAAG8S,WAItB,QAASC,GAAuB5R,GAC5B,MAAOgC,GAAgB6P,uBAAuB7R,GAAIS,KAC9C,SAAUhE,GAEN,MADAoC,GAAGiT,MAAQrV,EAAOA,KACXoC,EAAGiT,QAItB,QAASsB,KACDvU,EAAGskB,YACHtkB,EAAGskB,cACHtkB,EAAGoC,YAAY0I,UAEf9K,EAAG+nB,WAAa/nB,EAAG+nB,UAK3B,QAASC,KACLhoB,EAAGoC,YAAY0I,SAGnB,QAASod,GAAc/mB,GACnB,GAAIoC,GAAaO,EAAc3C,EAC/B+Z,GAAU3F,MACNgI,WAAW,EACXve,YAAa,gEACbG,WAAY,2BACZE,aAAc,KACdme,KAAM,KACNE,SACIzb,aAAgB,WACZ,OACI4C,aAActB,EAAWpC,QAQ7C,QAAS2C,GAAc3C,GACnB,IAAK,GAAIqH,GAAI,EAAGA,EAAIxI,EAAG2T,YAAYlL,OAAQD,IACvC,GAAIxI,EAAG2T,YAAYnL,GAAGrH,IAAMA,EACxB,MAAOnB,GAAG2T,YAAYnL,GAMlC,QAASugB,GAAiB5nB,EAAG6nB,GACzB,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,cAKR,QAASkiB,KACLzgB,EAAY2C,UAAU,aAAapE,KAAK,SAAUhE,GAC9CA,EAAK0D,QAAQ,SAAUjB,GACnBL,EAAGiG,aAAa5F,EAAKmB,UAAYnB,IAErCL,EAAGkG,UAAYtI,EAAOA,OA5K9B,GAAIoC,GAAKC,IACTD,GAAGskB,cACHtkB,EAAGuD,cACHvD,EAAG2T,eACN3T,EAAG4S,oBACA5S,EAAG6G,aACH7G,EAAGiG,gBACNjG,EAAG8zB,WAAY,EACZ9zB,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASmW,IAEhBzY,EAAG4T,UAAYtQ,EAAKuQ,SAAS,aAC7B7T,EAAGyqD,SAAWnnD,EAAKuQ,SAAS,YACzB7T,EAAGkB,QACNlB,EAAGiB,MAAQiC,EAAkB+F,eAC7BjJ,EAAGwqD,cAAe,EAClBxqD,EAAGI,MAAQ,yCAERJ,EAAG+S,uBAAyBA,EAC5B/S,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EACZhoB,EAAGkoB,cAAgBA,EACnBloB,EAAG+oB,iBAAmBA,EACzB/oB,EAAG6pB,SAAW3mB,EAAkB4mB,aAE7BjpB,IA8DJ+pD,EAA6BrqD,SAAW,YAAa,OAAQ,eAAgB,gBAAiB,YAAa,OAAQ,yBAA0B,kBAAmB,oBAAqB,gBAAiB,eA/FtM1B,QACKC,OAAO,kBACPK,WAAW,+BAAgCyrD,MA4LpD,WACI,YAEA/rD,SACKC,OAAO,+BAOhB,WACI,YAOA,SAAS+rD,GAAuB1a,GAa5B,QAAS2a,GAAoBv3C,GACzB,GAAIgU,GAAM8tB,CACV,OAAOlF,GAAe5oB,GAAKsd,IAAItxB,GAGnC,QAASw3C,GAAoB7gC,EAAYvlB,GACrC,GAAI4iB,GAAM8tB,CACV,OAAOlF,GAAe5oB,GAAKmtB,cAAcxqB,EAAYvlB,GAG5D,QAASqmD,GAAa7pD,GACrB,GAAIomB,GAAM8tB,EAAO,IAAMl0C,CACvB,OAAOgvC,GAAe5oB,GAAKsd,MAGzB,QAASxR,GAAiBlyB,GACzB,GAAIomB,GAAM8tB,EAAO,IAAMl0C,CACvB,OAAOgvC,GAAe5oB,GAAf4oB,YAGX,QAASwB,KACR,QACExwC,GAAI,EAAGoP,QAAS,SAChBpP,GAAI,EAAGoP,QAAS,sBAChBpP,GAAI,EAAGoP,QAAS,sBAChBpP,GAAI,EAAGoP,QAAS,sBAChBpP,GAAI,EAAGoP,QAAS,qCAChBpP,GAAI,EAAGoP,QAAS,oDAChBpP,GAAI,EAAGoP,QAAS,oCAChBpP,GAAI,EAAGoP,QAAS,uBAChBpP,GAAI,EAAGoP,QAAS,uBAChBpP,GAAI,EAAGoP,QAAS,uBAChBpP,GAAI,GAAIoP,QAAS,uBACjBpP,GAAI,GAAIoP,QAAS,oCACjBpP,GAAI,GAAIoP,QAAS,qCACjBpP,GAAI,GAAIoP,QAAS,iCACjBpP,GAAI,GAAIoP,QAAS,uBACjBpP,GAAI,GAAIoP,QAAS,uBACjBpP,GAAI,GAAIoP,QAAS,uBACjBpP,GAAI,GAAIoP,QAAS,2BACjBpP,GAAI,GAAIoP,QAAS,kDACjBpP,GAAI,GAAIoP,QAAS,kDACjBpP,GAAI,GAAIoP,QAAS,uBACjBpP,GAAI,GAAIoP,QAAS,4BACjBpP,GAAI,GAAIoP,QAAS,8BACjBpP,GAAI,GAAIoP,QAAS,4BACjBpP,GAAI,GAAIoP,QAAS,UA1DjB,GAAI8kC,GAAO,gBACPvQ,GACAgmB,oBAAqBA,EACrBC,oBAAqBA,EACxBC,aAAcA,EACd/hD,aAAc0oC,EACXte,iBAAkBA,EAEtB,OAAOyR,GAkFX+lB,EAAuBtqD,SAAW,kBAhGlC1B,QACKC,OAAO,yBACPmyC,QAAQ,yBAA0B4Z,MA0E3C,WACI,YAOA,SAAS3Z,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,0BACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,0DACbuoB,IAAK,uBAEb6pB,EAAmBC,KAAK,+BAAgC,sBAoF5DH,EAAY3wC,SAAW,iBAAkB,sBAjGzC1B,QACKC,OAAO,yBACPwyC,OAAOJ,MAiBhB,WACI,YAOA,SAAS+Z,GAA0BvqD,EAAMmqD,EAAwBvnD,GAmB7D,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ8qD,IACAC,IAGJ,QAASD,KACL,GAAI33C,IACAiK,KAAM,IAGVqtC,GAAuBC,oBAAoBv3C,GAAM3R,KAC7C,SAAUhE,GACNoC,EAAGyzB,YAAc71B,EAAK8H,SAE1B,SAAU0tB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAGpEpB,EAAKoB,MAAM,QAAS,oBAAqB,0BAKzD,QAASymD,KACLnrD,EAAGiB,MAAQ4pD,EAAuB5hD,eAGtC,QAASmiD,GAAqBjqD,GAC1B,GAAIoP,GAAU,EAMd,OALAvQ,GAAGiB,MAAMK,QAAQ,SAAUO,GACnBA,EAAMV,KAAOA,IACboP,EAAU1O,EAAM0O,WAGjBA,EAGX,QAAS86C,KAEL,GADArrD,EAAG+F,SAAU,EACT/F,EAAGkqB,YAA0B,OAAZlqB,EAAGkB,KAAe,CACnClB,EAAGkqB,WAAWohC,WAAatrD,EAAGkB,KAAKC,EACnC,IAAIwD,IACAd,KAAK7D,EAAGkqB,WAAWA,WAAWrmB,KAElCgnD,GAAuBE,oBAAoB/qD,EAAGkqB,WAAWvlB,GAAQ/C,KAC7D,WACI5B,EAAGkqB,cACHlqB,EAAGgI,YAAc,GACjBkjD,IACA5nD,EAAKoB,MAAM,YAEf,SAAU0uB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAGpEpB,EAAKoB,MAAM,QAAS,oBAAqB,2BAK7D,QAASivB,KACL3zB,EAAGkqB,cACHlqB,EAAG4zB,qBAAsB,EAG7B,QAASP,GAAiBlyB,GACtB0pD,EAAuBx3B,iBAAiBlyB,GAAIS,KACxC,WACIspD,IACA5nD,EAAKoB,MAAM,YAEf,SAAU0uB,GACN,GAAI3sB,GAAS2sB,EAAS3sB,MACtBzG,GAAG+F,SAAU,EACE,MAAXU,EACAnD,EAAKoB,MAAM,QAAS,+CAAgD,4BAGpEpB,EAAKoB,MAAM,QAAS,oBAAqB,0BAvGzD,GAAI1E,GAAKC,IACTD,GAAGI,MAAQ,+BACXJ,EAAGoE,cACHpE,EAAGyzB,eACHzzB,EAAGkqB,cACHlqB,EAAGiB,SACHjB,EAAGsrD,WAAa,KAEhBtrD,EAAG2zB,oBAAsBA,EACzB3zB,EAAGqrD,kBAAoBA,EACvBrrD,EAAGorD,qBAAuBA,EAC1BprD,EAAGqzB,iBAAmBA,EACtBrzB,EAAGe,MAAQA,MAEXF,IA8EJoqD,EAA0B1qD,SAAW,OAAQ,yBAA0B,QAlGvE1B,QACKC,OAAO,yBACPK,WAAW,4BAA6B8rD,MAqHjD,WACI,YAEApsD,SACKC,OAAO,sBAOhB,WACI,YAOA,SAASoyC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,iBACHg0C,YAAU,EACVC,SAAU,sBACVrwB,IAAK,eAER5jB,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,6CACbuoB,IAAK,UAIb6pB,EAAmBC,KAAK,0BAA2B,kBA2EvDH,EAAY3wC,SAAW,iBAAkB,sBAnGzC1B,QACKC,OAAO,gBACPwyC,OAAOJ,MA6BhB,WACI,YAOA,SAASqa,GAAuB7qD,EAAMsB,EAAeqB,EAAaC,GAoB9D,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZorD,IAGJ,QAASxjC,KACRhoB,EAAGoC,YAAY2jB,KAAK,GACjB/lB,EAAGoC,YAAY0I,SAGnB,QAASyJ,KACLvU,EAAGqF,KAAO,GACVrF,EAAGK,QAGP,QAASmrD,KAEL,QAAShmD,GAAgB4tB,GACrBpzB,EAAG0G,SAAW0sB,EAAS1tB,QAF9BrC,EAAYyC,cAAclE,KAAK4D,GAMhC,QAAS8wC,GAAgBzwB,GAerB,QAASrgB,GAAgB5H,GAOrB,MANAoC,GAAGyrD,UAAY7tD,EAAOA,EAAK8H,WAC3BtH,QAAQC,IAAI,kBAAmB2B,EAAGyrD,WAClCzrD,EAAGoC,YAAYkkB,MAAM1oB,EAAK2oB,eAC1BvmB,EAAGwmB,gBAAkB5oB,EAAK2oB,cAC1BvmB,EAAG+F,SAAU,EACb/F,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SACrD9lB,EAAGyrD,UAGd,QAASt7B,GAAc1d,GACnBzS,EAAG+F,SAAU,EACb/F,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D1nB,QAAQ6jC,MAAMxvB,GA3BlBzS,EAAG+F,SAAU,CACb,IAAI+f,GAAY7R,QAChBjU,GAAG6mB,SAAW,CACd,IAAIliB,IACA6Y,KAAMqI,EAAQG,QACdD,KAAMF,EAAQE,OAAS,EACvBvkB,SAAUxB,EAAGK,KAAOL,EAAGK,KAAKmB,SAAW,KACvCC,SAAUzB,EAAGyB,SAAWzB,EAAGyB,SAAW,KACtCC,OAAQ1B,EAAG0B,OAAS1B,EAAG0B,OAAS,KAKpC,OAHA7C,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEvBwB,EAAYizC,gBAAgB3xC,GAAQ/C,KAAK4D,EAAiB2qB,GAkBrE,QAAS5qB,GAAarG,GAGlB,QAASsG,GAAgB5H,GAErB,MADAoC,GAAGyF,MAAQ7H,EAAK8H,YACT1F,EAAGyF,MAJd,MAAOpC,GAAYyC,aAAa5G,MAAOA,IAAQ0C,KAAK4D,GA1ExD,GAAIxF,GAAKC,IACTD,GAAG0rD,YACH1rD,EAAGyrD,aACHzrD,EAAG0G,YACH1G,EAAGoC,YAAc,GAAIJ,OACjBM,QAASg0C,IAEbt2C,EAAGI,MAAQ,yBAEXJ,EAAGuF,aAAeA,EAClBvF,EAAG8G,YAAczD,EAAY0D,WAC7B/G,EAAGwrD,YAAcA,EACjBxrD,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EAEZnnB,IA+EJ0qD,EAAuBhrD,SAAW,OAAQ,gBAAiB,cAAe,QApG1E1B,QACKC,OAAO,gBACPK,WAAW,yBAA0BosD,MAyF9C,WACI,YAEA1sD,SACKC,OAAO,kBAYhB,WACI,YAOA,SAASygD,GAAYpP,GACjB,GAAIkF,GAAO,iBACPsW,EAAOxb,EAAekF,EAC1B,QACIiL,YAAaqL,EAAK9mB,KA4F1B0a,EAAYh/C,SAAW,kBArGvB1B,QACKC,OAAO,YACPmyC,QAAQ,cAAesO,MAsBhC,WACI,YAOA,SAASrO,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,kBACHxE,WAAY,qBACZE,aAAc,KACdL,YAAa,qCACbuoB,IAAK,eAGb6pB,EAAmBC,KAAK,kBAAmB,SAwF/CH,EAAY3wC,SAAW,iBAAkB,sBAtGzC1B,QACKC,OAAO,YACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS0a,GAAmB3kD,EAAUvG,EAAMsB,EAAeu9C,EAAaj8C,GAapE,QAASzC,MAGT,QAASy/C,KACL,MAAOf,GAAYe,cAAc1+C,KAAK,SAAUhE,GAG5C,MAFAoC,GAAGmiD,SAAWvkD,EAAOA,KACrBQ,QAAQC,IAAI,iBAAiB2B,EAAGmiD,UACzBniD,EAAGmiD,WAnBlB,GAAIniD,GAAKC,IACTD,GAAGT,aACHS,EAAGmiD,YACHniD,EAAG2rD,QACH3rD,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASg+C,IAEbz/C,IAyFJ+qD,EAAmBrrD,SAAW,WAAY,OAAQ,gBAAiB,cAAe,QAvGlF1B,QACKC,OAAO,YACPK,WAAW,qBAAsBysD,MA8B1C,WACI,YAOA,SAASvoB,GAAY3iC,EAAMikC,EAAO3hC,GAU9B,QAAS6oD,GAAalnD,GAElB,MADAjE,GAAKsZ,KAAK,sBACH2qB,EAAME,IAAIwQ,GAAO1wC,OAAQA,IAAS/C,KAAK4D,GAGlD,QAAS+9B,GAAWuoB,GAChB,GAAIvkC,GAAMvkB,EAAO,4BACb+oD,EAAM,GAAIC,eAEdD,GAAIE,mBAAqB,WACE,IAAnBF,EAAIG,YACJJ,EAASC,EAAI34B,WAIrB24B,EAAIx2C,KAAK,MAAOgS,GAAK,GACrBwkC,EAAII,KAAK,IAGb,QAAS3mD,GAAgB4tB,GACrB,MAAOA,GAASx1B,KA7BpB,GAAIy3C,GAAOryC,EAAO,QACd8hC,GACA+mB,aAAcA,EACdtoB,WAAYA,EAEhB,OAAOuB,GA6FXzB,EAAY9iC,SAAW,OAAQ,QAAS,QAxGxC1B,QACKC,OAAO,OACPmyC,QAAQ,cAAe5N,MAuC/B,WACG,YAOA,SAAS+oB,GAAe1rD,EAAMf,EAAW06B,EAAS3Y,EAAQof,EACjCx9B,EAAMogB,EAAW1hB,EAAe0H,GASrD,QAAS7I,KACLb,EAAG+F,SAAU,EACbpG,EAAU2H,WAAW1F,KACpB,WACC5B,EAAGqsD,cAAgB1sD,EAAUukB,aAAa,QAAS,aAAc,sBAAuB,mBAAoB,sBACzGlkB,EAAGssD,cAAgB3sD,EAAUukB,aAAa,QAAS,eACnDlkB,EAAG+F,SAAU,GACX,WACL/F,EAAG+F,SAAU,IAhBnB,GAAI/F,GAAKC,IAEZD,GAAGI,MAAQ,iBAEXS,IA8FDurD,EAAe7rD,SAAW,OAAQ,YAAa,UAAW,SAAU,WAAY,OAAQ,YAAa,gBAAiB,cAzGtH1B,QACKC,OAAO,OACPK,WAAW,iBAAkBitD,MA8BtC,WACI,YAEAvtD,SACKC,OAAO,+BAWhB,WACI,YAOA,SAAS2N,GAAwB0jC,GAC7B,GAAIkF,GAAO,6BACPkX,EAAGpc,EAAekF,EACtB,QACI3oC,wBAAyB6/C,EAAG1nB,IAC5B2nB,oBAAqBD,EAAGxb,QACxB0b,uBAAwBF,EAAG3b,KAC3B8b,uBAAwBH,EAAG/W,IAC3BmX,uBAAwBJ,EAAAA,WA6FhC9/C,EAAwBlM,SAAW,kBA1GnC1B,QACKC,OAAO,yBACPmyC,QAAQ,0BAA2BxkC,MAoB5C,WACI,YAOA,SAASykC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,0BACHxE,WAAY,6BACZE,aAAc,KACdL,YAAa,0DACbuoB,IAAK,uBAGb6pB,EAAmBC,KAAK,+BAAgC,sBA6F5DH,EAAY3wC,SAAW,iBAAkB,sBA3GzC1B,QACKC,OAAO,yBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS0b,GAA2B3lD,EAAUvG,EAAMsB,EAAeyK,GA2B/D,QAAS5L,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAASsM,GAAwBmZ,GAC7B,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY;CAEzE,OAAOkN,GAAwBC,wBAAwB/H,GAAQ/C,KAC3D,SAAUhE,GAEN,MADAoC,GAAGyN,kBAAoB7P,EAAOA,KACvBoC,EAAGyN,oBAMzB,QAASg/C,KACR,GAAIj/C,IAAoB3J,KAAM7D,EAAG6D,KAAMuZ,KAAMpd,EAAGod,KAChD3Q,GAAwBggD,uBAAuBj/C,GAAkB5L,KAAK,WAE5D5B,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAcvB,QAAS4hD,GAAuBt1C,GAE5B3K,EAAwBigD,uBAAuBt1C,EAAKjW,IAAK0C,KAAMuT,EAAKvT,KAAMuZ,KAAMhG,EAAKgG,OAAOxb,KACxF,WACI5B,EAAGoC,YAAY0I,WAlE3B,GAAI9K,GAAKC,IACTD,GAAGT,aACHS,EAAG6sD,QAEKzsD,MAAO,OACPyB,MAAO,YAGPzB,MAAO,OACPyB,MAAO,aAGf7B,EAAGyN,qBACHzN,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASoK,IAEb1M,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASma,EAEZzsD,EAAGuJ,OAASmjD,EAgFhBE,EAA2BrsD,SAAW,WAAY,OAAQ,gBAAiB,2BA5G3E1B,QACKC,OAAO,OACPK,WAAW,6BAA8BytD,MAiFlD,WACC,YAEA/tD,SACEC,OAAO,kBAWV,WACC,YAOA,SAASguD,GAAY3c,GACpB,GAAIkF,GAAO,QACP0X,EAAO5c,EAAekF,EAC1B,QACC2X,YAAaD,EAAKloB,IAClBooB,YAAaF,EAAKhc,QAClBmc,WAAYH,EAAKnc,KACjBuc,WAAYJ,EAAKvX,IACjB4X,WAAYL,EAAAA,WAgGdD,EAAYvsD,SAAW,kBA7GvB1B,QACEC,OAAO,YACPmyC,QAAQ,cAAe6b,MAoB1B,WACC,YAOA,SAAS5b,GAAYC,EAAgBC,GACpCD,EACExtC,MAAM,aACNxE,WAAY,iBACZE,aAAc,KACdL,YAAa,gCACbuoB,IAAK,UAGP6pB,EAAmBC,KAAK,kBAAmB,SAgG5CH,EAAY3wC,SAAW,iBAAkB,sBA9GzC1B,QACEC,OAAO,YACPwyC,OAAOJ,MAgBV,WACC,YAOA,SAASmc,GAAe3sD,EAAMmqD,EAAwB7nD,GAgBrD,QAASnC,KACRH,EAAKrC,IAAI2B,EAAGI,OAGb,QAASktD,GAAensD,GACvB,IAAK,GAAIqH,GAAI,EAAGA,EAAIxI,EAAGiB,MAAMwH,OAAQD,IACpC,GAAIxI,EAAGiB,MAAMuH,GAAGrH,KAAOA,EACtB,MAAOnB,GAAGiB,MAAMuH,GAAG+H,OAErB,OAAO,IAGR,QAASg9C,GAASjd,GAEjBua,EAAuBG,aAAa1a,GAAQ1uC,KAAK,SAAUC,GAC1D,GAAKA,EAAL,CAEA,GAAI0lB,GAAMvkB,EAAO,0BAA4BnB,EAAM2rD,eAAersD,GAAK,eAAiBmvC,EAAS,IAAMzuC,EAAM2rD,eAAepwC,IAC5H9H,QAAOC,KAAKgS,EAAK,aAjCnB,GAAIvnB,GAAKC,IACTD,GAAGq9C,UACHr9C,EAAG+9C,WACH/9C,EAAGytD,aACHztD,EAAG0tD,eAAgB,EACnB1tD,EAAGoE,cACHpE,EAAGI,MAAQ,qBACXJ,EAAGiB,MAAQ4pD,EAAuB5hD,eAClCjJ,EAAGutD,SAAWA,EACdvtD,EAAGstD,eAAiBA,EAEpBzsD,IA8FDwsD,EAAe9sD,SAAW,OAAQ,yBAA0B,QA/G5D1B,QACEC,OAAO,YACPK,WAAW,iBAAkBkuD,MA+ChC,WACI,YAEAxuD,SACKC,OAAO,8BAYhB,WACI,YAOA,SAAS6uD,GAAuBxd,GAS5B,QAASyd,GAAWhwD,GAChB,GAAIwhD,GAAS73B,EAAM,UACnB,OAAO4oB,GAAeiP,GAAQxO,KAAKhzC,GAGvC,QAASiwD,GAAgBjwD,GACrB,GAAIwhD,GAAS73B,EAAM,eACnB,OAAO4oB,GAAeiP,GAAQxO,KAAKhzC,GAfvC,GAAI2pB,GAAM,kBACV,QACIqmC,WAAYA,EACZC,gBAAiBA,GAuGzBF,EAAuBptD,SAAW,kBAhHlC1B,QACKC,OAAO,wBACPmyC,QAAQ,yBAA0B0c,MA4B3C,WACI,YAQA,SAASzc,GAAYC,EAAgBC,GAEjCD,EACKxtC,MAAM,wBACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,wDACbuoB,IAAK,sBAIb6pB,EAAmBC,KAAK,8BAA+B,qBAiG3DH,EAAY3wC,SAAW,iBAAkB,sBAjHzC1B,QACKC,OAAO,wBACPwyC,OAAOJ,MAsBhB,WACI,YAQA,SAAS4c,GAA0B9qD,EAAMC,EAASvC,EAAMsuB,EAAI2+B,EAAwBrqD,GA+ChF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,MACZ,IAAI6d,GAAQ,GAAIlV,KAChBkV,GAAQA,EAAMrV,QAAQqV,EAAMjV,UAAY,GACxChJ,EAAGyxC,aAAaC,cAAgBz9B,OAAOgK,GAAO/J,OAAO,cAIzD,QAAS5R,KAGL,GAAIqC,IACAi8C,aAAc5gD,EAAGyxC,aAAamP,aAC9B35B,WAAYjnB,EAAGyxC,aAAaxqB,WAC5BthB,kBAAyD,QAAtC3F,EAAGyxC,aAAa9rC,kBAA8B,KAAO3F,EAAGyxC,aAAa9rC,kBACxFw6C,WAAYngD,EAAGyxC,aAAa0O,WAC5BD,UAAWlgD,EAAGyxC,aAAayO,UAC3BW,cAAe7gD,EAAGyxC,aAAasO,eAAiB//C,EAAGyxC,aAAasO,cAAct3C,OAASzI,EAAGyxC,aAAasO,cAAgB,KACvHe,cAAe9gD,EAAGyxC,aAAauO,eAAiBhgD,EAAGyxC,aAAauO,cAAcv3C,OAASzI,EAAGyxC,aAAauO,cAAgB,KACvHiB,wBAAyBjhD,EAAGyxC,aAAawO,uBAAyBjgD,EAAGyxC,aAAawO,sBAAsBx3C,OAASzI,EAAGyxC,aAAawO,sBAAwB,KACzJiB,yBAA0BlhD,EAAGyxC,aAAayP,yBAC1Ct5B,YAAa5nB,EAAGyxC,aAAa7pB,aAAe5nB,EAAGyxC,aAAa7pB,YAAYnf,OAASzI,EAAGyxC,aAAa7pB,YAAc,KAC/Gu5B,SAAUnhD,EAAGyxC,aAAa0P,SAK9B,OAHAx8C,GAAO8tC,gBAAkBzyC,EAAGyxC,aAAagB,gBACzC9tC,EAAO+sC,cAAgB1xC,EAAGyxC,aAAaC,cAEhC/sC,EAEX,QAASopD,KACL,GAAIjoC,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,EACb4nD,EAAuBC,WAAWtrD,KAAWV,KAAK,SAAUhE,GAEpDoC,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EAEb/F,EAAGguD,OAASpwD,EAAK0a,IAAI,SAAUlB,GAC3B,MAAO4qB,GAAQ5qB,EAAK62C,KAAO,IAAM72C,EAAK82C,SAE1CluD,EAAGmuD,QAAU,eAAgB,cAC7BnuD,EAAGpC,MACCA,EAAK0a,IAAI,SAAUlB,GACf,MAAOA,GAAK4O,QAEhBpoB,EAAK0a,IAAI,SAAUlB,GACf,MAAOA,GAAK8d,UAGpBl1B,EAAGouD,QAAU,SAAUC,EAAQC,GAC3BlwD,QAAQC,IAAIgwD,EAAQC,IAExBtuD,EAAGuuD,kBAAoBC,QAAS,aAAcA,QAAS,aACvDxuD,EAAGnC,SACC4wD,QACIC,QAEQvtD,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,OACVC,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAO9sB,GAAQngC,OAKvBV,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,QACV3f,MAAO,kBACP4f,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAOC,GAAUltD,QAMrCmtD,UACIC,WACI7uD,MAAO,SAAU8uD,EAAatxD,GAC1B,MAAOsxD,GAAY,GAAGC,QAE1BngB,MAAO,SAAUkgB,EAAatxD,GAC1B,MAAoC,KAA7BsxD,EAAYE,aAAqBptB,EAAQktB,EAAYG,QAAU,WAA0C,IAA7BH,EAAYE,aAAqBL,EAAUG,EAAYG,OAAQ,KAAOH,EAAYG,QAEzKC,WAAY,SAAUJ,EAAatxD,GAC/B,MAAO,SASnC,QAAS2xD,KACL,GAAIzpC,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,EACb4nD,EAAuBE,gBAAgBvrD,KAAWV,KAAK,SAAUhE,GAEzDoC,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EAEb/F,EAAGguD,OAASpwD,EAAK0a,IAAI,SAAUlB,GAC3B,MAAO4qB,GAAQ5qB,EAAK62C,KAAO,IAAM72C,EAAK82C,SAE1CluD,EAAGmuD,QAAU,gBAAiB,cAC9BnuD,EAAGpC,MACCA,EAAK0a,IAAI,SAAUlB,GACf,MAAOA,GAAK4O,QAEhBpoB,EAAK0a,IAAI,SAAUlB,GACf,MAAOA,GAAK8d,UAGpBl1B,EAAGouD,QAAU,SAAUC,EAAQC,GAC3BlwD,QAAQC,IAAIgwD,EAAQC,IAExBtuD,EAAGuuD,kBAAoBC,QAAS,aAAcA,QAAS,aACvDxuD,EAAGnC,SACC4wD,QACIC,QAEQvtD,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,OACVC,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAO9sB,GAAQngC,OAKvBV,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,QACV3f,MAAO,gBACP4f,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAOC,GAAUltD,QAMrCmtD,UACIC,WACI7uD,MAAO,SAAU8uD,EAAatxD,GAC1B,MAAOsxD,GAAY,GAAGC,QAE1BngB,MAAO,SAAUkgB,EAAatxD,GAC1B,MAAoC,KAA7BsxD,EAAYE,aAAqBptB,EAAQktB,EAAYG,QAAU,YAA2C,IAA7BH,EAAYE,aAAqBL,EAAUG,EAAYG,OAAQ,KAAOH,EAAYG,QAE1KC,WAAY,SAAUJ,EAAatxD,GAC/B,MAAO,SASnC,QAAS4xD,KACL,GAAI1pC,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,CACb,IAAI0pD,IAAS9B,EAAuBE,gBAAgBvrD,KAAYqrD,EAAuBC,WAAWtrD,KAClG0sB,GAAG8D,IAAI28B,GAAO7tD,KAAK,SAAUhE,GAErBQ,QAAQC,IAAIT,GACZA,EAAK,GAAG0D,QAAQ,SAAU8V,GACtBA,EAAKs4C,OAAS,EACd9xD,EAAK,GAAG0D,QAAQ,SAAUquD,GAClBA,EAAM1B,OAAS72C,EAAK62C,MAAQ0B,EAAMzB,QAAU92C,EAAK82C,QACjD92C,EAAKs4C,OAASC,EAAM3pC,WAGhChmB,EAAGguD,OAASpwD,EAAK,GAAG0a,IAAI,SAAUlB,GAC9B,MAAO4qB,GAAQ5qB,EAAK62C,KAAO,IAAM72C,EAAK82C,SAE1CluD,EAAGmuD,QAAU,0BAA2B,0BACxCnuD,EAAGpC,MACCA,EAAK,GAAG0a,IAAI,SAAUlB,GAClB,MAAOA,GAAK4O,QAEhBpoB,EAAK,GAAG0a,IAAI,SAAUlB,GAClB,MAAOA,GAAKs4C,UAGpB1vD,EAAGouD,QAAU,SAAUC,EAAQC,GAC3BlwD,QAAQC,IAAIgwD,EAAQC,IAExBtuD,EAAGuuD,kBAAoBC,QAAS,aAAcA,QAAS,aACvDxuD,EAAGnC,SACC4wD,QACIC,QAEQvtD,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,OACVC,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAO9sB,GAAQngC,QAMnCmtD,UACIC,WACI7uD,MAAO,SAAU8uD,EAAatxD,GAC1B,MAAOsxD,GAAY,GAAGC,QAE1BngB,MAAO,SAAUkgB,EAAatxD,GAC1B,MAAoC,KAA7BsxD,EAAYE,aAAqBptB,EAAQktB,EAAYG,QAAU,cAA6C,IAA7BH,EAAYE,aAAqBptB,EAAQktB,EAAYG,QAAU,eAAiBH,EAAYG,QAEtLC,WAAY,SAAUJ,EAAatxD,GAC/B,MAAO,OAKvBoC,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EACbzC,EAAKoB,MAAM,UAAW,2BAA6B1E,EAAG6mB,YAKlE,QAAS+oC,KACL,GAAI9pC,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,CACb,IAAI0pD,IAAS9B,EAAuBE,gBAAgBvrD,KAAYqrD,EAAuBC,WAAWtrD,KAClG0sB,GAAG8D,IAAI28B,GAAO7tD,KAAK,SAAUhE,GAErBA,EAAK,GAAG0D,QAAQ,SAAU8V,GACtBA,EAAKy4C,WAAa,EAClBjyD,EAAK,GAAG0D,QAAQ,SAAUquD,GAClBA,EAAM1B,OAAS72C,EAAK62C,MAAQ0B,EAAMzB,QAAU92C,EAAK82C,QACjD92C,EAAKy4C,WAAaF,EAAM3pC,MAAQ5O,EAAK4O,WAGjD5nB,QAAQC,IAAIT,EAAMoC,EAAG6mB,UACrB7mB,EAAGguD,OAASpwD,EAAK,GAAG0a,IAAI,SAAUlB,GAC9B,MAAO4qB,GAAQ5qB,EAAK62C,KAAO,IAAM72C,EAAK82C,SAE1CluD,EAAGmuD,QAAU,oCACbnuD,EAAGpC,MACCA,EAAK,GAAG0a,IAAI,SAAUlB,GAClB,MAAOA,GAAKy4C,cAGpBzxD,QAAQC,IAAI,aAAc2B,EAAGpC,MAC7BoC,EAAGouD,QAAU,SAAUC,EAAQC,GAC3BlwD,QAAQC,IAAIgwD,EAAQC,IAExBtuD,EAAGuuD,kBAAoBC,QAAS,aAChCxuD,EAAGnC,SACC4wD,QACIC,QAEQvtD,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,OACVC,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAO9sB,GAAQngC,QAMnCmtD,UACIC,WACI7uD,MAAO,SAAU8uD,EAAatxD,GAC1B,MAAOsxD,GAAY,GAAGC,QAE1BngB,MAAO,SAAUkgB,EAAatxD,GAC1B,MAAOokC,GAAQktB,EAAYG,OAAOS,QAAQ,IAAM,mBAEpDR,WAAY,SAAUJ,EAAatxD,GAC/B,MAAO,OAKvBoC,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EACbzC,EAAKoB,MAAM,UAAW,2BAA6B1E,EAAG6mB,YAKlE,QAASkpC,KACL,GAAIjqC,GAAY7R,QAChBjU,GAAG6mB,SAAW,EACd7mB,EAAG+F,SAAU,CACb,IAAI0pD,IAAS9B,EAAuBE,gBAAgBvrD,KAAYqrD,EAAuBC,WAAWtrD,KAClG0sB,GAAG8D,IAAI28B,GAAO7tD,KAAK,SAAUhE,GAErBA,EAAK,GAAG0D,QAAQ,SAAU8V,GACtBA,EAAKy4C,WAAa,EAClBjyD,EAAK,GAAG0D,QAAQ,SAAUquD,GAClBA,EAAM1B,OAAS72C,EAAK62C,MAAQ0B,EAAMzB,QAAU92C,EAAK82C,QACjD92C,EAAKy4C,WAAaF,EAAMz6B,OAAS9d,EAAK8d,YAGlD92B,QAAQC,IAAIT,EAAMoC,EAAG6mB,UACrB7mB,EAAGguD,OAASpwD,EAAK,GAAG0a,IAAI,SAAUlB,GAC9B,MAAO4qB,GAAQ5qB,EAAK62C,KAAO,IAAM72C,EAAK82C,SAE1CluD,EAAGmuD,QAAU,oCACbnuD,EAAGpC,MACCA,EAAK,GAAG0a,IAAI,SAAUlB,GAClB,MAAOA,GAAKy4C,cAGpBzxD,QAAQC,IAAI,aAAc2B,EAAGpC,MAC7BoC,EAAGouD,QAAU,SAAUC,EAAQC,GAC3BlwD,QAAQC,IAAIgwD,EAAQC,IAExBtuD,EAAGuuD,kBAAoBC,QAAS,aAChCxuD,EAAGnC,SACC4wD,QACIC,QAEQvtD,GAAI,WACJic,KAAM,SACN+2B,SAAS,EACTwa,SAAU,OACVC,OACIC,aAAa,EACb/C,SAAU,SAAUjqD,EAAOsC,EAAO2qD,GAC9B,MAAO9sB,GAAQngC,QAMnCmtD,UACIC,WACI7uD,MAAO,SAAU8uD,EAAatxD,GAC1B,MAAOsxD,GAAY,GAAGC,QAE1BngB,MAAO,SAAUkgB,EAAatxD,GAC1B,MAAOokC,GAAQktB,EAAYG,OAAOS,QAAQ,IAAM,mBAEpDR,WAAY,SAAUJ,EAAatxD,GAC/B,MAAO,OAKvBoC,EAAG6mB,SAAWlc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC5D9lB,EAAG+F,SAAU,EACbzC,EAAKoB,MAAM,UAAW,2BAA6B1E,EAAG6mB,YAKlE,QAASzD,KACLpjB,EAAGuhD,cAAgBvhD,EAAGw/C,eAAer+C,GACrCnB,EAAGgwD,YAAchwD,EAAGw/C,eAAe95C,QACnC1F,EAAGw/C,eAAHx/C,cAGJ,QAASoiD,GAAoB/P,GACzB,GAAIxE,GAAM7tC,EAAGogD,WAAW33C,MACxB,OAAKzI,GAAGw/C,gBAAmBx/C,EAAGw/C,eAAer7C,OAI7CkuC,GAAKryC,EAAGw/C,eAAer7C,MACvBkuC,IACAA,GAAKxE,OACL7tC,EAAGw/C,eAAiBx/C,EAAGogD,WAAW/N,UAN9BryC,EAAGw/C,eAAuB,IAANnN,EAAUryC,EAAGogD,WAAW,GAAKpgD,EAAGogD,WAAWvS,EAAM,IAjb7E,GAAI7tC,GAAKC,IACTD,GAAGI,MAAQ,8BACXJ,EAAGyxC,cAAgBsO,iBAAmBC,kBACtChgD,EAAGoiD,oBAAsBA,EACzBpiD,EAAGojB,OAASA,CACZ,IAAI4e,GAAU/+B,EAAQ,WAClB8rD,EAAY9rD,EAAQ,YACxBjD,GAAGsiD,cAAgB,QAAS,WAAY,SAAU,OAElDzhD,IAEAb,EAAGogD,aAEKj8C,MAAO,EACPuB,QAAS,uCACTvE,GAAI,UACJ8uD,WAAUlC,IAGV5pD,MAAO,EACPuB,QAAS,sCACTvE,GAAI,eACJ8uD,WAAUV,IAGVprD,MAAO,EACPuB,QAAS,mDACTvE,GAAI,4BACJ8uD,WAAUT,IAGVrrD,MAAO,EACPuB,QAAS,yDACTvE,GAAI,sCACJ8uD,WAAUL,IAGVzrD,MAAO,EACPuB,QAAS,uDACTvE,GAAI,uCACJ8uD,WAAUF,IAoEtBjC,EAA0BvtD,SAAW,OAAQ,UAAW,OAAQ,KAAM,yBAA0B,QAlHhG1B,QACKC,OAAO,wBACPK,WAAW,4BAA6B2uD,MAqcjD,WACI,YAEAjvD,SACKC,OAAO,sBAYhB,WACI,YAOA,SAASwS,GAAgB6+B,GAYrB,QAAS+f,GAAeC,EAAUhvD,GAC9B,GAAIomB,GAAM8tB,EAAOl0C,CACjB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM2a,GAbzC,GAAI9a,GAAO,qBACP+a,EAAKjgB,EAAekF,EACxB,QACIgb,gBAAiBD,EAAGvrB,IACpByrB,YAAaF,EAAGrf,QACnBmf,eAAgBA,EAChBz8C,gBAAiB08B,EAAekF,EAAO,UAAUzE,MAuGtDt/B,EAAgB/Q,SAAW,kBAnH3B1B,QACKC,OAAO,gBACPmyC,QAAQ,kBAAmB3/B,MAuBpC,WACI,YAEAzS,SACKC,OAAO,8BAYhB,WACI,YAOA,SAASsS,GAAuB++B,GAC5B,GAAIkF,GAAO,4BACPsO,EAAGxT,EAAekF,EACtB,QACI9jC,uBAAwBoyC,EAAG9e,IAC3B0rB,mBAAoB5M,EAAG5S,QACvByf,sBAAuB7M,EAAG/S,KAC1B6f,sBAAuB9M,EAAGnO,IAC1Bkb,sBAAuB/M,EAAAA,WAuG/BvyC,EAAuB7Q,SAAW,kBApHlC1B,QACKC,OAAO,wBACPmyC,QAAQ,yBAA0B7/B,MAoB3C,WACI,YAOA,SAAS8/B,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,yBACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,wDACbuoB,IAAK,sBAGb6pB,EAAmBC,KAAK,8BAA+B,qBAuG3DH,EAAY3wC,SAAW,iBAAkB,sBArHzC1B,QACKC,OAAO,wBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASyf,GAA0B1pD,EAAUvG,EAAMsB,EAAeoP,GAkB9D,QAASvQ,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAASmR,GAAuBsU,GAC5B,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAO6R,GAAuBG,uBAAuB5M,GAAQ/C,KACzD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAMtB,QAAS49C,GAAsB3sD,GAC3B,GAAIm3C,IAAOn3C,KAAMA,EACjBuN,GAAuBo/C,sBAAsBxV,GAAKp5C,KAAK,WAEnD5B,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAKvB,QAAS4lD,GAAsBvvD,GAC3BiQ,EAAuBs/C,sBAAsBvvD,GAAIS,KAC7C,WACI5B,EAAGoC,YAAY0I,WAI3B,QAAS2lD,GAAsBr5C,GAE3BhG,EAAuBq/C,sBAAsBr5C,EAAKjW,OAAS0C,KAAMuT,EAAKvT,OAAOjC,KACzE,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GA9DjB,GAAI1F,GAAKC,IACTD,GAAGT,aACHS,EAAG4S,oBACH5S,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASiP,IAEbvR,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASke,EACZxwD,EAAAA,UAAY0wD,EACZ1wD,EAAGuJ,OAASknD,EACZ9oD,EAAYA,EAmGhBgpD,EAA0BpwD,SAAW,WAAY,OAAQ,gBAAiB,0BAtH1E1B,QACKC,OAAO,OACPK,WAAW,4BAA6BwxD,MAyEjD,WACI,YAEA9xD,SACKC,OAAO,sCAYhB,WACI,YAOA,SAASo5B,GAA8BiY,GACnC,GAAIkF,GAAO,mCACPub,EAAIzgB,EAAekF,EACvB,QACItc,8BAA+B63B,EAAI/rB,IACnCgsB,0BAA2BD,EAAI7f,QAC/B+f,6BAA8BF,EAAIhgB,KAClCmgB,6BAA8BH,EAAIpb,IAClCwb,6BAA8BJ,EAAAA,WA0GtC14B,EAA8B33B,SAAW,kBAvHzC1B,QACKC,OAAO,gCACPmyC,QAAQ,gCAAiC/Y,MAoBlD,WACI,YAOA,SAASgZ,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,iCACHxE,WAAY,mCACZE,aAAc,KACdL,YAAa,wEACbuoB,IAAK,8BAGb6pB,EAAmBC,KAAK,sCAAuC,6BA0GnEH,EAAY3wC,SAAW,iBAAkB,sBAxHzC1B,QACKC,OAAO,gCACPwyC,OAAOJ,MAmBhB,WACI,YAOA,SAAS+f,GAAiChqD,EAAUvG,EAAMsB,EAAek2B,EAA8B50B,GAmBnG,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAAS24B,GAA8BlT,GACnC,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAO24B,GAA8Ba,8BAA8Bp0B,GAAQ/C,KACvE,SAAUhE,GAEN,MADAoC,GAAGigD,sBAAwBriD,EAAOA,KAC3BoC,EAAGigD,wBAMzB,QAAS6Q,KACR,GAAK9wD,EAAG6D,KAAR,CAEA,GAAI0rB,IAA0B1rB,KAAM7D,EAAG6D,KACvCq0B,GAA8B44B,6BAA6BvhC,GAAwB3tB,KAAK,WAC9E0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UAC5B/nB,EAAG6D,KAAO,GACD7D,EAAGoC,YAAY0I,YAcvB,QAASimD,GAA6B35C,GAElC8gB,EAA8B64B,6BAA6B35C,EAAKjW,OAAS0C,KAAMuT,EAAKvT,OAAOjC,KACvF,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GAGpB,QAASiK,GAAWrG,GACG,KAAlBA,EAAMuG,SACTihD,IAzEC,GAAI9wD,GAAKC,IACTD,GAAGT,aACHS,EAAGigD,yBACHjgD,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASy2B,IAEb/4B,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASwe,EAEZ9wD,EAAGuJ,OAASwnD,EACZ/wD,EAAG2H,UAAYA,EAClB3H,EAAG2P,WAAaA,EAqGjBshD,EAAiC1wD,SAAW,WAAY,OAAQ,gBAAiB,gCAAiC,QAzHlH1B,QACKC,OAAO,OACPK,WAAW,mCAAoC8xD,MAyFxD,WACI,YAOA,SAAS/lD,GAAiBilC,GA6CtB,QAASptB,GAAYoK,EAAenK,GAChC,GAAIuE,GAAM1E,EAAcsK,EAAgB,eACpCxoB,GACAgd,WAAYqB,EAEhB,OAAOmtB,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAG7C,QAASwpB,GAAoBhB,EAAe+jC,GACxC,GAAI3pC,GAAM1E,EAAcsK,EAAgB,uBACpCxoB,GACAogB,eAAgBmsC,EAEpB,OAAO/gB,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAG7C,QAASyoB,GAAcD,GACnB,GAAI5F,GAAM1E,EAAcsK,EAAgB,gBACxC,OAAOgjB,GAAe5oB,GAAKiuB,IAAI,QAAU,MAI7C,QAASlzB,GAAgB3d,GACrB,GAAI4iB,GAAM8tB,EAAO,QACjB,OAAOlF,GAAe5oB,GAAKsd,IAAIlgC,GAGnC,QAAS25B,GAAwBn9B,EAAIs0B,GACjC,GAAIlO,GAAM8tB,EAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKnb,GAGpC,QAAS2F,GAAqBj6B,EAAIvD,GAC9B,GAAI2pB,GAAM8tB,EAAOl0C,EAAK,cACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASy9B,GAAwBnZ,EAAatkB,EAAM+G,GAChD,GAAI4iB,GAAM8tB,EAAOnzB,EAAc,iBAC/B,OAAOiuB,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASw1B,GAA2BjY,EAAatkB,EAAM+G,GACnD,GAAI4iB,GAAM8tB,EAAOnzB,EAAc,kBAC/B,OAAOiuB,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAASq1B,GAAwB74B,EAAIo0B,GACjC,GAAIhO,GAAM8tB,EAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKrb,GAGpC,QAASoC,GAAsBx2B,EAAI+L,GAC/B,GAAIqa,GAAM8tB,EAAOl0C,EAAK,aACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAK1jC,GAGpC,QAAS8tB,GAAyB75B,GAC9B,GAAIomB,GAAM,mBAAqBpmB,CAC/B,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAASrE,GAAwBr/B,EAAIvD,GACjC,GAAI2pB,GAAM8tB,EAAOl0C,EAAK,eACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASk8B,GAA6B34B,EAAIwD,GACtC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAKxrC,GAG3C,QAASy5B,GAA6Bj9B,EAAIwD,GACtC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,kBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAKxrC,GAG3C,QAAS4yB,GAA2Bp2B,EAAIwD,GACpC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASq7B,GAAoB7+B,EAAIvD,GAChC,GAAI2pB,GAAM,iBAAmBpmB,EAAK,WAC/B,OAAOgvC,GAAe5oB,GAAKqpB,KAAKhzC,GAGpC,QAASgiC,GAAmBz+B,GAC3B,GAAIomB,GAAM,iBAAmBpmB,EAAK,YAC/B,OAAOgvC,GAAe5oB,GAAKsd,MAG/B,QAASssB,GAAuBhwD,EAAIvD,GAChC,GAAI2pB,GAAM,iBAAmBpmB,EAAK,eAC9BwD,GAAUy7B,QAASxiC,EAAKuD,GAC5B,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM53C,EAAM+G,GAG/C,QAAS07B,GAAyBl/B,EAAIwD,GACrC,GAAI4iB,GAAM,iBAAmBpmB,EAAK,cAC/B,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAASm3B,GAAwB36B,EAAIwD,GACjC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,iBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAMxrC,GAG5C,QAAS40B,GAAyBp4B,EAAIoV,GAClC,GAAIgR,GAAM8tB,EAAOl0C,EAAK,gBACtB,OAAOgvC,GAAe5oB,GAAKqpB,KAAKr6B,GAGpC,QAAS8iB,GAA8Bl4B,EAAIwD,GACvC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,mBACtB,OAAOgvC,GAAe5oB,GAAf4oB,UAA2B,KAAKxrC,GAG3C,QAAS0R,GAAelV,GACpB,GAAIomB,GAAM8tB,EAAOl0C,EAAK,iBACtB,OAAOgvC,GAAe5oB,GAAKsd,MAGlC,QAAS9M,GAAyB52B,EAAIiwD,GACrC,GAAI7pC,GAAM8tB,EAAOl0C,EAAK,iBAClBwD,GACH2yB,aAAc85B,EAAWjwD,GAE1B,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM4b,EAAYzsD,GAGlD,QAAS65B,GAA2Br9B,EAAIs0B,GACvC,GAAIlO,GAAM8tB,EAAOl0C,EAAK,mBAClBwD,GACHw5B,eAAgB1I,EAAat0B,GAE9B,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM/f,EAAc9wB,GAGjD,QAASqd,GAAa7gB,EAAIuX,EAAiBiJ,GAC7C,GAAI4F,GAAM8tB,EAAOl0C,EAAK,gBACZwD,GAAU+T,gBAAmBA,EAAiBiJ,WAAcA,EACtE,OAAOwuB,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAG1C,QAASod,GAAc5gB,EAAIuX,EAAiB24C,GAC3C,GAAI9pC,GAAM8tB,EAAOl0C,EAAK,iBAClBwD,GAAU+T,gBAAmBA,EAAiB44C,iBAAoBD,EACtE,OAAOlhB,GAAe5oB,GAAKiuB,IAAI,QAAU7wC,GAhMvC,GAAI0wC,GAAO,iBACPxyB,EAAc,mBACdtjB,EAAY4wC,EAAekF,EAC/B,QACIkc,iBAAkBhyD,EAAUslC,IAC5BtM,iBAAkBh5B,EAAUwxC,QAC5BrY,gBAAiBn5B,EAAUqxC,KAC3BnY,gBAAiBl5B,EAAUi2C,IAC3Bgc,gBAAiBjyD,EAAAA,UAEjBihC,wBAAyBA,EACzB1G,6BAA8BA,EAC9BsE,6BAA8BA,EAC9B7G,2BAA4BA,EAC5ByI,oBAAqBA,EACrBJ,mBAAoBA,EACpBS,yBAA0BA,EAC1BH,uBAAwBixB,EACxBn3B,wBAAyBA,EACzBsE,wBAAyBA,EACzB3G,sBAAuBA,EACvByD,qBAAsBA,EACtBC,wBAAyBA,EACzBlB,2BAA4BA,EAC5Ba,yBAA0BA,EAC1Bc,wBAAyBA,EACzBxZ,gBAAiBA,EACjBS,YAAaA,EACboL,oBAAqBA,EACrBf,cAAeA,EACfmM,yBAA0BA,EAC1BF,8BAA+BA,EAClChjB,eAAgBA,EAChB0hB,yBAA0BA,EAC1ByG,2BAA4BA,EAE5Bxc,aAAcA,EACdD,cAAeA,GA+EpB7W,EAAiB3K,SAAW,kBA1H5B1B,QACKC,OAAO,iBACPmyC,QAAQ,mBAAoB/lC,MA0MrC,WACI,YAOA,SAASgmC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,kBACHxE,WAAY,sBACZE,aAAc,KACdL,YAAa,0CAChBuoB,IAAK,qEAEL5jB,MAAM,uBACHxE,WAAY,0BACZE,aAAc,KACdL,YAAa,+CACbuoB,IAAK,gBAER5jB,MAAM,0BACHxE,WAAY,6BACZE,aAAc,KACdL,YAAa,oEACbuoB,IAAK,aAER5jB,MAAM,4BACHxE,WAAY,sBACZE,aAAc,KACdL,YAAa,oDACbuoB,IAAK,eAER5jB,MAAM,wCACHxE,WAAY,kCACZE,aAAc,KACdL,YAAa,6EACbuoB,IAAK,2BAER5jB,MAAM,iCACHxE,WAAY,mCACZE,aAAc,KACdL,YAAa,uEACbuoB,IAAK,oBAER5jB,MAAM,iCACHxE,WAAY,oCACZE,aAAc,KACdL,YAAa,wEACbuoB,IAAK,oBAER5jB,MAAM,0BACHxE,WAAY,6BACZE,aAAc,KACdL,YAAa,6DACbuoB,IAAK,cAER5jB,MAAM,2BACHxE,WAAY,kCACZE,aAAc,KACdL,YAAa,uDACbuoB,IAAK,cAGb6pB,EAAmBC,KAAK,wBAAyB,eA6DrDH,EAAY3wC,SAAW,iBAAkB,sBA3HzC1B,QACKC,OAAO,OACPwyC,OAAOJ,MAgEhB,WACC,YAOG,SAASugB,GAAoBxqD,EAAU+nB,EAAItN,EAAQhhB,EAAMgJ,EAAYzH,EAAciJ,EAAkBhI,GA0CvG,QAASsc,KACR9e,EAAKqgC,MAAM,+BACX/gC,EAAGkiB,YAAcjgB,EAAaigB,YAC9BliB,EAAGmoD,aAAezmC,EAAOU,SAASve,KAClCC,IAAgBlC,KAAKsR,GACZnI,IAGV,QAASq9C,GAASD,GACjB,MAAOzmC,GAAOU,SAASve,OAASskD,EAGjC,QAASj1C,GAAatL,GACrB8pD,EAAmB1iC,EAAG8lB,OACtB,IAAItvC,GAAkB,SAAU5H,GAI/B,MAFAoC,GAAGT,UAAY3B,EAAOA,EAAK2B,aAC3BmyD,EAAiBh0C,QAAQ1d,EAAGT,WACrBS,EAAGT,WAEP4wB,EAAgB,WACnBuhC,EAAiBlhC,SAKlB,OAFA1sB,GAAc8D,GAAahG,KAAK4D,EAAiB2qB,GAE1CuhC,EAAiBv+C,QAIzB,QAASrP,GAAc8D,GActB,QAASisB,GAAgBj2B,GAGxB,MAFAoC,GAAGuD,WAAa3F,EAAOA,KACvByqD,EAAmB3qC,QAAQ9f,GACpBoC,EAAGuD,WAGX,QAASwwB,GAAckO,GACtBomB,EAAmB73B,OAAOyR,GAnB3B,MAAIr6B,GACCygD,EACIA,EAAmBl1C,SAC3Bk1C,EAAqBr5B,EAAG8lB,YACxB5xC,GAAkBiD,kBAAkBlE,EAAa4C,cAAcjD,KAAKiyB,EAAiBE,KAGrFs0B,EAAqBr5B,EAAG8lB,QACjB5xC,EAAkBiD,kBAAkBlE,EAAa4C,cAAcjD,KAAKiyB,EAAiBE,IAiB9F,QAAS49B,GAAUxxD,GAClB,IAAKH,EAAGT,UACP,MAAO,KACR,IAAIqyD,IACS1iC,UAAalvB,EAAGT,UAAU8vB,gBAAkBrvB,EAAGT,UAAU4L,WAAanL,EAAGT,UAAU+vB,qBAAuBtvB,EAAGT,UAAUgwB,wBAA0BvvB,EAAGT,UAAUiwB,yBAA2BxvB,EAAGT,UAAUkwB,oBAAsBzvB,EAAGT,UAAUmwB,aAAe1vB,EAAGT,UAAUowB,2BAA6B3vB,EAAGT,UAAUqwB,sBAAwB5vB,EAAGT,UAAUswB,WAAa7vB,EAAGT,UAAUuwB,yBAA2B9vB,EAAGT,UAAU6T,oBAAsBpT,EAAGT,UAAU8T,0BACrc0c,YAAe/vB,EAAGuD,WAAWwsB,YAAuD,SAAxC/vB,EAAGuD,WAAWwsB,UAAUC,cAA2BhwB,EAAGuD,WAAW0sB,iBAAiBxnB,OAAQ,GAAI,GAC1I7C,SAAY5F,EAAGuD,WAAWirB,cAAgBxuB,EAAGuD,WAAWirB,aAAa/lB,OAAS,EAC9EixB,sBAAyB15B,EAAGuD,WAAW+H,eAAiBtL,EAAGuD,WAAW+H,cAAc7C,OAAS,EAC7FoO,QAAW7W,EAAGuD,WAAW+S,aAAetW,EAAGuD,WAAW+S,YAAY7N,OAAS,EAC3E2uB,eAAkBp3B,EAAGuD,WAAWmM,aAAe1P,EAAGuD,WAAWmM,YAAYjH,OAAS,EAClFusB,eAAkBh1B,EAAGuD,WAAW6rB,eAAiBpvB,EAAGuD,WAAW6rB,cAAc3mB,OAAS,EAEvF,OAAOmpD,GAASzxD,GAEX,QAASgJ,KACLnJ,EAAG+F,SAAU,EACb3H,QAAQC,IAAI,QACZ2B,EAAGotC,QAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC7ChS,QAAQC,IAAI,IAAM2B,EAAGotC,SACrB1jC,EAAWmnB,WAAW7wB,EAAGotC,QAAU,QAASptC,EAAGgL,eAUnD,QAASy9C,KAEL,GADArqD,QAAQC,IAAI,UACP2B,EAAGotC,QAAR,CAEA,GAAIjpC,GAAQukD,EAAUr4C,QAAQrQ,EAAGotC,QAC7BjpC,IAASukD,EAAUjgD,QAEvBiZ,EAAOO,GAAG,kBAAoBymC,EAAUvkD,EAAQ,IAAKU,aAAc7E,EAAG6E,gBAGhF,QAAS8jD,KACR,GAAIvb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EAC9B,OAAQjpC,GAAQukD,EAAUjgD,OAAS,EAI9B,QAASW,KACLpJ,EAAG+F,SAAU,EACb3H,QAAQC,IAAI,WAAY2B,EAAG+F,SAC3B/F,EAAGotC,QAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC7C1G,EAAWmnB,WAAW7wB,EAAGotC,QAAU,YAAaptC,EAAGgL,eAWvD,QAAS49C,KACLxqD,QAAQC,IAAI,aAAc2B,EAAG+F,QAC7B,IAAI5B,GAAQukD,EAAUr4C,QAAQrQ,EAAGotC,QACpB,IAATjpC,GAEJud,EAAOO,GAAG,kBAAoBymC,EAAUvkD,EAAQ,IAAKU,aAAc7E,EAAG6E,eAGhF,QAASgkD,KACR,GAAIzb,GAAU1rB,EAAOU,SAASve,KAAKuM,MAAM,KAAK,GAC1CjM,EAAQukD,EAAUr4C,QAAQ+8B,EAC9B,OAAQjpC,GAAQ,EAIX,QAAS4G,GAAkBnD,GAQvB,QAASiqD,GAAuBj0D,GAC5BoC,EAAG8wB,kBAAoBlzB,EACvBoC,EAAGgL,eAAgB,EAC/B5M,QAAQC,IAAI,iBAAkBT,GAClBiB,QAAQyC,QAAQ1D,EAAM,SAAUiE,IACT,YAAfA,EAAMgC,MAAqC,0BAAfhC,EAAMgC,QAClC7D,EAAGgL,eAAgB,KAG3B5M,QAAQC,IAAI,iDAAkDmqD,GAC9DA,EAAuB9qC,QAAQ1d,EAAGgL,eAGtC,QAAS8mD,GAAqB7vB,GAC1BumB,EAAuBh4B,OAAOyR,GApBlC,MAAIr6B,IAAe4gD,EACRA,EAAuBr1C,SAClCq1C,EAAyBx5B,EAAG8lB,QAC5B12C,QAAQC,IAAI,yBAA0BmqD,GACtCtlD,EAAkB2hD,8BAA8B7kD,EAAG6E,cAAcjD,KAAKiwD,EAAwBC,GAmBvFtJ,EAAuBr1C,SAtMxC,GAAInT,GAAKC,KACLyxD,EAAmB,KACnBrJ,EAAqBxvC,OACf2vC,EAAyB3vC,MAEnC7Y,GAAGooD,SAAWA,EACdpoD,EAAGkT,aAAeA,EAClBlT,EAAG8D,cAAgBA,EACnB9D,EAAG2xD,UAAYA,EACf3xD,EAAG6E,aAAe5C,EAAa4C,aAC/B7E,EAAGmiB,gBAAkBlgB,EAAakgB,gBAClCniB,EAAG2hB,WAAa1f,EAAa0f,WACvB3hB,EAAGmJ,KAAOA,EAChBnJ,EAAG2oD,QAAUA,EACP3oD,EAAGoJ,SAAWA,EACpBpJ,EAAG6oD,YAAcA,EACX7oD,EAAG+K,kBAAoBA,CACvB,IAAI29C,IACA,UACA,YACA,WACA,wBACH,UACG,iBACH,iBAEP1oD,GAAG0oD,UAAYA,EACf1oD,EAAG+xD,gBACF,wCACA,wCACA,uCACA,qDACA,sCACA,+CACA,+CAEDvyC,IAmFM9V,EAAWL,IAAI,OAAQ,SAAUzL,EAAM+f,GACnCvf,QAAQC,IAAI,gBAAiBT,EAAM+f,GACnC3d,EAAG+F,SAAU,EACT4X,GACA8qC,MA4BR/+C,EAAWL,IAAI,WAAY,SAAUzL,EAAM+f,GACvC3d,EAAG+F,SAAU,EACb3H,QAAQC,IAAI,oBAAqBT,EAAM+f,GACnCA,GACAirC,MAtCf6I,EAAoBlxD,SAAW,WAAY,KAAM,SAAU,OAAQ,aAAc,eAAgB,mBAAoB,qBA5HrH1B,QACEC,OAAO,iBACPK,WAAW,sBAAuBsyD,MAiNrC,WACI,YAOA,SAASO,GAAwB/qD,EAAUvG,EAAMuC,EAASjB,EAAekJ,EAAkB5H,GAoBvF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGnB,QAASmxD,GAAiB1rC,GACnB,GAAIlhB,IACHohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACXisC,cAAiBjyD,EAAGgoB,OAAO+H,UAC9B5f,OAAU2R,EAAQ9hB,EAAGgoB,OAAO7X,QACzB+hD,0BAA6BlyD,EAAGgoB,OAAOuH,uBAE3C,OAAOrkB,GAAiBoX,gBAAgB3d,GAAQ/C,KAC5C,SAAUhE,GAIN,MAHAoC,GAAGwpB,WAAa5rB,EAAOA,EAAK8H,WAC5BtH,QAAQC,IAAI,iBAAkB2B,EAAGwpB,YACpC3D,EAAQS,MAAM1oB,EAAK2oB,eACTvmB,EAAGwpB,aAKtB,QAASlH,KACLtiB,EAAGoC,YAAY0I,SAGtB,QAASyJ,KACRvU,EAAGgoB,UACHhoB,EAAGoC,YAAY0I,SAGhB,QAAS0mD,GAAgBrwD,GAKxB,QAASqE,KACRxF,EAAGoC,YAAY0I,SACfxH,EAAKoB,MAAM,WAGZ,QAASyrB,GAAc8R,GACtB3+B,EAAKoB,MAAM,QAASu9B,EAAMnZ,SAV3B7hB,IAAWrF,KAAK,WACfsJ,EAAiBsmD,gBAAgBrwD,GAAIS,KAAK4D,EAAiB2qB,KApD1D,GAAInwB,GAAKC,KACR6hB,EAAU7e,EAAQ,UACnBjD,GAAGT,aACHS,EAAGwpB,cACHxpB,EAAGoC,YAAc,GAAIJ,OACpBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACrBC,QAASivD,IAEbvxD,EAAGI,MAAQ,4BACXJ,EAAGgoB,UAEHhoB,EAAGsiB,gBAAkBA,EACxBtiB,EAAGwxD,gBAAkBA,EACrBxxD,EAAGuU,aAAeA,EAEf1T,IAwGJmxD,EAAwBzxD,SAAW,WAAY,OAAQ,UAAW,gBAAiB,mBAAoB,QA7HvG1B,QACKC,OAAO,OACPK,WAAW,0BAA2B6yD,MAwE/C,WACI,YAOA,SAASG,GAA0BlrD,EAAUvG,EAAMsB,EAAem2B,GAe9D,QAASt3B,KACLH,EAAKrC,IAAI2B,EAAGI,OAIhB,QAASy4B,GAA4BhT,GACjC,GAAIlhB,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACdwb,KAAM3b,EAAQkR,SAASyK,KAAO3b,EAAQkR,SAASyK,KAAO,GAG1D,OAAOrJ,GAA4Bi6B,2CAA2CztD,GAAQ/C,KAClF,SAAUhE,GAGN,MAFAoC,GAAGigD,sBAAwBriD,EAAOA,EAAK8H,WACvCmgB,EAAQS,MAAM1oB,EAAK2oB,eACZvmB,EAAGigD,wBA9BtB,GAAIjgD,GAAKC,IACTD,GAAGT,aACHS,EAAGigD,yBACHjgD,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASu2B,IAEb74B,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EAEflnB,IA8GJsxD,EAA0B5xD,SAAW,WAAY,OAAQ,gBAAiB,+BA9H1E1B,QACKC,OAAO,OACPK,WAAW,4BAA6BgzD,MA2CjD,WACI,YAEAtzD,SACKC,OAAO,oCAYhB,WACI,YAOA,SAASq5B,GAA4BgY,GACjC,GAAIkF,GAAO,iCACPgd,EAAIliB,EAAekF,EACvB,QACIxc,4BAA6Bw5B,EAAIxtB,IACjCytB,uCAAwCniB,EAAe,iDAAiDtL,IACxG0tB,uCAAwCpiB,EAAe,wDAAwDtL,IAC/GutB,2CAA4CjiB,EAAe,mEAAmEtL,IAG9H2tB,wBAAyBH,EAAIthB,QAC7B0hB,2BAA4BJ,EAAIzhB,KAChC8hB,2BAA4BL,EAAI7c,IAChCmd,2BAA4BN,EAAAA,WA6GpCl6B,EAA4B53B,SAAW,kBA/HvC1B,QACKC,OAAO,8BACPmyC,QAAQ,8BAA+B9Y,MAyBhD,WACI,YAOA,SAAS+Y,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,+BACHxE,WAAY,iCACZE,aAAc,KACdL,YAAa,oEACbuoB,IAAK,4BAER5jB,MAAM,0BACHxE,WAAY,4BACZE,aAAc,KACdL,YAAa,+DACbuoB,IAAK,uBAGb6pB,EAAmBC,KAAK,oCAAqC,2BA4GjEH,EAAY3wC,SAAW,iBAAkB,sBAhIzC1B,QACKC,OAAO,8BACPwyC,OAAOJ,MAsBhB,WACI,YAOA,SAAS0hB,GAA+B3rD,EAAUvG,EAAMsB,EAAem2B,GAmBnE,QAASt3B,KACLH,EAAKrC,IAAI2B,EAAGI,OAIhB,QAASy4B,GAA4BhT,GACjC,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAO44B,GAA4BU,4BAA4Bl0B,GAAQ/C,KACnE,SAAUhE,GAEN,MADAoC,GAAGigD,sBAAwBriD,EAAOA,KAC3BoC,EAAGigD,wBAqBtB,QAASwS,KACL,GAAIl/C,IAAQ1P,KAAM7D,EAAG6D,KACrBs0B,GAA4Bs6B,2BAA2Bl/C,GAAM3R,KAAK,WAE9D5B,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG6D,KAAO,GACV7D,EAAGoC,YAAY0I,WAKvB,QAAS6nD,GAA2BxxD,GAChC8F,IAAWrF,KAAK,WACZu2B,EAA4Bw6B,2BAA2BxxD,GAAIS,KACvD,WACI5B,EAAGoC,YAAY0I,aAK/B,QAAS4nD,GAA2Bt7C,GAChC+gB,EAA4Bu6B,2BAA2Bt7C,EAAKjW,OAAS0C,KAAMuT,EAAKvT,OAAOjC,KACnF,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GAGjB,QAASiK,GAAWrG,GACM,KAAlBA,EAAMuG,SACN4iD,IAtFR,GAAIzyD,GAAKC,IACTD,GAAGT,aACHS,EAAGigD,yBACHjgD,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASu2B,IAEb74B,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASmgB,EACZzyD,EAAAA,UAAY2yD,EACZ3yD,EAAGuJ,OAASmpD,EACZ1yD,EAAG2H,UAAYA,EACf3H,EAAG2P,WAAaA,EA6GpBijD,EAA+BryD,SAAW,WAAY,OAAQ,gBAAiB,+BAjI/E1B,QACKC,OAAO,OACPK,WAAW,iCAAkCyzD,MAoGtD,WACI,YAEA/zD,SACKC,OAAO,2BAYhB,WACI,YAOA,SAASkuB,GAAoBmjB,GACzB,GAAIkF,GAAO,yBACPgd,EAAMliB,EAAekF,EACzB,QACI3a,oBAAqB23B,EAAIxtB,IACzBguB,gBAAiBR,EAAIthB,QACrB+hB,mBAAoBT,EAAIzhB,KACxBmiB,mBAAoBV,EAAI7c,IACxBwd,mBAAoBX,EAAAA,WAqH5BrlC,EAAoBzsB,SAAW,kBAlI/B1B,QACKC,OAAO,qBACPmyC,QAAQ,sBAAuBjkB,MAoBxC,WACI,YAOA,SAASkkB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdL,YAAa,kDACbuoB,IAAK,mBAGb6pB,EAAmBC,KAAK,2BAA4B,kBAqHxDH,EAAY3wC,SAAW,iBAAkB,sBAnIzC1B,QACKC,OAAO,qBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS+hB,GAAuBhsD,EAAUvG,EAAMsB,EAAegrB,EAAoB1pB,GAkB/E,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAASs6B,GAAoB7U,GACzB,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAOytB,GAAoB0N,oBAAoB/1B,GAAQ/C,KACnD,SAAUhE,GAEN,MADAoC,GAAG8uB,cAAgBlxB,EAAOA,KACnBoC,EAAG8uB,gBAMtB,QAASgkC,GAAmBjvD,GACxB,GAAIm3C,IAAOn3C,KAAMA,EACjBmpB,GAAoB8lC,mBAAmB9X,GAAKp5C,KAAK,WAC7C0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAKvB,QAASkoD,GAAmB7xD,GACxB6rB,EAAoBgmC,mBAAmB7xD,GAAIS,KACvC,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASioD,GAAmB37C,GAExB4V,EAAoB+lC,mBAAmB37C,EAAKjW,OAAS0C,KAAMuT,EAAKvT,OAAOjC,KACnE,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GA9DjB,GAAI1F,GAAKC,IACTD,GAAGT,aACHS,EAAG8uB,iBACH9uB,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAASo4B,IAEb16B,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASwgB,EACZ9yD,EAAAA,UAAYgzD,EACZhzD,EAAGuJ,OAASwpD,EACZ/yD,EAAG2H,UAAYA,EAiHnBsrD,EAAuB1yD,SAAW,WAAY,OAAQ,gBAAiB,sBAAuB,QApI9F1B,QACKC,OAAO,OACPK,WAAW,yBAA0B8zD,MAyE9C,WACI,YAEAp0D,SACKC,OAAO,6BAWhB,WACI,YAOA,SAASo0D,GAAsB/iB,GAe3B,QAASsP,GAAQ96C,GACb,MAAOwrC,GAAekF,EAAO,QAAQxQ,IAAIlgC,GAG7C,QAASwuD,GAAOhyD,GACZ,MAAOgvC,GAAekF,EAAO,QAAQtE,QAAQ5vC,GAGjD,QAASiyD,GAAUjyD,GACf,MAAOgvC,GAAekF,EAAO,WAAtBlF,UAAwChvC,GAGnD,QAASoI,GAAOpI,EAAIkE,GAChB,MAAO8qC,GAAekF,EAAO,WAAWG,IAAIr0C,EAAIkE,GAGpD,QAASitC,GAAOjtC,GACZ,MAAO8qC,GAAekF,EAAO,UAAUzE,KAAKvrC,GAGhD,QAASguD,KACL,MAAOljB,GAAekF,EAAO,aAAaxQ,MAG9C,QAASyuB,KACL,MAAOnjB,GAAekF,EAAO,YAAYxQ,MAG7C,QAAS0uB,KACL,MAAOpjB,GAAekF,EAAO,oBAAoBxQ,MA3CrD,GAAIwQ,GAAO,kBACFlF,GAAekF,EACxB,QACIme,sBAAuB/T,EACvBgU,kBAAmBN,EACnBO,qBAAsBphB,EACtBqhB,qBAAsBpqD,EACtBqqD,qBAAsBR,EAEtBC,aAAcA,EACdC,YAAaA,EACbC,oBAAqBA,GAoH7BL,EAAsB3yD,SAAW,kBArIjC1B,QACKC,OAAO,uBACPmyC,QAAQ,wBAAyBiiB,MAyD1C,WACI,YAOA,SAAShiB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,wBACHxE,WAAY,2BACZE,aAAc,KACdL,YAAa,sDACbuoB,IAAK,qBAGb6pB,EAAmBC,KAAK,6BAA8B,oBAwH1DH,EAAY3wC,SAAW,iBAAkB,sBAtIzC1B,QACKC,OAAO,uBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS2iB,GAAyB5sD,EAAUvG,EAAM4C,EAAMtB,EAAekxD,GA4BnE,QAASryD,KACLH,EAAKrC,IAAI2B,EAAGI,OACZkzD,IACAD,IACAE,IAGJ,QAASO,GAASC,GACd,IAAK,GAAIvrD,GAAI,EAAGA,EAAIxI,EAAG6sD,MAAMpkD,OAAQD,IACjC,GAAIxI,EAAG6sD,MAAMrkD,GAAG3G,QAAUkyD,EACtB,MAAO/zD,GAAG6sD,MAAMrkD,GAAGpI,KAC3B,OAAO,qBAGX,QAASozD,GAAsB3tC,GAC3B,GAAIlhB,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QAKlB,OAHAnnB,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEvBqxD,EAAsBM,sBAAsB7uD,GAAQ/C,KACvD,SAAUhE,GAGN,MAFAoC,GAAGg0D,gBAAkBp2D,EAAOA,EAAK8H,WACjCmgB,EAAQS,MAAM1oB,EAAK2oB,eACZvmB,EAAGg0D,kBAMtB,QAASN,KACL,GAAIO,IAAkBpyD,MAAO7B,EAAG6B,MAAOkyD,UAAW/zD,EAAG+zD,UACrDb,GAAsBQ,qBAAqBO,GAAgBryD,KAAK,WAC5D0B,EAAKoB,MAAM,WACX1E,EAAG6B,MAAQ,KACX7B,EAAG+zD,UAAY,KACf/zD,EAAGoC,YAAY0I,WAKvB,QAAS8oD,GAAqBzyD,GAC1B8F,IAAWrF,KAAK,WACZsxD,EAAsBU,qBAAqBzyD,GAAIS,KAC3C,WACI5B,EAAGoC,YAAY0I,aAK/B,QAAS6oD,GAAqBv8C,GAE1B87C,EAAsBS,qBAAqBv8C,EAAKjW,IAAKU,MAAOuV,EAAKvV,MAAOkyD,UAAW38C,EAAK28C,YAAYnyD,KAChG,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASuoD,KACL,MAAOH,GAAsBG,eAAezxD,KACxC,SAAUhE,GAEN,MADAoC,GAAG8uD,OAAO1uD,MAAQxC,EAAOA,KAClBoC,EAAG8uD,OAAO1uD,QAK7B,QAASkzD,KACL,MAAOJ,GAAsBI,cAAc1xD,KACvC,SAAUhE,GAEN,MADAoC,GAAG8uD,OAAOttB,KAAO5jC,EAAOA,KACjBoC,EAAG8uD,OAAOttB,OAK7B,QAAS+xB,KACL,MAAOL,GAAsBK,sBAAsB3xD,KAC/C,SAAUhE,GAEN,MADAoC,GAAG8uD,OAAOoF,aAAet2D,EAAOA,KACzBoC,EAAG8uD,OAAOoF,eA7G7B,GAAIl0D,GAAKC,IACTD,GAAGT,aACHS,EAAG6sD,QACEzsD,MAAS,gBAAiByB,MAAO,UACjCzB,MAAS,iBAAkByB,MAAO,SAClCzB,MAAS,aAAcyB,MAAO,iBAEnC7B,EAAGg0D,mBACHh0D,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASkxD,IAEbxzD,EAAGI,MAAQ,6BACXJ,EAAG+nB,WAAY,EACf/nB,EAAG8uD,QACC1uD,SACAohC,QACA0yB,iBAEJrzD,IACAb,EAAGsyC,OAASohB,EACZ1zD,EAAAA,UAAY4zD,EACZ5zD,EAAGuJ,OAASoqD,EACZ3zD,EAAG8zD,SAAWA,EA0GlBD,EAAyBtzD,SAAW,WAAY,OAAQ,OAAQ,gBAAiB,yBAvIjF1B,QACKC,OAAO,uBACPK,WAAW,2BAA4B00D,MA2HhD,WACI,YAEAh1D,SACKC,OAAO,2BAShB,WACI,YAOA,SAASoyC,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,sBACHxE,WAAY,yBACZE,aAAc;AACdL,YAAa,kDACbuoB,IAAK,mBAGb6pB,EAAmBC,KAAK,2BAA4B,kBA0HxDH,EAAY3wC,SAAW,iBAAkB,sBAxIzC1B,QACKC,OAAO,qBACPwyC,OAAOJ,MAmBhB,WACI,YAOA,SAASttB,GAAoBusB,GAezB,QAAS8R,GAAU39B,GACf,MAAO6rB,GAAekF,EAAO,aAAaG,IAAI,KAAMlxB,GAGxD,QAASgF,GAAahF,GAClB,MAAO6rB,GAAekF,EAAO,iBAAiBG,IAAI,KAAMlxB,GAG5D,QAAS0D,GAAO1D,EAAY3f,GACxB,MAAOwrC,GAAekF,EAAO,UAAUG,IAAI,KAAMlxB,EAAY3f,GAvBjE,GAAI0wC,GAAO,yBACPgd,EAAMliB,EAAekF,EACzB,QACI8e,gBAAiB9B,EAAIthB,QACrBqjB,mBAAoB/B,EAAIzhB,KACxByjB,mBAAoBhC,EAAI7c,IACxB8e,mBAAoBjC,EAAAA,UACpBpQ,UAAWA,EACX34B,aAAcA,EACdtB,OAAQA,GA0HhBpE,EAAoBrjB,SAAW,kBAzI/B1B,QACKC,OAAO,qBACPmyC,QAAQ,sBAAuBrtB,MAkCxC,WACI,YAOA,SAAS2wC,GAAuBttD,EAAUvG,EAAMsB,EAAe4hB,EAAqBoJ,EAAqB1pB,GAqBrG,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZk6B,IAGJ,QAASk6B,GAAoB3uC,GACzB7lB,EAAGgoB,OAAOysC,eAAiBz0D,EAAGgoB,OAAO44B,aAAe5gD,EAAGgoB,OAAO44B,aAAaz/C,GAAK,IAChF,IAAIwD,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QAKlB,OAHAnnB,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAEvB+hB,EAAoBoE,OAAOhoB,EAAGgoB,OAAQrjB,GAAQ/C,KACjD,SAAUhE,GAGN,MAFAoC,GAAG00D,cAAgB92D,EAAOA,EAAK8H,WAC/BmgB,EAAQS,MAAM1oB,EAAK2oB,eACZvmB,EAAG00D,gBAMtB,QAASN,KACLxwC,EAAoBwwC,mBAAmBp0D,EAAG20D,cAAc/yD,KAAK,WACzD0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,WAKvB,QAASwpD,GAAmB9yB,GACxB5d,EAAoB0wC,mBAAmB9yB,GAAM5/B,KACzC,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASupD,GAAmBj9C,GAExBwM,EAAoBywC,mBAAmBj9C,EAAKoqB,KAAMpqB,GAAMxV,KACpD,WACI5B,EAAGoC,YAAY0I,WAK3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GAGjB,QAAS40B,KACLtN,EAAoB0N,sBAAsB94B,KACtC,SAAUhE,GAEN,MADAoC,GAAG8uB,cAAgBlxB,IAASuD,GAAI,KAAM0C,KAAM,QAAQ/B,OAAOlE,MACpDoC,EAAG8uB,gBAItB,QAAS8lC,KACL50D,EAAGoC,YAAY2jB,KAAK,GACpB/lB,EAAGoC,YAAY0I,SApFnB,GAAI9K,GAAKC,IACTD,GAAGT,aACHS,EAAG00D,iBACH10D,EAAG20D,gBACH30D,EAAGgoB,UACHhoB,EAAGoC,YAAc,GAAIJ,OACjBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAASkyD,IAEbx0D,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAAS8hB,EACZp0D,EAAAA,UAAYs0D,EACZt0D,EAAGuJ,OAAS8qD,EACZr0D,EAAG2H,UAAYA,EACf3H,EAAG40D,eAAiBA,EAoHxBL,EAAuBh0D,SAAW,WAAY,OAAQ,gBAAiB,sBAAuB,sBAAuB,QA1IrH1B,QACKC,OAAO,qBACPK,WAAW,yBAA0Bo1D,MAkG9C,WACI,YAOA,SAAS1zB,GAAgBsP,GAwBrB,QAAS/O,GAAuBjgC,EAAIuX,GAChC,GAAI6O,GAAM8tB,EAAOl0C,EAAK,iCAAmCuX,CACzD,OAAOy3B,GAAe5oB,GAAKqpB,OAG/B,QAASzO,GAAmChhC,EAAIwD,GAC5C,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,+BACtB,OAAOgvC,GAAe5oB,GAAKqpB,QAASjsC,GAGxC,QAASu9B,GAAgC/gC,EAAIwD,GACzC,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,4BACtB,OAAOgvC,GAAe5oB,GAAKqpB,QAASjsC,GAG3C,QAASy9B,GAAiCjhC,EAAIwD,GAC7C,GAAI4iB,GAAM8tB,EAAOl0C,EAAK,6BACtB,OAAOgvC,GAAe5oB,GAAKqpB,QAASjsC,GAGrC,QAASkwD,GAAoB1zD,GAC5B,GAAIomB,GAAM8tB,EAAOl0C,EAAK,sBACtB,OAAOgvC,GAAe5oB,GAAKiuB,MA7CzB,GAAIH,GAAO,YACPzvC,EAAWuqC,EAAekF,EAC9B,QACIyf,gBAAiBlvD,EAASi/B,IAC1BtD,gBAAiB37B,EAASmrC,QAC1BgkB,eAAgBnvD,EAASgrC,KACzBokB,eAAgBpvD,EAASgrC,KACzBqkB,oBAAqB9kB,EAAekF,EAAO,cAAczE,KACzDskB,uBAAwB/kB,EAAekF,EAAO,iBAAiBzE,KAClEukB,qBAAsBhlB,EAAekF,EAAO,eAAezE,KACxD1V,eAAgBt1B,EAAS4vC,IACzB4f,eAAgBxvD,EAAAA,UAChByvD,kBAAmBllB,EAAekF,EAAO,qBAAqBxQ,IAC9DzD,uBAAwBA,EACxBe,mCAAoCA,EACvCC,iCAAkCA,EAClCF,gCAAiCA,EACjC2yB,oBAAqBA,GAoH1Bh0B,EAAgBtgC,SAAW,kBA3I3B1B,QACKC,OAAO,gBACPmyC,QAAQ,kBAAmBpQ,MA2DpC,WACI,YAOA,SAASqQ,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,sBACHxE,WAAY,yBACZE,aAAc,KACdL,YAAa,6CACb0e,SACIm+B,IAAA,YAAI,SAAUl8C,GACV,MAAOA,GAAU2H,cAGzB3C,QACIogB,gBAAiBuwC,SAAS,GAC1BC,aAAcD,SAAS,GACvB/wC,kBAAmB+wC,SAAS,GAC5B9wC,gBAAiB8wC,SAAS,GAC1BE,mBAAoBF,SAAS,GAC7BG,mBAAoBH,SAAS,GAC7BhwC,oBAAqBgwC,SAAS,GAC9B1hD,WAAY0hD,SAAS,GACrB1tC,aAAc0tC,SAAS,GACvB1U,cAAe0U,SAAS,GACxB3xB,qBAAsB2xB,SAAS,GAC/BI,eAAgBJ,SAAS,GACzBvvC,MAAOuvC,SAAS,GAChB93C,MAAO83C,SAAS,GAChB3oD,MAAO2oD,SAAS,IAEpB/tC,IAAK,oOAER5jB,MAAM,yBACNxE,WAAY,iCACZE,aAAc,UACdL,YAAa,6EACb0e,SACCvc,IAAA,eAAI,SAAUc,GACb,MAAOA,GAAa0f,aAErBlhB,kBAAmB,WAClB,MAAO,OAERuoB,eAAgB,WACf,OAAO,IAGTrkB,QACCgd,YAAa2zC,SAAS,IAEvB/tC,IAAK,mCAER5jB,MAAM,+BACN4jB,IAAK,uCACCouC,SAAU,eAAgB,SAAU,YAAY,UAC5C,SAAU1zD,EAAcyf,EAAQxG,EAAUmf,GACtC,GAAI/c,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOc,GAAa0f,cAIhCrE,GAAcK,OAAO/b,KACjB,WACIy4B,EAAQ2V,QAAQC,aAIxCmB,EAAmBC,KAAK,uBAAwB,cA+DpDH,EAAY3wC,SAAW,iBAAkB,sBA5IzC1B,QACKC,OAAO,OACPwyC,OAAOJ,MAkFhB,WACI,YAOA,SAAS0kB,GAAmB3uD,EAAU+nB,EAAItN,EAAQhhB,EAAMuB,EAAeqB,GAUnE,QAASkc,KACL9e,EAAKqgC,MAAM,wCACX/gC,EAAGkiB,YAAYjgB,EAAaigB,YAC5BliB,EAAGmoD,aAAezmC,EAAOU,SAASve,KAGtC,QAASukD,GAASD,GAGd,MAFA/pD,SAAQC,IAAI,kBAAkB8pD,GAC9B/pD,QAAQC,IAAI,qBAAqBqjB,EAAOU,UACjCV,EAAOU,SAASve,MAAQskD,EAlBnC,GAAInoD,GAAKC,IAETD,GAAGooD,SAAWA,EAGd5oC,IAkIJo2C,EAAmBr1D,SAAW,WAAY,KAAM,SAAU,OAAQ,eAAgB,QA7IlF1B,QACKC,OAAO,gBACPK,WAAW,qBAAsBy2D,MA8B1C,WACI,YAOA,SAASC,GAAuB7zD,EAAetB,EAAMuC,EAAS44C,EAAI3gC,EAAW2lB,EAAiBv9B,EAAMrB,EAAcyf,EAAQiC,EAAeC,EACzGuU,EAA6B/mB,EAAwBjO,EAAiBxD,EAAWqvB,EAAI8mC,EAAsBvW,EAAa77B,GA8CpJ,QAAS7iB,KAaL,QAASkzC,KACDr+B,SAASC,eAAe,cACpBD,SAASnC,KAAK0gC,UAAY,IAAMv+B,SAASw+B,gBAAgBD,UAAY,GACrEv+B,SAASC,eAAe,YAAY82B,MAAM0H,QAAU,QAEpDz+B,SAASC,eAAe,YAAY82B,MAAM0H,QAAU,QAjBhEzzC,EAAKsZ,KAAK,6BAEVsmC,IACA3gD,EAAU2H,WAAW1F,KAAK,SAAUhE,GAChCoC,EAAGgkB,YAAcpmB,EACjBoC,EAAGskB,WAAWsD,eACe,UAAzB5nB,EAAGgkB,YAAY5P,OAAqBpU,EAAGgkB,YAAYne,UAAU7F,EAAGskB,WAAWsD,YAAYxmB,KAAKpB,EAAGgkB,YAAYne,SAAS1E,MAE5HmU,OAAO++B,SAAW,WACdN,KAaJ/kB,EAAG8D,KAAKvhB,IAA0B+C,MAAmB1S,KAAK,WACtDjC,EAAU2H,WAAW1F,KAAK,SAAUoiB,GAEN,UAAtBA,EAAY5P,QACZpU,EAAGskB,WAAWkxC,kBAAoBx1D,EAAGskB,WAAWkxC,mBAAqB,KAEzE,IAAIO,KACA9zD,GAAa8jB,OAAMgwC,EAAchwC,KAAO9jB,EAAa8jB,MACrD9jB,EAAaub,OAAMu4C,EAAc/vC,MAAQ/jB,EAAaub,MAC1Dxd,EAAGoC,YAAc,GAAIJ,GAAc+zD,GAC/B1zD,QAAS,EAAG,GAAI,GAAI,GAAI,KACxBC,QAAS0yD,QAMzB,QAAS7mB,KACL,GAAIluB,GAAOjgB,EAAG8iB,UAAUra,SAAWzI,EAAG8iB,UAAUiU,OAAO,SAAUne,GAC7D,MAAOA,GAAE6J,WACVha,MACHzI,GAAG8iB,UAAUxhB,QAAQ,SAAUsX,GAC3BA,EAAE6J,UAAYxC,IAQtB,QAAS+0C,GAAenvC,GA+GpB,QAASsK,GAAc1d,GAKnB,MAJAzS,GAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC7D9lB,EAAGwmB,gBAAkB,EACrBxmB,EAAG6tB,YAAc,EACjB7tB,EAAG+F,SAAU,EACN0M,EAGX,QAASjN,GAAgB5H,GACrB,GAAIA,EAAM,CACNioB,EAAQS,MAAM1oB,EAAKmoB,KAAKQ,eACxBvmB,EAAGwmB,gBAAkB5oB,EAAKmoB,KAAKQ,cAC/BvmB,EAAG6tB,YAAcjwB,EAAKo4D,UAAUnoC,WAChC,IAAIpH,GAAwB5nB,QAAQd,QAAQ2X,SAASC,eAAe,2BAEhE3V,GAAG0mB,YAAa1mB,EAAG0mB,aAAc,EAChChD,EAAUiD,gBAAgBF,EAAuBG,EAAQC,GAC9D7mB,EAAG8iB,UAAYllB,EAAKmoB,KAAKrgB,QAY7B,MAHA1F,GAAG8mB,UAAYnc,KAAKE,MAAMoJ,SAAS8S,KAAKjB,GAAa,KAAQ,SAC7D9lB,EAAG+F,SAAU,EAEN/F,EAAG8iB,UA3Id,GAAIgD,GAAY7R,QAKhB,IAJAjU,EAAG+F,SAAU,EAITkwD,EACAA,GAAY,EACZpwC,EAAQE,KAAK,OACV,CACH,IAAImwC,EAEC,CACDA,GAAiB,CAEjB,IAAIC,GAAkBt3D,QAAQ6E,KAAK0yD,EAQnC,OAPAD,GAAgBpwC,KAAOF,EAAQE,OAC/BowC,EAAgB34C,KAAOqI,EAAQG,YAE/BtE,GAAOO,GAAGP,EAAOU,SAAU+zC,GAAiBv0D,KAAK,WAC7Cw0D,EAAcD,EACdn2D,EAAGoC,YAAY0I,WAVnBorD,GAAiB,EAkBzB,GAAIvxD,IACAohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QACdrZ,KAAMypD,EAAYzpD,KAAOypD,EAAYzpD,KAAO,oBAoBhD,IAjBA9N,QAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,IAI9B7B,EAAGskB,WAAWS,eAAiBqxC,EAAYrxC,eAC3C/kB,EAAGskB,WAAWixC,YAAca,EAAYb,YAExCv1D,EAAGukB,iBAAmB6xC,EAAY7xC,iBAClCvkB,EAAGskB,WAAWC,iBAAmBvkB,EAAGukB,iBACpCvkB,EAAGwkB,eAAiB4xC,EAAY5xC,eAChCxkB,EAAGskB,WAAWE,eAAiBxkB,EAAGwkB,eAElCxkB,EAAGskB,WAAWkxC,kBAAoBY,EAAYZ,kBAC9Cx1D,EAAGskB,WAAWmxC,kBAAoBW,EAAYX,kBAE9Cz1D,EAAGskB,WAAWgB,sBACV8wC,EAAY9wC,mBAAoB,CAChC,GAAI+wC,GAAQD,EAAY9wC,mBAAmBlV,MAAM,IACjDpQ,GAAGskB,WAAWgB,sBACd+wC,EAAM/0D,QAAQ,SAAUH,GACpBnB,EAAGskB,WAAWgB,mBAAmBlkB,KAAK+d,SAAShe,EAAI,KACnDnB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BhG,SAAShe,KAAQgkB,EAAGhkB,KACpBgkB,EAAG1C,UAAW,OAO9B,GADAziB,EAAGskB,WAAW1Q,aACVwiD,EAAYxiD,UAAW,CACvB,GAAI0iD,GAASF,EAAYxiD,UAAUxD,MAAM,IACzCkmD,GAAOh1D,QAAQ,SAAUi1D,GACrBv2D,EAAGskB,WAAW1Q,UAAUxS,KAAKm1D,GAC7Bv2D,EAAG4T,UAAUtS,QAAQ,SAAUk1D,GACvBD,IAASC,EAAG30D,QACZ20D,EAAG/zC,UAAW,OAK9B,GAAI2zC,EAAYxuC,YAAa,CACzB,GAAI6uC,GAAOL,EAAYxuC,YAAYxX,MAAM,IACzCpQ,GAAGskB,WAAWsD,eACd6uC,EAAKn1D,QAAQ,SAAUH,GACnBnB,EAAGskB,WAAWsD,YAAYxmB,KAAK+d,SAAShe,EAAI,OAmBpD,OAhBAnB,EAAGskB,WAAWs8B,aAAewV,EAAYxV,aACzC5gD,EAAGskB,WAAWqf,oBAAsByyB,EAAYzyB,oBAGd,SAA9ByyB,EAAYV,eAA4BU,EAAYV,iBAAkB,EACtE11D,EAAGskB,WAAWoxC,eAAgB,EAE9B11D,EAAGskB,WAAWoxC,cAAgB78C,OAElCha,QAAQyC,QAAQtB,EAAGskB,WAAY,SAAUziB,EAAO1B,GAC9B,KAAV0B,IACA7B,EAAGskB,WAAWnkB,GAAO,QAKrB07C,EAAGznC,OACP,IAAK,QACD,MAAOysB,GAAgBo0B,oBAAoBj1D,EAAGskB,WAAY3f,GAAQ/C,KAAK4D,EAAiB2qB,EAC5F,KAAK,WACD,MAAO0Q,GAAgBq0B,uBAAuBl1D,EAAGskB,WAAY3f,GAAQ/C,KAAK4D,EAAiB2qB,EAC/F,KAAK,SACD,MAAO0Q,GAAgBs0B,qBAAqBn1D,EAAGskB,WAAY3f,GAAQ/C,KAAK4D,EAAiB2qB,EAC7F,SACI7sB,EAAKoB,MAAM,QAAS,mEAoChC,QAAS6M,KACL,MAAOH,GAAuBG,yBAAyB3P,KACnD,SAAUhE,GAEN,MADAoC,GAAG4S,iBAAmBhV,EAAOA,KACtBoC,EAAG4S,mBAKtB,QAAS0B,KACL,OAAQunC,EAAGznC,OACP,IAAK,QACD,MAAOjR,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,KAAUkE,OAAOlE,MACzBoC,EAAG6G,WAEtB,KAAK,WACD7G,EAAG02D,sBAAuB,EAC1B12D,EAAG6G,WAAag1C,EAAGh2C,WAU/B,QAAS0O,KACLvU,EAAGskB,cACHtkB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBziB,EAAG4T,UAAUtS,QAAQ,SAAU6jB,GACvBA,EAAG1C,WACH0C,EAAG1C,UAAW,KAEtBuF,IAGJ,QAASA,KAELiuC,GAAY,CACZ,IAAItxD,KACJA,GAAOogB,eAAiBjD,EAAQ9hB,EAAGskB,WAAWS,gBAC9CpgB,EAAO4wD,YAAcv1D,EAAGskB,WAAWixC,YAEnC5wD,EAAO4f,iBAAmBvkB,EAAGukB,iBAC7B5f,EAAO6f,eAAiBxkB,EAAGwkB,eAE3B7f,EAAO6wD,kBAAoBx1D,EAAGskB,WAAWkxC,kBACzC7wD,EAAO8wD,kBAAoBz1D,EAAGskB,WAAWmxC,kBAWzC9wD,EAAO2gB,mBAAqB,GAC5BtlB,EAAG4S,iBAAiBtR,QAAQ,SAAU6jB,GAC9BA,EAAG1C,WACH9d,EAAO2gB,oBAAsBH,EAAGhkB,GAAK,OAE7CwD,EAAO2gB,mBAAqB3gB,EAAO2gB,mBAAmB7c,OAAS9D,EAAO2gB,mBAAmBvL,OAAO,EAAGpV,EAAO2gB,mBAAmB7c,OAAS,GAAK,GAW3I9D,EAAOiP,UAAY,GACnB5T,EAAG4T,UAAUtS,QAAQ,SAAUk1D,GACvBA,EAAG/zC,WACH9d,EAAOiP,WAAa4iD,EAAG30D,MAAQ,OAEvC8C,EAAOiP,UAAYjP,EAAOiP,UAAUnL,OAAS9D,EAAOiP,UAAUmG,OAAO,EAAGpV,EAAOiP,UAAUnL,OAAS,GAAK,GAEnGzI,EAAGskB,WAAWsD,aAAe5nB,EAAGskB,WAAWsD,YAAYnf,QACvD9D,EAAOijB,YAAc,GACrB5nB,EAAGskB,WAAWsD,YAAYtmB,QAAQ,SAAUH,GACxCwD,EAAOijB,aAAezmB,EAAK,MAE/BwD,EAAOijB,YAAcjjB,EAAOijB,YAAY7N,OAAO,EAAGpV,EAAOijB,YAAYnf,OAAS,IAE9E9D,EAAOijB,YAAc,KAEzBjjB,EAAOi8C,aAAe5gD,EAAGskB,WAAWs8B,aACpCj8C,EAAOg/B,oBAAsB3jC,EAAGskB,WAAWqf,oBAEvC3jC,EAAGskB,WAAWoxC,cACd/wD,EAAO+wD,eAAgB,EAEvB/wD,EAAO+wD,cAAgB78C,OAE3BlU,EAAOohB,KAAO,EACdphB,EAAO6Y,KAAOxd,EAAGoC,YAAY4jB,QAE7BtE,EAAOO,GAAGP,EAAOU,SAAUzd,GAAQ/C,KAAK,WACpCw0D,EAAczxD,EACd3E,EAAGoC,YAAY0I,WAKvB,QAASqd,GAAUhnB,GAKf,GAJA/C,QAAQC,IAAI,QAAS8C,GACrBnB,EAAG22D,kBAAoB32D,EAAG8iB,UAAUiU,OAAO,SAAUnxB,GACjD,MAAOA,GAAS6c,YAEfthB,IAAOnB,EAAG22D,kBAAkBluD,OAE7B,WADAnF,GAAKoB,MAAM,QAAS,6CAIxB,IAAI4Y,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,mEACbG,WAAY,gBACZE,aAAc,gBACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEXinB,YAAa,WACT,MAAOpoB,GAAG22D,kBAAkBr+C,IAAI,SAAUmC,GACtC,MAAOA,GAAEtZ,QAMzBmc,GAAcK,OAAO/b,KACjB,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASie,GAAiB5nB,EAAI6nB,GAC1B,GAAI1L,GAAgBpC,EAAU3F,MAC1BgI,WAAW,EACXve,YAAa,6EACbG,WAAY,iCACZE,aAAc,UACdme,KAAM,KACNE,SACIvc,GAAI,WACA,MAAOA,IAEX6nB,eAAgB,WACZ,MAAOA,MAKnB1L,GAAcK,OAAO/b,KACjB,WACI5B,EAAGoC,YAAY0I,UAEnB,cAWR,QAAS8rD,GAAkBhxD,GACvBA,EAAS8vD,eAAiB9vD,EAAS8vD,cACnC70B,EAAgBg0B,oBAAoBjvD,EAASzE,IAAIS,KAAK,cAI1D,QAASi1D,KACL,GAAI1qB,GAAM,EACNtlB,EAAW,GACfnD,GAAUozC,kBAAkB3qB,EAAKtlB,GAAUjlB,KAAK,cAKpD,QAASm1D,GAAgB9vC,GAErB,GAAItiB,IACAsiB,WAAYA,EACZC,eAAgBlnB,EAAGskB,WAGvBX,GAAc0D,gBAAgB1iB,GAAQ/C,KAAK,SAAU0lB,GAEjD,GADAtnB,EAAG+F,SAAU,EACTkhB,EAAY,CACZ,GAAIM,GAAM,0CAA4CD,CACtDlpB,SAAQC,IAAIkpB,GACZ5D,EAAc6D,iBAAiBD,GAC/BjkB,EAAKoB,MAAM,OAAQ,kCAK/B,QAAS47C,KACLf,EAAYe,cAAc1+C,KAAK,SAAUhE,GACrCoC,EAAGmiD,SAAWvkD,QAItB,QAASo5D,GAA4Bx1B,GACjC,GAAI78B,IACAohB,KAAM,EACNvI,KAAM,GACNgkB,KAAMA,EAAOA,EAAO,GAExBrJ,GAA4Bi6B,2CAA2CztD,GAAQ/C,KAAK,SAAUhE,GAC1FoC,EAAGkiD,UAAYtkD,EAAK8H,cAI5B,QAAS0jB,GAAaC,GAClB,MAAOzF,GAAoBq+B,WAAW/iD,MAAOmqB,IAAIznB,KAAK,SAAUhE,GAE5D,MADAoC,GAAGupB,MAAQ3rB,MACJoC,EAAGupB,QA1dlB,GAAIvpB,GAAKC,IAETD,GAAG0mB,aAAc,EACjB1mB,EAAGskB,cACHtkB,EAAG4S,oBACH5S,EAAG6G,aACH7G,EAAG4T,UAAYtQ,EAAKuQ,SAAS,aAC7B7T,EAAG8iB,aACH9iB,EAAGupB,SACHvpB,EAAGmiD,YACHniD,EAAG22D,qBACH32D,EAAGkiD,aACHliD,EAAGi3D,mBACEz1B,KAAM,KAAMphC,MAAO,gBACnBohC,KAAM,OAAQphC,MAAO,mBACrBohC,KAAM,OAAQphC,MAAO,cAE1BJ,EAAGk3D,6BACEzwD,OAAS,uBAAwBrG,MAAO,oBACxCqG,OAAQ,mBAAoBrG,MAAO,uBACnCqG,OAAQ,sBAAuBrG,MAAO,uBAE3C,IAAI61D,IAAY,EACZn0C,EAAU7e,EAAQ,WAClB4jB,EAAW,IACXD,EAAS,EAGb5mB,GAAGmoB,UAAYA,EACfnoB,EAAG+oB,iBAAmBA,EACtB/oB,EAAGuU,aAAeA,EAClBvU,EAAGgoB,OAASA,EACZhoB,EAAG62D,UAAYA,EACf72D,EAAG2pB,YAAcrmB,EAAKsmB,eACtB5pB,EAAG42D,kBAAoBA,EACvB52D,EAAGmuC,UAAYA,EACfnuC,EAAG+2D,gBAAkBA,EACrB/2D,EAAGopB,aAAeA,EAClBppB,EAAGsgD,YAAcA,EACjBtgD,EAAGg3D,4BAA8BA,EAEjCn2D,GAsDA,IAAIu1D,GAAcn0D,EACdi0D,GAAiB,EAuCzBL,EAAuBt1D,SAAW,gBAAiB,OAAQ,UAAW,KAAM,YAAa,kBAAmB,OAAQ,eAAgB,SAAU,gBAAiB,sBAAuB,8BAA+B,yBAA0B,kBAAmB,YAAa,KAAM,uBAAwB,cAAe,aA9I5T1B,QACKC,OAAO,gBACPK,WAAW,yBAA0B02D,MAoe9C,WACI,YAEAh3D,SACKC,OAAO,sBAYhB,WACI,YAOA,SAAS0N,GAAgB2jC,GASrB,QAASt0B,GAAmBlX,GACxB,MAAOwrC,GAAekF,EAAO,uBAAuBxQ,IAAIlgC,GAG5D,QAAS+I,GAAmB/I,GACxB,MAAOwrC,GAAekF,EAAO,uBAAuBxQ,IAAIlgC,GAO5D,QAASyR,GAAuBzR,GAC5B,MAAOwrC,GAAekF,EAAO,uBAAuBxQ,IAAIlgC,GArB5D,GAAI0wC,GAAO,WACX,QACIx5B,mBAAmBA,EACnBwZ,qBAAsB8a,EAAekF,EAAO,yBAAyBxQ,IACrEn3B,mBAAoBA,EACpB0I,uBAAwBA,GAoIhC5J,EAAgBjM,SAAW,kBA/I3B1B,QACKC,OAAO,gBACPmyC,QAAQ,kBAAmBzkC,MAkCpC,WACI,YAEA3N,SACKC,OAAO,uBAYhB,WACI,YAOA,SAASwgB,GAAiB6wB,GAiBtB,QAASne,KACL,MAAOme,GAAekF,EAAO,uBAAuBxQ,MAjBxD,GAAIwQ,GAAO,sBAEP8hB,EAAMhnB,EAAekF,EACzB,QACIl1B,gBAAiBg3C,EAAItyB,IACrBuyB,aAAcD,EAAIpmB,QAClBsmB,gBAAiBF,EAAIvmB,KACrB0mB,gBAAiBH,EAAI3hB,IACrB+hB,gBAAiBJ,EAAAA,UAEjBnlC,oBAAqBA,GAgI7B1S,EAAiB/e,SAAW,kBAhJ5B1B,QACKC,OAAO,iBACPmyC,QAAQ,mBAAoB3xB,MA4BrC,WACI,YAOA,SAAS4xB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,kBACHxE,WAAY,sBACZE,aAAc,KACdL,YAAa,0CACbuoB,IAAK,eAGb6pB,EAAmBC,KAAK,uBAAwB,cAmIpDH,EAAY3wC,SAAW,iBAAkB,sBAjJzC1B,QACKC,OAAO,iBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASsmB,GAAoB92D,EAAM4e,EAAkBtd,EAAeiF,EAAU3D,GAuB1E,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ+f,IAGJ,QAASA,KACL,MAAOb,GAAiBa,kBAAkBve,KACtC,SAAUhE,GAGN,MAFAoC,GAAGwlB,UAAY5nB,EAAOA,KAEfoC,EAAGwlB,YAKzB,QAAS8sB,KACR,GAAKtyC,EAAG0F,QAAR,CAEM,GAAI8f,IACH9f,QAAS1F,EAAG0F,QACTqyC,QAAS/3C,EAAG+3C,QAEhB,OAAOz4B,GAAiB+3C,gBAAgB7xC,GAAW5jB,KAC/C,SAAUhE,GAMN,MALA0F,GAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGoC,YAAY0I,SACf9K,EAAG0F,QAAU,GACb1F,EAAG+3C,SAAU,EACNn6C,KAgBnB,QAAS2L,GAAO6N,GACZkI,EAAiBg4C,gBAAgBlgD,EAAKjW,GAAIiW,GAAMxV,KAC5C,WACI0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAGoC,YAAY0I,WAI9B,QAAS2sD,GAAergD,GACvBA,EAAK2gC,SAAW3gC,EAAK2gC,QACrBxuC,EAAO6N,GAGL,QAASzP,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAG0F,QAAU,GAGpB,QAASiK,GAAWrG,GACG,KAAlBA,EAAMuG,SACTyiC,IAvFC,GAAItyC,GAAKC,IACTD,GAAGI,MAAQ,uBACXJ,EAAG+nB,WAAY,EACf/nB,EAAGwlB,aACNxlB,EAAG+3C,SAAU,EACV/3C,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS6d,IAEbngB,EAAG0F,QAAU,GAEb1F,EAAGsyC,OAASA,EACZtyC,EAAGuJ,OAASA,EACfvJ,EAAGy3D,eAAiBA,EAEjBz3D,EAAG2H,UAAYA,EAClB3H,EAAG2P,WAAaA,EAEb9O,IA0HJ22D,EAAoBj3D,SAAW,OAAQ,mBAAoB,gBAAiB,WAAY,QAlJxF1B,QACKC,OAAO,OACPK,WAAW,sBAAuBq4D,MAmG3C,WACI,YAEA34D,SACKC,OAAO,oBAYhB,WACI,YAOA,SAAS+kB,GAAcssB,GACnB,GAAIkF,GAAO,mBACP+a,EAAKjgB,EAAekF,EACxB,QACI7jC,eAAgB4+C,EAAGvrB,IACnB6yB,eAAgBvnB,EAAekF,EAAO,UAAUzE,KAChD+mB,UAAWvH,EAAGrf,QACd6mB,aAAcxH,EAAGxf,KACjBinB,aAAczH,EAAG5a,IACjBsiB,aAAc1H,EAAAA,WAqItBvsC,EAActjB,SAAW,kBAnJzB1B,QACKC,OAAO,cACPmyC,QAAQ,gBAAiBptB,MAqBlC,WACI,YAOA,SAASqtB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,eACHxE,WAAY,mBACZE,aAAc,KACdL,YAAa,oCACbuoB,IAAK,YAGb6pB,EAAmBC,KAAK,oBAAqB,WAsIjDH,EAAY3wC,SAAW,iBAAkB,sBApJzC1B,QACKC,OAAO,cACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAAS6mB,GAAiB9wD,EAAUvG,EAAMsB,EAAemB,EAAiB0gB,EAAevgB,GAmBrF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OACZ+U,IAGP,QAAS3D,GAAeqU,GACvB,GAAIlhB,IACHohB,KAAMF,EAAQE,OAAS,EACvBvI,KAAMqI,EAAQG,QAGTnnB,SAAQyC,QAAQukB,EAAQI,UAAW,SAAUpkB,EAAO1B,GAChDwE,EAAOgI,KAAOxM,EAAM,IAAM0B,GAG9B,IAAIy3C,KAKJ,OAJAA,GAAO9X,KAAOriB,SAAS0G,EAAQkR,SAASyK,MACxC8X,EAAOl5C,MAAQylB,EAAQkR,SAAS32B,MAChCk5C,EAAO33C,WAAakkB,EAAQkR,SAASlxB,SAAWggB,EAAQkR,SAASlxB,SAAW,KAErEge,EAAc6zC,eAAepe,EAAQ30C,GAAQ/C,KAChD,SAAUhE,GAGN,MAFHoC,GAAGg4D,SAAWp6D,EAAOA,EAAK8H,WAC1BmgB,EAAQS,MAAM1oB,EAAK2oB,eACTvmB,EAAGg4D,WAItB,QAAS7iD,KACL,MAAOhS,GAAgBgS,kBAAkBvT,KACrC,SAAUhE,GAEN,MADAoC,GAAG6G,UAAYjJ,EAAOA,KACfoC,EAAG6G,YAItB,QAAS+wD,KACL/zC,EAAc+zC,aAAa53D,EAAGs5C,QAAQ13C,KAClC,WACI0B,EAAKoB,MAAM,UAAW,wBACtBiD,IACA3H,EAAGoC,YAAY0I,WAe3B,QAAS+sD,GAAazgD,GAClByM,EAAcg0C,aAAazgD,EAAKjW,GAAIiW,GAAMxV,KACtC,WACIxD,QAAQC,IAAI,YACZiF,EAAKoB,MAAM,WACX1E,EAAGoC,YAAY0I,WAI3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGs5C,UArFP,GAAIt5C,GAAKC,IACTD,GAAGT,aACHS,EAAGg4D,YACHh4D,EAAGs5C,UACHt5C,EAAGoC,YAAc,GAAIJ,OACpBK,QAAS,EAAG,GAAI,GAAI,GAAI,KACrBC,QAASkP,IAEbxR,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IACAb,EAAGsyC,OAASslB,EAEZ53D,EAAGuJ,OAASsuD,EACZ73D,EAAG2H,UAAYA,EAiInBowD,EAAiBx3D,SAAW,WAAY,OAAQ,gBAAiB,kBAAmB,gBAAiB,QArJrG1B,QACKC,OAAO,cACPK,WAAW,mBAAoB44D,MA+FxC,WACI,YAEAl5D,SACKC,OAAO,sBAQhB,WACI,YAOA,SAASm5D,GAAgB9nB,GAWrB,QAAS+nB,GAAerkD,EAAU1S,GAC9B,GAAIomB,GAAM8tB,EAAOl0C,CACjB,OAAOgvC,GAAe5oB,GAAKiuB,IAAI,KAAM3hC,GAZzC,GAAIwhC,GAAO,qBACP+a,EAAKjgB,EAAekF,EACxB,QACI8iB,gBAAiB/H,EAAGvrB,IACpBuzB,YAAahI,EAAGrf,QAChBmnB,eAAgBA,GA2IxBD,EAAgB13D,SAAW,kBAtJ3B1B,QACKC,OAAO,gBACPmyC,QAAQ,kBAAmBgnB,MAsBpC,WACI,YAOA,SAAS/mB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,iBACHxE,WAAY,qBACZE,aAAc,KACdL,YAAa,wCACbuoB,IAAK,cAGb6pB,EAAmBC,KAAK,sBAAuB,aAyInDH,EAAY3wC,SAAW,iBAAkB,sBAvJzC1B,QACKC,OAAO,gBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASmnB,GAAmBpxD,EAAUvG,EAAMsB,EAAei2D,EAAiB30D,GAkBxE,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAAS+3D,KACL,MAAOF,GAAgBE,kBAAkBv2D,KACrC,SAAUhE,GAEN,MADAoC,GAAGs4D,UAAY16D,EAAOA,KACfoC,EAAGs4D,YAItB,QAASF,GAAYj3D,GACjB,MAAO82D,GAAgBG,YAAYj3D,GAAIS,KACnC,SAAUhE,GAEN,MADAoC,GAAG6T,SAAWjW,EAAOA,KACdoC,EAAG6T,WAItB,QAASqkD,GAAe9gD,GACpB,MAAO6gD,GAAgBC,eAAe9gD,EAAMA,EAAKmhD,UAAU32D,KACvD,SAAUhE,GAIN,MAHAoC,GAAG6T,SAAWjW,EAAOA,KACrBoC,EAAGoC,YAAY0I,SACfxH,EAAKoB,MAAM,WACJ1E,EAAG6T,WA3CtB,GAAI7T,GAAKC,IACTD,GAAGs4D,aACHt4D,EAAG6T,YAEH7T,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS61D,IAEbn4D,EAAGI,MAAQ,sBAEXS,IACAb,EAAGm4D,gBAAkBA,EACrBn4D,EAAGo4D,YAAcA,EACjBp4D,EAAGk4D,eAAiBA,EAqIxBG,EAAmB93D,SAAW,WAAY,OAAQ,gBAAiB,kBAAmB,QAxJtF1B,QACKC,OAAO,gBACPK,WAAW,qBAAsBk5D,MAyD1C,WACI,YAOA,SAAS/0B,GAAmB6M,GACxB,GAAIqoB,GAAW,kBAEX1zB,GACAd,SAAUmM,EAAeqoB,EAAW,gBAAgB5nB,KAExD,OAAO9L,GA8IXxB,EAAmB/iC,SAAW,kBAzJ9B1B,QACKC,OAAO,OACPmyC,QAAQ,qBAAsB3N,MAkBvC,WACI,YAOA,SAAS4N,GAAYC,GACjBA,EACKxtC,MAAM,SACHxE,WAAY,kBACZE,aAAc,KACdL,YAAa,uCACbuoB,IAAK,SACL3pB,MACI66D,eAAgB,oBAEpB9C,SAAA,aAAS,SAAUjsD,GACfA,EAAW+uD,eAAiB,qBAEhCC,QAAA,aAAQ,SAAUhvD,GACdA,EAAW+uD,eAAiB,OAGnC90D,MAAM,YACHxE,WAAY,qBACZE,aAAc,KACdL,YAAa,6CACbuoB,IAAK,cAER5jB,MAAM,cACHxE,WAAY,uBACZE,aAAc,KACdL,YAAa,mDACbuoB,IAAK,iBAER5jB,MAAM,aACHxE,WAAY,sBACZE,aAAc,KACdL,YAAa,iDACbuoB,IAAK,gBAIR5jB,MAAM,gBACH4jB,IAAK,OACLvoB,YAAa,wCAEhB2E,MAAM,YACH4jB,IAAK,OACLvoB,YAAa,wCAEhB2E,MAAM,uBACH4jB,IAAK,OACLvoB,YAAa,wCAsGzBkyC,EAAY3wC,SAAW,kBA1JvB1B,QACKC,OAAO,QACPwyC,OAAOJ,MA0DhB,WACI,YAOA,SAASf,GAAexL,EAAOjjB,EAAQi3C,EAAsB3pC,EAAI8R,EAAU99B,EAAMM,GAG7E,QAASs1D,GAAWvjB,GAiBhB,QAASwjB,GAAM13D,EAAIwD,GACf,GAAIm0D,GAAO33D,EAAMomB,EAAMpmB,EAAOomB,CAC9B,OAAOod,GAAAA,UAAam0B,GAAOn0D,OAAQA,IAC9B/C,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAAS0U,GAAIlgC,GACT,GAAIo0D,GAA8B,MAAxBxxC,EAAIA,EAAI9e,OAAS,GAAa8e,EAAIxN,OAAO,EAAGwN,EAAI9e,OAAS,GAAK8e,CACxE,OAAOod,GAAME,IAAIk0B,GAAMp0D,OAAQA,IAC1B/C,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAAS4gB,GAAQ5vC,EAAIwD,GACjB,MAAOggC,GAAME,IAAItd,EAAMpmB,GAAKwD,OAAQA,IAC/B/C,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASukB,GAAc92C,EAAM+G,GACzB,GAAI2sC,IACA0nB,SAAUC,eAAgBpgD,QAC1BlU,OAAQA,EACRu0D,iBAAkBA,GAElBH,EAA8B,MAAxBxxC,EAAIA,EAAI9e,OAAS,GAAa8e,EAAIxN,OAAO,EAAGwN,EAAI9e,OAAS,GAAK8e,CACxE,OAAOod,GAAMiM,KAAKmoB,EAAKn7D,EAAM0zC,GACxB1vC,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASgpC,GAAah4D,EAAIvD,EAAM+G,GAC5B,GAAI2sC,IACA0nB,SAAUC,eAAgBpgD,QAC1BlU,OAAQA,EACRu0D,iBAAkBA,GAElBH,EAAM53D,EAAKomB,EAAMpmB,EAAKomB,CAC1B,OAAOod,GAAM6Q,IAAIujB,EAAKn7D,EAAM0zC,GACvB1vC,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASygB,GAAKhzC,EAAM+G,GAChB,GAAIo0D,GAA8B,MAAxBxxC,EAAIA,EAAI9e,OAAS,GAAa8e,EAAIxN,OAAO,EAAGwN,EAAI9e,OAAS,GAAK8e,CACxE,OAAOod,GAAMiM,KAAKmoB,EAAKn7D,GAAO+G,OAAQA,IACjC/C,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASqlB,GAAIr0C,EAAIvD,EAAM+G,GACnB,GAAIo0D,GAAM53D,EAAKomB,EAAMpmB,EAAKomB,CAC1B,OAAOod,GAAM6Q,IAAIujB,EAAKn7D,GAAO+G,OAAQA,IAChC/C,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASipC,GAAMx7D,EAAM+G,GACjB,GAAI2sC,IACA0nB,SAAUC,eAAgB,qCAC1Bt0D,OAAQA,GAERo0D,EAA8B,MAAxBxxC,EAAIA,EAAI9e,OAAS,GAAa8e,EAAIxN,OAAO,EAAGwN,EAAI9e,OAAS,GAAK8e,CACxE,OAAOod,GAAMiM,KAAKmoB,EAAKJ,EAAqB/6D,GAAO0zC,GAC9C1vC,KAAK4D,GADHm/B,SAC0BxU,GAGrC,QAASkpC,GAAKl4D,EAAIvD,EAAM+G,GACpB,GAAI2sC,IACA0nB,SAAUC,eAAgB,qCAC1Bt0D,OAAQA,GAERo0D,EAAM53D,EAAKomB,EAAMpmB,EAAKomB,CAC1B,OAAOod,GAAM6Q,IAAIujB,EAAKJ,EAAqB/6D,GAAO0zC,GAC7C1vC,KAAK4D,GADHm/B,SAC0BxU,GApFrC,GAAI5I,GAAMvkB,EAAOqyC,EAEbvQ,GACAsD,SAAUywB,EACVh0B,IAAOA,EACPkM,QAAWA,EACX2D,cAAiBA,EACjBykB,aAAgBA,EAChBvoB,KAAQA,EACR4E,IAAOA,EACP4jB,MAASA,EACTC,KAAQA,EAGZ,OAAOv0B,GA2EX,QAAS3U,GAAciD,GACnB,GAAItK,GAAWsK,GAAYA,EAASx1B,MAAQw1B,EAASx1B,KAAKkrB,QAAWsK,EAASx1B,KAAKkrB,QAAU,EAe7F,OAdIA,GAAQzY,QAAQ,iDAAmD,KACnEyY,EAAU,qBACVA,EAAQrgB,QACRnF,EAAKoB,MAAM,QAASokB,GAExBgY,EAAS,WACD1N,GAAYA,EAAS3sB,QAA8B,MAApB2sB,EAAS3sB,QACX,UAAzBib,EAAOU,SAASve,MAChByR,OAAOgkD,SAASxuD,UAGzB,KAGIkkB,EAAGwB,OAAO4C,GAGrB,QAAS5tB,GAAgB4tB,GACrB,MAAIA,IAAYA,EAASx1B,KACdw1B,EAASx1B,KADpB,OAIJ,QAASs7D,GAAiBt7D,GACtB,GAAI27D,GAAW,GAAIC,SACnB,KAAK,GAAIr5D,KAAOvC,GACRA,EAAK01C,eAAenzC,IACpBo5D,EAAS/sB,OAAOrsC,EAAKvC,EAAKuC,GAGlC,OAAOo5D,GA3HX,MAAOX,GAqJXzoB,EAAe5vC,SAAW,QAAS,SAAU,uBAAwB,KAAM,WAAY,OAAQ,QA3J/F1B,QACKC,OAAO,QACPmyC,QAAQ,iBAAkBd,MAqInC,WACI,YAaA,SAASxwC,GAAUe,EAAMikC,EAAO3V,EAAItN,EAAQhY,EAAY1G,EAAMmtC,EAAe7sC,GAqBzE,QAASm2D,KAEL,MAAOnyD,KAAW1F,KACd,WAEQ8H,EAAWgwD,SAAWhwD,EAAWgwD,QAAQ97D,MACzC8L,EAAWgwD,QAAQ97D,KAAK4G,OACxBkF,EAAWgwD,QAAQ97D,KAAK4G,MAAMiE,OAAS,IACnCyb,EAAYxa,EAAWgwD,QAAQ97D,KAAK4G,SACpCm1D,KACAv7D,QAAQC,IAAI,0DACZqjB,EAAOO,GAAG,kBAEV7jB,QAAQC,IAAI,uEACZqL,EAAWkwD,cAAgBlwD,EAAWgwD,QACtChwD,EAAWmwD,oBAAsBnwD,EAAWowD,SAC5Cp4C,EAAOO,GAAG,YAKtB,WACIP,EAAOO,GAAG,WAItB,QAAS83C,GAAazyD,GAClB5G,EAAKsZ,KAAK,kBAAmB1S,GAC7B0yD,EAAY1yD,EACZ2yD,EAA+B,OAAb3yD,EAGtB,QAASqyD,KACL,MAAOM,GAGX,QAAS71C,GAAS3f,GACd,IAAKw1D,IAAmBD,EAAUx1D,MAC9B,OAAO,CAEX,KAAK,GAAIgE,GAAI,EAAGA,EAAIwxD,EAAUx1D,MAAMiE,OAAQD,GAAK,EAC7C,GAAIwxD,EAAUx1D,MAAMgE,GAAG/D,OAASA,EAC5B,OAAO,CAGf,QAAO,EAGX,QAASyf,GAAY1f,GACjB,IAAKy1D,IAAmBD,EAAUx1D,MAC9B,OAAO,CAGX,KAAK,GAAIgE,GAAI,EAAGA,EAAIhE,EAAMiE,OAAQD,GAAK,EACnC,GAAI4b,EAAS5f,EAAMgE,IACf,OAAO,CAGf,QAAO,EAGX,QAASlB,GAAS4yD,GAwBd,QAAS/pC,GAAciD,GACnB1R,EAAOO,GAAG,SACVk4C,EAAiB3pC,OAAO4C,GACxB+mC,EAAmB,KAGvB,QAAS30D,GAAgB4tB,GACrB,GAAwB,MAApBA,EAAS3sB,OAGT,GADArI,QAAQC,IAAI,mDAAmD+0B,EAASx1B,MACnEw1B,EAASx1B,KAAK8lC,WASfu2B,GAAiB,EACjBD,EAAY5mC,EAASx1B,KACrBu8D,EAAiBz8C,QAAQs8C,OAXE,CAC3B,GAAI17D,GAAO,qCACXgF,GAAKoB,MAAM,QAASpG,GACpB27D,GAAiB,EACjBD,EAAY5mC,EAASx1B,KACrBu8D,EAAiBz8C,QAAQs8C,GACzBt4C,EAAOO,GAAG,aAUdkO,KAjDR,MAAIgqC,GACOA,EAAiBhnD,SAE5BgnD,EAAmBnrC,EAAG8lB,QAElBolB,KAAU,IACV97D,QAAQC,IAAI,8BACZ27D,EAAYnhD,OACZohD,GAAiB,GAKjBp7D,QAAQu7D,UAAUJ,IAClB57D,QAAQC,IAAI,yBACZ87D,EAAiBz8C,QAAQs8C,GAClBG,EAAiBhnD,UAK5BwxB,EAAME,IAAI7hC,EAAO,iCAAiCpB,KAAK4D,GAAvDm/B,SAA8ExU,GAgCvEgqC,EAAiBhnD,UAG5B,QAASknD,KACLF,EAAmB,KAGvB,QAAS75D,KACL,MAAO05D,GAGX,QAASM,GAAM18D,GACX,MAAOuyC,GAAe,SAASipB,MAAMx7D,GAMzC,QAASmC,KACLowC,EAAe,UAAUS,OAAzBT,WAAwC,WAEpC6pB,EAAYnhD,OACZohD,GAAiB,EACjBE,EAAmB,KACnBz4C,EAAOO,GAAG,WAIlB,QAASs1B,GAAQl3C,GACb,GAAIiH,GAAWjH,EAAOA,EAAO25D,CAC7B,KAAK1yD,IAAaA,EAAS9C,QAAU8C,EAAS9C,MAAMiE,OAChD,MAAO,KACX,IAAI4nC,IACAsG,OAAU,EACV4jB,SAAY,EACZ7jB,SAAY,EACZ8jB,MAAS,GAET58C,EAAMtW,EAAS9C,MAAM,EAMzB,OALA8C,GAAS9C,MAAMlD,QAAQ,SAAUmD,GACzB4rC,EAAM5rC,EAAKA,MAAQ4rC,EAAMzyB,EAAInZ,QAC7BmZ,EAAMnZ,KAGPmZ,EAGX,QAAS68C,GAAWp6D,GAEhB,IAAK25D,IAAcA,EAAUx1D,QAAUw1D,EAAUx1D,MAAMiE,OACnD,MAAO,KACX,IAAImV,IAAM,CAMV,OALAo8C,GAAUx1D,MAAMlD,QAAQ,SAAUmD,GACZ,aAAdA,EAAKA,OACLmZ,GAAM,KAGPA,EAGX,QAAS2oB,KACL,MAAO4J,GAAe,mCAAmCtL,MApM7D,GAAIm1B,GAEAG,EADAF,GAAiB,CAGrB,QACIR,UAAWA,EACXM,aAAcA,EACdJ,gBAAiBA,EACjBv1C,SAAUA,EACVF,YAAaA,EACb5c,SAAUA,EACVhH,YAAaA,EACbg6D,MAAOA,EACPv6D,OAAQA,EACRw3C,QAASA,EACTkjB,WAAYA,EACZJ,WAAYA,EACZ9zB,iBAAkBA,GAqI1B5mC,EAAUY,SAAW,OAAQ,QAAS,KAAM,SAAU,aAAc,OAAQ,iBAAkB,QA5J9F1B,QACKC,OAAO,QACPmyC,QAAQ,YAAatxC,MA8M9B,WACI,YAOA,SAAS+6D,GAAgBh6D,EAAMsuB,EAAIwgB,GAW/B,QAASmrB,GAAUrpB,GACf,GAAIuD,GAAW7lB,EAAG8lB,OAIlB,OAFAxD,GAAOspB,QAAU/lB,EAAS1hC,QAC1Bm+B,EAAOlzB,OAASy2B,EACTvD,EAGX,QAASupB,GAAWznC,GAChB,MAAOA,IAAYpE,EAAGqiB,KAAKje,GAG/B,QAAS0nC,GAAgB1nC,GACFoc,EAAU3K,IAAI,SAiBjC,OAhBwB,OAApBzR,EAAS3sB,QAET/F,EAAKuhC,MAAM,4BAA6B7O,GAGpB,MAApBA,EAAS3sB,QAET/F,EAAKuhC,MAAM,sBAAuB7O,GAS/BpE,EAAGwB,OAAO4C,GAxCrB,GAAI2nC,IACAC,QAASL,EACTvnC,SAAUynC,EACVI,cAAeH,EAGnB,OAAOC,GAiJXL,EAAgBn6D,SAAW,OAAQ,KAAM,aA7JzC1B,QACKC,OAAO,QACPmyC,QAAQ,kBAAmBypB,MAmDpC,WACI,YAEA77D,SACKC,OAAO,4BAYhB,WACI,YAOA,SAASm1B,GAAqBkc,GAC1B,GAAIkF,GAAO,0BACP6lB,EAAM/qB,EAAekF,EACzB,QACInhB,qBAAsBgnC,EAAIr2B,IAC1Bs2B,iBAAkBD,EAAInqB,QACtBqqB,oBAAqBF,EAAItqB,KACzByqB,oBAAqBH,EAAI1lB,IACzB8lB,oBAAqBJ,EAAAA,UACrBz9B,iBAAkBy9B,EAAIr2B,KAgJ9B5Q,EAAqB1zB,SAAW,kBA9JhC1B,QACKC,OAAO,sBACPmyC,QAAQ,uBAAwBhd,MAqBzC,WACI,YAOA,SAASid,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,uBACHxE,WAAY,0BACZE,aAAc,KACdL,YAAa,oDACbuoB,IAAK,oBAGb6pB,EAAmBC,KAAK,4BAA6B,mBAiJzDH,EAAY3wC,SAAW,iBAAkB,sBA/JzC1B,QACKC,OAAO,sBACPwyC,OAAOJ,MAgBhB,WACI,YAOA,SAASqqB,GAAwBt0D,EAAUvG,EAAMsB,EAAeiyB,EAAsB3wB,GAqBlF,QAASzC,KACLH,EAAKrC,IAAI2B,EAAGI,OAGhB,QAAS8zB,GAAqBrO,GAC1B,GAAIlhB,IACApF,UAAWsmB,EAAQkR,SAASx3B,UAAYsmB,EAAQkR,SAASx3B,UAAY,KAEzE,OAAO00B,GAAqBC,qBAAqBvvB,GAAQ/C,KACrD,SAAUhE,GAEN,MADAoC,GAAGg1B,eAAiBp3B,EAAOA,KACpBoC,EAAGg1B,iBAMtB,QAASomC,KACHp7D,EAAGy0B,cAAcrX,MAASpd,EAAGy0B,cAAcC,iBAE7CT,EAAqBmnC,oBAAoBp7D,EAAGy0B,eAAe7yB,KAAK,WAC5D0B,EAAKoB,MAAM,UAAW,wBACtB1E,EAAG+nB,WAAa/nB,EAAG+nB,UACtB/nB,EAAGy0B,iBACAz0B,EAAGoC,YAAY0I,WAcvB,QAASuwD,GAAoBjkD,GACzB6c,EAAqBonC,oBAAoBjkD,EAAKjW,GAAIiW,GAAMxV,KACpD,WACI5B,EAAGoC,YAAY0I,WAI3B,QAASnD,KACL3H,EAAG+nB,WAAa/nB,EAAG+nB,UACnB/nB,EAAGy0B,iBAGV,QAAS9kB,GAAWrG,GACG,KAAlBA,EAAMuG,SACTurD,IAxEC,GAAIp7D,GAAKC,IACTD,GAAGT,aACHS,EAAGg1B,kBACHh1B,EAAGy0B,iBACHz0B,EAAGoC,YAAc,GAAIJ,OACjBK,UACAC,QAAS4xB,IAEbl0B,EAAGI,MAAQ,4BACXJ,EAAG+nB,WAAY,EACflnB,IAEAb,EAAGsyC,OAAS8oB,EAEZp7D,EAAGuJ,OAAS8xD,EACZr7D,EAAG2H,UAAYA,EAClB3H,EAAG2P,WAAaA,EA0IjB4rD,EAAwBh7D,SAAW,WAAY,OAAQ,gBAAiB,uBAAwB,QAhKhG1B,QACKC,OAAO,OACPK,WAAW,0BAA2Bo8D,MAoF/C,WACI,YAOA,SAASC,GAAe93C,EAAWhkB,EAAY+7D,GAO3C,QAAS56D,KACA6iC,IACDhgB,EAAU,GAAGg4C,OAAS,kBACtBh8D,EAAW,wBAAwBkC,KAAK,SAAU+5D,GAC9CF,EAAOzhD,KAAK2hD,IACb,SAAUA,GACTF,EAAOzhD,KAAK2hD,MAZxB,GAAIj4B,GAAahgB,EAAU,GAAGg4C,OAAOz8D,QACjC,oDAAqD,KAGzD4B,KAuJJ26D,EAAej7D,SAAW,YAAa,aAAc,UAjKrD1B,QACKC,OAAO,OACPK,WAAW,iBAAkBq8D,MAyBtC,WACI,YAOA,SAASl4D,GAAK5C,EAAMhB,EAAY+7D,EAAQxnD,EAAQhR,GAmB5C,QAASkC,GAAey2D,EAASC,GAC7B,MAAOh9D,SAAQi9D,OAAOF,KAAa/8D,QAAQi9D,OAAOD,GAGtD,QAASn3D,GAAM0Y,EAAM9e,EAAM8B,GAQvB,QAAS27D,GAAQJ,GACb,OAAQv+C,GACJ,IAAK,QACGu+C,GACAF,EAAOx5B,MAAM05B,GACbv7D,GACAM,EAAKuhC,MAAM7hC,EACf,MACJ,KAAK,OACGu7D,GACAF,EAAOzhD,KAAK2hD,GACZv7D,GACAM,EAAKsZ,KAAK5Z,EACd,MACJ,KAAK,UACGu7D,GACAF,EAAOO,QAAQL,GACfv7D,GACAM,EAAKrC,IAAI+B,EACb,MACJ,KAAK,OACGu7D,GACAF,EAAOQ,QAAQN,GACfv7D,GACAM,EAAKw7D,KAAK97D,EACd,MACJ,SACQu7D,GACAF,EAAOzhD,KAAK2hD,GACZv7D,GACAM,EAAKsZ,KAAK5Z,IArCZ,YAATgd,GAAwB9e,IACzBA,EAAO,wBAEG,UAAT8e,GAAsB9e,IACvBA,EAAO,mBAEXoB,EAAWpB,GAAMsD,KAAKm6D,EAASA,GAoCnC,QAAS7C,GAAiBt7D,GACtB,GAAI27D,GAAW,GAAIC,SAKnB,OAJA36D,SAAQyC,QAAQ1D,EAAM,SAAUiE,EAAO1B,GACnCo5D,EAAS/sB,OAAOrsC,EAAK0B,KAGlB03D,EAGX,QAAS4C,GAAM92D,GACX,MAAOA,GAAO4O,EAAO5O,EAAM,iBAAiB6O,OAAO,cAAgB,KAG1E,QAASL,GAAS1T,GACjB,GAAIvC,IACHgW,YACE/R,MAAO,SAAUzB,MAAO,SAAUD,IAAK,YACvC0B,MAAO,SAAUzB,MAAO,SAAUD,IAAK,kBACvC0B,MAAO,WAAYzB,MAAO,WAAYD,IAAK,gBAC/B0B,MAAO,QAASzB,MAAO,QAASD,IAAK,gBACrC0B,MAAO,YAAazB,MAAO,YAAaD,IAAK,gBAC7C0B,MAAO,mBAAoBzB,MAAO,qBAAsBD,IAAK,gBAC7D0B,MAAO,uBAAwBzB,MAAO,uBAAwBD,IAAK,gBACnE0B,MAAO,OAAQzB,MAAO,OAAQD,IAAK,gBACnC0B,MAAO,0BAA2BzB,MAAO,0BAA2BD,IAAK,UACzE0B,MAAO,qBAAsBzB,MAAO,qBAAsBD,IAAK,UAC/D0B,MAAO,OAAQzB,MAAO,OAAQD,IAAK,UAExCklB,qBACKxjB,MAAO,OAAQzB,MAAO,OAAQD,IAAK,WACnC0B,MAAO,YAAazB,MAAO,YAAaD,IAAK,gBAC7C0B,MAAO,UAAWzB,MAAO,UAAWD,IAAK,aACzC0B,MAAO,kBAAmBzB,MAAO,kBAAmBD,IAAK,aAEvEsqD,WACE5oD,MAAO,EAAGzB,MAAS,aAAcD,IAAK,gBACtC0B,MAAO,EAAGzB,MAAS,aAAcD,IAAK,gBACtC0B,MAAO,EAAGzB,MAAS,aAAcD,IAAK,gBACtC0B,MAAO,EAAGzB,MAAS,aAAcD,IAAK,gBACtC0B,MAAO,GAAIzB,MAAS,cAAeD,IAAK,gBACxC0B,MAAO,GAAIzB,MAAS,eAAgBD,IAAK,gBAElCi8D,oBACKv6D,MAAO,UAAWzB,MAAO,WACzByB,MAAO,gBAAiBzB,MAAO,WAC/ByB,MAAO,cAAezB,MAAO,aAC7ByB,MAAO,cAAezB,MAAO,uBAC7ByB,MAAO,QAASzB,MAAO,SAItC,OAAOxC,GAAKuC,GAGb,QAASypB,GAAe/nB,GACvB,IAAK,GAAI2G,GAAI,EAAGA,EAAIqL,EAAS,aAAapL,OAAQD,IACjD,GAAIqL,EAAS,aAAarL,IAAMqL,EAAS,aAAarL,GAAG3G,OAASgS,EAAS,aAAarL,GAAG3G,MAAMwO,QAAQxO,GAAS,GACjH,MAAOgS,GAAS,aAAarL,GAAGrI,IAGnC,QAASkQ,GAAQgsD,EAAOC,EAAQn8D,GAE/B,GAAIA,GAAO4oC,MAAMwzB,QAAQp8D,GAAM,CAC9B,GAAmB,IAAfA,EAAIsI,OACP,MAAO,EACR,IAAmB,IAAftI,EAAIsI,OACP,MAAO4H,GAAQgsD,EAAOl8D,EAAI,GAC3B,IAAIq8D,GAASr8D,EAAIs8D,SAAS,GACtBC,EAAWL,EAAM/jD,IAAI,SAAUlB,GAClC,MAAOA,GAAKjX,EAAI,KAEjB,OAAOkQ,GAAQqsD,EAAUF,GACnB,GAAIr8D,EAAK,CACf,IAAK,GAAIqI,GAAI,EAAGA,EAAI6zD,EAAM5zD,OAAQD,IAEjC,GAAI6zD,EAAM7zD,GAAGrI,KAASm8D,EACrB,MAAO9zD,EAET,OAAO,GAEP,MAAO6zD,GAAMhsD,QAAQisD,GAKpB,QAASz4B,GAAiB6d,GACtB,GAAoB17B,GAAhB22C,KACAC,EAAUC,KAAKnb,EACnBib,GAAYC,EAAQxsD,MAAM,IAEtB4V,EADqC,MAArC22C,EAAWA,EAAUl0D,OAAS,IAAoD,MAAtCk0D,EAAWA,EAAUl0D,OAAS,GAClE,EACoC,MAArCk0D,EAAWA,EAAUl0D,OAAS,IAAmD,KAArCk0D,EAAWA,EAAUl0D,OAAS,GACzE,EACG,CAEf,IAAIq0D,GAAYF,EAAQ90B,UAAU,EAAG80B,EAAQn0D,OAASud,GAClD+2C,EAAQpyD,KAAKE,MAAsB,IAAhBF,KAAKqyD,UAAqBxpD,WAC7CypD,EAASF,EAAKj1B,UAAUi1B,EAAKt0D,OAAQs0D,EAAKt0D,OAAS,GACnDy0D,EAASH,EAAKj1B,UAAUi1B,EAAKt0D,OAAS,EAAGs0D,EAAKt0D,OAAS,GACvD00D,EAAaL,EAAUh1B,UAAU,EAAG,GAAMm1B,EAC1CG,EAAaN,EAAUh1B,UAAU,EAAG,GAAMo1B,EAC1CG,EAAaP,EAAUh1B,UAAU,EAAG80B,EAAQn0D,OAASud,GACrDs3C,EAAcH,EAAYC,EAAYC,EAAYr3C,CAEtD,OAAOs3C,GAxKX,GAAIx4B,IACA3/B,eAAgBA,EAChBT,MAAOA,EACPw0D,iBAAkBA,EACrBiD,MAAOA,EACJoB,MAAOt6D,EAAQ,SACf++B,QAAS/+B,EAAQ,WACjB6e,QAAS7e,EAAQ,WACpB4Q,SAAUA,EACVxD,QAASA,EACTuZ,eAAgBA,EACbia,iBAAiBA,EAErB,OAAOiB,GA8IXxhC,EAAK/C,SAAW,OAAQ,aAAc,SAAU,SAAU,WAlK1D1B,QACKC,OAAO,OACPmyC,QAAQ,OAAQ3tC,MAoLzB,WACI,YAOA,SAASk6D,GAAS98D,EAAM+8D,EAAcC,EAAuB/4B,EAAOtK,EAAS3wB,EAAYi0D,EAAiBh+D,EACxFi+D,EAAU98B,EAAU+b,GA2BlC,QAASghB,KACLz/D,QAAQC,IAAI,WAvBhBqL,EAAWo0D,SAAWF,EAGtBF,EAAsB1+D,YAAc,0CACpC0+D,EAAsBK,cAAc39D,MAAQ,GAC5Cs9D,EAAsBK,cAAc5/C,GAAK,MACzCu/C,EAAsBK,cAAc3/C,OAAS,MAC7Cs/C,EAAsBlgD,KAAO,KAG7BmgD,EAAgBh5D,OAAOqhB,MAAQ,GAC/B23C,EAAgBK,SAAS37D,QAAU,GAAI,GAAI,GAAI,GAAI,GAAI,KACvDs7D,EAAgBK,SAASC,oBAAsB,EAC/CN,EAAgBK,SAASE,oBAAsB,EAK/Cx9D,EAAKqgC,MAAM,gBAEXr3B,EAAWL,IAAI,WAAYw0D,GAQ3BJ,EAAaU,SAASC,GAAI,MAAO,SAAUC,GAEvC,GAAI3E,GAAU2E,EAAMC,aAChBxE,EAAWuE,EAAMC,aAAaC,OAMlCz9B,GAAS,WACL,GACI09B,IADW3hB,EAAYK,eACR,EAAG,IAClBC,EAAmBN,EAAYM,mBAE/BshB,EAAK9zD,KAAK08B,IAA+BloB,SAASq/C,EAAY,IAAKr/C,SAASg+B,EAAiB,IACjGzzC,GAAWg1D,2BACPC,aAAcF,EAAK,KAEvB/0D,EAAWk1D,4BACPD,aAAcF,EAAK,MAExB,KACkB,UAAjB/E,EAAQ71D,OACR6F,EAAWm1D,cAAgBnF,EAC3BhwD,EAAWo1D,eAAiBhF,EAC5Bn6D,EAAU85D,eAkBlBgE,EAAasB,WAAWX,GAAI,MAAO,WAC/B/jC,EAAQmB,SAAS,EAAG,KAgF5BgiC,EAASj9D,SAAW,OAAQ,eAAgB,wBAAyB,QAAS,UAAW,aAAc,kBAAmB,YAAa,WAAY,WAAY,eAnK/J1B,QACKC,OAAO,OACP+qC,IAAI2zB,MA2Fb,WACI,YAOA,SAAStsB,GAAYC,EAAgBC,GACjCD,EACKxtC,MAAM,QACHg0C,YAAU,EACVx4C,WAAY,iBACZE,aAAc,KACdqe,SACIpW,SAAUA,GAEdtI,YAAa,uBAEhB2E,MAAM,aACHxE,WAAY,iBACZE,aAAc,KACdzB,MACI4G,UAEJkZ,WACA1e,YAAa,gCACbuoB,IAAK,MAGb6pB,EAAmB4tB,UAAU,KAIjC,QAAS13D,GAAS3H,GACd,MAAOA,GAAU2H,WAoIrB4pC,EAAY3wC,SAAW,iBAAkB,sBACzC+G,EAAS/G,SAAW,aArKpB1B,QACKC,OAAO,OACPwyC,OAAOJ,MAmChB,WACI,YAOA,SAAS+tB,GAAMC,GACXA,EAAmBC,yBAAyB,UAC5CD,EAAmBE,sBACfC,OAAQ,cACRC,OAAQ,UAIZJ,EACKK,kBAAkB,WAClBC,iBAAiB,WAuJ1BP,EAAM1+D,SAAW,sBAtKjB1B,QACKC,OAAO,OACPwyC,OAAO2tB,MAmBhB,WACI,YAqDA,SAASn9C,KAKL,QAAS29C,GAAc59D,GAEnB,GAAIhD,QAAQu7D,UAAUv4D,IAAoB,OAAVA,GAA8C,KAA5BA,EAAM2R,WAAWksD,OAG/D,IAAK,GAFDC,IAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/DC,GAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1Dp3D,EAAI,EAAGq3D,EAAaF,EAAel3D,OAAYo3D,EAAJr3D,EAAgBA,GAAK,EACrE3G,EAAQA,EAAM2R,WAAWvU,QAAQ,GAAI6gE,QAAOH,EAAen3D,GAAI,KAAMo3D,EAAep3D;AAI5F,MAAO3G,GAdX,MAAO49D,GAkBX,QAASM,KAKL,QAASC,GAAen+D,GACpB,MAAOA,GAAQmgC,IAAUngC,GAAS,IAAM,IAL5C,MAAOm+D,GASX,QAASC,KAKL,QAASC,GAAgBr+D,EAAOs+D,GAE5B,MADAA,GAAcA,GAAe,IACtBt+D,EAAQmgC,IAAUngC,GAAS,MAAQs+D,EAN9C,MAAOD,GAWX,QAASE,GAAUnsD,GAKf,QAASosD,GAAgBC,EAAUpsD,GAC/B,GAAIrV,QAAQ0hE,YAAYD,IAA0B,OAAbA,EACjC,MAAO,SAEXpsD,GAASA,GAAU,qBACnB,KACI,MAAO8tB,KAAU/tB,EAAOqsD,GAAUpsD,OAAOA,GAAQjV,QAAQ,SAAU,UACrE,MAAOwT,GACL,MAAO,WAZf,MAAO4tD,GAmBX,QAAS9C,GAAMtpD,GAKX,QAASusD,GAAYn7D,EAAM6O,GACvB,GAAIrV,QAAQ0hE,YAAYl7D,IAAkB,OAATA,EAC7B,MAAO,SAEX6O,GAASA,GAAU,eACnB,KACI,MAAO8tB,KAAU/tB,EAAO5O,GAAM6O,OAAOA,GAAQjV,QAAQ,SAAU,UACjE,MAAOwT,GACL,MAAO,WAZf,MAAO+tD,GAmBX,QAAS/1C,GAAMxW,GAKX,QAASwsD,GAAYp7D,GACjB,GAAIxG,QAAQ0hE,YAAYl7D,IAAkB,OAATA,EAC7B,MAAO,SAEX,KACI,MAAO4O,GAAO5O,GAAM6O,OAAO,cAC7B,MAAOzB,GACL,MAAO,WAXf,MAAOguD,GAkBX,QAASC,GAAgBzsD,GAKrB,QAASusD,GAAYn7D,EAAMs7D,EAAcC,GACrC,GAAI/hE,QAAQ0hE,YAAYl7D,IAAkB,OAATA,EAC7B,MAAO,SAEXs7D,GAAeA,GAAgB,aAC/BC,EAAeA,GAAgB,eAC/B,KACI,MAAOv7D,GAAO28B,IAAU/tB,EAAO5O,EAAMs7D,GAAczsD,OAAO0sD,IAAiB,KAC7E,MAAOnuD,GACL,MAAO,WAbf,MAAO+tD,GAoBX,QAASK,GAAO5sD,GAKZ,QAAS6sD,GAAaz7D,EAAM6O,GACxB,GAAIrV,QAAQ0hE,YAAYl7D,IAAkB,OAATA,EAC7B,MAAO,SAEX6O,GAASA,GAAU,eACnB,KACI,MAAOD,GAAO5O,GAAM6O,OAAOA,GAC7B,MAAOzB,GACL,MAAO,SAZf,MAAOquD,GAmBX,QAASC,GAAW9sD,GAKhB,QAAS+sD,GAAY37D,GACjB,GAAIxG,QAAQ0hE,YAAYl7D,IAAkB,OAATA,EAC7B,MAAO,SAEX,IAAI47D,GAAgBhtD,EAAO5O,GAAM67D,GAAG,eAAehtD,OAAO,QAC1D,OAAO+sD,GATX,MAAOD,GAaX,QAASjS,KAGL,QAASoS,GAAKhxD,GACV,MAAa,KAATA,GACQA,EAAQ,KAEP,IAATA,GACQA,EAAS,IAAM,MAEd,IAATA,GACQA,EAAS,IAAS,OAEtBA,EAAS,IAAY,MAGjC,QAASixD,GAAKjxD,GACV,GAAIskC,GAAO,CAMX,OALsB,gBAAXtkC,KAAwBA,EAAOE,QAAQ,KAAO,GAAKF,EAAOE,QAAQ,KAAO,KAChFokC,EAAqC,MAA9BtkC,EAAOA,EAAO1H,OAAS,GAAa,GAAK,EAChD0H,EAASA,EAAO23B,UAAU,EAAG33B,EAAO1H,OAAS,IAGpC,GAAT0H,GACQskC,EAAOtkC,EAAQ,MAE3BA,GAAU,GACG,IAATA,GACQskC,EAAOtkC,EAAQ,KAEd,IAATA,GACQskC,EAAOtkC,EAAS,IAAM,MAErB,IAATA,GACQskC,EAAOtkC,EAAS,IAAS,OAE7BskC,EAAOtkC,EAAS,IAAY,OAKxC,QAASkxD,GAAgBlxD,EAAQmxD,EAAUC,GAKvC,GADID,IAAUA,EAAWA,EAAS7oB,eACjB,MAAb6oB,EAAkB,CAClB,GAAI1oD,GAAIwoD,EAAKjxD,EACbA,GAASyI,EAAE,GACX0oD,EAAW1oD,EAAE,GACb2oD,EAASA,GAAU,MAChB,IAAiB,OAAbD,EAAmB,CAC1B,GAAIE,GAAIL,EAAKhxD,EACbA,GAASqxD,EAAE,GACXF,EAAWE,EAAE,GAEjB,GAAe,OAAXrxD,GAAmBtR,QAAQ0hE,YAAYpwD,GACvC,MAAO,EAEX,IAAIsxD,GAAQtxD,EAAOqD,WAAWpD,MAAM,IACpCqxD,GAAM,GAAKA,EAAM,GAAGxiE,QAAQ,wBAAyB,IACrD,IAAI2e,EAWJ,IAVI2jD,GAAUE,EAAM,IAChBF,EAAS52D,KAAKy8B,IAAIq6B,EAAM,IAAMA,EAAM,GAAGh5D,OAAQ84D,GAC/CE,EAAM,GAAKA,EAAM,GAAG1nD,OAAO,EAAGwnD,GAC9B3jD,EAAMokB,IAAUy/B,EAAMljE,KAAK,OAE3Bqf,EAAMokB,IAAUy/B,EAAM,KAKrBH,EAAU,MAAO1jD,EAEtB,QAAQ0jD,GACJ,IAAK,IACD,MAAO1jD,GAAM,IACjB,KAAK,KACD,MAAOA,GAAM,SACjB,KAAK,KACD,MAAOA,GAAM,WACjB,KAAK,KACD,MAAOA,GAAM,YAEjB,KAAK,IACD,MAAOA,GAAM,QACjB,KAAK,KACD,MAAOA,GAAM,aACjB,KAAK,KACD,MAAOA,GAAM,eACjB,KAAK,KACD,MAAOA,GAAM,gBACjB,SACI,MAAOA,IA5FnB,MAAOyjD,GAiGX,QAASr/B,KAKL,QAAS0/B,GAAc7/D,EAAO8/D,GAC1B,IAAe9oD,SAAVhX,GAAiC,OAAVA,IAAmB8/D,EAC3C,MAAOA,EACX,IAAI9iE,QAAQu7D,UAAUv4D,IAAoB,OAAVA,GAA8C,KAA5BA,EAAM2R,WAAWksD,OAAe,CAG9E,IAAK,GAFDC,IAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/DC,GAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1Dp3D,EAAI,EAAGq3D,EAAaD,EAAen3D,OAAYo3D,EAAJr3D,EAAgBA,GAAK,EACrE3G,EAAQA,EAAM2R,WAAWvU,QAAQ,GAAI6gE,QAAOF,EAAep3D,GAAI,KAAMm3D,EAAen3D,GAExF,OAAO3G,GAEP,MAAO,GAff,MAAO6/D,GAoBX,QAASE,KAKL,QAASF,GAAc7/D,GACnB,GAAIhD,QAAQu7D,UAAUv4D,IAAoB,OAAVA,GAA8C,KAA5BA,EAAM2R,WAAWksD,OAAe,CAG9E,IAAK,GAFDC,IAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/DC,GAAkB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1Dp3D,EAAI,EAAGq3D,EAAaD,EAAen3D,OAAYo3D,EAAJr3D,EAAgBA,GAAK,EACrE3G,EAAQA,EAAM2R,WAAWvU,QAAQ,GAAI6gE,QAAOF,EAAep3D,GAAI,KAAMm3D,EAAen3D,GAExF,OAAO3G,GAAQ,KAEf,MAAO,GAbf,MAAO6/D,GAkBX,QAASG,KAKL,QAASC,GAAmBjgE,GACxB,MAAY,GAARA,EACO8I,KAAKyqB,IAAIvzB,GAETA,EARf,MAAOigE,GAaX,QAASC,KAKL,QAASC,GAAgB3gE,EAAO4gE,GAC5B,GAAIC,KAyBJ,OAvBIrjE,SAAQ09D,QAAQl7D,GAChBA,EAAMC,QAAQ,SAAU8V,GAIpB,IAAK,GAHD+qD,IAAc,EAEd1iD,EAAOC,OAAOD,KAAKwiD,GACdz5D,EAAI,EAAGA,EAAIiX,EAAKhX,OAAQD,GAAK,EAAG,CACrC,GAAI45D,GAAO3iD,EAAKjX,GACZlK,EAAO2jE,EAAMG,GAAMC,aACvB,IAAIjrD,EAAKgrD,IAA+D,KAAtDhrD,EAAKgrD,GAAM5uD,WAAW6uD,cAAchyD,QAAQ/R,GAAc,CACxE6jE,GAAc,CACd,QAIJA,GACAD,EAAI9gE,KAAKgW,KAKjB8qD,EAAM7gE,EAGH6gE,EA9BX,MAAOF,GAuEX,QAAS7F,GAAMloD,GAKX,QAASquD,GAAYj9D,EAAM6O,GAEvB,MADAA,GAASA,GAAU,gBACZ7O,EAAO4O,EAAO5O,EAAM6O,GAAQA,OAAO,cAAgB,KAN9D,MAAOouD,GAUX,QAAS77D,KAKL,QAAS87D,GAAatiD,GAClB,MAAOA,GAAO,mBAAqB,oBALvC,MAAOsiD,GASX,QAASC,KAKL,QAASC,GAAgBxiD,GACrB,MAAYpH,SAARoH,EAA0B,sBACvBA,EAAO,iBAAmB,kBANrC,MAAOwiD,GAWX,QAASC,GAAYC,GAKjB,QAASC,GAAkBr7C,GACvB,MAAOo7C,GAAKE,YAAYt7C,GAL5B,MAAOq7C,GAUX,QAASE,GAAWH,GAKhB,QAASI,GAAiBx7C,GACtB,MAAOo7C,GAAKK,mBAAmBz7C,GALnC,MAAOw7C,GAUX,QAASE,KAKL,QAASC,GAAsBC,GAC3B,IAAKA,IAAcA,EAAUC,gBACzB,MAAO,EACX,QAAQD,EAAUC,iBACd,IAAK,UACD,MAAOphC,KAAUmhC,EAAUE,cAC/B,KAAK,QACD,MAAOrhC,KAAU+sB,IAAYoU,EAAUE,eAAiB,UAC5D,KAAK,UACD,MAAOrhC,KAAUmhC,EAAUE,cAAgB,OAEnD,MAAOF,GAAUE,cAfrB,MAAOH,GAoBX,QAASI,KAKL,QAASC,GAAWJ,GAChB,IAAKA,IAAcA,EAAUC,gBACzB,MAAO,EACX,QAAQD,EAAUC,iBACd,IAAK,UACD,MAAO,UACX,KAAK,QACD,MAAO,MACX,KAAK,UACD,MAAO,OAEf,MAAOD,GAAUE,cAfrB,MAAOE,GAmBX,QAASC,KAKL,QAASC,GAAaC,GAClB,IAAKA,EACD,MAAO,EACX,QAAQA,GACJ,IAAK,UACD,MAAO,QACX,KAAK,UACD,MAAO,OACX,KAAK,OACD,MAAO,OACX,KAAK,QACD,MAAO,QAEf,MAAOA,GAjBX,MAAOD,GAqBX,QAASE,KAKL,QAASC,GAAyBF,GAC9B,IAAKA,EACD,MAAO,EACX,QAAQA,GACJ,IAAK,SACD,MAAO,aACX,KAAK,WACD,MAAO,YAEf,MAAOA,GAbX,MAAOE,GAiBX,QAASC,KAKL,QAASC,GAAcX,GACnB,IAAKA,IAAcA,EAAUC,gBACzB,MAAO,EACX,QAAQD,EAAUC,iBACd,IAAK,UACD,MAAO,EACX,KAAK,QACD,MAAO,SACX,KAAK,UACD,MAAO,MAEf,MAAOD,GAAUC,gBAfrB,MAAOU,GAoBX,QAASC,KAKL,QAASC,GAAsBb,GAC3B,MAAKA,IAAcA,EAAUc,gBAEK,IAA9Bd,EAAUc,gBACH,SACFd,EAAUc,gBAAkB,GAC1BjiC,IAAUmhC,EAAUc,iBAAmB,SACX,KAA9Bd,EAAUc,gBACR,SACJd,EAAUc,gBAPN,GANf,MAAOD,GAkBX,QAASE,KAKL,QAASC,GAAgB1/D,GACrB,MAAKA,GAEY,SAARA,EACE,cACM,YAARA,EACE,QACM,UAARA,EACE,OACM,YAARA,EACE,UADN,OAPM,GANf,MAAO0/D,GAmBX,QAASC,KAKL,QAASC,GAAgBC,GAqDrB,QAASC,GAAI/7D,GACT,MAAQ,IAAJA,EACOg8D,EAAKh8D,GACZA,EAAI,KAAO,EACJi8D,EAAK95D,KAAKE,MAAMrC,EAAI,KAAO,IAC/Bi8D,EAAK95D,KAAKE,MAAMrC,EAAI,KAAO,MAAQk8D,EAAGl8D,EAAI,IAAM,IAxD3D,IAAK87D,IAAWA,EAAOnB,UACnB,MAAO,EACX,IAAIuB,IACA,MACA,KACA,KACA,KACA,OACA,MACA,KACA,MACA,MACA,MAEAF,GACA,OACA,MACA,MACA,MACA,QACA,OACA,MACA,OACA,OACA,MACA,MACA,SACA,UACA,SACA,UACA,UACA,UACA,QACA,QACA,SACA,SAEAC,GACA,MACA,KACA,OACA,KACA,MACA,QACA,MACA,QACA,QACA,MACA,KAWJ,OAAIH,GAAOnB,UAAUc,gBAAkB,GAC5B,eAAiBS,EAAGJ,EAAOnB,UAAUc,iBAAmB,QAAUM,EAAID,EAAOK,aAC1C,KAArCL,EAAOnB,UAAUc,gBACf,mBAAqBM,EAAID,EAAOK,aACpCL,EAAOK,YArElB,MAAON,GA0EX,QAASO,KACL,MAAO,UAAUC,GACb,IAAKA,GAAOA,EAAIp8D,OACZ,MAAO,EACX,IAAIwhC,GAAW66B,EAAOt8D,EAAGu8D,EAAQC,EAASC,EAAMxD,EAAO9jD,EAAQunD,EAAaC,CAC5E,OAAKC,UAASP,IAGThmE,QAAQwmE,SAASR,KAClBA,EAAMA,EAAIrxD,YAEdiuD,GAAS,GAAI,OAAQ,SAAU,UAAW,UAAW,aAAc,cAAe,aAClFuD,GACIM,GAAI,GAAI,KAAM,QAAS,OAAQ,SAAU,QAAS,OAAQ,QAAS,QAAS,QAC5E9oC,GAAI,GAAI,KAAM,OAAQ,KAAM,MAAO,QAAS,MAAO,QAAS,QAAS,OACrEC,GAAI,GAAI,KAAM,KAAM,KAAM,OAAQ,MAAO,KAAM,MAAO,MAAO,MAC7D8oC,KAAM,KAAM,QAAS,SAAU,QAAS,SAAU,SAAU,SAAU,OAAQ,OAAQ,SACtFC,KAAM,OAEVv7B,EAAY,MACZ46B,EAAMA,EAAIz0D,MAAM,IAAIvD,UAAUtO,KAAK,IAAIU,QAAQ,eAAgB,OAC1DmR,MAAM,IAAIvD,UAAUtO,KAAK,IAAI6R,MAAM,KAAKkI,IAAI,SAAUusD,GACnD,MAAO97B,OAAM,EAAI87B,EAAIp8D,QAAQlK,KAAK,KAAOsmE,IAEjDlnD,EAAS,WACL,GAAI8nD,EACJA,KACA,KAAKV,IAAUF,GACXM,EAAQN,EAAIE,GACZG,EAAc,WACV,GAAI7yC,GAAGwb,EAAK63B,CAEZ,KADAA,KACKl9D,EAAI6pB,EAAI,EAAGwb,EAAMs3B,EAAM18D,OAAYolC,EAAJxb,EAAS7pB,IAAM6pB,EAE/C,GADAyyC,EAAQK,EAAM38D,GACJ,IAANA,GAAqB,MAAVs8D,EACXY,EAAStkE,KAAK4jE,EAAQO,IAAIJ,EAAM,SAC7B,CAAA,GAAW,IAAN38D,GAAwB,MAAb28D,EAAM,IAAqC,KAAtBH,EAAQx8D,GAAGs8D,GAGnD,QAFAY,GAAStkE,KAAK4jE,EAAQx8D,GAAGs8D,IAKjC,MAAOY,MAEXR,EAAcA,EAAY3mE,KAAK0rC,GAC/Bg7B,EAAOC,EAAYz8D,OAAS,EAAI,IAAMg5D,EAAMoD,EAAIp8D,OAASs8D,EAAS,GAAK,GACvEU,EAAQrkE,KAAK8jE,EAAcD,EAE/B,OAAOQ,MAEX9nD,EAASA,EAAOoZ,OAAO,SAAUlc,GAC7B,MAAoB,KAAbA,EAAE6kD,SAEb/hD,EAASA,EAAOpf,KAAK0rC,GAAWy1B,OACjB,KAAX/hD,EACOA,EAEAqnD,EAAQQ,MAnDR,IAyDnB,QAASG,KAKL,QAASC,GAAqB/jE,GAC1B,GAAIgrD,IACAgZ,QAAW,OACXC,SAAY,OAEhB,OAAOjZ,GAAMhrD,GATjB,MAAO+jE,GAcX,QAAS7zD,KAKL,QAASg0D,GAAelkE,GACpB,GAAIgrD,IACAmZ,QAAW,SACXC,cAAiB,SACjBC,YAAe,WACfC,YAAe,qBAEnB,OAAOtZ,GAAMhrD,IAAU,SAX3B,MAAOkkE,GAgBX,QAASjyD,KAKL,QAASsyD,GAAiBvkE,GACtB,GAAI4E,IACA4/D,OAAU,OACVC,YAAe,YACfC,SAAY,UACZC,SAAY,kBAEhB,OAAO//D,GAAO5E,IAAU,SAX5B,MAAOukE,GAgBX,QAASp2C,KAKL,QAASy2C,GAAoB5kE,GACzB,GAAIgrD,IACA6Z,MAAS,cACTC,QAAW,aAEf,OAAO9Z,GAAMhrD,GATjB,MAAO4kE,GAcX,QAAS3oD,KAKL,QAAS8oD,GAAe/kE,GACpB,GAAIgrD,IACAga,OAAU,IACVC,KAAQ,IAEZ,OAAOja,GAAMhrD,GATjB,MAAO+kE,GAcX,QAASG,KAKL,QAASC,GAAgBnlE,GACrB,GAAIgrD,IACAoa,QAAW,QACXC,QAAW,SACXC,MAAS,QACTC,KAAQ,sBAEZ,OAAOva,GAAMhrD,GAXjB,MAAOmlE,GAgBX,QAASK,KAKL,QAASC,GAAgBzlE,GACrB,GAAIgrD,IACApW,MAAS,QACTC,SAAY,SACZC,OAAU,OACV4wB,IAAO,aAEX,OAAO1a,GAAMhrD,GAXjB,MAAOylE,GAgBX,QAASzzD,KAKL,QAASA,GAAShS,GACd,GAAIgrD,IACA2a,WAAc,yBACdC,cAAiB,sCACjBC,oBAAuB,2BACvBC,iBAAoB,wBAExB,OAAO9a,GAAMhrD,GAXjB,MAAOgS,GAgBX,QAAS+zD,KAKL,QAASA,GAAqB/lE,GAC1B,GAAIgrD,IACAva,OAAU,QACVu1B,MAAS,mBACTv/D,QAAW,0BACXw/D,kBAAqB,oBACrBC,YAAe,oCACfC,gBAAmB,oCACnBC,eAAkB,WAClBh5C,OAAU,QACVuB,OAAU,SACV03C,6BAAgC,4BAChCC,8BAAiC,oBACjCC,8BAAiC,eACjCC,gBAAmB,sBACnBC,6BAAgC,sCAChCl4C,mBAAsB,oBACtBm4C,yBAA4B,gBAC5BC,6BAAgC,gBAChCC,2BAA8B,gBAC9BC,cAAiB,gBAErB,OAAO7b,GAAMhrD,GA1BjB,MAAO+lE,GAgCX,QAASe,KAKL,QAASA,GAAgB9mE,GACrB,GAAIgrD,IACA+b,QAAW,YACXC,MAAS,QACTC,IAAO,aACPC,MAAS,+BACTC,KAAQ,gCACRC,SAAY,QACZ/+C,WAAc,QACdg/C,SAAY,SAEhB,OAAOrc,GAAMhrD,GAfjB,MAAO8mE,GAoBX,QAAS34D,KAKL,QAASm5D,GAAYtnE,GACjB,GAAIgrD,IACAuc,UAAa,SACbC,OAAU,aACVC,IAAO,OAEX,OAAOzc,GAAMhrD,GAVjB,MAAOsnE,GAeX,QAAS3jD,KAKL,QAAS+jD,GAAgB1nE,GACrB,GAAIR,IACAmoE,qBAAwB,mBACxBC,OAAU,eACVC,SAAY,YACZC,KAAQ,cAERC,aAAgB,0BAChBC,oBAAuB,wCACvBC,kCAAqC,mEACrCC,cAAiB,sFACjBC,+BAAkC,oFAClCC,mBAAsB,yDAEtBC,aAAgB,2DAChBC,UAAa,+BAEbC,gCAAmC,mDACnCC,qCAAwC,sDACxCC,iCAAoC,oEAGxC,OAAOjpE,GAAMQ,GAASR,EAAMQ,GAASA,EA1BzC,MAAO0nE,GA8BX,QAASgB,KAKL,QAASC,GAAsB3oE,GAC3B,GAAIR,IACAopE,YAAe,YACfC,OAAU,MACVf,KAAQ,MAEZ,OAAOtoE,GAAMQ,GAASR,EAAMQ,GAASA,EAVzC,MAAO2oE,GAcX,QAASG,KAKL,QAASC,GAAe/oE,GACpB,MAAKA,GAEO,IAARA,EACOA,EAAQ,IACP,IAARA,GACQA,EAAQ,KAAMiuD,QAAQ,GAAK,KAC3B,IAARjuD,GACQA,EAAQ,KAASiuD,QAAQ,GAAK,MAClCjuD,EAAQ,KAAYiuD,QAAQ,GAAK,KAP9B,IANf,MAAO8a,GAiBX,QAASC,GAAe3nE,GAGpB,QAAS4nE,GAAuB3qE,GAC5B,GAAIwd,GAAS,EAOb,OANAza,GAAkB+F,eAAe3H,QAAQ,SAAUJ,GAC/C,MAAIf,KAAQe,EAAKC,IAAMhB,IAAQe,EAAK2C,UAChC8Z,EAASzc,EAAKd,OADlB,SAKGud,EAVX,MAAOmtD,GAcX,QAASC,GAA4B7nE,GAGjC,QAAS8nE,GAAoC7pE,GACzC,GAAIwc,GAAS,EAMb,OALAza,GAAkBijD,qBAAqB7kD,QAAQ,SAAU2pE,GACjDA,EAAU9pE,KAAOA,IACjBwc,EAASstD,EAAU16D,WAGpBoN,EATX,MAAOqtD,GAaX,QAASE,KAKL,QAASA,GAAarpE,GAClB,GAAIR,IACA8pE,UAAa,WACbC,WAAc,gBACdC,sBAAyB,sBAE7B,OAAOhqE,GAAMQ,GAASR,EAAMQ,GAASA,EAVzC,MAAOqpE,GA33BX9K,EAAU7/D,SAAW,UACrBg9D,EAAMh9D,SAAW,UACjBkqB,EAAMlqB,SAAW,UACjBmgE,EAAgBngE,SAAW,UAC3BsgE,EAAOtgE,SAAW,UAClBwgE,EAAWxgE,SAAW,UACtB47D,EAAM57D,SAAW,UACjBmiE,EAAYniE,SAAW,QACvBuiE,EAAWviE,SAAW,QACtBsqE,EAAetqE,SAAW,qBAC1BwqE,EAA4BxqE,SAAW,qBAjLvC1B,QACKC,OAAO,OACPi4B,OAAO,UAAWjV,GAClBiV,OAAO,QAASwmC,GAChBxmC,OAAO,QAAStM,GAChBsM,OAAO,SAAU8pC,GACjB9pC,OAAO,kBAAmB2pC,GAC1B3pC,OAAO,YAAaqpC,GACpBrpC,OAAO,YAAag4B,GACpBh4B,OAAO,UAAWiL,GAClBjL,OAAO,WAAY6qC,GACnB7qC,OAAO,WAAYgpC,GACnBhpC,OAAO,YAAakpC,GACpBlpC,OAAO,cAAegrC,GACtBhrC,OAAO,QAASolC,GAChBplC,OAAO,SAAUtwB,GACjBswB,OAAO,YAAayrC,GACpBzrC,OAAO,cAAe2rC,GACtB3rC,OAAO,aAAc+rC,GACrB/rC,OAAO,kBAAmBksC,GAC1BlsC,OAAO,kBAAmBgtC,GAC1BhtC,OAAO,OAAQusC,GACfvsC,OAAO,UAAW8sC,GAClB9sC,OAAO,YAAaqtC,GACpBrtC,OAAO,aAAc6tC,GACrB7tC,OAAO,OAAQmtC,GACfntC,OAAO,iBAAkB4uC,GACzB5uC,OAAO,gBAAiB/G,GACxB+G,OAAO,WAAYhlB,GACnBglB,OAAO,aAAcjjB,GACrBijB,OAAO,SAAUysC,GACjBzsC,OAAO,qBAAsB4sC,GAC7B5sC,OAAO,WAAYjZ,GACnBiZ,OAAO,gBAAiBgwC,GACxBhwC,OAAO,YAAaswC,GACpBtwC,OAAO,WAAYljB,GACnBkjB,OAAO,uBAAwB6wC,GAC/B7wC,OAAO,kBAAmB4xC,GAC1B5xC,OAAO,aAAcgqC,GACrBhqC,OAAO,eAAgB8qC,GACvB9qC,OAAO,QAAS/mB,GAChB+mB,OAAO,YAAavR,GACpBuR,OAAO,kBAAmBwzC,GAC1BxzC,OAAO,WAAY4zC,GACnB5zC,OAAO,iBAAkB8zC,GACzB9zC,OAAO,8BAA+Bg0C,GACtCh0C,OAAO,eAAgBm0C,MAqgChC,WACI,YAEArsE,SACKC,OAAO,OACPwsE,SAAS,SAAUr3D,QACnBq3D,SAAS,OAAQ,UAAYhS,SAASt2D,KAAO,SAG7CsoE,SAAS,WAAY,iBACrBA,SAAS,kBAAmB,eAC5BA,SAAS,eAAgB,gBAKlC,WACI,YAOA,SAASh6B,GAAOi6B,EAAcC,EAAeC,EAAgBx3D,EAAQy3D,EAAcC,GAE/EJ,EAAaK,cAAa,GAG1BJ,EAAcK,aAAazqE,KAAK,mBAWhCqqE,EAAeK,YACXC,WAAW,EACXC,QAAS,SACTC,QAAS,OACZ/3D,OAAQ,eAITrV,QAAQqtE,OAAOR,GACXS,WAAW,EACXC,aAAa,EACbC,UAAW,6CACXC,gBAAiB,IACjBC,cAAe,kBACfC,mBAAmB,EACnBC,aAAa,EACbC,cAAc,EACdv9B,OAAQ,OACRw9B,QAAS,MAKb14D,EAAO24D,cAEPjB,EAAoB9tE,SAChBgvE,cAAgB,IAmIxBv7B,EAAO/wC,SAAW,eAAgB,gBAAiB,iBAAkB,SAAU,eAAgB,uBAlL/F1B,QACKC,OAAO,OACPwyC,OAAOA,MAuDhB,WACI,YAEAzyC,SACKC,OAAO,2BAShB,WACI,YAEAD,SACKC,OAAO,oBAQhBD,QAAQC,OAAO,OAAO+qC,KAAK,iBAAkB,SAASijC,GAAiBA,EAAet3B,IAAI,qBAAqB,mPAC/Gs3B,EAAet3B,IAAI,oDAAoD,6jKACvEs3B,EAAet3B,IAAI,wCAAwC,00DAC3Ds3B,EAAet3B,IAAI,oCAAoC,y4GACvDs3B,EAAet3B,IAAI,0CAA0C,0jEAC7Ds3B,EAAet3B,IAAI,6CAA6C;AAChEs3B,EAAet3B,IAAI,kDAAkD,s/IACrEs3B,EAAet3B,IAAI,sDAAsD,gvEACzEs3B,EAAet3B,IAAI,kDAAkD,utCACrEs3B,EAAet3B,IAAI,oEAAoE,04BACvFs3B,EAAet3B,IAAI,+DAA+D,q+BAClFs3B,EAAet3B,IAAI,+CAA+C,kgIAClEs3B,EAAet3B,IAAI,0CAA0C,2wJAC7Ds3B,EAAet3B,IAAI,wEAAwE,4hDAC3Fs3B,EAAet3B,IAAI,wDAAwD,i1EAC3Es3B,EAAet3B,IAAI,wDAAwD,29IAC3Es3B,EAAet3B,IAAI,sCAAsC,myFACzDs3B,EAAet3B,IAAI,gCAAgC;AACnDs3B,EAAet3B,IAAI,gCAAgC,utDACnDs3B,EAAet3B,IAAI,qCAAqC,uvFACxDs3B,EAAet3B,IAAI,0DAA0D,q9EAC7Es3B,EAAet3B,IAAI,6CAA6C,64JAChEs3B,EAAet3B,IAAI,0DAA0D,04EAC7Es3B,EAAet3B,IAAI,mDAAmD,mhGACtEs3B,EAAet3B,IAAI,0CAA0C,usFAC7Ds3B,EAAet3B,IAAI,iDAAiD;AACpEs3B,EAAet3B,IAAI,4CAA4C,6ohBAC/Ds3B,EAAet3B,IAAI,kDAAkD;AACrEs3B,EAAet3B,IAAI,+CAA+C,uyEAClEs3B,EAAet3B,IAAI,6CAA6C,o9JAChEs3B,EAAet3B,IAAI,oCAAoC,0lcACvDs3B,EAAet3B,IAAI,2CAA2C,02CAC9Ds3B,EAAet3B,IAAI,qCAAqC,4jDACxDs3B,EAAet3B,IAAI,yCAAyC;AAC5Ds3B,EAAet3B,IAAI,uCAAuC,slRAC1Ds3B,EAAet3B,IAAI,oCAAoC,myFACvDs3B,EAAet3B,IAAI,8CAA8C,09FACjEs3B,EAAet3B,IAAI,yCAAyC,+jVAC5Ds3B,EAAet3B,IAAI,kCAAkC;AACrDs3B,EAAet3B,IAAI,kDAAkD,ksDACrEs3B,EAAet3B,IAAI,0CAA0C,0vTAC7Ds3B,EAAet3B,IAAI,8CAA8C,mlDACjEs3B,EAAet3B,IAAI,wCAAwC,wvCAC3Ds3B,EAAet3B,IAAI,yCAAyC,2ydAC5Ds3B,EAAet3B,IAAI,oCAAoC;AACvDs3B,EAAet3B,IAAI,uCAAuC,+jHAC1Ds3B,EAAet3B,IAAI,8CAA8C,0gUACjEs3B,EAAet3B,IAAI,8CAA8C,obACjEs3B,EAAet3B,IAAI,0CAA0C,qcAC7Ds3B,EAAet3B,IAAI,8CAA8C,yZACjEs3B,EAAet3B,IAAI,0CAA0C,qWAC7Ds3B,EAAet3B,IAAI,+CAA+C,o3BAClEs3B,EAAet3B,IAAI,8CAA8C,oqCACjEs3B,EAAet3B,IAAI,6CAA6C,kPAChEs3B,EAAet3B,IAAI,8BAA8B,s7BACjDs3B,EAAet3B,IAAI,8BAA8B,goEACjDs3B,EAAet3B,IAAI,gCAAgC,y7GACnDs3B,EAAet3B,IAAI,sCAAsC,maACzDs3B,EAAet3B,IAAI,sCAAsC,gaACzDs3B,EAAet3B,IAAI,sCAAsC,4aACzDs3B,EAAet3B,IAAI,uCAAuC,uwIAC1Ds3B,EAAet3B,IAAI,mDAAmD;AACtEs3B,EAAet3B,IAAI,6CAA6C,k3DAChEs3B,EAAet3B,IAAI,iDAAiD,g8BACpEs3B,EAAet3B,IAAI,mEAAmE,srMACtFs3B,EAAet3B,IAAI,6EAA6E,ozgBAChGs3B,EAAet3B,IAAI,oDAAoD;AACvEs3B,EAAet3B,IAAI,uEAAuE,uwOAC1Fs3B,EAAet3B,IAAI,kDAAkD,q4JACrEs3B,EAAet3B,IAAI,uDAAuD,i7NAC1Es3B,EAAet3B,IAAI,6EAA6E,kzEAChGs3B,EAAet3B,IAAI,6DAA6D,4iDAChFs3B,EAAet3B,IAAI,oEAAoE;AACvFs3B,EAAet3B,IAAI,wEAAwE,iuLAC3Fs3B,EAAet3B,IAAI,uCAAuC,ocAC1Ds3B,EAAet3B,IAAI,qDAAqD,s+SACxEs3B,EAAet3B,IAAI,yDAAyD,i3GAC5Es3B,EAAet3B,IAAI,kEAAkE,ypCACrFs3B,EAAet3B,IAAI,gEAAgE,g3TACnFs3B,EAAet3B,IAAI,iDAAiD;AACpEs3B,EAAet3B,IAAI,yFAAyF,g0EAC5Gs3B,EAAet3B,IAAI,mDAAmD,+mNACtEs3B,EAAet3B,IAAI,wDAAwD,klKAC3Es3B,EAAet3B,IAAI,gEAAgE,osDACnFs3B,EAAet3B,IAAI,6DAA6D;AAChFs3B,EAAet3B,IAAI,6EAA6E,owCAChGs3B,EAAet3B,IAAI,mGAAmG,s8EACtHs3B,EAAet3B,IAAI,0DAA0D,gnEAC7Es3B,EAAet3B,IAAI,sDAAsD,gzDACzEs3B,EAAet3B,IAAI,4DAA4D,utMAC/Es3B,EAAet3B,IAAI,sDAAsD,q9XACzEs3B,EAAet3B,IAAI,mDAAmD,y8GACtEs3B,EAAet3B,IAAI,sDAAsD;AACzEs3B,EAAet3B,IAAI,0EAA0E,gkOAC7Fs3B,EAAet3B,IAAI,uEAAuE,ghUAC1Fs3B,EAAet3B,IAAI,gEAAgE,syEACnFs3B,EAAet3B,IAAI,wDAAwD;AAC3Es3B,EAAet3B,IAAI,6DAA6D,28EAChFs3B,EAAet3B,IAAI,mDAAmD,wkJACtEs3B,EAAet3B,IAAI,6CAA6C,83MAChEs3B,EAAet3B,IAAI,iEAAiE,w9HACpFs3B,EAAet3B,IAAI,kDAAkD,k7DACrEs3B,EAAet3B,IAAI,0DAA0D,+8FAC7Es3B,EAAet3B,IAAI,+DAA+D,4qBAClFs3B,EAAet3B,IAAI,8CAA8C,mMACjEs3B,EAAet3B,IAAI,sDAAsD","file":"scripts/app-45c6a427c7.js","sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app', [\r\n            //third party\r\n            'angular-loading-bar',\r\n            'angular-confirm',\r\n            'ADM-dateTimePicker',\r\n            'ngAnimate',\r\n            'ngSanitize',\r\n            'ngTable',\r\n            'pascalprecht.translate',\r\n            'toastr',\r\n            'ui.bootstrap',\r\n            'ui.router',\r\n            'ui.select',\r\n            'ui.toggle',\r\n            'ui.utils.masks',\r\n            'ui.validate',\r\n            'ui.mask',\r\n            'duScroll',\r\n            'angular.backtop',\r\n            'ngMaterial',\r\n            'chart.js',\r\n\r\n            //our modules\r\n            'auth',\r\n            'app.users',\r\n            'app.sample',\r\n            'app.directive',\r\n            'app.credit-supply-resource',\r\n            'app.contract-type',\r\n            'app.contract-code',\r\n            'app.investment-action',\r\n            'app.directive-approval-place',\r\n            'app.economic-section',\r\n            'app.province',\r\n            'app.employee',\r\n            'app.credit-supply-resource',\r\n            'app.directive-approval-place',\r\n            'app.economic-section',\r\n            'app.contract',\r\n            'app.assurance-type',\r\n            'app.monitoring',\r\n            'app.trace',\r\n            'app.conflict',\r\n            'app.checkList',\r\n            'app.conflict',\r\n            'app.permissions',\r\n            'app.roles',\r\n            'app.trace',\r\n            'app.branch',\r\n            'app.baseInfo',\r\n            'app.report',\r\n            'app.usersReport',\r\n            'app.loginlog',\r\n            'app.manage-user-guide',\r\n            'app.help',\r\n            'app.plan-type',\r\n            'app.isic',\r\n            'app.contract-filter',\r\n            'app.graphical-report'\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:sidebarSearch\r\n     * @description\r\n     * # sidebarSearch\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('sidebarSearch', sidebarSearch);\r\n\r\n    /** @ngInject */\r\n    function sidebarSearch() {\r\n        return {\r\n            templateUrl: 'app/main/sidebar/sidebar-search/sidebar-search.html',\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {\r\n                query: '='\r\n            },\r\n            controller: SidebarSearchCtrl,\r\n            controllerAs: 'vm',\r\n            bindToController: true // because the scope is isolated\r\n        };\r\n\r\n    }\r\n\r\n    /** @ngInject */\r\n    function SidebarSearchCtrl() {\r\n        /* jshint validthis: true */\r\n        // var vm = this;\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:headerNotification\r\n     * @description\r\n     * # headerNotification\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('headerNotification', headerNotification);\r\n\r\n    /** @ngInject */\r\n    function headerNotification() {\r\n        return {\r\n            bindToController: true,\r\n            controller: headerCtrl,\r\n            controllerAs: 'vm',\r\n            templateUrl: 'app/main/header/header-notification/header-notification.html',\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {}\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function headerCtrl($translate, Principal) {\r\n        var vm = this;\r\n        vm.Languages = [\r\n            {\r\n                key: 'fa_IR',\r\n                title: 'APP.LANG.FA_IR'\r\n            },\r\n            {\r\n                key: 'en_US',\r\n                title: 'APP.LANG.EN_US'\r\n            }\r\n        ];\r\n        vm.user = Principal.getIdentity();\r\n\r\n        vm.changeLanguage = changeLanguage;\r\n        vm.logout = logout;\r\n\r\n        function changeLanguage(langKey) {\r\n            $translate.use(langKey);\r\n        }\r\n\r\n        function logout() {\r\n            Principal.logout();\r\n        }\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('ScoreDetailController', ScoreDetailController);\r\n\r\n    /** @ngInject */\r\n    function ScoreDetailController($uibModalInstance, $log, UsersReportService, scoreItem) {\r\n        var vm = this;\r\n        vm.close = close;\r\n        vm.scoreItem = scoreItem;\r\n        vm.title = 'Score Detail Controller';\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title + ' activated', scoreItem);\r\n            getDetails();\r\n        }\r\n\r\n        function close() {\r\n            $uibModalInstance.dismiss();\r\n        }\r\n\r\n        function getDetails() {\r\n            var steps = [];\r\n            if (scoreItem.step.id === 1) {\r\n                steps = [0, 2, 3];\r\n            } else\r\n                steps.push(scoreItem.step.id);\r\n            vm.items = [];\r\n            steps.forEach(function (step) {\r\n                UsersReportService.getDetails(scoreItem.action, scoreItem.user.username, step, scoreItem.fromDate, scoreItem.toDate,scoreItem.provinceId).then(function (value) {\r\n                    vm.items = vm.items.concat(value);\r\n                });\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .controller('TraceFlowController', TraceFlowController);\r\n\r\n    /** @ngInject */\r\n    function TraceFlowController($uibModalInstance, NgTableParams, $stateParams, $log, TraceService) {\r\n        var vm = this;\r\n\r\n        vm.monitor = {};\r\n        vm.processLogs = [];\r\n        vm.traceId = $stateParams.id;\r\n        vm.close = close;\r\n        vm.title = 'Trace Flow Controller';\r\n        vm.actuator = $stateParams.user;\r\n        vm.creator = $stateParams.creator;\r\n        vm.createDate = $stateParams.createDate;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(vm.title + ' activated');\r\n            vm.isModal = $uibModalInstance !== null;\r\n            vm.tableParams = new NgTableParams({}, {\r\n                counts: [],\r\n                getData: getAllTraceProcessLogs\r\n            });\r\n        }\r\n\r\n        function getAllTraceProcessLogs() {\r\n            if (vm.traceId) {\r\n                return TraceService.getProcessLogsTrace(vm.traceId).then(\r\n                    function (data) {\r\n                        // console.log(data);\r\n                        vm.processLogs = data ? [].concat(data) : [];\r\n                        return vm.processLogs;\r\n                    });\r\n            }\r\n\r\n        }\r\n\r\n\r\n        function close() {\r\n            $uibModalInstance.dismiss();\r\n        }\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/11/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('UserMonitoringsController', UserMonitoringsController);\r\n\r\n    /** @ngInject */\r\n    function UserMonitoringsController($log, host, $uibModalInstance, $filter, MonitoringService, ProvinceService, $scope, UserService, $stateParams, Util, Principal) {\r\n        var vm = this;\r\n\t    var hasChanged = false;\r\n        vm.monitoring = {};\r\n        vm.newUserMonitoring = {};\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.userMonitorings = [];\r\n        vm.tempUserMonitorings = [];\r\n        vm.allUsers = [];\r\n        vm.observers = [];\r\n\t    vm.title = 'Monitoring > User Monitoring Controller';\r\n        vm.toggleEdit = [];\r\n        vm.fulldate = {};\r\n        vm.teamHeadsMap = {};\r\n        vm.teamHeads = [{name: 'در حال بارگذاری ...'}];\r\n        vm.province ={};\r\n        vm.provinces = [];\r\n        vm.host = host;\r\n\t    vm.close = close;\r\n\r\n        vm.cancelEdit = cancelEdit;\r\n        vm.editUserMonitoring = editUserMonitoring;\r\n        vm.deleteUserMonitoring = deleteUserMonitoring;\r\n        vm.addUserMonitoring = addUserMonitoring;\r\n        vm.getSignUrl = getSignUrl;\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.changeTeamHead = changeTeamHead;\r\n        vm.groupFinder = UserService.groupTitle;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            $log.log($stateParams);\r\n\t        vm.isModal = !!$uibModalInstance;\r\n            if (vm.isModal) {\r\n                vm.monitoring = $stateParams.monitoring;\r\n                vm.userMonitorings = vm.monitoring.userMonitorings;\r\n                vm.tempUserMonitorings = angular.copy(vm.userMonitorings);\r\n                vm.state = vm.monitoring.currentStep.name;\r\n            }\r\n            else\r\n                getMonitoring();\r\n            getTeamHeads();\r\n        }\r\n\r\n        function getSignUrl(user) {\r\n            vm.signUrl = vm.host + \"/lmsUserManagement/user/\" +user.username+ \"/getSign\";\r\n            return vm.signUrl;\r\n        }\r\n\r\n        function cancelEdit(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n            vm.userMonitorings[index] = angular.copy(vm.tempUserMonitorings[index]);\r\n        }\r\n\r\n        function addUserMonitoring() {\r\n            var isObserver = false;\r\n            vm.newUserMonitoring.roles.forEach(function (role) {\r\n                if (role.role === 'OBSERVER')\r\n                    isObserver = true;\r\n            });\r\n            if (!isObserver) {\r\n                Util.toast('error', 'User should have OBSERVER role');\r\n                return;\r\n            }\r\n            var params = {\r\n                expertUsername : vm.newUserMonitoring.username\r\n            };\r\n            MonitoringService.addUserMonitoring(vm.monitoringId, params).then(function (data) {\r\n                getMonitoring();\r\n                vm.newUserMonitoring = {};\r\n                Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n\t            hasChanged = true;\r\n            }, function () {\r\n                vm.newUserMonitoring = {};\r\n            });\r\n        }\r\n\r\n        function deleteUserMonitoring(userMonitoring, index) {\r\n            var params = {\r\n                expertUsername : userMonitoring.lmsUser.username\r\n            };\r\n            MonitoringService.deleteUserMonitoring(vm.monitoringId, params).then(function (data) {\r\n                getMonitoring();\r\n\t            hasChanged = true;\r\n                Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n            });\r\n        }\r\n\r\n        function editUserMonitoring(userMonitoring, index) {\r\n            if (!Util.compareObjects(vm.userMonitorings[index], vm.tempUserMonitorings[index])) {\r\n                var params = {userMonitoringId: userMonitoring.id};\r\n                userMonitoring.date = userMonitoring.date ? $filter('sDate')(userMonitoring.date) : null;\r\n                MonitoringService.UpdateUserMonitoringInMonitoring(vm.monitoringId, userMonitoring, params).then(\r\n                    function () {\r\n                        Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                        vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n                        vm.tempUserMonitorings[index] = angular.copy(vm.userMonitorings[index]);\r\n                        getMonitoring(vm.monitoringId);\r\n\t                    hasChanged = true;\r\n                    },\r\n                    function () {\r\n                        Util.toast('error', 'APP.MESSAGES.FAIL', 'edit userMonitoring error');\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            var provinceId = vm.monitoring.organizationLevel === 'STAFF' ? null : vm.monitoring.contract.province.id;\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n        function getTeamHeads() {\r\n            vm.loading = true;\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n                vm.loading = false;\r\n            });\r\n        }\r\n\r\n        function getMonitoring() {\r\n            return MonitoringService.getMonitoringById(vm.monitoringId).then(\r\n                function (data) {\r\n                    vm.monitoring = data ? data : {};\r\n                    vm.userMonitorings = vm.monitoring.userMonitorings;\r\n                    vm.tempUserMonitorings = angular.copy(vm.userMonitorings);\r\n                    vm.state = data.currentStep.name;\r\n                    return vm.monitoring;\r\n                }\r\n            );\r\n        }\r\n\t\r\n\t    function close() {\r\n\t\t    $uibModalInstance.close(hasChanged);\r\n\t    }\r\n\r\n        function changeTeamHead() {\r\n            if (!vm.newTeamHead || !vm.newTeamHead.username)\r\n                return;\r\n            MonitoringService.changeTeamHead(vm.monitoring.id, vm.newTeamHead.username).then(function () {\r\n                vm.monitoring.teamHead = angular.copy(vm.newTeamHead);\r\n                vm.newTeamHead = false;\r\n                vm.editHead = false;\r\n                Util.toast('success');\r\n            }, function (reason) {\r\n                if (reason.status != 403)\r\n                    Util.toast('error', 'Changing the team head is not allowed in this state.')\r\n            });\r\n        }\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/10/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringTraceController', MonitoringTraceController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringTraceController(TraceService, $log, $filter, $stateParams, UserService, $scope, Principal,\r\n                                       $confirm, NgTableParams, Util) {\r\n        var vm = this;\r\n        vm.trace = {};\r\n        vm.allUsers = [];\r\n        var originalTraces = {};\r\n        vm.loading = false;\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.fromConvertDebit = $stateParams.step == \"fromConvertDebit\";\r\n\r\n        vm.addTrace = addTrace;\r\n        vm.cancelAdd = cancelAdd;\r\n        vm.updateTrace = updateTrace;\r\n        vm.cancelUpdate = cancelUpdate;\r\n        vm.deleteTrace = deleteTrace;\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.setDate = setDate;\r\n        vm.steps = TraceService.getStepsSync;\r\n        vm.groupFinder = UserService.groupTitle;\r\n\r\n        vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n        vm.next = $scope.$parent.vm.next;\r\n        vm.previous = $scope.$parent.vm.previous;\r\n        vm.title = 'Monitoring Trace Controller';\r\n\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getMonitoring(true).then(checkAdd);\r\n            getAllTraces();\r\n\r\n        }\r\n\r\n        function getAllTraces() {\r\n            return TraceService.getTracesByMonitoring(vm.monitoringId).then(\r\n                function (data) {\r\n                    console.log('vm.traces', data.content);\r\n                    vm.traces = data ? data.content : [];\r\n                    Principal.identity().then(function (user) {\r\n                        vm.traces.forEach(function (trace) {\r\n                            trace.canEdit = trace.createUsername === user.username;\r\n                            originalTraces[trace.id] = angular.copy(trace);\r\n                        });\r\n                    });\r\n\r\n                    vm.loading = false;\r\n                    return vm.traces;\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.trace = {};\r\n        }\r\n\r\n        function getMonitoring(doNotUpdate) {\r\n            return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                function (data) {\r\n                    vm.monitoring = data ? data : {};\r\n                    return vm.monitoring;\r\n                }\r\n            );\r\n        }\r\n\r\n        function addTrace() {\r\n            if (!vm.trace.alertDate || !vm.trace.user || !vm.trace.description)\r\n                return;\r\n            vm.loading = true;\r\n            vm.trace.forCommitmentConvert = vm.fromConvertDebit ? vm.fromConvertDebit : null\r\n            vm.trace.monitoring = {id: vm.monitoring.id};\r\n            var newTrace = angular.copy(vm.trace);\r\n            // newTrace.alertDate = vm.trace.alertDate ? $filter('sDate')(vm.trace.alertDate) : null;\r\n            TraceService.createTrace(newTrace).then(\r\n                function () {\r\n                    Util.toast('success', \"APP.MESSAGES.SUCCESS\");\r\n                    getAllTraces();\r\n                    vm.cancelAdd();\r\n                }, function () {\r\n                    vm.loading = false;\r\n                });\r\n        }\r\n\r\n        function updateTrace(trace) {\r\n            if (!trace.alertDate || !trace.user || !trace.description)\r\n                return;\r\n            vm.loading = true;\r\n            vm.editing = true;\r\n            trace.monitoring = {id: vm.monitoring.id};\r\n            trace.forCommitmentConvert = vm.fromConvertDebit ? vm.fromConvertDebit : null\r\n            TraceService.updateTrace(trace.id, trace).then(function () {\r\n                Util.toast('success', \"APP.MESSAGES.SUCCESS\");\r\n                trace.editing = false;\r\n                vm.editing = false;\r\n                vm.loading = false;\r\n            }, function () {\r\n                vm.loading = false;\r\n            });\r\n        }\r\n\r\n        function cancelUpdate(trace) {\r\n            for (var i = 0; i < vm.traces.length; i++)\r\n                if (vm.traces[i].id === trace.id) {\r\n                    vm.traces[i] = originalTraces[trace.id];\r\n                    vm.traces[i].editing = false;\r\n                }\r\n            vm.loading = false;\r\n        }\r\n\r\n        function deleteTrace(trace) {\r\n            $confirm().then(function () {\r\n                vm.loading = true;\r\n                TraceService.deleteTrace(trace.id).then(function () {\r\n                    Util.toast('success', \"APP.MESSAGES.SUCCESS\");\r\n                    getAllTraces();\r\n                });\r\n            });\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            var provinceId = vm.monitoring.organizationLevel === 'STAFF' ? null : vm.monitoring.contract.province.id;\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n        function checkAdd() {\r\n            Principal.identity().then(function (user) {\r\n                vm.canAdd = true;//\tvm.monitoring.currentStep.id > 4 && user.level === vm.monitoring.organizationLevel;\r\n                /*if (vm.canAdd) {\r\n                    if (vm.monitoring.organizationLevel === 'STAFF') {\r\n                        console.log(vm.monitoring.contract.economicSection.id === user.economicSection.id);\r\n                        vm.canAdd = Principal.isInRole('TEAM_HEAD') && vm.monitoring.contract.economicSection &&\r\n                            user.economicSection &&\r\n                            vm.monitoring.contract.economicSection.id === user.economicSection.id;\r\n                    }\r\n                    else if (vm.monitoring.organizationLevel === 'PROVINCE')\r\n                        vm.canAdd = Principal.isInRole('PROVINCE_HEAD');\r\n                }*/\r\n            });\r\n\r\n        }\r\n\r\n        function setDate(days) {\r\n            var tmpDate = new Date();\r\n            tmpDate.setDate(tmpDate.getDate() + days);\r\n            vm.trace.alertDate = $filter('sDate')($filter('jeDate')(tmpDate));\r\n        }\r\n\r\n        $scope.$on('next_trace', function (event, update) {\r\n            console.log('on next_trace event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $scope.$on('previous_trace', function (event, update) {\r\n            console.log('on previous_trace event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringProgressController', MonitoringProgressController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringProgressController($rootScope, $stateParams, $log, NgTableParams, MonitoringService, $scope, Util) {\r\n        var vm = this;\r\n\r\n        vm.monitoring = {};\r\n        vm.progresses = [];\r\n        vm.progress = {};\r\n        vm.toggleEdit = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getInvestmentCostMonitoring\r\n        });\r\n        vm.sumDirectiveBasedAmount = 0;\r\n        vm.sumPaymentToDirectivePercent = 0;\r\n        vm.sumInvoiceToDirectivePercent = 0;\r\n        vm.sumProgressRate = 0;\r\n        vm.title = 'Monitoring progress List Controller Active';\r\n\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n\r\n        vm.cancelEdit = cancelEdit;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\t        updateAllowedActions(true);\r\n        }\r\n\r\n        function getInvestmentCostMonitoring() {\r\n            return MonitoringService.getInvestmentCostMonitoring(vm.monitoringId).then(\r\n                function (data) {\r\n                    vm.progresses = data ? data : [];\r\n                    vm.sumDirectiveBasedAmount = 0;\r\n\t                vm.sumPaymentToDirective = 0;\r\n                    vm.sumPaymentToDirectivePercent = 0;\r\n\t                vm.sumInvoiceToDirective = 0;\r\n                    vm.sumInvoiceToDirectivePercent = 0;\r\n                    vm.sumProgressRate = 0;\r\n                    vm.progresses.forEach(function (progress) {\r\n\r\n                        progress.invoiceBasedAmount = progress.invoiceBasedAmount ? progress.invoiceBasedAmount : 0;\r\n                        progress.paymentBasedAmount = progress.paymentBasedAmount ? progress.paymentBasedAmount :0;\r\n\t                    progress.invoiceBasedToDirectiveBasedAmountRate = progress.invoiceBasedToDirectiveBasedAmountRate ? progress.invoiceBasedToDirectiveBasedAmountRate * 100 : 0;\r\n\t                    progress.paymentBasedToDirectiveBasedAmountRate = progress.paymentBasedToDirectiveBasedAmountRate ? progress.paymentBasedToDirectiveBasedAmountRate * 100 : 0;\r\n                        progress.progressRate = progress.progressRate ? progress.progressRate : 0;\r\n\r\n                        vm.sumDirectiveBasedAmount += progress.directiveBasedAmount;\r\n\t                    vm.sumPaymentToDirective += progress.paymentBasedAmount ? progress.paymentBasedAmount : 0;\r\n\t                    vm.sumInvoiceToDirective += progress.invoiceBasedAmount ? progress.invoiceBasedAmount : 0;\r\n\t                    vm.sumProgressRate += (progress.progressRate ? (progress.progressRate / 100) : 0) * progress.directiveBasedAmount;\r\n\r\n                        progress.invoiceBasedToDirectiveBasedAmountRate = Math.round(progress.invoiceBasedToDirectiveBasedAmountRate);\r\n                        progress.paymentBasedToDirectiveBasedAmountRate = Math.round(progress.paymentBasedToDirectiveBasedAmountRate);\r\n                    });\r\n                    vm.sumProgressRate = Math.floor((vm.sumProgressRate / vm.sumDirectiveBasedAmount) * 100);\r\n                    vm.sumPaymentToDirectivePercent = Math.floor(vm.sumPaymentToDirective / vm.sumDirectiveBasedAmount * 100);\r\n                    vm.sumInvoiceToDirectivePercent = Math.floor(vm.sumInvoiceToDirective / vm.sumDirectiveBasedAmount * 100);\r\n                    return vm.progresses;\r\n                });\r\n\t\r\n        }\r\n\r\n        function cancelEdit(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n            vm.progress = {};\r\n            vm.tableParams.reload();\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.allowedAction = data;\r\n\t\t\t    });\r\n\t    }\r\n\t\r\n\t    $rootScope.$on('stateChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    updateAllowedActions(false);\r\n\t    });\r\n\r\n        $rootScope.$on('next_progress', function (event, update) {\r\n            console.log('on next_progress event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_progress', function (event, update) {\r\n            console.log('on previous_progress event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/5/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringPreConditionsController', MonitoringPreConditionsController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringPreConditionsController($scope,$rootScope, $stateParams, $log, DirectiveService, MonitoringService, Util) {\r\n        var vm = this;\r\n        vm.monitoring = {};\r\n        vm.monitoringPreConditions = [];\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.directive = {};\r\n        vm.preConditions = [];\r\n        vm.replys = [\r\n\t        {value: \"INCOMPLETED\", name: \"دارای نقص\"},\r\n\t        {value: \"FAILED\", name: \"خیر\"},\r\n\t        {value: \"DONE\", name: \"بله\"}\r\n        ];\r\n        vm.title = \"Monitoring PreConditionsController active\";\r\n\t    vm.setConditionInMonitoring = setConditionInMonitoring;\r\n\t    vm.deletePrecondition = deletePrecondition;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n\t    \r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\t        getMonitoringById(true);\r\n\t        updateAllowedActions(true);\r\n        }\r\n\t\r\n\t    function getMonitoringById(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.monitoring = data ? data : {};\r\n                    vm.directive = vm.monitoring.directive;\r\n\t\t\t\t    if (vm.monitoring.directive.dirNumber) {\r\n\t\t\t\t\t    handlePreConditions();\r\n\t\t\t\t\t    return vm.monitoring;\r\n\t\t\t\t    }\r\n\t\t\t    });\r\n\t    }\r\n\r\n\t    function handlePreConditions() {\r\n\t\t    vm.monitoringPreConditions = vm.monitoring.dirConditions;\r\n\t\t    vm.monitoring.monitoringConditions.forEach(function (monitoringCondition) {\r\n\t\t\t    vm.monitoringPreConditions.forEach(function (monitoringPreCondition) {\r\n\t\t\t\t    if (monitoringCondition.dirCondition.id === monitoringPreCondition.id) {\r\n\t\t\t\t\t    monitoringPreCondition.reply = monitoringCondition.reply;\r\n\t\t\t\t\t    monitoringPreCondition.originalId = monitoringCondition.id;\r\n                        monitoringPreCondition.description = monitoringCondition.description;\r\n\t\t\t\t    }\r\n\t\t\t    })\r\n\t\t    });\r\n\t\t    vm.preConditions = [];\r\n\t\t    vm.monitoringPreConditions.forEach(function (monitoringPreCondition) {\r\n\t\t\t    var preCondition = {\r\n\t\t\t\t    dirCondition: monitoringPreCondition,\r\n\t\t\t\t    monitoring: {id: vm.monitoringId},\r\n\t\t\t\t    id: monitoringPreCondition.originalId,\r\n                    reply: monitoringPreCondition.reply,\r\n                    description: monitoringPreCondition.description\r\n\t\t\t    };\r\n\t\t\t    vm.preConditions.push(preCondition);\r\n\t\t    });\r\n            // console.log(vm.preConditions);\r\n        }\r\n\r\n        function setConditionInMonitoring() {\r\n            var subPreConditions = [];\r\n            for (var i = 0; i < vm.preConditions.length; i++) {\r\n\t            if (vm.preConditions[i].reply) {\r\n                    vm.preConditions[i].dirCondition.monitoring = {\r\n                        id: vm.monitoringId\r\n                    };\r\n\t\t            subPreConditions.push(vm.preConditions[i]);\r\n\t            }\r\n\t            \r\n            }\r\n            return MonitoringService.SetConditionInMonitoring(vm.monitoringId, subPreConditions).then(successCallback);\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                getMonitoringById(false);\r\n            }\r\n\r\n            function failureCallback(e) {\r\n                Util.toast('error');\r\n            }\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.allowedAction = data;\r\n\t\t\t    });\r\n\t    }\r\n\t\r\n\t    function deletePrecondition(precondition) {\r\n\t\t\r\n\t\t    var params = {\r\n\t\t\t    monitoringConditionId: precondition.dirCondition.originalId\r\n\t\t    };\r\n\t\t    MonitoringService.deleteConditionFromMonitoring(vm.monitoring.id, params).then(function () {\r\n\t\t\t    Util.toast('success');\r\n\t\t\t    getMonitoringById(false);\r\n\t\t    }, function () {\r\n\t\t\t    Util.toast('error');\r\n\t\t    })\r\n\t    }\r\n\t\r\n\t    $rootScope.$on('stateChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    updateAllowedActions(false);\r\n\t    });\r\n\r\n        $rootScope.$on('next_preConditions', function (event, update) {\r\n            console.log('on next_preConditions event', update);\r\n            if (update) {\r\n                setConditionInMonitoring().then(function () {\r\n                    $scope.$emit('next', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n        });\r\n        $rootScope.$on('previous_preConditions', function (event, update) {\r\n            console.log('on previous_preConditions event', update);\r\n            if (update) {\r\n                setConditionInMonitoring().then(function () {\r\n                    $scope.$emit('previous', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('MonitoringPaymentsController', MonitoringPaymentsController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction MonitoringPaymentsController($rootScope, $confirm, $stateParams, $log, $filter, NgTableParams, ConflictService, $scope,\r\n\t                                      MonitoringService, InvestmentActionService, DirectiveService, Util) {\r\n\t\tvar vm = this;\r\n\t\t\r\n\t\tvm.payment = {};\r\n\t\tvm.payments = [];\r\n\t\tvm.conflicts = [];\r\n\t\tvm.investmentActions = [];\r\n\t\tvm.toggleEdit = [];\r\n\t\tvar firstLoad = true;\r\n\t\tvm.tableParams = new NgTableParams({}, {\r\n\t\t\tcounts: [],\r\n\t\t\tgetData: getMonitoringById\r\n\t\t});\r\n\t\tvm.payees = [\r\n\t\t\t{key: 'APPLICANT', caption: 'متقاضی'},\r\n\t\t\t{key: 'ISSUER', caption: 'صادر کننده'},\r\n\t\t\t{key: 'ETC', caption: 'سایر'}\r\n\t\t];\r\n\t\tvm.title = 'Monitoring Payment List Controller Active';\r\n\t\tvm.bankQouta = [];\r\n\t\tvm.applicantQouta = [];\r\n\t\tvm.countQouta = [];\r\n\t\tvm.sumBankSharedChequeAmount = 0;\r\n\t\tvm.sumApplicantSharedChequeAmount = 0;\r\n\t\tvm.sumTotalAmount = 0;\r\n\t\t\r\n\t\tvm.sumDirectiveBasedBankShared = 0;\r\n\t\tvm.sumPaymentBasedBankShared = 0;\r\n\t\tvm.sumDirectiveBasedApplicantShared = 0;\r\n\t\tvm.sumPaymentBasedApplicantShared = 0;\r\n\t\tvm.sumPaymentStepCount = 0;\r\n\t\tvm.sumChequeCount = 0;\r\n\t\tvm.showSortInvestmentAction = true;\r\n\t\t\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\t\r\n\t\tvm.addPayment = addPayment;\r\n\t\tvm.updatePayment = updatePayment;\r\n\t\tvm.deletePaymentFromMonitoring = deletePaymentFromMonitoring;\r\n\t\tvm.cancelEdit = cancelEdit;\r\n\t\tvm.sort = sort;\r\n\t\tvm.keyPressed = keyPressed;\r\n\t\tvm.payeeConflict = payeeConflict;\r\n\t\tvm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t\tvm.next = $scope.$parent.vm.next;\r\n\t\tvm.previous = $scope.$parent.vm.previous;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n\t\t\tgetAllInvestmentActions();\r\n\t\t\tupdateAllowedActions(true);\r\n\t\t}\r\n\r\n\t\tfunction sort(){\r\n\t\t\tconsole.log(\"vm.payments before sort = \", vm.payments);\r\n\t\t\tvm.payments.reverse();\r\n\t\t\tconsole.log(\"vm.payments = after sort\", vm.payments);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getMonitoringById() {\r\n\t\t\treturn $scope.$parent.vm.getMonitoring(firstLoad).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tfirstLoad = false;\r\n\t\t\t\t\tvm.monitoring = data;\r\n\t\t\t\t\tvm.payments = data ? data.monitoringPayments : [];\r\n\t\t\t\t\tvm.sumBankSharedChequeAmount = 0;\r\n\t\t\t\t\tvm.sumApplicantSharedChequeAmount = 0;\r\n\t\t\t\t\tvm.payments.forEach(function (payment) {\r\n\t\t\t\t\t\tvm.sumBankSharedChequeAmount += payment.bankSharedChequeAmount;\r\n\t\t\t\t\t\tvm.sumApplicantSharedChequeAmount += payment.applicantSharedChequeAmount;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.sumTotalAmount = vm.sumBankSharedChequeAmount + vm.sumApplicantSharedChequeAmount;\r\n\t\t\t\t\t\r\n\t\t\t\t\tgetDirectivePayments();\r\n\t\t\t\t\tgetAllConflict();\r\n\t\t\t\t\t\r\n\t\t\t\t\tvm.payments.forEach(function (payment) {\r\n\t\t\t\t\t\tpayment.key = payment.investmentAction.id;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar paymentsOrderedArray = $filter('orderBy')(vm.payments, 'key', false);\r\n\t\t\t\t\tvm.payments = $filter('orderBy')(vm.payments, 'key', false);\r\n\t\t\t\t\t// console.log(\" vm.payments\" , vm.payments);\r\n\t\t\t\t\treturn vm.payments;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllInvestmentActions() {\r\n\t\t\treturn InvestmentActionService.getAllInvestmentActions().then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.investmentActions = data ? data : [];\r\n\t\t\t\t\treturn vm.investmentActions;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllConflict() {\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\t\t\treturn ConflictService.getPaymentConflict(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.conflicts = data ? data : [];\r\n\t\t\t\t\tvm.dirPaymentPerParts.forEach(function (dirPaymentPart) {\r\n\t\t\t\t\t\tvar notExist = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.conflicts.length; i++) {\r\n\t\t\t\t\t\t\tif (vm.conflicts[i].investmentAction.id === dirPaymentPart.investmentAction.id)\r\n\t\t\t\t\t\t\t\tnotExist = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (notExist) {\r\n\t\t\t\t\t\t\tvm.conflicts.push({\r\n\t\t\t\t\t\t\t\tchequeCount: 0,\r\n\t\t\t\t\t\t\t\tdirectiveBasedBankShared: dirPaymentPart.bankShareAmount,\r\n\t\t\t\t\t\t\t\tdirectiveBasedApplicantShared: dirPaymentPart.applicantShareAmount,\r\n\t\t\t\t\t\t\t\tinvestmentAction: dirPaymentPart.investmentAction,\r\n\t\t\t\t\t\t\t\tpaymentBasedApplicantShared: 0,\r\n\t\t\t\t\t\t\t\tpaymentBasedBankShared: 0,\r\n\t\t\t\t\t\t\t\tpaymentStepCount: dirPaymentPart.paymentStepCount\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (var i = 0; i < vm.conflicts.length; i++) {\r\n\t\t\t\t\t\tvar paymentBasedBankShared = vm.conflicts[i].paymentBasedBankShared ? vm.conflicts[i].paymentBasedBankShared : 0;\r\n\t\t\t\t\t\tvar directiveBasedBankShared = vm.conflicts[i].directiveBasedBankShared ? vm.conflicts[i].directiveBasedBankShared : 0;\r\n\t\t\t\t\t\tvar paymentBasedApplicantShared = vm.conflicts[i].paymentBasedApplicantShared ? vm.conflicts[i].paymentBasedApplicantShared : 0;\r\n\t\t\t\t\t\tvar directiveBasedApplicantShared = vm.conflicts[i].directiveBasedApplicantShared ? vm.conflicts[i].directiveBasedApplicantShared : 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (paymentBasedBankShared === directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedBankShared > directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"OrangeBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedBankShared < directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"RedBG \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (paymentBasedApplicantShared === directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedApplicantShared > directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedApplicantShared < directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"RedBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(i, vm.conflicts[i].paymentStepCount, vm.conflicts[i].chequeCount)\r\n\t\t\t\t\t\tif (vm.conflicts[i].paymentStepCount > vm.conflicts[i].chequeCount) {\r\n\t\t\t\t\t\t\tvm.countQouta[i] = \"RedBG\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvm.countQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvm.sumDirectiveBasedBankShared = 0;\r\n\t\t\t\t\tvm.sumPaymentBasedBankShared = 0;\r\n\t\t\t\t\tvm.sumDirectiveBasedApplicantShared = 0;\r\n\t\t\t\t\tvm.sumPaymentBasedApplicantShared = 0;\r\n\t\t\t\t\tvm.sumPaymentStepCount = 0;\r\n\t\t\t\t\tvm.sumChequeCount = 0;\r\n\t\t\t\t\tvm.conflicts.forEach(function (conflist) {\r\n\t\t\t\t\t\tvm.sumDirectiveBasedBankShared += conflist.directiveBasedBankShared;\r\n\t\t\t\t\t\tvm.sumPaymentBasedBankShared += conflist.paymentBasedBankShared;\r\n\t\t\t\t\t\tvm.sumDirectiveBasedApplicantShared += conflist.directiveBasedApplicantShared;\r\n\t\t\t\t\t\tvm.sumPaymentBasedApplicantShared += conflist.paymentBasedApplicantShared;\r\n\t\t\t\t\t\tvm.sumPaymentStepCount += conflist.paymentStepCount;\r\n\t\t\t\t\t\tvm.sumChequeCount += conflist.chequeCount;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn vm.conflicts;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction addPayment(form) {\r\n\t\t\tif (form.$invalid)\r\n\t\t\t\treturn;\r\n\t\t\t// vm.payment.chequeDate = vm.payment.chequeDate ? $filter('sDate')(vm.payment.chequeDate) : null;\r\n\t\t\tMonitoringService.AddPaymentToMonitoring(vm.monitoringId, vm.payment).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\tvm.payment = {};\r\n\t\t\t\t\tvm.tableParams.reload();\r\n\t\t\t\t\tgetAllConflict();\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction updatePayment(PaymentId, payment, index) {\r\n\t\t\t// payment.chequeDate = payment.chequeDate ? $filter('sDate')(payment.chequeDate) : null;\r\n\t\t\tvar params = {monitoringPaymentId: PaymentId};\r\n            payment.monitoring = {\r\n                monitoring: vm.monitoring.id\r\n            };\r\n\t\t\tMonitoringService.updatePaymentInMonitoring(vm.monitoringId, payment, params).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\tcancelEdit(index);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction deletePaymentFromMonitoring(id) {\r\n\t\t\t$confirm().then(function () {\r\n\t\t\t\tif (id) {\r\n\t\t\t\t\tvar params = {monitoringPaymentId: id};\r\n\t\t\t\t\tMonitoringService.deletePaymentFromMonitoring(vm.monitoringId, params).then(\r\n\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\t\t\tvm.tableParams.reload();\r\n\t\t\t\t\t\t\tgetAllConflict();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction cancelEdit(index) {\r\n\t\t\tvm.toggleEdit[index] = !vm.toggleEdit[index];\r\n\t\t\tvm.tableParams.reload();\r\n\t\t\tgetAllConflict();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tfunction getDirectivePayments() {\r\n\t\t\treturn vm.dirPaymentPerParts = vm.monitoring.dirPayments;\r\n\t\t}\r\n\t\t\r\n\t\tfunction keyPressed(event, form, paymentId, payment, index) {\r\n\t\t\tif (event.keyCode === 13 && !event.shiftKey) {\r\n\t\t\t\tif (paymentId) updatePayment(paymentId, payment, index);\r\n\t\t\t\telse addPayment(form);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction payeeConflict(payment) {\r\n\t\t\tif (payment.payee === 'ISSUER')\r\n\t\t\t\treturn;\r\n\t\t\tvar contractNums = ['117', '113', '118', '119'];\r\n\t\t\tvar contractNum = vm.monitoring.contract.number.split('-')[1];\r\n\t\t\treturn contractNums.indexOf(contractNum) < 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateAllowedActions(doNotUpdate) {\r\n\t\t\t$scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.allowedAction = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t$rootScope.$on('stateChanged', function () {\r\n\t\t\tif ($scope.$parent)\r\n\t\t\t\tupdateAllowedActions(false);\r\n\t\t});\r\n\r\n        $rootScope.$on('next_payments', function (event, update) {\r\n            console.log('on next_payments event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_payments', function (event, update) {\r\n            console.log('on previous_payments event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n\t}\r\n\t\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringFlowController', MonitoringFlowController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringFlowController($uibModalInstance, NgTableParams, $stateParams, $log, MonitoringService) {\r\n        var vm = this;\r\n\r\n        vm.monitor = {};\r\n        vm.processLogs = [];\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n\t    vm.close = close;\r\n        vm.title = 'Monitoring Flow Controller';\r\n        vm.showAll = false;\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title + ' activated');\r\n\t        vm.isModal = $uibModalInstance !== null;\r\n            vm.tableParams = new NgTableParams({}, {\r\n                counts: [],\r\n                getData: getAllMonitoringProcessLogs\r\n            });\r\n        }\r\n\r\n        function getAllMonitoringProcessLogs() {\r\n            if (vm.monitoringId) {\r\n                return MonitoringService.getProcessLogs(vm.monitoringId).then(\r\n                    function (data) {\r\n                        console.log(data);\r\n                        vm.processLogs = data ? [].concat(data.processLogs) : [];\r\n                        vm.actuator = data.actuator;\r\n                        vm.creator = data.creator;\r\n                        vm.createDate = data.createDate;\r\n\r\n                        /*  removing repetitive actions for edit  :*/\r\n                        var removingProcessLogs = [];\r\n                        vm.processLogs.forEach(function (value, index) {\r\n                            if (value.transition.name === 'editing' && index + 1 < vm.processLogs.length && vm.processLogs[index + 1].transition.name === 'editing')\r\n                                removingProcessLogs.push(index);\r\n                        });\r\n                        while (removingProcessLogs.length) {\r\n                            var index = removingProcessLogs.pop();\r\n                            vm.processLogs.splice(index, 1);\r\n                        }\r\n                        /*  :end of removing repetitive actions */\r\n\r\n                        /*  removing repetitive actions for calculate  :*/\r\n                        var removingCalculateProcessLogs = [];\r\n                        vm.processLogs.forEach(function (value, index) {\r\n                            if (value.transition.name === 'calculating' && index + 1 < vm.processLogs.length && vm.processLogs[index + 1].transition.name === 'calculating')\r\n                                removingCalculateProcessLogs.push(index);\r\n                        });\r\n                        while (removingCalculateProcessLogs.length) {\r\n                            var index_c = removingCalculateProcessLogs.pop();\r\n                            vm.processLogs.splice(index_c, 1);\r\n                        }\r\n                        /*  :end of removing repetitive actions */\r\n\r\n                        return vm.processLogs;\r\n                    });\r\n            }\r\n\r\n        }\r\n\t\r\n\t\r\n\t    function close() {\r\n\t\t    $uibModalInstance.dismiss();\r\n\t    }\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/10/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringDetailsController', MonitoringDetailsController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringDetailsController($filter, UserService, $log, $rootScope, MonitoringService, ProvinceService,\r\n                                         EconomicSectionService, $stateParams, Util, telRegex, $scope, EmployeeService) {\r\n        var vm = this;\r\n        vm.monitoring = {};\r\n        vm.tempMonitoring = {};\r\n        vm.monitorings = [];\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.provinces = [];\r\n        vm.citis = [];\r\n        vm.branches = [];\r\n        vm.economicSections = [];\r\n        vm.allUsers = [];\r\n\t    vm.savingStatus = 0;\r\n\t    vm.allEmployees = [];\r\n        vm.title = 'Monitoring Details Controller';\r\n        vm.planTypes = Util.baseInfo('standardPlanTypes');\r\n\t    vm.activeness = MonitoringService.getActivenessStatusesSync();\r\n        vm.fillTheFields = false;\r\n        vm.telRegex = telRegex;\r\n\r\n        vm.cancelEdit = cancelEdit;\r\n        vm.editMonitoring = editMonitoring;\r\n        vm.getAllCityByProvinceId = getAllCityByProvinceId;\r\n\t    vm.refreshEmployees = refreshEmployees;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllEconomicSections();\r\n\t        getMonitoringById(true).then(function () {\r\n\t\t        getAllBranches();\r\n\t        });\r\n        }\r\n\r\n        function cancelEdit() {\r\n            getMonitoringById(true);\r\n        }\r\n\r\n\t    function editMonitoring(theForm) {\r\n            if (theForm && theForm.$ivalid ||\r\n                !(vm.monitoring.monitoringDate && vm.monitoring.payerBranch && vm.monitoring.branchChiefInMonitoringTime\r\n                    && vm.monitoring.planType && vm.monitoring.activenessStatus && vm.monitoring.activitySubject\r\n                    && vm.monitoring.projectLocationAddress && vm.monitoring.description)\r\n            ) {\r\n                vm.fillTheFields = true;\r\n                Util.toast('error', 'APP.MESSAGES.FILL_REQUIRED_FIELDS');\r\n                return {\r\n                    then: function (f1, f2) {\r\n                        console.log(typeof f2);\r\n                        if (f2 && typeof f2 === 'function')\r\n                            f2();\r\n                    }\r\n                };\r\n            }\r\n            else {\r\n\r\n                // console.log(\"vm.monitoring = \" , vm.monitoring);\r\n                vm.monitoring.userMonitorings[0] = {\r\n                    'username': vm.monitoring.userMonitorings[0].username\r\n                };\r\n                vm.monitoring.userMonitorings[1] = vm.monitoring.userMonitorings[1] ? {\r\n                    'username': vm.monitoring.userMonitorings[1].username\r\n                } : null;\r\n                vm.monitoring.contract = {id: vm.monitoring.contract.id, number: vm.monitoring.contract.number};\r\n                vm.monitoring.monitoringConflicts = [];\r\n\r\n                var tempMonitoring = {};\r\n                try {\r\n                    tempMonitoring = {\r\n                        payerBranch: {id: vm.monitoring.payerBranch.id},\r\n                        activitySubject: vm.monitoring.activitySubject,\r\n                        planType: vm.monitoring.planType,\r\n                        description: vm.monitoring.description,\r\n                        branchChiefInMonitoringTime: {id: vm.monitoring.branchChiefInMonitoringTime.id},\r\n                        activenessStatus: vm.monitoring.activenessStatus,\r\n                        economicSection: vm.monitoring.economicSection,\r\n                        projectLocationAddress: vm.monitoring.projectLocationAddress,\r\n                        monitoringDate: vm.monitoring.monitoringDate ? vm.monitoring.monitoringDate : null\r\n                        /*contract : {\r\n                            id: vm.monitoring.contract.id,\r\n                            province: {\r\n                                id: vm.monitoring.contract.province.id\r\n                            }\r\n                        }*/\r\n                    };\r\n                } catch (e) {\r\n\r\n                }\r\n\r\n\r\n                return MonitoringService.updateMonitoring(vm.monitoringId, tempMonitoring).then(\r\n                    function () {\r\n                        Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                        getMonitoringById(false);\r\n\t                    vm.savingStatus = 2;\r\n                    },\r\n                    function () {\r\n                    }\r\n                );\r\n            }\r\n\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function getAllBranches() {\r\n\r\n            return ProvinceService.getAllBranchesOfProvince(vm.monitoring.contract.province.id).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getAllCityByProvinceId(id) {\r\n            return ProvinceService.getAllCitiesOfProvince(id).then(\r\n                function (data) {\r\n                    vm.citis = data ? data : [];\r\n                    return vm.citis;\r\n                });\r\n        }\r\n\r\n        function getMonitoringById(doNotUpdate) {\r\n\t        vm.loading = true;\r\n            if ($scope.$parent)\r\n                return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                    function (data) {\r\n                        vm.monitoring = data ? data : {};\r\n                        if (vm.monitoring.province) {\r\n                            getAllCityByProvinceId(vm.monitoring.province.id);\r\n                        }\r\n                        updateAllowedActions(true);\r\n                        getDirective(true);\r\n                        vm.loading = false;\r\n                        return vm.monitoring;\r\n                    }, function () {\r\n                        vm.loading = false;\r\n                    });\r\n        }\r\n\t\r\n\t    function getDirective(doNotUpdate) {\r\n            if (!$scope.$parent)\r\n                return;\r\n\t\t    var promise = $scope.$parent.vm.getDirective(doNotUpdate);\r\n\t\t\r\n\t\t    if (promise && promise.then)\r\n\t\t\t    return promise.then(function (data) {\r\n\t\t\t\t\r\n\t\t\t\t    if (!vm.monitoring.monitoringDate && data) {\r\n\t\t\t\t\t    vm.monitoring.activitySubject = data.dirActivitySubject;\r\n\t\t\t\t\t    vm.monitoring.projectLocationAddress = data.dirProjectLocationAddress;\r\n\t\t\t\t    }\r\n\t\t\t    });\r\n\t\t    return {\r\n\t\t\t    then: function () {\r\n\t\t\t\t    console.log('Directive was not resolved!')\r\n\t\t\t    }\r\n\t\t    };\r\n\t    }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n            if ($scope.$parent)\r\n                $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n                    function (data) {\r\n                        vm.allowedAction = data;\r\n                    });\r\n        }\r\n\t\r\n\t    function refreshEmployees(query) {\r\n\t\t    if (!query || query === '')\r\n\t\t\t    return [];\r\n\t\t    var body = {\r\n\t\t\t    query: query.toString()\r\n\t\t    };\r\n\t\t    EmployeeService.searchEmployees(body, {}).then(function (data) {\r\n\t\t\t    vm.allEmployees = data.content;\r\n\t\t    });\r\n\t    }\r\n\r\n\t    $rootScope.$on('stateChanged', function () {\r\n            if ($scope.$parent)\r\n\t            updateAllowedActions(false);\r\n        });\r\n\t    $rootScope.$on('directiveChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    getDirective(true);\r\n\t    });\r\n        $rootScope.$on('next_monitoring-details', function (event, update) {\r\n            console.log('on next_monitoring-details event', update);\r\n            if (update) {\r\n                editMonitoring().then(function () {\r\n                    $scope.$emit('next', true);\r\n                }, function () {\r\n                    $scope.$emit('next', false);\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n        });\r\n        $rootScope.$on('previous_monitoring-details', function (event, update) {\r\n            console.log('on previous_monitoring-details event', update);\r\n            if (update) {\r\n                editMonitoring().then(function () {\r\n                    $scope.$emit('previous', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n        })\r\n\t\r\n\t\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 1/1/18.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MissionAnnouncementController', MissionAnnouncementController);\r\n\r\n    /** @ngInject */\r\n    function MissionAnnouncementController($filter, UserService, $log, $rootScope, MonitoringService, ProvinceService,\r\n                                         Principal) {\r\n        var vm = this;\r\n        vm.title = 'Mission Announcement Controller Activated';\r\n        vm.province={};\r\n        vm.provinces = [];\r\n        vm.expert={};\r\n        vm.experts = [];\r\n        vm.coexpert = {};\r\n        vm.coexperts = [];\r\n        vm.selectedMonitorings = [];\r\n\r\n        vm.monitorings = [];\r\n\r\n        vm.getExpertByProvince = getExpertByProvince;\r\n        vm.getCoExpertByProvince = getCoExpertByProvince;\r\n        vm.getMonitoringByProvinceAndExperts = getMonitoringByProvinceAndExperts;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.print = PrintElem;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            vm.date = moment(new Date()).format('YYYY/MM/DD');\r\n            Principal.identity().then(function (user) {\r\n                vm.isProvince = user.level === 'PROVINCE';\r\n                if(vm.isProvince){\r\n                    vm.province = user.province;\r\n                    vm.provinces = [vm.province];\r\n                    getExpertByProvince();\r\n                } else\r\n                    getAllProvince();\r\n            });\r\n\r\n            /*getMonitoringById(true).then(function () {\r\n                getAllBranches();\r\n            });*/\r\n        }\r\n\r\n        function cancelSearch() {\r\n            vm.province = {};\r\n            vm.expert = {};\r\n            vm.coexpert = {};\r\n            vm.date = moment(new Date()).format('YYYY/MM/DD');\r\n            vm.daysNumber=\"\";\r\n        }\r\n\r\n        function getMonitoringByProvinceAndExperts() {\r\n            var params = {\r\n                firstExpertUsername : vm.expert.username,\r\n                secondExpertUsername : vm.coexpert.username\r\n            };\r\n            MonitoringService.getMonitoringByProvinceAndExperts(vm.province.id, params).then(function (data) {\r\n                vm.monitorings = data;\r\n                vm.monitorings.forEach(function (monitoring) {\r\n                   vm.selectedMonitorings[monitoring.id] = true;\r\n                });\r\n            });\r\n        }\r\n\r\n        function getMonitoringByProvinceAndExpert() {\r\n            var params = {\r\n                firstExpertUsername : vm.expert.username\r\n            };\r\n            MonitoringService.getMonitoringByProvinceAndExpert(vm.province.id, params).then(function (data) {\r\n                vm.monitorings = data;\r\n                console.log(data);\r\n                vm.monitorings.forEach(function (monitoring) {\r\n                    vm.selectedMonitorings[monitoring.id] = true;\r\n                });\r\n            });\r\n        }\r\n\r\n        function getCoExpertByProvince() {\r\n            var params = {\r\n                provinceId : vm.province.id\r\n            };\r\n            MonitoringService.getCoExpertByProvince(vm.expert.username, params).then(function (data) {\r\n                vm.coexperts = data;\r\n                getMonitoringByProvinceAndExpert();\r\n            });\r\n        }\r\n\r\n        function getExpertByProvince() {\r\n            MonitoringService.getExpertByProvince(vm.province.id).then(function (data) {\r\n                vm.expert = {};\r\n                vm.coexpert = {};\r\n                vm.experts = data;\r\n            });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function PrintElem() {\r\n            var mywindow = window.open('', 'PRINT', 'height=400,width=600');\r\n            var elemId = 'print-section';\r\n            var printSection = document.getElementById(elemId);\r\n            mywindow.document.write('<html><head><title>' + document.title + '</title>');\r\n            mywindow.document.write('</head><body >');\r\n            mywindow.document.write(printSection.innerHTML);\r\n            mywindow.document.write('</body></html>');\r\n\r\n            mywindow.document.getElementsByName('header').innerText = 'hey';\r\n\r\n            mywindow.document.close(); // necessary for IE >= 10\r\n            mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n            // mywindow.print();\r\n            // mywindow.close();\r\n\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/16/17.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('MonitoringLicenseController', MonitoringLicenseController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction MonitoringLicenseController($rootScope, $confirm, $stateParams, $log, $filter, NgTableParams,\r\n\t                                     ConflictService, $scope, MonitoringService, Util) {\r\n\t\tvar vm = this;\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\tvm.monitoring = {};\r\n\t\tvm.monitoringLicenses = [];\r\n\t\tvm.dirLicenses = [];\r\n\t\tvm.conflicts = [];\r\n\t\t\r\n\t\tvm.license = {};\r\n\t\tvm.title = \"MonitoringLicenseController Activates \";\r\n\t\t\r\n\t\tvm.trueFalseList = [{id: true, value: \"بله\"}, {id: false, value: \"خیر\"}];\r\n\t\t\r\n\t\tvm.updateLicense = updateLicense;\r\n\t\tvm.deleteLicenseFromMonitoring = deleteLicenseFromMonitoring;\r\n        vm.deleteLicenseItem = deleteLicenseItem;\r\n\t\tvm.cancelEdit = cancelEdit;\r\n        vm.cancelEditItem = cancelEditItem;\r\n        vm.updateLicenseItem = updateLicenseItem;\r\n        vm.addLicenseItem = addLicenseItem;\r\n\t\tvm.keyPressed = keyPressed;\r\n\t\tvm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t\tvm.next = $scope.$parent.vm.next;\r\n\t\tvm.previous = $scope.$parent.vm.previous;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n\t\t\tupdateAllowedActions(true);\r\n\t\t\tgetMonitoringById(true);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getMonitoringById(doNotUpdate) {\r\n\t\t\treturn $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.monitoring = data ? data : {};\r\n\t\t\t\t\tvm.monitoringLicenses = data ? data.monitoringLicenses : [];\r\n\t\t\t\t\tgetDirLicenseConflicts();\r\n\t\t\t\t\tvm.tableParams = new NgTableParams({}, {\r\n\t\t\t\t\t\tcounts: [],\r\n\t\t\t\t\t\tgetData: getDirLicenses\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getDirLicenses() {\r\n\t\t\tvm.dirLicenses = vm.monitoring.dirLicenses;\r\n\t\t\tvm.dirLicenses.forEach(function (dirLicense) {\r\n\t\t\t\tvar found = false;\r\n\t\t\t\tvm.monitoringLicenses.forEach(function (monitoringLicense) {\r\n\t\t\t\t\tif (monitoringLicense.dirLicense && monitoringLicense.dirLicense.id === dirLicense.id) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!found) {\r\n\t\t\t\t\tvar dumMonitoringLicense = {\r\n\t\t\t\t\t\tmonitoring: vm.monitoring,\r\n\t\t\t\t\t\tdirLicense: dirLicense,\r\n\t\t\t\t\t\tcomment: \"\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvm.monitoringLicenses.push(dumMonitoringLicense);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn vm.monitoringLicenses;\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateLicense(license, index) {\r\n\t\t\tconsole.log(license.issuingDate > license.expireDate, license.issuingDate, license.expireDate);\r\n\t\t\tif (license.issuingDate > license.expireDate) {\r\n\t\t\t\tUtil.toast('error', 'Issuing date should be before expiration date');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// license.issuingDate = license.issuingDate ? $filter('sDate')(license.issuingDate) : null;\r\n\t\t\t// license.expireDate = license.expireDate ? $filter('sDate')(license.expireDate) : null;\r\n\t\t\tvar params = {dirLicenseId: license.dirLicense.id};\r\n\t\t\tlicense.monitoring = {\r\n\t\t\t\tid: license.monitoring.id\r\n\t\t\t};\r\n\t\t\tMonitoringService.setLicense(vm.monitoringId, license, params).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\tcancelEdit(index);\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\tlicense = {name: license.name};\r\n\t\t\t\t\t//cancelEdit(index);\r\n\t\t\t\t\t//getMonitoringById(false);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function addLicenseItem() {\r\n            MonitoringService.addMonitoringLicenseItem(vm.monitoringId, vm.item).then(function () {\r\n                Util.toast('success');\r\n                getMonitoringById();\r\n                vm.item = {};\r\n            }, function () {\r\n\r\n            })\r\n        }\r\n\r\n        function updateLicenseItem(item) {\r\n            MonitoringService.updateMonitoringLicenseItem(vm.monitoringId, item).then(function () {\r\n                Util.toast('success');\r\n                cancelEditItem(item);\r\n            }, function () {\r\n\r\n            })\r\n        }\r\n\r\n\t\tfunction getDirLicenseConflicts() {\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\t\t\t\r\n\t\t\tConflictService.getDirLicenseConflicts(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.conflicts = data ? data : [];\r\n\t\t\t\t\t// console.log(\"vm.conflicts = \", vm.conflicts);\r\n\t\t\t\t\tvm.monitoringLicenses.forEach(function (monitoringLicense) {\r\n\t\t\t\t\t\tvar hasFound = false;\r\n\t\t\t\t\t\tvm.conflicts.forEach(function (conflict) {\r\n\t\t\t\t\t\t\tif (monitoringLicense.dirLicense && conflict.id === monitoringLicense.dirLicense.id) {\r\n\t\t\t\t\t\t\t\tmonitoringLicense.hasConflict = conflict.conflict;\r\n\t\t\t\t\t\t\t\thasFound = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!hasFound) monitoringLicense.hasConflict = '';\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction deleteLicenseFromMonitoring(id) {\r\n\t\t\t$confirm().then(function () {\r\n\t\t\t\tif (id) {\r\n\t\t\t\t\tvar params = {monitoringLicenseId: id};\r\n\t\t\t\t\tMonitoringService.unsetLicense(vm.monitoringId, params).then(\r\n\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\t\t\tgetMonitoringById();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n        function deleteLicenseItem(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    MonitoringService.deleteMonitoringLicenseItem(vm.monitoringId, id).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n                            getMonitoringById();\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\t\t\r\n\t\tfunction cancelEdit(index) {\r\n\t\t\tvm.toggleEdit[index] = !vm.toggleEdit[index];\r\n\t\t\tgetMonitoringById();\r\n\t\t\tgetDirLicenseConflicts();\r\n\t\t}\r\n\r\n        function cancelEditItem(item) {\r\n            item.editing = false;\r\n            getMonitoringById();\r\n        }\r\n\t\t\r\n\t\tfunction updateAllowedActions(doNotUpdate) {\r\n\t\t\t$scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.allowedAction = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction keyPressed(event, license, index) {\r\n\t\t\tif (event.keyCode === 13 && !event.shiftKey) {\r\n\t\t\t\tupdateLicense(license, index)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t$rootScope.$on('stateChanged', function () {\r\n\t\t\tif ($scope.$parent)\r\n\t\t\t\tupdateAllowedActions(false);\r\n\t\t});\r\n\r\n        $rootScope.$on('next_license', function (event, update) {\r\n            console.log('on next_license event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_license', function (event, update) {\r\n            console.log('on previous_license event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n\t}\r\n\t\r\n})();\n/**\r\n * Created by ehejazi on 7/10/17.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('MonitoringLatLongController', MonitoringLatLongController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction MonitoringLatLongController($rootScope, $filter, $log, MonitoringService, $stateParams, $scope, Util) {\r\n\t\tvar vm = this;\r\n\t\tvm.monitoring = {};\r\n\t\tvm.monitorings = [];\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\tvm.dimensions = [];\r\n\t\t\r\n\t\tvm.title = 'Monitoring Lat Long Controller';\r\n\t\t\r\n\t\tvm.updateLatLong = updateLatLong;\r\n\t\tvm.cancelEdit = cancelEdit;\r\n\t\tvm.getDistance = getDistance;\r\n\t\tvm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t\tvm.next = $scope.$parent.vm.next;\r\n\t\tvm.previous = $scope.$parent.vm.previous;\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n            vm.loading = true;\r\n\t\t\tgetMonitoringById(true).then(getAllRelativeMonitorings);\r\n\t\t\tupdateAllowedActions(true);\r\n\t\t}\r\n\r\n\t\tfunction getAllRelativeMonitorings() {\r\n\t\t\tvar resCount = 0;\r\n\t\t\tMonitoringService.searchMonitoring({directiveNumber: vm.monitoring.directive.dirNumber}).then(successCalback);\r\n\t\t\tconsole.log('vm.monitoring.directive.dirParentDirectiveNumber', vm.monitoring.directive.dirParentDirectiveNumber);\r\n\t\t\tif (vm.monitoring.directive.dirParentDirectiveNumber)\r\n\t\t\t\tMonitoringService.searchMonitoring({directiveNumber: vm.monitoring.directive.dirParentDirectiveNumber}).then(successCalback);\r\n\t\t\t\r\n\t\t\tfunction successCalback(data) {\r\n\t\t\t\tresCount++;\r\n\t\t\t\tif (data && data.content && data.content.length) {\r\n\t\t\t\t\tdata.content.forEach(function (m) {\r\n\t\t\t\t\t\tif (vm.monitorings.map(function (item) {\r\n\t\t\t\t\t\t\treturn item.id;\r\n\t\t\t\t\t\t}).indexOf(m.id) < 0)\r\n\t\t\t\t\t\t\tvm.monitorings.push(m);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(resCount === 1, vm.monitoring.directive.dirParentDirectiveNumber);\r\n\t\t\t\tif (resCount === 1 && vm.monitoring.directive.dirParentDirectiveNumber) {\r\n                    vm.loading = false;\r\n                    return;\r\n                }\r\n\t\t\t\tcalc();\r\n                vm.loading = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction calc() {\r\n\t\t\tconsole.log('calc', vm.monitorings);\r\n            vm.dimensions = [];\r\n\t\t\tvm.monitorings.forEach(function (t) {\r\n                if (t.id !== undefined && t.latitude && t.longitude)\r\n                    calcDimension(t);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getMonitoringById(doNotUpdate) {\r\n\t\t\treturn $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.monitoring = data ? data : {};\r\n\t\t\t\t\tvm.monitoring.latitude = vm.monitoring.latitude || 51;\r\n\t\t\t\t\tvm.monitoring.longitude = vm.monitoring.longitude || 35;\r\n\t\t\t\t\treturn vm.monitoring;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function updateLatLong(doNotReload) {\r\n            console.log($scope);\r\n            var params = {\r\n\t\t\t\tlatitude: vm.monitoring.latitude,\r\n\t\t\t\tlongitude: vm.monitoring.longitude,\r\n\t\t\t\tlocationDescription: vm.monitoring.locationDescription\r\n\t\t\t};\r\n            return MonitoringService.setLocationInMonitoring(vm.monitoringId, params).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                    if (!doNotReload) getMonitoringById(false).then(calc);\r\n\t\t\t\t\tvm.dimension = {};\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\tfunction cancelEdit() {\r\n\t\t\tgetMonitoringById(false);\r\n\t\t}\r\n\r\n        function calcDimension(monitoring) {\r\n\t\t\tvm.dimension = null;\r\n\r\n            /*MonitoringService.getMonitoringById(id).then(\r\n                calcSuccessCallback);*/\r\n            function calcSuccessCallback(data) {\r\n                var place = data ? data : {};\r\n                if (place.latitude && place.longitude) {\r\n                    var p1 = {\r\n                        lat: vm.monitoring.latitude,\r\n                        lng: vm.monitoring.longitude\r\n                    };\r\n                    var p2 = {\r\n                        lat: place.latitude,\r\n                        lng: place.longitude\r\n                    };\r\n                    var dim = getDistance(p1, p2);\r\n                    var userMonitoringNames = \"\";\r\n                    vm.monitoring.userMonitorings.forEach(function (userMonitoring) {\r\n                        userMonitoringNames += userMonitoring.lmsUser.name + \" , \";\r\n\t\t\t\t\t});\r\n                    userMonitoringNames = userMonitoringNames.substr(0, userMonitoringNames.length-2);\r\n                    var monitoringDate = vm.monitoring.monitoringDate ? $filter('jDate')(vm.monitoring.monitoringDate) : \"ندارد\";\r\n                    var info = \"ناظران : [\" + userMonitoringNames + \"]\" + \" , تاریخ نظارت : \" + monitoringDate + \" , توضیحات : \" + vm.monitoring.locationDescription\r\n\t\t\t\t\t\t\t\t+ \" , طول : \" + vm.monitoring.longitude + \" , عرض : \" + vm.monitoring.latitude;\r\n                    vm.dimensions.push({\r\n                        monitoring: place,\r\n                        distance: dim / 1000,\r\n                        info : info\r\n                    });\r\n\r\n                    return dim / 1000; //distance\r\n                } else {\r\n                    // Util.toast('error', 'مقادیر طول و عرض جغرافیایی برای نظارت با شماره ' + place.number+ 'وارد نشده');\r\n                }\r\n            }\r\n\r\n            calcSuccessCallback(monitoring);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getDistance(p1, p2) {\r\n\t\t\tvar R = 6378137; // Earth’s mean radius in meter\r\n\t\t\tvar dLat = rad(p2.lat - p1.lat);\r\n\t\t\tvar dLong = rad(p2.lng - p1.lng);\r\n\t\t\tvar a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n\t\t\t\tMath.cos(rad(p1.lat)) * Math.cos(rad(p2.lat)) *\r\n\t\t\t\tMath.sin(dLong / 2) * Math.sin(dLong / 2);\r\n\t\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t\t\tvar d = R * c;\r\n\t\t\treturn d; // returns the distance in meter\r\n\t\t}\r\n\t\t\r\n\t\tvar rad = function (x) {\r\n\t\t\treturn x * Math.PI / 180;\r\n\t\t};\r\n\t\t\r\n\t\tfunction updateAllowedActions(doNotUpdate) {\r\n\t\t\t$scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.allowedAction = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$rootScope.$on('stateChanged', function () {\r\n\t\t\tif ($scope.$parent)\r\n\t\t\t\tupdateAllowedActions(false);\r\n\t\t});\r\n\r\n        $rootScope.$on('next_lat-long', function (event, update) {\r\n            console.log('on next_lat-long event', update);\r\n            if (update && $scope.latLongForm && $scope.latLongForm.$valid) {\r\n                updateLatLong(true).then(function () {\r\n                    $scope.$emit('next', true);\r\n                });\r\n            } else {\r\n                getMonitoringById();\r\n                $scope.$emit('next', true);\r\n            }\r\n        });\r\n        $rootScope.$on('previous_lat-long', function (event, update) {\r\n            console.log('on previous_lat-long event', update);\r\n            if (update && $scope.latLongForm && $scope.latLongForm.$valid) {\r\n                updateLatLong(true).then(function () {\r\n                    $scope.$emit('previous', true);\r\n                });\r\n            } else {\r\n                getMonitoringById();\r\n                $scope.$emit('previous', true);\r\n            }\r\n        })\r\n\t}\r\n\t\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringInvoiceController', MonitoringInvoiceController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringInvoiceController($confirm, $stateParams, $log, $filter, NgTableParams, ConflictService, $scope, $rootScope,\r\n                                         MonitoringService, $uibModal, InvestmentActionService, DirectiveService, Util) {\r\n        var vm = this;\r\n\r\n        vm.monitoring = {};\r\n        vm.invoices = [];\r\n        vm.invoice = {};\r\n        vm.conflicts = [];\r\n        vm.investmentActions = [];\r\n        vm.toggleEdit = [];\r\n        var firstLoad = true;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getMonitoringById\r\n        });\r\n        vm.unitList = [\r\n            {title: \"﷼\", value: \"RIAL\"},\r\n            {title: \"$\", value: \"DOLLAR\"}\r\n        ];\r\n        vm.toggleAddEdit = true;\r\n        vm.sumPrice =0;\r\n        vm.sumDirectiveBased =0;\r\n        vm.sumInvoiceBased =0;\r\n        vm.sumMonitoringBased =0;\r\n        vm.sumInvoiceBasedCount =0;\r\n        vm.sumMonitoringBasedCount =0;\r\n        vm.showSortInvestmentAction = true;\r\n\t    var loading = false;\r\n        vm.tempInvoices = {};\r\n        vm.today = new Date();\r\n        vm.title = 'Monitoring Invoice List Controller Active';\r\n\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n\r\n        vm.addInvoice = addInvoice;\r\n        vm.deleteInvoiceFromMonitoring = deleteInvoiceFromMonitoring;\r\n        vm.updateInvoice = updateInvoice;\r\n        vm.cancelEdit = cancelEdit;\r\n        vm.sort = sort;\r\n\t    vm.isCurrent = isCurrent;\r\n\t    vm.keyPressed = keyPressed;\r\n        vm.batchInsert = batchInsert;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllInvestmentActions();\r\n\t        updateAllowedActions(true);\r\n        }\r\n\r\n        function sort(){\r\n\t        // console.log(\"vm.invoices before sort = \", vm.invoices);\r\n            vm.invoices.reverse();\r\n\t        // console.log(\"vm.invoices = after sort\", vm.invoices);\r\n        }\r\n\r\n        function getMonitoringById() {\r\n            console.log('getMonitoringById', firstLoad);\r\n            return $scope.$parent.vm.getMonitoring(firstLoad).then(\r\n                function (data) {\r\n                    firstLoad = false;\r\n\t                vm.monitoring = data;\r\n                    vm.invoices = data ? data.monitoringInvoices : [];\r\n                    vm.sumPrice =0;\r\n                    vm.sumInvoiceBasedCount =0;\r\n                    vm.sumMonitoringBasedCount =0;\r\n                    vm.invoices.forEach(function (invoice) {\r\n                        vm.sumPrice +=  invoice.price;\r\n                        vm.sumInvoiceBasedCount +=invoice.invoiceBasedCount;\r\n                        vm.sumMonitoringBasedCount +=invoice.monitoringBasedCount;\r\n                    });\r\n\t\r\n\t                getDirectivePayments();\r\n\t                getAllConflict();\r\n\r\n\r\n                    vm.invoices.forEach(function (invoice) {\r\n                       invoice.key = invoice.investmentAction.id;\r\n                    });\r\n                    var orderedArray = $filter('orderBy')(vm.invoices, 'key', false);\r\n                    vm.invoices = [];\r\n                    vm.invoices = angular.copy(orderedArray);\r\n                    vm.invoices = $filter('orderBy')(vm.invoices, 'key', false);\r\n\t                // console.log(\"orderedArray = \",orderedArray);\r\n\t                // console.log(\"vm.invoices = \",vm.invoices);\r\n                    return vm.invoices;\r\n                });\r\n        }\r\n\r\n        function getAllInvestmentActions() {\r\n            return InvestmentActionService.getAllInvestmentActions().then(\r\n                function (data) {\r\n                    vm.investmentActions = data ? data : [];\r\n                    return vm.investmentActions;\r\n                });\r\n        }\r\n\r\n        function getAllConflict() {\r\n            var params = {monitoringId: vm.monitoringId};\r\n            return ConflictService.getInvoiceConflict(params).then(\r\n                function (data) {\r\n                    vm.conflicts = data ? data : [];\r\n\t                vm.dirPaymentPerParts.forEach(function (dirPaymentPart) {\r\n\t\t                var notExist = true;\r\n\t\t                for (var i = 0; i < vm.conflicts.length; i++) {\r\n\t\t\t                if (vm.conflicts[i].investmentAction.id === dirPaymentPart.investmentAction.id)\r\n\t\t\t\t                notExist = false;\r\n\t\t                }\r\n\t\t                if (notExist) {\r\n\t\t\t                vm.conflicts.push({\r\n\t\t\t\t                chequeCount: 0,\r\n\t\t\t\t                directiveBased: dirPaymentPart.bankShareAmount + dirPaymentPart.applicantShareAmount,\r\n\t\t\t\t                investmentAction: dirPaymentPart.investmentAction,\r\n\t\t\t\t                monitoringBased: 0,\r\n\t\t\t\t                invoiceBased: 0\r\n\t\t\t                })\r\n\t\t                }\r\n\t                });\r\n\t                vm.sumDirectiveBased = 0;\r\n\t                vm.sumInvoiceBased = 0;\r\n\t                vm.sumMonitoringBased = 0;\r\n                    vm.conflicts.forEach(function (conflict) {\r\n\t\r\n\t                    vm.sumDirectiveBased +=conflict.directiveBased;\r\n                        vm.sumInvoiceBased +=conflict.invoiceBased;\r\n                        vm.sumMonitoringBased +=conflict.monitoringBased;\r\n                    });\r\n                    return vm.conflicts;\r\n                });\r\n        }\r\n\r\n        function addInvoice(newInvoice) {\r\n\t        if (loading)\r\n\t\t        return;\r\n\t        loading = true;\r\n            vm.tempInvoiceDate = vm.invoice.date;\r\n\t        // vm.invoice.date = vm.invoice.date ? $filter('sDate')(vm.invoice.date) : null;\r\n            if (newInvoice) {\r\n                newInvoice.monitoring = {\r\n                    id: vm.monitoring.id\r\n                }\r\n            } else {\r\n                vm.invoice.monitoring = {\r\n                    id: vm.monitoring.id\r\n                }\r\n            }\r\n            return MonitoringService.AddInvoiceToMonitoring(vm.monitoringId, (newInvoice ? newInvoice : vm.invoice)).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    vm.invoice = {};\r\n                    vm.tableParams.reload();\r\n                    getAllConflict();\r\n\t                loading = false;\r\n\t                angular.element(document.querySelector('#number')).focus();\r\n                    return true;\r\n                }, function () {\r\n                    vm.invoice.date = vm.tempInvoiceDate;\r\n                    Util.toast('error', 'Please fill all the necessary fields correctly');\r\n\t\t            loading = false;\r\n                    return false;\r\n                });\r\n        }\r\n\r\n        function updateInvoice(invoiceId, invoice, index) {\r\n\r\n            if (!invoiceId) {\r\n                console.log(addInvoice(invoice).then(editSuccess, editFailure));\r\n            } else {\r\n                invoice.monitoring = {\r\n                    id: vm.monitoring.id\r\n                };\r\n                MonitoringService.updateInvoiceInMonitoring(vm.monitoringId, invoice, invoiceId).then(editSuccess, editFailure);\r\n            }\r\n\r\n\r\n            function editSuccess(data) {\r\n                console.log('MonitoringInvoiceController::editSuccess');\r\n                if (data) {\r\n                    Util.toast('success');\r\n                    cancelEdit(index);\r\n                } else if (data === undefined) {\r\n                    vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n                    getAllConflict();\r\n                }\r\n                getMonitoringById();\r\n            }\r\n\r\n            function editFailure(data) {\r\n                console.log('editFailure', data);\r\n                Util.toast('error');\r\n            }\r\n        }\r\n\r\n        function deleteInvoiceFromMonitoring(id, $index) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    var params = {monitoringInvoiceId: id};\r\n                    MonitoringService.deleteInvoiceFromMonitoring(vm.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n                            vm.tableParams.reload();\r\n                            getAllConflict();\r\n                        });\r\n                } else {\r\n                    vm.invoices.splice($index, 1);\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        function cancelEdit(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n            vm.tableParams.reload();\r\n            getAllConflict();\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.allowedAction = data;\r\n\t\t\t    });\r\n\t    }\r\n\t\r\n\t    function getDirectivePayments() {\r\n\t\t    return vm.dirPaymentPerParts = vm.monitoring.dirPayments;\r\n\t    }\r\n\t\r\n\t    function isCurrent(iaId) {\r\n\t\t    if (!vm.investmentActions)\r\n\t\t\t    return;\r\n\t\t    for (var inve in vm.investmentActions) {\r\n\t\t\t    if (inve.id === iaId && inve.type === 'CURRENT')\r\n\t\t\t\t    return true;\r\n\t\t    }\r\n\t\t    return false;\r\n\t    }\r\n\r\n        function batchInsert() {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/invoice/batch-insert-modal.html',\r\n                controller: 'BatchInsertModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                windowClass: 'batch-insert',\r\n                resolve: {\r\n                    'investmentAction': function () {\r\n                        return vm.investmentActions;\r\n                    },\r\n                    'invoices': function () {\r\n                        return vm.invoices;\r\n                    },\r\n                    'monitoringId': function () {\r\n                        return vm.monitoringId;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function (res) {\r\n                    res.forEach(function (item) {\r\n                        item.monitoring = {\r\n                            id: vm.monitoring.id\r\n                        }\r\n                    });\r\n                    console.log(res);\r\n                    MonitoringService.BatchInsertInvoiceToMonitoring(vm.monitoringId, res).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n                            vm.invoice = {};\r\n                            vm.tableParams.reload();\r\n                            getAllConflict();\r\n                            loading = false;\r\n                            angular.element(document.querySelector('#number')).focus();\r\n                        }, function () {\r\n                            vm.invoice.date = vm.tempInvoiceDate;\r\n                            Util.toast('error', 'Please fill all the necessary fields correctly');\r\n                            loading = false;\r\n                        });\r\n\r\n                }, function () {\r\n                });\r\n\r\n        }\r\n\r\n        function keyPressed(event, invoiceId, invoice, index) {\r\n\t\t    if (event.keyCode === 13 && !event.shiftKey) {\r\n\t\t\t    if (invoiceId) updateInvoice(invoiceId, invoice, index);\r\n\t\t\t    else addInvoice();\r\n\t\t    }\r\n\t    }\r\n\t    \r\n\t    $rootScope.$on('stateChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    updateAllowedActions(false);\r\n\t    });\r\n\r\n        $rootScope.$on('next_invoice', function (event, update) {\r\n            console.log('on next_invoice event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_invoice', function (event, update) {\r\n            console.log('on previous_invoice event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/11/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('BatchInsertModalController', BatchInsertModalController);\r\n\r\n    /** @ngInject */\r\n    function BatchInsertModalController($log, $uibModalInstance, $scope, Util, MonitoringService, investmentAction, invoices, monitoringId, $confirm) {\r\n        var vm = this;\r\n        vm.investmentActions = investmentAction;\r\n        vm.ok = ok;\r\n        vm.cancel = cancel;\r\n        vm.invoices = invoices;\r\n        vm.invoice = {\r\n            investmentAction: invoices.length ? angular.copy(invoices[invoices.length - 1].investmentAction) : null\r\n        };\r\n        vm.add = add;\r\n        vm.remove = remove;\r\n        vm.keyPressed = keyPressed;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log('BatchInsertModalController activated', invoices);\r\n        }\r\n\r\n        function ok() {\r\n            $uibModalInstance.close(vm.invoices);\r\n        }\r\n\r\n        function cancel() {\r\n            $uibModalInstance.dismiss(vm.invoices);\r\n        }\r\n\r\n        function add() {\r\n            var newInvoice = angular.copy(vm.invoice);\r\n            vm.invoices.push(newInvoice);\r\n            vm.invoice = {\r\n                investmentAction: invoices.length ? angular.copy(invoices[invoices.length - 1].investmentAction) : null\r\n            };\r\n        }\r\n\r\n        function remove(id, index) {\r\n            if (id) {\r\n                deleteItem(id, index);\r\n            } else {\r\n                vm.invoices.splice(index, 1);\r\n                vm.invoice = {\r\n                    investmentAction: invoices.length ? angular.copy(invoices[invoices.length - 1].investmentAction) : null\r\n                };\r\n            }\r\n        }\r\n\r\n        function deleteItem(id, index) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    MonitoringService.deleteInvoiceFromMonitoring(monitoringId, {monitoringInvoiceId: id}).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n                            remove(null, index);\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\r\n        function keyPressed(event, attr, $index) {\r\n            var indices, newTargetId;\r\n            console.log(event);\r\n            if (event.keyCode === 13) {  //  Enter key\r\n                if ($index !== undefined) {\r\n                    focusNext(event, (event.shiftKey ? -1 : 1))\r\n                } else {\r\n                    add();\r\n                }\r\n            }\r\n            else if (event.keyCode === 38) { //  up\r\n                if (event.ctrlKey || event.currentTarget.type != 'number') {\r\n                    event.preventDefault();\r\n                    focusNext(event, -1);\r\n                }\r\n\r\n            }\r\n            else if (event.keyCode === 40) { //  down\r\n                if (event.ctrlKey || event.currentTarget.type != 'number') {\r\n                    event.preventDefault();\r\n                    focusNext(event, 1);\r\n                }\r\n            }\r\n            else if (event.keyCode === 39) { //  right\r\n                if (event.currentTarget.selectionStart == event.currentTarget.value.toString().length || event.ctrlKey)\r\n                    focusSide(event, -1);\r\n            }\r\n            else if (event.keyCode === 37) {    //  left\r\n                if (event.currentTarget.selectionStart == 0 || event.ctrlKey)\r\n                    focusSide(event, 1);\r\n            }\r\n            else if (event.keyCode === 0) {\r\n                if (event.ctrlKey) {\r\n                    if (!$index) {\r\n                        vm.invoice[attr] = angular.copy(vm.invoices[vm.invoices.length - 1][attr]);\r\n                    }\r\n                    else if ($index > 0) {\r\n                        vm.invoices[$index][attr] = angular.copy(vm.invoices[$index - 1][attr]);\r\n                    }\r\n\r\n                }\r\n            }\r\n            else if (event.keyCode === 46) {\r\n                if (event.shiftKey && $index) {\r\n                    remove(vm.invoices[$index].id, $index);\r\n                }\r\n            }\r\n        }\r\n\r\n        function focusNext(event, dir) {\r\n            var indices = event.currentTarget.attributes.id.nodeValue.split('-');\r\n            indices[0] = parseInt(indices[0], 10) + dir;\r\n            var newTargetId = indices[0] + '-' + indices[1];\r\n            angular.element(document.getElementById(newTargetId)).focus();\r\n        }\r\n\r\n        function focusSide(event, dir) {\r\n            var indices = event.currentTarget.attributes.id.nodeValue.split('-');\r\n            indices[1] = parseInt(indices[1], 10) + dir;\r\n            var newTargetId = indices[0] + '-' + indices[1];\r\n            angular.element(document.getElementById(newTargetId)).focus();\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/3/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract')\r\n        .controller('ExportMonitoringColumnsModalController', ExportMonitoringColumnsModalController);\r\n\r\n    /** @ngInject */\r\n    function ExportMonitoringColumnsModalController($uibModalInstance, CheckListService, checkListItem) {\r\n        var vm = this;\r\n\r\n        vm.close = close;\r\n        vm.ok = ok;\r\n        vm.selectAllColumns = selectAllColumns;\r\n        vm.selectAllCheckList = selectAllCheckList;\r\n        vm.columns = {\r\n            \"بخش اقتصادی\": true,\t//\t1\r\n            \"نوع طرح\": true,\t//\t2\r\n            \"وضعیت فعالیت\": true,\t//\t3\r\n            \"وضعیت\": true,\t//\t5\r\n            \"تاریخ قرارداد\": true, \t//  11\r\n            \"تاریخ ایجاد\": true,\t//\t6\r\n            \"تاریخ بازدید\": true, //  7\r\n            \"تاریخ تائید\": true, //  21,\r\n            \"کارشناس (ها)\": true,\t//\t8\r\n            \"سرگروه\": true, //  9\r\n            \"نام متقاضی\": true,\t//  10\r\n            \"مبلغ تسهیلات\": true, //  12\r\n            \"استان\": true,   //  14\r\n            \"شعبه\": true, //  15\r\n            \"تائید کننده\": false,  //  16\r\n            \"شماره مصوبه\": false,\t//\t4\r\n            \"تاریخ تصویب مصوبه\": false, //  20,\r\n            \"کارشناس اعتباری مصوب کننده\": false, //  19\r\n            \"رئیس شعبه در زمان تصویب\": false,  //  17\r\n            \"رئیس شعبه در زمان بازدید\": false,  //  18\r\n            \"شماره قرارداد\": false    //  13\r\n        };\r\n\r\n\r\n        active();\r\n\r\n        ////////////////\r\n\r\n        function active() {\r\n            console.log('Export Monitoring Columns Modal Controller module activated');\r\n            vm.keys = Object.keys(vm.columns);\r\n            getChecklist();\r\n        }\r\n\r\n        function close() {\r\n            $uibModalInstance.dismiss();\r\n        }\r\n\r\n        function ok() {\r\n            var finalCheckList = [];\r\n            vm.checklits.forEach(function (item) {\r\n                if (item.checked)\r\n                    finalCheckList.push(item);\r\n            });\r\n            $uibModalInstance.close([vm.columns, finalCheckList]);\r\n        }\r\n\r\n        function selectAllColumns(flag) {\r\n            vm.keys.forEach(function (key) {\r\n                vm.columns[key] = flag;\r\n            })\r\n        }\r\n\r\n        function selectAllCheckList(flag) {\r\n            vm.checklits.forEach(function (item) {\r\n                item.checked = flag;\r\n            })\r\n        }\r\n\r\n        function getChecklist() {\r\n            CheckListService.getAllCheckList().then(function (checklits) {\r\n                vm.checklits = checklits;\r\n                console.log(vm.checklits, checkListItem);\r\n                vm.checklits.forEach(function (item) {\r\n                    item.checked = checkListItem && item.id == checkListItem.id;\r\n                })\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n})();\r\n\n/**\r\n * Created by alan on 7/9/17.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.contract')\r\n\t\t.controller('EditDirectiveController', EditDirectiveController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction EditDirectiveController($uibModalInstance, $rootScope, $state, $filter, monitoringId,\r\n                                     directiveNumber, contractId, DirectiveService, MonitoringService, Util) {\r\n\t\tvar vm = this;\r\n\t\tvm.title = 'Edit Directive';\r\n\t\tvar pNumber = $filter('pNumber');\r\n\t\tvar eNumber = $filter('eNumber');\r\n        vm.contractDirectiveNumber = directiveNumber;\r\n\t\tvm.monitoringList = [];\r\n\t\t\r\n\t\t\r\n\t\tvm.cancel = cancel;\r\n\t\tvm.setDirective = setDirective;\r\n\t\tvm.refreshMonitoringList = refreshMonitoringList;\r\n\t\tvm.referenceSelected = referenceSelected;\r\n\t\tvm.getDirectiveListText = getDirectiveListText;\r\n\t\tvm.ok = ok;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n            console.log(vm.title + ' module activated', monitoringId, contractId);\r\n\t\t}\r\n\t\t\r\n\t\tfunction ok() {\r\n\t\t\t$uibModalInstance.close('done');\r\n\t\t}\r\n\t\t\r\n\t\tfunction cancel() {\r\n\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t}\r\n\t\t\r\n\t\tfunction setDirective() {\r\n            vm.loading = true;\r\n            vm.directiveNumber = vm.directiveNumber || (vm.referenceMonitoring ? vm.referenceMonitoring.directive.dirNumber : null);\r\n\t\t\tvm.directiveNumber = eNumber(vm.directiveNumber);\r\n\t\t\tconsole.log('setDirective', vm.referenceMonitoring, vm.directiveNumber);\r\n\t\t\tif (vm.directiveNumber) {\r\n\t\t\t\tif (vm.referenceMonitoring) {\r\n\t\t\t\t\tDirectiveService.copyDirective(monitoringId, vm.directiveNumber, vm.referenceMonitoring.id).then(function () {\r\n\t\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.SUCCESS');\r\n\t\t\t\t\t\tok();\r\n                        vm.loading = false;\r\n\t\t\t\t\t}, function () {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n                    DirectiveService.newDirective(monitoringId, vm.directiveNumber, contractId).then(function () {\r\n\t\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.SUCCESS');\r\n\t\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.NEW_DIRECTIVE');\r\n\t\t\t\t\t\t$state.go('root.directive.details', {\r\n\t\t\t\t\t\t\tdirectiveId: vm.directiveNumber,\r\n\t\t\t\t\t\t\tmonitoringId: monitoringId,\r\n\t\t\t\t\t\t\tmonitoringState: $state.$current.name\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tok();\r\n                        vm.loading = false;\r\n\t\t\t\t\t}, function () {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n            }\r\n            else {\r\n                vm.loading = false;\r\n                Util.toast('error', 'APP.MESSAGES.NULL_DIRECTIVE_NUMBER');\r\n            }\r\n\r\n\t\t}\r\n\t\t\r\n\t\tfunction refreshMonitoringList(query) {\r\n\t\t\t// console.log('refreshEmployees', query);\r\n\t\t\tif (!query || query === '')\r\n\t\t\t\treturn vm.monitoringList;\r\n\t\t\treturn MonitoringService.searchDirective(eNumber(query.toString())).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.monitoringList = data ? data : [];\r\n\t\t\t\t\treturn vm.monitoringList;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction referenceSelected(selected) {\r\n\t\t\t// console.log('referenceSelected', selected);\r\n\t\t\tif (selected.directive && selected.directive.dirNumber)\r\n\t\t\t\tvm.directiveNumber = selected.directive.dirNumber;\r\n\t\t}\r\n\t\t\r\n\t\tfunction getDirectiveListText(monitoring) {\r\n\t\t\tvar name = monitoring.userMonitorings.length === 1 ? monitoring.userMonitorings[0].lmsUser.name :\r\n\t\t\t\tmonitoring.userMonitorings.length === 2 ?\r\n\t\t\t\t\tmonitoring.userMonitorings[0].lmsUser.name + ' و ' + monitoring.userMonitorings[1].lmsUser.name : '';\r\n\t\t\treturn monitoring.directive.dirNumber + '<br>' +\r\n\t\t\t\t'<span>' + $filter('jDate')(monitoring.monitoringDate) + ' توسط ' + name + '</span>' +\r\n\t\t\t\t'<br><small>' + '&nbsp;از نظارت شماره&nbsp;' + monitoring.number + '</small>';\r\n\t\t}\r\n\t}\r\n\t\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('ConcludedContractController', ConcludedContractController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction ConcludedContractController($uibModalInstance, dirContract, contracts, DirectiveService,\r\n\t                                     Util, Principal, $filter) {\r\n\t\tvar vm = this;\r\n\t\tvm.title = 'Monitoring ConcludedContractController Active';\r\n\t\t\r\n\t\tvm.dirContract = dirContract;\r\n\t\tvm.contracts = contracts;\r\n\t\tvm.contract = {};\r\n\t\tvm.checked = [];\r\n\t\tvm.concludedContractId = \"\";\r\n\t\t\r\n\t\tvm.setContract = setContract;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\tif (vm.dirContract.contract) {\r\n\t\t\t\tfor (var i = 0; i < vm.contracts.length; i++) {\r\n\t\t\t\t\tif (vm.contracts[i].id == vm.dirContract.contract.id) {\r\n\t\t\t\t\t\tvm.checked[vm.contracts[i].id] = \"true\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction setContract() {\r\n\t\t\tvm.loading = true;\r\n\t\t\tif (vm.concludedContractId) {\r\n                DirectiveService.setContract(vm.dirContract.id, vm.concludedContractId).then(function () {\r\n\t\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\t\tok();\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t}, function () {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction ok() {\r\n\t\t\t$uibModalInstance.close();\r\n\t\t}\r\n\t\t\r\n\t\tfunction cancel() {\r\n\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n})();\n/**\r\n * Created by alan on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('AddConvertDebitModal', AddConvertDebitModal);\r\n\r\n    /** @ngInject */\r\n    function AddConvertDebitModal($uibModalInstance, $filter, $scope, monitoring, Util, MonitoringService) {\r\n        var vm = this;\r\n\r\n        vm.monitoring = monitoring;\r\n        vm.convertDebit = {};\r\n\r\n\r\n        vm.submit = submit;\r\n        vm.cancel = cancel;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            getMonitoringById();\r\n        }\r\n\r\n        function getMonitoringById() {\r\n            vm.convertDebit = vm.monitoring.monitoringCommitmentConvertLicenses.length > 0 ?\r\n                vm.monitoring.monitoringCommitmentConvertLicenses[0] : null;\r\n        }\r\n\r\n        function submit() {\r\n            if (vm.convertDebit.id) {\r\n                updateConvertDebit();\r\n            } else {\r\n                addConvertDebit();\r\n            }\r\n        }\r\n\r\n        function addConvertDebit() {\r\n            var data = {\r\n                letterDate: vm.convertDebit.letterDate,\r\n                letterNum: vm.convertDebit.letterNum\r\n            };\r\n            MonitoringService.addConvertDebit(vm.monitoring.id, data).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                ok();\r\n            });\r\n        }\r\n\r\n        function updateConvertDebit() {\r\n            var data = {\r\n                letterDate: vm.convertDebit.letterDate,\r\n                letterNum: vm.convertDebit.letterNum\r\n            };\r\n            MonitoringService.updateConvertDebit(vm.convertDebit.id, data).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                ok();\r\n            });\r\n        }\r\n\r\n        function cancel() {\r\n            $uibModalInstance.dismiss('cancel');\r\n        }\r\n\r\n        function ok() {\r\n            $uibModalInstance.close();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('ConvertDebitController', ConvertDebitController);\r\n\r\n    /** @ngInject */\r\n    function ConvertDebitController($stateParams, $state, $document, $log, NgTableParams, host, $uibModal, $filter, $confirm,\r\n                                    EconomicSectionService, ReportService, ContractCodeService, ProvinceService,\r\n                                    MonitoringService, TraceService, Util, BranchService, UserService, Principal,\r\n                                    CheckListService) {\r\n        var vm = this;\r\n        vm.firstSearch = true;\r\n        vm.searchItem = {};\r\n        vm.monitoring = {};\r\n        vm.monitorings = [];\r\n        vm.directives = [];\r\n        vm.planTypes = Util.baseInfo('planTypes');\r\n        vm.activenessStatuses = Util.baseInfo('activenessStatuses');\r\n        vm.economicSections = [];\r\n        vm.provinces = [];\r\n        vm.codes = [];\r\n        vm.type = 'monitoringList';\r\n        vm.contractId = $stateParams.contractId;\r\n        vm.contractNumber = $stateParams.contractNumber;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: searchMonitoring\r\n        });\r\n        vm.showSearch = true;\r\n        vm.steps = MonitoringService.getStepsSync();\r\n        vm.traceSteps = TraceService.getStepsSync;\r\n\r\n        vm.observers = [];\r\n        vm.teamHeads = [];\r\n        vm.teamHeadsMap = {};\r\n        vm.finalHeads = [];\r\n        vm.owners = [];\r\n\r\n        var stepIds = [];\r\n        var traceStepIds = [];\r\n        var duration = 1000;\r\n        var offset = 30;\r\n\r\n        vm.openModal = openModal;\r\n        vm.getBranchesByProvince = getBranchesByProvince;\r\n        vm.getBranchesByProvinceIds = getBranchesByProvinceIds;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n        vm.filterStep = filterStep;\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.planCaption = getPlanCaption;\r\n        vm.toggleStep = toggleStep;\r\n        vm.toggleTraceStep = toggleTraceStep;\r\n        vm.activeStep = activeStep;\r\n        vm.deleteMonitoring = deleteMonitoring;\r\n        vm.openDetailsModal = openDetailsModal;\r\n        vm.exportMonitoring = exportMonitoring;\r\n        vm.planTypeKey = Util.getPlanTypeKey;\r\n        vm.getUsers = getUsers;\r\n        vm.getDelay = MonitoringService.getDelaySync;\r\n        vm.refreshCodes = refreshCodes;\r\n        vm.addConvertDebitModal = addConvertDebitModal;\r\n        vm.confirmConvertDebitModal = confirmConvertDebitModal;\r\n        vm.setTrace = setTrace;\r\n        vm.isInRoleStaff = isInRoleStaff;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info(vm.title);\r\n            getAllEconomicSections();\r\n            getAllProvince();\r\n            getUsers();\r\n            getCurrentUser();\r\n            getChecklist();\r\n        }\r\n\r\n        function getCurrentUser() {\r\n            Principal.identity().then(function (data) {\r\n                vm.currentUser = data;\r\n                vm.isAdmin = Principal.isInAnyRole([\"ADMIN\"]);\r\n            });\r\n        }\r\n\r\n        function isInRoleStaff() {\r\n            return Principal.isInRole('STAFF_DISPATCHER');\r\n        }\r\n\r\n        function getMonitoring(id) {\r\n            for (var i = 0; i < vm.monitorings.length; i++) {\r\n                if (vm.monitorings[i].id === id) {\r\n                    return vm.monitorings[i];\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        function prepareSearchItem() {\r\n            vm.searchItem.contractFromDate = vm.contractFromDate;\r\n            vm.searchItem.contractToDate = vm.contractToDate;\r\n            vm.searchItem.monitoringFromDate = vm.monitoringFromDate;\r\n            vm.searchItem.monitoringToDate = vm.monitoringToDate;\r\n            vm.searchItem.createFromDate = vm.createFromDate;\r\n            vm.searchItem.createToDate = vm.createToDate;\r\n            vm.searchItem.confirmFromDate = vm.confirmFromDate;\r\n            vm.searchItem.confirmToDate = vm.confirmToDate;\r\n            vm.searchItem.contractNumber = vm.searchItem.contractNumber ? $filter('eNumber')(vm.searchItem.contractNumber) : null;\r\n            vm.searchItem.monitoringNumber = vm.searchItem.monitoringNumber ? $filter('eNumber')(vm.searchItem.monitoringNumber) : null;\r\n            vm.searchItem.directiveNumber = vm.searchItem.directiveNumber ? $filter('eNumber')(vm.searchItem.directiveNumber) : null;\r\n            vm.searchItem.contractId = vm.contractId ? vm.contractId.toString() : null;\r\n            vm.searchItem.stepIds = [];\r\n            vm.searchItem.traceStepIds = [];\r\n\r\n            vm.steps.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.stepIds.push(es.id);\r\n            });\r\n            vm.traceSteps.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.traceStepIds.push(es.id);\r\n            });\r\n\r\n            vm.searchItem.planTypes = [];\r\n            vm.searchItem.activenessStatuses = [];\r\n\r\n            vm.planTypes.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.planTypes.push(es.key);\r\n            });\r\n            vm.activenessStatuses.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.activenessStatuses.push(es.key);\r\n            });\r\n\r\n            vm.searchItem.economicSectionIds = [];\r\n\r\n            vm.economicSections.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.economicSectionIds.push(es.id);\r\n            });\r\n\r\n            if (vm.checkListStatus && vm.checkList) {\r\n                var checkListStatusList = [];\r\n                checkListStatusList.push(vm.checkListStatus);\r\n                vm.searchItem.checkListId = vm.checkList.id;\r\n                vm.searchItem.checkListStatuses = checkListStatusList;\r\n                /*vm.searchItem.monitoringCheckList = {\r\n                    checkListStatus: checkListStatusList,\r\n                    checkListId: vm.checkList.id\r\n                }*/\r\n            } else {\r\n                vm.searchItem.monitoringCheckList = null;\r\n            }\r\n        }\r\n\r\n        function searchMonitoring(tParams) {\r\n            var startTime = moment();\r\n            vm.loading = true;\r\n            prepareSearchItem();\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                sort: 'id,desc'\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n\r\n            vm.searchItem.applicantPerformanceEvaluation = 'COMMITMENT_CONVERT';\r\n            return MonitoringService.searchMonitoring(vm.searchItem, params).then(\r\n                function (data) {\r\n                    vm.monitorings = data ? data.content : [];\r\n                    var i,\r\n                        numberPageElements = data.number * data.numberOfElements;\r\n                    for (i = 0; i < vm.monitorings.length; i++) {\r\n                        vm.monitorings[i].index = numberPageElements + i + 1;\r\n                        vm.monitorings[i].deleteDisabled = vm.monitorings[i].currentStep.name !== 'created';\r\n                    }\r\n                    if (data) {\r\n                        tParams.total(data.totalElements);\r\n                        vm.allRecordsCount = data.totalElements;\r\n                    }\r\n                    var searchResultContainer = angular.element(document.getElementById('search-result-container'));\r\n                    if (vm.firstSearch) vm.firstSearch = false;\r\n                    else $document.scrollToElement(searchResultContainer, offset, duration);\r\n                    vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n                    return vm.monitorings;\r\n                }, function (reason) {\r\n                    vm.allRecordsCount = 0;\r\n                    vm.loading = false;\r\n                    vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    return reason;\r\n                });\r\n        }\r\n\r\n        function exportMonitoring(reportType) {\r\n            prepareSearchItem();\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/export/columns-modal.html',\r\n                controller: 'ExportMonitoringColumnsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    'checkListItem': function () {\r\n                        return vm.checkList;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function (res) {\r\n                    var params = {\r\n                        reportType: reportType,\r\n                        extraSearchObj: vm.searchItem,\r\n                        showChecklistsStatus: true,\r\n                        columns: res[0],\r\n                        checkLists: res[1]\r\n                    };\r\n\r\n                    ReportService.getReportNumber(params).then(function (reportNumber) {\r\n                        if (reportType) {\r\n                            var url = 'api/report/monitoringSearch?reportNumber=' + reportNumber;\r\n                            console.log(url);\r\n                            ReportService.getNonHtmlReport(url);\r\n                            Util.toast('info', 'Please wait to receive data');\r\n                        }\r\n                    });\r\n                }, function () {\r\n\r\n                });\r\n\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvince() {\r\n            if (!vm.searchItem.provinceId)\r\n                vm.branches = [];\r\n            return ProvinceService.getAllBranchesOfProvince(vm.searchItem.provinceId).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvinceIds() {\r\n            vm.searchItem.branchIds = [];\r\n            if (vm.searchItem.provinceIds.length === 0) {\r\n                vm.branches = [];\r\n                return vm.branches;\r\n            }\r\n\r\n            return ProvinceService.getAllBranchesByProvinceList(vm.searchItem.provinceIds).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function cancelSearch() {\r\n            if (vm.searchItem) {\r\n                vm.searchItem = {};\r\n                vm.steps.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.traceSteps.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.economicSections.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.planTypes.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.activenessStatuses.forEach(function (as) {\r\n                    if (as.selected)\r\n                        as.selected = false;\r\n                });\r\n                vm.tableParams.reload();\r\n            } else {\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n            }\r\n        }\r\n\r\n        function search() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function filterStep() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function openFlowModal(id) {\r\n            var monitoring = getMonitoring(id);\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        function openModal() {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/add-monitoring-modal/add-monitoring.html',\r\n                controller: 'AddMonitoring',\r\n                controllerAs: 'AddMonitoring',\r\n                size: 'md',\r\n                resolve: {\r\n                    id: function () {\r\n                        return vm.contractId;\r\n                    },\r\n                    contractIds: function () {\r\n                        return [];\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function addConvertDebitModal(monitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/convert-debit-modal/add-convert-debit-modal.html',\r\n                controller: 'AddConvertDebitModal',\r\n                controllerAs: 'modalVm',\r\n                size: 'md',\r\n                resolve: {\r\n                    monitoring: function () {\r\n                        return monitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(function () {\r\n                vm.tableParams.reload();\r\n            });\r\n        }\r\n\r\n        function confirmConvertDebitModal(monitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/confirm-convert-debit-modal/confirm-convert-debit-modal.html',\r\n                controller: 'ConfirmConvertDebitModal',\r\n                controllerAs: 'modalVm',\r\n                size: 'md',\r\n                resolve: {\r\n                    monitoring: function () {\r\n                        return monitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(function () {\r\n                vm.tableParams.reload();\r\n            });\r\n        }\r\n\r\n        function setTrace(monitoring) {\r\n            console.log('monitoring = ', monitoring);\r\n            $state.go('root.monitoring.trace', {monitoringId: monitoring.id, step: \"fromConvertDebit\"});\r\n        }\r\n\r\n        function getPlanCaption(key) {\r\n            for (var i = 0; i < vm.planTypes.length; i++) {\r\n                if (key === vm.planTypes[i].value)\r\n                    return vm.planTypes[i].title;\r\n            }\r\n            return 'نامشخص';\r\n        }\r\n\r\n        function getActivenessCaption(key) {\r\n            for (var i = 0; i < vm.activenessStatuses.length; i++) {\r\n                if (key === vm.activenessStatuses[i].value)\r\n                    return vm.activenessStatuses[i].title;\r\n            }\r\n            return 'نامشخص';\r\n        }\r\n\r\n        function activeStep(step) {\r\n            return stepIds.indexOf(step.id) > -1;\r\n        }\r\n\r\n        function activeTraceStep(step) {\r\n            return traceStepIds.indexOf(step.id) > -1;\r\n        }\r\n\r\n        function toggleStep(step) {\r\n            // console.log('toggleStep', step.id, stepIds.indexOf(step.id));\r\n            var index = stepIds.indexOf(step.id);\r\n            var exists = index > -1;\r\n            if (exists)\r\n                stepIds.splice(index, 1);\r\n            else\r\n                stepIds.push(step.id);\r\n            search();\r\n            // console.log(stepIds);\r\n        }\r\n\r\n        function toggleTraceStep(step) {\r\n            console.log('toggleTraceStep', step.id, traceStepIds.indexOf(step.id));\r\n            var index = traceStepIds.indexOf(step.id);\r\n            var exists = index > -1;\r\n            if (exists)\r\n                traceStepIds.splice(index, 1);\r\n            else\r\n                traceStepIds.push(step.id);\r\n            search();\r\n            console.log(traceStepIds);\r\n        }\r\n\r\n        function deleteMonitoring(monitoring) {\r\n            if (monitoring.deleteDisabled)\r\n                return;\r\n            $confirm().then(function () {\r\n                MonitoringService.deleteMonitoring(monitoring.id).then(function () {\r\n                    vm.tableParams.reload();\r\n                    Util.toast('success');\r\n                }, function (e) {\r\n                    Util.toast('error', e.message);\r\n                })\r\n            });\r\n        }\r\n\r\n        function openDetailsModal(id, fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    getMonitoring();\r\n                });\r\n        }\r\n\r\n        function getUsers() {\r\n            UserService.getByRole(\"OBSERVER\").then(function (data) {\r\n                vm.observers = data ? data : [];\r\n            });\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n            });\r\n            UserService.getByRoles(['BRANCH_DISPATCHER', 'FINAL_HEAD', 'PROVINCE_HEAD']).then(function (data) {\r\n                vm.finalHeads = data ? data.content : [];\r\n            });\r\n            UserService.getByRoles(['ADMIN', 'BRANCH_DISPATCHER', 'FINAL_HEAD', 'PROVINCE_DISPATCHER', 'STAFF_DISPATCHER']).then(function (data) {\r\n                vm.owners = data ? data.content : [];\r\n            });\r\n        }\r\n\r\n        function getChecklist() {\r\n            vm.checkListStatusList = [\r\n                {value: \"ALL\", caption: \"-- همه موارد --\"},\r\n                {value: \"DONE\", caption: \"فاقد انحراف\"},\r\n                {value: \"VIOLATED\", caption: \"دارای نقص\"},\r\n                {value: \"UNDONE\", caption: \"دارای انحراف\"},\r\n                {value: \"UNRELATEDTODIRECTIVE\", caption: \"شامل مصوبه نمی‌باشد\"}\r\n            ];\r\n            CheckListService.getAllCheckList().then(function (data) {\r\n                vm.checkLists = data;\r\n            });\r\n        }\r\n\r\n        function refreshCodes(q) {\r\n            return ContractCodeService.searchAllNew({query: q}).then(function (data) {\r\n                vm.codes = data || [];\r\n                return vm.codes;\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by alan on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('ConfirmConvertDebitModal', ConfirmConvertDebitModal);\r\n\r\n    /** @ngInject */\r\n    function ConfirmConvertDebitModal($uibModalInstance, $filter, $scope, monitoring, Util, host, MonitoringService) {\r\n        var vm = this;\r\n\r\n        var mDate = $filter('mDate');\r\n        vm.monitoring = monitoring;\r\n        vm.commitConvertDebit = {};\r\n        vm.host = host;\r\n\r\n        vm.submit = submit;\r\n        vm.cancel = cancel;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            getMonitoringById();\r\n        }\r\n\r\n        function getMonitoringById() {\r\n            vm.commitConvertDebit = vm.monitoring.monitoringCommitmentConvertLicenses.length > 0 ?\r\n                vm.monitoring.monitoringCommitmentConvertLicenses[0] : null;\r\n        }\r\n\r\n        function submit() {\r\n            // چک کردن حجم فایل\r\n            var file = vm.commitConvertDebit.attachment;\r\n            console.log(file);\r\n            if (file.attachment.size > 5000000) {\r\n                Util.toast(\"error\", 'حجم فایل بیشتر از حد مجار است ');\r\n                return;\r\n            }\r\n\r\n            if (vm.commitConvertDebit.done) {\r\n                updateDoneCommitmentConvertLicense();\r\n            } else {\r\n                setDoneCommitmentConvertLicense();\r\n            }\r\n        }\r\n\r\n        function setDoneCommitmentConvertLicense() {\r\n            var params = {\r\n                doneDate: vm.commitConvertDebit.doneDate,\r\n                doneLetterNumber: vm.commitConvertDebit.doneLetterNumber,\r\n                description: vm.commitConvertDebit.doneDescription\r\n            };\r\n            var data = vm.commitConvertDebit.attachment;\r\n            MonitoringService.setDoneCommitmentConvertLicense(vm.commitConvertDebit.id, params, data).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                ok();\r\n            });\r\n        }\r\n\r\n        function updateDoneCommitmentConvertLicense() {\r\n            var params = {\r\n                doneDate: mDate(vm.commitConvertDebit.doneDate),\r\n                doneLetterNumber: vm.commitConvertDebit.doneLetterNumber,\r\n                description: vm.commitConvertDebit.doneDescription\r\n            };\r\n\r\n            var data = vm.commitConvertDebit.attachment;\r\n            MonitoringService.updateDoneCommitmentConvertLicense(vm.commitConvertDebit.id, params, data).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                ok();\r\n            });\r\n        }\r\n\r\n        function cancel() {\r\n            $uibModalInstance.dismiss('cancel');\r\n        }\r\n\r\n        function ok() {\r\n            $uibModalInstance.close();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('updateConflictController', updateConflictController);\r\n\r\n    /** @ngInject */\r\n    function updateConflictController($uibModalInstance, $stateParams, monitoringConflict, MonitoringService, Util) {\r\n        var modalVm = this;\r\n\r\n        modalVm.title = ' update conflict controller';\r\n        modalVm.monitoringConflict = monitoringConflict;\r\n        modalVm.monitoringId = $stateParams.monitoringId;\r\n        modalVm.auto = [\r\n            {id: true, caption: 'مرتفع شد'},\r\n            {id: false, caption: 'مرتفع نشد'}\r\n        ];\r\n\r\n        modalVm.updateConflictInMonitoring = updateConflictInMonitoring;\r\n        modalVm.cancelAdd = cancelAdd;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(modalVm.title);\r\n        }\r\n\r\n        function updateConflictInMonitoring() {\r\n            if (modalVm.monitoringConflict) {\r\n                var params = {monitoringConflictId: modalVm.monitoringConflict.id};\r\n                modalVm.monitoringConflict.monitoring = {\r\n                    id: monitoringConflict.monitoring.id\r\n                };\r\n                MonitoringService.updateConflictInMonitoring(modalVm.monitoringId, modalVm.monitoringConflict, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $uibModalInstance.close();\r\n                    });\r\n            }\r\n        }\r\n\r\n        function cancelAdd() {\r\n            $uibModalInstance.close();\r\n        }\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringConflictController', MonitoringConflictController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringConflictController(host,$confirm, $uibModal, NgTableParams, $stateParams, $log, MonitoringService, Util, $scope) {\r\n        var vm = this;\r\n\r\n        vm.monitoringConflict = {};\r\n        vm.conflicts = [];\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        var firstLoad = true;\r\n        vm.toggleAdd = false;\r\n        vm.monitoring = {};\r\n        vm.host = host;\r\n        vm.calculateMonitoringConflicts = calculateMonitoringConflicts;\r\n        vm.createConflict = createConflict;\r\n        vm.deleteConflict = deleteConflict;\r\n        vm.cancelAdd = cancelAdd;\r\n        vm.getSignUrl = getSignUrl;\r\n        vm.openModal = openModal;\r\n        vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n        vm.links = {\r\n            'NO_PAYING_PAYMENT': 'root.monitoring.payments',\r\n            'INVALID_STEPCOUNT_PAYMENT': 'root.monitoring.payments',\r\n            'COUNT_CONFLICT_PAYMENT': 'root.monitoring.payments',\r\n            'CONFLICT_PAYMENT': 'root.monitoring.payments',\r\n            'AMOUNT_CONFLICT_BANK_SHARED_PAYMENT': 'root.monitoring.payments',\r\n            'AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT': 'root.monitoring.payments',\r\n            'NO_AMOUNT_CONFLICT_APPLICANT_SHARED_PAYMENT': 'root.monitoring.payments',\r\n            'CONFLICT_ASSURANCE': 'root.monitoring.assurance',\r\n            'NOT_EXIST_CONFLICT_ASSURANCE': 'root.monitoring.assurance',\r\n            'COUNT_CONFLICT_INVOICE': 'root.monitoring.invoice',\r\n            'NO_MONITORINGBASED_CONFLICT_INVOICE': 'root.monitoring.invoice',\r\n            'CONFLICT_INVOICE': 'root.monitoring.invoice',\r\n            'CONFLICT_LICENSE': 'root.monitoring.license',\r\n            'CONFLICT_CHECKLIST': 'root.monitoring.checkList',\r\n            'CONFLICT_ADDRESS': 'root.monitoring.monitoring-details',\r\n            'CONFLICT_LAT_LONG': 'root.monitoring.lat-long',\r\n            'CONFLICT_PRECONDITION': 'root.monitoring.preConditions',\r\n            'CONFLICT_PROGRESS': 'root.monitoring.progress',\r\n            'CONFLICT_DATE': 'root.monitoring.monitoring-details',\r\n            'CONFLICT_ECONOMIC_SECTION': 'root.monitoring.monitoring-details',\r\n            'CONFLICT_DIR_NUMBER': 'root.monitoring.monitoring-details',\r\n            'CONFLICT_PLAN_TYPE': 'root.monitoring.monitoring-details'\r\n        };\r\n\r\n        vm.title = 'Monitoring  Conflict List Controller Active';\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\t        getAllMonitoringConflicts();\r\n        }\r\n\r\n        function getAllMonitoringConflicts() {\r\n            return $scope.$parent.vm.getMonitoring(firstLoad).then(\r\n                function (data) {\r\n                    firstLoad = false;\r\n\t                vm.monitoring = data;\r\n\t                vm.allowedAction = vm.monitoring.currentStep.name === 'started' || vm.monitoring.currentStep.name === 'calculated';\r\n                    vm.state = data.currentStep.name;\r\n                    vm.conflicts = data ? data.monitoringConflicts : [];\r\n                    return vm.conflicts;\r\n                });\r\n\r\n        }\r\n\r\n        function calculateMonitoringConflicts() {\r\n            var text = \"آیا مطمئن هستید؟\";\r\n\r\n            $confirm({text: text}).then(function () {\r\n                return MonitoringService.updateCalculateConflictInMonitoring(vm.monitoringId).then(\r\n                    function () {\r\n\t                    getAllMonitoringConflicts();\r\n                    });\r\n            });\r\n        }\r\n\r\n        function createConflict() {\r\n            if (vm.monitoringConflict) {\r\n                MonitoringService.AddConflictToMonitoring(vm.monitoringId, vm.monitoringConflict).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        cancelAdd();\r\n\t                    getAllMonitoringConflicts();\r\n                    });\r\n            }\r\n        }\r\n\r\n        function deleteConflict(id) {\r\n            if (vm.monitoringConflict) {\r\n                $confirm().then(function () {\r\n                    var params = {monitoringConflictId: id};\r\n                    MonitoringService.deleteConflictFromMonitoring(vm.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n\t                        getAllMonitoringConflicts();\r\n                        });\r\n                });\r\n            }\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.monitoringConflict = {};\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n        }\r\n\r\n        function getSignUrl(user) {\r\n\t        // console.log(\"user = \", user);\r\n\t        vm.signUrl = vm.host + \"lmsUserManagement/user/\" + user.username + \"/getSign\";\r\n            return vm.signUrl;\r\n        }\r\n\r\n        function openModal(monitoringConflict) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/conflict/update-conflict-modal.html',\r\n                controller: 'updateConflictController',\r\n                controllerAs: 'modalVm',\r\n                size: 'md',\r\n                resolve: {\r\n                    monitoringConflict: function () {\r\n                        return monitoringConflict;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n\t                getAllMonitoringConflicts();\r\n                }, function () {\r\n\r\n                });\r\n        }\r\n\r\n        $scope.$on('next_conflict', function (event, update) {\r\n            console.log('on next_conflict event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $scope.$on('previous_conflict', function (event, update) {\r\n            console.log('on previous_conflict event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringContractController', MonitoringContractController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringContractController(Util, NgTableParams, $stateParams, $log, MonitoringService,\r\n                                          ContractTypeService, DirectiveService, $uibModal, $scope) {\r\n        var vm = this;\r\n\r\n        vm.monitor = {};\r\n        vm.monitoring = {};\r\n        vm.contracts = [];\r\n        vm.tempContracts = [];\r\n        vm.dirContracts = [];\r\n        vm.toggleEdit = [];\r\n        vm.contract = {};\r\n        vm.contractTypes = [];\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.sumContractTotalAmount = 0;\r\n        vm.sumInterestAmount = 0;\r\n        vm.sumInterestAndOriginAmount = 0;\r\n\r\n        vm.sumDirContractTotalAmount = 0;\r\n        vm.sumDirInterestAmount = 0;\r\n        vm.sumDirInterestAndOriginAmount = 0;\r\n\r\n        vm.openConcludedContractModal = openConcludedContractModal;\r\n        vm.unsetConcludedContract = unsetConcludedContract;\r\n\t    vm.isMonitoringContract = isMonitoringContract;\r\n\t    vm.isMonitoringContractSet = isMonitoringContractSet;\r\n        vm.setContractNumber = setContractNumber;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n\r\n        vm.title = 'Monitoring  Contract List Controller Active';\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\t        getAllMonitoringDirContracts(true);\r\n\t        updateAllowedActions(true);\r\n        }\r\n\r\n        function unsetConcludedContract(dirContractId) {\r\n            DirectiveService.unsetContract(dirContractId).then(function () {\r\n\t            getAllMonitoringDirContracts(false);\r\n                Util.toast('success');\r\n            });\r\n        }\r\n\r\n        function getAllMonitoringContracts() {\r\n\t\r\n\t        //TODO: level2\r\n\t        /*if(vm.monitoringId){\r\n\t\t\t\treturn MonitoringService.getAllMonitoringContracts(vm.monitoringId).then(successCallback(data));\r\n\t\t\t}*/\r\n\t\r\n\t        if (!vm.monitoring.directive.dirNumber)\r\n\t\t        return successCallback([vm.monitoring.contract]);\r\n\t        var body = {\r\n                directiveNumberEqual: vm.monitoring.directive.dirNumber.toString(),\r\n\t\t        stepIds: [7, 9, 10]\r\n\t        };\r\n\t        var params = {\r\n\t\t        page: 0,\r\n\t\t        size: 1000\r\n\t        };\r\n\t        return MonitoringService.searchMonitoring(body, params).then(\r\n\t\t        function (data) {\r\n\t\t\t        var contracts = [];\r\n\t\t\t        if (data && data.content)\r\n\t\t\t\t        data.content.forEach(function (value) {\r\n\t\t\t\t\t        if (Util.indexOf(contracts, value.contract.id, 'id') < 0)\r\n\t\t\t\t\t\t        contracts.push(value.contract)\r\n\t\t\t\t        });\r\n\t\t\t        if (Util.indexOf(contracts, vm.monitoring.contract.id, 'id') < 0)\r\n\t\t\t\t        contracts.push(vm.monitoring.contract);\r\n\t\t\t        return successCallback(contracts);\r\n\t\t        });\r\n\t\r\n\t        function successCallback(data) {\r\n\t\t        console.log('getAllMonitoringContracts', data);\r\n\t\t        vm.contracts = data ? data : [];\r\n\t\t        // console.log(data);\r\n\t\t        vm.tempContracts = angular.copy(vm.contracts);\r\n\t\t        vm.sumContractTotalAmount = 0;\r\n\t\t        vm.sumInterestAmount = 0;\r\n\t\t        vm.sumRemainingInCurrent = 0;\r\n\t\t        vm.sumRemainingInNonCurrent = 0;\r\n\t\t        vm.contracts.forEach(function (contract) {\r\n\t\t\t        contract.remainingInCurrent = contract.remainingInCurrent ? contract.remainingInCurrent : 0;\r\n\t\t\t        contract.remainingInNonCurrent = contract.remainingInNonCurrent ? contract.remainingInNonCurrent : 0;\r\n\t\t\t\r\n\t\t\t        vm.sumRemainingInCurrent += contract.remainingInCurrent;\r\n\t\t\t        vm.sumRemainingInNonCurrent += contract.remainingInNonCurrent;\r\n\t\t\t        vm.sumContractTotalAmount += contract.totalAmount;\r\n\t\t\t        vm.sumInterestAmount += contract.totalAmount * contract.interestRate / 100;\r\n\t\t\t        vm.sumInterestAndOriginAmount += contract.totalAmount + (contract.totalAmount * contract.interestRate / 100);\r\n\t\t        });\r\n\t\t        return vm.contracts;\r\n\t        }\r\n\t        \r\n\r\n        }\r\n\r\n        function openConcludedContractModal(dirContract) {\r\n            if (dirContract.contract) {\r\n                vm.contracts = angular.copy(vm.tempContracts);\r\n                for (var i = 0; i < vm.contracts.length; i++) {\r\n                    if (vm.contracts[i].id === dirContract.contract.id) {\r\n                        vm.contracts[i].checked = \"true\";\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                vm.contracts = angular.copy(vm.tempContracts);\r\n            }\r\n\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/dirContract-concludedContract-modal/dirContract-concludedContract.html',\r\n                controller: 'ConcludedContractController',\r\n                controllerAs: 'cvm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    dirContract: function () {\r\n                        return dirContract;\r\n                    },\r\n                    contracts: function () {\r\n                        return vm.contracts;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(function () {\r\n\t            console.log('After modal');\r\n\t            getAllMonitoringDirContracts(false);\r\n            }, function () {\r\n\r\n            });\r\n        }\r\n\r\n        function setContractNumber(dirContract) {\r\n            if (!dirContract.contract.number)\r\n                DirectiveService.unsetContract(dirContract.id).then(function () {\r\n                    getAllMonitoringDirContracts(false);\r\n                    updateAllowedActions();\r\n                    Util.toast('success');\r\n                });\r\n            else {\r\n                dirContract.contract.number = Util.eNumber(dirContract.contract.number);\r\n                DirectiveService.setContractByNumber(dirContract.id, dirContract.contract.number).then(function () {\r\n                    Util.toast('success');\r\n                    getAllMonitoringDirContracts(false);\r\n                    vm.loading = false;\r\n                }, function () {\r\n                    Util.toast('error');\r\n                    getAllMonitoringDirContracts(false);\r\n                    vm.loading = false;\r\n                })\r\n            }\r\n        }\r\n\t    function getAllMonitoringDirContracts(doNotUpdate) {\r\n\t        console.log('getAllMonitoringDirContracts');\r\n            if (vm.monitoringId) {\r\n\t            $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                    function (data) {\r\n                        vm.monitoring = data ? data : [];\r\n\t                    getDirContracts();\r\n                        console.log(vm.dirContracts);\r\n                        vm.tableParams = new NgTableParams({}, {\r\n\t\t                    counts: [],\r\n\t\t                    getData: getAllMonitoringContracts\r\n\t                    });\r\n                    });\r\n            }\r\n\t\r\n\t        function getDirContracts() {\r\n\t\t        vm.sumDirContractTotalAmount = 0;\r\n\t\t        vm.sumDirInterestAmount = 0;\r\n\t\t        vm.sumDirInterestAndOriginAmount = 0;\r\n\t\t        var directiveId = vm.monitoring.directive.dirNumber;\r\n\t\t        vm.dirContracts = vm.monitoring.dirContracts;\r\n\t\t        vm.dirContracts.forEach(function (dirContract) {\r\n\t\t\t        vm.sumDirContractTotalAmount += dirContract.totalAmount;\r\n\t\t\t        vm.sumDirInterestAmount += dirContract.interestAmount;\r\n\t\t        });\r\n\t\t        return vm.dirContracts;\r\n            }\r\n\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.allowedActions = data;\r\n\t\t\t    });\r\n\t    }\r\n\t\r\n\t    function isMonitoringContract(contract) {\r\n\t\t    return vm.monitoring && vm.monitoring.contract && contract.number === vm.monitoring.contract.number;\r\n\t    }\r\n\t\r\n\t    function isMonitoringContractSet() {\r\n\t\t    return $scope.$parent.vm.stepStatus.contract;\r\n\t    }\r\n\r\n        $scope.$on('next_contract', function (event, update) {\r\n            console.log('on next_request event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $scope.$on('previous_contract', function (event, update) {\r\n            console.log('on previous_request event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n    }\r\n\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('MonitoringCommentController', MonitoringCommentController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction MonitoringCommentController(host, $q, $stateParams, $log, MonitoringService, Util, $scope, $rootScope) {\r\n\t\tvar vm = this;\r\n\t\t\r\n\t\tvm.monitoringConflict = {};\r\n\t\tvm.conflicts = [];\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\tvar firstLoad = true;\r\n\t\tvm.toggleAdd = false;\r\n\t\tvm.monitoring = {};\r\n\t\tvm.host = host;\r\n\t\tvm.accept = accept;\r\n\t\tvm.reject = reject;\r\n\t\tvm.getMonitoring = getMonitoring;\r\n\t\tvm.getAllowedActions = getAllowedActions;\r\n\t\tvm.nextStepTitle = nextStepTitle;\r\n\t\tvm.previousStepTitle = previousStepTitle;\r\n        vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t\tvm.next = $scope.$parent.vm.next;\r\n\t\tvm.previous = $scope.$parent.vm.previous;\r\n\t\t\r\n\t\tvm.title = 'Monitoring  Conflict List Controller Active';\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n\t\t\tgetMonitoring(true);\r\n            getDirective(true);\r\n\t\t\tgetAllowedActions(true);\r\n            getProcessLogs();\r\n\t\t}\r\n\t\t\r\n\t\tfunction getMonitoring(doNotUpdate) {\r\n\t\t\treturn $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.monitoring = data ? data : {};\r\n\t\t\t\t\tgetAllowedActions();\r\n\t\t\t\t\treturn vm.monitoring;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function getDirective(doNotUpdate) {\r\n            return $scope.$parent.vm.getDirective(doNotUpdate).then(\r\n                function (data) {\r\n                    vm.directive = data ? data : {};\r\n                    return vm.directive;\r\n                });\r\n        }\r\n\t\t\r\n\t\tfunction accept() {\r\n\t\t\tconsole.log('accept', $scope.$parent.vm.stepStatus);\r\n            if (!$scope.$parent.vm.stepStatus.details) {\r\n                Util.toast('error', 'Please fill all the required fields in details section');\r\n                return;\r\n            }\r\n            if (!$scope.$parent.vm.stepStatus.assurance || !(vm.monitoring.dirAssurances && vm.monitoring.dirAssurances.length > 0)) {\r\n                Util.toast('error', 'Please fill all the required fields in assurance section');\r\n                return;\r\n            }\r\n            if (!$scope.$parent.vm.stepStatus.preConditions) {\r\n                Util.toast('error', 'Please control all the preConditions');\r\n                return;\r\n            }\r\n            if (!$scope.$parent.vm.stepStatus.license) {\r\n                Util.toast('error', 'Please control all the licenses');\r\n                return;\r\n            }\r\n            if (!(vm.directive.dirApproveDate && vm.directive.dirNumber && vm.directive.dirValidityDuration && vm.directive.directiveApprovalPlace && vm.directive.dirCreditSupplyResource && vm.directive.dirEconomicSection && vm.directive.dirPlanType && vm.directive.branchChiefInGrantingTime && vm.directive.dirBranchPhoneNumber && vm.directive.dirExpert && vm.directive.dirApplicantPhoneNumber && vm.directive.dirActivitySubject && vm.directive.dirProjectLocationAddress)) {\r\n                Util.toast('error', 'Please fill all the required fields in directive details');\r\n                return;\r\n            }\r\n            if (!(vm.monitoring.applicant && ((vm.monitoring.applicant.applicantType === 'LEGAL') ? vm.monitoring.monitoringBoards.length > 0 : true))) {\r\n                Util.toast('error', 'Please fill all the required fields in applicant');\r\n                return;\r\n            }\r\n            if (!(vm.monitoring.dirPayments && vm.monitoring.dirPayments.length > 0)) {\r\n                Util.toast('error', 'Please control all the payment parts');\r\n                return;\r\n            }\r\n            if (!$scope.$parent.vm.stepStatus.invoice) {\r\n                Util.toast('error', 'Please control all the invoices');\r\n                return;\r\n            }\r\n            if (!$scope.$parent.vm.stepStatus.payments) {\r\n                Util.toast('error', 'Please control all the payments');\r\n                return;\r\n            }\r\n\t\t\tconsole.log('accept', vm.monitoring.currentStep.name);\r\n\t\t\tswitch (vm.monitoring.currentStep.name) {\r\n\t\t\t\tcase 'created': {\r\n\t\t\t\t\tMonitoringService.startMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'started' : {\r\n\t\t\t\t\tUtil.toast('error', 'APP.MESSAGES.CALCULATE_CONFLICTS_FIRST');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'calculated' : {\r\n\t\t\t\t\tif (vm.monitoring.organizationLevel === \"BRANCH\")\r\n\t\t\t\t\t\tMonitoringService.branchExpertAccept(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tMonitoringService.firstExpertAcceptMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'firstExpertAccepted': {\r\n\t\t\t\t\tMonitoringService.secondExpertAcceptMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'provinceAcceptingWaited':\r\n\t\t\t\tcase 'teamHeadAcceptingWaited':\r\n\t\t\t\tcase 'teamHeadAccepted': {\r\n\t\t\t\t\tMonitoringService.acceptMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction reject() {\r\n\t\t\tswitch (vm.monitoring.currentStep.name) {\r\n\t\t\t\tcase 'created':\r\n\t\t\t\tcase 'started':\r\n\t\t\t\tcase 'calculated':\r\n\t\t\t\tcase 'firstExpertAccepted':\r\n\t\t\t\tcase 'provinceAcceptingWaited':\r\n\t\t\t\tcase 'teamHeadAcceptingWaited': {\r\n\t\t\t\t\tMonitoringService.rejectMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'teamHeadAccepted': {\r\n\t\t\t\t\tMonitoringService.finalHeadRejectMonitoring(vm.monitoringId, vm.comment).then(successCallback, errorCallback);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction successCallback() {\r\n\t\t\tconsole.log('success');\r\n\t\t\tUtil.toast('success', 'APP.MESSAGES.SUCCESS');\r\n\t\t\tvm.comment = null;\r\n\t\t\tgetMonitoring();\r\n            $scope.$parent.vm.setIsMyMonitoring();\r\n            $scope.$parent.vm.getLastMonitoringProcessLogs();\r\n\t\t\t$rootScope.$broadcast(\"stateChanged\");\r\n\t\t}\r\n\t\t\r\n\t\tfunction errorCallback(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllowedActions(doNotUpdate) {\r\n\t\t\t$scope.$parent.vm.getAllowedActions(doNotUpdate).then(function () {\r\n\t\t\t\tvm.allowedActionList = $scope.$parent.vm.allowedActionList;\r\n\t\t\t\tvm.allowedAction = $scope.$parent.vm.allowedAction;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction nextStepTitle() {\r\n\t\t\tvar nextStep = MonitoringService.getNextStepSync(vm.monitoring.currentStep.id, vm.monitoring.organizationLevel, vm.monitoring.userMonitorings.length);\r\n\t\t\treturn nextStep && nextStep.title.split('-').length > 1 ? 'تائيد و ارسال' : 'تائيد نهایی';\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction previousStepTitle() {\r\n\t\t\tvar nextStep = MonitoringService.getPreviousStepSync(vm.monitoring.currentStep.id, vm.monitoring.userMonitorings.length);\r\n\t\t\treturn nextStep && nextStep.title.split('-').length > 1 ? 'بازگشت به ' + nextStep.title.split('-')[0] : 'بازگشت به حالت آغازین';\r\n\t\t\t\r\n\t\t}\r\n\r\n        function getProcessLogs() {\r\n\t\t\t$scope.$parent.vm.getLastMonitoringProcessLogs(true).then(function () {\r\n\t\t\t\tvm.lastAction = $scope.$parent.vm.lastProcess;\r\n\t\t\t});\r\n\t\t}\r\n\r\n        $rootScope.$on('next_comment', function (event, update) {\r\n            console.log('on next_comment event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_comment', function (event, update) {\r\n            console.log('on previous_comment event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n\t}\r\n\t\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringCheckListController', MonitoringCheckListController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringCheckListController($rootScope, $stateParams, $log, $scope, $q, MonitoringService, CheckListService, Util) {\r\n        var vm = this;\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.checkList = [];\r\n        vm.monitoringCheckList = [];\r\n        vm.title = 'Monitoring Check List Controller Active';\r\n        vm.monitoring = {};\r\n\r\n        vm.agentBranchPerformance ={};\r\n        vm.approverPerformance ={};\r\n        vm.applicantPerformance ={};\r\n\r\n        vm.finalExpertComment =\"\";\r\n\r\n        vm.addFinalExpertComment = addFinalExpertComment;\r\n        vm.addCheckListToMonitoring = addCheckListToMonitoring;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n        vm.updatePerformanceEvaluation = updatePerformanceEvaluation;\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            vm.loadingCheckList = true;\r\n            getMonitoringById();\r\n\t        updateAllowedActions(true);\r\n\r\n        }\r\n\r\n        function updatePerformanceEvaluation() {\r\n            var params = {\r\n                applicantPerformanceEvaluation: vm.applicantPerformance,\r\n                agentBranchPerformanceEvaluation: vm.agentBranchPerformance,\r\n                approverPerformanceEvaluation: vm.approverPerformance\r\n            };\r\n\r\n            MonitoringService.setPerformanceEvaluations(vm.monitoringId, params).then(function (data) {\r\n                Util.toast('success');\r\n                getMonitoringById(false);\r\n            }, function () {\r\n                getMonitoringById(true);\r\n            });\r\n        }\r\n\r\n        function getMonitoringById(doNotUpdate) {\r\n            if ($scope.$parent)\r\n                return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                    function (data) {\r\n                        vm.monitoring = data;\r\n                        vm.agentBranchPerformance = vm.monitoring.agentBranchPerformanceEvaluation;\r\n                        vm.approverPerformance = vm.monitoring.approverPerformanceEvaluation;\r\n                        vm.applicantPerformance = vm.monitoring.applicantPerformanceEvaluation;\r\n                        getAllCheckList();\r\n                        return vm.monitoring;\r\n                    });\r\n            return {\r\n                then: function (f) {\r\n                    return f();\r\n                }\r\n            }\r\n        }\r\n\r\n        function getAllCheckList() {\r\n            console.log(\"monitoring = \", vm.monitoring);\r\n\t        if (vm.monitoring.currentStep.id === 2) {\r\n                return CheckListService.getEnabledCheckList().then(\r\n                    function (data) {\r\n                        vm.checkList = data ? data : [];\r\n                        vm.monitoringCheckList = [];\r\n                        for (var i = 0; i < vm.checkList.length; i++) {\r\n                            var monitoringCheckListItem = {\r\n                                checkList: vm.checkList[i],\r\n                                checkListStatus: \"\",\r\n                                comment: \"\",\r\n                                monitoring: {\r\n                                    id: vm.monitoringId\r\n                                }\r\n                            };\r\n                            vm.monitoringCheckList.push(monitoringCheckListItem);\r\n                        }\r\n                        fillMonitoringCheckList();\r\n                        // console.log(\"vm.monitoringCheckList = \",vm.monitoringCheckList);\r\n                        vm.loadingCheckList = false;\r\n                        return vm.monitoringCheckList;\r\n                    });\r\n            }\r\n\t        else if (vm.monitoring.currentStep.id !== 2) {\r\n                vm.monitoringCheckList = [];\r\n                vm.monitoringCheckList = vm.monitoringCheckList.concat(vm.monitoring.monitoringCheckLists);\r\n                // console.log(\"*** vm.monitoringCheckList = \",vm.monitoringCheckList);\r\n                vm.loadingCheckList = false;\r\n                return vm.monitoringCheckList;\r\n            }\r\n        }\r\n\r\n        function fillMonitoringCheckList() {\r\n            vm.monitoringCheckListCount = 0;  //  number of replied check lists\r\n            for (var i = 0; i < vm.monitoring.monitoringCheckLists.length; i++) {\r\n                for (var j = 0; j < vm.monitoringCheckList.length; j++) {\r\n                    if (vm.monitoring.monitoringCheckLists[i].checkList.id ===\r\n                        vm.monitoringCheckList[j].checkList.id) {\r\n                        vm.monitoringCheckListCount++;\r\n                        vm.monitoringCheckList[j].checkListStatus = vm.monitoring.monitoringCheckLists[i].checkListStatus;\r\n                        vm.monitoringCheckList[j].comment = vm.monitoring.monitoringCheckLists[i].comment;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function addFinalExpertComment() {\r\n            MonitoringService.SetFinalCommentInMonitoring(vm.monitoringId, vm.monitoring.finalExpertComment).then(\r\n                function () {\r\n                    getMonitoringById(false);\r\n                    Util.toast('success');\r\n                }, function () {\r\n\t\t            getMonitoringById();\r\n\t            });\r\n        }\r\n\r\n        function addCheckListToMonitoring(caller) {\r\n            vm.loadingCheckList = true;\r\n            if (caller)\r\n                console.log('addCheckListToMonitoring by ' + caller);\r\n            var finalMonitoringCheckList = [];\r\n            for (var i = 0; i < vm.monitoringCheckList.length; i++) {\r\n                vm.monitoringCheckList[i].monitoring = {\r\n                    id: vm.monitoring.id\r\n                };\r\n\t            if (vm.monitoringCheckList[i].checkListStatus !== '')\r\n                    finalMonitoringCheckList.push(vm.monitoringCheckList[i]);\r\n            }\r\n\r\n            MonitoringService.AddCheckListToMonitoring(vm.monitoringId, finalMonitoringCheckList).then(\r\n                function () {\r\n                    vm.loadingCheckList = false;\r\n                    getMonitoringById(false);\r\n                    Util.toast('success');\r\n                },\r\n                function () {\r\n                    vm.loadingCheckList = false;\r\n                    getMonitoringById();\r\n                });\r\n\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n            if ($scope.$parent)\r\n                $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n                    function (data) {\r\n                        vm.allowedAction = data;\r\n                    });\r\n\t    }\r\n\t\r\n\t    $rootScope.$on('stateChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    updateAllowedActions(false);\r\n\t    });\r\n\r\n        var nextLock = false;\r\n        $rootScope.$on('next_checkList', function (event, update) {\r\n            if (nextLock)\r\n                return;\r\n            console.log('on next_checkList event', update, nextLock);\r\n            nextLock = true;\r\n            if (update) {\r\n                $q.all([addCheckListToMonitoring('next_checkList event'), addFinalExpertComment(), updatePerformanceEvaluation()]).then(function () {\r\n                    getMonitoringById().then(function () {\r\n                        fillMonitoringCheckList();\r\n                        nextLock = false;\r\n                        $scope.$emit('next', true);\r\n                    });\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n        });\r\n        $rootScope.$on('previous_checkList', function (event, update) {\r\n            console.log('on previous_checkList event', update);\r\n            if (update) {\r\n                $q.all([addCheckListToMonitoring('previous_checkList event'), addFinalExpertComment(), updatePerformanceEvaluation()]).then(function () {\r\n                    getMonitoringById().then(function () {\r\n                        fillMonitoringCheckList();\r\n                        $scope.$emit('previous', true);\r\n                    });\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n        })\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('CancelFinalizedController', CancelFinalizedController);\r\n\r\n    /** @ngInject */\r\n    function CancelFinalizedController(monitoring, MonitoringService, $uibModalInstance, Util) {\r\n        var vm = this;\r\n\r\n        vm.title = 'Cancel Finalized Controller';\r\n        vm.cancel = cancel;\r\n        vm.ok = ok;\r\n        vm.monitoring = monitoring;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(vm.title + ' activated');\r\n        }\r\n\r\n        function cancel() {\r\n            $uibModalInstance.dismiss();\r\n        }\r\n\r\n        function ok() {\r\n            if (!vm.message) {\r\n                Util.toast('error', 'Please write related message');\r\n                return;\r\n            }\r\n            MonitoringService.cancelFinalized(vm.monitoring.id, vm.message).then(function (value) {\r\n                $uibModalInstance.close();\r\n            }, function (reason) {\r\n                $uibModalInstance.dismiss();\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/11/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('MonitoringAttachmentsController', MonitoringAttachmentsController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringAttachmentsController($confirm, $uibModalInstance, $log, MonitoringService, $stateParams, Util,\r\n                                             $scope, Principal) {\r\n        var vm = this;\r\n        vm.monitoring = {};\r\n        vm.monitoringId = $stateParams.monitoringId || monitoringId;\r\n        vm.monitorings = [];\r\n        vm.title = 'Monitoring Attachments Controller';\r\n        vm.toggleEdit = [];\r\n        vm.attachments = [];\r\n        vm.attachment = {};\r\n        vm.isModal = !!$uibModalInstance;\r\n\r\n        vm.cancelAddAttachment = cancelAddAttachment;\r\n        vm.deleteAttachment = deleteAttachment;\r\n        vm.attachFile = attachFile;\r\n        vm.close = close;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getMonitoring(true);\r\n        }\r\n\r\n        function attachFile() {\r\n            if (vm.attachment.attachment.size > 7000000) {\r\n                Util.toast('error', 'APP.ERRORS.MAXIMUM_FILE_SIZE_EXCEPTION', 'add attachment maximum file size error');\r\n                return;\r\n            }\r\n            vm.loading = true;\r\n            if (vm.attachment) {\r\n                vm.description = vm.description || null;\r\n                // افزودن پرامتر به سرویس به درخواست سرور\r\n                var params = {\r\n                    name: vm.attachment.attachment.name,\r\n                    description: vm.description\r\n                };\r\n                MonitoringService.addFileAttachmentToMonitoring(vm.monitoring.id, vm.attachment, params).then(function () {\r\n                        getMonitoring(false);\r\n                        vm.attachment = {};\r\n                        vm.description = '';\r\n                        Util.toast('success');\r\n                    },\r\n                    function (response) {\r\n                        var status = response.status;\r\n                        vm.loading = false;\r\n                        if (status === 401) {\r\n                            Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n                        } else\r\n                            Util.toast('error', 'APP.MESSAGES.FAIL', 'add attachment error');\r\n                    }\r\n                )\r\n            }\r\n        }\r\n\r\n        function deleteAttachment(item, index) {\r\n            Principal.identity().then(function (currentUser) {\r\n                if ((currentUser.username === item.creatorLmsUser.username) || (Principal.isInRole(\"STAFF_DISPATCHER\") && [7,9,10].includes(vm.monitoring.currentStep.id))) {\r\n                    $confirm().then(function (response) {\r\n                        var params = {\r\n                            attachmentId: vm.attachments[index].id\r\n                        };\r\n\r\n                        MonitoringService.deleteAttachmentFromMonitoring(vm.monitoring.id, params).then(function () {\r\n                                vm.attachments.splice(index, 1);\r\n                                Util.toast('success');\r\n                            },\r\n                            function () {\r\n                                Util.toast('error', 'APP.MESSAGES.FAIL', 'deleteAttachment error');\r\n                            })\r\n                    });\r\n                } else {\r\n                    Util.toast('error', 'APP.ERRORS.Unauthorized user to delete the monitoring attachment', 'deleteAttachment authenticartion error');\r\n                }\r\n            });\r\n        }\r\n\r\n        function cancelAddAttachment() {\r\n            vm.attachment = {};\r\n            vm.toggleAddAttachment = true;\r\n        }\r\n\r\n        function getMonitoring(doNotUpdate) {\r\n            vm.loading = true;\r\n            if ($scope.$parent.vm)\r\n                return $scope.$parent.vm.getMonitoring(doNotUpdate).then(successCallBack, errorCallBack);\r\n            else {\r\n                MonitoringService.getMonitoringById(vm.monitoringId).then(successCallBack, errorCallBack);\r\n            }\r\n\r\n            function successCallBack(data) {\r\n                vm.monitoring = data ? data : {};\r\n                vm.attachments = vm.monitoring.attachments;\r\n                vm.loading = false;\r\n                canDelete();\r\n                return vm.monitoring;\r\n            }\r\n\r\n            function errorCallBack() {\r\n                vm.loading = false;\r\n            }\r\n        }\r\n\r\n        function canDelete() {\r\n            Principal.identity().then(function (currentUser) {\r\n                vm.attachments.forEach(function (attachment) {\r\n                    attachment.canDelete = (currentUser.username === attachment.creatorLmsUser.username) || (Principal.isInRole(\"STAFF_DISPATCHER\") && [7,9,10].includes(vm.monitoring.currentStep.id));\r\n                });\r\n            });\r\n        }\r\n\r\n        function close() {\r\n            $uibModalInstance.dismiss();\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringAssuranceController', MonitoringAssuranceController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringAssuranceController($rootScope, $confirm, $stateParams, $log, NgTableParams, ConflictService, $scope,\r\n                                           MonitoringService, DirectiveService, AssuranceTypeService, Util) {\r\n        var vm = this;\r\n\r\n        vm.monitoring = {};\r\n        vm.assurances = [];\r\n        vm.assurance = {};\r\n        vm.conflicts = [];\r\n        vm.assuranceTypes = [];\r\n        vm.toggleEdit = [];\r\n        var firstLoad = true;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getMonitoringById\r\n        });\r\n        vm.toggleAddEdit = true;\r\n        vm.showFlag = false;\r\n        vm.title = 'Monitoring assurance List Controller Active';\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.totalAmount = 0;\r\n        vm.totalDifference = 0;\r\n\r\n        vm.sumExpertValue = 0;\r\n        vm.sumAcceptedValue = 0;\r\n        vm.sumMortgagedValue = 0;\r\n\r\n        vm.sumOfSumTakenAssuranceAmount = 0;\r\n\r\n        vm.addAssurance = addAssurance;\r\n        vm.updateAssurance = updateAssurance;\r\n        vm.deleteAssuranceFromMonitoring = deleteAssuranceFromMonitoring;\r\n        vm.calcAcceptedValue = calcAcceptedValue;\r\n        vm.cancelEdit = cancelEdit;\r\n\t    vm.keyPressed = keyPressed;\r\n\t    vm.openAttachmentModal = $scope.$parent.vm.openAttachmentModal;\r\n\t    vm.next = $scope.$parent.vm.next;\r\n\t    vm.previous = $scope.$parent.vm.previous;\r\n\t    vm.loading = true;\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllAssuranceTypes();\r\n\t        updateAllowedActions(true);\r\n        }\r\n\r\n        function getMonitoringById() {\r\n            return $scope.$parent.vm.getMonitoring(firstLoad).then(\r\n                function (data) {\r\n                    vm.monitoring = data;\r\n                    firstLoad = false;\r\n                    vm.assurances = data ? data.monitoringAssurances : [];\r\n                    vm.sumExpertValue = 0;\r\n                    vm.sumAcceptedValue = 0;\r\n                    vm.sumMortgagedValue = 0;\r\n                    vm.assurances.forEach(function (assurance) {\r\n                        vm.sumExpertValue += assurance.expertValue;\r\n                        vm.sumAcceptedValue += assurance.expertValue * assurance.assuranceType.acceptedPercent/100;\r\n                        vm.sumMortgagedValue += assurance.mortgagedValue;\r\n                    });\r\n\t                handleDirAssurances();\r\n\t                getAllConflict();\r\n                    return vm.assurances;\r\n                });\r\n        }\r\n\t\r\n\t    function handleDirAssurances() {\r\n\t\t    var requiredAssurancePercentage = (vm.monitoring.directive && vm.monitoring.directive.dirRequiredAssurancePercentage) ? vm.monitoring.directive.dirRequiredAssurancePercentage : 100;\r\n            vm.totalAmount = vm.monitoring.requiredAssuranceAmount;\r\n            vm.totalAmount = Math.floor(vm.totalAmount);\r\n\t\t    if (vm.monitoring.dirAssurances.length === 0)\r\n\t\t\t    vm.showFlag = true;\r\n\t\t    vm.dirAssurances = vm.monitoring.dirAssurances;\r\n\t        \r\n        }\r\n\r\n        function getAllAssuranceTypes() {\r\n            return AssuranceTypeService.getAllAssuranceTypes().then(\r\n                function (data) {\r\n                    vm.assuranceTypes = data ? data : [];\r\n                    return vm.assuranceTypes;\r\n                });\r\n        }\r\n\r\n        function signed(amount) {\r\n            var absConflictAmount = Math.abs(amount);\r\n            if (amount > 0)\r\n                return absConflictAmount + \"-\";\r\n            else if (amount < 0)\r\n                return absConflictAmount + \"+\";\r\n            return 0;\r\n        }\r\n        function getAllConflict() {\r\n            var params = {monitoringId: vm.monitoringId};\r\n            return ConflictService.getAssuranceConflict(params).then(\r\n                function (data) {\r\n                    console.log('getAssuranceConflict', data);\r\n                    vm.conflicts = data ? data : [];\r\n                    vm.sumOfSumTakenAssuranceAmount = 0;\r\n                    //  check if there is any directiveAssurance which does not have corresponding monitoringAssurance\r\n\t                vm.dirAssurances.forEach(function (assurance) {\r\n\t\t                var notExist = true;\r\n\t\t                for (var i = 0; i < vm.conflicts.length; i++) {\r\n                            if (vm.conflicts[i].assuranceType.id === assurance.assuranceType.id) {\r\n                                notExist = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        //  if monitoring assurance was not found with requested type, add a row with the same type in conflict list\r\n\t\t                if (notExist) {\r\n\t\t                    console.log(\"assurance not exist = \", assurance);\r\n\t\t\t                vm.conflicts.push({\r\n\t\t\t\t                assuranceType: assurance.assuranceType,\r\n\t\t\t\t                condition: assurance.limit,\r\n\t\t\t\t                dirAssurance: assurance,\r\n\t\t\t\t                directive: {\r\n\t\t\t\t\t                id: vm.monitoring.contract.directiveId\r\n\t\t\t\t                },\r\n\t\t\t\t                dirAssuranceAmount: null,\r\n\t\t\t\t                sumTakenAssuranceAmount: 0\r\n\t\t\t                });\r\n\t\t                }\r\n\t                });\r\n                    //  set getConflict function for each assuranceConflict\r\n                    vm.conflicts.forEach(function (conflict) {\r\n\t                    conflict.getConflict = function () {\r\n                            var conflictAmount = conflict.dirAssuranceAmount-conflict.sumTakenAssuranceAmount;\r\n                            conflict.conflictAmount = signed(conflictAmount);\r\n                            // conflict.conflictAmount = conflictAmount>0 ? \"+\"+conflictAmount : conflictAmount;\r\n\t\t                    if (this.sumTakenAssuranceAmount && !this.condition)\r\n\t\t\t                    return 'OrangeBG';\r\n\r\n\t\t                    switch (this.condition) {\r\n\t\t\t                    case \"MAXIMUM\":\r\n\t\t\t\t                    //  !this.dirAssuranceAmount means nothing have been taken\r\n\t\t\t\t                    if (!this.dirAssuranceAmount)\r\n\t\t\t\t\t                    break;\r\n\t\t\t\t                    if (this.sumTakenAssuranceAmount > this.dirAssuranceAmount){\r\n                                        return 'OrangeBG';\r\n                                    }\r\n\t\t\t\t                    break;\r\n\t\t\t                    case \"MINIMUM\":\r\n\t\t\t\t                    if (!this.dirAssuranceAmount || this.sumTakenAssuranceAmount < this.dirAssuranceAmount) {\r\n                                        return 'RedBG';\r\n                                    }\r\n\t\t\t\t                    break;\r\n\t\t\t                    case \"EQUAL\":\r\n\t\t\t\t                    if (!this.dirAssuranceAmount || this.sumTakenAssuranceAmount < this.dirAssuranceAmount) {\r\n                                        return 'RedBG';\r\n                                    }\r\n\t\t\t\t                    if (this.sumTakenAssuranceAmount > this.dirAssuranceAmount){\r\n                                        return 'OrangeBG';\r\n                                    }\r\n\t\t\t\t                    break;\r\n\t\t\t                    case \"REST\":\r\n\t\t\t\t                    if (vm.totalAmount > vm.sumOfSumTakenAssuranceAmount) {\r\n\t\t\t\t\t                    return 'RedBG';\r\n                                    }\r\n\t\t\t\t                    break;\r\n\t\t\t                    default:\r\n\t\t\t\t                    return 'non';\r\n\t\t                    }\r\n\t\t                    return 'non';\r\n\t                    };\r\n                        vm.sumOfSumTakenAssuranceAmount += conflict.sumTakenAssuranceAmount;\r\n                    });\r\n\t                vm.totalDifference = signed(vm.totalAmount - vm.sumOfSumTakenAssuranceAmount);//vm.totalAmount > vm.sumOfSumTakenAssuranceAmount ? vm.totalAmount - vm.sumOfSumTakenAssuranceAmount : 0;\r\n\t                vm.conflicts.forEach(function (conflict) {\r\n\t                    //  for conflict type of REST, dirAssurance amount is 'what should be taken' minus sum of all taken assurance except REST taken amount\r\n\t\t                if (conflict.condition === 'REST'){\r\n                            conflict.dirAssuranceAmount = (vm.totalAmount - (vm.sumOfSumTakenAssuranceAmount - conflict.sumTakenAssuranceAmount) > 0 ? vm.totalAmount - (vm.sumOfSumTakenAssuranceAmount - conflict.sumTakenAssuranceAmount) : 0);\r\n                            conflict.conflictAmount = vm.totalDifference;\r\n                        }\r\n\t                });\r\n\t                vm.loading = false;\r\n                    return vm.conflicts;\r\n                }\r\n\t            , function () {\r\n\t\t            vm.loading = false;\r\n\t            });\r\n        }\r\n\r\n        function addAssurance() {\r\n\t        if (vm.loading)\r\n\t\t        return;\r\n\t        vm.loading = true;\r\n            MonitoringService.AddAssuranceToMonitoring(vm.monitoringId, vm.assurance).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    vm.assurance = {};\r\n                    vm.tableParams.reload();\r\n                    getAllConflict();\r\n                }, function () {\r\n\t\t            vm.loading = false;\r\n\t            });\r\n        }\r\n\r\n        function updateAssurance(assurance, index) {\r\n            if (assurance) {\r\n\t            if (vm.loading)\r\n\t\t            return;\r\n\t            vm.loading = true;\r\n                var params = {monitoringAssuranceId: assurance.id};\r\n                assurance.monitoring = {\r\n                    id: vm.monitoring.id\r\n                };\r\n                MonitoringService.updateAssuranceInMonitoring(vm.monitoringId, assurance, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        cancelEdit(index);\r\n                    }, function () {\r\n\t\t                vm.loading = false;\r\n\t                });\r\n            }\r\n        }\r\n\r\n        function deleteAssuranceFromMonitoring(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n\t                if (vm.loading)\r\n\t\t                return;\r\n\t                vm.loading = true;\r\n                    var params = {monitoringAssuranceId: id};\r\n                    MonitoringService.deleteAssuranceFromMonitoring(vm.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n                            vm.tableParams.reload();\r\n\t                        // getAllConflict();\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\r\n        function calcAcceptedValue() {\r\n\t        if (vm.assurance.assuranceType && vm.assurance.assuranceType.acceptedPercent && vm.assurance.expertValue) {\r\n                vm.assurance.acceptedValue = vm.assurance.assuranceType.acceptedPercent * vm.assurance.expertValue / 100;\r\n            }\r\n        }\r\n\r\n        function cancelEdit(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n            vm.tableParams.reload();\r\n            getAllConflict();\r\n        }\r\n\t\r\n\t    function updateAllowedActions(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getAllowedActions(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.allowedAction = data;\r\n\t\t\t    });\r\n\t    }\r\n\t\r\n\t    function keyPressed(event, invoiceId, invoice, index) {\r\n\t\t    if (event.keyCode === 13 && !event.shiftKey) {\r\n\t\t\t    if (invoiceId) updateAssurance(invoiceId, invoice, index);\r\n\t\t\t    else addAssurance();\r\n\t\t    }\r\n\t    }\r\n\t\r\n\t    $rootScope.$on('stateChanged', function () {\r\n\t\t    if ($scope.$parent)\r\n\t\t\t    updateAllowedActions(false);\r\n\t    });\r\n        $rootScope.$on('next_assurance', function (event, update) {\r\n            console.log('on next_assurance event', update);\r\n            $scope.$emit('next', true);\r\n\r\n        });\r\n        $rootScope.$on('previous_assurance', function (event, update) {\r\n            console.log('on previous_assurance event', update);\r\n            $scope.$emit('previous', true);\r\n        })\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:samatStats\r\n     * @description\r\n     * # samatStats\r\n     */\r\n    angular\r\n        .module('app')\r\n        .directive('samatStats', samatStats);\r\n\r\n    /** @ngInject */\r\n    function samatStats() {\r\n        return {\r\n            templateUrl: 'app/components/home/stats/stats.html',\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {\r\n                'color': '@',\r\n                'comments': '@',\r\n                'details': '@',\r\n                'icon': '@',\r\n                'model': '=',\r\n                'name': '@',\r\n                'number': '@',\r\n                'title': '@'\r\n            }\r\n        };\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('DirectivePaymentPerPartController', DirectivePaymentPerPartController);\r\n\r\n    /** @ngInject */\r\n    function DirectivePaymentPerPartController($state, $confirm, $stateParams, $scope, DirectiveService, InvestmentActionService, Util) {\r\n        var vm = this;\r\n        vm.dirPaymentPerParts = [];\r\n        vm.dirPaymentPerPart = {};\r\n        vm.investmentActions = [];\r\n        vm.sumBankShareAmount = 0;\r\n        vm.sumApplicantShareAmount = 0;\r\n        vm.sumPaymentStepCount = 0;\r\n\r\n        vm.deleteDirPaymentPerPart = deleteDirPaymentPerPart ;\r\n        vm.addDirPaymentPerPart = addDirPaymentPerPart;\r\n\t    vm.updateDirPaymentPerPart = updateDirPaymentPerPart;\r\n\t    vm.retrieve = retrieve;\r\n\t    vm.editing = editing;\r\n\t    vm.keyPressed = keyPressed;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(\"ContractAssuranceTypesController Active \");\r\n\t        getInvestmentActions().then(function () {\r\n\t\t        if ($stateParams.monitoringId) {\r\n\t\t\t        getPaymentParts(true);\r\n\t\t        }\r\n\t        });\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\t\r\n\t    function getInvestmentActions() {\r\n            return InvestmentActionService.getAllInvestmentActions().then(\r\n                function (data) {\r\n                    vm.investmentActions = data ? data : [];\r\n                    return vm.investmentActions;\r\n                });\r\n        }\r\n\t\r\n\t    function getPaymentParts(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                function (data) {\r\n\t                vm.dirPaymentPerParts = data ? data.dirPayments : [];\r\n\t                vm.dirPaymentPerParts.forEach(function (t) {\r\n\t\t                t.investmentAction = vm.investmentActions.filter(function (t2) {\r\n\t\t\t                return t2.id === t.investmentAction.id\r\n\t\t                })[0];\r\n\t                });\r\n\t                vm.dirPaymentPerPartsTemp = angular.copy(vm.dirPaymentPerParts);\r\n                    vm.sumBankShareAmount = 0;\r\n                    vm.sumApplicantShareAmount = 0;\r\n                    vm.sumPaymentStepCount = 0;\r\n                    vm.dirPaymentPerParts.forEach(function (paymentPerPart) {\r\n                        vm.sumBankShareAmount += paymentPerPart.bankShareAmount;\r\n                        vm.sumApplicantShareAmount += paymentPerPart.applicantShareAmount;\r\n                        vm.sumPaymentStepCount += paymentPerPart.paymentStepCount;\r\n                    });\r\n\t                return vm.dirPaymentPerParts;\r\n                });\r\n        }\r\n\r\n        function deleteDirPaymentPerPart(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    var params = {\r\n                        dirPaymentId: id\r\n                    };\r\n\t                DirectiveService.deletePaymentFromDirective($stateParams.monitoringId, params).then(successCallback);\r\n                }\r\n            });\r\n            function successCallback() {\r\n                Util.toast('success');\r\n\t            getPaymentParts(false);\r\n            }\r\n        }\r\n\t\r\n\t    function addDirPaymentPerPart(isValid) {\r\n\t\t    if (!isValid)\r\n\t\t\t    return;\r\n\t\t    vm.dirPaymentPerPart.monitoring = {\r\n\t\t\t    // id : $stateParams.monitoringId\r\n            };\r\n\t\t    return DirectiveService.AddPaymentToDirective($stateParams.monitoringId, vm.dirPaymentPerPart).then(successCallback);\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.dirPaymentPerPart = {};\r\n\t            getPaymentParts(false);\r\n            }\r\n        }\r\n\t\r\n\t    function updateDirPaymentPerPart(dirPaymentPerPart, index) {\r\n\t\t    var inValid = false;\r\n\t\t    angular.forEach(dirPaymentPerPart, function (v) {\r\n\t\t\t    if (v === undefined)\r\n\t\t\t\t    inValid = true;\r\n\t\t    });\r\n\t\t    if (inValid)\r\n\t\t\t    return;\r\n\t\t    console.log(dirPaymentPerPart);\r\n\t\t    DirectiveService.updatePaymentInDirective($stateParams.monitoringId, dirPaymentPerPart).then(function () {\r\n\t\t\t    Util.toast('success');\r\n\t\t\t    dirPaymentPerPart.editing = false;\r\n\t\t\t\tgetPaymentParts(false);\r\n\t\t\t    vm.dirPaymentPerPartsTemp[index] = angular.copy(vm.dirPaymentPerParts[index])\r\n                vm.dirPaymentPerPartsTemp[index] = angular.copy(vm.dirPaymentPerParts[index]);\r\n                vm.sumBankShareAmount = 0;\r\n                vm.sumApplicantShareAmount = 0;\r\n                vm.sumPaymentStepCount = 0;\r\n                vm.dirPaymentPerParts.forEach(function (paymentPerPart) {\r\n                    vm.sumBankShareAmount += paymentPerPart.bankShareAmount;\r\n                    vm.sumApplicantShareAmount += paymentPerPart.applicantShareAmount;\r\n                    vm.sumPaymentStepCount += paymentPerPart.paymentStepCount;\r\n                });\r\n\t\t    }, function () {\r\n\t\t\t    retrieve(index);\r\n                getPaymentParts(true);\r\n\t\t\t    Util.toast('error');\r\n\t\t    })\r\n\t    }\r\n\t\r\n\t    function retrieve(index) {\r\n\t\t    vm.dirPaymentPerParts[index] = angular.copy(vm.dirPaymentPerPartsTemp[index]);\r\n\t    }\r\n\t\r\n\t    function editing() {\r\n\t\t    for (var i = 0; i < vm.dirPaymentPerParts.length; i++) {\r\n\t\t\t    if (vm.dirPaymentPerParts[i].editing)\r\n\t\t\t\t    return true;\r\n\t\t    }\r\n\t    }\r\n\t\r\n\t    function keyPressed(event, isValid, item, index) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    if (item)\r\n\t\t\t\t    updateDirPaymentPerPart(item, index);\r\n\t\t\t    else\r\n\t\t\t\t    addDirPaymentPerPart(isValid);\r\n\t\t    }\r\n\t    }\r\n\r\n        $scope.$on('paymentPerPart-next', function () {\r\n            console.log('on paymentPerPart-next event');\r\n            $scope.$emit('next', true);\r\n        });\r\n        $scope.$on('paymentPerPart-previous', function () {\r\n            console.log('on paymentPerPart-previous event');\r\n            $scope.$emit('previous', true);\r\n        });\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('DirectiveDetailsController', DirectiveDetailsController);\r\n\r\n    /** @ngInject */\r\n    function DirectiveDetailsController($state, $stateParams, $log, $scope, DirectiveService, Util, UserService, EconomicSectionService,\r\n                                        $filter, DirectiveApprovalPlaceService, CreditSupplyResourceService, noSpaceRegex, telRegex, EmployeeService) {\r\n        var vm = this;\r\n\t    var sDate = $filter('sDate');\r\n        vm.directive = {};\r\n        vm.approvalPlaces = [];\r\n        vm.supplyResources = [];\r\n        vm.caseExperts = [];\r\n        vm.ecomomicSections = [];\r\n        vm.planTypes = Util.baseInfo('standardPlanTypes');\r\n\t    vm.title = 'Directive Detail Controller';\r\n        vm.noSpaceRegex = noSpaceRegex;\r\n\t    vm.savingStatus = 0;\r\n\t    vm.monitoringId = $stateParams.monitoringId;\r\n        vm.telRegex = telRegex;\r\n\r\n        activate();\r\n        vm.saveDirective = saveDirective;\r\n        vm.createDirective = createDirective;\r\n\t    vm.fillTheFields = true;\r\n        vm.savingStatus = 0;\r\n        vm.allEmployees = [];\r\n        vm.refreshEmployees = refreshEmployees;\r\n\t    vm.loading = true;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\r\n            getAllApprovalPlaces();\r\n            getAllSupplyResources();\r\n            getAllEconomicSections();\r\n\t        if (vm.monitoringId) {\r\n\t            getDirectiveById(true);\r\n            }\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\t\r\n\t    function saveDirective(form) {\r\n\t\t    // console.log(form);\r\n\t\t    if (form.$invalid) {\r\n\t\t\t    vm.savingStatus = 1;\r\n\t\t\t    return;\r\n\t\t    }\r\n\t\t    if (vm.monitoringId) {\r\n                updateDirective();\r\n            } else {\r\n                createDirective();\r\n            }\r\n        }\r\n\r\n        function createDirective() {\r\n\t        // vm.directive.approveDate = vm.directive.approveDate ? sDate(vm.directive.approveDate) : null;\r\n            DirectiveService.createDirective(vm.directive).then(\r\n                function (data) {\r\n                    Util.toast('success');\r\n                    $state.go('root.directive.details',{directiveId:data.id});\r\n                });\r\n        }\r\n\r\n        function updateDirective() {\r\n\t        vm.loading = true;\r\n\t        // vm.directive.approveDate = vm.directive.approveDate ? sDate(vm.directive.approveDate) : null;\r\n            console.log($scope.directiveDetailsForm.$invalid);\r\n            if ($scope.directiveDetailsForm.$invalid) {\r\n                Util.toast('error', 'Please fill all required fields');\r\n                vm.loading = false;\r\n                return {\r\n                    then: function (f1, f2) {\r\n                        if (typeof f2 === 'function')\r\n                            return f2();\r\n                    }\r\n                };\r\n            }\r\n            return DirectiveService.updateDirective(vm.monitoringId, vm.directive).then(\r\n                function () {\r\n                    Util.toast('success');\r\n\t                vm.savingStatus = 2;\r\n\t                getDirectiveById(false);\r\n                }, function () {\r\n                    Util.toast('error');\r\n                    vm.loading = false;\r\n                });\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.ecomomicSections = data ? data : [];\r\n                    return vm.ecomomicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function getAllSupplyResources() {\r\n            return CreditSupplyResourceService.getAllCreditSupplyResources().then(\r\n                function (data) {\r\n                    vm.supplyResources = data ? data : [];\r\n                    return vm.supplyResources;\r\n                });\r\n\r\n        }\r\n\r\n        function getAllApprovalPlaces() {\r\n            return DirectiveApprovalPlaceService.getAllDirectiveApprovalPlaces().then(\r\n                function (data) {\r\n                    vm.approvalPlaces = data ? data : [];\r\n                    return vm.approvalPlaces;\r\n                });\r\n\r\n        }\r\n\t\r\n\t\r\n\t    function getDirectiveById(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getDirective(doNotUpdate).then(\r\n                function (data) {\r\n\t                console.log('Directive Detail getDirectiveById', data);\r\n\t                vm.directive = data ? data : {};\r\n\t                // console.log(typeof vm.directive.approveDate, vm.directive.approveDate);\r\n\t                // if (typeof vm.directive.approveDate === \"number\")\r\n\t                //    vm.directive.approveDate = moment(vm.directive.approveDate).format('jYYYY/jMM/jDD');\r\n\t                vm.loading = false;\r\n                    return vm.directive;\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n\t        if (vm.monitoringId) {\r\n\t            getDirectiveById(true);\r\n            } else {\r\n                vm.directive = {};\r\n            }\r\n        }\r\n\r\n        function refreshEmployees(query) {\r\n\t        // console.log('refreshEmployees', query);\r\n            if (!query || query === '')\r\n                return [];\r\n            var body = {\r\n                query: query.toString()\r\n            };\r\n            EmployeeService.searchEmployees(body, {}).then(function (data) {\r\n                vm.allEmployees = data.content;\r\n            });\r\n        }\r\n\r\n        $scope.$on('details-next', function (event, update) {\r\n            console.log('on details-next event', update);\r\n            if (update) {\r\n                updateDirective().then(function () {\r\n                    $scope.$emit('next', true);\r\n                }, function () {\r\n                    $scope.$emit('next', false);\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n\r\n        });\r\n        $scope.$on('details-previous', function (event, update) {\r\n            console.log('on details-previous event', update);\r\n            if (update) {\r\n                updateDirective().then(function () {\r\n                    $scope.$emit('previous', true);\r\n                }, function () {\r\n                    $scope.$emit('next', false);\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n\r\n\r\n        })\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/5/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('DirectiveLicenseController', DirectiveLicenseController);\r\n\r\n    /** @ngInject */\r\n    function DirectiveLicenseController($confirm, $stateParams, $log, $scope, DirectiveService, Util) {\r\n        var vm = this;\r\n        vm.dirLicenses = [];\r\n        vm.dirLicense = {};\r\n        vm.directive = {};\r\n\r\n        vm.deleteDirLicense = deleteDirLicense;\r\n        vm.addDirLicense = addDirLicense;\r\n\t    vm.keyPressed = keyPressed;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            console.log(\"ContractPreConditionsController \");\r\n\t        if ($stateParams.monitoringId) {\r\n\t\t        getLicenses(true);\r\n            }\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\t\r\n\t    function getLicenses(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                function (data) {\r\n\t                vm.dirLicenses = data ? data.dirLicenses : [];\r\n                    console.log(\"vm.dirLicenses = \", vm.dirLicenses);\r\n                    return vm.directive;\r\n                });\r\n        }\r\n\r\n        function deleteDirLicense(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    var params = {dirLicenseId: id};\r\n\t                DirectiveService.deleteDirLicenseFromDirective($stateParams.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n\t                        getLicenses(false);\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\r\n        function addDirLicense() {\r\n\t        return DirectiveService.addDirLicenseToDirective($stateParams.monitoringId, vm.dirLicense).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    vm.dirLicense = {};\r\n\t                getLicenses(false);\r\n                });\r\n        }\r\n\t\r\n\t    function keyPressed(event) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    addDirLicense();\r\n\t\t    }\r\n\t    }\r\n\r\n        $scope.$on('license-next', function () {\r\n            console.log('on license-next event');\r\n            $scope.$emit('next', true);\r\n        });\r\n        $scope.$on('license-previous', function () {\r\n            console.log('on license-previous event');\r\n            $scope.$emit('previous', true);\r\n        });\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/5/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('ContractPreConditionsController', ContractPreConditionsController);\r\n\r\n    /** @ngInject */\r\n    function ContractPreConditionsController($confirm, $stateParams, $log, DirectiveService, Util, $scope) {\r\n        var vm = this;\r\n        vm.contractPreConditions = [];\r\n        vm.contractPreCondition = {};\r\n\r\n        vm.deleteContractPreCondition = deleteContractPreCondition;\r\n        vm.addContractPreCondition = addContractPreCondition;\r\n        vm.updateContractPreCondition = updateContractPreCondition;\r\n        vm.cancelUpdate = cancelUpdate;\r\n\t    vm.keyPressed = keyPressed;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            console.log(\"ContractPreConditionsController \");\r\n\t        if ($stateParams.monitoringId) {\r\n\t\t        getPreconditions(true);\r\n            }\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\t\r\n\t    function getPreconditions(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                function (data) {\r\n\t                vm.contractPreConditions = data ? data.dirConditions : [];\r\n                    vm.defaultItems = angular.copy(vm.contractPreConditions);\r\n\t                return vm.contractPreConditions;\r\n                });\r\n        }\r\n\r\n        function deleteContractPreCondition(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    var params = {dirConditionId: id};\r\n\t                DirectiveService.deleteConditionFromDirective($stateParams.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n\t                        getPreconditions(false);\r\n                        });\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        function addContractPreCondition() {\r\n\t        return DirectiveService.AddConditionToDirective($stateParams.monitoringId, vm.contractPreCondition).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    vm.contractPreCondition = {};\r\n\t                getPreconditions(false);\r\n                });\r\n\r\n        }\r\n\r\n        function updateContractPreCondition(condition) {\r\n            var params = {\r\n                dirConditionId: condition.id\r\n            };\r\n            return DirectiveService.updateConditionInDirective($stateParams.monitoringId, condition, params).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    getPreconditions(false);\r\n                });\r\n\r\n        }\r\n\r\n        function cancelUpdate() {\r\n            vm.contractPreConditions = angular.copy(vm.defaultItems);\r\n        }\r\n\r\n        function keyPressed(event, condition) {\r\n            console.log(event.keyCode);\r\n\t\t    if (event.keyCode === 13) {\r\n                if (condition)\r\n                    updateContractPreCondition(condition);\r\n                else\r\n                    addContractPreCondition();\r\n            } else if (event.keyCode === 27) {\r\n                if (condition)\r\n                    cancelUpdate();\r\n\r\n            }\r\n\t    }\r\n\r\n        $scope.$on('contractPreConditions-next', function () {\r\n            console.log('on contractPreConditions-next event');\r\n            $scope.$emit('next', true);\r\n        });\r\n        $scope.$on('contractPreConditions-previous', function () {\r\n            console.log('on contractPreConditions-previous event');\r\n            $scope.$emit('previous', true);\r\n        });\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('DirectiveContractListController', DirectiveContractListController);\r\n\r\n    /** @ngInject */\r\n    function DirectiveContractListController($confirm, NgTableParams, $stateParams, $log, $scope, DirectiveService,\r\n                                             ContractTypeService, Util, $window) {\r\n        var vm = this;\r\n\r\n        vm.directive = {};\r\n        vm.contracts = [];\r\n        vm.contract = {};\r\n        vm.contractTypes = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n\t        getData: getMonitoring\r\n        });\r\n        vm.toggleAddEdit = true;\r\n        vm.sumContractTotalAmount = 0;\r\n        vm.sumInstallmentCount = 0;\r\n        vm.sumInterestAmount = 0;\r\n        vm.sumInterestAndOriginAmount = 0;\r\n        vm.sumAmount = 0;\r\n        vm.toggleEdit = [];\r\n\r\n        vm.title = 'Contract List Controller Active';\r\n\t\r\n\t    vm.monitoringId = $stateParams.monitoringId;\r\n\r\n        vm.addEditContract = addEditContract;\r\n        vm.getDirContractById = getDirContractById;\r\n        vm.backToList = backToList;\r\n        vm.getContractInterest = getContractInterest;\r\n        vm.editDirContract = editDirContract;\r\n        vm.deleteDirContract = deleteDirContract;\r\n        vm.updateContract = updateContract;\r\n        vm.requiredField = requiredField;\r\n\t    vm.numberOfFields = numberOfFields;\r\n        vm.cancelEdit = cancelEdit;\r\n        vm.fillNecessaryCheckboxes = fillNecessaryCheckboxes;\r\n\r\n        activate();\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllContractType();\r\n\t        getMonitoring(true);\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\r\n        function fillNecessaryCheckboxes(){\r\n            if(vm.contracts.length === 0) {\r\n                vm.contract.totalAmountCount = true;\r\n                vm.contract.interestAmountCount = true;\r\n            }\r\n            else if (vm.contracts.length >= 1 && vm.contracts[vm.contracts.length - 1].type.id === 3 && (vm.contract.type.id === 9 || vm.contract.type.id === 14)) {\r\n                vm.contract.totalAmountCount = false;\r\n                vm.contract.interestAmountCount = true;\r\n                vm.contract.totalAmount = vm.contracts[vm.contracts.length - 1].totalAmount + vm.contracts[vm.contracts.length - 1].interestAmount;\r\n            }\r\n            else {\r\n                vm.contract.totalAmountCount = false;\r\n                vm.contract.interestAmountCount = false;\r\n            }\r\n        }\r\n\r\n        function getAllContractType() {\r\n            ContractTypeService.getAllContractTypes().then(\r\n                function (data) {\r\n                    vm.contractTypes = data ? data : [];\r\n                    return vm.contractTypes;\r\n                });\r\n        }\r\n\t\r\n\t    function getMonitoring(doNotUpdate) {\r\n\t\t    return $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n                function (data) {\r\n                    vm.contracts = data ? data.dirContracts : [];\r\n\r\n                    vm.contract.interestRate = 0;\r\n                    if (vm.contracts.length === 0) {\r\n                        vm.contract.totalAmountCount = true;\r\n                        vm.contract.interestAmountCount = true;\r\n                    }\r\n                    else {\r\n                        vm.contract.totalAmountCount = false;\r\n                        vm.contract.interestAmountCount = false;\r\n                    }\r\n                    vm.sumContractTotalAmount = 0;\r\n                    vm.sumInstallmentCount = 0;\r\n                    vm.sumInterestAmount = 0;\r\n                    vm.sumInterestAndOriginAmount = 0;\r\n                    vm.contracts.forEach(function (contract) {\r\n                        vm.sumContractTotalAmount += contract.totalAmount;\r\n                        vm.sumInstallmentCount += contract.installmentCount;\r\n                        vm.sumInterestAmount += contract.interestAmount;\r\n                        vm.sumInterestAndOriginAmount += contract.totalAmount + contract.interestAmount;\r\n                    });\r\n                    calcSumAmounts();\r\n                    return vm.contracts;\r\n                });\r\n        }\r\n\r\n        function calcSumAmounts() {\r\n            vm.sumAmount = 0;\r\n            vm.contracts.forEach(function (contract) {\r\n                if (contract.interestAmountCount)\r\n                    vm.sumAmount += contract.interestAmount;\r\n                if (contract.totalAmountCount)\r\n                    vm.sumAmount += contract.totalAmount;\r\n            });\r\n        }\r\n\r\n        function getDirContractById(id) {\r\n            DirectiveService.getDirectiveContractById(id).then(\r\n                function (data) {\r\n                    vm.contractId = id;\r\n                    vm.contract = data ? data : [];\r\n                    return vm.contract;\r\n                });\r\n        }\r\n\r\n        function addEditContract(theForm) {\r\n            if (vm.contractId) {\r\n                updateContract(theForm);\r\n            } else {\r\n                addContract(theForm);\r\n            }\r\n        }\r\n\r\n        function addContract(theForm) {\r\n            if (theForm && theForm.$invalid) {\r\n                Util.toast('error', 'لطفا تمامی مقادیر را به درستی وارد نمایید!');\r\n                return;\r\n            }\r\n\t        DirectiveService.AddDirectiveContract($stateParams.monitoringId, vm.contract).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    if (vm.contract.type && vm.contract.type.id === 1)\r\n                        vm.contract.interestRate = 0;\r\n                    console.log(vm.contract);\r\n                    getMonitoring(false);\r\n\t                vm.contract = {};\r\n\t                //backToList();\r\n                });\r\n        }\r\n\r\n        function updateContract(contract,index) {\r\n            var params = {dirContractId: contract ? contract.id : vm.contractId};\r\n            contract = contract ? contract : vm.contract;\r\n\t        DirectiveService.updateDirectiveContract($stateParams.monitoringId, contract, params).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    calcSumAmounts();\r\n                    cancelEdit(index);\r\n                });\r\n        }\r\n\r\n\r\n        function backToList(stay) {\r\n            vm.contract = {};\r\n            if (!stay)   $window.scrollTo(0, 0);\r\n        }\r\n\r\n        function getContractInterest() {\r\n            if (vm.contract.totalAmount && vm.contract.interestRate) {\r\n                vm.contract.contractInterest = vm.contract.totalAmount * vm.contract.interestRate / 100;\r\n                vm.contract.interest = vm.contract.totalAmount + vm.contract.contractInterest\r\n            } else {\r\n                vm.contract.contractInterest = 0;\r\n                vm.contract.interest = 0;\r\n            }\r\n        }\r\n\r\n        function editDirContract(id) {\r\n            vm.editing = !vm.editing;\r\n            getDirContractById(id);\r\n            getContractInterest();\r\n        }\r\n\r\n        function deleteDirContract(id) {\r\n            $confirm().then(function () {\r\n                if (id) {\r\n                    var params = {dirContractId: id};\r\n\t                DirectiveService.deleteDirectiveContract($stateParams.monitoringId, params).then(\r\n                        function () {\r\n                            Util.toast('success');\r\n\t                        getMonitoring(false);\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\t\r\n\t    function requiredField(field, type) {\r\n            var fieldsTypes = {\r\n                'interestRate': [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14],\r\n                'installmentCount': [8, 9, 10, 11, 13, 14],\r\n                'installmentInterval': [8, 9, 10, 11, 13, 14],\r\n                'participationDuration': [2, 3, 4, 5, 6, 7],\r\n                'respiratoryPeriod': [9, 10, 11, 13, 14],\r\n                'nominalAmount': [12]\r\n            };\r\n\t\t    type = type || vm.contract.type;\r\n\t\t    return type ? fieldsTypes[field].indexOf(type.id) > -1 : false;\r\n\t    }\r\n\t\r\n\t    function numberOfFields(id) {\r\n\t\t    var numbersById = {\r\n                1: 0,\r\n                2: 6,\r\n\t\t\t    3: 4,\r\n\t\t\t    4: 4,\r\n\t\t\t    5: 4,\r\n\t\t\t    6: 4,\r\n\t\t\t    7: 4,\r\n\t\t\t    8: 5,\r\n\t\t\t    9: 6,\r\n\t\t\t    10: 6,\r\n\t\t\t    11: 6,\r\n                12: 1,\r\n\t\t\t    13: 6,\r\n\t\t\t    14: 6\r\n\t\t    };\r\n\t\t    return numbersById[id];\r\n            \r\n        }\r\n\r\n        function cancelEdit(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n\t        vm.editing = false;\r\n\t        getMonitoring(false);\r\n        }\r\n\r\n        $scope.$on('contract-next', function () {\r\n            console.log('on contract-next event');\r\n            $scope.$emit('next', true);\r\n        });\r\n        $scope.$on('contract-previous', function () {\r\n            console.log('on contract-previous event');\r\n            $scope.$emit('previous', true);\r\n        });\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/8/17.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.directive')\r\n\t\t.controller('ContractAssuranceTypesController', ContractAssuranceTypesController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction ContractAssuranceTypesController($confirm, $stateParams, $scope, DirectiveService, AssuranceTypeService, Util) {\r\n\t\tvar vm = this;\r\n\t\tvm.contractAssuranceTypes = [];\r\n\t\tvm.contractAssuranceType = {};\r\n\t\tvm.directive = {};\r\n\t\tvm.assuranceTypes = [];\r\n\t\tvm.limits = [{value: \"MAXIMUM\", name: \"حداکثر\"},\r\n\t\t\t{value: \"MINIMUM\", name: \"حداقل\"},\r\n\t\t\t{value: \"EQUAL\", name: \"برابر\"},\r\n\t\t\t{value: \"REST\", name: \"مابقی\"}\r\n\t\t\r\n\t\t];\r\n\t\tvm.criterions = [{value: \"ORIGIN\", name: \"اصل تسهیلات\"}, {value: \"INTEREST\", name: \"اصل و سود\"}];\r\n\t\tvm.sumPercent = 0;\r\n\t\tvm.helpItem = {};\r\n\t\tvm.helpItems = [];\r\n\t\tvm.showHelpItem = false;\r\n\t\t\r\n\t\tvm.deleteContractAssuranceType = deleteContractAssuranceType;\r\n\t\tvm.addContractAssuranceType = addContractAssuranceType;\r\n\t\tvm.saveDirective = saveDirective;\r\n\t\tvm.updateContractAssuranceType = updateContractAssuranceType;\r\n\t\tvm.retrieve = retrieve;\r\n\t\tvm.selectType = selectType;\r\n\t\tvm.addHelpItem = addHelpItem;\r\n\t\tvm.removeHelpItem = removeHelpItem;\r\n        vm.calcHelpItems = calcHelpItems;\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\tconsole.log(\"ContractAssuranceTypesController \");\r\n\t\t\tgetAssuranceTypes();\r\n\t\t\tif ($stateParams.monitoringId) {\r\n\t\t\t\tgetAssurances(true);\r\n\t\t\t}\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAssuranceTypes() {\r\n\t\t\treturn AssuranceTypeService.getAllAssurances().then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.assuranceTypes = data ? data : [];\r\n\t\t\t\t\treturn vm.assuranceTypes;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAssurances(doNotUpdate) {\r\n\t\t\treturn $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.directive = data ? data.directive : {};\r\n\t\t\t\t\tvm.contractAssuranceTypes = data ? data.dirAssurances : [];\r\n\t\t\t\t\tvm.contractAssuranceTypesTemp = angular.copy(vm.contractAssuranceTypes);\r\n\t\t\t\t\tvm.sumPercent = 0;\r\n                    vm.showError = true;\r\n                    vm.contractAssuranceTypes.forEach(function (contractAssuranceType) {\r\n\t\t\t\t\t\tvm.sumPercent += contractAssuranceType.percent;\r\n\t\t\t\t\t\tif(contractAssuranceType.criterionAssurance == 'INTEREST') vm.showError = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.requiredPercentageDone = vm.directive.dirRequiredAssurancePercentage >= 100;\r\n\t\t\t\t\treturn vm.directive;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction deleteContractAssuranceType(id) {\r\n\t\t\t$confirm().then(function () {\r\n\t\t\t\tif (id) {\r\n\t\t\t\t\tvar params = {\r\n\t\t\t\t\t\tdirAssuranceId: id\r\n\t\t\t\t\t};\r\n\t\t\t\t\tDirectiveService.deleteAssuranceFromDirective($stateParams.monitoringId, params).then(successCallback);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfunction successCallback() {\r\n\t\t\t\tUtil.toast('success');\r\n\t\t\t\tgetAssurances(false);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction addContractAssuranceType() {\r\n\t\t\treturn DirectiveService.AddAssuranceToDirective($stateParams.monitoringId, vm.contractAssuranceType).then(successCallback);\r\n\t\t\t\r\n\t\t\tfunction successCallback() {\r\n\t\t\t\tUtil.toast('success');\r\n\t\t\t\tvm.contractAssuranceType = {};\r\n\t\t\t\tgetAssurances(false);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction saveDirective() {\r\n\t\t\treturn DirectiveService.updateDirective($stateParams.monitoringId, vm.directive).then(function () {\r\n\t\t\t\tUtil.toast('success');\r\n\t\t\t\tvm.requiredPercentageDone = true;\r\n\t\t\t\tfor (var i = 0; i < vm.contractAssuranceTypes.length; i++) {\r\n\t\t\t\t\tif (vm.contractAssuranceTypes[i].limit === \"REST\") {\r\n\t\t\t\t\t\tvm.contractAssuranceTypes[i].percent = vm.directive.dirRequiredAssurancePercentage;\r\n\t\t\t\t\t\tupdateContractAssuranceType(vm.contractAssuranceTypes[i], i);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, function () {\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateContractAssuranceType(assurance, index) {\r\n\t\t\tif(assurance.percent)\r\n\t\t\t\tDirectiveService.updateAssuranceInDirective($stateParams.monitoringId, assurance).then(function () {\r\n\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\tassurance.editing = false;\r\n\t\t\t\t\tvm.contractAssuranceTypesTemp[index] = angular.copy(vm.contractAssuranceTypes[index]);\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\tretrieve(index);\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\tfunction retrieve(index) {\r\n\t\t\tvm.contractAssuranceTypes[index] = angular.copy(vm.contractAssuranceTypesTemp[index]);\r\n\t\t}\r\n\t\t\r\n\t\tfunction selectType(item) {\r\n\t\t\tif (item.limit === \"REST\")\r\n\t\t\t\titem.percent = vm.directive.dirRequiredAssurancePercentage;\r\n\t\t}\r\n\t\t\r\n\t\tfunction addHelpItem() {\r\n            console.log(vm.helpItem);\r\n            if (!vm.helpItem.assuranceType || !vm.helpItem.amount)\r\n                return;\r\n\t\t\tvar newItem = angular.copy(vm.helpItem);\r\n\t\t\tvm.helpItems.push(newItem);\r\n\t\t\tvm.helpItem = {};\r\n\t\t\tcalcHelpItems();\r\n\t\t}\r\n\t\t\r\n\t\tfunction removeHelpItem(index) {\r\n\t\t\tvm.helpItems.splice(index, 1);\r\n\t\t\tcalcHelpItems();\r\n\t\t}\r\n\t\t\r\n\t\tfunction calcHelpItems() {\r\n\t\t\tvar sum = 0;\r\n\t\t\tvm.helpItems.forEach(function (item) {\r\n\t\t\t\tsum += item.amount;\r\n\t\t\t});\r\n\t\t\tvm.helpItems.forEach(function (item) {\r\n\t\t\t\titem.percent = vm.helpItemTotal * (item.amount / sum);\r\n\t\t\t\titem.desc = 'مقدار ' + item.percent + ' ٪ ' + ' وثیقه ' + item.assuranceType.type + ' در مصوبه ثبت شود.'\r\n\t\t\t});\r\n\t\t}\r\n\r\n        $scope.$on('assuranceTypes-next', function (event, update) {\r\n            console.log('on assuranceTypes-next event');\r\n            if (update) {\r\n                saveDirective().then(function () {\r\n                    $scope.$emit('next', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n\r\n\r\n        });\r\n        $scope.$on('assuranceTypes-previous', function (event, update) {\r\n            console.log('on assuranceTypes-previous event');\r\n            if (update) {\r\n                saveDirective().then(function () {\r\n                    $scope.$emit('previous', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n\r\n\r\n        })\r\n\t}\r\n\t\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .controller('ApplicantController', ApplicantController);\r\n\r\n    /** @ngInject */\r\n    function ApplicantController($confirm, $stateParams, $log, ProvinceService, DirectiveService, Util, nationalIdRegex, $scope) {\r\n        var vm = this;\r\n\r\n        vm.directive = {};\r\n        vm.applicant = {};\r\n        vm.citis = [];\r\n        vm.citis = [];\r\n        vm.provinces = [];\r\n        vm.board = {};\r\n        vm.boards = [];\r\n        vm.showLegal = false;\r\n        vm.applicantTypes = [\r\n            {value: \"LEGAL\", title: \"شرکت(حقوقی)\"},\r\n            {value: \"NATURAL\", title: \"شخص حقیقی\"}\r\n        ];\r\n\t    vm.monitoringId = $stateParams.monitoringId;\r\n\r\n        vm.title = 'Applicant Controller Active';\r\n        vm.nationalIdRegex = nationalIdRegex;\r\n        vm.classAddBoard = 'disabled';\r\n\t\r\n\t    vm.SetApplicantInDirective = setApplicantInDirective;\r\n        vm.deleteBoard = deleteBoard;\r\n\t    vm.addBoardToApplicant = addBoardToApplicant;\r\n        vm.cancelAdd = cancelAdd;\r\n        vm.AllowAddBoard = AllowAddBoard;\r\n\t    vm.keyPressed = keyPressed;\r\n        vm.cancelUpdate = cancelUpdate;\r\n        vm.updateBoard = updateBoard;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllProvince();\r\n\t        if (vm.monitoringId) {\r\n\t\t        getApplicant(true);\r\n            }\r\n            $scope.$parent.vm.getAllowedActions(true).then(function (allowedAction) {\r\n                vm.allowedAction = allowedAction;\r\n            });\r\n        }\r\n\t\r\n\t    function getApplicant(doNotUpdate) {\r\n\t\t    $scope.$parent.vm.getMonitoring(doNotUpdate).then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t\r\n\t\t\t\t    vm.applicant = data.applicant;\r\n                    vm.lastCheck = data.applicant? data.applicant.applicantType: \"\";\r\n\t\t\t\t    vm.boards = data.monitoringBoards;\r\n\t\t\t\t    if (vm.applicant !== null) {\r\n\t\t\t\t\t    if (vm.applicant.applicantType === 'LEGAL') {\r\n\t\t\t\t\t\t    vm.showLegal = true;\r\n\t\t\t\t\t    }\r\n\t\t\t\t    }\r\n\t\t\t\t    console.log('vm.applicant = ', vm.applicant);\r\n\t\t\t\t    console.log('vm.boards = ', vm.boards);\r\n\t\t\t\t    return vm.applicant;\r\n\t\t\t    });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\t\r\n\t\r\n\t    function getBoardsApplicant() {\r\n\t\t    return DirectiveService.getBoardsApplicant($stateParams.monitoringId).then(\r\n                function (data) {\r\n                    vm.boards = data ? data : [];\r\n                    vm.board = {};\r\n                    return vm.boards;\r\n                });\r\n        }\r\n\t\r\n\t    function addBoardToApplicant() {\r\n\t\t    //console.log('addBoardToApplicant');\r\n            if (vm.board.name && vm.board.nationalId)\r\n\t            DirectiveService.AddBoardToApplicant($stateParams.monitoringId, vm.board).then(\r\n                function () {\r\n                    Util.toast('success');\r\n                    $scope.$parent.vm.getMonitoring(false);\r\n\t                vm.board = {};\r\n                    getBoardsApplicant();\r\n                });\r\n        }\r\n\r\n        function updateBoard(board) {\r\n            if (board.name && board.nationalId)\r\n                DirectiveService.updateBoardInApplicant($stateParams.monitoringId, board).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $scope.$parent.vm.getMonitoring(false);\r\n                        getBoardsApplicant();\r\n                    });\r\n        }\r\n\r\n        function cancelUpdate(board) {\r\n            board.editing = false;\r\n            getBoardsApplicant();\r\n        }\r\n\r\n        function deleteBoard(boardId) {\r\n            console.log('delete board');\r\n            $confirm().then(function () {\r\n                var params = {boardId: boardId};\r\n\t            DirectiveService.deleteBoardFromApplicant($stateParams.monitoringId, params).then(\r\n                    function () {\r\n                        $scope.$parent.vm.getMonitoring(false);\r\n                        Util.toast('success');\r\n                        getBoardsApplicant();\r\n                    });\r\n            })\r\n        }\r\n\r\n        function setApplicantInDirective(chechBoard) {\r\n            console.log('SetApplicantInDirective', vm.applicant);\r\n            if (chechBoard && vm.applicant && vm.applicant.applicantType === 'LEGAL' && vm.boards.length === 0) {\r\n                Util.toast('error', 'حد اقل یک عضو هیئت مدیره برای مشتری حقوقی اضافه کنید!');\r\n                return {\r\n                    then: function () {\r\n                        $scope.$parent.vm.loading = false;\r\n                    }\r\n                };\r\n            }\r\n            if(vm.applicant) return DirectiveService.SetApplicantInDirective($stateParams.monitoringId, vm.applicant).then(\r\n                function () {\r\n\t                // getApplicant(false);\r\n\t                vm.savingStatus = 2;\r\n                    getApplicant();\r\n                    Util.toast('success');\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n\t        if ($stateParams.monitoringId) {\r\n\t\t        getApplicant(true);\r\n            } else {\r\n                vm.directive = {};\r\n            }\r\n        }\r\n\r\n        function AllowAddBoard() {\r\n            if (vm.board.name && vm.board.nationalId)\r\n                vm.classAddBoard = '';\r\n            else\r\n                vm.classAddBoard = 'disabled';\r\n        }\r\n\t\r\n\t    function keyPressed(event) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    addBoardToApplicant();\r\n\t\t    }\r\n\t    }\r\n\r\n        $scope.$on('applicant-next', function (event, update) {\r\n            console.log('on applicant-next event');\r\n            if (update && vm.applicant) {\r\n                if(vm.applicant) setApplicantInDirective(true).then(function () {\r\n                    $scope.$emit('next', true);\r\n                }, function () {\r\n                    $scope.$emit('next', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('next', true);\r\n            }\r\n\r\n        });\r\n\r\n        $scope.$on('applicant-previous', function (event, update) {\r\n            console.log('on applicant-previous event');\r\n            if (update && vm.applicant) {\r\n                setApplicantInDirective(true).then(function () {\r\n                    $scope.$emit('previous', true);\r\n                }, function () {\r\n                    $scope.$emit('previous', true);\r\n                });\r\n            } else {\r\n                $scope.$emit('previous', true);\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t\t.module('app.contract')\r\n\t\t.controller('ContractDetailsModalController', ContractDetailsModalController);\r\n\r\n\t/** @ngInject */\r\n\tfunction ContractDetailsModalController($state, $filter, $rootScope, $log, $uibModalInstance, id, Util, UserService, Principal, fromMonitoring,\r\n\t                                        ContractService, ProvinceService, MonitoringService, NgTableParams, $timeout, BranchService) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.contractId = id;\r\n\t\tvm.toggleAdd = false;\r\n\t\tvm.users = [];\r\n\t\tvar pNumber = $filter('pNumber');\r\n\t\tvm.observers = [];\r\n\t\tvm.province = {};\r\n\t\tvm.contract = {};\r\n\t\tvm.tempContract = {};\r\n        vm.teamHeadsMap = {};\r\n        vm.test = 'test';\r\n\t\tvm.toggleContractDirectiveEdit = false;\r\n\t\tvm.fromMonitoring = fromMonitoring;\r\n\r\n\t\tconsole.log('vm.fromMonitoring = ', vm.fromMonitoring);\r\n\t\tvm.close = close;\r\n\t\tvm.cancelAdd = cancelAdd;\r\n\t\tvm.addMonitoring = addMonitoring;\r\n\t\tvm.editContractDirective = editContractDirective;\r\n        vm.groupFinder = UserService.groupTitle;\r\n\r\n\t\tactive();\r\n\r\n\t\t////////////////\r\n\r\n\t\tfunction active() {\r\n\t\t\t$log.debug('contract details module activated');\r\n\t\t\tgetContract();\r\n\t\t\tPrincipal.identity().then(function (data) {\r\n\t\t\t\tvm.currentUser = data;\r\n\t\t\t\tgetUsers();\r\n                if (vm.currentUser.level === 'STAFF') getTeamHeads();\r\n                else vm.teamHeads = [{}];\r\n\t\t\t});\r\n\t\t\tgetProvinces();\r\n\t\t\tvm.isModal = !!$uibModalInstance;\r\n\t\t}\r\n\r\n\t\tfunction editContractDirective() {\r\n\t\t\tif (!Util.compareObjects(vm.contract.directive, vm.tempContract.directive)) {\r\n\t\t\t\tvar directive = {number: vm.contract.directive.number};\r\n\t\t\t\tContractService.setDirectiveToContract(vm.contract.id, vm.contract.directive.number).then(\r\n\t\t\t\t\tfunction (data) {\r\n\t\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.SUCCESS');\r\n\t\t\t\t\t\tvm.tempContract.directive = angular.copy(vm.contract.directive);\r\n\t\t\t\t\t\tif (data.new) {\r\n\t\t\t\t\t\t\tUtil.toast('success', 'APP.MESSAGES.NEW_DIRECTIVE');\r\n\t\t\t\t\t\t\t$state.go('root.directive.details', {\r\n\t\t\t\t\t\t\t\tdirectiveId: data.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tUtil.toast('error', 'APP.MESSAGES.FAIL', 'edit issue error');\r\n\t\t\t\t\t\tvm.contract.directive = angular.copy(vm.tempContract.directive);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getContract() {\r\n\t\t\treturn ContractService.getContractById(vm.contractId).then(successCallback);\r\n\r\n\t\t\tfunction successCallback(data) {\r\n\t\t\t\tvm.contract = data;\r\n\t\t\t\tvm.contract.reportDate = new Date(vm.contract.reportDate);\r\n\t\t\t\tvm.contract.contractDate = new Date(vm.contract.contractDate);\r\n\t\t\t\tif (!fromMonitoring) {\r\n\t\t\t\t\tvm.tableParams = new NgTableParams({}, {\r\n\t\t\t\t\t\tcounts: [5, 10, 20, 50, 100],\r\n\t\t\t\t\t\tgetData: getMonitoring\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (!vm.isModal) {\r\n\t\t\t\t\t$timeout(window.print, 2000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn vm.contract;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction close() {\r\n\t\t\t$uibModalInstance.dismiss();\r\n\t\t}\r\n\r\n\t\tfunction getUsers() {\r\n\t\t\tUserService.getByRole(\"OBSERVER\", vm.province.id).then(function (data) {\r\n\t\t\t\tvm.observers = data ? data : [];\r\n\t\t\t});\r\n\t\t}\r\n\r\n        function getTeamHeads() {\r\n            UserService.getByRole(\"TEAM_HEAD\", null).then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n                console.log(vm.teamHeadsMap['442']);\r\n            });\r\n        }\r\n\r\n\t\tfunction getProvinces() {\r\n\t\t\tProvinceService.getAllProvinces().then(function (data) {\r\n\t\t\t\tvm.provinces = [{id: null, code: null, title: 'همه'}].concat(data);\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction addMonitoring() {\r\n\t\t\tif (!vm.firstExpert)\r\n\t\t\t\treturn;\r\n\t\t\tvm.loading = true;\r\n\t\t\tvar params = {\r\n\t\t\t\t'expertUsername1': vm.firstExpert.username,\r\n                'expertUsername2': vm.secondExpert ? vm.secondExpert.username : null,\r\n                'teamHeadUserName': vm.teamHead ? vm.teamHead.username : null,\r\n                'firstDescription': vm.firstDescription ? vm.firstDescription : null\r\n\t\t\t};\r\n\t\t\tPrincipal.identity().then(function () {\r\n\t\t\t\tif (vm.currentUser.level === 'STAFF') {\r\n\t\t\t\t\tContractService.addContractMonitoringStaffLevel(vm.contractId, params).then(successCallback, errorCallback);\r\n\t\t\t\t} else if (vm.currentUser.level === 'PROVINCE') {\r\n\t\t\t\t\tContractService.addContractMonitoringProvinceLevel(vm.contractId, params).then(successCallback, errorCallback);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tContractService.addContractMonitoringBranchLevel(vm.contractId, params).then(successCallback);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction successCallback(data) {\r\n\t\t\t\t\tUtil.toast('success', 'نظارت با شماره ' + pNumber(data.number) + ' با موفقیت ایجاد شد.');\r\n\t\t\t\t\t$rootScope.$emit('stateChanged');\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\t$uibModalInstance.close();\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction errorCallback(error) {\r\n\t\t\t\t\tUtil.toast('error', 'APP.ERRORS' + error.status);\r\n\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction cancelAdd() {\r\n\t\t\tvm.toggleAdd = false;\r\n\t\t\tvm.firstExpert = {};\r\n\t\t\tvm.secondExpert = {};\r\n\t\t}\r\n\r\n\t\tfunction getMonitoring() {\r\n\t\t\tvar params = {\r\n\t\t\t\tpage: 0,\r\n\t\t\t\tsize: 100\r\n\t\t\t};\r\n\t\t\tvar searchData = {\r\n                'contractId': vm.contract.id,\r\n                'stepIds': [0, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\t\t\t};\r\n\t\t\treturn MonitoringService.searchMonitoring(searchData, params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.monitorings = data ? data.content : [];\r\n\t\t\t\t\tif (!vm.isModal)\r\n\t\t\t\t\t\twindow.print();\r\n\t\t\t\t\treturn vm.monitorings;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n})();\r\n\n/**\r\n * Created by alan on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract')\r\n        .controller('AddMonitoring', AddMonitoring);\r\n\r\n    /** @ngInject */\r\n    function AddMonitoring($uibModalInstance, $state, $filter, $timeout, $rootScope, $scope, id, contractIds, ContractService, UserService, Util, Principal, ProvinceService) {\r\n        var vm = this;\r\n        vm.title = 'Add Monitoring';\r\n        vm.id = id;\r\n        vm.contractIds = contractIds;\r\n        vm.users = [];\r\n        var pNumber = $filter('pNumber');\r\n        vm.observers = [];\r\n        vm.levels = [\r\n            {'value': 'STAFF', 'caption': 'ستاد'},\r\n            {'value': 'PROVINCE', 'caption': 'استان'},\r\n            {'value': 'BRANCH', 'caption': 'شعبه'}\r\n        ];\r\n\r\n\r\n        // vm.addMonitoring = addMonitoring;\r\n        vm.cancel = cancel;\r\n        vm.ok = ok;\r\n        vm.groupFinder = UserService.groupTitle;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(vm.title + ' module activated', id, contractIds);\r\n            vm.isBranch = !Principal.isInAnyRole([\"ADMIN\", \"FINAL_HEAD\", \"STAFF_DISPATCHER\", \"PROVINCE_DISPATCHER\", \"PROVINCE_HEAD\"]);\r\n            vm.currentUser = Principal.getIdentity();\r\n            vm.province = vm.currentUser.province;\r\n            getUsers();\r\n            if (vm.currentUser.level === 'STAFF') {\r\n                getTeamHeads();\r\n                getStaffApprover();\r\n            } else vm.teamHeads = [{}];\r\n            Principal.identity().then(function (data) {\r\n                console.log(data);\r\n                if (Principal.isInAnyRole([\"ADMIN\", \"FINAL_HEAD\", \"STAFF_DISPATCHER\"])) {\r\n                    vm.level = vm.levels[0].value;\r\n                    vm.canSetLevel = true;\r\n                } else if (Principal.isInAnyRole([\"PROVINCE_DISPATCHER\", \"PROVINCE_HEAD\"])) {\r\n                    vm.level = vm.levels[1].value;\r\n                } else {\r\n                    vm.level = vm.levels[2].value;\r\n                }\r\n\r\n                function successCallback(data) {\r\n                    Util.toast('success', 'نظارت با شماره ' + pNumber(data.number) + ' با موفقیت ایجاد شد.');\r\n                    $rootScope.$emit('stateChanged');\r\n                    if (vm.isBranch) {\r\n                        $state.go('root.monitoring.monitoring-details', {monitoringId: data.id});\r\n                        console.log('in if');\r\n                    }\r\n                    $timeout(function () {\r\n                        console.log('after if in timeout');\r\n                        $uibModalInstance.close();\r\n                        vm.loading = false;\r\n                    }, 2000);\r\n\r\n\r\n                }\r\n\r\n                function errorCallback() {\r\n                    // Util.toast('error', 'APP.ERRORS.' + error.status);\r\n                    vm.loading = false;\r\n                }\r\n            });\r\n        }\r\n\r\n        function ok() {\r\n            if (vm.id) addGroupMonitoring([vm.id]);\r\n            else if (contractIds.length > 0) addGroupMonitoring(contractIds);\r\n\r\n        }\r\n\r\n        function cancel() {\r\n            $uibModalInstance.dismiss('cancel');\r\n        }\r\n\r\n        function addGroupMonitoring(ids) {\r\n            vm.loading = true;\r\n            var params = {\r\n                'expertUsername1': vm.firstExpert.username,\r\n                'expertUsername2': vm.secondExpert ? vm.secondExpert.username : null,\r\n                'teamHeadUserName': vm.teamHead ? vm.teamHead.username : null,\r\n                'staffApproverUsername': vm.staffApproverUsername ? vm.staffApproverUsername.username : null,\r\n                'firstDescription': vm.firstDescription ? vm.firstDescription : null\r\n            };\r\n            ids.forEach(function (contractId) {\r\n                addContractMonitoring(contractId, params);\r\n            });\r\n        }\r\n\r\n        function addContractMonitoring(contractId, params) {\r\n            if (vm.level === vm.levels[0].value) {\r\n                ContractService.addContractMonitoringStaffLevel(contractId, params).then(successCallback, errorCallback);\r\n            } else if (vm.level === vm.levels[1].value) {\r\n                ContractService.addContractMonitoringProvinceLevel(contractId, params).then(successCallback, errorCallback);\r\n            } else {\r\n                ContractService.addContractMonitoringBranchLevel(contractId, params).then(successCallback);\r\n            }\r\n\r\n            function successCallback(data) {\r\n                Util.toast('success', 'نظارت با شماره ' + pNumber(data.number) + ' با موفقیت ایجاد شد.');\r\n                $rootScope.$emit('stateChanged');\r\n                if (vm.isBranch) {\r\n                    $state.go('root.monitoring.monitoring-details', {monitoringId: data.id});\r\n                    console.log('in if');\r\n                }\r\n                $timeout(function () {\r\n                    console.log('after if in timeout');\r\n                    $uibModalInstance.close();\r\n                    vm.loading = false;\r\n                }, 2000);\r\n\r\n\r\n            }\r\n\r\n            function errorCallback() {\r\n                // Util.toast('error', 'APP.ERRORS.' + error.status);\r\n                vm.loading = false;\r\n            }\r\n        }\r\n\r\n        function getUsers() {\r\n            UserService.getByRole(\"OBSERVER\").then(function (data) {\r\n                vm.observers = data ? data : [];\r\n                if (vm.isBranch)\r\n                    vm.firstExpert = Principal.getIdentity();\r\n            });\r\n        }\r\n\r\n        function getTeamHeads() {\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                vm.teamHeads = data ? data : [];\r\n            });\r\n        }\r\n\r\n        function getStaffApprover() {\r\n            var roles = [\"STAFF_APPROVER\", \"FINAL_HEAD\"];\r\n            UserService.getByRoles(roles).then(function (data) {\r\n                vm.staffApprovers = data ? data.content : [];\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth', [\r\n            'ui.router'\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .controller('ResetPassController', ResetPassController);\r\n\r\n    /** @ngInject */\r\n    function ResetPassController($log) {\r\n        var vm = this;\r\n        vm.title = 'ResetPassController';\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info('reset pass module ativated.');\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .controller('RegisterController', RegisterController);\r\n\r\n    /** @ngInject */\r\n    function RegisterController($log) {\r\n        var vm = this;\r\n        vm.title = 'RegisterController';\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info('register module ativated.');\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .controller('LoginController', LoginController);\r\n\r\n    /** @ngInject */\r\n    function LoginController($log, Util, host, $state, homeService, Principal, $rootScope, $timeout, UserService,\r\n                             PrimaryUserService) {\r\n        var vm = this;\r\n        vm.title = 'LoginController';\r\n        $state.user = vm.user;\r\n        vm.user = {};\r\n        vm.showChangPass = false;\r\n        vm.captchaUrl = host + \"captcha/\";\r\n        console.log(' vm.captchaUrl  = ', vm.captchaUrl);\r\n        vm.date = new Date();\r\n\r\n        vm.onSubmit = onSubmit;\r\n        vm.resetCaptcha = resetCaptcha;\r\n        vm.changeSecurePassword = changeSecurePassword;\r\n\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info('login module activated.');\r\n            getVersion();\r\n        }\r\n\r\n        function onSubmit() {\r\n            var data = {\r\n                \"username\": Util.encodeCredential(vm.username),\r\n                \"password\": Util.encodeCredential(vm.password)\r\n            };\r\n            var params = {\r\n                \"userTypeCaptcha\": vm.userTypeCaptcha\r\n            }\r\n            PrimaryUserService.getLogin(data, params).then(successCallback, errorCallBack);\r\n\r\n            function successCallback() {\r\n                // Util.toast('success', 'ورود موفق');\r\n                $timeout(function () {\r\n                    Principal.identity().then(function (data) {\r\n                            // if first login is false then go to change password page\r\n                            vm.showChangPass = !data.firstLogin;\r\n                            if (!vm.showChangPass) {\r\n                                var isAdmin = Principal.isInAnyRole([\"ADMIN\", \"FINAL_HEAD\", \"STAFF_DISPATCHER\", \"PROVINCE_HEAD\", \"BRANCH_DISPATCHER\"]);\r\n                                if (isAdmin) {\r\n                                    $state.go('root.contract-list', {'settlementStateCode': '1788'});\r\n                                } else {\r\n                                    $state.go('root.monitoring-cartable', {});\r\n                                }\r\n                            }\r\n                        },\r\n                        function (error) {\r\n                            console.log('error =', error);\r\n                            var text = 'دسترسی معتبر احراز نشد';\r\n                            Util.toast('error', text);\r\n                            resetCaptcha();\r\n                        }\r\n                    );\r\n                }, 100);\r\n            }\r\n\r\n            function errorCallBack() {\r\n                resetCaptcha();\r\n            }\r\n        }\r\n\r\n        function changeSecurePassword(form) {\r\n            var data = {\r\n                'newPassword': Util.encodeCredential(vm.newPassword),\r\n                'repeatNewPassword': Util.encodeCredential(vm.newPasswordRepeat),\r\n                'oldPassword': Util.encodeCredential(vm.oldPassword)\r\n            };\r\n            UserService.changeSecurePassword(data).then(function () {\r\n                Util.toast('success');\r\n                vm.newPassword = null;\r\n                vm.newPasswordRepeat = null;\r\n                vm.oldPassword = null;\r\n                form.$setPristine();\r\n                var isAdmin = Principal.isInAnyRole([\"ADMIN\", \"FINAL_HEAD\", \"STAFF_DISPATCHER\", \"PROVINCE_HEAD\", \"BRANCH_DISPATCHER\"]);\r\n                if (isAdmin) {\r\n                    $state.go('root.contract-list', {'settlementStateCode': '1788'});\r\n                } else {\r\n                    $state.go('root.monitoring-cartable', {});\r\n                }\r\n            });\r\n        }\r\n\r\n        function logout() {\r\n            Principal.logout();\r\n        }\r\n\r\n        function resetCaptcha() {\r\n            vm.userTypeCaptcha = '';\r\n            vm.date = new Date();\r\n        }\r\n\r\n        function getVersion() {\r\n            vm.version = homeService.getVersion(function (version) {\r\n                vm.version = version;\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .controller('ForgetPassController', ForgetPassController);\r\n\r\n    /** @ngInject */\r\n    function ForgetPassController($log) {\r\n        var vm = this;\r\n        vm.title = 'ForgetPassController';\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.debug('forget pass module ativated.');\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name app.service:sidebarService\r\n     * @description\r\n     * # sidebarService\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .service('sidebarService', sidebarService);\r\n\r\n    /** @ngInject */\r\n    function sidebarService($http) {\r\n        /* jshint validthis: true */\r\n        this.getSidebar = getSidebar;\r\n\r\n        //////////\r\n\r\n        function getSidebar() {\r\n            return $http.get('data/sidebar-6.json').then(successCallback)\r\n        }\r\n\r\n        function successCallback(response) {\r\n            return response.data;\r\n        }\r\n    }\r\n})();\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:sidebar\r\n     * @description\r\n     * # sidebar\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('sidebar', sidebar);\r\n\r\n    /** @ngInject */\r\n    function sidebar(Principal) {\r\n        return {\r\n            templateUrl: 'app/main/sidebar/sidebar.html',\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: SidebarCtrl,\r\n            controllerAs: 'sideVm',\r\n            bindToController: true // because the scope is isolated\r\n        };\r\n\r\n        /** @ngInject */\r\n        function SidebarCtrl(sidebarService, $scope, Principal, UserService) {\r\n            /* jshint validthis: true */\r\n            var vm = this;\r\n            vm.selectedMenu = 'dashboard';\r\n            vm.collapseVar = 0;\r\n            vm.multiCollapseVar = 0;\r\n            vm.myStat = {};\r\n            vm.permissions = [];\r\n\r\n            Principal.identity().then(function () {\r\n                vm.user = Principal.getIdentity();\r\n                Principal.getMyPermissions().then(function (value) {\r\n                    vm.permissions = value;\r\n                    vm.loaded = true;\r\n                });\r\n            });\r\n            vm.check = check;\r\n            vm.multiCheck = multiCheck;\r\n            vm.hasRole = hasRole;\r\n            vm.hasPermission = hasPermission;\r\n            vm.user = {};\r\n            vm.signOutToggle = true;\r\n            vm.logout = logout;\r\n            vm.getUserName = getUserName;\r\n\r\n            activate();\r\n\r\n            function logout() {\r\n                Principal.logout();\r\n            }\r\n\r\n            function getUserName() {\r\n                Principal.identity().then(\r\n                    function (data) {\r\n                        vm.user = data;\r\n                    }\r\n                );\r\n            }\r\n\r\n            function activate() {\r\n                getUserName();\r\n\t            getMyStat();\r\n            }\r\n\r\n            function check(x) {\r\n                if (x === vm.collapseVar) {\r\n                    vm.collapseVar = 0;\r\n                }\r\n                else {\r\n                    vm.collapseVar = x;\r\n                }\r\n            }\r\n\r\n            function multiCheck(y) {\r\n                if (y === vm.multiCollapseVar) {\r\n                    vm.multiCollapseVar = 0;\r\n                }\r\n                else {\r\n                    vm.multiCollapseVar = y;\r\n                }\r\n            }\r\n\r\n            function hasRole(authorities) {\r\n                if (!authorities || !authorities.length) {\r\n                    return true;\r\n                }\r\n                else if (!vm.user.roles || !vm.user.roles.length) {\r\n                    return false;\r\n                }\r\n                for (var i = 0; i < authorities.length; i++) {\r\n                    for (var j = 0; j < vm.user.roles.length; j++) {\r\n                        if (authorities[i] === vm.user.roles[j].role) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            function hasPermission(permissions) {\r\n                if (!permissions || !permissions.length) {\r\n                    return false;\r\n                }\r\n                else if (!vm.permissions || !vm.permissions.length) {\r\n                    return false;\r\n                }\r\n                for (var i = 0; i < permissions.length; i++) {\r\n                    for (var j = 0; j < vm.permissions.length; j++) {\r\n                        if (permissions[i] === vm.permissions[j].permission.name && !vm.permissions[j].denied) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\t\r\n\t        function getMyStat() {\r\n\t\t        UserService.getMyStat().then(function (data) {\r\n\t\t\t        vm.myStat = data;\r\n\t\t\t        sidebarService.getSidebar().then(\r\n\t\t\t\t        function (data) {\r\n\t\t\t\t\t        vm.data = data;\r\n\t\t\t\t\t        vm.data.items.forEach(function (item) {\r\n\t\t\t\t\t\t        if (item.caption == \"APP.MODULES.CONTRACT.TITLE\") {\r\n\t\t\t\t\t\t\t        item.params.count = vm.myStat.needToMonitorContractsNumber;\r\n\t\t\t\t\t\t        } else if (item.caption == \"APP.MODULES.MONITORING.TITLE\") {\r\n\t\t\t\t\t\t\t        item.params.count = vm.myStat.myCartableMonitoringsNumber + vm.myStat.myCreatedMonitoringsNumbers;\r\n\t\t\t\t\t\t\t        item.children.forEach(function (subItem) {\r\n\t\t\t\t\t\t\t\t        if (subItem.caption == \"APP.MODULES.MONITORING.CARTABLE\") subItem.params.count = vm.myStat.myCartableMonitoringsNumber;\r\n\t\t\t\t\t\t\t\t        if (subItem.caption == \"APP.MODULES.MONITORING.MISSIONS\") subItem.params.count = vm.myStat.myCreatedMonitoringsNumbers;\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t        } else if (item.caption == \"APP.MODULES.TRACE.TITLE\") {\r\n\t\t\t\t\t\t\t        item.params.count = vm.myStat.myAlertedTracesNumber + vm.myStat.myWaitingTracesNumber;\r\n\t\t\t\t\t\t\t        item.children.forEach(function (subItem) {\r\n\t\t\t\t\t\t\t\t        if (subItem.caption == \"APP.MODULES.TRACE.CARTABLE\") subItem.params.count = vm.myStat.myAlertedTracesNumber;\r\n\t\t\t\t\t\t\t\t        if (subItem.caption == \"APP.MODULES.TRACE.WAITING\") subItem.params.count = vm.myStat.myWaitingTracesNumber;\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t        }\r\n\t\t\t\t\t        });\r\n\t\t\t\t        }\r\n\t\t\t        );\r\n\t\t        });\r\n\t        }\r\n\t\r\n\t        $scope.$on(\"stateChanged\", function () {\r\n\t\t        getMyStat();\r\n\t\t        console.log('stateChanged');\r\n\t        })\r\n\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:samatHeader\r\n     * @description\r\n     * # samatHeader\r\n     */\r\n    angular\r\n        .module('app')\r\n        .directive('samatHeader', samatHeader);\r\n\r\n    /** @ngInject */\r\n    function samatHeader() {\r\n        return {\r\n            templateUrl: 'app/main/header/header.html',\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: HeaderCtrl,\r\n            controllerAs: 'headerVm',\r\n            bindToController: true\r\n\r\n        };\r\n\r\n        function HeaderCtrl(Principal) {\r\n            var headerVm = this;\r\n            headerVm.navOpen = true;\r\n            headerVm.user = {};\r\n            headerVm.logout = logout;\r\n            headerVm.getUserName = getUserName;\r\n\r\n            active();\r\n\r\n            function active() {\r\n                getUserName();\r\n                console.log(\"Header Controller active\")\r\n            }\r\n\r\n            function getUserName() {\r\n                Principal.identity().then(\r\n                    function (data) {\r\n                        headerVm.user = data;\r\n                    }\r\n                );\r\n            }\r\n\r\n            function logout() {\r\n                console.log('logout');\r\n                Principal.logout();\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name app.directive:samatFooter\r\n     * @description\r\n     * # samatFooter\r\n     */\r\n    angular\r\n        .module('app')\r\n        .directive('samatFooter', samatFooter);\r\n\r\n    /** @ngInject */\r\n    function samatFooter() {\r\n        return {\r\n            templateUrl: 'app/main/footer/footer.html',\r\n            restrict: 'E',\r\n            replace: true\r\n        };\r\n    }\r\n\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app')\r\n\t\t.directive('simpleDate', simpleDate);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction simpleDate() {\r\n\t\tvar directive = {\r\n\t\t\tlink: link,\r\n\t\t\treplace: true,\r\n\t\t\trestrict: 'E',\r\n\t\t\trequire: 'ngModel',\r\n\t\t\ttemplateUrl: 'app/directives/simpleDate/simple-date.html',\r\n\t\t\t/*scope: {\r\n\t\t\t\t'model': '=',\r\n\t\t\t\t'onChange': '&?'\r\n\t\t\t}data-ng-model=\"model\"*/\r\n\t\t};\r\n\t\treturn directive;\r\n\t\t\r\n\t\tfunction link(scope, element, attrs, ngModelCtrl) {\r\n\t\t\tscope.$watch(function () {\r\n\t\t\t\treturn element.attr('min');\r\n\t\t\t}, function (newValue) {\r\n                // console.log('min-attr:', attrs.min);\r\n\t\t\t\tif (attrs.min) {\r\n\t\t\t\t\tscope.min = new Date(parseInt(attrs.min));\r\n                    // console.log('min-scope:', scope.min);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n            scope.$watch(function () {\r\n                return element.attr('max');\r\n            }, function (newValue) {\r\n                // console.log('max-attr:', attrs.max);\r\n                if (attrs.max) {\r\n                    scope.max = new Date(parseInt(attrs.max));\r\n                    // console.log('max-scope:', scope.max);\r\n                }\r\n            });\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tscope.isValidDate = function (value) {\r\n\t\t\t\t// console.log('isValidDate',value, typeof value);\r\n\t\t\t\tvar res = false;\r\n\t\t\t\tvar d = undefined;\r\n\t\t\t\tif (value === 'Invalid date')\r\n\t\t\t\t\treturn res;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\t\td = moment(value, 'YYYY-MM-DD');\r\n\t\t\t\t\t\tres = d.isValid();\r\n\t\t\t\t\t} else if (typeof value === 'number') {\r\n\t\t\t\t\t\td = moment(value, 'x');\r\n\t\t\t\t\t\tres = d.isValid();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// console.log('error', e);\r\n\t\t\t\t}\r\n                // if (d && scope.min) console.log('diff-min', d, scope.min, d.diff(scope.min));\r\n                // if (d && scope.max) console.log('diff-max', d, scope.max, d.diff(scope.max));\r\n                ngModelCtrl.$setValidity('min', (d && scope.min) ? d.diff(scope.min) > -1 : true);\r\n                ngModelCtrl.$setValidity('max', (d && scope.max) ? d.diff(scope.max) < 0 : true);\r\n                return res; //&& ((d && scope.min) ? d.diff(scope.min) > -1 : true) && ((d && scope.max) ? d.diff(scope.max) < 0 : true);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t//format text going to user (model to view)\r\n\t\t\tngModelCtrl.$formatters.push(function (value) {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t// console.log('model to view before',value, typeof value);\r\n\t\t\t\tif (typeof value === \"number\")\r\n\t\t\t\t\tvalue = moment(value).format('jYYYY/jMM/jDD');\r\n\t\t\t\telse if (typeof value === \"string\")\r\n\t\t\t\t\tvalue = moment(value, 'YYYY-MM-DD').format('jYYYY/jMM/jDD');\r\n\t\t\t\t// console.log('model to view after',value);\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//parse text from the user (view to model)\r\n\t\t\tngModelCtrl.$parsers.push(function (value) {\r\n\t\t\t\t// console.log('view to model before',value, typeof value);\r\n\t\t\t\tif (typeof value === \"string\")\r\n\t\t\t\t\tvalue = moment(value, 'jYYYY/jMM/jDD').format('YYYY-MM-DD');\r\n\t\t\t\t// console.log('view to model after',value);\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n})();\r\n\r\n\nangular.module('app').directive('numbersOnly', function () {\r\n    return {\r\n        require: 'ngModel',\r\n        link: function (scope, element, attr, ngModelCtrl) {\r\n            function fromUser(text) {\r\n                if (text) {\r\n                    var transformedInput = text.replace(/[^0-9\\.]/g, '');\r\n                    var dotPosition1 = transformedInput.indexOf(\".\");\r\n                    var x = text.substring(dotPosition1+1, transformedInput.length);\r\n                    var dotPosition2 = x.indexOf(\".\");\r\n                    if(dotPosition2>-1) transformedInput = transformedInput.substring(0, dotPosition1+dotPosition2+1);\r\n                    /*var min = element.attr('min');\r\n                    if(parseFloat(transformedInput) < parseFloat(min)){\r\n                        var name = element.attr('name');\r\n                    }*/\r\n                    if (transformedInput !== text) {\r\n                        ngModelCtrl.$setViewValue(transformedInput);\r\n                        ngModelCtrl.$render();\r\n                    }\r\n                    return transformedInput;\r\n                }\r\n                return undefined;\r\n            }\r\n\r\n            ngModelCtrl.$parsers.push(fromUser);\r\n        }\r\n    };\r\n});\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('commandButtons', commandButtons);\r\n\r\n    /** @ngInject */\r\n    function commandButtons() {\r\n        var directive = {\r\n            bindToController: true,\r\n            controller: ButtonsController,\r\n            controllerAs: 'vm',\r\n            restrict: 'E',\r\n            scope: {\r\n                cancel: '&?',\r\n                delete: '&?',\r\n                disabled: '=?',\r\n                edit: '&?',\r\n                hasDelete: '=?',\r\n                toggle: '=?',\r\n                hasEdit: '=?',\r\n                hasEditPage: '=?'\r\n            },\r\n            templateUrl: 'app/directives/ng-table/command-buttons.html'\r\n        };\r\n        return directive;\r\n\r\n    }\r\n\r\n    /** @ngInject */\r\n    function ButtonsController() {\r\n        /* jshint validthis: true */\r\n        var vm = this;\r\n        vm.toggled = toggled;\r\n\r\n        function toggled() {\r\n            if (vm.hasEditPage) {\r\n                vm.edit();\r\n                return;\r\n            }\r\n            vm.toggle = !vm.toggle;\r\n        }\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('hierarchy', hierarchy);\r\n\r\n    /** @ngInject */\r\n    function hierarchy() {\r\n        var directive = {\r\n            link: link,\r\n            replace: true,\r\n            restrict: 'E',\r\n            templateUrl: 'app/directives/hierarchy/hierarchy.html',\r\n            // require: 'ngModel',\r\n            scope: {\r\n                'tree': '=',\r\n                'caption': '@?',\r\n                'children': '@?',\r\n                'model': '='\r\n            }\r\n        };\r\n        return directive;\r\n\r\n        function link(scope, element, attrs) {\r\n            if (!Array.prototype.last) {\r\n                Array.prototype.last = function () {\r\n                    return this[this.length - 1];\r\n                };\r\n            }\r\n            scope.id = attrs.id || 'hierarchy';\r\n            scope.class = attrs.class || 'hierarchy';\r\n            scope.caption = scope.caption || 'name';    //  property indicating the caption of nodes\r\n            scope.children = scope.children || 'organizations'; // property indicating array of children of nodes\r\n            scope.parents = [scope.tree];   //  list parents selected in the hierarchy\r\n            updateModel();\r\n\r\n            /*\r\n             * Finding children of a node in the tree, this function is useless now as we have complete tree\r\n             * @Deprecated\r\n             */\r\n            scope.getChildren = function (searched) {\r\n                if (!scope.tree) {\r\n                    console.error('hierarchy.getChildren', scope.tree, searched);\r\n                    return;\r\n                }\r\n                if (!searched)\r\n                    return [scope.tree];\r\n                var queue = [scope.tree];\r\n                while (queue.length) {\r\n                    var node = queue.pop();\r\n                    node[scope.children].forEach(function (child) {\r\n                        queue.push(child);\r\n                    });\r\n                    if (node.id === searched.id)\r\n                        return node[scope.children];\r\n                }\r\n                return [];\r\n            };\r\n\r\n            /*\r\n             * Add a new node in the selected hierarchy.\r\n             * This function would be called as treeModel changes, so when it is null while transition, nothing\r\n             * should be done.\r\n             */\r\n            scope.addChild = function () {\r\n                if (!scope.treeModel) {  //  transition value od treeModel\r\n                    return;\r\n                }\r\n                scope.parents.push(angular.copy(scope.treeModel));\r\n                updateModel();\r\n                // scope.treeModel = null;\r\n            };\r\n\r\n            /*\r\n             * Prone selected hierarchy on user click\r\n             */\r\n            scope.prone = function (index) {\r\n                scope.parents = scope.parents.slice(0, index + 1);\r\n                updateModel();\r\n            };\r\n\r\n            /*\r\n             * model always is the last selected node\r\n             */\r\n            function updateModel() {\r\n                scope.model = scope.parents[scope.parents.length - 1];\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\nfunction getPeityDirective(chartType) {\r\n    'use strict';\r\n\r\n    return {\r\n        restrict: 'AE',\r\n        scope: {\r\n            data: \"=\",\r\n            options: \"=\"\r\n        },\r\n        link: function (scope, element) {\r\n            var $el = $(element);\r\n\r\n            if (typeof scope.data === 'string') {\r\n\r\n                scope.data = JSON.parse(scope.data);\r\n            }\r\n            console.log(\"chart\");\r\n            console.log(scope.data);\r\n            $el.text(scope.data.join(','));\r\n            $el.peity(chartType, scope.options);\r\n\r\n            scope.$watchCollection('data', function (newData, oldData) {\r\n                if (oldData == newData) {\r\n                    return;\r\n                }\r\n                if (typeof newData === 'string') {\r\n                    newData = JSON.parse(newData);\r\n                }\r\n\r\n                $el.text(newData.join(','));\r\n                $el.change();\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nangular.module('app.peity', [])\r\n    .directive('peityPieChart', getPeityDirective.bind(this, 'pie'))\r\n    .directive('peityDonutChart', getPeityDirective.bind(this, 'donut'))\r\n    .directive('peityBarChart', getPeityDirective.bind(this, 'bar'))\r\n    .directive('peityLineChart', getPeityDirective.bind(this, 'line'))\r\n    .run(function () {\r\n        'use strict';\r\n\r\n        $.fn.peity.defaults.pie = {\r\n            delimiter: null,\r\n            fill: [\"#40babd\", \"#f5f5f5\", \"#92d1d2\"],\r\n            height: null,\r\n            radius: 16,\r\n            width: null\r\n        };\r\n\r\n        $.fn.peity.defaults.donut = {\r\n            delimiter: null,\r\n            fill: [\"#40babd\", \"#f5f5f5\", \"#92d1d2\"],\r\n            height: null,\r\n            innerRadius: null,\r\n            radius: 16,\r\n            width: null\r\n        };\r\n\r\n        $.fn.peity.defaults.line = {\r\n            delimiter: \",\",\r\n            fill: \"#92d1d2\",\r\n            height: 32,\r\n            max: null,\r\n            min: 0,\r\n            stroke: \"#40babd\",\r\n            strokeWidth: 1,\r\n            width: 64\r\n        };\r\n\r\n        $.fn.peity.defaults.bar = {\r\n            delimiter: \",\",\r\n            fill: [\"#40babd\"],\r\n            height: 32,\r\n            max: null,\r\n            min: 0,\r\n            padding: 0.1,\r\n            width: 64\r\n        };\r\n    });\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name bcrAdmin.directive:gauge\r\n     * @description\r\n     * # gauge\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('gauge', gauge);\r\n\r\n    /** @ngInject */\r\n    function gauge($filter, $window) {\r\n        return {\r\n            restrict: 'A',\r\n            replace: true,\r\n            scope: {\r\n                max: '=?',\r\n                amount: '=',\r\n                realMax: '=',\r\n                min: '=',\r\n                barWidth: '=?'\r\n            },\r\n            link: linkFunc\r\n        };\r\n\r\n        /** @ngInject */\r\n        function linkFunc(scope, element) {\r\n\r\n\r\n            var pNumber = $filter('pNumber');\r\n            var pCurrency = $filter('pCurrency');\r\n            var Needle, chartInset, degToRad, numSections, padRad, percToDeg, percToRad;\r\n            numSections = 2;    // #number of sections, it is always two\r\n            padRad = 0.05;  //  space between two colors\r\n            chartInset = 10;\r\n\r\n\r\n            percToDeg = function (perc) {\r\n                return perc * 360;\r\n            };\r\n            percToRad = function (perc) {\r\n                return degToRad(percToDeg(perc));\r\n            };\r\n            degToRad = function (deg) {\r\n                return deg * Math.PI / 180;\r\n            };\r\n\r\n            // window.CP.exitedLoop(1);\r\n            Needle = function () {\r\n                function Needle(len, radius1) {\r\n                    this.len = len;\r\n                    this.radius = radius1;\r\n                }\r\n\r\n                Needle.prototype.drawOn = function (el, perc) {\r\n                    el.append('circle').attr('class', 'needle-center').attr('cx', 0).attr('cy', 0).attr('r', this.radius);\r\n                    return el.append('path').attr('class', 'needle').attr('d', this.mkCmd(perc));\r\n                };\r\n                Needle.prototype.animateOn = function (el, perc) {\r\n                    var self;\r\n                    self = this;\r\n                    return el.transition().delay(500).ease('elastic').duration(3000).selectAll('.needle').tween('progress', function () {\r\n                        return function (percentOfPercent) {\r\n                            var progress;\r\n                            progress = percentOfPercent * perc;\r\n                            return d3.select(this).attr('d', self.mkCmd(progress));\r\n                        };\r\n                    });\r\n                };\r\n                Needle.prototype.mkCmd = function (perc) {\r\n                    var centerX, centerY, leftX, leftY, rightX, rightY, thetaRad, topX, topY;\r\n                    thetaRad = percToRad(perc / 2);\r\n                    centerX = 0;\r\n                    centerY = 0;\r\n                    topX = centerX - this.len * Math.cos(thetaRad);\r\n                    topY = centerY - this.len * Math.sin(thetaRad);\r\n                    leftX = centerX - this.radius * Math.cos(thetaRad - Math.PI / 2);\r\n                    leftY = centerY - this.radius * Math.sin(thetaRad - Math.PI / 2);\r\n                    rightX = centerX - this.radius * Math.cos(thetaRad + Math.PI / 2);\r\n                    rightY = centerY - this.radius * Math.sin(thetaRad + Math.PI / 2);\r\n                    return 'M ' + leftX + ' ' + leftY + ' L ' + topX + ' ' + topY + ' L ' + rightX + ' ' + rightY;\r\n                };\r\n                return Needle;\r\n            }();\r\n\r\n\r\n            function createGauge() {\r\n                var percent, limit, borders, el, margin, width, height, barWidth, radius, svg, chart, sectionIndx, i,\r\n                    ref, needle,\r\n                    arcStartRad, arcEndRad, totalPercent, startPadRad, endPadRad, arc;\r\n                percent = scope.amount / scope.max; //  pointer points here\r\n                limit = scope.realMax / scope.max;  //  border of two colors\r\n                borders = [0, limit / numSections, (1 - limit) / numSections]; // borders: start, limit, end\r\n                totalPercent = 0.75; // #rotates chart\r\n\r\n                //  sizing:\r\n                el = d3.select(element[0]); //  main element which chart is in\r\n                margin = {\r\n                    top: el[0][0].offsetWidth * 0.2,\r\n                    right: el[0][0].offsetWidth * 0.1,\r\n                    bottom: el[0][0].offsetWidth * 0.3,\r\n                    left: el[0][0].offsetWidth * 0.1\r\n                };\r\n                width = el[0][0].offsetWidth * 1 - margin.left - margin.right;\r\n                height = width || 100;\r\n                barWidth = width * 0.1;\r\n                radius = Math.min(width, height) / 2;\r\n\r\n                //  adding elements\r\n                svg = el.append('svg')\r\n                    .attr('width', width + margin.left + margin.right)\r\n                    .attr('height', height + margin.top + margin.bottom - el[0][0].offsetWidth * 0.6)\r\n                    .attr('class', 'gauge-' + scope.max)\r\n                    .attr('class', 'gauge-' + scope.max)\r\n                    .style('display', 'block')\r\n                    .style('margin', 'auto');\r\n                chart = svg.append('g')\r\n                    .attr('transform', 'translate(' + (width + (margin.left * 2)) / 2 + ', ' + (height + margin.top) / 2 + ')');\r\n                //  section are added in this loop\r\n                for (sectionIndx = i = 1, ref = numSections; 1 <= ref ? i <= ref : i >= ref;\r\n                     sectionIndx = 1 <= ref ? ++i : --i) {\r\n                    arcStartRad = percToRad(totalPercent + borders[i - 1]);\r\n                    arcEndRad = arcStartRad + percToRad(borders[i]);\r\n                    totalPercent += borders[i - 1];\r\n                    startPadRad = sectionIndx === 0 ? 0 : padRad / 2;\r\n                    endPadRad = sectionIndx === numSections ? 0 : padRad / 2;\r\n                    arc = d3.svg.arc().outerRadius(radius - chartInset).innerRadius(radius - chartInset - barWidth).startAngle(arcStartRad + startPadRad).endAngle(arcEndRad - endPadRad);\r\n                    chart.append('path').attr('class', 'arc chart-color' + sectionIndx).attr('d', arc);\r\n                }\r\n\r\n                /* chart.append('text')\r\n                    .attr(\"x\", width / 3 + 1.5 * barWidth)\r\n                    .attr(\"y\", -5)\r\n                    .attr(\"text-anchor\", 'start')\r\n                 .text(pNumber(pCurrency(scope.max)));*/\r\n\r\n                var alfa = percToRad(scope.amount / scope.max / 2);\r\n                var l = width / 3 + 1.5 * barWidth;\r\n\r\n                var xCurrent = -Math.cos(alfa) * l * 0.94;\r\n                var yCurrent = -Math.sin(alfa) * l * 0.94;\r\n                var current = scope.amount > 0.001 ? scope.amount : 0;\r\n\r\n                var beta = percToRad(scope.realMax / scope.max / 2);\r\n                var xLimit = -Math.cos(beta) * l;\r\n                var yLimit = -Math.sin(beta) * l;\r\n\r\n                chart.append('text')\r\n                    .style(\"text-shadow\", \"0 0 5px #fff\")\r\n                    .style(\"font-size\", function () {\r\n                        return (20 * width / 530) + 'px';\r\n                    })\r\n                    .attr(\"x\", xCurrent)\r\n                    .attr(\"y\", yCurrent)\r\n                    .attr(\"text-anchor\", function () {\r\n                        // return 'end';\r\n                        return current / scope.max > 1 / 2 ? 'start' : 'end';\r\n                    })\r\n                    .text(pNumber((Math.floor(current / scope.max * 100)) + ' % '));\r\n                // .text(pNumber(pCurrency(Math.floor(current))));\r\n\r\n                /*chart.append('text')\r\n                    .style(\"text-shadow\", \"0 0 5px #fff\")\r\n                    .attr(\"x\", xLimit)\r\n                    .attr(\"y\", yLimit - 5)\r\n                    .attr(\"text-anchor\", function () {\r\n                        // return 'end';\r\n                        return scope.realMax / scope.max > 1 / 2 ? 'start' : 'end';\r\n                    })\r\n                    .text(pNumber(pCurrency(Math.floor(scope.realMax))));\r\n                 */\r\n                needle = new Needle(width * 0.32, width * 0.04);\r\n                needle.drawOn(chart, 0);\r\n                needle.animateOn(chart, percent);\r\n\r\n            }\r\n\r\n            createGauge();\r\n            angular.element($window).bind('resize', function () {\r\n\r\n                d3.select(\"svg.gauge-\" + scope.max).remove();\r\n                createGauge();\r\n                // manuall $digest required as resize event\r\n                // is outside of angular\r\n                // scope.$digest();\r\n            });\r\n        }\r\n\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('fileUpload', fileUpload);\r\n\r\n    /** @ngInject */\r\n    function fileUpload() {\r\n        var directive = {\r\n            restrict: 'E',\r\n            scope: {\r\n                accept: '@',\r\n                file: '=',\r\n                label: '@',\r\n                uploading: '='\r\n            },\r\n            templateUrl: 'app/directives/file-upload/file-upload.html'\r\n        };\r\n        return directive;\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('fileModel', fileModel);\r\n\r\n\r\n    /** @ngInject */\r\n    function fileModel() {\r\n        var directive = {\r\n            link: link,\r\n            restrict: 'A',\r\n            scope: {\r\n                fileModel: '='\r\n            }\r\n        };\r\n        return directive;\r\n\r\n        function link(scope, element) {\r\n            element.bind('change', change);\r\n\r\n            function change(event) {\r\n                var file = event.target.files[0];\r\n                scope.fileModel = file ? file : undefined;\r\n                scope.$apply();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc directive\r\n     * @name bcrAdmin.directive:gauge\r\n     * @description\r\n     * # gauge\r\n     */\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('currencyTooltip', currencyTooltip);\r\n\r\n    /** @ngInject */\r\n    function currencyTooltip($compile, $rootScope, $injector) {\r\n        return {\r\n            restrict: 'A',\r\n            replace: false,\r\n            require: 'ngModel',\r\n            compile: compileFunc\r\n        };\r\n\r\n        /** @ngInject */\r\n        function compileFunc(el, attrs) {\r\n\t\r\n\t        el.removeAttr('currency-tooltip'); // necessary to avoid infinite compile loop\r\n            el.attr('uib-tooltip', '{{(' + attrs.ngModel + ' || 0)|pCurrency:\\'A\\'}}');\r\n            el.attr('tooltip-trigger', '\\'focus\\'');\r\n            var fn = $compile(el);\r\n\t        // console.log('compile', attrs.id);\r\n            return function (scope) {\r\n\t            if ($rootScope[scope.$id.toString() + attrs.id])\r\n\t\t            return;\r\n\t            $rootScope[scope.$id.toString() + attrs.id] = true;\r\n\t            // console.log('link', attrs.id, scope.$id, $injector.has('currency-tooltip'));\r\n\t            try {\r\n\t\t            fn(scope);\r\n\t            } catch (e) {\r\n\t\t            // console.log(scope.$id, ' error', e);\r\n\t            }\r\n                \r\n            };\r\n        }\r\n\r\n\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('backButton', backButton);\r\n\r\n    /** @ngInject */\r\n    function backButton($state) {\r\n        var directive = {\r\n            link: link,\r\n            replace: true,\r\n            restrict: 'E',\r\n            scope: {\r\n                'monitoringId': '=?',\r\n                'contractId': '=?',\r\n                'directiveId': '=?'\r\n            },\r\n            templateUrl: 'app/directives/back-button/back-button.html'\r\n        };\r\n        return directive;\r\n\r\n        function link(scope, element) {\r\n            element.bind('click', goBack);\r\n            function goBack() {\r\n                history.back();\r\n                scope.$apply();\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .directive('autoFocus', autoFocus);\r\n\r\n    /** @ngInject */\r\n    function autoFocus($timeout) {\r\n        var directive = {\r\n            link: link,\r\n            restrict: 'A',\r\n            scope: {\r\n                autoFocus: '@'\r\n            }\r\n        };\r\n        return directive;\r\n\r\n        function link(scope, element) {\r\n            scope.$watch('autoFocus', function (value) {\r\n                if (value === \"true\") {\r\n                    $timeout(function () {\r\n                        element[0].focus();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.usersReport', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.usersReport')\r\n        .factory('UsersReportService', UsersReportService);\r\n\r\n    /** @ngInject */\r\n    function UsersReportService(RequestService) {\r\n        var score = 'baseInfo/score/';\r\n        var SCORE = RequestService(score);\r\n        var report = '/report/getScoreReport';\r\n        var REPORT = RequestService(report);\r\n        return {\r\n            getAllScores: SCORE.get,\r\n            createScore: SCORE.post,\r\n            // updateScore: SCORE.put,\r\n            getAllSteps: RequestService(score + 'step/getAll/').get,\r\n            getScore: SCORE.getById,\r\n            getScoreByStep: getScoreByStep,\r\n            getReport: REPORT.get,\r\n            getDetails: getDetails\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function getScoreByStep(id, step) {\r\n            return RequestService(score + id + '/' + step).get();\r\n        }\r\n\r\n        function getDetails(action, username, stepId, fromDate, toDate,provinceId) {\r\n            return RequestService('report/getScoreReportDetail').get({\r\n                action: action,\r\n                username: username,\r\n                stepId: stepId,\r\n                fromDate: fromDate,\r\n                toDate: toDate,\r\n                provinceId:provinceId\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.usersReport')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.usersReport', {\r\n                controller: 'UsersReportController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/usersReport/usersReport.html',\r\n                url: '/usersReport'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/usersReport/{path:.*}', '/usersReport');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.usersReport')\r\n        .controller('UsersReportController', UsersReportController);\r\n\r\n    /** @ngInject */\r\n    function UsersReportController($confirm, $log, $uibModal, $scope, NgTableParams, UsersReportService, Util, ProvinceService, UserService, Principal) {\r\n        var vm = this;\r\n        vm.items = [];\r\n        var checks = {};\r\n        vm.reportParams = {};\r\n        vm.provinces = [{\r\n            id: null,\r\n            title: 'کلیه استان‌ها'\r\n        }];\r\n        vm.title = 'Users Report Controller';\r\n        vm.showDetails = showDetails;\r\n        vm.groupFinder = UserService.groupTitle;\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.save = save;\r\n        vm.getReport = getReport;\r\n        vm.filterByUsername = filterByUsername;\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            Principal.identity().then(function (value) {\r\n                vm.isAdmin = Principal.isInAnyRole([\r\n                    'ADMIN', 'AGGREGATE_REPORT', 'FINAL_HEAD'\r\n                ]);\r\n                console.log(vm.isAdmin);\r\n            });\r\n            makeItems();\r\n            getProvinces();\r\n            var today = new Date();\r\n            today = today.setDate(today.getDate() + 1);\r\n            vm.reportParams.toConfirmDate = moment(today).format('YYYY-MM-DD');// + 1515269999999;\r\n        }\r\n\r\n        function makeItems() {\r\n            getSteps().then(getScores)\r\n        }\r\n\r\n        function getSteps() {\r\n            return UsersReportService.getAllSteps().then(function (steps) {\r\n                vm.sum = {};\r\n                var hiddenStepIds = [0, 2, 3];    //  these steps would be aggregated in on step\r\n                steps.push({\r\n                    id: 1,\r\n                    name: 'firstExpert',\r\n                    title: 'کارشناس اول',\r\n                    finalized: false\r\n                });\r\n                steps.sort(function (s1, s2) {\r\n                    return s1.id - s2.id;\r\n                });\r\n                steps.forEach(function (step) {\r\n                    step.title = step.title.split('-')[0];\r\n                    if (!step.finalized && !hiddenStepIds.includes(step.id))\r\n                        vm.items.push({\r\n                            step: step\r\n                        });\r\n                    vm.sum[step.id] = {\r\n                        accept: 0,\r\n                        reject: 0,\r\n                        cartable: 0\r\n                    };\r\n                });\r\n                // console.log('getSteps done:', vm.items);\r\n            });\r\n        }\r\n\r\n        function getScores() {\r\n            UsersReportService.getAllScores().then(function (scores) {\r\n                scores.forEach(function (score) {\r\n                    checks[score.type + '' + score.stepId] = score.id;\r\n                    vm.items.forEach(function (item) {\r\n                        if (item.step.id === score.stepId) {\r\n                            item[score.type] = score.score;\r\n                        }\r\n                    });\r\n                });\r\n                // console.log('getScores done', checks);\r\n            })\r\n        }\r\n\r\n        function save(item, type) {\r\n            var s = {\r\n                \"id\": checks[type + '' + item.step.id],\r\n                \"score\": item[type],\r\n                \"step\": {\r\n                    \"id\": item.step.id\r\n                },\r\n                \"stepId\": item.step.id,\r\n                \"type\": type\r\n            };\r\n            create(s);\r\n        }\r\n\r\n        function create(score) {\r\n            return UsersReportService.createScore(score);\r\n        }\r\n\r\n        function getProvinces() {\r\n            ProvinceService.getAllProvinces().then(function (value) {\r\n                vm.provinces = vm.provinces.concat(value);\r\n            })\r\n        }\r\n\r\n        function getReport() {\r\n            preProcess();\r\n\r\n            var params = {};\r\n            if (vm.reportParams) {\r\n                params.fromDate = vm.reportParams.fromConfirmDate;\r\n                params.toDate = vm.reportParams.toConfirmDate;\r\n                params.provinceId = vm.reportParams.province ? vm.reportParams.province.id : null;\r\n            }\r\n            UsersReportService.getReport(params).then(function (data) {\r\n                vm.report = data;\r\n                addZeroRecordUsers().then(finalProcess, errorHandler);\r\n                // finalProcess();\r\n            }, errorHandler);\r\n\r\n            function errorHandler() {\r\n                Util.toast('error', 'Error in getting report data');\r\n            }\r\n\r\n        }\r\n\r\n        /*\r\n        *   Performs process needed before creating report\r\n        */\r\n        function preProcess() {\r\n            vm.report = [];\r\n            angular.forEach(vm.sum, function (v, k) {\r\n                vm.sum[k] = {\r\n                    accept: 0,\r\n                    reject: 0,\r\n                    cartable: 0\r\n                }\r\n            });\r\n            vm.sums = {\r\n                accept: 0,\r\n                reject: 0,\r\n                cartable: 0,\r\n                averageScore: 0,\r\n                users: 0\r\n            };\r\n        }\r\n\r\n        /*\r\n        *   Performs process needed to build report\r\n        */\r\n        function finalProcess() {\r\n            properData();\r\n            generateReport();\r\n            filterByUsername();\r\n        }\r\n\r\n        /*\r\n        *   Performs the main process to generate report\r\n        */\r\n        function generateReport() {\r\n            vm.report.forEach(function (reportItem) {\r\n                reportItem.userScores = [];\r\n                reportItem.finalScore = 0;\r\n                reportItem.sum = {\r\n                    accept: 0,\r\n                    reject: 0,\r\n                    cartable: 0\r\n                };\r\n                vm.items.forEach(function (item) {\r\n                    reportItem.userScores.push(userScoreItems(reportItem, item));\r\n                });\r\n                vm.sums.users++;\r\n                vm.sums.averageScore += reportItem.finalScore;\r\n                // console.log(vm.sums.averageScore);\r\n            });\r\n            // console.log('vm.report', vm.report);\r\n            // console.log('vm.sums', vm.sums);\r\n            vm.sums.averageScore = vm.sums.averageScore / vm.sums.users;\r\n        }\r\n\r\n        function userScoreItems(reportItem, item) {\r\n            var result = {\r\n                accept: 0,\r\n                reject: 0,\r\n                cartable: 0\r\n            };\r\n            if (reportItem.counts.hasOwnProperty(item.step.id)) {\r\n                // console.log('property found', reportItem.user.name, item.step.id, reportItem.counts);\r\n                result.accept = reportItem.counts[item.step.id].accept || 0;\r\n                result.reject = reportItem.counts[item.step.id].reject || 0;\r\n                result.cartable = reportItem.counts[item.step.id].cartable || 0;\r\n\r\n                reportItem.sum.accept += reportItem.counts[item.step.id].accept || 0;\r\n                reportItem.sum.reject += reportItem.counts[item.step.id].reject || 0;\r\n                reportItem.sum.cartable += reportItem.counts[item.step.id].cartable || 0;\r\n\r\n                vm.sum[item.step.id].accept += reportItem.counts[item.step.id].accept || 0;\r\n                vm.sum[item.step.id].reject += reportItem.counts[item.step.id].reject || 0;\r\n                vm.sum[item.step.id].cartable += reportItem.counts[item.step.id].cartable || 0;\r\n\r\n                vm.sums.accept += reportItem.counts[item.step.id].accept || 0;\r\n                vm.sums.reject += reportItem.counts[item.step.id].reject || 0;\r\n                vm.sums.cartable += reportItem.counts[item.step.id].cartable || 0;\r\n            }\r\n            reportItem.finalScore += getScoreByActionAndStep(item.step.id, 'ACCEPT') * result.accept\r\n                + getScoreByActionAndStep(item.step.id, 'REJECT') * result.reject\r\n                + result.cartable;\r\n            return result;\r\n        }\r\n\r\n        function getScoreByActionAndStep(stepId, action) {\r\n            var result = undefined;\r\n            vm.items.forEach(function (item) {\r\n                if (item.step.id === stepId) {\r\n                    result = item[action];\r\n                }\r\n            });\r\n            if (typeof result === undefined)\r\n                console.error('action ' + action + ' not found for step by id ' + stepId);\r\n            return result;\r\n        }\r\n\r\n        /*\r\n        *   Performs process needed before main process on received data\r\n        */\r\n        function properData() {\r\n            vm.report.forEach(function (record) {\r\n                // console.log(record.user.name);\r\n                record.counts[1] = {\r\n                    accept: 0,\r\n                    reject: 0,\r\n                    cartable: 0\r\n                };\r\n                angular.forEach(record.counts, function (count, key) {\r\n                    if (key < 4 && key != 1) {\r\n                        // console.log(key, count);\r\n                        record.counts[1].accept = count.accept || 0;\r\n                        record.counts[1].reject = count.reject || 0;\r\n                        record.counts[1].cartable += count.cartable || 0;\r\n\r\n                        count.accept = 0;\r\n                        count.reject = 0;\r\n                        count.cartable = 0;\r\n                    }\r\n\r\n                });\r\n                // console.log(1, record.counts[1]);\r\n            })\r\n        }\r\n\r\n        function showDetails(action, user, step) {\r\n            console.log('vm.reportParams.province = ',vm.reportParams.province);\r\n            var scoreItem = {\r\n                action: action,\r\n                user: user,\r\n                step: step,\r\n                provinceId : vm.reportParams.province ? vm.reportParams.province.id : null,\r\n                fromDate: vm.reportParams ? vm.reportParams.fromConfirmDate : null,\r\n                toDate: vm.reportParams ? vm.reportParams.toConfirmDate : null\r\n            };\r\n\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/usersReport/scoreDetail/scoreDetail.html',\r\n                controller: 'ScoreDetailController',\r\n                controllerAs: 'vm',\r\n                backdrop: 'static',\r\n                size: 'lg',\r\n                resolve: {\r\n                    'scoreItem': function () {\r\n                        return scoreItem;\r\n                    }\r\n                }\r\n            });\r\n\r\n            console.log('detail', scoreItem);\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n        /*\r\n        *   Hides users that are not in selected users list if the list is not empty\r\n        */\r\n        function filterByUsername() {\r\n            // console.log(vm.report[0], vm.selectedUsers);\r\n            if (vm.selectedUsers.length) {\r\n                vm.report.forEach(function (reportItem) {\r\n                    reportItem.hidden = vm.selectedUsers.indexOf(reportItem.user.username) < 0;\r\n                });\r\n            } else {\r\n                vm.report.forEach(function (reportItem) {\r\n                    reportItem.hidden = false;\r\n                });\r\n            }\r\n        }\r\n\r\n        /*\r\n        *   Adds users with no process log record to the report with all zero fields\r\n        */\r\n        function addZeroRecordUsers() {\r\n            var provinceId = vm.reportParams.province ? vm.reportParams.province.id : null;\r\n            var indexedUsers = {};\r\n            vm.report.forEach(function (record) {\r\n                indexedUsers[record.user.username] = true;\r\n            });\r\n            return UserService.getAllActiveUsers(provinceId).then(function (users) {\r\n                if (vm.isAdmin)\r\n                    users.forEach(function (user) {\r\n                        if (!indexedUsers[user.username]) {\r\n                            // console.log(user.name + ' added as empty');\r\n                            vm.report.push({\r\n                                counts: {},\r\n                                user: user\r\n                            })\r\n                        }\r\n\r\n                    });\r\n                return vm.report;\r\n            });\r\n        }\r\n\r\n        $scope.$watch(\r\n            function () {\r\n                return [angular.element('#main-table')[0].offsetWidth, angular.element('#main-table')[0].offsetHeight].join('x');\r\n            },\r\n            function (value) {\r\n                try {\r\n                    console.log('table got resized:', value.split('x'));\r\n                    // console.log(angular.element('#main-table'));\r\n                    document.getElementById(\"header-table\").style.width = value.split('x')[0] + \"px\";\r\n                    document.getElementById(\"th1\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th2\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th3\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th4\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th5\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th6\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th7\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th8\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th9\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th10\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    document.getElementById(\"th11\").style.width = ((value.split('x')[0] / 11) - 20) + \"px\";\r\n                    var width = angular.element('#header-table')[0].offsetWidth;\r\n                    console.log(width, width / 11);\r\n                } catch (e) {\r\n                    console.error('Error on calculating table headers;', e);\r\n                }\r\n\r\n            }\r\n        );\r\n\r\n        window.onscroll = function () {\r\n            scrollFunction()\r\n        };\r\n\r\n        function scrollFunction() {\r\n            // console.log(document.body.scrollTop, document.documentElement.scrollTop, angular.element('body')[0].clientHeight, (document.documentElement.scrollTop/angular.element('body')[0].clientHeight));\r\n            if (document.getElementById(\"header-table\")) {\r\n                document.getElementById(\"header-table\").style.opacity = \"1\";\r\n                if (document.body.scrollTop > 700 || document.documentElement.scrollTop > 700) {\r\n                    document.getElementById(\"header-table\").style.display = \"block\";\r\n                } else {\r\n                    document.getElementById(\"header-table\").style.display = \"none\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .factory('UserService', UserService);\r\n\r\n    /** @ngInject */\r\n    function UserService(RequestService, $q, moment) {\r\n        var base = 'userManagement';\r\n        var baseLms = 'lmsUserManagement';\r\n        var loginLog = base + '/loginLog/';\r\n        var permission = RequestService(base + '/permission/');\r\n        var role = RequestService(base + '/role/');\r\n        var user = RequestService(base + '/user/');\r\n        var lmsUser = RequestService(baseLms + '/user/');\r\n\t    var lmsUserSearch = RequestService(baseLms + '/searchUser/');\r\n        var service = {\r\n            assignPermissionToRole: assignPermissionToRole,\r\n            assignAllPermissions: assignAllPermissions,\r\n            assignPermissionToUser: assignPermissionToUser,\r\n            changeEnabledUser: changeEnabledUser,\r\n            changePassword: RequestService(base + '/changePassword').post,\r\n            changeSecurePassword: RequestService(base + '/secure/changePassword').post,\r\n            createRole: role.post,\r\n            createUser: lmsUser.post,\r\n            createSecureUser: RequestService(base + '/secure/user/').post,\r\n            deletePermissionFromRole: deletePermissionFromRole,\r\n            deletePermissionFromUser: deletePermissionFromUser,\r\n            deleteRole: role.delete,\r\n            deleteUser: user.delete,\r\n            editCaptionOfPermission: editCaptionOfPermission,\r\n            editCaptionOfRole: editCaptionOfRole,\r\n            getAllPermissions: permission.get,\r\n            getPermissions: permission.post,\r\n            getAllRoles: role.get,\r\n            getCurrentUser: RequestService(base + '/me').get,\r\n            getPermission: permission.getById,\r\n            getRole: role.getById,\r\n            getUser: user.getById,\r\n            getMe: getMe,\r\n\t        getUsersList: RequestService(baseLms + '/list/').post,\r\n\t        searchUsers: lmsUserSearch.get,\r\n            getByRole: getByRole,\r\n            getByRoles: getByRoles,\r\n            resetPassword: resetPassword,\r\n            secureResetPassword: secureResetPassword,\r\n            updateUser: updateUser,\r\n            assignRoleToUser: assignRoleToUser,\r\n            deleteRoleFromUser: deleteRoleFromUser,\r\n            setSign: setSign,\r\n            getSignForUser : getSignForUser,\r\n            getAllLoginLogs: getAllLoginLogs,\r\n            getMyStat: getMyStat,\r\n            groupTitle: groupTitle,\r\n            updateMe: RequestService(baseLms + '/me').put,\r\n            getUserPermission: getUserPermission,\r\n            setSignForMe: setSignForMe,\r\n            getAllActiveUsers: getAllActiveUsers\r\n        };\r\n\r\n        ///////////////caching/////////////////\r\n        var TIME_OUT = 5 * 60 * 1000;\r\n        var usersCache = {};\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n\r\n        /*************************************************************************************************\r\n\r\n         User\r\n\r\n         *************************************************************************************************/\r\n\r\n        function getMe() {\r\n            var url = baseLms + '/user';\r\n            return RequestService(url).get(url);\r\n        }\r\n\r\n        function setSign(username, sign) {\r\n            var url = baseLms + '/user/' + username + '/setSign';\r\n            return RequestService(url).multipartPost(sign, null);\r\n        }\r\n        \r\n        function getSignForUser(username) {\r\n            var url = baseLms + '/user/' + username + '/getSign';\r\n            return RequestService(url).get(url);\r\n        }\r\n\r\n        function getByRole(roleId, provinceId) {\r\n            var deferred = $q.defer();\r\n            var url = baseLms + '/user/getByRoleInProvince';\r\n            var params = {};\r\n            if (provinceId) {\r\n                params.provinceId = provinceId;\r\n            }\r\n            if (roleId) {\r\n                params.role = roleId;\r\n            }\r\n            var cacheIndex = url + '_P_' + (roleId || 0) + '_p_' + (provinceId || 0);\r\n            if (usersCache[cacheIndex] && //  there is cache\r\n                usersCache[cacheIndex].data && //    data is cached\r\n                moment().diff(usersCache[cacheIndex].time) < TIME_OUT) { //  and is still valid relatively\r\n                console.log('cache for ' + cacheIndex);\r\n                deferred.resolve(usersCache[cacheIndex].data);\r\n                return deferred.promise;\r\n            }\r\n            return RequestService(url).get(params).then(function (value) {\r\n                usersCache[cacheIndex] = {\r\n                    data: value,\r\n                    time: moment()\r\n                };\r\n                deferred.resolve(value);\r\n                return value;\r\n            }, function (reason) {\r\n                usersCache[cacheIndex] = null;\r\n                deferred.reject(reason);\r\n                return reason;\r\n            });\r\n        }\r\n\r\n        function getAllActiveUsers(provinceId) {\r\n            var url = baseLms + '/user/getAllActiveUsers';\r\n            var params = {};\r\n            if (provinceId) {\r\n                params.provinceId = provinceId;\r\n            }\r\n            return RequestService(url).get(params);\r\n        }\r\n\r\n        function getByRoles(rolesId) {\r\n            var deferred = $q.defer();\r\n            var url = baseLms + '/list';\r\n            var roles = [];\r\n            var cacheIndex = url;\r\n            rolesId.forEach(function (role) {\r\n                cacheIndex += ('_p_' + role);\r\n                roles.push({role:role});\r\n            });\r\n            var data = {\r\n                roles: roles\r\n            };\r\n            if (usersCache[cacheIndex] && //  there is cache\r\n                usersCache[cacheIndex].data && //    data is cached\r\n                moment().diff(usersCache[cacheIndex].time) < TIME_OUT) { //  and is still valid relatively\r\n                console.log('cache for ' + cacheIndex);\r\n                deferred.resolve(usersCache[cacheIndex].data);\r\n                return deferred.promise;\r\n            }\r\n            return RequestService(url).post(data, {page: 0, size: 10000}).then(function (value) {\r\n                usersCache[cacheIndex] = {\r\n                    data: value,\r\n                    time: moment()\r\n                };\r\n                return value;\r\n            }, function (reason) {\r\n                usersCache[cacheIndex] = null;\r\n                return reason;\r\n            });\r\n        }\r\n\r\n        function assignPermissionToUser(username, params) {\r\n            var url = base + '/user/' + username + '/assignPermission';\r\n            return RequestService(url).post(null, params);\r\n        }\r\n\r\n        function deletePermissionFromUser(username, params) {\r\n            var url = base + '/user/' + username + '/deletePermission';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function changeEnabledUser(username, params) {\r\n            var url = base + '/user/' + username + '/changeEnabled';\r\n            return RequestService(url).put(null, {}, params);\r\n        }\r\n\r\n        function resetPassword(username, data) {\r\n            var url = base + '/user/' + username + '/resetPassword';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function secureResetPassword(username, data) {\r\n            var url = base + '/secure/user/' + username + '/resetPassword';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updateUser(username, data) {\r\n            var url = baseLms + '/user/' + username;\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function assignRoleToUser(username, params) {\r\n            var url = baseLms + '/user/' + username + '/assignRole';\r\n            return RequestService(url).post(null, params);\r\n        }\r\n\r\n        function deleteRoleFromUser(username, params) {\r\n            var url = base + '/user/' + username + '/deleteRole';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function getUserPermission(username) {\r\n            var url = base + '/user/' + username + '/getPermissions';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function setSignForMe(sign) {\r\n            var url = baseLms + '/user/me/setMySign';\r\n            return RequestService(url).multipartPost(sign);\r\n        }\r\n\r\n        /*************************************************************************************************\r\n\r\n         Role\r\n\r\n         *************************************************************************************************/\r\n\r\n\r\n        function assignPermissionToRole(role, params) {\r\n            var url = base + '/role/' + role + '/assignPermission';\r\n            return RequestService(url).post({}, params);\r\n        }\r\n\r\n        function assignAllPermissions(roleId) {\r\n            var url = base + '/role/' + roleId + '/assignAllPermissions';\r\n            return RequestService(url).post({});\r\n        }\r\n\r\n\r\n        function deletePermissionFromRole(role, params) {\r\n            var url = base + '/role/' + role + '/deletePermission';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function editCaptionOfRole(role, params) {\r\n            var url = base + '/role/' + role;\r\n            return RequestService(url).put(null, {}, params);\r\n        }\r\n\r\n        /*************************************************************************************************\r\n\r\n         Permission\r\n\r\n         *************************************************************************************************/\r\n\r\n\r\n        function editCaptionOfPermission(permissionId, params) {\r\n            var url = base + '/permission/' + permissionId;\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        /*************************************************************************************************\r\n\r\n         Loginlog\r\n\r\n         *************************************************************************************************/\r\n\r\n        function getAllLoginLogs(params) {\r\n            var url = loginLog + 'getAllLoginLogs';\r\n            return RequestService(url).get(params);\r\n        }\r\n\r\n        function getMyStat(params) {\r\n            var url = baseLms + '/getMyStat';\r\n            return RequestService(url).get(params);\r\n        }\r\n\r\n        function userLevels() {\r\n            return {\r\n                'STAFF': 'ستاد',\r\n                'PROVINCE': 'استان',\r\n                'BRANCH': 'شعبه'\r\n            }\r\n        }\r\n\r\n        function groupTitle(user) {\r\n            return userLevels()[user.level];\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.users', {\r\n                abstract: true,\r\n                resolve: {},\r\n                template: '<div ui-view></div>',\r\n                url: '/users'\r\n            })\r\n            .state('root.users.list', {\r\n                controller: 'UsersListController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/users/users-list.html',\r\n                url: '/list'\r\n            })\r\n            .state('root.users.details', {\r\n                controller: 'UserDetailsController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/users/user-details.html',\r\n                url: '/:username/details'\r\n            })\r\n            .state('root.users.user', {\r\n                controller: 'AddEditUserController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/users/add-edit-user.html',\r\n                url: '/info?username'\r\n            })\r\n            .state('root.users.me', {\r\n                controller: 'UserMeController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/users/user-me.html',\r\n                url: '/me'\r\n            })\r\n\r\n        ;\r\n        $urlRouterProvider.when('/users', '/users/list');\r\n        $urlRouterProvider.when('/users/list/{path:.*}', '/users/list');\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.users')\r\n\t\t.controller('UsersListController', UsersListController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction UsersListController($confirm, $log, NgTableParams, UserService, ProvinceService, EconomicSectionService, Util) {\r\n\t\tvar vm = this;\r\n\t\tvm.title = 'UsersListController';\r\n\t\tvm.enableUser = [];\r\n\t\tvm.users = [];\r\n\t\tvm.levels = [\r\n\t\t\t{id: \"STAFF\", title: \"ستادی\"},\r\n\t\t\t{id: \"PROVINCE\", title: \"استانی\"},\r\n\t\t\t{id: \"BRANCH\", title: \"شعبه\"}\r\n\t\t];\r\n        vm.userStatus = [\r\n            {id: true, title: 'فعال'},\r\n            {id: false, title: 'غیر فعال'}\r\n        ];\r\n\t\t\r\n\t\tvm.changeEnabledUser = changeEnabledUser;\r\n\t\tvm.deleteUser = deleteUser;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n\t\t\tgetAllProvinces().then(function () {\r\n\t\t\t\tgetAllEconomicSections().then(function () {\r\n\t\t\t\t\tgetAllRoles().then(function () {\r\n\t\t\t\t\t\tvm.tableParams = new NgTableParams({\r\n\t\t\t\t\t\t\tcount: 10, // initial page size\r\n                            page: 1,\r\n                            filter: {enable: true},\r\n                            sorting: {\r\n                                name: 'asc'\r\n                            }\r\n                        }, {\r\n\t\t\t\t\t\t\tcounts: [5, 10, 20, 50],\r\n\t\t\t\t\t\t\tgetData: getUsersList\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllProvinces() {\r\n\t\t\treturn ProvinceService.getAllProvinces().then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.provinces = data ? data : [];\r\n\t\t\t\t\treturn vm.provinces;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllRoles() {\r\n\t\t\treturn UserService.getAllRoles().then(successCallback);\r\n\t\t\t\r\n\t\t\tfunction successCallback(data) {\r\n\t\t\t\tvm.roles = data ? data.map(function (value) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: value,\r\n\t\t\t\t\t\ttitle: value.caption\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : [];\r\n\t\t\t\treturn vm.roles;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction getAllEconomicSections() {\r\n\t\t\treturn EconomicSectionService.getAllEconomicSections().then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.economicSections = data ? data.map(function (value) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid: value.id,\r\n\t\t\t\t\t\t\ttitle: value.name\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}) : [];\r\n\t\t\t\t\tconsole.log(vm.economicSections);\r\n\t\t\t\t\treturn vm.economicSections;\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction changeEnabledUser(user) {\r\n\t\t\tvar params = {enabled: user.enable};\r\n\t\t\tUserService.changeEnabledUser(user.username, params).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tUtil.toast('success');\r\n\t\t\t\t\tvm.tableParams.reload();\r\n\t\t\t\t},\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tvm.tableParams.reload();\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction deleteUser(username, index) {\r\n\t\t\t$confirm().then(function () {\r\n\t\t\t\tif (username) {\r\n\t\t\t\t\tUserService.deleteUser(username).then(successCallback);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfunction successCallback() {\r\n\t\t\t\tUtil.toast('success');\r\n\t\t\t\tvm.users.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction getUsersList(tParams) {\r\n\t\t\tvar params = {\r\n\t\t\t\tpage: tParams.page() - 1,\r\n\t\t\t\tsize: tParams.count()\r\n\t\t\t};\r\n\t\t\tvar searchItem = {\r\n\t\t\t\tname: tParams.filter().name,\r\n\t\t\t\tusername: tParams.filter().username !== \"\" ? tParams.filter().username : null,\r\n\t\t\t\tidentification: tParams.filter().identification !== \"\" ? tParams.filter().identification : null,\r\n\t\t\t\tlevel: tParams.filter().level !== \"\" ? tParams.filter().level : null,\r\n\t\t\t\tprovinceId: tParams.filter().province !== \"\" ? tParams.filter().province : null,\r\n\t\t\t\trole: tParams.filter().role !== \"\" ? tParams.filter().role : null,\r\n                economicSectionId: tParams.filter().economicSection !== \"\" ? tParams.filter().economicSection : null,\r\n                enable: tParams.filter().enable !== undefined ? tParams.filter().enable : null\r\n\t\t\t};\r\n\t\t\tangular.forEach(tParams.sorting(), function (value, key) {\r\n\t\t\t\tparams.sort = key + ',' + value;\r\n\t\t\t});\r\n\t\t\treturn UserService.getUsersList(searchItem, params).then(successCallback);\r\n\t\t\t\r\n\t\t\tfunction successCallback(data) {\r\n\t\t\t\tvm.users = data.content;\r\n\t\t\t\ttParams.total(data.totalElements);\r\n\t\t\t\treturn vm.users;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('UserMeController', UserMeController);\r\n\r\n    /** @ngInject */\r\n    function UserMeController($confirm, $log, $state, $stateParams, Principal, Util, UserService, telRegex, host) {\r\n        var vm = this;\r\n        vm.title = 'UserMeController';\r\n        vm.user = {};\r\n\r\n        vm.changePassword = changePassword;\r\n        vm.update = update;\r\n        vm.getSignUrl = getSignUrl;\r\n        vm.setSign = setSign;\r\n        vm.provinces = [];\r\n        vm.economicSections = [];\r\n        vm.date = new Date();\r\n        vm.levels = [\r\n            {id: \"STAFF\", name: \"ستادی\"},\r\n            {id: \"PROVINCE\", name: \"استانی\"},\r\n            {id: \"BRANCH\", name: \"شعبه\"}\r\n        ];\r\n        vm.telRegex = telRegex;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(vm.title);\r\n            getUser();\r\n        }\r\n\r\n        function getUser() {\r\n            Principal.identity().then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.user = data;\r\n            }\r\n        }\r\n\r\n        function changePassword(form) {\r\n            var body = {\r\n                'newPassword': Util.encodeCredential(vm.newPassword),\r\n                'repeatNewPassword': Util.encodeCredential(vm.newPasswordRepeat),\r\n                'oldPassword': Util.encodeCredential(vm.oldPassword)\r\n            };\r\n\r\n            UserService.changeSecurePassword(body).then(function () {\r\n                Util.toast('success');\r\n                vm.newPassword = null;\r\n                vm.newPasswordRepeat = null;\r\n                vm.oldPassword = null;\r\n                form.$setPristine();\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function update() {\r\n            return UserService.updateMe(null, vm.user).then(function (value) {\r\n                Util.toast('success');\r\n            });\r\n        }\r\n\r\n        function getSignUrl(user) {\r\n            // console.log(\"user = \", user);\r\n            vm.signUrl = host + \"lmsUserManagement/user/\" + user.username + \"/getSign\";\r\n            return vm.signUrl;\r\n        }\r\n\r\n        function setSign() {\r\n            console.log(\" vm.sign in user-me (vm.attachment.sign) = \",\r\n                vm.attachment.sign);\r\n            if (vm.attachment.sign.size > 7000000) {\r\n                Util.toast('error', 'APP.ERRORS.MAXIMUM_FILE_SIZE_EXCEPTION', 'add attachment maximum file size error');\r\n                return;\r\n            }\r\n            vm.loading = true;\r\n            if (vm.attachment) {\r\n                vm.attachment.name = vm.attachment.name ? vm.attachment.name : vm.attachment.sign.name;\r\n                vm.description = vm.description || '';\r\n                UserService.setSignForMe(vm.attachment).then(\r\n                    function () {\r\n                        vm.date = new Date();\r\n                        vm.attachment = {};\r\n                        Util.toast('success');\r\n                    },\r\n                    function (response) {\r\n                        var status = response.status;\r\n                        vm.loading = false;\r\n                        if (status === 401) {\r\n                            Util.toast('error', 'APP.ERRORS.Unauthorized user for this action');\r\n                        } else\r\n                            Util.toast('error', 'APP.MESSAGES.FAIL');\r\n                    }\r\n                )\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('UserDetailsController', UserDetailsController);\r\n\r\n    /** @ngInject */\r\n    function UserDetailsController($confirm, host, $log, $stateParams, UserService, EconomicSectionService, ProvinceService, Util) {\r\n        var vm = this;\r\n        vm.allPermissions = [];\r\n        vm.allRoles = [];\r\n        vm.permission = {};\r\n        vm.denied = false;\r\n        vm.role = {};\r\n        vm.title = 'UserDetailsController';\r\n        vm.toggleAssignPermission = false;\r\n        vm.toggleAssignRole = false;\r\n        vm.user = {};\r\n        vm.userPermissions = [];\r\n        vm.userRoles = [];\r\n        vm.attachment = {};\r\n        vm.host = host;\r\n\r\n        vm.assignPermissionToUser = assignPermissionToUser;\r\n        vm.assignRoleToUser = assignRoleToUser;\r\n        vm.cancelAssignPermission = cancelAssignPermission;\r\n        vm.cancelAssignRole = cancelAssignRole;\r\n        vm.deletePermissionFromUser = deletePermissionFromUser;\r\n        vm.deleteRoleFromUser = deleteRoleFromUser;\r\n        vm.cancelAddAttachment = cancelAddAttachment;\r\n        vm.attachFile = attachFile;\r\n        vm.getSign = getSignForUser;\r\n        vm.updateUser = updateUser;\r\n        vm.resetPassword = resetPassword;\r\n        vm.getBranches = getBranches;\r\n        vm.provinces = [];\r\n        vm.economicSections = [];\r\n        vm.levels = [\r\n            {id: \"STAFF\", name: \"ستادی\"},\r\n            {id: \"PROVINCE\", name: \"استانی\"},\r\n            {id: \"BRANCH\", name: \"شعبه\"}\r\n        ];\r\n        vm.signUrl = \"\";\r\n        vm.renderImg = true;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            vm.username = $stateParams.username;\r\n            var timestamp = (new Date()).getTime();\r\n            vm.signUrl = vm.host + \"lmsUserManagement/user/\" + vm.username + \"/getSign?tm=\" + timestamp;\r\n            getUser();\r\n            getAllRoles();\r\n            getAllPermissions();\r\n            getAllProvinces();\r\n            getAllEconomicSections();\r\n        }\r\n\r\n        function cancelAddAttachment() {\r\n            vm.attachment = {};\r\n            vm.toggleAddAttachment = true;\r\n        }\r\n\r\n        function attachFile() {\r\n            if (vm.attachment) {\r\n                vm.attachment.name = vm.attachment.name ? vm.attachment.name : vm.attachment.sign.name;\r\n\r\n                vm.imageExtensions = ['JPG', 'JPEG', 'PNG', 'GIF', 'BMP'];\r\n                if (vm.imageExtensions.indexOf(vm.attachment.name.split('.').pop().toUpperCase()) !== -1)\r\n                    UserService.setSign(vm.username, vm.attachment).then(\r\n                        function () {\r\n                            var timestamp = (new Date()).getTime();\r\n                            vm.signUrl = vm.host + \"/lmsUserManagement/user/\" + vm.username + \"/getSign?tm=\" + timestamp;\r\n                            $(\"#myimg\").attr(\"src\", vm.signUrl);\r\n                            vm.attachment = {};\r\n                            Util.toast('success');\r\n                        },\r\n                        function (response) {\r\n                            var status = response.status;\r\n                            if (status == 401) {\r\n                                Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n                            } else\r\n                                Util.toast('error', 'APP.MESSAGES.FAIL', 'add attachment error');\r\n                        }\r\n                    );\r\n                else {\r\n                    Util.toast('error', 'APP.MESSAGES.IMAGEUPLOADFAIL', 'add attachment error');\r\n                    vm.attachment = {};\r\n                }\r\n            }\r\n        }\r\n\r\n        function getSignForUser() {\r\n            UserService.getSignForUser(vm.username).then(\r\n                function (response) {\r\n                    vm.renderImg = true;\r\n                    console.log(\"response = \", response);\r\n                },\r\n                function (response) {\r\n                    console.log(\"error response = \", response);\r\n                }\r\n            );\r\n        }\r\n\r\n        function assignPermissionToUser() {\r\n            var params = {\r\n                permissionId: vm.permission.id,\r\n                denied: vm.permission.denied\r\n            };\r\n            $confirm().then(function () {\r\n                UserService.assignPermissionToUser(vm.username, params).then(function () {\r\n                    Util.toast('success');\r\n                    getUser();\r\n                });\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function assignRoleToUser() {\r\n            var params = {role: vm.role.role};\r\n            $confirm().then(function () {\r\n                UserService.assignRoleToUser(vm.username, params).then(function () {\r\n                    Util.toast('success');\r\n                    getUser();\r\n                });\r\n            });\r\n        }\r\n\r\n        function cancelAssignPermission() {\r\n            vm.permission = null;\r\n            vm.toggleAssignPermission = !vm.toggleAssignPermission\r\n        }\r\n\r\n        function cancelAssignRole() {\r\n            vm.role = null;\r\n            vm.toggleAssignRole = !vm.toggleAssignRole\r\n        }\r\n\r\n        function deletePermissionFromUser(id, index) {\r\n            var params = {permissionId: id};\r\n            if (id) {\r\n                $confirm().then(function () {\r\n                    UserService.deletePermissionFromUser(vm.username, params).then(function () {\r\n                        Util.toast('success');\r\n                        vm.userPermissions.splice(index, 1);\r\n                    });\r\n                });\r\n            }\r\n\r\n\r\n        }\r\n\r\n        function deleteRoleFromUser(index) {\r\n            var params = {role: vm.user.roles[index].role};\r\n\r\n            $confirm().then(function () {\r\n                UserService.deleteRoleFromUser(vm.username, params).then(successCallback);\r\n            });\r\n\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.user.roles.splice(index, 1);\r\n                vm.userRoles = angular.copy(vm.user.roles);\r\n            }\r\n        }\r\n\r\n        function getAllPermissions() {\r\n            UserService.getAllPermissions({page: 0, size: 100000}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.allPermissions = data ? data.content : [];\r\n            }\r\n        }\r\n\r\n        function getAllRoles() {\r\n            UserService.getAllRoles().then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.allRoles = data ? data : [];\r\n            }\r\n        }\r\n\r\n        function getUser() {\r\n            if (vm.username) {\r\n                UserService.getUser(vm.username).then(successCallback);\r\n            }\r\n\r\n            function successCallback(data) {\r\n                vm.user = data;\r\n                // vm.userPermissions = angular.copy(data.userPermissions);\r\n                vm.userRoles = angular.copy(data.roles);\r\n                if (vm.user.province)\r\n                    getBranches();\r\n                UserService.getUserPermission(vm.username).then(successCallbackPermissions);\r\n            }\r\n\r\n            function successCallbackPermissions(data) {\r\n                vm.userPermissions = data;\r\n            }\r\n        }\r\n\r\n\r\n        function getAllProvinces() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function updateUser() {\r\n            if (vm.user.identification && vm.user.identification.length > 20)\r\n                Util.toast('error', 'user identification length exceeded');\r\n\r\n            else if (vm.username) {\r\n                if (vm.user.level !== 'BRANCH')\r\n                    vm.user.branch = null;\r\n                if (vm.user.level !== 'STAFF')\r\n                    vm.user.economicSection = null;\r\n                UserService.updateUser(vm.username, vm.user).then(successCallback, failureCallBack);\r\n            }\r\n\r\n            function successCallback() {\r\n                Util.toast('success');\r\n            }\r\n\r\n            function failureCallBack() {\r\n                Util.toast('error', 'APP.MESSAGES.FAIL', 'edit userMonitoring error');\r\n            }\r\n        }\r\n\r\n        function resetPassword(form) {\r\n            var newPassword = Util.encodeCredential(vm.newPassword);\r\n            var newUsername = Util.encodeCredential(vm.username);\r\n            UserService.secureResetPassword(newUsername, newPassword).then(function () {\r\n                Util.toast('success');\r\n                vm.newPassword = null;\r\n                vm.newPasswordRepeat = null;\r\n                form.$setPristine();\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function getBranches() {\r\n            if (!vm.user.province)\r\n                return;\r\n            return ProvinceService.getAllBranchesOfProvince(vm.user.province.id).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('AddEditUserController', AddEditUserController);\r\n\r\n    /** @ngInject */\r\n    function AddEditUserController($confirm, $log, $state, $stateParams, EconomicSectionService, ProvinceService, UserService, Util) {\r\n        var vm = this;\r\n        vm.title = 'AddEditUserController';\r\n        vm.user = {};\r\n        vm.username = $stateParams.username;\r\n\r\n        vm.onSubmit = onSubmit;\r\n        vm.resetPassword = resetPassword;\r\n        vm.getBranches = getBranches;\r\n        vm.provinces = [];\r\n        vm.economicSections = [];\r\n        vm.levels = [\r\n            {id: \"STAFF\", name: \"ستادی\"},\r\n            {id: \"PROVINCE\", name: \"استانی\"},\r\n            {id: \"BRANCH\", name: \"شعبه\"}\r\n        ];\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title, vm.username);\r\n            getUser();\r\n            getAllProvinces();\r\n            getAllEconomicSections();\r\n        }\r\n\r\n        function getAllProvinces() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function getBranches() {\r\n            if (!vm.user.province)\r\n                return;\r\n            return ProvinceService.getAllBranchesOfProvince(vm.user.province.id).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createUser() {\r\n            vm.user.newPassword = vm.user.password;\r\n            UserService.createUser(vm.user).then(function () {\r\n                Util.toast('success');\r\n                vm.repeatPassword = null;\r\n                $state.go('root.users.details', {username: vm.user.username});\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function getUser() {\r\n            if (vm.username) {\r\n                UserService.getUser(vm.username).then(successCallback);\r\n            }\r\n\r\n            function successCallback(data) {\r\n                vm.user = data;\r\n            }\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function onSubmit(form) {\r\n            if (vm.username) {\r\n                updateUser();\r\n            } else {\r\n                createUser();\r\n                form.$setPristine();\r\n            }\r\n        }\r\n\r\n        function updateUser() {\r\n            if (vm.user.identification && vm.user.identification.length > 20)\r\n                Util.toast('error', 'APP.ERRORS.user identification length exceeded', 'user identification length exceeded');\r\n            else {\r\n                if (vm.username) {\r\n                    UserService.updateUser(vm.username, vm.user).then(successCallback, failureCallBack);\r\n                }\r\n            }\r\n\r\n            function successCallback() {\r\n                Util.toast('success');\r\n            }\r\n\r\n            function failureCallBack() {\r\n                Util.toast('error', 'APP.MESSAGES.FAIL', 'edit userMonitoring error');\r\n            }\r\n        }\r\n\r\n        function resetPassword(form) {\r\n            var newPassword = Util.encodeCredential(vm.newPassword);\r\n            var newUsername = Util.encodeCredential(vm.username);\r\n            UserService.secureResetPassword(newUsername, newPassword).then(function () {\r\n                Util.toast('success');\r\n                vm.newPassword = null;\r\n                vm.newPasswordRepeat = null;\r\n                form.$setPristine();\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .factory('TraceService', TraceService);\r\n\r\n    /** @ngInject */\r\n    function TraceService(RequestService) {\r\n        var base = 'trace/';\r\n        var TR = RequestService(base);\r\n        return {\r\n            getAllTraces: TR.get,\r\n            getTrace: TR.getById,\r\n            createTrace: TR.post,\r\n            updateTrace: TR.put,\r\n            deleteTrace: TR.delete,\r\n            search: RequestService(base + 'search').post,\r\n            mine: RequestService(base + 'mine').post,\r\n            issues: RequestService(base + 'issues').post,\r\n\r\n            traceCleared: traceCleared,\r\n            traceFailed: traceFailed,\r\n            tracePostPone: tracePostPone,\r\n            traceTransfer: traceTransfer,\r\n            getProcessLogsTrace: getProcessLogsTrace,\r\n\t        traceFindByUser: traceFindByUser,\r\n\t        getTracesByMonitoring: getTracesByMonitoring,\r\n\t\r\n\t        addAttachmentToTrace: addAttachmentToTrace,\r\n            deleteAttachmentFromTrace: deleteAttachmentFromTrace,\r\n            getStepsSync: [\r\n                {id: 0, name: \"waiting\", title: \"در انتظار\", finalized: false},\r\n                {id: 1, name: \"alerted\", title: \"هشدار\", finalized: false},\r\n                {id: 2, name: \"seen\", title: \"مشاهده شده\", finalized: false},\r\n                {id: 3, name: \"cleared\", title: \"پاسخ مناسب از شعبه دریافت شد\", finalized: true},\r\n                {id: 4, name: \"failed\", title: \"پاسخ مناسب از شعبه دریافت نشد\", finalized: true}\r\n            ]\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function traceCleared(id, data) {\r\n            var url = base + id + '/clear';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function getProcessLogsTrace(id) {\r\n            var url = base + id + '/processLogs';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function traceFailed(id, data) {\r\n            var url = base + id + '/fail';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function tracePostPone(id, data, params) {\r\n            var url = base + id + '/postpone';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function traceTransfer(id, data, params) {\r\n            var url = base + id + '/transfer';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function traceFindByUser(username) {\r\n            var url = base + username + '/mine';\r\n            return RequestService(url).get();\r\n        }\r\n\t\r\n\t    function getTracesByMonitoring(monitoringId) {\r\n            var search = {\r\n\t\t\t    monitoringId: monitoringId\r\n\t\t    };\r\n            return RequestService(base + 'search').post(search);\r\n\t    }\r\n\t\r\n\t    function addAttachmentToTrace(id, attachment, params) {\r\n\t\t    var url = base + id + '/addAttachment';\r\n\t\t    return RequestService(url).multipartPost(attachment, params);\r\n\t    }\r\n\t\r\n\t    function deleteAttachmentFromTrace(id, attachmentId) {\r\n\t\t    var url = base + id + '/deleteAttachment';\r\n\t\t    return RequestService(url).delete(null, {attachmentId: attachmentId});\r\n\t    }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.trace-list', {\r\n                controller: 'TraceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/trace/trace.html',\r\n                params:{\r\n                    steps: 'alerted,seen',\r\n                    type: 'mine'\r\n                },\r\n                url: '/trace?steps?type'\r\n            })\r\n            .state('root.trace-detail', {\r\n                controller: 'TraceDetailController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/trace/trace-detail.html',\r\n                url: '/trace-detail?id'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/trace/{path:.*}', '/trace');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .controller('TraceController', TraceController);\r\n\r\n    /** @ngInject */\r\n    function TraceController($log, $stateParams, $uibModal, $document, $filter, NgTableParams, TraceService, UserService,\r\n                             Principal, Util, ReportService, ProvinceService) {\r\n        var vm = this;\r\n        vm.traces = [];\r\n        vm.firstSearch = true;\r\n        var eNumber = $filter('eNumber');\r\n        var stepNames = $stateParams.steps ? $stateParams.steps.split(',') : [];\r\n        vm.type = $stateParams.type;\r\n        vm.steps = $stateParams.steps;\r\n        vm.comment = '';\r\n        vm.investmentActions = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: getTraces\r\n        });\r\n        var duration = 1000;\r\n        var offset = 30;\r\n        vm.title = 'APP.MODULES.TRACE.TITLE';\r\n\r\n        vm.toggleAdd = false;\r\n        vm.searchItems = {};\r\n        vm.observers = [];\r\n        vm.traceSteps = TraceService.getStepsSync;\r\n\r\n        Principal.identity().then(function (value) {\r\n            vm.currentUser = value;\r\n            console.log(' vm.currentUser = ', vm.currentUser);\r\n            vm.disableProvince = vm.currentUser.level !== 'STAFF';\r\n            if (vm.disableProvince) vm.searchItems.provinceId = vm.currentUser.province.id;\r\n            vm.traceSteps.forEach(function (step) {\r\n                step.hide = false;\r\n            });\r\n            switch (vm.steps) {\r\n                case 'none': {\r\n                    vm.title += vm.type === 'issues' ? 'S.ISSUED' : vm.type === 'search' ? 'S.REPORT' : 'S.ALL';\r\n                    vm.disableCreator = vm.type === 'issues';\r\n                    vm.disableUser = vm.type === 'mine';\r\n                    break;\r\n                }\r\n                case 'alerted,seen': {\r\n                    vm.title += 'S.CARTABLE';\r\n                    vm.disableUser = true;\r\n                    vm.traceSteps[0].hide = true;\r\n                    vm.traceSteps[3].hide = true;\r\n                    vm.traceSteps[4].hide = true;\r\n                    break;\r\n                }\r\n                case 'waiting': {\r\n                    vm.title += 'S.WAITING';\r\n                    vm.disableUser = true;\r\n                    vm.hideStatuses = true;\r\n                    break;\r\n                }\r\n                case 'cleared,failed': {\r\n                    vm.title += 'S.FINISHED';\r\n                    vm.disableUser = true;\r\n                    vm.traceSteps[0].hide = true;\r\n                    vm.traceSteps[1].hide = true;\r\n                    vm.traceSteps[2].hide = true;\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        vm.create = createTrace;\r\n        vm.delete = deleteTrace;\r\n        vm.openModal = openModal;\r\n        vm.isValidUser = isValidUser;\r\n        vm.getColorOfState = getColorOfState;\r\n        vm.getIconOfState = getIconOfState;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.exportTrace = exportTrace;\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.groupFinder = UserService.groupTitle;\r\n        vm.isInRoleStaff = isInRoleStaff;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(vm.title + ' activated');\r\n            getAllProvince();\r\n        }\r\n\r\n        function isInRoleStaff() {\r\n            return Principal.isInRole('STAFF_DISPATCHER');\r\n        }\r\n\r\n        function prepareSearch() {\r\n            vm.searchItems.ownerUsername = vm.creator ? vm.creator.username : null;\r\n            vm.searchItems.actuatorUsername = vm.user ? vm.user.username : null;\r\n            vm.searchItems.monitoringNumber = eNumber(vm.searchItems.monitoringNumber);\r\n            vm.searchItems.applicant = vm.searchItems.applicant && vm.searchItems.applicant.length ? vm.searchItems.applicant : null;\r\n            if (vm.steps === 'none') {\r\n                vm.searchItems.stepIds = [];\r\n                vm.traceSteps.forEach(function (step) {\r\n                    if (step.selected)\r\n                        vm.searchItems.stepIds.push(step.id);\r\n                });\r\n            } else {\r\n                var restricted = false;\r\n                var tempStepIds = [];\r\n                vm.traceSteps.forEach(function (step) {\r\n                    if (step.selected) {\r\n                        restricted = true;\r\n                        tempStepIds.push(step.id);\r\n                    }\r\n                });\r\n                if (restricted) vm.searchItems.stepIds = tempStepIds;\r\n            }\r\n        }\r\n\r\n        function getTraces(tParams) {\r\n            var startTime = moment();\r\n            vm.loading = true;\r\n            var stepIds = [];\r\n            //  check if this state is restricted to some steps\r\n            vm.traceSteps.forEach(function (step) {\r\n                stepNames.forEach(function (stepName) {\r\n                    if (stepName === step.name)\r\n                        stepIds.push(step.id);\r\n                })\r\n            });\r\n            vm.searchItems.stepIds = stepIds;\r\n            vm.searchItems.forCommitmentConvert = vm.searchItems.forCommitmentConvert ? vm.searchItems.forCommitmentConvert : null\r\n\r\n            prepareSearch();\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                sort: 'id,desc'\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n            switch (vm.type) {\r\n                case 'search':\r\n                    return TraceService.search(vm.searchItems, params).then(successCallback, errorCallback);\r\n                case 'mine':\r\n                    return TraceService.mine(vm.searchItems, params).then(successCallback, errorCallback);\r\n                case 'issues':\r\n                    return TraceService.issues(vm.searchItems, params).then(successCallback, errorCallback);\r\n            }\r\n\r\n            function successCallback(data) {\r\n                vm.traces = data ? data.content : [];\r\n                if (data) {\r\n                    tParams.total(data.totalElements);\r\n                    vm.allRecordsCount = data.totalElements;\r\n                    var searchResultContainer = angular.element(document.getElementById('search-result-container'));\r\n                    if (vm.firstSearch) vm.firstSearch = false;\r\n                    else $document.scrollToElement(searchResultContainer, offset, duration);\r\n                }\r\n                vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                vm.loading = false;\r\n                return vm.traces;\r\n            }\r\n\r\n            function errorCallback(reason) {\r\n                vm.allRecordsCount = 0;\r\n                vm.loading = false;\r\n                vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                return reason;\r\n            }\r\n        }\r\n\r\n        function createTrace(name, type) {\r\n            var tmp = {name: name, type: type};\r\n            TraceService.createTrace(tmp).then(function () {\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n        }\r\n\r\n        function deleteTrace(id) {\r\n            TraceService.deleteTrace(id).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function openModal(trace, action) {\r\n            console.log(trace.currentStep.id);\r\n            if (trace.currentStep.id === 1) {\r\n                Util.toast('warn', 'Please open alerted trace before doing any action');\r\n                return;\r\n            }\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/trace/add-comment-modal.html',\r\n                controller: 'AddCommentController',\r\n                controllerAs: 'modalVm',\r\n                size: 'md',\r\n                resolve: {\r\n                    trace: function () {\r\n                        return trace;\r\n                    },\r\n                    action: function () {\r\n                        return action;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                }, function () {\r\n\r\n                });\r\n        }\r\n\r\n        function isValidUser(trace) {\r\n            return (vm.currentUser.username === trace.user.username);\r\n        }\r\n\r\n        function getColorOfState(state) {\r\n            var cls = '';\r\n            switch (state) {\r\n                case 'waiting': {\r\n                    cls = 'yellowBG';\r\n                    break;\r\n                }\r\n                case 'alerted': {\r\n                    cls = 'OrangeBG';\r\n                    break;\r\n                }\r\n                case 'seen': {\r\n                    cls = 'GrayBG';\r\n                    break;\r\n                }\r\n                case 'cleared': {\r\n                    cls = 'GreenBG';\r\n                    break;\r\n                }\r\n                case 'failed': {\r\n                    cls = 'RedBG';\r\n                    break;\r\n                }\r\n            }\r\n            return cls\r\n        }\r\n\r\n        function getIconOfState(state) {\r\n            var cls = '';\r\n            switch (state) {\r\n                case 'waiting': {\r\n                    cls = 'fa fa-hourglass-half fa-lg';\r\n                    break;\r\n                }\r\n                case 'alerted': {\r\n                    cls = 'fa fa-times-circle-o fa-lg';\r\n                    break;\r\n                }\r\n                case 'seen': {\r\n                    cls = 'fa fa-eye fa-lg';\r\n                    break;\r\n                }\r\n                case 'cleared': {\r\n                    cls = 'fa fa-check fa-lg ';\r\n                    break;\r\n                }\r\n                case 'failed': {\r\n                    cls = 'fa fa-thumbs-o-down fa-lg';\r\n                    break;\r\n                }\r\n            }\r\n            return cls\r\n        }\r\n\r\n        function cancelSearch() {\r\n            vm.searchItems = {};\r\n            vm.traceSteps.forEach(function (step) {\r\n                step.selected = false;\r\n            });\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function search() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function exportTrace(reportType) {\r\n            prepareSearch();\r\n            var params = {\r\n                reportType: reportType,\r\n                extraSearchObj: vm.searchItems\r\n            };\r\n\r\n            ReportService.getReportNumber(params).then(function (reportNumber) {\r\n                vm.loading = true;\r\n                if (reportType) {\r\n                    var url = 'api/report/traceSearch?reportNumber=' + reportNumber;\r\n                    console.log(url);\r\n                    ReportService.getNonHtmlReport(url);\r\n                    Util.toast('info', 'Please wait to receive data');\r\n                }\r\n            });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n        function openFlowModal(trace) {\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/trace/trace-flow/trace-flow.html',\r\n                controller: 'TraceFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return trace;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .controller('TraceDetailController', TraceDetailController);\r\n\r\n    /** @ngInject */\r\n    function TraceDetailController($log, $filter, host, TraceService, UserService, $stateParams, Util, Principal, $confirm) {\r\n        var vm = this;\r\n        vm.trace = {};\r\n        vm.processLog = [];\r\n        vm.comment = '';\r\n        vm.date = null;\r\n        vm.title = 'Directive List Controller';\r\n        vm.id = $stateParams.id;\r\n        vm.users = [];\r\n        vm.user = null;\r\n        vm.groupFinder = UserService.groupTitle;\r\n        vm.loading = true;\r\n        vm.isMine = false;\r\n        vm.operations = [\r\n            {id: 1, title: 'اعلام دریافت پاسخ مناسب از شعبه'},\r\n            {id: 2, title: 'اعلام عدم دریافت پاسخ مناسب از شعبه'},\r\n            {id: 3, title: 'دادن مهلت برای این نامه (بدون ثبت پیگیری جدید)'},\r\n            {id: 4, title: 'انتقال پیگیری به شخص دیگر'}\r\n        ];\r\n\r\n        vm.operation = vm.operations[0];\r\n\r\n        vm.getTraceById = getTraceById;\r\n        vm.traceCleared = traceCleared;\r\n        vm.traceFailed = traceFailed;\r\n        vm.tracePostPone = tracePostPone;\r\n        vm.traceTransfer = traceTransfer;\r\n        vm.getProcessLogs = getProcessLogs;\r\n        vm.addAttachment = addAttachment;\r\n        vm.cancelAddAttachment = cancelAddAttachment;\r\n        vm.deleteAttachment = deleteAttachment;\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.setDate = setDate;\r\n\r\n        activate();\r\n\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getTraceById();\r\n            getProcessLogs();\r\n        }\r\n\r\n        function getTraceById() {\r\n            return TraceService.getTrace(vm.id).then(function (data) {\r\n                vm.trace = data ? data : {};\r\n\r\n                Principal.identity().then(function (me) {\r\n                    vm.currentUser = me;\r\n                    vm.isMine = me.username === vm.trace.user.username;\r\n                    vm.trace.attachments.forEach(function (att) {\r\n                        // console.log(att.creatorLmsUser.username, vm.currentUser.username);\r\n                        att.canDelete = att.creatorLmsUser.username === vm.currentUser.username;\r\n                        att.url = host + 'fileManager/attachment/' + att.id + '/getContent/' + att.name + '.' + att.type;\r\n                    });\r\n                    vm.loading = false;\r\n                });\r\n\r\n                return vm.trace;\r\n            });\r\n        }\r\n\r\n        function getProcessLogs() {\r\n            TraceService.getProcessLogsTrace(vm.id).then(\r\n                function (data) {\r\n                    vm.processLog = data ? data : {};\r\n                    vm.processLog = vm.processLog.filter(function (pl) {\r\n                        console.log(\"pl.user !== null = \", pl.user !== null);\r\n                        return (pl.user !== null);\r\n                    });\r\n                });\r\n        }\r\n\r\n        function addAttachment() {\r\n            vm.loading = true;\r\n            if (vm.attachment) {\r\n                vm.description = vm.description || null;\r\n                //افزودن پارامترهای نام فایل و توضیح بصورت پارمز به درخواست برای ارسال به سرور\r\n                var params = {\r\n                    name: vm.attachment.attachment.name,\r\n                    description: vm.description\r\n                };\r\n\r\n                TraceService.addAttachmentToTrace(vm.trace.id, vm.attachment, params).then(\r\n                    function () {\r\n                        getTraceById();\r\n                        getProcessLogs();\r\n                        vm.attachment = {};\r\n                        vm.description = '';\r\n                        Util.toast('success');\r\n                    },\r\n                    function () {\r\n                        vm.loading = false;\r\n                    }\r\n                )\r\n            }\r\n        }\r\n\r\n        function cancelAddAttachment() {\r\n            vm.attachment = {};\r\n            vm.toggleAddAttachment = true;\r\n        }\r\n\r\n        function deleteAttachment(attachment) {\r\n            if (vm.currentUser.username !== attachment.creatorLmsUser.username)\r\n                return;\r\n            $confirm().then(function () {\r\n                vm.loading = true;\r\n                TraceService.deleteAttachmentFromTrace(vm.trace.id, attachment.id).then(function () {\r\n                    Util.toast('success');\r\n                    getTraceById();\r\n                    getProcessLogs();\r\n                }, function () {\r\n                    vm.loading = false;\r\n                });\r\n            })\r\n        }\r\n\r\n        ////////  actions\r\n\r\n        function traceCleared() {\r\n            if (vm.user || vm.date) {\r\n                Util.toast('warn', 'There is no need for new user or date to terminate the trace');\r\n                return;\r\n            }\r\n            if (vm.comment && vm.id) {\r\n                vm.loading = true;\r\n                TraceService.traceCleared(vm.id, vm.comment).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        getTraceById();\r\n                        getProcessLogs();\r\n                    }, errorCallBack);\r\n            }\r\n        }\r\n\r\n        function traceFailed() {\r\n            if (vm.user || vm.date) {\r\n                Util.toast('warn', 'There is no need for new user or date to terminate the trace');\r\n                return;\r\n            }\r\n            if (vm.comment && vm.id) {\r\n                vm.loading = true;\r\n                TraceService.traceFailed(vm.id, vm.comment).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        getTraceById();\r\n                        getProcessLogs();\r\n                    }, errorCallBack);\r\n            }\r\n        }\r\n\r\n        function tracePostPone() {\r\n            /*if (vm.user) {\r\n                Util.toast('warn', 'You can not postpone with a user');\r\n                return;\r\n            }*/\r\n            if (vm.comment && vm.id) {\r\n                var params = {\r\n                    newDate: vm.date ? $filter('sDate')(vm.date) : null\r\n                };\r\n                vm.loading = true;\r\n                vm.comment += \" (تعویق به تاریخ \" + $filter('pNumber')(vm.date) + \") \";\r\n                TraceService.tracePostPone(vm.id, vm.comment, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        getTraceById();\r\n                        getProcessLogs();\r\n                        vm.comment = '';\r\n                    }, errorCallBack);\r\n            }\r\n        }\r\n\r\n        function traceTransfer() {\r\n            /* if (vm.date) {\r\n                 Util.toast('warn', 'You can not transfer with a date');\r\n                 return;\r\n             }*/\r\n            if (vm.comment && vm.user && vm.id) {\r\n                var params = {\r\n                    username: vm.user ? vm.user.username : null\r\n                };\r\n                vm.loading = true;\r\n                vm.comment += \" (ارجاع پیگیری به \" + vm.user.name + \")\";\r\n                TraceService.traceTransfer(vm.id, vm.comment, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        getTraceById();\r\n                        getProcessLogs();\r\n                        vm.comment = '';\r\n                    }, errorCallBack);\r\n            }\r\n        }\r\n\r\n        function errorCallBack(response) {\r\n            var status = response.status;\r\n            vm.loading = false;\r\n            if (status === 401) {\r\n                Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n            } else\r\n                Util.toast('error', 'APP.MESSAGES.FAIL');\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n        function setDate(days) {\r\n            var tmpDate = new Date();\r\n            tmpDate.setDate(tmpDate.getDate() + days);\r\n            vm.date = $filter('jeDate')(tmpDate);\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.trace')\r\n        .controller('AddCommentController', AddCommentController);\r\n\r\n    /** @ngInject */\r\n    function AddCommentController($uibModalInstance, $filter, trace, action, TraceService, UserService, Util) {\r\n        var modalVm = this;\r\n\r\n        modalVm.title = ' add comment controller';\r\n        modalVm.trace = trace;\r\n        modalVm.action = action;\r\n        modalVm.users = [];\r\n        modalVm.user = null;\r\n        modalVm.comment = '';\r\n        modalVm.loading = false;\r\n        modalVm.groupFinder = UserService.groupTitle;\r\n\r\n        modalVm.refreshUsers = refreshUsers;\r\n        modalVm.submit = submit;\r\n        modalVm.setDate = setDate;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            console.log(modalVm.title);\r\n        }\r\n\r\n        function submit() {\r\n            if (modalVm.action === 'clear') {\r\n                traceCleared(modalVm.trace.id);\r\n            } else if (modalVm.action === 'fail') {\r\n                traceFailed(modalVm.trace.id);\r\n            } else if (modalVm.action === 'postpone') {\r\n                tracePostPone(modalVm.trace.id);\r\n            } else if (modalVm.action === 'transfer') {\r\n                traceTransfer(modalVm.trace.id);\r\n            }\r\n\r\n        }\r\n\r\n        function traceCleared(id) {\r\n            if (modalVm.comment) {\r\n                TraceService.traceCleared(id, modalVm.comment).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $uibModalInstance.close();\r\n                    }, errorCallBack);\r\n            } else {\r\n                Util.toast('error', \"Please fill all required fields\");\r\n            }\r\n        }\r\n\r\n        function traceFailed(id) {\r\n            if (modalVm.comment) {\r\n                TraceService.traceFailed(id, modalVm.comment).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $uibModalInstance.close();\r\n                    }, errorCallBack);\r\n            } else {\r\n                Util.toast('error', \"Please fill all required fields\");\r\n            }\r\n        }\r\n\r\n        function tracePostPone(id) {\r\n            if (modalVm.comment) {\r\n                var params = {\r\n                    newDate: modalVm.date\r\n                };\r\n                modalVm.comment += \" (تعویق به تاریخ \" + $filter('jDateFromString')(modalVm.date) + \") \";\r\n                TraceService.tracePostPone(id, modalVm.comment, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $uibModalInstance.close();\r\n                    }, errorCallBack);\r\n            } else {\r\n                Util.toast('error', \"Please fill all required fields\");\r\n            }\r\n        }\r\n\r\n        function traceTransfer(id) {\r\n            if (modalVm.user && modalVm.comment) {\r\n                var params = {\r\n                    username: modalVm.user.username\r\n                };\r\n                modalVm.comment += \" (ارجاع پیگیری به \" + modalVm.user.name + \")\";\r\n                TraceService.traceTransfer(id, modalVm.comment, params).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        $uibModalInstance.close();\r\n                    }, errorCallBack);\r\n            } else {\r\n                Util.toast('error', \"Please fill all required fields\");\r\n            }\r\n        }\r\n\r\n        function errorCallBack(response) {\r\n            var status = response.status;\r\n            if (status == 401) {\r\n                Util.toast('error', 'Authentication error');\r\n            }\r\n            else\r\n                Util.toast('error', 'Error');\r\n            // $uibModalInstance.close();\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                modalVm.users = data.content || [];\r\n                return modalVm.users;\r\n            }\r\n        }\r\n\r\n        function setDate(days) {\r\n            var tmpDate = new Date();\r\n            tmpDate.setDate(tmpDate.getDate() + days);\r\n            modalVm.date = $filter('sDate')($filter('jeDate')(tmpDate));\r\n        }\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('UpdateReportService', UpdateReportService);\r\n\r\n    /** @ngInject */\r\n    function UpdateReportService(RequestService) {\r\n        var baseReport = 'report';\r\n        return {\r\n            updateReport : updateReport,\r\n            getUpdateInfo : getUpdateInfo\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n        // تابع بروز رسانی گزارشات\r\n        function updateReport() {\r\n            var url = baseReport + '/updateMonitoringReport';\r\n            return RequestService(url).put();\r\n        }\r\n\r\n        //تابع دریافت اطلاعات آخرین بروزرسانی\r\n        function getUpdateInfo() {\r\n            var url = baseReport + '/MonitoringReportUpdateLogs/last';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n\r\n        $stateProvider\r\n            .state('root.update-report', {\r\n                controller: 'UpdateReportController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/update-report/update-report.html',\r\n                url: '/update-report'\r\n            })\r\n        ;\r\n\r\n        $urlRouterProvider.when('/update-report/{path:.*}', '/update-report');\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n    angular\r\n        .module('app')\r\n        .controller('UpdateReportController', UpdateReportController);\r\n\r\n    /** @ngInject */\r\n    function UpdateReportController(host, $filter, UpdateReportService, Util) {\r\n        var vm = this;\r\n\r\n        vm.updateReport=updateReport;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            getUpdateInfo();\r\n        }\r\n\r\n        function getUpdateInfo() {\r\n            UpdateReportService.getUpdateInfo().then(function (data) {\r\n                {\r\n                    vm.lastUpdate = data ? data : {};\r\n                    vm.loading = vm.lastUpdate.status == 'Processing';\r\n                }\r\n            });\r\n        }\r\n\r\n        function updateReport() {\r\n            vm.loading = true;\r\n            vm.lastUpdate.status=\"Processing\";\r\n            UpdateReportService.updateReport().then(function () {\r\n                {\r\n                    vm.loading = false;\r\n                    getUpdateInfo();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app')\r\n\t\t.factory('SizeService', SizeService);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction SizeService($document) {\r\n\t\t\r\n\t\treturn {\r\n\t\t\tgetContentWrapperSize: getContentWrapperSize,\r\n\t\t\tgetCriterionSize: getCriterionSize,\r\n\t\t\tgetBodySize: getBodySize\r\n\t\t};\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction getContentWrapperSize() {\r\n\t\t\tvar canvas = angular.element('.content-wrapper')[0];\r\n\t\t\tif (!canvas) return [0, 0];\r\n\t\t\t// var ctx = canvas.getContext(\"2d\");\r\n\t\t\t// console.log('getContentWrapperSize', canvas.clientHeight, canvas.clientWidth);\r\n\t\t\treturn [canvas.clientHeight, canvas.clientWidth];\r\n\t\t}\r\n\t\t\r\n\t\tfunction getBodySize() {\r\n\t\t\tvar canvas = angular.element('body')[0];\r\n\t\t\t// var ctx = canvas.getContext(\"2d\");\r\n\t\t\t// console.log('getBodySize', canvas.clientHeight, canvas.clientWidth);\r\n\t\t\treturn [canvas.clientHeight, canvas.clientWidth];\r\n\t\t}\r\n\t\t\r\n\t\tfunction getCriterionSize() {\r\n\t\t\tvar canvas = angular.element('.criterion-container')[0];\r\n\t\t\tif (!canvas) return [0, 0];\r\n\t\t\t// var ctx = canvas.getContext(\"2d\");\r\n\t\t\t// console.log('getCriterionSize', canvas.clientHeight, canvas.clientWidth);\r\n            return [canvas.clientHeight, canvas.clientWidth];\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('SampleService', SampleService);\r\n\r\n    /** @ngInject */\r\n    function SampleService(RequestService) {\r\n        var base = 'sample/';\r\n        var sample=RequestService(base);\r\n        return {\r\n            getAllSamples: sample.get,\r\n            getSampleById: sample.getById,\r\n            createSample: sample.post,\r\n            updateSample: sample.put,\r\n            deleteSample: sample.delete\r\n        };\r\n\r\n        ////////////////\r\n        \r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.sample', {\r\n                controller: 'ViewController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/sample/sample.html',\r\n                url: '/sample'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/sample/{path:.*}', '/sample');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('SampleController', SampleController);\r\n\r\n    /** @ngInject */\r\n    function SampleController($confirm, $log, NgTableParams, SampleService, Util) {\r\n        var vm = this;\r\n        vm.sample = {};\r\n        vm.samples = [];\r\n        vm.tempSamples = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllSamples\r\n        });\r\n        vm.toggleAddSample = true;\r\n        vm.toggleEdit = [];\r\n        vm.title = 'SampleListController';\r\n\r\n        vm.createSample = createSample;\r\n        vm.cancelAddSample = cancelAddSample;\r\n        vm.cancelEditSample = cancelEditSample;\r\n        vm.deleteSample = deleteSample;\r\n        vm.updateSample = updateSample;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function createSample() {\r\n            SampleService.createSample(vm.sample).then(successCallback);\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.tableParams.reload();\r\n            }\r\n        }\r\n\r\n        function cancelAddSample() {\r\n            vm.sample = null;\r\n            vm.toggleAddSample = !vm.toggleAddSample\r\n        }\r\n\r\n        function cancelEditSample(index) {\r\n            vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n            vm.samples[index] = angular.copy(vm.tempSamples[index]);\r\n        }\r\n\r\n        function deleteSample(sample, index) {\r\n            $confirm().then(function () {\r\n                if (sample) {\r\n                    SampleService.deleteSample(sample).then(successCallback);\r\n                }\r\n            });\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.samples.splice(index, 1);\r\n                vm.tempSamples = angular.copy(vm.samples);\r\n            }\r\n        }\r\n\r\n        function updateSample(item, index) {\r\n            $confirm().then(function () {\r\n                if (!Util.compareObjects(vm.samples[index], vm.tempSamples[index])) {\r\n                    var data={name:item.name};\r\n                    SampleService.updateSample(item.id,data).then(successCallback);\r\n                }\r\n            });\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.toggleEdit[index] = !vm.toggleEdit[index];\r\n                vm.tempSamples[index] = angular.copy(vm.samples[index]);\r\n            }\r\n\r\n        }\r\n\r\n        function getAllSamples(tParams) {\r\n            var params = {\r\n                sample: tParams.filter().sample ? tParams.filter().sample : null\r\n            };\r\n            return SampleService.getAllSamples(params).then(successCallback);\r\n            function successCallback(data) {\r\n                vm.samples = data ? data : [];\r\n                vm.tempSamples = angular.copy(vm.samples);\r\n                return vm.samples;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.roles', []);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.roles')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.roles', {\r\n                abstract: true,\r\n                template: '<div ui-view></div>',\r\n                url: '/roles'\r\n            })\r\n            .state('root.roles.list', {\r\n                controller: 'RolesListController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/roles/roles-list.html',\r\n                url: '/list'\r\n            })\r\n            .state('root.roles.details', {\r\n                controller: 'RoleDetailsController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/roles/role-details.html',\r\n                url: '/:role/details'\r\n            })\r\n\r\n        ;\r\n        $urlRouterProvider.when('/roles/list/{path:.*}', '/roles/list');\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.roles')\r\n        .controller('RolesListController', RolesListController);\r\n\r\n    /** @ngInject */\r\n    function RolesListController($confirm, $log, NgTableParams, UserService, Util) {\r\n        var vm = this;\r\n        vm.role = {};\r\n        vm.roles = [];\r\n        vm.tempRoles = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllRoles\r\n        });\r\n        vm.toggleAddRole = true;\r\n        vm.toggleEditRole = [];\r\n        vm.title = 'RolesListController';\r\n        vm.rolePattern = /_*[A-z\\d]*/;\r\n\r\n        vm.createRole = createRole;\r\n        vm.cancelAddRole = cancelAddRole;\r\n        vm.cancelEditRole = cancelEditRole;\r\n        vm.deleteRole = deleteRole;\r\n        vm.updateRole = updateRole;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function createRole() {\r\n            UserService.createRole(vm.role).then(successCallback);\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.toggleAddRole = !vm.toggleAddRole;\r\n                vm.tableParams.reload();\r\n            }\r\n        }\r\n\r\n        function cancelAddRole() {\r\n            vm.role.name = null;\r\n            vm.toggleAddRole = !vm.toggleAddRole\r\n        }\r\n\r\n        function cancelEditRole(index) {\r\n            vm.toggleEditRole[index] = !vm.toggleEditRole[index];\r\n            vm.roles[index] = angular.copy(vm.tempRoles[index]);\r\n        }\r\n\r\n        function deleteRole(role, index) {\r\n            $confirm().then(function () {\r\n                if (role) {\r\n                    UserService.deleteRole(role).then(successCallback);\r\n                }\r\n            });\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.roles.splice(index, 1);\r\n                vm.tempRoles = angular.copy(vm.roles);\r\n            }\r\n        }\r\n\r\n        function updateRole(item, index) {\r\n            var params = {\r\n                caption: item.caption\r\n            };\r\n            if (!Util.compareObjects(vm.roles[index], vm.tempRoles[index])) {\r\n                UserService.editCaptionOfRole(item.role, params).then(successCallback);\r\n            }\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.toggleEditRole[index] = !vm.toggleEditRole[index];\r\n                vm.tempRoles[index] = angular.copy(vm.roles[index]);\r\n            }\r\n\r\n        }\r\n\r\n        function getAllRoles(tParams) {\r\n            var params = {\r\n                role: tParams.filter().role ? tParams.filter().role : null\r\n            };\r\n            return UserService.getAllRoles(params).then(successCallback);\r\n            function successCallback(data) {\r\n                vm.roles = data ? data : [];\r\n                vm.tempRoles = angular.copy(vm.roles);\r\n                return vm.roles;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.roles')\r\n        .controller('RoleDetailsController', RoleDetailsController);\r\n\r\n    /** @ngInject */\r\n    function RoleDetailsController($confirm, $log, $q, $stateParams, NgTableParams, UserService, Util) {\r\n        var vm = this;\r\n        vm.data = {};\r\n        vm.allPermissions = [];\r\n        vm.permission = {};\r\n        vm.role = $stateParams.role;\r\n        vm.rolePermissions = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getRole\r\n        });\r\n        vm.permissions = [];\r\n        vm.toggleAddPermission = false;\r\n        vm.title = 'RoleDetailsController';\r\n\r\n        vm.assignPermissionToRole = assignPermissionToRole;\r\n        vm.assignPermissionsToRole = assignPermissionsToRole;\r\n        vm.cancelAddPermission = cancelAddPermission;\r\n        vm.deletePermissionFromRole = deletePermissionFromRole;\r\n        // vm.assignAllPermissionsToRole = assignAllPermissionsToRole;\r\n        vm.refreshPermissions = refreshPermissions;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title, vm.role);\r\n            getAllPermissions();\r\n        }\r\n\r\n        function assignPermissionToRole(permission, notif) {\r\n            permission = permission ? permission : vm.permission;\r\n            var params = {permissionId: permission.id};\r\n            return UserService.assignPermissionToRole(vm.role, params).then(function (value) {\r\n                console.log(params, ' added to ', vm.role);\r\n                if (notif)\r\n                    return successCallbackAssignPermission();\r\n            });\r\n        }\r\n\r\n        function successCallbackAssignPermission(notif) {\r\n            console.log('callback', notif);\r\n            if (notif) Util.toast('success');\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function assignPermissionsToRole() {\r\n            var promises = [];\r\n            vm.permissions.forEach(function (permission) {\r\n                promises.push(assignPermissionToRole(permission, false));\r\n            });\r\n            vm.permissions = [];\r\n            $q.all(promises).then(successCallbackAssignPermission);\r\n        }\r\n\r\n        /*DEPRECATED*/\r\n        function assignAllPermissionsToRole() {\r\n\r\n            return UserService.assignAllPermissions(vm.role).then(successCallback);\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.tableParams.reload();\r\n                vm.toggleAddPermission = !vm.toggleAddPermission;\r\n            }\r\n        }\r\n\r\n        function cancelAddPermission() {\r\n            vm.permission = null;\r\n            vm.toggleAddPermission = !vm.toggleAddPermission\r\n        }\r\n\r\n        function deletePermissionFromRole(id, index) {\r\n            var params = {permissionId: id};\r\n            if (id) {\r\n                $confirm().then(function () {\r\n                    UserService.deletePermissionFromRole(vm.role, params).then(successCallback);\r\n                });\r\n            }\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.rolePermissions.splice(index, 1);\r\n                vm.data.permissions = angular.copy(vm.rolePermissions);\r\n            }\r\n        }\r\n\r\n        function getAllPermissions() {\r\n            UserService.getAllPermissions().then(successCallback);\r\n            function successCallback(data) {\r\n                vm.allPermissions = data ? data.content : [];\r\n            }\r\n        }\r\n\r\n        function refreshPermissions(nameQuery) {\r\n            var data = {\r\n\t            caption: nameQuery\r\n            };\r\n            var params = {\r\n                page: 0,\r\n                size: 50,\r\n                sort: 'name,desc'\r\n            };\r\n            UserService.getPermissions(data, params).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.allPermissions = data ? data.content : [];\r\n            }\r\n        }\r\n\r\n        function getRole() {\r\n            if (vm.role) {\r\n                return UserService.getRole(vm.role).then(successCallback);\r\n            }\r\n            function successCallback(data) {\r\n                vm.data = data ? data : {};\r\n                vm.rolePermissions = angular.copy(vm.data.refinedPermissions);\r\n                return vm.rolePermissions;\r\n            }\r\n        }\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.report', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.report')\r\n        .factory('ReportService', ReportService);\r\n\r\n    /** @ngInject */\r\n    function ReportService(RequestService) {\r\n        var report = 'report';\r\n        return {\r\n            getReportNumber : getReportNumber,\r\n            getHtmlReport : getHtmlReport,\r\n            getNonHtmlReport : getNonHtmlReport\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function getReportNumber(data) {\r\n            var putUrl = report + '/getReportNumber';\r\n            return RequestService(putUrl).put(null, data, null);\r\n        }\r\n\r\n        function getHtmlReport(url) {\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getNonHtmlReport(url) {\r\n            window.open(url, '_blank');\r\n        }\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n\r\n    angular\r\n        .module('app.report')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n\r\n        $stateProvider\r\n            .state('root.report', {\r\n                controller: 'ReportController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/report/report.html',\r\n                url: '/report'\r\n            })\r\n        ;\r\n\r\n        $urlRouterProvider.when('/report/{path:.*}', '/report');\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n\r\n    angular\r\n        .module('app.report')\r\n        .controller('ReportController', ReportController);\r\n\r\n    /** @ngInject */\r\n    function ReportController(host, $window, $log, ReportService, ContractCodeService, CheckListService, ProvinceService,\r\n                              $filter, CreditSupplyResourceService, TraceService, IsicService) {\r\n        var vm = this;\r\n        vm.title = 'Report Controller';\r\n\r\n        vm.selectedReport = {};\r\n        vm.reportParams = {reportType: \"HTML\", codesIncluded: [], codesExcluded: [], lowAmount: 1000000000};\r\n        vm.reportTypes = [\"HTML\", \"EXCEL\"];\r\n        vm.reportLevels = [\"STAFF\", \"PROVINCE\", \"BRANCH\", \"ALL\"];\r\n        vm.htmlSrc = \"\";\r\n        vm.host = host;\r\n        vm.group = false;\r\n        vm.traceSteps = TraceService.getStepsSync.concat([{id: null, title: \"همه موارد\"}]);\r\n        var pNumber = $filter('pNumber');\r\n        vm.getReportStatus = getReportStatus;\r\n        vm.getBranchesByProvinceIds = getBranchesByProvinceIds;\r\n        vm.submit = submit;\r\n        var index = 0;\r\n        vm.selectedReports = [];\r\n        vm.searchItem = {};\r\n        vm.isicList = [];\r\n        vm.reportList = [\r\n            {\r\n                content: pNumber(++index) + '- ' + \"تعداد قرار داد های بازدید شده به تفکیک هر استان\",  //    MDONE\r\n                htmlReportApi: 'report/numberOfContractReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/numberOfContractReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت قرار داد های بازدید شده بر اساس منبع تامین اعتبار\",   //    MDONE\r\n                htmlReportApi: 'report/resourceTypeReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/resourceTypeReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت اخذ وثایق و تضمینات بر اساس مفاد مصوبه ابلاغی به تفکیک هر استان\",  //    MDONE\r\n                htmlReportApi: 'report/assuranceConflictReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/assuranceConflictReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"قرار داد های بازدید شده بر اساس وضعیت فعالیت به تفکیک هر استان\",  //  MDONE\r\n                htmlReportApi: 'report/contractActivenessAggByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractActivenessAggByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت قرار داد های بازدید شده بر اساس رکن اعتباری تصویب کننده به تفکیک هر استان\", // MDONE\r\n                htmlReportApi: 'report/contractDAPAggStatByProvince/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractDAPAggStatByProvince/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت قرار داد های بازدید شده بر اساس نوع قرار داد به تفکیک هر استان\", //  MDONE\r\n                htmlReportApi: 'report/contractPlanTypeAggByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractPlanTypeAggByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت قرار داد های بازدید شده بر اساس نوع عقد به تفکیک هر استان\", //  MDONE\r\n                htmlReportApi: 'report/contractTypeAggStatByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractTypeAggStatByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت مطابقت پیشرفت فیزیکی قرار داد های بازدید شده با مفاد مصوبات ابلاغی به تفکیک بخش ها و هر استان\",    //  MDONE\r\n                htmlReportApi: 'report/invoiceConflictReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/invoiceConflictReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"رعایت شرایط قبل از انعقاد قرارداد به تفکیک هر استان\",    //  MDONE\r\n                htmlReportApi: 'report/preCondRegardAggByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/preCondRegardAggByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت عملکرد شعبه عامل در خصوص اجرای مصوبه به تفکیک هر استان\",   //  MDONE\r\n                htmlReportApi: 'report/agentBranchPerformanceEvaluationReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/agentBranchPerformanceEvaluationReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"اقدامات ابلاغی به مدیریت استان ها جهت رفع نواقص و انحرافات (انحرافات مربوط به متقاضیان و تعاونی ها)\",    //  MDONE\r\n                htmlReportApi: 'report/applicantPerformanceEvaluationReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/applicantPerformanceEvaluationReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت دریافت سهم آورده متقاضی بر اساس مفاد مصوبات ابلاغی\",  //  MDONE\r\n                htmlReportApi: 'report/applicantSharedConflictPaymentReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/applicantSharedConflictPaymentReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت اخذ وثایق و تضمینات بر اساس مفاد مصوبه ابلاغی به تفکیک نوع وثیقه و هر استان\",  //  MDONE\r\n                htmlReportApi: 'report/assuranceConflictByTypeReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/assuranceConflictByTypeReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"تعداد قرار داد های دارای انحراف و فاقد هر گونه انحراف به تفکیک هر استان\",    //  MDONE\r\n                htmlReportApi: 'report/contractConflictsReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractConflictsReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" تعداد قرار داد های مشارکتی مصوب شده به تفکیک هر استان\", //  MDONE\r\n                htmlReportApi: 'report/contractCountApprovedHighAmountReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/contractCountApprovedHighAmountReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true,\r\n                    creditSupplyResourceText: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت مطابقت پیشرفت فیزیکی قرار داد های بازدید شده با مفاد مصوبات ابلاغی به تفکیک بخش های اقتصادی و هر استان\", //  MDONE\r\n                htmlReportApi: 'report/invoiceConflictByTypeReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/invoiceConflictByTypeReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت تطبیق موضوع فعالیت با مجوزهای اخذ شده و قرار داد مصوب\",\r\n                htmlReportApi: 'report/licenseConflictReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/licenseConflictReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت مطابقت رویه پرداخت تسهیلات توسط شعبه با مفاد مصوبات ابلاغی به تفکیک بخش‌های اقتصادی و هر استان\",\r\n                htmlReportApi: 'report/paymentConflictByTypeReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/paymentConflictByTypeReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت مطابقت رویه پرداخت تسهیلات توسط شعبه با مفاد مصوبات ابلاغی به تفکیک هر استان\",\r\n                htmlReportApi: 'report/paymentConflictReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/paymentConflictReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت قرار داد های بازدید شده بر اساس بخش های اقتصادی به تفکیک هر استان\",\r\n                htmlReportApi: 'report/wellFormatContractEconomicSectionAggByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/wellFormatContractEconomicSectionAggByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت عملکرد کارشناس اعتباری در بررسی و تنظیم مصوبه به تفکیک هر استان\", //  MDONE\r\n                htmlReportApi: 'report/approverPerformanceEvaluationReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/approverPerformanceEvaluationReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"وضعیت کارشناسان اعتباری در بررسی و تنظیم مصوبه\",\r\n                htmlReportApi: 'report/approverPerformanceEvaluationByDirExpertReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/approverPerformanceEvaluationByDirExpertReport/?reportNumber=',\r\n                filters: {\r\n                    province: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \" وضعیت قرار داد های بازدید شده بر اساس کارشناس بازدید کننده اداره نظارت در هر استان\",\r\n                htmlReportApi: 'report/monitoringByProvinceReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/monitoringByProvinceReport/?reportNumber=',\r\n                filters: {\r\n                    organizationLevel: true,\r\n\r\n                    province: true\r\n                },\r\n                index: index\r\n            },\r\n            {\r\n                content: pNumber(++index) + '- ' + \"نسبت قرارداد‌های مصوب شده به قراردادهای بازدید شده به تفکیک هر استان\",\r\n                htmlReportApi: 'report/approvedToMonitoredRateReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/approvedToMonitoredRateReport/?reportNumber=',\r\n                filters: {\r\n                    approvedToMonitoredRate:true,\r\n                    organizationLevel: true,\r\n\r\n                    codesIncluded: true,\r\n                    codesExcluded: true,\r\n                    creditSupplyResources: true,\r\n\r\n                    lowAmount: true,\r\n                    highAmount: true,\r\n                    creditSupplyResourceText: true\r\n                },\r\n                index: index\r\n            },\r\n            /*{\r\n                content: pNumber(++index) + '- ' + \" تعداد قرار داد های بالای 1.5 میلیارد ﷼ بازدید شده به تفکیک هر استان\",    //  MDONE\r\n                htmlReportApi: 'report/monitoringMoreThanSomeCountReport/?reportNumber=',\r\n                nonHtmlReportApi: 'api/report/monitoringMoreThanSomeCountReport/?reportNumber=',\r\n                hasContractType : true,\r\n                index: index\r\n            }*/\r\n        ];\r\n        vm.refreshCodes = refreshCodes;\r\n        vm.shiftSelectedReport = shiftSelectedReport;\r\n\r\n\r\n        activate();\r\n\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            console.log(\"vm.selectedReport = \", vm.selectedReport);\r\n\r\n            getList().then(function () {\r\n                var nonFunctionalReports = [\r\n\r\n                    /*{\r\n                        content: pNumber(++index) + '- ' + \"متوسط زمان صرف شده برای بازدیدها در هر مرحله از فرآیند نظارت \",\r\n                        htmlReportApi: 'report/getDaysSpentStepsReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getDaysSpentStepsReport/?reportNumber=',\r\n                        index: index\r\n\r\n                    },*/\r\n                    /*{\r\n                        content: pNumber(++index) + '- ' + \"متوسط زمان صرف شده برای بازدیدها در هر مرحله\",\r\n                        htmlReportApi: 'report/getAverageDaysSpentStepsPerProvinceReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getAverageDaysSpentStepsPerProvinceReport/?reportNumber=',\r\n                        index: index\r\n\r\n                    },*/\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \"مدت زمان صرف شده نظارت‌ها (روز)\",\r\n                        htmlReportApi: 'report/getDaysSpentReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getDaysSpentReport/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true,\r\n                            province: true\r\n                        },\r\n                        index: index\r\n\r\n                    },\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \"میانگین مدت زمان صرف شده نظارت‌ها به تفکیک هر استان (روز)\",\r\n                        htmlReportApi: 'report/getLengthReportAggregated/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getLengthReportAggregated/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true\r\n                        },\r\n                        index: index\r\n\r\n                    },\r\n                    /*{\r\n                        content: pNumber(++index) + '- ' + \"تعداد بازگشت های بازدیدها در سامانه نظارت در هر استان\",\r\n                        htmlReportApi: 'report/getAverageCountRejectPerStepsAndProvinceReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getAverageCountRejectPerStepsAndProvinceReport/?reportNumber=',\r\n                        index: index\r\n                    }\r\n                    ,{\r\n                        content: pNumber(++index) + '- ' + \"وضعیت تجمعی پرونده های در جریان\",\r\n                        htmlReportApi: 'report/currentStepsStatusByObserverReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/currentStepsStatusByObserverReport/?reportNumber=',\r\n                        noFromDate: true,\r\n                        noToDate: true,\r\n                        index: index\r\n\r\n                    },*/\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \" گزارش عمکردی کارشناسان\",\r\n                        htmlReportApi: 'report/getUsersPerformanceReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getUsersPerformanceReport/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true,\r\n                            province: true\r\n                        },\r\n                        index: index\r\n\r\n                    },\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \"گزارش عدم رفع انحرافات در پیگیری ها\",\r\n                        htmlReportApi: 'report/getMonitoringTraceReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getMonitoringTraceReport/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true,\r\n                            province: true,\r\n                            traceStatus: true\r\n                        },\r\n                        index: index\r\n\r\n                    },\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \" گزارش مبالغ تسهیلات و مبالغ پرداخت شده\",\r\n                        htmlReportApi: 'report/getAmountPaymentAndContractReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getAmountPaymentAndContractReport/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true,\r\n\r\n                            codesIncluded: true,\r\n                            codesExcluded: true,\r\n                            creditSupplyResources: true,\r\n\r\n                            lowAmount: true,\r\n                            highAmount: true\r\n                        },\r\n                        index: index\r\n                    },\r\n                    {\r\n                        content: pNumber(++index) + '- ' + \" گزارش تعداد و مبالغ طرح های بازدید شده\",\r\n                        htmlReportApi: 'report/getAmountAndCountPaymentAndContractReport/?reportNumber=',\r\n                        nonHtmlReportApi: 'api/report/getAmountAndCountPaymentAndContractReport/?reportNumber=',\r\n                        filters: {\r\n                            organizationLevel: true,\r\n\r\n                            codesIncluded: true,\r\n                            codesExcluded: true,\r\n                            creditSupplyResources: true,\r\n\r\n                            lowAmount: true,\r\n                            highAmount: true\r\n                        },\r\n                        index: index\r\n                    }\r\n                ];\r\n                vm.reportList = vm.reportList.concat(nonFunctionalReports);\r\n            });\r\n            var today = new Date();\r\n            today = today.setDate(today.getDate() + 1);\r\n            vm.reportParams.toConfirmDate = moment(today).format('YYYY-MM-DD');\r\n            vm.reportParams.toTraceDate = moment(today).format('YYYY-MM-DD');\r\n            getAllCreditSupplyResources();\r\n            getAllProvince();\r\n            getAllIsics();\r\n        }\r\n\r\n        function getList() {\r\n            return CheckListService.getAllCheckList().then(\r\n                function (data) {\r\n                    data.forEach(function (report) {\r\n                        report.content = pNumber(++index) + '- ' + 'گزارش چک لیست : ' + report.content; //    MDONE\r\n                        report.htmlReportApi = 'report/checkList/getReport/' + report.id + '/?reportNumber=';\r\n                        report.nonHtmlReportApi = 'api/report/checkList/getReport/' + report.id + '/?reportNumber=';\r\n                        report.index = index;\r\n                        report.filters = {\r\n                            organizationLevel: true,\r\n\r\n                            codesIncluded: true,\r\n                            codesExcluded: true,\r\n                            creditSupplyResources: true,\r\n\r\n                            lowAmount: true,\r\n                            highAmount: true\r\n                        };\r\n                        vm.reportList.push(report);\r\n                    });\r\n                }\r\n            );\r\n        }\r\n\r\n        function submit() {\r\n            if (vm.group) {\r\n                if (vm.selectedReports && vm.selectedReports.length)\r\n                    return getReports();\r\n                if (vm.reportsText)\r\n                    return getReportsByIndex(vm.reportsText);\r\n            }\r\n            return getReport(vm.selectedReport);\r\n        }\r\n\r\n        function getReport(report) {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            // console.log('vm.reportParams', vm.reportParams);\r\n            var params = {\r\n                contractType: vm.reportParams.contractType,\r\n                reportType: vm.reportParams.reportType,\r\n                organizationLevel: vm.reportParams.organizationLevel === \"ALL\" ? null : vm.reportParams.organizationLevel,\r\n                highAmount: vm.reportParams.highAmount,\r\n                lowAmount: vm.reportParams.lowAmount,\r\n                index: report.index,\r\n                includedCodes: vm.reportParams.codesIncluded && vm.reportParams.codesIncluded.length ? vm.reportParams.codesIncluded : null,\r\n                excludedCodes: vm.reportParams.codesExcluded && vm.reportParams.codesExcluded.length ? vm.reportParams.codesExcluded : null,\r\n                includedIsics: vm.reportParams.includedIsics && vm.reportParams.includedIsics.length ? vm.reportParams.includedIsics : null,\r\n                excludedIsics: vm.reportParams.excludedIsics && vm.reportParams.excludedIsics.length ? vm.reportParams.excludedIsics : null,\r\n                creditSupplyResourceIds: vm.reportParams.creditSupplyResources && vm.reportParams.creditSupplyResources.length ? vm.reportParams.creditSupplyResources : null,\r\n                creditSupplyResourceText: vm.reportParams.creditSupplyResourceText,\r\n                provinceIds: vm.reportParams.provinceIds && vm.reportParams.provinceIds.length ? vm.reportParams.provinceIds : null,\r\n                statusId: vm.reportParams.statusId,\r\n                fromTraceDate: vm.reportParams.fromTraceDate ? vm.reportParams.fromTraceDate : null,\r\n                toTraceDate: vm.reportParams.toTraceDate ? vm.reportParams.toTraceDate : null,\r\n\r\n                contractFromDate: vm.reportParams.contractFromDate ? vm.reportParams.contractFromDate : null,\r\n                contractToDate: vm.reportParams.contractToDate ? vm.reportParams.contractToDate : null,\r\n                monitoringFromDate: vm.reportParams.monitoringFromDate ? vm.reportParams.monitoringFromDate : null,\r\n                monitoringToDate: vm.reportParams.monitoringToDate ? vm.reportParams.monitoringToDate : null,\r\n\r\n\r\n\r\n            };\r\n            if (!report.noFromDate) params.fromConfirmDate = vm.reportParams.fromConfirmDate;\r\n            if (!report.noToDate) params.toConfirmDate = vm.reportParams.toConfirmDate;\r\n            console.log('params', params);\r\n            ReportService.getReportNumber(params).then(function (reportNumber) {\r\n                if (vm.reportParams.reportType !== \"HTML\") {\r\n                    var url = report.nonHtmlReportApi + reportNumber;\r\n                    console.log(url);\r\n                    ReportService.getNonHtmlReport(url);\r\n                    // .then(function () {\r\n                    //     vm.duration = Math.floor(startTime.diff(moment()) / 1000) + ' ثانیه';\r\n                    // });\r\n                    vm.loading = false;\r\n                } else if (vm.reportParams.reportType === 'HTML') {\r\n                    var element = document.getElementById(\"dynamicReport\");\r\n                    element.innerHTML = '<div class=\"row text-center\">در حال بارگذاری ...</div>';\r\n                    var url = report.htmlReportApi + reportNumber;\r\n                    console.log('first request', startTime.diff(moment()));\r\n                    ReportService.getHtmlReport(url).then(function (data) {\r\n\r\n                        data = data.replace(/SansSerif/g, 'Vazir');\r\n                        element.innerHTML = data;\r\n                        vm.currentReport = data;\r\n                        console.log('second request', startTime.diff(moment()));\r\n                        vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                        vm.loading = false;\r\n                        return data;\r\n                    }, function (reason) {\r\n                        element.innerHTML = '<div class=\"row text-center\">گزارش مورد نظر موجود نیست!</div>';\r\n                        vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                        vm.loading = false;\r\n                    });\r\n                }\r\n                $window.sessionStorage.setItem(vm.selectedReport.content, 'true');\r\n            });\r\n        }\r\n\r\n        function getReports() {\r\n            console.log('get reports')\r\n            vm.reportParams.reportType = 'EXCEL';\r\n            vm.selectedReports.forEach(function (report) {\r\n                getReport(report);\r\n            })\r\n        }\r\n\r\n        function getReportsByIndex(input) {\r\n            var indices = [];\r\n            console.log('getReportsByIndex', input);\r\n            if (input.match(/\\d+-\\d+/)) {\r\n                console.log('match', input.match(/\\d+/g));\r\n                var boundaries = input.match(/\\d+/g).map(function (index) {\r\n                    return parseInt(index, 10)\r\n                });\r\n                for (var i = boundaries[0]; i <= boundaries[1]; i++) {\r\n                    indices.push(i);\r\n                }\r\n            } else if (input.match(/[\\d+,]*\\d+/)) {\r\n                console.log('match', input.match(/\\d+/g));\r\n                indices = input.match(/\\d+/g).map(function (index) {\r\n                    return parseInt(index, 10)\r\n                });\r\n\r\n            } else {\r\n                Util.toast('error', 'Not valid input');\r\n                return;\r\n            }\r\n            return getReportByIndices(indices);\r\n        }\r\n\r\n        function getReportByIndices(indices) {\r\n            console.log('indices', indices);\r\n            var reports = vm.reportList.filter(function (report) {\r\n                return indices.indexOf(report.index) > 0;\r\n            });\r\n            console.log('reports', reports);\r\n            vm.selectedReports = reports;\r\n            getReports();\r\n        }\r\n\r\n        function getReportStatus(report) {\r\n            return $window.sessionStorage.getItem(report.content);\r\n        }\r\n\r\n        function refreshCodes(q) {\r\n            return ContractCodeService.searchAll({query: q}).then(function (data) {\r\n                vm.codes = data || [];\r\n                return vm.codes;\r\n            });\r\n        }\r\n\r\n        function getAllCreditSupplyResources() {\r\n            return CreditSupplyResourceService.getAllCreditSupplyResources().then(function (data) {\r\n                vm.resources = data || [];\r\n                return vm.resources;\r\n            });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvince() {\r\n            if (!vm.searchItem.provinceId)\r\n                vm.branches = [];\r\n            return ProvinceService.getAllBranchesOfProvince(vm.searchItem.provinceId).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvinceIds() {\r\n            vm.searchItem.branchIds = [];\r\n            if (!vm.searchItem.provinceIds || vm.searchItem.provinceIds.length === 0) {\r\n                vm.branches = [];\r\n                return vm.branches;\r\n            }\r\n\r\n            return ProvinceService.getAllBranchesByProvinceList(vm.searchItem.provinceIds).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getAllIsics() {\r\n            IsicService.getAllIsics().then(function (data) {\r\n                vm.isicList = data || [];\r\n                console.log('vm.isicList = ', vm.isicList);\r\n            });\r\n        }\r\n\r\n        function shiftSelectedReport(s) {\r\n            var len = vm.reportList.length;\r\n            if (!vm.selectedReport || !vm.selectedReport.index) {\r\n                vm.selectedReport = s === 1 ? vm.reportList[0] : vm.reportList[len - 1];\r\n                return;\r\n            }\r\n            s += vm.selectedReport.index;\r\n            s--;\r\n            s %= len;\r\n            vm.selectedReport = vm.reportList[s];\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.province', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.province')\r\n        .factory('ProvinceService', ProvinceService);\r\n\r\n    /** @ngInject */\r\n    function ProvinceService(RequestService) {\r\n        var base = 'baseInfo/province/';\r\n        var cityUrl = 'baseInfo/city/';\r\n        var branchUrl = 'baseInfo/branch/';\r\n        var province = RequestService(base);\r\n        var city = RequestService(cityUrl);\r\n        return {\r\n            getAllProvinces: province.get,\r\n            getProvince: province.getById,\r\n            createProvince: province.post,\r\n            updateProvince: province.put,\r\n            deleteProvince: province.delete,\r\n            getAllCities: city.get,\r\n            getCity: city.getById,\r\n            createCity: city.post,\r\n            updateCity: city.put,\r\n            deleteCity: city.delete,\r\n\t\r\n\t        getAllCitiesOfProvince: getAllCitiesOfProvince,\r\n\t        getAllBranchesOfProvince: getAllBranchesOfProvince,\r\n            getAllBranchesByProvinceList:getAllBranchesByProvinceList\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function getAllCitiesOfProvince(id) {\r\n            var url = base + id + '/getAllCities/';\r\n            return RequestService(url).get();\r\n        }\r\n\t\r\n\t    function getAllBranchesOfProvince(id) {\r\n\t\t    var url = base + id + '/getAllBranches/';\r\n\t\t    return RequestService(url).get();\r\n\t    }\r\n\r\n\t    function getAllBranchesByProvinceList(provinceIds) {\r\n            var url = branchUrl + 'getByProvince/list/';\r\n            return RequestService(url).put(null,provinceIds, null );\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.province')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.province-list', {\r\n                controller: 'ProvinceListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/province/province-list.html',\r\n                url: '/province-list'\r\n            })\r\n            .state('root.province-cities', {\r\n                controller: 'ProvinceCitiesController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/province/province-cities.html',\r\n                url: '/province-cities?id'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/province/{path:.*}', '/province');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.province')\r\n        .controller('ProvinceListController', ProvinceListController);\r\n\r\n    /** @ngInject */\r\n    function ProvinceListController($confirm, $log, NgTableParams, ProvinceService, Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.provinces = [];\r\n        vm.province = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllProvinces\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        vm.newItem = {};\r\n        activate();\r\n        vm.create = createProvince;\r\n        vm.delete = deleteProvince;\r\n        vm.update = updateProvince;\r\n        vm.cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllProvinces(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return ProvinceService.getAllProvinces(params).then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createProvince() {\r\n            ProvinceService.createProvince(vm.province).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                cancelAdd();\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteProvince(id) {\r\n            ProvinceService.deleteProvince(id).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function updateProvince(item) {\r\n\r\n            ProvinceService.updateProvince(item.id, item).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.provice = {};\r\n        }\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.province')\r\n        .controller('ProvinceCitiesController', ProvinceCitiesController);\r\n\r\n    /** @ngInject */\r\n    function ProvinceCitiesController($confirm, $log, Util, NgTableParams, ProvinceService, $stateParams) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.cities = [];\r\n        vm.city = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllCitiesOfProvince\r\n        });\r\n        vm.id = $stateParams.id;\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n\r\n        activate();\r\n\r\n        vm.create = createCity;\r\n        vm.delete = deleteCity;\r\n        vm.update = updateCity;\r\n        vm.cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getProvinceById(vm.id);\r\n        }\r\n\r\n        function getAllCitiesOfProvince() {\r\n            return ProvinceService.getAllCitiesOfProvince(vm.id).then(\r\n                function (data) {\r\n                    vm.cities = data ? data : [];\r\n                    return vm.cities;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createCity() {\r\n            vm.city.province = vm.province;\r\n            ProvinceService.createCity(vm.city).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteCity(id) {\r\n            ProvinceService.deleteCity(id).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function updateCity(item) {\r\n\r\n            ProvinceService.updateCity(item.id, item).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function getProvinceById(id) {\r\n            ProvinceService.getProvince(id).then(\r\n                function (data) {\r\n                    vm.province = data ? data : {};\r\n                }\r\n            );\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.city.name = '';\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.plan-type', []);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.plan-type')\r\n        .factory('PlanTypeService', PlanTypeService);\r\n\r\n    /** @ngInject */\r\n    function PlanTypeService(RequestService) {\r\n        var base = 'baseInfo/planType/';\r\n        var ES=RequestService(base);\r\n        return {\r\n            getAllPlanTypes: ES.get,\r\n            getPlanType: ES.getById,\r\n            // createPlanType: ES.post,\r\n            updatePlanType: ES.put,\r\n            // deletePlanType: ES.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.plan-type')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.plan-type', {\r\n                controller: 'PlanTypeController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/plan-type/plan-type.html',\r\n                url: '/plan-type'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/plan-type/{path:.*}', '/plan-type');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('PlanTypeController', PlanTypeController);\r\n\r\n    /** @ngInject */\r\n    function PlanTypeController($confirm, $log, NgTableParams, PlanTypeService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.planTypes = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllPlanTypes\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.update = updatePlanType;\r\n        vm.cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllPlanTypes(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return PlanTypeService.getAllPlanTypes(params).then(\r\n                function (data) {\r\n                    vm.planTypes = data ? data : [];\r\n                    return vm.planTypes;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function updatePlanType(item) {\r\n\r\n            PlanTypeService.updatePlanType(item.id, item).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.permissions', []);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.permissions')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.permissions', {\r\n                abstract: true,\r\n                template: '<div ui-view></div>',\r\n                url: '/permissions'\r\n            })\r\n            .state('root.permissions.list', {\r\n                controller: 'PermissionsListController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/permissions/permissions-list.html',\r\n                url: '/list'\r\n            })\r\n\r\n        ;\r\n        $urlRouterProvider.when('/permission/list{path:.*}', '/permission/list');\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.permissions')\r\n        .controller('PermissionsListController', PermissionsListController);\r\n\r\n    /** @ngInject */\r\n    function PermissionsListController($log, NgTableParams, UserService, Util) {\r\n        var vm = this;\r\n        vm.permission = {};\r\n        vm.permissions = [];\r\n        vm.tempPermissions = [];\r\n        vm.toggleEditPermission = [];\r\n        vm.title = 'PermissionsController';\r\n        vm.validStates = [\r\n            {value: true, title: 'فعال'},\r\n            {value: false, title: 'غیرفعال'},\r\n            {value: null, title: 'همه'}\r\n        ];\r\n\t    vm.searchItem = {\r\n\t\t    valid: true\r\n\t    };\r\n\r\n        vm.cancelEditPermission = cancelEditPermission;\r\n        vm.updatePermission = updatePermission;\r\n        vm.keyPressed = keyPressed;\r\n\t    vm.search = search;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            vm.tableParams = new NgTableParams({}, {\r\n                getData: getAllPermissions\r\n            });\r\n        }\r\n\r\n        function cancelEditPermission(index) {\r\n            vm.toggleEditPermission[index] = !vm.toggleEditPermission[index];\r\n            vm.permissions[index] = angular.copy(vm.tempPermissions[index]);\r\n        }\r\n\t\r\n\t    function search() {\r\n            vm.tableParams.page(0);\r\n\t\t    vm.tableParams.reload();\r\n\t    }\r\n\r\n        function updatePermission(item, index, editNext) {\r\n            var params = {\r\n                caption: item.caption\r\n            };\r\n\r\n            if (!Util.compareObjects(vm.permissions[index], vm.tempPermissions[index])) {\r\n                UserService.editCaptionOfPermission(item.id, params).then(successCallback);\r\n            } else if (editNext) {\r\n                vm.toggleEditPermission[index] = false;\r\n                vm.toggleEditPermission[index + 1] = true;\r\n            }\r\n\r\n            function successCallback() {\r\n                Util.toast('success');\r\n                vm.toggleEditPermission[index] = !vm.toggleEditPermission[index];\r\n                if (editNext) {\r\n                    vm.toggleEditPermission[index + 1] = true;\r\n                }\r\n                vm.tempPermissions[index] = angular.copy(vm.permissions[index]);\r\n            }\r\n        }\r\n\r\n        function getAllPermissions(tParams) {\r\n            var params = {\r\n                size: tParams.count(),\r\n\t            page: tParams.page() - 1\r\n            };\r\n            vm.size = tParams.count();\r\n            vm.page = tParams.page() - 1;\r\n\t        return UserService.getPermissions(vm.searchItem, params).then(successCallback);\r\n            function successCallback(data) {\r\n                vm.permissions = data ? data.content : [];\r\n                vm.tempPermissions = angular.copy(vm.permissions);\r\n                vm.tableParams.total(data.totalElements);\r\n                vm.allRecordsCount = data.totalElements;\r\n                return vm.permissions;\r\n            }\r\n        }\r\n\r\n        function keyPressed(event,item,i) {\r\n            if(event.key==='Enter')\r\n                updatePermission(item, i, true);\r\n            if (event.key === 'Tab' && event.shiftKey && i > 0) {\r\n                vm.toggleEditPermission[i] = false;\r\n                vm.toggleEditPermission[i - 1] = true;\r\n            } else if (event.key === 'Tab' && !event.shiftKey) {\r\n                vm.toggleEditPermission[i] = false;\r\n                vm.toggleEditPermission[i + 1] = true;\r\n            }\r\n        }\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .factory('WorkflowService', MonitoringService);\r\n\r\n    /** @ngInject */\r\n    function MonitoringService(RequestService) {\r\n        var base = 'workflowprocess/';\r\n        var workflowProcess = RequestService(base);\r\n        return {\r\n            getProcessType: getProcessType,\r\n            getOwner: getOwner,\r\n            getActuator: getActuator\r\n\r\n\r\n        };\r\n\r\n        ////////////////\r\n        function getProcessType(id) {\r\n            var url = base + id;\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getOwner(id) {\r\n            var url = base + 'owner/' + id;\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getActuator(id) {\r\n            var url = base + 'actuator/' + id;\r\n            return RequestService(url).get();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .factory('MonitoringService', MonitoringService);\r\n\r\n    /** @ngInject */\r\n    function MonitoringService(RequestService) {\r\n        var base = 'monitoring/';\r\n        var monitoring = RequestService(base);\r\n        return {\r\n            getAllMonitorings: monitoring.get,\r\n            getMonitoringById: monitoring.getById,\r\n            createMonitoring: monitoring.post,\r\n            searchMonitoring: monitoring.post,\r\n            updateMonitoring: monitoring.put,\r\n            deleteMonitoring: deleteMonitoring,\r\n            deleteMonitoringByAdmin: deleteMonitoringByAdmin,\r\n            cartableMonitoring: RequestService(base + 'cartable').post,\r\n            myMonitoringsMission: RequestService(base + 'myMissions').get,\r\n            myMonitoringsRejectedMission: RequestService(base + 'myRejectedMissions').get,\r\n\r\n            UpdateUserMonitoringInMonitoring: UpdateUserMonitoringInMonitoring,\r\n            AddCheckListToMonitoring: addCheckListToMonitoring,\r\n            AddInvoiceToMonitoring: AddInvoiceToMonitoring,\r\n            updateInvoiceInMonitoring: updateInvoiceInMonitoring,\r\n            BatchInsertInvoiceToMonitoring: BatchInsertInvoiceToMonitoring,\r\n            AddPaymentToMonitoring: AddPaymentToMonitoring,\r\n            updatePaymentInMonitoring: updatePaymentInMonitoring,\r\n            deleteInvoiceFromMonitoring: deleteInvoiceFromMonitoring,\r\n            deletePaymentFromMonitoring: deletePaymentFromMonitoring,\r\n            deleteAttachmentFromMonitoring: deleteAttachmentFromMonitoring,\r\n            unsetLicense: unsetLicense,\r\n            updateLicenseInMonitoring: updateLicenseInMonitoring,\r\n            setLicense: setLicense,\r\n            addMonitoringLicenseItem: addMonitoringLicenseItem,\r\n            updateMonitoringLicenseItem: updateMonitoringLicenseItem,\r\n            deleteMonitoringLicenseItem: deleteMonitoringLicenseItem,\r\n            addFileAttachmentToMonitoring: addFileAttachmentToMonitoring,\r\n            AddAssuranceToMonitoring: AddAssuranceToMonitoring,\r\n            updateAssuranceInMonitoring: updateAssuranceInMonitoring,\r\n            deleteAssuranceFromMonitoring: deleteAssuranceFromMonitoring,\r\n            SetFinalCommentInMonitoring: setFinalCommentInMonitoring,\r\n            getAllMonitoringContracts: getAllMonitoringContracts,\r\n            getInvestmentCostMonitoring: getInvestmentCostMonitoring,\r\n            SetConditionInMonitoring: setConditionInMonitoring,\r\n            deleteConditionFromMonitoring: deleteConditionFromMonitoring,\r\n            AddConflictToMonitoring: AddConflictToMonitoring,\r\n            updateCalculateConflictInMonitoring: updateCalculateConflictInMonitoring,\r\n            deleteConflictFromMonitoring: deleteConflictFromMonitoring,\r\n            updateConflictInMonitoring: updateConflictInMonitoring,\r\n            setLocationInMonitoring: setLocationInMonitoring,\r\n\r\n            startMonitoring: startMonitoring,\r\n            firstExpertAcceptMonitoring: firstExpertAcceptMonitoring,\r\n            secondExpertAcceptMonitoring: secondExpertAcceptMonitoring,\r\n            acceptMonitoring: acceptMonitoring,\r\n            branchExpertAccept: branchExpertAccept,\r\n\r\n            rejectMonitoring: rejectMonitoring,\r\n            cancelFinalized: cancelFinalized,\r\n            finalHeadRejectMonitoring: finalHeadRejectMonitoring,\r\n            getAllowedActionsOnMonitoring: getAllowedActionsOnMonitoring,\r\n            getProcessLogs: getProcessLogs,\r\n            getLastProcessLog: getLastProcessLog,\r\n            getStepsSync: getSteps,\r\n            getTransitionsSync: getTransitions,\r\n            getNextStepSync: getNextStep,\r\n            getPreviousStepSync: getPreviousStep,\r\n            getDelaySync: getDelay,\r\n            getActivenessStatusesSync: getActivenessStatuses,\r\n\r\n            setPerformanceEvaluations: setPerformanceEvaluations,\r\n            addUserMonitoring: addUserMonitoring,\r\n            deleteUserMonitoring: deleteUserMonitoring,\r\n\r\n            getExpertByProvince: getExpertByProvince,\r\n            getCoExpertByProvince: getCoExpertByProvince,\r\n            getMonitoringByProvinceAndExpert: getMonitoringByProvinceAndExpert,\r\n            getMonitoringByProvinceAndExperts: getMonitoringByProvinceAndExperts,\r\n\r\n            searchDirective: searchDirective,\r\n            isMyMonitoring: isMyMonitoring,\r\n            changeTeamHead: changeTeamHead,\r\n\r\n            // convert debit\r\n            addConvertDebit: addConvertDebit,\r\n            updateConvertDebit: updateConvertDebit,\r\n            setDoneCommitmentConvertLicense:setDoneCommitmentConvertLicense,\r\n            updateDoneCommitmentConvertLicense:updateDoneCommitmentConvertLicense\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function isMyMonitoring(monitoringId) {\r\n            var url = base + monitoringId + \"/isMyMonitoring\";\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getMonitoringByProvinceAndExperts(provinceId, params) {\r\n            var url = base + \"getMonitoringByProvinceAndExperts/\" + provinceId;\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function changeTeamHead(monitoringId, username) {\r\n            var url = base + monitoringId + \"/changeTeamHead\";\r\n            var params = {\r\n                username: username\r\n            };\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function getMonitoringByProvinceAndExpert(provinceId, params) {\r\n            var url = base + \"getMonitoringByProvinceAndExpert/\" + provinceId;\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function getCoExpertByProvince(expertUsername, params) {\r\n            var url = base + \"getCoExpertByProvince/\" + expertUsername;\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function getExpertByProvince(provinceId) {\r\n            var url = base + \"getExpertByProvince/\" + provinceId;\r\n            return RequestService(url).put(null, null, null);\r\n        }\r\n\r\n        function addUserMonitoring(id, params) {\r\n            var url = base + id + '/addExpert';\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function deleteUserMonitoring(id, params) {\r\n            var url = base + id + '/deleteExpert';\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function setPerformanceEvaluations(id, params) {\r\n            var url = base + id + '/setPerformanceEvaluations';\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function getProcessLogs(id) {\r\n            var url = base + id + '/processLogs';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getLastProcessLog(id) {\r\n            var url = base + id + '/processLogLast';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getAllowedActionsOnMonitoring(id) {\r\n            var url = base + id + '/getAllowedActions';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function startMonitoring(id, data) {\r\n            var url = base + id + '/start';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function secondExpertAcceptMonitoring(id, data) {\r\n            var url = base + id + '/secondExpertAccept';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function rejectMonitoring(id, data) {\r\n            var url = base + id + '/reject';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function cancelFinalized(id, data) {\r\n            var url = base + id + '/adminCancel';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n\r\n        function firstExpertAcceptMonitoring(id, data) {\r\n            var url = base + id + '/firstExpertAccept';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function finalHeadRejectMonitoring(id, data) {\r\n            var url = base + id + '/finalHeadReject';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function branchExpertAccept(id, data) {\r\n            var url = base + id + '/branchExpertAccept';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function acceptMonitoring(id, data) {\r\n            var url = base + id + '/accept';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function setLocationInMonitoring(id, params) {\r\n            var url = base + id + '/setLocation';\r\n            return RequestService(url).put(null, {}, params);\r\n        }\r\n\r\n        function updateConflictInMonitoring(id, data, params) {\r\n            var url = base + id + '/updateConflict';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function deleteConflictFromMonitoring(id, params) {\r\n            var url = base + id + '/deleteConflict';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function updateCalculateConflictInMonitoring(id) {\r\n            var url = base + id + '/calculateConflict';\r\n            return RequestService(url).put();\r\n        }\r\n\r\n        function AddConflictToMonitoring(id, data) {\r\n            var url = base + id + '/addConflict';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function AddInvoiceToMonitoring(id, data) {\r\n            var url = base + id + '/addInvoice';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updateInvoiceInMonitoring(id, data, InvoiceId) {\r\n            var url = base + id + '/updateInvoice';\r\n            var params = {monitoringInvoiceId: InvoiceId};\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function BatchInsertInvoiceToMonitoring(id, data, params) {\r\n            var url = base + id + '/batchInsertInvoice';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function AddPaymentToMonitoring(id, data) {\r\n            var url = base + id + '/addPayment';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updatePaymentInMonitoring(id, data, params) {\r\n            var url = base + id + '/updatePayment';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function AddAssuranceToMonitoring(id, data) {\r\n            var url = base + id + '/addAssurance';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updateAssuranceInMonitoring(id, data, params) {\r\n            var url = base + id + '/updateAssurance';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function setLicense(id, monitoringLicense, params) {\r\n            var url = base + id + '/setLicense';\r\n            return RequestService(url).put(null, monitoringLicense, params);\r\n        }\r\n\r\n        function deleteInvoiceFromMonitoring(id, params) {\r\n            var url = base + id + '/deleteInvoice';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function deletePaymentFromMonitoring(id, params) {\r\n            var url = base + id + '/deletePayment';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function deleteConditionFromMonitoring(id, params) {\r\n            var url = base + id + '/deleteCondition';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function deleteAssuranceFromMonitoring(id, params) {\r\n            var url = base + id + '/deleteAssurance';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function deleteAttachmentFromMonitoring(id, params) {\r\n            var url = base + id + '/deleteAttachment';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n\r\n        function unsetLicense(id, params) {\r\n            var url = base + id + '/unsetLicense';\r\n            return RequestService(url).put(null, null, params);\r\n        }\r\n\r\n        function updateLicenseInMonitoring(id, data, params) {\r\n            var url = base + id + '/updateLicense';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function addFileAttachmentToMonitoring(id, attachment, params) {\r\n            var url = base + id + '/addAttachment';\r\n            return RequestService(url).multipartPost(attachment, params);\r\n        }\r\n\r\n        function UpdateUserMonitoringInMonitoring(id, userMonitoring, params) {\r\n            var url = base + id + '/updateUserMonitoring';\r\n            return RequestService(url).put(null, userMonitoring, params);\r\n        }\r\n\r\n        function addCheckListToMonitoring(id, monitoring) {\r\n            var url = base + id + '/addCheckList';\r\n            return RequestService(url).post(monitoring);\r\n        }\r\n\r\n        function setFinalCommentInMonitoring(id, comment) {\r\n            var url = base + id + '/setFinalExpertComment';\r\n            return RequestService(url).put(null, comment);\r\n        }\r\n\r\n        function getAllMonitoringContracts(id) {\r\n            var url = base + id + '/getContracts';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function getInvestmentCostMonitoring(id) {\r\n            var url = base + id + '/getInvestmentCost/';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function setConditionInMonitoring(id, monitoringConditions) {\r\n            var url = base + id + '/setCondition';\r\n            return RequestService(url).post(monitoringConditions);\r\n        }\r\n\r\n        function deleteMonitoring(id) {\r\n            var url = base + id + '/delete';\r\n            return RequestService(url).put();\r\n        }\r\n\r\n        function deleteMonitoringByAdmin(id) {\r\n            var url = base + id + '/deleteByAdmin';\r\n            return RequestService(url).put();\r\n        }\r\n\r\n        function searchDirective(dirNumber) {\r\n            var url = base + 'searchDirective';\r\n            return RequestService(url).get({dirNumber: dirNumber});\r\n        }\r\n\r\n        function addMonitoringLicenseItem(monitoringId, item) {\r\n            var url = base + monitoringId + '/addLicenseItem';\r\n\r\n            return RequestService(url).post(item);\r\n        }\r\n\r\n        function updateMonitoringLicenseItem(monitoringId, item) {\r\n            var url = base + monitoringId + '/updateLicenseItem';\r\n            var params = {\r\n                itemId: item.id\r\n            };\r\n            return RequestService(url).put(null, item, params);\r\n        }\r\n\r\n        function deleteMonitoringLicenseItem(id, itemId) {\r\n            var url = base + id + '/deleteLicenseItem';\r\n            var params = {\r\n                itemId: itemId\r\n            };\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function addConvertDebit(id, data) {\r\n            var url = base + id + '/commitmentConvertLicense/add';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updateConvertDebit(id, data) {\r\n            var url = base + '/commitmentConvertLicense/'+ id +'/update';\r\n            return RequestService(url).put(null, data);\r\n        }\r\n\r\n        function setDoneCommitmentConvertLicense(id, params,data) {\r\n            var url = base + 'commitmentConvertLicense/'+ id +'/setDone';\r\n            return RequestService(url).multipartPost(data,params );\r\n        }\r\n\r\n        function updateDoneCommitmentConvertLicense(id, params,data) {\r\n            var url = base + 'commitmentConvertLicense/'+ id +'/updateDone';\r\n            return RequestService(url).multipartPost(data,params );\r\n        }\r\n\r\n\r\n        function getSteps() {\r\n            return [\r\n                {id: 0, name: \"created\", title: \"ایجاد شده\", staff: true, province: true, next: [2, 2], previous: []},\r\n                {id: 1, name: \"deleted\", title: \"حذف شده\", staff: true, province: true, next: [], previous: []},\r\n                {\r\n                    id: 2,\r\n                    name: \"started\",\r\n                    title: \"کارشناس اول - در حال تکمیل\",\r\n                    staff: true,\r\n                    province: true,\r\n                    next: [3, 3],\r\n                    previous: 0\r\n                },\r\n                {\r\n                    id: 3,\r\n                    name: \"calculated\",\r\n                    title: \"کارشناس اول - محاسبه شده\",\r\n                    staff: true,\r\n                    province: true,\r\n                    next: [4, 4],\r\n                    previous: 0\r\n                },\r\n                {\r\n                    id: 4,\r\n                    name: \"firstExpertAccepted\",\r\n                    title: \"کارشناس دوم - در حال بررسی\",\r\n                    staff: true,\r\n                    province: true,\r\n                    next: [6, 5],\r\n                    previous: 0\r\n                },\r\n                {\r\n                    id: 5,\r\n                    name: \"provinceAcceptingWaited\",\r\n                    title: \"معاون اعتباری حقوقی - در حال بررسی\",\r\n                    staff: false,\r\n                    province: true,\r\n                    next: [null, 7],\r\n                    previous: 4\r\n                },\r\n                {\r\n                    id: 6,\r\n                    name: \"teamHeadAcceptingWaited\",\r\n                    title: \"سرگروه بخش - در حال بررسی\",\r\n                    staff: true,\r\n                    province: false,\r\n                    next: [8, null],\r\n                    previous: 4\r\n                },\r\n                {id: 7, name: \"provinceAccepted\", title: \"تایید شده در استان\", staff: false, province: true},\r\n                {\r\n                    id: 8,\r\n                    name: \"teamHeadAccepted\",\r\n                    title: \"رئیس اداره - در حال بررسی\",\r\n                    staff: true,\r\n                    province: false,\r\n                    next: [9, null],\r\n                    previous: 6\r\n                },\r\n                {id: 9, name: \"finalHeadAccepted\", title: \"تایید شده در ستاد\", staff: true, province: false},\r\n                {\r\n                    id: 10,\r\n                    name: \"branchAccepted\",\r\n                    title: \"تایید شده در شعبه\",\r\n                    staff: false,\r\n                    province: false,\r\n                    branch: true\r\n                }\r\n            ];\r\n        }\r\n\r\n        function getNextStep(currentStepId, level, numberOfExperts) {\r\n\r\n            if (level === 'BRANCH' && currentStepId === 3)\r\n                return getSteps()[11];\r\n            if (numberOfExperts === 1 && currentStepId === 3)\r\n                return getNextStep(4, level);\r\n            var iLevel = level === 'STAFF' ? 0 : 1;\r\n            var currentStep = getSteps()[currentStepId];\r\n            if (!currentStep || !currentStep.next || !currentStep.next[iLevel])\r\n                return {title: \"\"};\r\n            return getSteps()[currentStep.next[iLevel]];\r\n        }\r\n\r\n        function getPreviousStep(currentStepId, numberOfExperts) {\r\n            if (numberOfExperts === 1 && (currentStepId === 5 || currentStepId === 6))\r\n                return getSteps()[2];\r\n            var currentStep = getSteps()[currentStepId];\r\n            if (!currentStep || !currentStep.previous)\r\n                return {title: \"\"};\r\n            return getSteps()[currentStep.previous];\r\n        }\r\n\r\n        function getDelay(monitoring) {\r\n            var res = {};\r\n            var duration = moment.duration((moment()).diff(moment(monitoring.lastTransitionDate))).asDays();\r\n            res.title = duration ? Math.ceil(duration) + ' روز' : 'امروز';\r\n            res.class = monitoring.currentStep.finalized || !duration || duration < 2 ? '' :\r\n                duration < 4 ? 'b-warning-2' :\r\n                    duration < 6 ? 'b-warning-3' :\r\n                        duration < 8 ? 'b-warning-4' : 'b-warning-5';\r\n            return res;\r\n        }\r\n\r\n        function getActivenessStatuses() {\r\n            return [\r\n                {value: \"ACTIVE\", caption: \"فعال\"},\r\n                {value: \"SEMI_ACTIVE\", caption: \"نیمه‌فعال\"},\r\n                {value: \"INACTIVE\", caption: \"غیرفعال\"},\r\n                {value: \"UNDERWAY\", caption: \"طرح در دست اجرا\"}\r\n            ]\r\n        }\r\n\r\n        function getTransitions() {\r\n            return [\r\n                {id: 0, value: \"start\", name: \"start\", caption: \"آغاز توسط کارشناس اول\"},\r\n                {id: 1, value: \"delete\", name: \"delete\", caption: \"حذف\"},\r\n                {id: 2, value: \"editing\", name: \"editing\", caption: \"ویرایش\"},\r\n                {\r\n                    id: 3,\r\n                    value: \"reject\",\r\n                    name: \"firstExpertRejectBeforeCalculating\",\r\n                    caption: \"بازگشت توسط کارشناس اول پیش از محاسبه مغایرت\"\r\n                },\r\n                {id: 4, value: \"calculating\", name: \"calculating\", caption: \"محاسبه مغایرت\"},\r\n                {id: 5, value: \"editing\", name: \"editingAfterCalculate\", caption: \"ویرایش پس از محاسبه مغایرت\"},\r\n                {id: 6, value: \"calculating\", name: \"conflictEditing\", caption: \"محاسبه مغایرت\"},\r\n                {id: 7, value: \"firstExpertAccept\", name: \"firstExpertAccept\", caption: \"تائید توسط کارشناس اول\"},\r\n                {id: 8, value: \"reject\", name: \"firstExpertReject\", caption: \"بازگشت توسط کارشناس اول\"},\r\n                {\r\n                    id: 9,\r\n                    value: \"finalExpertAcceptForProvince\",\r\n                    name: \"secondExpertAcceptForProvince\",\r\n                    caption: \"تائید کارشناس دوم در استان و ارسال به مدیر مربوطه\"\r\n                },\r\n                {\r\n                    id: 10,\r\n                    value: \"finalExpertAcceptForTeamHead\",\r\n                    name: \"secondExpertAcceptForTeamHead\",\r\n                    caption: \"تائید کارشناس دوم در ستاد و ارسال به سرگروه\"\r\n                },\r\n                {id: 11, value: \"reject\", name: \"secondExpertReject\", caption: \"بازگشت توسط کارشناس دوم\"},\r\n                {id: 12, value: \"accept\", name: \"teamHeadAccept\", caption: \"تائید سرگروه در ستاد\"},\r\n                {id: 13, value: \"reject\", name: \"teamHeadReject\", caption: \"بازگشت توسط سرگروه\"},\r\n                {id: 14, value: \"accept\", name: \"finalHeadAccept\", caption: \"تائید توسط رئیس اداره\"},\r\n                {id: 15, value: \"finalHeadReject\", name: \"finalHeadReject\", caption: \"بازگشت توسط رئیس اداره\"},\r\n                {id: 16, value: \"accept\", name: \"provinceAccept\", caption: \"تائید توسط مدیر استان\"},\r\n                {id: 17, value: \"reject\", name: \"provinceReject\", caption: \"بازگشت توسط مدیر استان\"},\r\n                {\r\n                    id: 18,\r\n                    value: \"finalExpertAcceptForProvince\",\r\n                    name: \"finalExpertAcceptForProvince\",\r\n                    caption: \"تائيد توسط کارشناس در استان\"\r\n                },\r\n                {\r\n                    id: 19,\r\n                    value: \"finalExpertAcceptForTeamHead\",\r\n                    name: \"finalExpertAcceptForTeamHead\",\r\n                    caption: \"تائيد توسط کارشناس اول و ارسال به سرگروه\"\r\n                },\r\n                {id: 20, value: \"editingInUserMonitoring\", name: \"editingInUserMonitoring\", caption: \"ویرایش\"},\r\n                {id: 21, value: \"branchExpertAccept\", name: \"branchExpertAccept\", caption: \"تائيد در شعبه\"},\r\n                {id: 22, value: \"adminCancelFinalizedHead\", name: \"adminCancelFinalizedHead\", caption: \"لغو توسط مدیر\"},\r\n                {\r\n                    id: 23,\r\n                    value: \"adminCancelFinalizedProvince\",\r\n                    name: \"adminCancelFinalizedProvince\",\r\n                    caption: \"لغو توسط مدیر\"\r\n                },\r\n                {\r\n                    id: 24,\r\n                    value: \"adminCancelFinalizedBranch\",\r\n                    name: \"adminCancelFinalizedBranch\",\r\n                    caption: \"لغو توسط مدیر\"\r\n                },\r\n                {id: 25, value: \"deleteByAdmin\", name: \"deleteByAdmin\", caption: \"حذف توسط مدیر\"}\r\n\r\n            ];\r\n        }\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.monitoring', {\r\n                controller: 'MonitoringController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoring.html',\r\n\t            resolve: {\r\n\t\t            me: function (Principal) {\r\n\t\t\t            return Principal.identity();\r\n\t\t            }\r\n\t            },\r\n                url: '/monitoring/{monitoringId}'\r\n            })\r\n\t        .state('monitoring-print', {\r\n\t\t        controller: 'MonitoringPrintController',\r\n\t\t        controllerAs: 'vm',\r\n\t\t        templateUrl: 'app/components/monitoring/monitoring.print.html',\r\n\t\t        resolve: {},\r\n\t\t        url: '/monitoring-print/{monitoringId}'\r\n\t        })\r\n            .state('root.monitoring-list', {\r\n                controller: 'MonitoringListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoring-list.html',\r\n\t            url: '/monitoring-list/?contractId?contractNumber'\r\n            })\r\n            .state('root.monitoring-cartable', {\r\n                controller: 'MonitoringCartableController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoring-list.html',\r\n\t            url: '/monitoring-cartable?steps'\r\n            })\r\n            .state('root.monitoring-mission', {\r\n                controller: 'MonitoringMissionController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoring-list.html',\r\n                url: '/monitoring-mission'\r\n            })\r\n            .state('root.monitoring-mission-announcement', {\r\n                controller: 'MissionAnnouncementController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/missionAnnouncement/mission-announcement.html',\r\n                url: '/monitoring-mission-announcement'\r\n            })\r\n            .state('root.monitoring.monitoring-details', {\r\n                controller: 'MonitoringDetailsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoring-details/monitoring-details.html',\r\n                url: '/details'\r\n            })\r\n            .state('root.monitoring.flowView', {\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n\t            url: '/flowView',\r\n\t            resolve: {\r\n\t\t            '$uibModalInstance': function () {\r\n\t\t\t            return null;\r\n\t\t            }\r\n\t            }\r\n            })\r\n            .state('root.monitoring.userMonitorings', {\r\n                controller: 'UserMonitoringsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/userMonitorings/userMonitorings.html',\r\n                url: '/userMonitorings'\r\n            })\r\n            .state('root.monitoring.attachments', {\r\n                controller: 'MonitoringAttachmentsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/attachments/attachments.html',\r\n\t            resolve: {\r\n\t\t            '$uibModalInstance': function () {\r\n\t\t\t            return null;\r\n\t\t            },\r\n\t\t            'monitoringId': function () {\r\n\t\t\t            return null;\r\n\t\t            }\r\n\t            },\r\n                url: '/attachments'\r\n            })\r\n            .state('root.monitoring.invoice', {\r\n                controller: 'MonitoringInvoiceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/invoice/invoice-list.html',\r\n                url: '/invoice-list'\r\n            })\r\n            .state('root.monitoring.payments', {\r\n                controller: 'MonitoringPaymentsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/payments/payments-list.html',\r\n                url: '/payments'\r\n            })\r\n            .state('root.monitoring.assurance', {\r\n                controller: 'MonitoringAssuranceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/assurance/assurance.html',\r\n                url: '/assurance'\r\n            })\r\n            .state('root.monitoring.contract', {\r\n                controller: 'MonitoringContractController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/contract/contract.html',\r\n                url: '/contract'\r\n            })\r\n            .state('root.monitoring.trace', {\r\n                controller: 'MonitoringTraceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/trace/trace.html',\r\n                url: '/trace?step'\r\n            })\r\n            .state('root.monitoring.checkList', {\r\n                controller: 'MonitoringCheckListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/checkList/monitoring-checkList.html',\r\n                url: '/checkList'\r\n            })\r\n            .state('root.monitoring.preConditions', {\r\n                controller: 'MonitoringPreConditionsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/preConditions/preConditions.html',\r\n                url: '/preConditions'\r\n            })\r\n            .state('root.monitoring.progress', {\r\n                controller: 'MonitoringProgressController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/progress/progress.html',\r\n                url: '/progress'\r\n            })\r\n            .state('root.monitoring.license', {\r\n                controller: 'MonitoringLicenseController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/license/license-list.html',\r\n                url: '/license'\r\n            })\r\n            .state('root.monitoring.conflict', {\r\n                controller: 'MonitoringConflictController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/conflict/conflict-list.html',\r\n                url: '/conflict'\r\n            })\r\n            .state('root.monitoring.comment', {\r\n                controller: 'MonitoringCommentController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/comment/comment.html',\r\n                url: '/comment'\r\n            })\r\n            .state('root.monitoring.lat-long', {\r\n                controller: 'MonitoringLatLongController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/lat-long/lat-long.html',\r\n                url: '/lat-long'\r\n            })\r\n            .state('root.convert-debit', {\r\n                controller: 'ConvertDebitController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/monitoring/convert-debit/convert-debit.html',\r\n                url: '/convert-debit'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/?contractId/{path:.*}', '/monitoring-list');\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/10/17.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t\t.module('app.monitoring')\r\n\t\t.controller('MonitoringPrintController', MonitoringPrintController);\r\n\r\n\t/** @ngInject */\r\n    function MonitoringPrintController($state, $log, $stateParams, $timeout, Util, MonitoringService, CheckListService, ConflictService, $filter, host) {\r\n\r\n\t\tvar vm = this;\r\n\t\tvm.monitoring = {};\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\tvar waitCount = 0;\r\n\t\tvm.maxCols = 10;\r\n\t\tvm.today = new Date();\r\n        document.title = 'Monitoring_' + vm.monitoringId + \"_\" + moment(vm.today).format('jYY-jM-jD');\r\n\t\tvm.getSignUrl = getSignUrl;\r\n        vm.progress = progress;\r\n\t\tvm.monitoringLoading = true;\r\n\t\tvm.searchMonitoringLoading = true;\r\n\t\tvm.getInvestmentCostMonitoringLoading = true;\r\n\t\tvm.searchMonitoringLatLongLoading = true;\r\n\t\tvm.getLastMonitoringProcessLogsLoading = true;\r\n\r\n\t\tvm.getDirLicenseConflictsLoading = true;\r\n\t\tvm.getInvoiceConflictLoading = true;\r\n\t\tvm.getPaymentConflictLoading = true;\r\n\t\tvm.getAssuranceConflictLoading = true;\r\n\r\n\t\tvm.loading = vm.monitoringLoading || vm.searchMonitoringLoading || vm.getInvestmentCostMonitoringLoading ||\r\n\t\t\tvm.searchMonitoringLatLongLoading || vm.getDirLicenseConflictsLoading || vm.getInvoiceConflictLoading ||\r\n\t\t\tvm.getPaymentConflictLoading || vm.getAssuranceConflictLoading || vm.getLastMonitoringProcessLogsLoading;\r\n\r\n\r\n        ////////////////\r\n\r\n        activate();\r\n\r\n\r\n        function activate() {\r\n\t\t\t$log.debug('monitoring print module activated;');\r\n\t\t\tgetMonitoring();\r\n\t\t\tgetLastMonitoringProcessLogs();\r\n\t\t}\r\n\r\n        function getMonitoring() {\r\n\r\n            return MonitoringService.getMonitoringById(vm.monitoringId).then(successCallBack, errorCallBack);\r\n\r\n            function successCallBack(data) {\r\n\t\t\t\tvm.monitoring = data ? data : {};\r\n\r\n                getDirContracts();\r\n\t\t\t\tgetAllMonitoringContracts();\r\n\r\n                if (vm.monitoring.directive.dirNumber) {\r\n\t\t\t\t\thandlePreConditions();\r\n\t\t\t\t}\r\n\r\n                vm.monitoringLicenses = data ? data.monitoringLicenses : [];\r\n\t\t\t\tgetDirLicenseConflicts();\r\n\t\t\t\tgetDirLicenses();\r\n\r\n                handleInvoices(data);\r\n\r\n                handlePayments(data);\r\n\r\n                getInvestmentCostMonitoring();\r\n\r\n                handleAssurances(data);\r\n\r\n                vm.monitoring.latitude = vm.monitoring.latitude || 0;\r\n\t\t\t\tvm.monitoring.longitude = vm.monitoring.longitude || 0;\r\n\t\t\t\tgetAllRelativeMonitorings();\r\n\r\n                vm.agentBranchPerformance = vm.monitoring.agentBranchPerformanceEvaluation;\r\n\t\t\t\tvm.approverPerformance = vm.monitoring.approverPerformanceEvaluation;\r\n\t\t\t\tvm.applicantPerformance = vm.monitoring.applicantPerformanceEvaluation;\r\n\t\t\t\tgetAllCheckList();\r\n\r\n                vm.conflicts = data ? data.monitoringConflicts : [];\r\n\r\n                vm.monitoringLoading = false;\r\n\t\t\t\treturn vm.monitoring;\r\n\t\t\t}\r\n\r\n            function errorCallBack(error) {\r\n\r\n            }\r\n\t\t}\r\n\r\n        function getDirContracts() {\r\n\t\t\tvm.sumDirContractTotalAmount = 0;\r\n\t\t\tvm.sumDirInterestAmount = 0;\r\n\t\t\tvm.sumDirInterestAndOriginAmount = 0;\r\n\t\t\tvar directiveId = vm.monitoring.directive.dirNumber;\r\n\t\t\tvm.dirContracts = vm.monitoring.dirContracts;\r\n\t\t\tvm.dirContracts.forEach(function (dirContract) {\r\n\t\t\t\tvm.sumDirContractTotalAmount += dirContract.totalAmount;\r\n\t\t\t\tvm.sumDirInterestAmount += dirContract.interestAmount;\r\n\t\t\t});\r\n\t\t\twaitCount++;\r\n\t\t\treturn vm.dirContracts;\r\n\t\t}\r\n\r\n        function getAllMonitoringContracts() {\r\n\t\t\tif (!vm.monitoring.directive.dirNumber) {\r\n\t\t\t\twaitCount++;\r\n\t\t\t\treturn successCallback([vm.monitoring.contract]);\r\n\t\t\t}\r\n\r\n            var body = {\r\n\t\t\t\tdirectiveNumber: vm.monitoring.directive.dirNumber.toString(),\r\n\t\t\t\tstepIds: [7, 9, 10]\r\n\t\t\t};\r\n\t\t\tvar params = {\r\n\t\t\t\tpage: 0,\r\n\t\t\t\tsize: 1000\r\n\t\t\t};\r\n\t\t\treturn MonitoringService.searchMonitoring(body, params).then(function (data) {\r\n\t\t\t\tvar contracts = [];\r\n\t\t\t\tif (data && data.content)\r\n\t\t\t\t\tdata.content.forEach(function (value) {\r\n\t\t\t\t\t\tif (Util.indexOf(contracts, value.contract.id, 'id') < 0)\r\n\t\t\t\t\t\t\tcontracts.push(value.contract)\r\n\t\t\t\t\t});\r\n\t\t\t\tif (Util.indexOf(contracts, vm.monitoring.contract.id, 'id') < 0)\r\n\t\t\t\t\tcontracts.push(vm.monitoring.contract);\r\n\t\t\t\tvm.searchMonitoringLoading = false;\r\n\t\t\t\treturn successCallback(contracts);\r\n\t\t\t});\r\n\r\n            function successCallback(data) {\r\n\t\t\t\tconsole.log('getAllMonitoringContracts', data);\r\n\t\t\t\tvm.contracts = data ? data : [];\r\n\t\t\t\t// console.log(data);\r\n\t\t\t\tvm.tempContracts = angular.copy(vm.contracts);\r\n\t\t\t\tvm.sumContractTotalAmount = 0;\r\n\t\t\t\tvm.sumInterestAmount = 0;\r\n\t\t\t\tvm.sumRemainingInCurrent = 0;\r\n\t\t\t\tvm.sumRemainingInNonCurrent = 0;\r\n\t\t\t\tvm.contracts.forEach(function (contract) {\r\n\t\t\t\t\tcontract.remainingInCurrent = contract.remainingInCurrent ? contract.remainingInCurrent : 0;\r\n\t\t\t\t\tcontract.remainingInNonCurrent = contract.remainingInNonCurrent ? contract.remainingInNonCurrent : 0;\r\n\r\n                    vm.sumRemainingInCurrent += contract.remainingInCurrent;\r\n\t\t\t\t\tvm.sumRemainingInNonCurrent += contract.remainingInNonCurrent;\r\n\t\t\t\t\tvm.sumContractTotalAmount += contract.totalAmount;\r\n\t\t\t\t\tvm.sumInterestAmount += contract.totalAmount * contract.interestRate / 100;\r\n\t\t\t\t\tvm.sumInterestAndOriginAmount += contract.totalAmount + (contract.totalAmount * contract.interestRate / 100);\r\n\t\t\t\t});\r\n\t\t\t\twaitCount++;\r\n\t\t\t\treturn vm.contracts;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        function handlePreConditions() {\r\n\t\t\tvm.directive = vm.monitoring.directive;\r\n\t\t\tvm.monitoringPreConditions = vm.monitoring.dirConditions;\r\n\t\t\tvm.monitoring.monitoringConditions.forEach(function (monitoringCondition) {\r\n\t\t\t\tvm.monitoringPreConditions.forEach(function (monitoringPreCondition) {\r\n\t\t\t\t\tif (monitoringCondition.dirCondition.id === monitoringPreCondition.id) {\r\n\t\t\t\t\t\tmonitoringPreCondition.reply = monitoringCondition.reply;\r\n\t\t\t\t\t\tmonitoringPreCondition.originalId = monitoringCondition.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tvm.preConditions = [];\r\n\t\t\tvm.monitoringPreConditions.forEach(function (monitoringPreCondition) {\r\n\t\t\t\tvar preCondition = {\r\n\t\t\t\t\tdirCondition: monitoringPreCondition,\r\n\t\t\t\t\tmonitoring: {id: vm.monitoringId},\r\n\t\t\t\t\tid: monitoringPreCondition.originalId,\r\n\t\t\t\t\treply: monitoringPreCondition.reply\r\n\t\t\t\t};\r\n\t\t\t\tvm.preConditions.push(preCondition);\r\n\t\t\t});\r\n\t\t\twaitCount++;\r\n\t\t\tconsole.log(vm.preConditions);\r\n\t\t}\r\n\r\n        function getDirLicenseConflicts() {\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\r\n            ConflictService.getDirLicenseConflicts(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.licenseConflicts = data ? data : [];\r\n\t\t\t\t\t// console.log(\"vm.licenseConflicts = \", vm.licenseConflicts);\r\n\t\t\t\t\tvm.monitoringLicenses.forEach(function (monitoringLicense) {\r\n\t\t\t\t\t\tvar hasFound = false;\r\n\t\t\t\t\t\tvm.licenseConflicts.forEach(function (conflict) {\r\n\t\t\t\t\t\t\tif (monitoringLicense.dirLicense && conflict.id === monitoringLicense.dirLicense.id) {\r\n\t\t\t\t\t\t\t\tmonitoringLicense.hasConflict = conflict.conflict;\r\n\t\t\t\t\t\t\t\thasFound = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!hasFound) monitoringLicense.hasConflict = '';\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.getDirLicenseConflictsLoading = false;\r\n\t\t\t\t\twaitCount++;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function getDirLicenses() {\r\n\t\t\tvm.dirLicenses = vm.monitoring.dirLicenses;\r\n\t\t\tvm.dirLicenses.forEach(function (dirLicense) {\r\n\t\t\t\tvar found = false;\r\n\t\t\t\tvm.monitoringLicenses.forEach(function (monitoringLicense) {\r\n\t\t\t\t\tif (monitoringLicense.dirLicense && monitoringLicense.dirLicense.id === dirLicense.id) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!found) {\r\n\t\t\t\t\tvar dumMonitoringLicense = {\r\n\t\t\t\t\t\tmonitoring: vm.monitoring,\r\n\t\t\t\t\t\tdirLicense: dirLicense,\r\n\t\t\t\t\t\tcomment: \"\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvm.monitoringLicenses.push(dumMonitoringLicense);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\twaitCount++;\r\n\t\t\treturn vm.monitoringLicenses;\r\n\t\t}\r\n\r\n        function handleInvoices(data) {\r\n\t\t\tvm.invoices = data ? data.monitoringInvoices : [];\r\n\t\t\tvm.sumPrice = 0;\r\n\t\t\tvm.sumInvoiceBasedCount = 0;\r\n\t\t\tvm.sumMonitoringBasedCount = 0;\r\n\t\t\tvm.invoices.forEach(function (invoice) {\r\n\t\t\t\tvm.sumPrice += invoice.price;\r\n\t\t\t\tvm.sumInvoiceBasedCount += invoice.invoiceBasedCount;\r\n\t\t\t\tvm.sumMonitoringBasedCount += invoice.monitoringBasedCount;\r\n\t\t\t});\r\n\t\t\tvm.dirPaymentPerParts = vm.monitoring.dirPayments;\r\n\t\t\tgetAllInvoiceConflict();\r\n\t\t\tvm.invoices.forEach(function (invoice) {\r\n\t\t\t\tinvoice.key = invoice.investmentAction.id;\r\n\t\t\t});\r\n\t\t\tvar orderedArray = $filter('orderBy')(vm.invoices, 'key', false);\r\n\t\t\tvm.invoices = [];\r\n\t\t\tvm.invoices = angular.copy(orderedArray);\r\n\t\t\tvm.invoices = $filter('orderBy')(vm.invoices, 'key', false);\r\n\t\t\t// console.log(vm.invoices);\r\n\t\t\twaitCount++;\r\n\t\t\treturn vm.invoices;\r\n\t\t}\r\n\r\n        function getAllInvoiceConflict() {\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\t\t\treturn ConflictService.getInvoiceConflict(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.invoiceConflicts = data ? data : [];\r\n\t\t\t\t\tvm.dirPaymentPerParts.forEach(function (dirPaymentPart) {\r\n\t\t\t\t\t\tvar notExist = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.invoiceConflicts.length; i++) {\r\n\t\t\t\t\t\t\tif (vm.invoiceConflicts[i].investmentAction.id === dirPaymentPart.investmentAction.id)\r\n\t\t\t\t\t\t\t\tnotExist = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (notExist) {\r\n\t\t\t\t\t\t\tvm.invoiceConflicts.push({\r\n\t\t\t\t\t\t\t\tchequeCount: 0,\r\n\t\t\t\t\t\t\t\tdirectiveBased: dirPaymentPart.bankShareAmount + dirPaymentPart.applicantShareAmount,\r\n\t\t\t\t\t\t\t\tinvestmentAction: dirPaymentPart.investmentAction,\r\n\t\t\t\t\t\t\t\tmonitoringBased: 0,\r\n\t\t\t\t\t\t\t\tinvoiceBased: 0\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.sumDirectiveBased = 0;\r\n\t\t\t\t\tvm.sumInvoiceBased = 0;\r\n\t\t\t\t\tvm.sumMonitoringBased = 0;\r\n\t\t\t\t\tvm.invoiceConflicts.forEach(function (conflict) {\r\n\r\n                        vm.sumDirectiveBased += conflict.directiveBased;\r\n\t\t\t\t\t\tvm.sumInvoiceBased += conflict.invoiceBased;\r\n\t\t\t\t\t\tvm.sumMonitoringBased += conflict.monitoringBased;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log('vm.invoiceConflicts', vm.invoiceConflicts);\r\n\t\t\t\t\twaitCount++;\r\n\t\t\t\t\tvm.getInvoiceConflictLoading = false;\r\n\t\t\t\t\treturn vm.invoiceConflicts;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function handlePayments(data) {\r\n\t\t\tvm.payments = data ? data.monitoringPayments : [];\r\n\t\t\tvm.sumBankSharedChequeAmount = 0;\r\n\t\t\tvm.sumApplicantSharedChequeAmount = 0;\r\n\t\t\tvm.payments.forEach(function (payment) {\r\n\t\t\t\tvm.sumBankSharedChequeAmount += payment.bankSharedChequeAmount;\r\n\t\t\t\tvm.sumApplicantSharedChequeAmount += payment.applicantSharedChequeAmount;\r\n\t\t\t});\r\n\t\t\tvm.sumTotalAmount = vm.sumBankSharedChequeAmount + vm.sumApplicantSharedChequeAmount;\r\n\r\n            vm.dirPaymentPerParts = vm.monitoring.dirPayments;\r\n\t\t\tgetAllPaymentConflict();\r\n\r\n            vm.payments.forEach(function (payment) {\r\n\t\t\t\tpayment.key = payment.investmentAction.id;\r\n\t\t\t});\r\n\t\t\tvar paymentsOrderedArray = $filter('orderBy')(vm.payments, 'key', false);\r\n\t\t\tvm.payments = $filter('orderBy')(vm.payments, 'key', false);\r\n\t\t\t// console.log(\" vm.payments\" , vm.payments);\r\n\t\t\twaitCount++;\r\n\t\t\treturn vm.payments;\r\n\t\t}\r\n\r\n        function getAllPaymentConflict() {\r\n\t\t\tvm.bankQouta = [];\r\n\t\t\tvm.applicantQouta = [];\r\n\t\t\tvm.countQouta = [];\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\t\t\treturn ConflictService.getPaymentConflict(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.paymentConflicts = data ? data : [];\r\n\t\t\t\t\tvm.dirPaymentPerParts.forEach(function (dirPaymentPart) {\r\n\t\t\t\t\t\tvar notExist = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.paymentConflicts.length; i++) {\r\n\t\t\t\t\t\t\tif (vm.paymentConflicts[i].investmentAction.id === dirPaymentPart.investmentAction.id)\r\n\t\t\t\t\t\t\t\tnotExist = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (notExist) {\r\n\t\t\t\t\t\t\tvm.paymentConflicts.push({\r\n\t\t\t\t\t\t\t\tchequeCount: 0,\r\n\t\t\t\t\t\t\t\tdirectiveBasedBankShared: dirPaymentPart.bankShareAmount,\r\n\t\t\t\t\t\t\t\tdirectiveBasedApplicantShared: dirPaymentPart.applicantShareAmount,\r\n\t\t\t\t\t\t\t\tinvestmentAction: dirPaymentPart.investmentAction,\r\n\t\t\t\t\t\t\t\tpaymentBasedApplicantShared: 0,\r\n\t\t\t\t\t\t\t\tpaymentBasedBankShared: 0,\r\n\t\t\t\t\t\t\t\tpaymentStepCount: dirPaymentPart.paymentStepCount\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (var i = 0; i < vm.paymentConflicts.length; i++) {\r\n\t\t\t\t\t\tvar paymentBasedBankShared = vm.paymentConflicts[i].paymentBasedBankShared ? vm.paymentConflicts[i].paymentBasedBankShared : 0;\r\n\t\t\t\t\t\tvar directiveBasedBankShared = vm.paymentConflicts[i].directiveBasedBankShared ? vm.paymentConflicts[i].directiveBasedBankShared : 0;\r\n\t\t\t\t\t\tvar paymentBasedApplicantShared = vm.paymentConflicts[i].paymentBasedApplicantShared ? vm.paymentConflicts[i].paymentBasedApplicantShared : 0;\r\n\t\t\t\t\t\tvar directiveBasedApplicantShared = vm.paymentConflicts[i].directiveBasedApplicantShared ? vm.paymentConflicts[i].directiveBasedApplicantShared : 0;\r\n\r\n                        if (paymentBasedBankShared === directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedBankShared > directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"OrangeBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedBankShared < directiveBasedBankShared) {\r\n\t\t\t\t\t\t\tvm.bankQouta[i] = \"RedBG \";\r\n\t\t\t\t\t\t}\r\n\r\n                        if (paymentBasedApplicantShared === directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedApplicantShared > directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (paymentBasedApplicantShared < directiveBasedApplicantShared) {\r\n\t\t\t\t\t\t\tvm.applicantQouta[i] = \"RedBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(i, vm.paymentConflicts[i].paymentStepCount, vm.paymentConflicts[i].chequeCount)\r\n\t\t\t\t\t\tif (vm.paymentConflicts[i].paymentStepCount > vm.paymentConflicts[i].chequeCount) {\r\n\t\t\t\t\t\t\tvm.countQouta[i] = \"RedBG\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvm.countQouta[i] = \"GreenBG\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvm.sumDirectiveBasedBankShared = 0;\r\n\t\t\t\t\tvm.sumPaymentBasedBankShared = 0;\r\n\t\t\t\t\tvm.sumDirectiveBasedApplicantShared = 0;\r\n\t\t\t\t\tvm.sumPaymentBasedApplicantShared = 0;\r\n\t\t\t\t\tvm.sumPaymentStepCount = 0;\r\n\t\t\t\t\tvm.sumChequeCount = 0;\r\n\t\t\t\t\tvm.paymentConflicts.forEach(function (conflist) {\r\n\t\t\t\t\t\tvm.sumDirectiveBasedBankShared += conflist.directiveBasedBankShared;\r\n\t\t\t\t\t\tvm.sumPaymentBasedBankShared += conflist.paymentBasedBankShared;\r\n\t\t\t\t\t\tvm.sumDirectiveBasedApplicantShared += conflist.directiveBasedApplicantShared;\r\n\t\t\t\t\t\tvm.sumPaymentBasedApplicantShared += conflist.paymentBasedApplicantShared;\r\n\t\t\t\t\t\tvm.sumPaymentStepCount += conflist.paymentStepCount;\r\n\t\t\t\t\t\tvm.sumChequeCount += conflist.chequeCount;\r\n\r\n                    });\r\n\t\t\t\t\twaitCount++;\r\n\t\t\t\t\tvm.getPaymentConflictLoading = false;\r\n\t\t\t\t\treturn vm.paymentConflicts;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function getInvestmentCostMonitoring() {\r\n\t\t\treturn MonitoringService.getInvestmentCostMonitoring(vm.monitoringId).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.progresses = data ? data : [];\r\n\t\t\t\t\tvm.sumDirectiveBasedAmount = 0;\r\n\t\t\t\t\tvm.sumPaymentToDirective = 0;\r\n\t\t\t\t\tvm.sumPaymentToDirectivePercent = 0;\r\n\t\t\t\t\tvm.sumInvoiceToDirective = 0;\r\n\t\t\t\t\tvm.sumInvoiceToDirectivePercent = 0;\r\n\t\t\t\t\tvm.sumProgressRate = 0;\r\n\t\t\t\t\tvm.progresses.forEach(function (progress) {\r\n\r\n                        progress.invoiceBasedAmount = progress.invoiceBasedAmount ? progress.invoiceBasedAmount : 0;\r\n\t\t\t\t\t\tprogress.paymentBasedAmount = progress.paymentBasedAmount ? progress.paymentBasedAmount : 0;\r\n\t\t\t\t\t\tprogress.invoiceBasedToDirectiveBasedAmountRate = progress.invoiceBasedToDirectiveBasedAmountRate ? progress.invoiceBasedToDirectiveBasedAmountRate * 100 : 0;\r\n\t\t\t\t\t\tprogress.paymentBasedToDirectiveBasedAmountRate = progress.paymentBasedToDirectiveBasedAmountRate ? progress.paymentBasedToDirectiveBasedAmountRate * 100 : 0;\r\n\t\t\t\t\t\tprogress.progressRate = progress.progressRate ? progress.progressRate : 0;\r\n\r\n                        vm.sumDirectiveBasedAmount += progress.directiveBasedAmount;\r\n\t\t\t\t\t\tvm.sumPaymentToDirective += progress.paymentBasedAmount ? progress.paymentBasedAmount : 0;\r\n\t\t\t\t\t\tvm.sumInvoiceToDirective += progress.invoiceBasedAmount ? progress.invoiceBasedAmount : 0;\r\n\t\t\t\t\t\tvm.sumProgressRate += (progress.progressRate ? (progress.progressRate / 100) : 0) * progress.directiveBasedAmount;\r\n\r\n                        progress.invoiceBasedToDirectiveBasedAmountRate = Math.round(progress.invoiceBasedToDirectiveBasedAmountRate);\r\n\t\t\t\t\t\tprogress.paymentBasedToDirectiveBasedAmountRate = Math.round(progress.paymentBasedToDirectiveBasedAmountRate);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.sumProgressRate = (vm.sumProgressRate / vm.sumDirectiveBasedAmount) * 100;\r\n\t\t\t\t\tvm.sumPaymentToDirectivePercent = vm.sumPaymentToDirective / vm.sumDirectiveBasedAmount * 100;\r\n\t\t\t\t\tvm.sumInvoiceToDirectivePercent = vm.sumInvoiceToDirective / vm.sumDirectiveBasedAmount * 100;\r\n\t\t\t\t\tconsole.log(\"vm.progresses = \", vm.progresses);\r\n\t\t\t\t\twaitCount++;\r\n\t\t\t\t\tvm.getInvestmentCostMonitoringLoading = false;\r\n\t\t\t\t\treturn vm.progresses;\r\n\t\t\t\t});\r\n\r\n        }\r\n\r\n\t\tfunction handleAssurances(data) {\r\n\t\t\tvm.assurances = data ? data.monitoringAssurances : [];\r\n\t\t\tvm.sumExpertValue = 0;\r\n\t\t\tvm.sumAcceptedValue = 0;\r\n\t\t\tvm.sumMortgagedValue = 0;\r\n\t\t\tvm.assurances.forEach(function (assurance) {\r\n\t\t\t\tvm.sumExpertValue += assurance.expertValue;\r\n\t\t\t\tvm.sumAcceptedValue += assurance.expertValue * assurance.assuranceType.acceptedPercent / 100;\r\n\t\t\t\tvm.sumMortgagedValue += assurance.mortgagedValue;\r\n\t\t\t});\r\n\t\t\thandleDirAssurances();\r\n\t\t\tgetAllAssuranceConflict();\r\n\t\t\twaitCount++;\r\n\t\t\treturn vm.assurances;\r\n\t\t}\r\n\r\n        function handleDirAssurances() {\r\n\t\t\tvar requiredAssurancePercentage = vm.monitoring.directive.dirRequiredAssurancePercentage ? vm.monitoring.directive.dirRequiredAssurancePercentage : 100;\r\n\t\t\tvm.totalAmount = (vm.monitoring.getTotal + vm.monitoring.getTotalInterestAmount) * (requiredAssurancePercentage / 100);\r\n\t\t\tif (vm.monitoring.dirAssurances.length === 0)\r\n\t\t\t\tvm.showFlag = true;\r\n\t\t\tvm.dirAssurances = vm.monitoring.dirAssurances;\r\n\t\t\twaitCount++;\r\n\t\t}\r\n\r\n        function getAllAssuranceConflict() {\r\n\t\t\tvar params = {monitoringId: vm.monitoringId};\r\n\t\t\treturn ConflictService.getAssuranceConflict(params).then(\r\n\t\t\t\tfunction (data) {\r\n\t\t\t\t\tvm.assuranceConflicts = data ? data : [];\r\n\t\t\t\t\tvm.sumOfSumTakenAssuranceAmount = 0;\r\n\t\t\t\t\tvm.dirAssurances.forEach(function (assurance) {\r\n\t\t\t\t\t\tvar notExist = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.assuranceConflicts.length; i++) {\r\n\t\t\t\t\t\t\tif (vm.assuranceConflicts[i].assuranceType.id === assurance.assuranceType.id)\r\n\t\t\t\t\t\t\t\tnotExist = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (notExist) {\r\n\t\t\t\t\t\t\tconsole.log('assurance.limit', assurance.limit);\r\n\t\t\t\t\t\t\tvm.assuranceConflicts.push({\r\n\t\t\t\t\t\t\t\tassuranceType: assurance.assuranceType,\r\n\t\t\t\t\t\t\t\tcondition: assurance.limit,\r\n\t\t\t\t\t\t\t\tdirAssurance: assurance,\r\n\t\t\t\t\t\t\t\tdirective: {\r\n\t\t\t\t\t\t\t\t\tid: vm.monitoring.contract.directiveId\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdirAssuranceAmount: null,\r\n\t\t\t\t\t\t\t\tsumTakenAssuranceAmount: 0\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.assuranceConflicts.forEach(function (conflict) {\r\n\t\t\t\t\t\tconflict.getConflict = function () {\r\n\t\t\t\t\t\t\tif (this.sumTakenAssuranceAmount && !this.condition)\r\n\t\t\t\t\t\t\t\treturn 'OrangeBG';\r\n\t\t\t\t\t\t\tswitch (this.condition) {\r\n\t\t\t\t\t\t\t\tcase \"MAXIMUM\":\r\n\t\t\t\t\t\t\t\t\t//  !this.dirAssuranceAmount means nothing have been taken\r\n\t\t\t\t\t\t\t\t\tif (!this.dirAssuranceAmount)\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tif (this.sumTakenAssuranceAmount > this.dirAssuranceAmount) {\r\n\t\t\t\t\t\t\t\t\t\tconflict.conflictAmount = Math.abs(conflict.dirAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n\t\t\t\t\t\t\t\t\t\treturn 'OrangeBG';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"MINIMUM\":\r\n\t\t\t\t\t\t\t\t\tif (!this.dirAssuranceAmount || this.sumTakenAssuranceAmount < this.dirAssuranceAmount) {\r\n\t\t\t\t\t\t\t\t\t\tconflict.conflictAmount = Math.abs(conflict.dirAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n\t\t\t\t\t\t\t\t\t\treturn 'RedBG';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"EQUAL\":\r\n\t\t\t\t\t\t\t\t\tif (!this.dirAssuranceAmount || this.sumTakenAssuranceAmount < this.dirAssuranceAmount) {\r\n\t\t\t\t\t\t\t\t\t\tconflict.conflictAmount = Math.abs(conflict.dirAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n\t\t\t\t\t\t\t\t\t\treturn 'RedBG';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (this.sumTakenAssuranceAmount > this.dirAssuranceAmount) {\r\n\t\t\t\t\t\t\t\t\t\tconflict.conflictAmount = Math.abs(conflict.dirAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n\t\t\t\t\t\t\t\t\t\treturn 'OrangeBG';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"REST\":\r\n\t\t\t\t\t\t\t\t\tif (vm.totalAmount > vm.sumOfSumTakenAssuranceAmount) {\r\n\t\t\t\t\t\t\t\t\t\tconflict.conflictAmount = Math.abs(conflict.dirAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n\t\t\t\t\t\t\t\t\t\treturn 'RedBG';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn 'non';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 'non';\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvm.sumOfSumTakenAssuranceAmount += conflict.sumTakenAssuranceAmount;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.totalDifference = vm.totalAmount > vm.sumOfSumTakenAssuranceAmount ? vm.totalAmount - vm.sumOfSumTakenAssuranceAmount : 0;\r\n\t\t\t\t\tvm.assuranceConflicts.forEach(function (conflict) {\r\n                        //  for conflict type of REST, dirAssurance amount is 'what should be taken' minus sum of all taken assurance except REST taken amount\r\n                        if (conflict.condition === 'REST') {\r\n                            conflict.dirAssuranceAmount = vm.totalAmount - (vm.sumOfSumTakenAssuranceAmount - conflict.sumTakenAssuranceAmount);\r\n                            conflict.conflictAmount = vm.totalDifference;\r\n                        }\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log('vm.assuranceConflicts', vm.assuranceConflicts);\r\n\t\t\t\t\twaitCount++;\r\n\t\t\t\t\tvm.getAssuranceConflictLoading = false;\r\n\t\t\t\t\treturn vm.assuranceConflicts;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n        function getAllRelativeMonitorings() {\r\n\t\t\tvar resCount = 0;\r\n\t\t\tvm.monitorings = [];\r\n\t\t\tMonitoringService.searchMonitoring({directiveNumber: vm.monitoring.directive.dirNumber}).then(successCallback);\r\n\t\t\tif (vm.monitoring.directive.dirParentDirectiveNumber)\r\n\t\t\t\tMonitoringService.searchMonitoring({directiveNumber: vm.monitoring.directive.dirParentDirectiveNumber}).then(successCallbackParent);\r\n\r\n            function successCallback(data) {\r\n\t\t\t\tresCount++;\r\n\t\t\t\tvm.monitorings = vm.monitorings.concat(data ? data.content : []);\r\n\t\t\t\t// console.log(resCount === 1, vm.monitoring.directive.dirParentDirectiveNumber);\r\n\t\t\t\tif (resCount === 1 && vm.monitoring.directive.dirParentDirectiveNumber)\r\n\t\t\t\t\treturn;\r\n\t\t\t\twaitCount++;\r\n\t\t\t\tcalc();\r\n\t\t\t\tvm.searchMonitoringLatLongLoading = false;\r\n\t\t\t}\r\n\r\n            function successCallbackParent(data) {\r\n\t\t\t\tdata.content.forEach(function (m) {\r\n\t\t\t\t\tif (Util.indexOf(vm.monitorings, m.id, 'id') < 0)\r\n\t\t\t\t\t\tvm.monitorings.push(m);\r\n\t\t\t\t});\r\n\t\t\t\tcalc();\r\n\t\t\t\tvm.searchMonitoringLatLongLoading = false;\r\n\t\t\t}\r\n\r\n            function calc() {\r\n\t\t\t\tconsole.log('calc', vm.monitorings);\r\n\t\t\t\tvm.dimensions = [];\r\n\t\t\t\tvm.monitorings.forEach(function (t) {\r\n\t\t\t\t\tconsole.log(t.number, t.latitude, t.latitude);\r\n\t\t\t\t\tif (t.id !== undefined)\r\n\t\t\t\t\t\tcalcDimension(t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n            function calcDimension(place) {\r\n\t\t\t\tif (place.latitude && place.longitude) {\r\n\t\t\t\t\tvar p1 = {\r\n\t\t\t\t\t\tlat: vm.monitoring.latitude,\r\n\t\t\t\t\t\tlng: vm.monitoring.longitude\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar p2 = {\r\n\t\t\t\t\t\tlat: place.latitude,\r\n\t\t\t\t\t\tlng: place.longitude\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar dim = getDistance(p1, p2);\r\n\t\t\t\t\tvm.dimensions.push({\r\n\t\t\t\t\t\tmonitoring: place,\r\n\t\t\t\t\t\tdistance: dim / 1000\r\n\t\t\t\t\t});\r\n\r\n                    return dim / 1000; //distance\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n            function getDistance(p1, p2) {\r\n\t\t\t\tvar R = 6378137; // Earth’s mean radius in meter\r\n\t\t\t\tvar dLat = rad(p2.lat - p1.lat);\r\n\t\t\t\tvar dLong = rad(p2.lng - p1.lng);\r\n\t\t\t\tvar a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n\t\t\t\t\tMath.cos(rad(p1.lat)) * Math.cos(rad(p2.lat)) *\r\n\t\t\t\t\tMath.sin(dLong / 2) * Math.sin(dLong / 2);\r\n\t\t\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t\t\t\tvar d = R * c;\r\n\t\t\t\treturn d; // returns the distance in meter\r\n\t\t\t}\r\n\r\n            function rad(x) {\r\n\t\t\t\treturn x * Math.PI / 180;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        function getAllCheckList() {\r\n\t\t\tif (vm.monitoring.currentStep.id === 2) {\r\n\t\t\t\treturn CheckListService.getEnabledCheckList().then(\r\n\t\t\t\t\tfunction (data) {\r\n\t\t\t\t\t\tvm.checkList = data ? data : [];\r\n\t\t\t\t\t\tvm.monitoringCheckList = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.checkList.length; i++) {\r\n\t\t\t\t\t\t\tvar monitoringCheckListItem = {\r\n\t\t\t\t\t\t\t\tcheckList: vm.checkList[i],\r\n\t\t\t\t\t\t\t\tcheckListStatus: \"\",\r\n\t\t\t\t\t\t\t\tcomment: \"\",\r\n\t\t\t\t\t\t\t\tmonitoring: {\r\n\t\t\t\t\t\t\t\t\tid: vm.monitoringId\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvm.monitoringCheckList.push(monitoringCheckListItem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfillMonitoringCheckList();\r\n\t\t\t\t\t\treturn vm.monitoringCheckList;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if (vm.monitoring.currentStep.id !== 2) {\r\n\t\t\t\tvm.monitoringCheckList = [];\r\n\t\t\t\tvm.monitoringCheckList = vm.monitoringCheckList.concat(vm.monitoring.monitoringCheckLists);\r\n\t\t\t\treturn vm.monitoringCheckList;\r\n\t\t\t}\r\n\r\n            function fillMonitoringCheckList() {\r\n                vm.monitoringCheckListCount = 0;  //  number of replied check lists\r\n                for (var i = 0; i < vm.monitoring.monitoringCheckLists.length; i++) {\r\n                    for (var j = 0; j < vm.monitoringCheckList.length; j++) {\r\n                        if (vm.monitoring.monitoringCheckLists[i].checkList.id ===\r\n                            vm.monitoringCheckList[j].checkList.id) {\r\n                            vm.monitoringCheckListCount++;\r\n                            vm.monitoringCheckList[j].checkListStatus = vm.monitoring.monitoringCheckLists[i].checkListStatus;\r\n                            vm.monitoringCheckList[j].comment = vm.monitoring.monitoringCheckLists[i].comment;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\t\tfunction getSignUrl(user) {\r\n\t\t\treturn host + \"lmsUserManagement/user/\" + user.username + \"/getSign\";\r\n\t\t}\r\n\r\n        function getLastMonitoringProcessLogs() {\r\n\t\t\treturn MonitoringService.getLastProcessLog(vm.monitoringId).then(pSuccessCallback);\r\n\r\n            function pSuccessCallback(data) {\r\n\t\t\t\tvm.lastProcess = data ? data : {};\r\n\t\t\t\tvm.getLastMonitoringProcessLogsLoading = false;\r\n\t\t\t\treturn vm.processLogs;\r\n\t\t\t}\r\n\r\n\r\n        }\r\n\r\n        function checkLoading() {\r\n            $timeout(function () {\r\n                // console.log('loadings', vm.monitoringLoading, vm.searchMonitoringLoading, vm.getInvestmentCostMonitoringLoading,\r\n                // \tvm.searchMonitoringLatLongLoading, vm.getDirLicenseConflictsLoading, vm.getInvoiceConflictLoading,\r\n                // \tvm.getPaymentConflictLoading, vm.getAssuranceConflictLoading);\r\n                vm.loading = vm.monitoringLoading || vm.searchMonitoringLoading || vm.getInvestmentCostMonitoringLoading ||\r\n                    vm.searchMonitoringLatLongLoading || vm.getDirLicenseConflictsLoading || vm.getInvoiceConflictLoading ||\r\n                    vm.getPaymentConflictLoading || vm.getAssuranceConflictLoading || vm.getLastMonitoringProcessLogsLoading;\r\n                if (!vm.loading)\r\n                    window.print();\r\n                else\r\n                    checkLoading();\r\n            }, 2200)\r\n        }\r\n\r\n        function progress() {\r\n            var loaded = 9;\r\n            if (vm.monitoringLoading) loaded--;\r\n            if (vm.searchMonitoringLoading) loaded--;\r\n            if (vm.getInvestmentCostMonitoringLoading) loaded--;\r\n            if (vm.searchMonitoringLatLongLoading) loaded--;\r\n            if (vm.getDirLicenseConflictsLoading) loaded--;\r\n            if (vm.getInvoiceConflictLoading) loaded--;\r\n            if (vm.getPaymentConflictLoading) loaded--;\r\n            if (vm.getAssuranceConflictLoading) loaded--;\r\n            if (vm.getLastMonitoringProcessLogsLoading) loaded--;\r\n            return Math.floor(loaded / 9 * 100);\r\n        }\r\n\r\n        checkLoading();\r\n\r\n\t}\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/10/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringController', MonitoringController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringController($state, $log, $stateParams, Util, MonitoringService, DirectiveService,\r\n                                  $q, $rootScope, me, $uibModal, $confirm) {\r\n\r\n        var vm = this;\r\n        vm.monitoring = {};\r\n        vm.monitoringId = $stateParams.monitoringId;\r\n        vm.fromConvertDebit = $stateParams.step == 'fromConvertDebit';\r\n        vm.toggleContractDirectiveEdit = false;\r\n        vm.allowedActionList = [];\r\n        var monitoringDeferred = undefined;\r\n        var directiveDeferred = undefined;\r\n        var processLogsDeferred = undefined;\r\n\r\n        var allowedActionsDeferred = undefined;\r\n        vm.cancelEdit = cancelEdit;\r\n        vm.isActive = isActive;\r\n        vm.accept = accept;\r\n        vm.reject = reject;\r\n        vm.getMonitoring = getMonitoring;\r\n        vm.getDirective = getDirective;\r\n        vm.getAllowedActions = getAllowedActions;\r\n        vm.getLastMonitoringProcessLogs = getLastMonitoringProcessLogs;\r\n        vm.checkStatuses = checkStatuses;\r\n        vm.isMyMission = isMyMission;\r\n\r\n        vm.getMine = getMine;\r\n        vm.setIsMyMonitoring = setIsMyMonitoring;\r\n        vm.next = next;\r\n        vm.hasNext = hasNext;\r\n        vm.previous = previous;\r\n        vm.hasPrevious = hasPrevious;\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.openDirectiveModal = openDirectiveModal;\r\n        vm.openDetailsModal = openDetailsModal;\r\n        vm.openAttachmentModal = openAttachmentModal;\r\n        vm.openExpertsModal = openExpertsModal;\r\n        vm.keyDown = keyDown;\r\n        vm.cancelFinalized = cancelFinalized;\r\n        vm.deleteMonitoring = deleteMonitoring;\r\n\r\n\r\n        var subStates = [\r\n            'monitoring-details',\r\n            'contract',\r\n            'preConditions',\r\n            'license',\r\n            'invoice',\r\n            'payments',\r\n            'progress',\r\n            'assurance',\r\n            'lat-long',\r\n            'checkList',\r\n            'conflict',\r\n            'trace',\r\n            'comment'\r\n        ];\r\n        ////////////////\r\n\r\n        activate();\r\n\r\n\r\n        function activate() {\r\n            $log.debug('monitoring module activated;');\r\n            setIsMyMonitoring();\r\n            viewPortCheck();\r\n            getMonitoring(true);\r\n            getAllowedActions();\r\n            getLastMonitoringProcessLogs();\r\n            vm.justCame = true;\r\n            vm.currentState = $state.$current.name;\r\n        }\r\n\r\n        function isActive(currentState) {\r\n            vm.currentState = $state.$current.name;\r\n            return $state.$current.name === currentState;\r\n        }\r\n\r\n        function getMonitoring(doNotUpdate) {\r\n            // console.log('getMonitoring', !!doNotUpdate, vm.monitoringId);\r\n            if (doNotUpdate) {    //  resolve what you've got\r\n                if (monitoringDeferred)\r\n                    return monitoringDeferred.promise;\r\n                monitoringDeferred = $q.defer();\r\n                MonitoringService.getMonitoringById(vm.monitoringId).then(successCallBack, errorCallBack);\r\n\r\n            } else {    //  load it from server\r\n                monitoringDeferred = $q.defer();\r\n                return MonitoringService.getMonitoringById(vm.monitoringId).then(successCallBack, errorCallBack);\r\n            }\r\n\r\n\r\n            function successCallBack(data) {\r\n                vm.monitoring = data ? data : {};\r\n                vm.tempMonitoring = angular.copy(data);\r\n                monitoringDeferred.resolve(data);\r\n                checkStatuses();\r\n                if (vm.justCame && vm.monitoring.currentStep.id === 2) {\r\n                    vm.justCame = false;\r\n                    if (!vm.monitoring.directive || !vm.monitoring.directive.dirNumber)\r\n                        openDirectiveModal();\r\n                }\r\n                return vm.monitoring;\r\n            }\r\n\r\n            function errorCallBack(error) {\r\n                monitoringDeferred.reject(error);\r\n            }\r\n        }\r\n\r\n        function cancelEdit() {\r\n            vm.toggleContractDirectiveEdit = !vm.toggleContractDirectiveEdit;\r\n            getMonitoring();\r\n        }\r\n\r\n        function accept() {\r\n            switch (vm.monitoring.currentStep.name) {\r\n                case 'created': {\r\n                    MonitoringService.startMonitoring(vm.monitoringId, vm.comment).then(successCallback);\r\n                    break;\r\n                }\r\n                case 'started' : {\r\n                    Util.toast('error', 'APP.MESSAGES.CALCULATE_CONFLICTS_FIRST');\r\n                    break;\r\n                }\r\n                case 'calculated' : {\r\n                    MonitoringService.firstExpertAcceptMonitoring(vm.monitoringId, vm.comment).then(successCallback);\r\n                    break;\r\n                }\r\n                case 'firstExpertAccepted': {\r\n                    MonitoringService.secondExpertAcceptMonitoring(vm.monitoringId, vm.comment).then(successCallback);\r\n                    break;\r\n                }\r\n                case 'provinceAcceptingWaited':\r\n                case 'teamHeadAcceptingWaited':\r\n                case 'teamHeadAccepted': {\r\n                    MonitoringService.acceptMonitoring(vm.monitoringId, vm.comment).then(successCallback);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            function successCallback() {\r\n                Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                vm.comment = null;\r\n                if (vm.monitoring.currentStep.name === 'created') {\r\n                    $state.go('root.monitoring.monitoring-details', {monitoringId: vm.monitoringId});\r\n                }\r\n                getMonitoring();\r\n                $rootScope.$broadcast(\"stateChanged\");\r\n            }\r\n\r\n        }\r\n\r\n        function reject() {\r\n            switch (vm.monitoring.currentStep.name) {\r\n                case 'created':\r\n                case 'started':\r\n                case 'calculated':\r\n                case 'firstExpertAccepted':\r\n                case 'provinceAcceptingWaited':\r\n                case 'teamHeadAcceptingWaited': {\r\n                    MonitoringService.rejectMonitoring(vm.monitoringId, vm.comment).then(\r\n                        function () {\r\n                            Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                            vm.comment = \"\";\r\n                            getMonitoring();\r\n                        });\r\n                    break;\r\n                }\r\n                case 'teamHeadAccepted': {\r\n                    MonitoringService.finalHeadRejectMonitoring(vm.monitoringId, vm.comment).then(\r\n                        function () {\r\n                            Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                            vm.comment = \"\";\r\n                            getMonitoring();\r\n                        });\r\n                    break;\r\n                }\r\n                default: {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        function getAllowedActions(doNotUpdate) {\r\n\r\n            if (doNotUpdate && allowedActionsDeferred)\r\n                return allowedActionsDeferred.promise;\r\n            allowedActionsDeferred = $q.defer();\r\n            MonitoringService.getAllowedActionsOnMonitoring(vm.monitoringId).then(successCallback, errorCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.allowedActionList = data;\r\n                vm.allowedAction = false;\r\n                angular.forEach(data, function (value) {\r\n                    if (value.name === 'editing' || value.name === 'editingAfterCalculate') {\r\n                        vm.allowedAction = true;\r\n                    }\r\n                });\r\n                allowedActionsDeferred.resolve(vm.allowedAction);\r\n            }\r\n\r\n            function errorCallback(error) {\r\n                allowedActionsDeferred.reject(error);\r\n            }\r\n\r\n            return allowedActionsDeferred.promise;\r\n        }\r\n\r\n        function next() {\r\n            vm.loading = true;\r\n            var current = $state.$current.name.split('.')[2];\r\n            console.log('broadcastig next_' + current, vm.allowedAction);\r\n            $rootScope.$broadcast('next_' + current, vm.allowedAction);\r\n        }\r\n\r\n        $rootScope.$on('next', function (arg1, arg2) {\r\n            console.log('on next event', arg1, arg2);\r\n            vm.loading = false;\r\n            if (arg2)\r\n                doNext();\r\n        });\r\n\r\n        function doNext() {\r\n            var current = $state.$current.name.split('.')[2];\r\n            var index = subStates.indexOf(current);\r\n            if (index >= subStates.length)\r\n                return;\r\n            $state.go('root.monitoring.' + subStates[index + 1], {monitoringId: vm.monitoringId});\r\n        }\r\n\r\n        function hasNext() {\r\n            var current = $state.$current.name.split('.')[2];\r\n            var index = subStates.indexOf(current);\r\n            return (index + 1) < subStates.length;\r\n        }\r\n\r\n        function previous() {\r\n            vm.loading = true;\r\n            var current = $state.$current.name.split('.')[2];\r\n            console.log('broadcastig previous_' + current, vm.allowedAction);\r\n            $rootScope.$broadcast('previous_' + current, vm.allowedAction);\r\n        }\r\n\r\n        $rootScope.$on('previous', function () {\r\n            console.log('on previous event');\r\n            vm.loading = false;\r\n            doPrevious();\r\n        });\r\n\r\n        function doPrevious() {\r\n            var current = $state.$current.name.split('.')[2];\r\n            var index = subStates.indexOf(current);\r\n            if (index <= 0)\r\n                return;\r\n            $state.go('root.monitoring.' + subStates[index - 1], {monitoringId: vm.monitoringId});\r\n        }\r\n\r\n        function hasPrevious() {\r\n            var current = $state.$current.name.split('.')[2];\r\n            var index = subStates.indexOf(current);\r\n            return index > 0;\r\n\r\n        }\r\n\r\n        function viewPortCheck() {\r\n            var elements = document.querySelectorAll(\".plan-title\");\r\n            var sidebar = document.querySelectorAll(\".custom-sidebar-parent\");\r\n            var mainContent = document.querySelector(\".main-content-parent\");\r\n\r\n            function addClassOnScroll() {\r\n                for (var i = 0; i < elements.length; i++) {\r\n                    if (isElementInViewport(elements[i])) {\r\n                        sidebar[0].classList.remove(\"in-viewport\");\r\n                    } else if (!isElementInViewport(elements[i]) || isElementInViewport(mainContent)) {\r\n                        sidebar[0].classList.add(\"in-viewport\");\r\n\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            window.addEventListener(\"load\", addClassOnScroll);\r\n            window.addEventListener(\"scroll\", addClassOnScroll);\r\n\r\n            function isElementInViewport(el) {\r\n                var rect = el.getBoundingClientRect();\r\n                return (\r\n                    rect.top >= -50 &&\r\n                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)\r\n                );\r\n            }\r\n        }\r\n\r\n        function checkStatuses() {\r\n            console.log('checkStatuses');\r\n            vm.stepStatus = {\r\n                'details': vm.monitoring.monitoringDate,\r\n                'contract': false,\r\n                license: vm.monitoring.monitoringLicenses.length >= vm.monitoring.dirLicenses.length,\r\n                preConditions: vm.monitoring.monitoringConditions.length >= vm.monitoring.dirConditions.length,\r\n                'invoice': vm.monitoring.monitoringInvoices && vm.monitoring.monitoringInvoices.length,\r\n                'payments': vm.monitoring.monitoringPayments && vm.monitoring.monitoringPayments.length,\r\n                'assurance': vm.monitoring.monitoringAssurances && vm.monitoring.monitoringAssurances.length,\r\n                'latlong': vm.monitoring.latitude && vm.monitoring.longitude,\r\n                'checkList': vm.monitoring.finalExpertComment && vm.monitoring.approverPerformanceEvaluation\r\n                    && vm.monitoring.applicantPerformanceEvaluation && vm.monitoring.agentBranchPerformanceEvaluation\r\n                    && vm.monitoring.monitoringCheckLists && vm.monitoring.monitoringCheckLists.length,\r\n                'conflict': vm.monitoring.currentStep.name !== 'started' && vm.monitoring.currentStep.name !== 'created' && vm.monitoring.currentStep.name !== 'deleted'\r\n            };\r\n            vm.monitoring.dirContracts.forEach(function (dirContract) {\r\n                if (dirContract.contract && dirContract.contract.number === vm.monitoring.contract.number)\r\n                    vm.stepStatus.contract = true;\r\n            });\r\n            vm.stepStatus.progress = vm.stepStatus.invoice && vm.stepStatus.payments;\r\n            getDirective(true);\r\n        }\r\n\r\n        function getDirective(doNotUpdate) {\r\n            directiveDeferred = $q.defer();\r\n            return getMonitoring(doNotUpdate).then(successCallback, errorCallBack);\r\n\r\n            function successCallback(data) {\r\n                vm.directive = data.directive;\r\n                directiveDeferred.resolve(vm.directive);\r\n                return vm.directive;\r\n            }\r\n\r\n            function errorCallBack(error) {\r\n                directiveDeferred.reject(error);\r\n                return error;\r\n            }\r\n\r\n        }\r\n\r\n        function isMyMission() {\r\n            if (!vm.monitoring || !vm.monitoring.userMonitorings || !me)\r\n                return false;\r\n            for (var i = 0; i < vm.monitoring.userMonitorings.length; i++) {\r\n                if (vm.monitoring.userMonitorings[i].lmsUser.username === me.username)\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function getMine() {\r\n            return vm.isMyMonitoring;\r\n\r\n        }\r\n\r\n        function setIsMyMonitoring() {\r\n            MonitoringService.isMyMonitoring(vm.monitoringId).then(function (data) {\r\n                console.log(\"isMyMonitoring = \", data);\r\n                vm.isMyMonitoring = data;\r\n            });\r\n\r\n        }\r\n\r\n        function getLastMonitoringProcessLogs(doNotUpdate) {\r\n            if (doNotUpdate && processLogsDeferred) {    //  resolve what you've got\r\n                return processLogsDeferred.promise;\r\n            } else if (vm.monitoringId) {\r\n                processLogsDeferred = $q.defer();\r\n                return MonitoringService.getLastProcessLog(vm.monitoringId).then(pSuccessCallback, pErrorCallBack)\r\n            }\r\n\r\n\r\n            function pSuccessCallback(data) {\r\n                vm.lastProcess = data ? data : {};\r\n                processLogsDeferred.resolve(data);\r\n                return vm.processLogs;\r\n            }\r\n\r\n            function pErrorCallBack(error) {\r\n                processLogsDeferred.reject(error);\r\n            }\r\n\r\n        }\r\n\r\n        function openFlowModal() {\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: vm.monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function openExpertsModal() {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/userMonitorings/userMonitorings.html',\r\n                controller: 'UserMonitoringsController',\r\n                controllerAs: 'vm',\r\n                backdrop: 'static',\r\n                size: 'lg',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: vm.monitoring.id,\r\n                            monitoring: vm.monitoring\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(function (hasChanged) {\r\n                console.log('hasChanged', hasChanged);\r\n                if (hasChanged)\r\n                    getMonitoring();\r\n            })\r\n        }\r\n\r\n        function openAttachmentModal() {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/attachments/attachments.html',\r\n                controller: 'MonitoringAttachmentsController',\r\n                controllerAs: 'vm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: vm.monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function openDirectiveModal() {\r\n            if (vm.monitoring.currentStep.id !== 2 && vm.monitoring.currentStep.id !== 3)\r\n                return;\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/directive/edit-directive.html',\r\n                controller: 'EditDirectiveController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    'monitoringId': function () {\r\n                        return vm.monitoring.id;\r\n                    },\r\n                    'directiveNumber': function () {\r\n                        return vm.monitoring.contract.directiveNumber;\r\n                    },\r\n                    'contractId': function () {\r\n                        return vm.monitoring.contract.id\r\n                    }\r\n                }\r\n            });\r\n            modalInstance.result.then(\r\n                function () {\r\n                    getMonitoring().then(function () {\r\n                        $rootScope.$broadcast(\"directiveChanged\");\r\n                    });\r\n                });\r\n        }\r\n\r\n        function openDetailsModal(id, fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    getMonitoring();\r\n                });\r\n        }\r\n\r\n        function keyDown(event) {\r\n            if (event.ctrlKey && event.key === 'ArrowLeft')\r\n                next();\r\n            else if (event.ctrlKey && event.key === 'ArrowRight')\r\n                previous();\r\n        }\r\n\r\n        function cancelFinalized() {\r\n\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/cancelFinalized/cancel-finalized.html',\r\n                controller: 'CancelFinalizedController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    'monitoring': function () {\r\n                        return vm.monitoring;\r\n                    }\r\n                }\r\n            });\r\n            modalInstance.result.then(function () {\r\n                Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                $state.go('root.monitoring.monitoring-details', {monitoringId: vm.monitoring.id});\r\n                getMonitoring();\r\n                $rootScope.$broadcast(\"stateChanged\");\r\n            });\r\n\r\n        }\r\n\r\n        function deleteMonitoring() {\r\n            var text = \"پس از حذف، اطلاعات این نظارت بایگانی شده و دیگر قادر به انجام عملیات نخواهید بود. آیا مطمئن هستید؟\";\r\n\r\n            $confirm({text: text}).then(function () {\r\n                return MonitoringService.deleteMonitoringByAdmin(vm.monitoringId).then(\r\n                    function () {\r\n                        Util.toast('success', 'APP.MESSAGES.SUCCESS');\r\n                        $state.go('root.monitoring.monitoring-details', {monitoringId: vm.monitoring.id});\r\n                        getMonitoring();\r\n                        $rootScope.$broadcast(\"stateChanged\");\r\n                    });\r\n            });\r\n        }\r\n    }\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringMissionController', MonitoringMissionController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringMissionController($document, $log, NgTableParams, $uibModal, MonitoringService,\r\n                                         EconomicSectionService, UserService, Util) {\r\n        var vm = this;\r\n        vm.monitoring = {};\r\n        vm.monitorings = [];\r\n        vm.teamHeadsMap = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllMissions\r\n        });\r\n\t    vm.showGuidance = true;\r\n\t    vm.planTypes = Util.baseInfo('planTypes');\r\n\t    vm.warnings = Util.baseInfo('warnings');\r\n\t    vm.title = 'APP.MODULES.MONITORING.TITLES.MISSIONS';\r\n\t    vm.canDelete = false;\r\n\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.openDetailsModal = openDetailsModal;\r\n\t    vm.getDelay = MonitoringService.getDelaySync;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n\t        getAllEconomicSections();\r\n            getUsers();\r\n        }\r\n\t\r\n\t    function getAllMissions(tParams) {\r\n            var params = {\r\n                sort: 'id,desc'\r\n            };\r\n\t\t    angular.forEach(tParams.sorting(), function (value, key) {\r\n\t\t\t    params.sort = key + \",\" + value;\r\n\t\t    });\r\n            return MonitoringService.myMonitoringsMission().then(\r\n                function (data) {\r\n\t                function cmp(a, b, keys, i) {\r\n\t\t                if (keys.length === i + 1)\r\n\t\t\t                return a[keys[i]] > b[keys[i]] ? 1 : -1;\r\n\t\t                return cmp(a[keys[i]], b[keys[i]], keys, i + 1);\r\n\t                }\r\n\t                vm.monitorings = data ? data.filter(function (m) {\r\n\t\t                return m.currentStep.id === 0;\r\n\t                }).sort(function (a, b) {\r\n\t\t                if (!params.sort)\r\n\t\t\t                return 0;\r\n\t\t                var keys = params.sort.split(',')[0].split('.');\r\n\t\t                var order = params.sort.split(',')[1] === 'asc' ? 1 : -1;\r\n\t\t                return cmp(a, b, keys, 0) * order;\r\n\t                }) : [];\r\n                    var i;\r\n                    for (i = 0; i < vm.monitorings.length; i++) {\r\n                        vm.monitorings[i].index = i + 1;\r\n                    }\r\n                    return vm.monitorings;\r\n                });\r\n        }\r\n\r\n        function openFlowModal(id, parentSelector) {\r\n            var monitoring = getMonitoring(id);\r\n            /*var parentElem = parentSelector ?\r\n                angular.element($document[0].querySelector('.modal-demo ' + parentSelector)) : undefined;\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoring-flow-modal/monitoring-flow-modal.html',\r\n                controller: 'MonitoringFlowView',\r\n                controllerAs: 'mfvm',\r\n                size: 'lg',\r\n                appendTo: parentElem,\r\n                resolve: {\r\n                    monitoring: function () {\r\n                        return monitoring;\r\n                    },\r\n                    id: function () {\r\n                        return id;\r\n                    }\r\n                }\r\n            });\r\n            modalInstance.result.then(function () {\r\n\r\n            }, function () {\r\n\r\n            });*/\r\n\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        function getMonitoring(id) {\r\n            for (var i = 0; i < vm.monitorings.length; i++) {\r\n\t            if (vm.monitorings[i].id === id) {\r\n                    return vm.monitorings[i];\r\n                }\r\n            }\r\n\r\n        }\r\n\t\r\n\t    function getAllEconomicSections() {\r\n\t\t    return EconomicSectionService.getAllEconomicSections().then(\r\n\t\t\t    function (data) {\r\n\t\t\t\t    vm.economicSections = data ? data : [];\r\n\t\t\t\t    return vm.economicSections;\r\n\t\t\t    });\r\n\t\t\r\n\t    }\r\n\r\n        function openDetailsModal(id,fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n\r\n                });\r\n        }\r\n\r\n        function getUsers() {\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('MonitoringListController', MonitoringListController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringListController($stateParams, $document, $log, NgTableParams, $uibModal, $filter, $confirm, EconomicSectionService, ReportService,ContractCodeService,\r\n                                      ProvinceService, MonitoringService, TraceService, Util, BranchService, UserService, Principal, CheckListService) {\r\n        var vm = this;\r\n        vm.firstSearch = true;\r\n        vm.searchItem = {};\r\n        vm.monitoring = {};\r\n        vm.monitorings = [];\r\n        vm.directives = [];\r\n        vm.planTypes = Util.baseInfo('planTypes');\r\n        vm.activenessStatuses = Util.baseInfo('activenessStatuses');\r\n        vm.economicSections = [];\r\n        vm.provinces = [];\r\n        vm.codes = [];\r\n        vm.type = 'monitoringList';\r\n        vm.contractId = $stateParams.contractId;\r\n        vm.contractNumber = $stateParams.contractNumber;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: searchMonitoring\r\n        });\r\n        vm.showSearch = true;\r\n        vm.steps = MonitoringService.getStepsSync();\r\n        vm.traceSteps = TraceService.getStepsSync;\r\n        vm.title = 'APP.MODULES.MONITORING.TITLES.ARCHIVE';\r\n\r\n        vm.observers = [];\r\n        vm.teamHeads = [];\r\n        vm.teamHeadsMap = {};\r\n        vm.finalHeads = [];\r\n        vm.owners = [];\r\n\r\n        var stepIds = [];\r\n        var traceStepIds = [];\r\n        var duration = 1000;\r\n        var offset = 30;\r\n\r\n        vm.openModal = openModal;\r\n        vm.getBranchesByProvince = getBranchesByProvince;\r\n        vm.getBranchesByProvinceIds = getBranchesByProvinceIds;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n        vm.filterStep = filterStep;\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.planCaption = getPlanCaption;\r\n        vm.toggleStep = toggleStep;\r\n        vm.toggleTraceStep = toggleTraceStep;\r\n        vm.activeStep = activeStep;\r\n        vm.deleteMonitoring = deleteMonitoring;\r\n        vm.openDetailsModal = openDetailsModal;\r\n        vm.exportMonitoring = exportMonitoring;\r\n        vm.planTypeKey = Util.getPlanTypeKey;\r\n        vm.getUsers = getUsers;\r\n        vm.getDelay = MonitoringService.getDelaySync;\r\n        vm.refreshCodes = refreshCodes;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info(vm.title);\r\n            getAllEconomicSections();\r\n            getAllProvince();\r\n            getUsers();\r\n            checkCanDelete();\r\n            getChecklist();\r\n        }\r\n\r\n        function getMonitoring(id) {\r\n            for (var i = 0; i < vm.monitorings.length; i++) {\r\n                if (vm.monitorings[i].id === id) {\r\n                    return vm.monitorings[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        function checkCanDelete() {\r\n            Principal.identity().then(function (data) {\r\n                vm.currentUser = data;\r\n                vm.canDelete = Principal.isInAnyRole([\"ADMIN\", \"FINAL_HEAD\", \"PROVINCE_HEAD\", \"PROVINCE_DISPATCHER\", \"BRANCH_DISPATCHER\"]);\r\n            })\r\n        }\r\n\r\n        function prepareSearchItem() {\r\n            vm.searchItem.contractFromDate = vm.contractFromDate;\r\n            vm.searchItem.contractToDate = vm.contractToDate;\r\n            vm.searchItem.monitoringFromDate = vm.monitoringFromDate;\r\n            vm.searchItem.monitoringToDate = vm.monitoringToDate;\r\n            vm.searchItem.createFromDate = vm.createFromDate;\r\n            vm.searchItem.createToDate = vm.createToDate;\r\n            vm.searchItem.confirmFromDate = vm.confirmFromDate;\r\n            vm.searchItem.confirmToDate = vm.confirmToDate;\r\n            vm.searchItem.contractNumber = vm.searchItem.contractNumber ? $filter('eNumber')(vm.searchItem.contractNumber) : null;\r\n            vm.searchItem.monitoringNumber = vm.searchItem.monitoringNumber ? $filter('eNumber')(vm.searchItem.monitoringNumber) : null;\r\n            vm.searchItem.directiveNumber = vm.searchItem.directiveNumber ? $filter('eNumber')(vm.searchItem.directiveNumber) : null;\r\n            vm.searchItem.contractId = vm.contractId ? vm.contractId.toString() : null;\r\n            vm.searchItem.stepIds = [];\r\n            vm.searchItem.traceStepIds = [];\r\n\r\n            vm.steps.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.stepIds.push(es.id);\r\n            });\r\n            vm.traceSteps.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.traceStepIds.push(es.id);\r\n            });\r\n\r\n            vm.searchItem.planTypes = [];\r\n            vm.searchItem.activenessStatuses = [];\r\n\r\n            vm.planTypes.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.planTypes.push(es.key);\r\n            });\r\n            vm.activenessStatuses.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.activenessStatuses.push(es.key);\r\n            });\r\n\r\n            vm.searchItem.economicSectionIds = [];\r\n\r\n            vm.economicSections.forEach(function (es) {\r\n                if (es.selected)\r\n                    vm.searchItem.economicSectionIds.push(es.id);\r\n            });\r\n\r\n            if (vm.checkListStatus && vm.checkList) {\r\n                var checkListStatusList = [];\r\n                checkListStatusList.push(vm.checkListStatus);\r\n                vm.searchItem.checkListId = vm.checkList.id;\r\n                vm.searchItem.checkListStatuses = checkListStatusList;\r\n                /*vm.searchItem.monitoringCheckList = {\r\n                    checkListStatus: checkListStatusList,\r\n                    checkListId: vm.checkList.id\r\n                }*/\r\n            } else {\r\n                vm.searchItem.monitoringCheckList = null;\r\n            }\r\n        }\r\n\r\n        function searchMonitoring(tParams) {\r\n            var startTime = moment();\r\n            vm.loading = true;\r\n            prepareSearchItem();\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                sort: 'id,desc'\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n\r\n            return MonitoringService.searchMonitoring(vm.searchItem, params).then(\r\n                function (data) {\r\n                    vm.monitorings = data ? data.content : [];\r\n                    var i,\r\n                        numberPageElements = data.number * data.numberOfElements;\r\n                    for (i = 0; i < vm.monitorings.length; i++) {\r\n                        vm.monitorings[i].index = numberPageElements + i + 1;\r\n                        vm.monitorings[i].deleteDisabled = vm.monitorings[i].currentStep.name !== 'created';\r\n                    }\r\n                    if (data) {\r\n                        tParams.total(data.totalElements);\r\n                        vm.allRecordsCount = data.totalElements;\r\n                    }\r\n                    var searchResultContainer = angular.element(document.getElementById('search-result-container'));\r\n                    if (vm.firstSearch) vm.firstSearch = false;\r\n                    else $document.scrollToElement(searchResultContainer, offset, duration);\r\n                    vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n                    return vm.monitorings;\r\n                }, function (reason) {\r\n                    vm.allRecordsCount = 0;\r\n                    vm.loading = false;\r\n                    vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    return reason;\r\n                });\r\n        }\r\n\r\n        function exportMonitoring(reportType) {\r\n            prepareSearchItem();\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/export/columns-modal.html',\r\n                controller: 'ExportMonitoringColumnsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    'checkListItem': function () {\r\n                        return vm.checkList;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function (res) {\r\n                    var params = {\r\n                        reportType: reportType,\r\n                        extraSearchObj: vm.searchItem,\r\n                        showChecklistsStatus: true,\r\n                        columns: res[0],\r\n                        checkLists: res[1]\r\n                    };\r\n\r\n                    ReportService.getReportNumber(params).then(function (reportNumber) {\r\n                        if (reportType) {\r\n                            var url = 'api/report/monitoringSearch?reportNumber=' + reportNumber;\r\n                            console.log(url);\r\n                            ReportService.getNonHtmlReport(url);\r\n                            Util.toast('info', 'Please wait to receive data');\r\n                        }\r\n                    });\r\n                }, function () {\r\n\r\n                });\r\n\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvince() {\r\n            if (!vm.searchItem.provinceId)\r\n                vm.branches = [];\r\n            return ProvinceService.getAllBranchesOfProvince(vm.searchItem.provinceId).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getBranchesByProvinceIds() {\r\n            vm.searchItem.branchIds = [];\r\n            if (vm.searchItem.provinceIds.length === 0) {\r\n                vm.branches = [];\r\n                return vm.branches;\r\n            }\r\n\r\n            return ProvinceService.getAllBranchesByProvinceList(vm.searchItem.provinceIds).then(\r\n                function (data) {\r\n                    vm.branches = data ? data : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function cancelSearch() {\r\n            if (vm.searchItem) {\r\n                vm.searchItem = {};\r\n                vm.steps.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.traceSteps.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.economicSections.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.planTypes.forEach(function (es) {\r\n                    if (es.selected)\r\n                        es.selected = false;\r\n                });\r\n                vm.activenessStatuses.forEach(function (as) {\r\n                    if (as.selected)\r\n                        as.selected = false;\r\n                });\r\n                vm.tableParams.reload();\r\n            } else {\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n            }\r\n        }\r\n\r\n        function search() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function filterStep() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function openFlowModal(id) {\r\n            var monitoring = getMonitoring(id);\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        function openModal() {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/add-monitoring-modal/add-monitoring.html',\r\n                controller: 'AddMonitoring',\r\n                controllerAs: 'AddMonitoring',\r\n                size: 'md',\r\n                resolve: {\r\n                    id: function () {\r\n                        return vm.contractId;\r\n                    },\r\n                    contractIds: function () {\r\n                        return [];\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function getPlanCaption(key) {\r\n            for (var i = 0; i < vm.planTypes.length; i++) {\r\n                if (key === vm.planTypes[i].value)\r\n                    return vm.planTypes[i].title;\r\n            }\r\n            return 'نامشخص';\r\n        }\r\n\r\n        function getActivenessCaption(key) {\r\n            for (var i = 0; i < vm.activenessStatuses.length; i++) {\r\n                if (key === vm.activenessStatuses[i].value)\r\n                    return vm.activenessStatuses[i].title;\r\n            }\r\n            return 'نامشخص';\r\n        }\r\n\r\n        function activeStep(step) {\r\n            return stepIds.indexOf(step.id) > -1;\r\n        }\r\n\r\n        function activeTraceStep(step) {\r\n            return traceStepIds.indexOf(step.id) > -1;\r\n        }\r\n\r\n        function toggleStep(step) {\r\n            // console.log('toggleStep', step.id, stepIds.indexOf(step.id));\r\n            var index = stepIds.indexOf(step.id);\r\n            var exists = index > -1;\r\n            if (exists)\r\n                stepIds.splice(index, 1);\r\n            else\r\n                stepIds.push(step.id);\r\n            search();\r\n            // console.log(stepIds);\r\n        }\r\n\r\n        function toggleTraceStep(step) {\r\n            console.log('toggleTraceStep', step.id, traceStepIds.indexOf(step.id));\r\n            var index = traceStepIds.indexOf(step.id);\r\n            var exists = index > -1;\r\n            if (exists)\r\n                traceStepIds.splice(index, 1);\r\n            else\r\n                traceStepIds.push(step.id);\r\n            search();\r\n            console.log(traceStepIds);\r\n        }\r\n\r\n        function deleteMonitoring(monitoring) {\r\n            if (monitoring.deleteDisabled)\r\n                return;\r\n            $confirm().then(function () {\r\n                MonitoringService.deleteMonitoring(monitoring.id).then(function () {\r\n                    vm.tableParams.reload();\r\n                    Util.toast('success');\r\n                }, function (e) {\r\n                    Util.toast('error', e.message);\r\n                })\r\n            });\r\n        }\r\n\r\n        function openDetailsModal(id, fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    getMonitoring();\r\n                });\r\n        }\r\n\r\n        function getUsers() {\r\n            UserService.getByRole(\"OBSERVER\").then(function (data) {\r\n                vm.observers = data ? data : [];\r\n            });\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n                console.log('vm.teamHeads = ',vm.teamHeads);\r\n            });\r\n            UserService.getByRoles(['BRANCH_DISPATCHER', 'FINAL_HEAD', 'PROVINCE_HEAD']).then(function (data) {\r\n                vm.finalHeads = data ? data.content : [];\r\n            });\r\n            UserService.getByRoles(['ADMIN', 'BRANCH_DISPATCHER', 'FINAL_HEAD', 'PROVINCE_DISPATCHER', 'STAFF_DISPATCHER']).then(function (data) {\r\n                vm.owners = data ? data.content : [];\r\n            });\r\n        }\r\n\r\n        function getChecklist() {\r\n            vm.checkListStatusList = [\r\n                {value: \"ALL\", caption: \"-- همه موارد --\"},\r\n                {value: \"DONE\", caption: \"فاقد انحراف\"},\r\n                {value: \"VIOLATED\", caption: \"دارای نقص\"},\r\n                {value: \"UNDONE\", caption: \"دارای انحراف\"},\r\n                {value: \"UNRELATEDTODIRECTIVE\", caption: \"شامل مصوبه نمی‌باشد\"}\r\n            ];\r\n            CheckListService.getAllCheckList().then(function (data) {\r\n                vm.checkLists = data;\r\n            });\r\n        }\r\n\r\n        function refreshCodes(q) {\r\n            return ContractCodeService.searchAllNew({query: q}).then(function (data) {\r\n                vm.codes = data || [];\r\n                return vm.codes;\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by ehejazi on 7/9/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.monitoring')\r\n        .controller('MonitoringCartableController', MonitoringCartableController);\r\n\r\n    /** @ngInject */\r\n    function MonitoringCartableController($document, $log, $stateParams, NgTableParams, $uibModal, Util, EconomicSectionService,\r\n                                          ProvinceService, MonitoringService, BranchService, UserService) {\r\n        var vm = this;\r\n        vm.searchItem = {};\r\n        vm.monitoring = {};\r\n        vm.monitorings = [];\r\n\t    vm.economicSections = [];\r\n        vm.provinces = [];\r\n        vm.teamHeadsMap = {};\r\n\t    vm.canDelete = false;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: searchMonitoring\r\n        });\r\n\t    vm.planTypes = Util.baseInfo('planTypes');\r\n\t    vm.warnings = Util.baseInfo('warnings');\r\n        vm.step = {};\r\n\t    vm.steps = MonitoringService.getStepsSync();\r\n\t    vm.showGuidance = true;\r\n\t    vm.title = 'APP.MODULES.MONITORING.TITLES.CARTABLE';\r\n\r\n        vm.getAllCityByProvinceId = getAllCityByProvinceId;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n        vm.openFlowModal = openFlowModal;\r\n        vm.openDetailsModal = openDetailsModal;\r\n\t    vm.getDelay = MonitoringService.getDelaySync;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n\t        $log.log(vm.title, $stateParams);\r\n            getAllEconomicSections();\r\n            getAllProvince();\r\n            getAllBranches();\r\n            getUsers();\r\n        }\r\n\t\r\n\t    function searchMonitoring(tParams) {\r\n            var params = {\r\n                sort: 'id,desc'\r\n            };\r\n\t\t    angular.forEach(tParams.sorting(), function (value, key) {\r\n\t\t\t    params.sort = key + \",\" + value;\r\n\t\t    });\r\n\t\t    return MonitoringService.cartableMonitoring({}, params).then(\r\n                function (data) {\r\n\t                function cmp(a, b, keys, i) {\r\n\t\t                if (keys.length === i + 1)\r\n\t\t\t                return a[keys[i]] > b[keys[i]] ? 1 : -1;\r\n\t\t                return cmp(a[keys[i]], b[keys[i]], keys, i + 1);\r\n\t                }\r\n\t\r\n\t                vm.monitorings = data ? data.sort(function (a, b) {\r\n\t\t                if (!params.sort)\r\n\t\t\t                return 0;\r\n\t\t                var keys = params.sort.split(',')[0].split('.');\r\n\t\t                var order = params.sort.split(',')[1] === 'asc' ? 1 : -1;\r\n\t\t                return cmp(a, b, keys, 0) * order;\r\n\t                }) : [];\r\n                    var i;\r\n                    for (i = 0; i < vm.monitorings.length; i++) {\r\n                        vm.monitorings[i].index = i + 1;\r\n                    }\r\n                    return vm.monitorings;\r\n                });\r\n        }\r\n\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n\t                vm.economicSections = data ? data : [];\r\n\t                return vm.economicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function getAllProvince() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function getAllBranches() {\r\n\t        return BranchService.getAllBranches({'page': 0, 'size': 100}).then(\r\n                function (data) {\r\n                    vm.branches = data ? data.content : [];\r\n                    return vm.branches;\r\n                });\r\n        }\r\n\r\n        function getAllCityByProvinceId(id) {\r\n            return ProvinceService.getAllCitiesOfProvince(id).then(\r\n                function (data) {\r\n                    vm.citis = data ? data : [];\r\n                    return vm.citis;\r\n                });\r\n        }\r\n\r\n        function cancelSearch() {\r\n            if (vm.searchItem) {\r\n                vm.searchItem = {};\r\n                vm.tableParams.reload();\r\n            } else {\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n            }\r\n\r\n        }\r\n\r\n        function search() {\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function openFlowModal(id) {\r\n            var monitoring = getMonitoring(id);\r\n            $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/monitoring/monitoringFlow/monitoring-flow.html',\r\n                controller: 'MonitoringFlowController',\r\n                controllerAs: 'vm',\r\n                size: 'md',\r\n                resolve: {\r\n                    '$stateParams': function () {\r\n                        return {\r\n                            monitoringId: monitoring.id\r\n                        };\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        function getMonitoring(id) {\r\n            for (var i = 0; i < vm.monitorings.length; i++) {\r\n                if (vm.monitorings[i].id == id) {\r\n                    return vm.monitorings[i];\r\n                }\r\n            }\r\n\r\n        }\r\n        \r\n        function openDetailsModal(id,fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                  \r\n                });\r\n        }\r\n\r\n        function getUsers() {\r\n            UserService.getByRole(\"TEAM_HEAD\").then(function (data) {\r\n                data.forEach(function (user) {\r\n                    vm.teamHeadsMap[user.username] = user;\r\n                });\r\n                vm.teamHeads = data ? data : [];\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by a.arfaei on 1396/11/04.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.manage-user-guide', []);\r\n\r\n})();\r\n\n/**\r\n * Created by a.arfaei on 1396/11/04.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.manage-user-guide')\r\n        .factory('ManageUserGuideService', ManageUserGuideService);\r\n\r\n    /** @ngInject */\r\n    function ManageUserGuideService(RequestService) {\r\n        var base = 'help/helpFile';\r\n        var service = {\r\n            getAllHelpAttachmen: getAllHelpAttachmen,\r\n            addAllHelpAttachmen: addAllHelpAttachmen,\r\n\t        findByStepId: findByStepId,\r\n\t        getStepsSync: getSteps,\r\n            deleteAttachment: deleteAttachment\r\n        };\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n        function getAllHelpAttachmen(body) {\r\n            var url = base;\r\n            return RequestService(url).get(body);\r\n        }\r\n\r\n        function addAllHelpAttachmen(attachment, params) {\r\n            var url = base;\r\n            return RequestService(url).multipartPost(attachment, params);\r\n        }\r\n\r\n\t    function findByStepId(id) {\r\n\t\t    var url = base + '/' + id;\r\n\t\t    return RequestService(url).get();\r\n\t    }\r\n\r\n        function deleteAttachment(id) {\r\n\t        var url = base + '/' + id;\r\n\t        return RequestService(url).delete();\r\n        }\r\n\r\n\t    function getSteps() {\r\n\t\t    return [\r\n\t\t\t    {id: 0, caption: 'شروع'},\r\n\t\t\t    {id: 1, caption: 'لینک از شروع به ۱'},\r\n\t\t\t    {id: 2, caption: 'لینک از شروع به ۲'},\r\n\t\t\t    {id: 3, caption: 'لینک از شروع به ۳'},\r\n\t\t\t    {id: 4, caption: '۱- ارجاع ماموریت توسط رئیس اداره'},\r\n\t\t\t    {id: 5, caption: '۲- ارجاع ماموریت توسط معاون اعتباری/حقوقی استان'},\r\n\t\t\t    {id: 6, caption: '۳- ارجاع ماموریت توسط رئیس شعبه'},\r\n\t\t\t    {id: 7, caption: '(۱) لینک از ۱ به ۴'},\r\n\t\t\t    {id: 8, caption: '(۲) لینک از ۱ به ۵'},\r\n\t\t\t    {id: 9, caption: '(۳) لینک از ۲ به ۵'},\r\n\t\t\t    {id: 10, caption: '(۴) لینک از ۳ به ۶'},\r\n\t\t\t    {id: 11, caption: '۴- بازدید طرح توسط کارشناس ستاد'},\r\n\t\t\t    {id: 12, caption: '۵- بازدید طرح توسط کارشناس استان'},\r\n\t\t\t    {id: 13, caption: '۶- بازدید طرح توسط رئیس شعبه'},\r\n\t\t\t    {id: 14, caption: '(۵) لینک از ۴ به ۷'},\r\n\t\t\t    {id: 15, caption: '(۶) لینک از ۵ به ۷'},\r\n\t\t\t    {id: 16, caption: '(۷) لینک از ۵ به ۸'},\r\n\t\t\t    {id: 17, caption: '(۸) لینک از ۶ به پایان'},\r\n\t\t\t    {id: 18, caption: '۷- تائید گزارش بازدید توسط سرگروه بخش اقتصادی'},\r\n\t\t\t    {id: 19, caption: '۸- تائید گزارش توسط معاون اعتباری/حقوقی استان'},\r\n\t\t\t    {id: 20, caption: '(۹) لینک از ۷ به ۹'},\r\n\t\t\t    {id: 21, caption: '(۱۰) لینک از ۸ به پایان'},\r\n\t\t\t    {id: 22, caption: '۹- تائید رئیس اداره نظارت'},\r\n\t\t\t    {id: 23, caption: '(۱۱) لینک از ۹ به پایان'},\r\n\t\t\t    {id: 24, caption: 'پایان'}\r\n\t\t    ]\r\n\t    }\r\n\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by a.arfaei on 1396/11/04.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.manage-user-guide')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.manage-user-guide', {\r\n                controller: 'ManageUserGuideController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/manage-user-guide/manage-user-guide.html',\r\n                url: '/manage-user-guide'\r\n            });\r\n        $urlRouterProvider.when('/manage-user-guide/{path:.*}', '/manage-user-guide');\r\n    }\r\n})();\n/**\r\n * Created by arfaei on 96/11/04.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.manage-user-guide')\r\n        .controller('ManageUserGuideController', ManageUserGuideController);\r\n\r\n    /** @ngInject */\r\n    function ManageUserGuideController($log, ManageUserGuideService, Util) {\r\n        var vm = this;\r\n        vm.title = 'Manage User Guide Controller';\r\n        vm.toggleEdit = [];\r\n        vm.attachments = [];\r\n        vm.attachment = {};\r\n        vm.steps = [];\r\n        vm.stepNumber = null;\r\n\r\n        vm.cancelAddAttachment = cancelAddAttachment;\r\n        vm.addAllAttachments = addAllAttachments;\r\n        vm.getStepNumberCaption = getStepNumberCaption;\r\n        vm.deleteAttachment = deleteAttachment;\r\n        vm.close = close;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllAttachments();\r\n            getAllStep();\r\n        }\r\n\r\n        function getAllAttachments() {\r\n            var body = {\r\n                size: 1000\r\n            };\r\n\r\n            ManageUserGuideService.getAllHelpAttachmen(body).then(\r\n                function (data) {\r\n                    vm.attachments = data.content;\r\n                },\r\n                function (response) {\r\n                    var status = response.status;\r\n                    vm.loading = false;\r\n                    if (status === 401) {\r\n                        Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n                    }\r\n                    else\r\n                        Util.toast('error', 'APP.MESSAGES.FAIL', 'add attachment error');\r\n                }\r\n            )\r\n        }\r\n\r\n        function getAllStep() {\r\n            vm.steps = ManageUserGuideService.getStepsSync();\r\n        }\r\n\r\n        function getStepNumberCaption(id) {\r\n            var caption = '';\r\n            vm.steps.forEach(function (value) {\r\n                if (value.id === id)\r\n                    caption = value.caption;\r\n            });\r\n\r\n            return caption;\r\n        }\r\n\r\n        function addAllAttachments() {\r\n            vm.loading = true;\r\n            if (vm.attachment && vm.step !== null) {\r\n                vm.attachment.stepNumber = vm.step.id;\r\n                var params={\r\n                    name:vm.attachment.attachment.name\r\n                };\r\n                ManageUserGuideService.addAllHelpAttachmen(vm.attachment,params).then(\r\n                    function () {\r\n                        vm.attachment = {};\r\n                        vm.description = '';\r\n                        getAllAttachments();\r\n                        Util.toast('success');\r\n                    },\r\n                    function (response) {\r\n                        var status = response.status;\r\n                        vm.loading = false;\r\n                        if (status === 401) {\r\n                            Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n                        }\r\n                        else\r\n                            Util.toast('error', 'APP.MESSAGES.FAIL', 'add attachment error');\r\n                    });\r\n            }\r\n        }\r\n\r\n        function cancelAddAttachment() {\r\n            vm.attachment = {};\r\n            vm.toggleAddAttachment = true;\r\n        }\r\n\r\n        function deleteAttachment(id) {\r\n            ManageUserGuideService.deleteAttachment(id).then(\r\n                function () {\r\n                    getAllAttachments();\r\n                    Util.toast('success');\r\n                },\r\n                function (response) {\r\n                    var status = response.status;\r\n                    vm.loading = false;\r\n                    if (status === 401) {\r\n                        Util.toast('error', 'APP.ERRORS.Unauthorized user for this action', 'add attachment 401 error');\r\n                    }\r\n                    else\r\n                        Util.toast('error', 'APP.MESSAGES.FAIL', 'add attachment error');\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 1/6/18.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.loginlog', []);\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 1/6/18.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.loginlog')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.loginlog', {\r\n                abstract: true,\r\n                template: '<div ui-view></div>',\r\n                url: '/loginlogs'\r\n            })\r\n            .state('root.loginlog.list', {\r\n                controller: 'LoginlogListController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/loginlog/loginlog-list.html',\r\n                url: '/list'\r\n            })\r\n\r\n        ;\r\n        $urlRouterProvider.when('/loginlog/list{path:.*}', '/loginlog/list');\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 1/6/18.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.loginlog')\r\n        .controller('LoginlogListController', LoginlogListController);\r\n\r\n    /** @ngInject */\r\n    function LoginlogListController($log, NgTableParams, UserService, Util) {\r\n        var vm = this;\r\n        vm.loginlog = {};\r\n        vm.loginLogs = [];\r\n        vm.allUsers = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            getData: getAllLoginLogs\r\n        });\r\n        vm.title = 'LoginLogListController';\r\n\r\n        vm.refreshUsers = refreshUsers;\r\n        vm.groupFinder = UserService.groupTitle;\r\n        vm.getAllUsers = getAllUsers;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllUsers();\r\n        }\r\n\r\n        function search() {\r\n\t        vm.tableParams.page(0);\r\n            vm.tableParams.reload();\r\n        }\r\n\r\n        function cancelSearch() {\r\n            vm.date = \"\";\r\n            vm.user = {};\r\n        }\r\n\r\n        function getAllUsers() {\r\n\t        UserService.searchUsers().then(successCallback);\r\n            function successCallback(response) {\r\n                vm.allUsers = response.content;\r\n            }\r\n        }\r\n\r\n        function getAllLoginLogs(tParams) {\r\n            vm.loading = true;\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            var params = {\r\n                size: tParams.count(),\r\n                page: tParams.page() - 1,\r\n                username: vm.user ? vm.user.username : null,\r\n                fromDate: vm.fromDate ? vm.fromDate : null,\r\n                toDate: vm.toDate ? vm.toDate : null\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n            return UserService.getAllLoginLogs(params).then(successCallback, errorCallback);\r\n            function successCallback(data) {\r\n                vm.loginLogs = data ? data.content : [];\r\n                console.log(\"vm.loginLogs = \", vm.loginLogs);\r\n                vm.tableParams.total(data.totalElements);\r\n                vm.allRecordsCount = data.totalElements;\r\n                vm.loading = false;\r\n                vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                return vm.loginLogs;\r\n            }\r\n\r\n            function errorCallback(e) {\r\n                vm.loading = false;\r\n                vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                console.error(e);\r\n            }\r\n        }\r\n\r\n        function refreshUsers(query) {\r\n            return UserService.searchUsers({query: query}).then(successCallback);\r\n\r\n            function successCallback(data) {\r\n                vm.users = data.content || [];\r\n                return vm.users;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.isic', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.isic')\r\n        .factory('IsicService', IsicService);\r\n\r\n    /** @ngInject */\r\n    function IsicService(RequestService) {\r\n        var base = 'baseInfo/isic/';\r\n        var isic = RequestService(base);\r\n        return {\r\n            getAllIsics: isic.get,\r\n            // getProvince: isic.getById,\r\n            // createProvince: isic.post,\r\n            // updateProvince: isic.put,\r\n            // deleteProvince: isic.delete,\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.isic')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.isic-list', {\r\n                controller: 'IsicListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/isic/isic-list.html',\r\n                url: '/isic-list'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/isic/{path:.*}', '/isic');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.isic')\r\n        .controller('IsicListController', IsicListController);\r\n\r\n    /** @ngInject */\r\n    function IsicListController($confirm, $log, NgTableParams, IsicService, Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.isicList = [];\r\n        vm.isic = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllIsics\r\n        });\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n        }\r\n\r\n        function getAllIsics() {\r\n            return IsicService.getAllIsics().then(function (data) {\r\n                vm.isicList = data ? data : [];\r\n                console.log('vm.isicList = ',vm.isicList);\r\n                return vm.isicList;\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('homeService', homeService);\r\n\r\n    /** @ngInject */\r\n    function homeService($log, $http, host) {\r\n        var base = host + 'home/';\r\n        var service = {\r\n            getDashboard: getDashboard,\r\n            getVersion: getVersion\r\n        };\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n        function getDashboard(params) {\r\n            $log.info('homeService called');\r\n            return $http.get(base, {params: params}).then(successCallback);\r\n        }\r\n\r\n        function getVersion(callback) {\r\n            var url = host + 'versionManagement/version';\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            xhr.onreadystatechange = function() {\r\n                if (xhr.readyState === 4) {\r\n                    callback(xhr.response);\r\n                }\r\n            };\r\n\r\n            xhr.open('GET', url, true);\r\n            xhr.send('');\r\n        }\r\n\r\n        function successCallback(response) {\r\n            return response.data;\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('HomeController', HomeController);\r\n\r\n    /** @ngInject */\r\n    function HomeController($log, Principal, $window, $state, $timeout,\r\n                             Util, $document, NgTableParams, $rootScope) {\r\n        var vm = this;\r\n\t\r\n\t    vm.title = 'HomeController';\r\n\t\r\n\t    activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            vm.loading = true;\r\n            Principal.identity().then(\r\n\t            function () {\r\n\t\t            vm.showContracts = Principal.isInAnyRole(['ADMIN', 'FINAL_HEAD', 'PROVINCE_DISPATCHER', 'STAFF_DISPATCHER', 'BRANCH_DISPATCHER']);\r\n\t                vm.showDirective = Principal.isInAnyRole(['ADMIN', 'FINAL_HEAD']);\r\n\t                vm.loading = false;\r\n                }, function () {\r\n\t\t            vm.loading = false;\r\n\t            }\r\n            )\r\n        }\r\n\r\n\r\n    }\r\n\r\n}());\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.investment-action', [\r\n            //third party\r\n\r\n            //our modules\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.investment-action')\r\n        .factory('InvestmentActionService', InvestmentActionService);\r\n\r\n    /** @ngInject */\r\n    function InvestmentActionService(RequestService) {\r\n        var base = 'baseInfo/investmentAction/';\r\n        var IA=RequestService(base);\r\n        return {\r\n            getAllInvestmentActions: IA.get,\r\n            getInvestmentAction: IA.getById,\r\n            createInvestmentAction: IA.post,\r\n            updateInvestmentAction: IA.put,\r\n            deleteInvestmentAction: IA.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.investment-action')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.investment-action', {\r\n                controller: 'InvestmentActionController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/investment-action/investment-action.html',\r\n                url: '/investment-action'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/investment-action/{path:.*}', '/investment-action');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('InvestmentActionController', InvestmentActionController);\r\n\r\n    /** @ngInject */\r\n    function InvestmentActionController($confirm, $log, NgTableParams, InvestmentActionService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.types = [\r\n            {\r\n                title: \"جاری\",\r\n                value: \"CURRENT\"\r\n            },\r\n            {\r\n                title: \"ثابت\",\r\n                value: \"CONSTANT\"\r\n            }\r\n        ];\r\n        vm.investmentActions = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllInvestmentActions\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createInvestmentAction;\r\n        //vm.delete = deleteInvestmentAction;\r\n        vm.update = updateInvestmentAction;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllInvestmentActions(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return InvestmentActionService.getAllInvestmentActions(params).then(\r\n                function (data) {\r\n                    vm.investmentActions = data ? data : [];\r\n                    return vm.investmentActions;\r\n                }\r\n            );\r\n\r\n        }\r\n\t\r\n\t    function createInvestmentAction() {\r\n\t\t    var investmentAction = {name: vm.name, type: vm.type};\r\n\t\t    InvestmentActionService.createInvestmentAction(investmentAction).then(function () {\r\n                //util.toast(\"success\",\"success\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        /*function deleteInvestmentAction(id) {\r\n\t        $confirm().then(function () {\r\n\t\t        InvestmentActionService.deleteInvestmentAction(id).then(\r\n\t\t\t        function () {\r\n\t\t\t\t        vm.tableParams.reload();\r\n\t\t\t        });\r\n\t        })\r\n        }*/\r\n\r\n        function updateInvestmentAction(item) {\r\n\r\n            InvestmentActionService.updateInvestmentAction(item.id, {name: item.name, type: item.type}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n/**\r\n * Created by alan on 7/2/17.\r\n */\r\n\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.help', [\r\n\t\t\t//our modules\r\n\t\t\r\n\t\t]);\r\n\t\r\n})();\r\n\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.help')\r\n\t\t.factory('HelpService', HelpService);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction HelpService(RequestService) {\r\n\t\tvar base = 'help/';\r\n\t\tvar help = RequestService(base);\r\n\t\treturn {\r\n\t\t\tgetAllHelps: help.get,\r\n\t\t\tgetHelpById: help.getById,\r\n\t\t\tcreateHelp: help.post,\r\n\t\t\tupdateHelp: help.put,\r\n\t\t\tdeleteHelp: help.delete\r\n\t\t};\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.help')\r\n\t\t.config(routeConfig);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction routeConfig($stateProvider, $urlRouterProvider) {\r\n\t\t$stateProvider\r\n\t\t\t.state('root.help', {\r\n\t\t\t\tcontroller: 'HelpController',\r\n\t\t\t\tcontrollerAs: 'vm',\r\n\t\t\t\ttemplateUrl: 'app/components/help/help.html',\r\n\t\t\t\turl: '/help'\r\n\t\t\t})\r\n\t\t;\r\n\t\t$urlRouterProvider.when('/help/{path:.*}', '/help');\r\n\t}\r\n\t\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.help')\r\n\t\t.controller('HelpController', HelpController);\r\n\t\r\n\t/** @ngInject */\r\n\tfunction HelpController($log, ManageUserGuideService, host) {\r\n\t\tvar vm = this;\r\n\t\tvm.sample = {};\r\n\t\tvm.samples = [];\r\n\t\tvm.tempHelps = [];\r\n\t\tvm.toggleAddHelp = true;\r\n\t\tvm.toggleEdit = [];\r\n\t\tvm.title = 'HelpListController';\r\n\t\tvm.steps = ManageUserGuideService.getStepsSync();\r\n\t\tvm.openFile = openFile;\r\n\t\tvm.getCaptionById = getCaptionById;\r\n\t\t\r\n\t\tactivate();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction activate() {\r\n\t\t\t$log.log(vm.title);\r\n\t\t}\r\n\t\t\r\n\t\tfunction getCaptionById(id) {\r\n\t\t\tfor (var i = 0; i < vm.steps.length; i++) {\r\n\t\t\t\tif (vm.steps[i].id === id)\r\n\t\t\t\t\treturn vm.steps[i].caption;\r\n\t\t\t}\r\n\t\t\treturn '?';\r\n\t\t}\r\n\t\t\r\n\t\tfunction openFile(stepId) {\r\n\t\t\t\r\n\t\t\tManageUserGuideService.findByStepId(stepId).then(function (value) {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar url = host + 'fileManager/attachment/' + value.helpAttachment.id + '/getContent/' + stepId + '.' + value.helpAttachment.type;\r\n\t\t\t\twindow.open(url, '_blank');\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n})();\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.graphical-report', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.graphical-report')\r\n        .factory('GraphicalReportService', GraphicalReportService);\r\n\r\n    /** @ngInject */\r\n    function GraphicalReportService(RequestService) {\r\n        var url = 'report/graphical';\r\n        return {\r\n            getMonthly: getMonthly,\r\n            getMonthlyInput: getMonthlyInput\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function getMonthly(data) {\r\n            var putUrl = url + '/monthly';\r\n            return RequestService(putUrl).post(data);\r\n        }\r\n\r\n        function getMonthlyInput(data) {\r\n            var putUrl = url + '/monthlyInput';\r\n            return RequestService(putUrl).post(data);\r\n        }\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n\r\n    angular\r\n        .module('app.graphical-report')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n\r\n        $stateProvider\r\n            .state('root.graphicalReport', {\r\n                controller: 'GraphicalReportController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/graphical-report/graphical-report.html',\r\n                url: '/graphical-report'\r\n            })\r\n        ;\r\n\r\n        $urlRouterProvider.when('/graphical-report/{path:.*}', '/graphical-report');\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n\r\n    angular\r\n        .module('app.graphical-report')\r\n        .controller('GraphicalReportController', GraphicalReportController);\r\n\r\n    /** @ngInject */\r\n    function GraphicalReportController(host, $filter, $log, $q, GraphicalReportService, Util) {\r\n        var vm = this;\r\n        vm.title = 'Graphical Report Controller';\r\n        vm.reportParams = {codesIncluded: [], codesExcluded: []};\r\n        vm.shiftSelectedReport = shiftSelectedReport;\r\n        vm.submit = submit;\r\n        var pNumber = $filter('pNumber');\r\n        var pCurrency = $filter('pCurrency');\r\n        vm.reportLevels = [\"STAFF\", \"PROVINCE\", \"BRANCH\", \"ALL\"];\r\n\r\n        activate();\r\n\r\n        vm.reportList = [\r\n            {\r\n                index: 1,\r\n                content: 'میزان بازدید‌های انجام شده در هر ماه',\r\n                id: 'monthly',\r\n                function: monthly\r\n            },\r\n            {\r\n                index: 2,\r\n                content: 'میزان قراردادهای اعطا شده در هر ماه',\r\n                id: 'monthlyInput',\r\n                function: monthlyInput\r\n            },\r\n            {\r\n                index: 3,\r\n                content: 'تعداد قراردادهای اعطا شده و بازدید شده در هر ماه',\r\n                id: 'monthlyInputToOutputCount',\r\n                function: monthlyInputToOutputCount\r\n            },\r\n            {\r\n                index: 4,\r\n                content: 'نسبت  تعداد قراردادهای اعطا شده و بازدید شده در هر ماه',\r\n                id: 'monthlyInputToOutputCountProportion',\r\n                function: monthlyInputToOutputCountProportion\r\n            },\r\n            {\r\n                index: 5,\r\n                content: 'نسبت مبلغ قراردادهای اعطا شده و بازدید شده در هر ماه',\r\n                id: 'monthlyInputToOutputAmountProportion',\r\n                function: monthlyInputToOutputAmountProportion\r\n            }\r\n        ];\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            var today = new Date();\r\n            today = today.setDate(today.getDate() + 1);\r\n            vm.reportParams.toConfirmDate = moment(today).format('YYYY-MM-DD');// + 1515269999999;\r\n            // vm.reportParams.highAmount = 500000000;\r\n        }\r\n\r\n        function getData() {\r\n\r\n            // console.log('vm.reportParams', vm.reportParams);\r\n            var params = {\r\n                contractType: vm.reportParams.contractType,\r\n                reportType: vm.reportParams.reportType,\r\n                organizationLevel: vm.reportParams.organizationLevel === \"ALL\" ? null : vm.reportParams.organizationLevel,\r\n                highAmount: vm.reportParams.highAmount,\r\n                lowAmount: vm.reportParams.lowAmount,\r\n                includedCodes: vm.reportParams.codesIncluded && vm.reportParams.codesIncluded.length ? vm.reportParams.codesIncluded : null,\r\n                excludedCodes: vm.reportParams.codesExcluded && vm.reportParams.codesExcluded.length ? vm.reportParams.codesExcluded : null,\r\n                creditSupplyResourceIds: vm.reportParams.creditSupplyResources && vm.reportParams.creditSupplyResources.length ? vm.reportParams.creditSupplyResources : null,\r\n                creditSupplyResourceText: vm.reportParams.creditSupplyResourceText,\r\n                provinceIds: vm.reportParams.provinceIds && vm.reportParams.provinceIds.length ? vm.reportParams.provinceIds : null,\r\n                statusId: vm.reportParams.statusId\r\n            };\r\n            params.fromConfirmDate = vm.reportParams.fromConfirmDate;\r\n            params.toConfirmDate = vm.reportParams.toConfirmDate;\r\n            // console.log('params', params);\r\n            return params;\r\n        }\r\n        function monthly() {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            GraphicalReportService.getMonthly(getData()).then(function (data) {\r\n                {\r\n                    vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n\r\n                    vm.labels = data.map(function (item) {\r\n                        return pNumber(item.year + '/' + item.month);\r\n                    });\r\n                    vm.series = ['تعداد بازدید', 'مجموع مبلغ'];\r\n                    vm.data = [\r\n                        data.map(function (item) {\r\n                            return item.count;\r\n                        }),\r\n                        data.map(function (item) {\r\n                            return item.amount;\r\n                        })\r\n                    ];\r\n                    vm.onClick = function (points, evt) {\r\n                        console.log(points, evt);\r\n                    };\r\n                    vm.datasetOverride = [{yAxisID: 'y-axis-1'}, {yAxisID: 'y-axis-2'}];\r\n                    vm.options = {\r\n                        scales: {\r\n                            yAxes: [\r\n                                {\r\n                                    id: 'y-axis-1',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'left',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pNumber(value);\r\n                                        }\r\n                                    }\r\n                                },\r\n                                {\r\n                                    id: 'y-axis-2',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'right',\r\n                                    label: 'مبلغ بازدید شده',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pCurrency(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        tooltips: {\r\n                            callbacks: {\r\n                                title: function (tooltipItem, data) {\r\n                                    return tooltipItem[0].xLabel;\r\n                                },\r\n                                label: function (tooltipItem, data) {\r\n                                    return tooltipItem.datasetIndex === 0 ? pNumber(tooltipItem.yLabel) + ' بازدید ' : tooltipItem.datasetIndex === 1 ? pCurrency(tooltipItem.yLabel, 'A') : tooltipItem.yLabel;\r\n                                },\r\n                                afterLabel: function (tooltipItem, data) {\r\n                                    return '';\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n            })\r\n        }\r\n\r\n        function monthlyInput() {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            GraphicalReportService.getMonthlyInput(getData()).then(function (data) {\r\n                {\r\n                    vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n\r\n                    vm.labels = data.map(function (item) {\r\n                        return pNumber(item.year + '/' + item.month);\r\n                    });\r\n                    vm.series = ['تعداد قرارداد', 'مجموع مبلغ'];\r\n                    vm.data = [\r\n                        data.map(function (item) {\r\n                            return item.count;\r\n                        }),\r\n                        data.map(function (item) {\r\n                            return item.amount;\r\n                        })\r\n                    ];\r\n                    vm.onClick = function (points, evt) {\r\n                        console.log(points, evt);\r\n                    };\r\n                    vm.datasetOverride = [{yAxisID: 'y-axis-1'}, {yAxisID: 'y-axis-2'}];\r\n                    vm.options = {\r\n                        scales: {\r\n                            yAxes: [\r\n                                {\r\n                                    id: 'y-axis-1',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'left',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pNumber(value);\r\n                                        }\r\n                                    }\r\n                                },\r\n                                {\r\n                                    id: 'y-axis-2',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'right',\r\n                                    label: 'مبلغ اعطا شده',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pCurrency(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        tooltips: {\r\n                            callbacks: {\r\n                                title: function (tooltipItem, data) {\r\n                                    return tooltipItem[0].xLabel;\r\n                                },\r\n                                label: function (tooltipItem, data) {\r\n                                    return tooltipItem.datasetIndex === 0 ? pNumber(tooltipItem.yLabel) + ' قرارداد ' : tooltipItem.datasetIndex === 1 ? pCurrency(tooltipItem.yLabel, 'A') : tooltipItem.yLabel;\r\n                                },\r\n                                afterLabel: function (tooltipItem, data) {\r\n                                    return '';\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n            })\r\n        }\r\n\r\n        function monthlyInputToOutputCount() {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            var calls = [GraphicalReportService.getMonthlyInput(getData()), GraphicalReportService.getMonthly(getData())];\r\n            $q.all(calls).then(function (data) {\r\n                {\r\n                    console.log(data);\r\n                    data[0].forEach(function (item) {\r\n                        item.count2 = 0;\r\n                        data[1].forEach(function (item2) {\r\n                            if (item2.year === item.year && item2.month === item.month)\r\n                                item.count2 = item2.count;\r\n                        })\r\n                    });\r\n                    vm.labels = data[0].map(function (item) {\r\n                        return pNumber(item.year + '/' + item.month);\r\n                    });\r\n                    vm.series = ['تعداد قرارداد منعقد شده', 'تعداد بازدید انجام شده'];\r\n                    vm.data = [\r\n                        data[0].map(function (item) {\r\n                            return item.count;\r\n                        }),\r\n                        data[0].map(function (item) {\r\n                            return item.count2;\r\n                        })\r\n                    ];\r\n                    vm.onClick = function (points, evt) {\r\n                        console.log(points, evt);\r\n                    };\r\n                    vm.datasetOverride = [{yAxisID: 'y-axis-1'}, {yAxisID: 'y-axis-1'}];\r\n                    vm.options = {\r\n                        scales: {\r\n                            yAxes: [\r\n                                {\r\n                                    id: 'y-axis-1',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'left',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pNumber(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        tooltips: {\r\n                            callbacks: {\r\n                                title: function (tooltipItem, data) {\r\n                                    return tooltipItem[0].xLabel;\r\n                                },\r\n                                label: function (tooltipItem, data) {\r\n                                    return tooltipItem.datasetIndex === 0 ? pNumber(tooltipItem.yLabel) + ' منعقد شده ' : tooltipItem.datasetIndex === 1 ? pNumber(tooltipItem.yLabel) + ' بازدید شده ' : tooltipItem.yLabel;\r\n                                },\r\n                                afterLabel: function (tooltipItem, data) {\r\n                                    return '';\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n                    Util.toast('success', 'مدت زمان بازگذاری گزارش:' + vm.duration);\r\n                }\r\n            })\r\n        }\r\n\r\n        function monthlyInputToOutputCountProportion() {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            var calls = [GraphicalReportService.getMonthlyInput(getData()), GraphicalReportService.getMonthly(getData())];\r\n            $q.all(calls).then(function (data) {\r\n                {\r\n                    data[0].forEach(function (item) {\r\n                        item.proportion = 0;\r\n                        data[1].forEach(function (item2) {\r\n                            if (item2.year === item.year && item2.month === item.month)\r\n                                item.proportion = item2.count / item.count;\r\n                        })\r\n                    });\r\n                    console.log(data, vm.duration);\r\n                    vm.labels = data[0].map(function (item) {\r\n                        return pNumber(item.year + '/' + item.month);\r\n                    });\r\n                    vm.series = ['نسبت تعداد بازدید به تعداد تصویب'];\r\n                    vm.data = [\r\n                        data[0].map(function (item) {\r\n                            return item.proportion;\r\n                        })\r\n                    ];\r\n                    console.log('final data', vm.data);\r\n                    vm.onClick = function (points, evt) {\r\n                        console.log(points, evt);\r\n                    };\r\n                    vm.datasetOverride = [{yAxisID: 'y-axis-1'}];\r\n                    vm.options = {\r\n                        scales: {\r\n                            yAxes: [\r\n                                {\r\n                                    id: 'y-axis-1',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'left',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pNumber(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        tooltips: {\r\n                            callbacks: {\r\n                                title: function (tooltipItem, data) {\r\n                                    return tooltipItem[0].xLabel;\r\n                                },\r\n                                label: function (tooltipItem, data) {\r\n                                    return pNumber(tooltipItem.yLabel.toFixed(4)) + 'بازدید به تصویب';\r\n                                },\r\n                                afterLabel: function (tooltipItem, data) {\r\n                                    return '';\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n                    Util.toast('success', 'مدت زمان بازگذاری گزارش:' + vm.duration);\r\n                }\r\n            })\r\n        }\r\n\r\n        function monthlyInputToOutputAmountProportion() {\r\n            var startTime = moment();\r\n            vm.duration = 0;\r\n            vm.loading = true;\r\n            var calls = [GraphicalReportService.getMonthlyInput(getData()), GraphicalReportService.getMonthly(getData())];\r\n            $q.all(calls).then(function (data) {\r\n                {\r\n                    data[0].forEach(function (item) {\r\n                        item.proportion = 0;\r\n                        data[1].forEach(function (item2) {\r\n                            if (item2.year === item.year && item2.month === item.month)\r\n                                item.proportion = item2.amount / item.amount;\r\n                        })\r\n                    });\r\n                    console.log(data, vm.duration);\r\n                    vm.labels = data[0].map(function (item) {\r\n                        return pNumber(item.year + '/' + item.month);\r\n                    });\r\n                    vm.series = ['نسبت تعداد بازدید به تعداد تصویب'];\r\n                    vm.data = [\r\n                        data[0].map(function (item) {\r\n                            return item.proportion;\r\n                        })\r\n                    ];\r\n                    console.log('final data', vm.data);\r\n                    vm.onClick = function (points, evt) {\r\n                        console.log(points, evt);\r\n                    };\r\n                    vm.datasetOverride = [{yAxisID: 'y-axis-1'}];\r\n                    vm.options = {\r\n                        scales: {\r\n                            yAxes: [\r\n                                {\r\n                                    id: 'y-axis-1',\r\n                                    type: 'linear',\r\n                                    display: true,\r\n                                    position: 'left',\r\n                                    ticks: {\r\n                                        beginAtZero: false,\r\n                                        callback: function (value, index, values) {\r\n                                            return pNumber(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        tooltips: {\r\n                            callbacks: {\r\n                                title: function (tooltipItem, data) {\r\n                                    return tooltipItem[0].xLabel;\r\n                                },\r\n                                label: function (tooltipItem, data) {\r\n                                    return pNumber(tooltipItem.yLabel.toFixed(4)) + 'بازدید به تصویب';\r\n                                },\r\n                                afterLabel: function (tooltipItem, data) {\r\n                                    return '';\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    vm.duration = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                    vm.loading = false;\r\n                    Util.toast('success', 'مدت زمان بازگذاری گزارش:' + vm.duration);\r\n                }\r\n            })\r\n        }\r\n\r\n        function submit() {\r\n            vm.currentReport = vm.selectedReport.id;\r\n            vm.reportTitle = vm.selectedReport.content;\r\n            vm.selectedReport.function();\r\n        }\r\n\r\n        function shiftSelectedReport(s) {\r\n            var len = vm.reportList.length;\r\n            if (!vm.selectedReport || !vm.selectedReport.index) {\r\n                vm.selectedReport = s === 1 ? vm.reportList[0] : vm.reportList[len - 1];\r\n                return;\r\n            }\r\n            s += vm.selectedReport.index;\r\n            s--;\r\n            s %= len;\r\n            vm.selectedReport = vm.reportList[s];\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by ehejazi on 10/8/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.employee', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/8/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.employee')\r\n        .factory('EmployeeService', EmployeeService);\r\n\r\n    /** @ngInject */\r\n    function EmployeeService(RequestService) {\r\n        var base = 'baseInfo/employee/';\r\n        var BR = RequestService(base);\r\n        return {\r\n            getAllEmployees: BR.get,\r\n            getEmployee: BR.getById,\r\n\t        updateEmployee: updateEmployee,\r\n\t        searchEmployees: RequestService(base + 'search').post\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function updateEmployee(employee, id) {\r\n            var url = base + id;\r\n            return RequestService(url).put(null, employee);\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.economic-section', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.economic-section')\r\n        .factory('EconomicSectionService', EconomicSectionService);\r\n\r\n    /** @ngInject */\r\n    function EconomicSectionService(RequestService) {\r\n        var base = 'baseInfo/economicSection/';\r\n        var ES=RequestService(base);\r\n        return {\r\n            getAllEconomicSections: ES.get,\r\n            getEconomicSection: ES.getById,\r\n            createEconomicSection: ES.post,\r\n            updateEconomicSection: ES.put,\r\n            deleteEconomicSection: ES.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.economic-section')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.economic-section', {\r\n                controller: 'EconomicSectionController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/economic-section/economic-section.html',\r\n                url: '/economic-section'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/economic-section/{path:.*}', '/economic-section');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('EconomicSectionController', EconomicSectionController);\r\n\r\n    /** @ngInject */\r\n    function EconomicSectionController($confirm, $log, NgTableParams, EconomicSectionService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.economicSections = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllEconomicSections\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createEconomicSection;\r\n        vm.delete = deleteEconomicSection;\r\n        vm.update = updateEconomicSection;\r\n        cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllEconomicSections(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return EconomicSectionService.getAllEconomicSections(params).then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createEconomicSection(name) {\r\n            var tmp = {name: name};\r\n            EconomicSectionService.createEconomicSection(tmp).then(function () {\r\n                //util.toast(\"success\",\"success\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteEconomicSection(id) {\r\n            EconomicSectionService.deleteEconomicSection(id).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function updateEconomicSection(item) {\r\n\r\n            EconomicSectionService.updateEconomicSection(item.id, {}, {name: item.name}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive-approval-place', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive-approval-place')\r\n        .factory('DirectiveApprovalPlaceService', DirectiveApprovalPlaceService);\r\n\r\n    /** @ngInject */\r\n    function DirectiveApprovalPlaceService(RequestService) {\r\n        var base = 'baseInfo/directiveApprovalPlace/';\r\n        var DAP=RequestService(base);\r\n        return {\r\n            getAllDirectiveApprovalPlaces: DAP.get,\r\n            getDirectiveApprovalPlace: DAP.getById,\r\n            createDirectiveApprovalPlace: DAP.post,\r\n            updateDirectiveApprovalPlace: DAP.put,\r\n            deleteDirectiveApprovalPlace: DAP.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive-approval-place')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.directive-approval-place', {\r\n                controller: 'DirectiveApprovalPlaceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive-approval-place/directive-approval-place.html',\r\n                url: '/directive-approval-place'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/directive-approval-place/{path:.*}', '/directive-approval-place');\r\n    }\r\n\r\n})();\n/**\r\n * Created by alan on 7/2/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('DirectiveApprovalPlaceController', DirectiveApprovalPlaceController);\r\n\r\n    /** @ngInject */\r\n    function DirectiveApprovalPlaceController($confirm, $log, NgTableParams, DirectiveApprovalPlaceService,Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.creditSupplyResources = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllDirectiveApprovalPlaces\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createDirectiveApprovalPlace;\r\n        //vm.delete = deleteDirectiveApprovalPlace;\r\n        vm.update = updateDirectiveApprovalPlace;\r\n        vm.cancelAdd = cancelAdd;\r\n\t    vm.keyPressed = keyPressed;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllDirectiveApprovalPlaces(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return DirectiveApprovalPlaceService.getAllDirectiveApprovalPlaces(params).then(\r\n                function (data) {\r\n                    vm.creditSupplyResources = data ? data : [];\r\n                    return vm.creditSupplyResources;\r\n                }\r\n            );\r\n\r\n        }\r\n\t\r\n\t    function createDirectiveApprovalPlace() {\r\n\t\t    if (!vm.name)\r\n\t\t\t    return;\r\n\t\t    var directiveApprovalPlace = {name: vm.name};\r\n\t\t    DirectiveApprovalPlaceService.createDirectiveApprovalPlace(directiveApprovalPlace).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n\t\t\t    vm.name = '';\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        /*function deleteDirectiveApprovalPlace(id) {\r\n\t        $confirm().then(function () {\r\n\t\t        DirectiveApprovalPlaceService.deleteDirectiveApprovalPlace(id).then(\r\n\t\t\t        function () {\r\n\t\t\t\t        vm.tableParams.reload();\r\n\t\t\t        });\r\n\t        });\r\n        }\r\n*/\r\n        function updateDirectiveApprovalPlace(item) {\r\n\r\n            DirectiveApprovalPlaceService.updateDirectiveApprovalPlace(item.id, {}, {name: item.name}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\t\r\n\t    function keyPressed(event) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    createDirectiveApprovalPlace();\r\n\t\t    }\r\n\t    }\r\n\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.directive')\r\n        .factory('DirectiveService', DirectiveService);\r\n\r\n    /** @ngInject */\r\n    function DirectiveService(RequestService) {\r\n        var base = 'dir/directive/';\r\n        var dirContract = 'dir/dirContract/';\r\n        var directive = RequestService(base);\r\n        return {\r\n            getAllDirectives: directive.get,\r\n            getDirectiveById: directive.getById,\r\n            createDirective: directive.post,\r\n            updateDirective: directive.put,\r\n            deleteDirective: directive.delete,\r\n\r\n            SetApplicantInDirective: SetApplicantInDirective,\r\n            deleteConditionFromDirective: deleteConditionFromDirective,\r\n            deleteAssuranceFromDirective: deleteAssuranceFromDirective,\r\n            deletePaymentFromDirective: deletePaymentFromDirective,\r\n            AddBoardToApplicant: AddBoardToApplicant,\r\n            getBoardsApplicant: getBoardsApplicant,\r\n            deleteBoardFromApplicant: deleteBoardFromApplicant,\r\n            updateBoardInApplicant: UpdateBoardInApplicant,\r\n            AddConditionToDirective: AddConditionToDirective,\r\n            AddAssuranceToDirective: AddAssuranceToDirective,\r\n            AddPaymentToDirective: AddPaymentToDirective,\r\n            AddDirectiveContract: AddDirectiveContract,\r\n            updateDirectiveContract: updateDirectiveContract,\r\n            updateConditionInDirective: updateConditionInDirective,\r\n            getDirectiveContractById: getDirectiveContractById,\r\n            deleteDirectiveContract: deleteDirectiveContract,\r\n            searchDirective: searchDirective,\r\n            setContract: setContract,\r\n            setContractByNumber: setContractByNumber,\r\n            unsetContract: unsetContract,\r\n            addDirLicenseToDirective: addDirLicenseToDirective,\r\n            deleteDirLicenseFromDirective: deleteDirLicenseFromDirective,\r\n\t        getDirLicenses: getDirLicenses,\r\n\t        updatePaymentInDirective: updatePaymentInDirective,\r\n\t        updateAssuranceInDirective: updateAssuranceInDirective,\r\n\t\r\n\t        newDirective: newDirective,\r\n\t        copyDirective: copyDirective\r\n\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function setContract(dirContractId, concludedContractId) {\r\n            var url = dirContract + dirContractId + '/setContract';\r\n            var params = {\r\n                contractId: concludedContractId\r\n            };\r\n            return RequestService(url).put(null, {}, params);\r\n        }\r\n\r\n        function setContractByNumber(dirContractId, concludedContractNumber) {\r\n            var url = dirContract + dirContractId + '/setContractByNumber';\r\n            var params = {\r\n                contractNumber: concludedContractNumber\r\n            };\r\n            return RequestService(url).put(null, {}, params);\r\n        }\r\n\r\n        function unsetContract(dirContractId) {\r\n            var url = dirContract + dirContractId + '/unsetContract';\r\n            return RequestService(url).put(null, {}, null);\r\n        }\r\n\r\n\r\n        function searchDirective(params) {\r\n            var url = base + 'search';\r\n            return RequestService(url).get(params);\r\n        }\r\n\r\n        function AddAssuranceToDirective(id, dirAssurance) {\r\n            var url = base + id + '/addAssurance';\r\n            return RequestService(url).post(dirAssurance);\r\n        }\r\n\r\n        function AddDirectiveContract(id, data) {\r\n            var url = base + id + '/addContract';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function updateDirectiveContract(directiveId, data, params) {\r\n            var url = base + directiveId + '/updateContract';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function updateConditionInDirective(directiveId, data, params) {\r\n            var url = base + directiveId + '/updateCondition';\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function AddConditionToDirective(id, condition) {\r\n            var url = base + id + '/addCondition';\r\n            return RequestService(url).post(condition);\r\n        }\r\n\r\n        function AddPaymentToDirective(id, payment) {\r\n            var url = base + id + '/addPayment';\r\n            return RequestService(url).post(payment);\r\n        }\r\n\r\n        function getDirectiveContractById(id) {\r\n            var url = 'dir/dirContract/' + id;\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function SetApplicantInDirective(id, data) {\r\n            var url = base + id + '/setApplicant';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function deleteConditionFromDirective(id, params) {\r\n            var url = base + id + \"/deleteCondition\";\r\n            return RequestService(url).delete(null,params);\r\n        }\r\n\r\n        function deleteAssuranceFromDirective(id, params) {\r\n            var url = base + id + \"/deleteAssurance\";\r\n            return RequestService(url).delete(null,params);\r\n        }\r\n\r\n        function deletePaymentFromDirective(id, params) {\r\n            var url = base + id + \"/deletePayment\";\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function AddBoardToApplicant(id, data) {\r\n\t        var url = 'dir/directive/' + id + '/addBoard';\r\n            return RequestService(url).post(data);\r\n        }\r\n\r\n        function getBoardsApplicant(id) {\r\n\t        var url = 'dir/directive/' + id + '/getBoards';\r\n            return RequestService(url).get();\r\n        }\r\n\r\n        function UpdateBoardInApplicant(id, data) {\r\n            var url = 'dir/directive/' + id + '/updateBoard';\r\n            var params = {boardId: data.id};\r\n            return RequestService(url).put(null, data, params);\r\n        }\r\n\r\n        function deleteBoardFromApplicant(id, params) {\r\n\t        var url = 'dir/directive/' + id + '/deleteBoard';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function deleteDirectiveContract(id, params) {\r\n            var url = base + id + '/deleteContract';\r\n            return RequestService(url).delete(null, params);\r\n        }\r\n\r\n        function addDirLicenseToDirective(id, dirLicense) {\r\n            var url = base + id + '/addDirLicense';\r\n            return RequestService(url).post(dirLicense);\r\n        }\r\n\r\n        function deleteDirLicenseFromDirective(id, params) {\r\n            var url = base + id + '/deleteDirLicense';\r\n            return RequestService(url).delete(null,params);\r\n        }\r\n\r\n        function getDirLicenses(id) {\r\n            var url = base + id + '/getDirLicenses';\r\n            return RequestService(url).get();\r\n        }\r\n\t\r\n\t    function updatePaymentInDirective(id, dirPayment) {\r\n\t\t    var url = base + id + '/updatePayment';\r\n\t\t    var params = {\r\n\t\t\t    dirPaymentId: dirPayment.id\r\n\t\t    };\r\n\t\t    return RequestService(url).put(null, dirPayment, params);\r\n\t    }\r\n\t\r\n\t    function updateAssuranceInDirective(id, dirAssurance) {\r\n\t\t    var url = base + id + '/updateAssurance';\r\n\t\t    var params = {\r\n\t\t\t    dirAssuranceId: dirAssurance.id\r\n\t\t    };\r\n\t\t    return RequestService(url).put(null, dirAssurance, params);\r\n\t    }\r\n\r\n        function newDirective(id, directiveNumber, contractId) {\r\n\t\t    var url = base + id + '/newDirective';\r\n            var params = {\"directiveNumber\": directiveNumber, \"contractId\": contractId};\r\n\t\t    return RequestService(url).put(null, {}, params);\r\n\t    }\r\n\t\r\n\t    function copyDirective(id, directiveNumber, monitoringFrom) {\r\n\t\t    var url = base + id + '/copyDirective';\r\n\t\t    var params = {\"directiveNumber\": directiveNumber, \"monitoringIdFrom\": monitoringFrom};\r\n\t\t    return RequestService(url).put(null, {}, params);\r\n\t    }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.directive', {\r\n                controller: 'DirectiveController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/directive.html',\r\n\t            url: '/directive/{directiveId}?contractId?monitoringId?monitoringState'\r\n            })\r\n            .state('root.directive-list', {\r\n                controller: 'DirectiveListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/directive-list.html',\r\n                url: '/directives'\r\n            })\r\n            .state('root.directive.details', {\r\n                controller: 'DirectiveDetailsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/directive-details/directive-details.html',\r\n                url: '/details'\r\n            })\r\n            .state('root.directive.applicant', {\r\n                controller: 'ApplicantController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/applicant/applicant.html',\r\n                url: '/applicant'\r\n            })\r\n            .state('root.directive.contractPreConditions', {\r\n                controller: 'ContractPreConditionsController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/contractPreConditions/contract-preConditions.html',\r\n                url: '/contractPreConditions'\r\n            })\r\n            .state('root.directive.assuranceTypes', {\r\n                controller: 'ContractAssuranceTypesController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/assuranceTypes/contract-assuranceTypes.html',\r\n                url: '/assuranceTypes'\r\n            })\r\n            .state('root.directive.paymentPerPart', {\r\n                controller: 'DirectivePaymentPerPartController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/paymentPerPart/directive-paymentPerPart.html',\r\n                url: '/paymentPerPart'\r\n            })\r\n            .state('root.directive.license', {\r\n                controller: 'DirectiveLicenseController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/dirLicense/directive-license.html',\r\n                url: '/licenses'\r\n            })\r\n            .state('root.directive.contract', {\r\n                controller: 'DirectiveContractListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/directive/contract/contract-list.html',\r\n                url: '/contract'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/directives/{path:.*}', '/directives');\r\n    }\r\n\r\n})();\n(function () {\r\n\t'use strict';\r\n\t\r\n\tangular\r\n\t\t.module('app.directive')\r\n\t\t.controller('DirectiveController', DirectiveController);\r\n\t\r\n\t/** @ngInject */\r\n    function DirectiveController($confirm, $q, $state, $log, $rootScope, $stateParams, DirectiveService, MonitoringService) {\r\n\t\t\r\n\t\tvar vm = this;\r\n\t\tvar directiveDefered = null;\r\n\t\tvar monitoringDeferred = undefined;\r\n        var allowedActionsDeferred = undefined;\r\n\t\t\r\n\t\tvm.isActive = isActive;\r\n\t\tvm.getDirective = getDirective;\r\n\t\tvm.getMonitoring = getMonitoring;\r\n\t\tvm.getStatus = getStatus;\r\n\t\tvm.monitoringId = $stateParams.monitoringId;\r\n\t\tvm.monitoringState = $stateParams.monitoringState;\r\n\t\tvm.contractId = $stateParams.contractId;\r\n        vm.next = next;\r\n\t\tvm.hasNext = hasNext;\r\n        vm.previous = previous;\r\n\t\tvm.hasPrevious = hasPrevious;\r\n        vm.getAllowedActions = getAllowedActions;\r\n        var subStates = [\r\n            'details',\r\n            'applicant',\r\n            'contract',\r\n            'contractPreConditions',\r\n\t        'license',\r\n            'paymentPerPart',\r\n\t        'assuranceTypes'\r\n        ];\r\n\t\tvm.subStates = subStates;\r\n\t\tvm.subStatesTitle = [\r\n\t\t\t'APP.MODULES.DIRECTIVE.APPROVE_DETAILS',\r\n\t\t\t'APP.MODULES.DIRECTIVE.APPLICANT.TITLE',\r\n\t\t\t'APP.MODULES.DIRECTIVE.CONTRACT.TITLE',\r\n\t\t\t'APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE',\r\n\t\t\t'APP.MODULES.DIRECTIVE.LICENSE.TITLE',\r\n\t\t\t'APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.TITLE',\r\n\t\t\t'APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TITLE'\r\n\t\t];\r\n\t\tactive();\r\n\t\t\r\n\t\t////////////////\r\n\t\t\r\n\t\tfunction active() {\r\n\t\t\t$log.debug('directive module activated;');\r\n\t\t\tvm.directiveId = $stateParams.directiveId;\r\n\t\t\tvm.currentState = $state.$current.name;\r\n\t\t\tgetMonitoring().then(getDirective);\r\n            getAllowedActions();\r\n\t\t}\r\n\t\t\r\n\t\tfunction isActive(currentState) {\r\n\t\t\treturn $state.$current.name === currentState;\r\n\t\t}\r\n\t\t\r\n\t\tfunction getDirective(doNotUpdate) {\r\n\t\t\tdirectiveDefered = $q.defer();\r\n\t\t\tvar successCallback = function (data) {\r\n                // console.log('getDirective successCallback', data);\r\n\t\t\t\tvm.directive = data ? data.directive : {};\r\n\t\t\t\tdirectiveDefered.resolve(vm.directive);\r\n\t\t\t\treturn vm.directive;\r\n\t\t\t};\r\n\t\t\tvar errorCallback = function () {\r\n\t\t\t\tdirectiveDefered.reject();\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tgetMonitoring(doNotUpdate).then(successCallback, errorCallback);\r\n\t\t\t\r\n\t\t\treturn directiveDefered.promise;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction getMonitoring(doNotUpdate) {\r\n            // console.log('getMonitoring', !!doNotUpdate);\r\n\t\t\tif (doNotUpdate) {    //  resolve what you've got\r\n\t\t\t\tif (monitoringDeferred)\r\n\t\t\t\t\treturn monitoringDeferred.promise;\r\n\t\t\t\tmonitoringDeferred = $q.defer();\r\n\t\t\t\tMonitoringService.getMonitoringById($stateParams.monitoringId).then(successCallBack, errorCallBack);\r\n\t\t\t\t\r\n\t\t\t} else {    //  load it from server\r\n\t\t\t\tmonitoringDeferred = $q.defer();\r\n\t\t\t\treturn MonitoringService.getMonitoringById($stateParams.monitoringId).then(successCallBack, errorCallBack);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfunction successCallBack(data) {\r\n\t\t\t\tvm.monitoring = data ? data : {};\r\n\t\t\t\tmonitoringDeferred.resolve(data);\r\n\t\t\t\treturn vm.monitoring;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction errorCallBack(error) {\r\n\t\t\t\tmonitoringDeferred.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tfunction getStatus(key) {\r\n\t\t\tif (!vm.directive)\r\n\t\t\t\treturn null;\r\n\t\t\tvar statuses = {\r\n                'details': !!vm.directive.dirApproveDate && vm.directive.dirNumber && vm.directive.dirValidityDuration && vm.directive.directiveApprovalPlace && vm.directive.dirCreditSupplyResource && vm.directive.dirEconomicSection && vm.directive.dirPlanType && vm.directive.branchChiefInGrantingTime && vm.directive.dirBranchPhoneNumber && vm.directive.dirExpert && vm.directive.dirApplicantPhoneNumber && vm.directive.dirActivitySubject && vm.directive.dirProjectLocationAddress,\r\n\t\t\t\t'applicant': !!vm.monitoring.applicant && ((vm.monitoring.applicant.applicantType =='LEGAL') ? vm.monitoring.monitoringBoards.length >0 : true),\r\n\t\t\t\t'contract': vm.monitoring.dirContracts && vm.monitoring.dirContracts.length > 0,\r\n\t\t\t\t'contractPreConditions': vm.monitoring.dirConditions && vm.monitoring.dirConditions.length > 0,\r\n\t\t\t\t'license': vm.monitoring.dirLicenses && vm.monitoring.dirLicenses.length > 0,\r\n\t\t\t\t'paymentPerPart': vm.monitoring.dirPayments && vm.monitoring.dirPayments.length > 0,\r\n\t\t\t\t'assuranceTypes': vm.monitoring.dirAssurances && vm.monitoring.dirAssurances.length > 0\r\n\t\t\t};\r\n\t\t\treturn statuses[key];\r\n\t\t}\r\n        function next() {\r\n            vm.loading = true;\r\n            console.log(\"next\");\r\n            vm.current = $state.$current.name.split('.')[2];\r\n            console.log('\\t', vm.current);\r\n            $rootScope.$broadcast(vm.current + '-next', vm.allowedAction);\r\n        }\r\n\r\n        $rootScope.$on('next', function (data, result) {\r\n            console.log('on next event', data, result);\r\n            vm.loading = false;\r\n            if (result)\r\n                doNext();\r\n        });\r\n\r\n        function doNext() {\r\n            console.log(\"doNext\");\r\n            if (!vm.current)\r\n                return;\r\n            var index = subStates.indexOf(vm.current);\r\n            if (index >= subStates.length)\r\n                return;\r\n            $state.go('root.directive.' + subStates[index + 1], {monitoringId: vm.monitoringId});\r\n        }\r\n\t\t\r\n\t\tfunction hasNext() {\r\n\t\t\tvar current = $state.$current.name.split('.')[2];\r\n\t\t\tvar index = subStates.indexOf(current);\r\n\t\t\treturn (index < subStates.length - 1);\r\n\t\t\t\r\n\t\t}\r\n\r\n        function previous() {\r\n            vm.loading = true;\r\n            console.log('previous', vm.loading);\r\n            vm.current = $state.$current.name.split('.')[2];\r\n            $rootScope.$broadcast(vm.current + '-previous', vm.allowedAction);\r\n\r\n        }\r\n\r\n        $rootScope.$on('previous', function (data, result) {\r\n            vm.loading = false;\r\n            console.log('on previous event', data, result);\r\n            if (result)\r\n                doPrevious();\r\n        });\r\n\r\n        function doPrevious() {\r\n            console.log('doPrevious', vm.loading);\r\n            var index = subStates.indexOf(vm.current);\r\n            if (index <= 0)\r\n                return;\r\n            $state.go('root.directive.' + subStates[index - 1], {monitoringId: vm.monitoringId});\r\n        }\r\n\t\t\r\n\t\tfunction hasPrevious() {\r\n\t\t\tvar current = $state.$current.name.split('.')[2];\r\n\t\t\tvar index = subStates.indexOf(current);\r\n\t\t\treturn (index > 0);\r\n\t\t}\r\n\r\n\r\n        function getAllowedActions(doNotUpdate) {\r\n\r\n            if (doNotUpdate && allowedActionsDeferred)\r\n                return allowedActionsDeferred.promise;\r\n            allowedActionsDeferred = $q.defer();\r\n            console.log('allowedActionsDeferred', allowedActionsDeferred);\r\n            MonitoringService.getAllowedActionsOnMonitoring(vm.monitoringId).then(successCallbackActions, errorCallbackActions);\r\n\r\n            function successCallbackActions(data) {\r\n                vm.allowedActionList = data;\r\n                vm.allowedAction = false;\r\n\t\t\t\tconsole.log(\"data sdfsdf = \", data);\r\n                angular.forEach(data, function (value) {\r\n                    if (value.name === 'editing' || value.name === 'editingAfterCalculate') {\r\n                        vm.allowedAction = true;\r\n                    }\r\n                });\r\n                console.log('successCallbackActions: allowedActionsDeferred', allowedActionsDeferred);\r\n                allowedActionsDeferred.resolve(vm.allowedAction);\r\n            }\r\n\r\n            function errorCallbackActions(error) {\r\n                allowedActionsDeferred.reject(error);\r\n            }\r\n\r\n            return allowedActionsDeferred.promise;\r\n        }\r\n  \r\n\t\t\r\n\t}\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('DirectiveListController', DirectiveListController);\r\n\r\n    /** @ngInject */\r\n    function DirectiveListController($confirm, $log, $filter, NgTableParams, DirectiveService, Util) {\r\n        var vm = this;\r\n\t    var eNumber = $filter('eNumber');\r\n        vm.directive = {};\r\n        vm.directives = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n\t        counts: [5, 10, 20, 50, 100],\r\n            getData: getAllDirectives\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.search = {};\r\n\r\n        vm.searchDirective = searchDirective;\r\n\t    vm.deleteDirective = deleteDirective;\r\n\t    vm.cancelSearch = cancelSearch;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\t\r\n\t    function getAllDirectives(tParams) {\r\n            var params = {\r\n\t            page: tParams.page() - 1,\r\n\t            size: tParams.count(),\r\n                \"applicantName\": vm.search.applicant,\r\n\t            \"number\": eNumber(vm.search.number),\r\n                \"drectiveApprovalPlaceName\": vm.search.directiveApprovalPlace\r\n            };\r\n            return DirectiveService.searchDirective(params).then(\r\n                function (data) {\r\n                    vm.directives = data ? data.content : [];\r\n                    console.log(' vm.directives', vm.directives);\r\n\t                tParams.total(data.totalElements);\r\n                    return vm.directives;\r\n                }\r\n            );\r\n        }\r\n\r\n        function searchDirective() {\r\n            vm.tableParams.reload();\r\n        }\r\n\t\r\n\t    function cancelSearch() {\r\n\t\t    vm.search = {};\r\n\t\t    vm.tableParams.reload();\r\n\t    }\r\n\t\r\n\t    function deleteDirective(id) {\r\n\t\t    $confirm().then(function () {\r\n\t\t\t    DirectiveService.deleteDirective(id).then(successCallback, errorCallback);\r\n\t\t    });\r\n\t\t\r\n\t\t    function successCallback() {\r\n\t\t\t    vm.tableParams.reload();\r\n\t\t\t    Util.toast('success');\r\n\t\t    }\r\n\t\t\r\n\t\t    function errorCallback(error) {\r\n\t\t\t    Util.toast('error', error.message);\r\n\t\t    }\r\n\t\t\r\n\t    }\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('SubResourceListController', SubResourceListController);\r\n\r\n    /** @ngInject */\r\n    function SubResourceListController($confirm, $log, NgTableParams, CreditSupplyResourceService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.creditSupplyResources = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: getAllCreditSupplyResources\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n\r\n        function getAllCreditSupplyResources(tParams) {\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                code: tParams.filter().code ? tParams.filter().code : '',\r\n\r\n            };\r\n            return CreditSupplyResourceService.searchCreditSupplyResourceCodesForBaseInfo(params).then(\r\n                function (data) {\r\n                    vm.creditSupplyResources = data ? data.content : [];\r\n                    tParams.total(data.totalElements);\r\n                    return vm.creditSupplyResources;\r\n                }\r\n            );\r\n\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.credit-supply-resource', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.credit-supply-resource')\r\n        .factory('CreditSupplyResourceService', CreditSupplyResourceService);\r\n\r\n    /** @ngInject */\r\n    function CreditSupplyResourceService(RequestService) {\r\n        var base = 'baseInfo/creditSupplyResource/';\r\n        var CSR=RequestService(base);\r\n        return {\r\n            getAllCreditSupplyResources: CSR.get,\r\n            getAllCreditSupplyResourcesForContract: RequestService('baseInfo/creditSupplyResourceCodesForContract').get,\r\n            searchCreditSupplyResourcesForContract: RequestService('baseInfo/creditSupplyResourceCodesForContract/search').get,\r\n            searchCreditSupplyResourceCodesForBaseInfo: RequestService('baseInfo/creditSupplyResourceCodesForContract/searchForBaseInfo').get,\r\n\r\n\r\n            getCreditSupplyResource: CSR.getById,\r\n            createCreditSupplyResource: CSR.post,\r\n            updateCreditSupplyResource: CSR.put,\r\n            deleteCreditSupplyResource: CSR.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.credit-supply-resource')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.credit-supply-resource', {\r\n                controller: 'CreditSupplyResourceController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/credit-supply-resource/credit-supply-resource.html',\r\n                url: '/credit-supply-resource'\r\n            })\r\n            .state('root.sub-resource-list', {\r\n                controller: 'SubResourceListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/credit-supply-resource/sub-resource-list.html',\r\n                url: '/sub-resource-list'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/credit-supply-resource/{path:.*}', '/credit-supply-resource');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('CreditSupplyResourceController', CreditSupplyResourceController);\r\n\r\n    /** @ngInject */\r\n    function CreditSupplyResourceController($confirm, $log, NgTableParams, CreditSupplyResourceService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.creditSupplyResources = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: getAllCreditSupplyResources\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createCreditSupplyResource;\r\n        vm.delete = deleteCreditSupplyResource;\r\n        vm.update = updateCreditSupplyResource;\r\n        vm.cancelAdd = cancelAdd;\r\n        vm.keyPressed = keyPressed;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n\r\n        function getAllCreditSupplyResources(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return CreditSupplyResourceService.getAllCreditSupplyResources(params).then(\r\n                function (data) {\r\n                    vm.creditSupplyResources = data ? data : [];\r\n                    return vm.creditSupplyResources;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        /*function getAllCreditSupplyResources(tParams) {\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                code: tParams.filter().code ?tParams.filter().code :''\r\n            };\r\n            return CreditSupplyResourceService.getAllCreditSupplyResources(params).then(function (data) {\r\n                    vm.creditSupplyResources = data.content ? data.content : [];\r\n                    tParams.total(data.totalElements);\r\n                    return vm.creditSupplyResources;\r\n                }\r\n            );\r\n\r\n        }*/\r\n\r\n        function createCreditSupplyResource() {\r\n            var body = {name: vm.name};\r\n            CreditSupplyResourceService.createCreditSupplyResource(body).then(function () {\r\n                //util.toast(\"success\",\"success\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.name = \"\";\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteCreditSupplyResource(id) {\r\n            $confirm().then(function () {\r\n                CreditSupplyResourceService.deleteCreditSupplyResource(id).then(\r\n                    function () {\r\n                        vm.tableParams.reload();\r\n                    });\r\n            });\r\n        }\r\n\r\n        function updateCreditSupplyResource(item) {\r\n            CreditSupplyResourceService.updateCreditSupplyResource(item.id, {}, {name: item.name}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\r\n        function keyPressed(event) {\r\n            if (event.keyCode === 13) {\r\n                createCreditSupplyResource();\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n/**\r\n * Created by alan on 7/2/17.\r\n */\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-type', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-type')\r\n        .factory('ContractTypeService', ContractTypeService);\r\n\r\n    /** @ngInject */\r\n    function ContractTypeService(RequestService) {\r\n        var base = 'baseInfo/contractType/';\r\n        var CSR = RequestService(base);\r\n        return {\r\n            getAllContractTypes: CSR.get,\r\n            getContractType: CSR.getById,\r\n            createContractType: CSR.post,\r\n            updateContractType: CSR.put,\r\n            deleteContractType: CSR.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-type')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.contract-type', {\r\n                controller: 'ContractTypeController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/contract-type/contract-type.html',\r\n                url: '/contract-type'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/contract-type/{path:.*}', '/contract-type');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('ContractTypeController', ContractTypeController);\r\n\r\n    /** @ngInject */\r\n    function ContractTypeController($confirm, $log, NgTableParams, ContractTypeService,Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.contractTypes = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllContractTypes\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createContractType;\r\n        vm.delete = deleteContractType;\r\n        vm.update = updateContractType;\r\n        vm.cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllContractTypes(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return ContractTypeService.getAllContractTypes(params).then(\r\n                function (data) {\r\n                    vm.contractTypes = data ? data : [];\r\n                    return vm.contractTypes;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createContractType(name) {\r\n            var tmp = {name: name};\r\n            ContractTypeService.createContractType(tmp).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteContractType(id) {\r\n            ContractTypeService.deleteContractType(id).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function updateContractType(item) {\r\n\r\n            ContractTypeService.updateContractType(item.id, {}, {name: item.name}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-filter', [\r\n            //third party\r\n\r\n            //our modules\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-filter')\r\n        .factory('ContractFilterService', ContractFilterService);\r\n\r\n    /** @ngInject */\r\n    function ContractFilterService(RequestService) {\r\n        var base = 'contract/filter/';\r\n        var CF = RequestService(base);\r\n        return {\r\n            getAllContractFilters: getList,\r\n            getContractFilter: getOne,\r\n            createContractFilter: create,\r\n            updateContractFilter: update,\r\n            deleteContractFilter: deleteOne,\r\n\r\n            getAllTitles: getAllTitles,\r\n            getAllCodes: getAllCodes,\r\n            getAllEconomicCodes: getAllEconomicCodes\r\n        };\r\n\r\n        function getList(params) {\r\n            return RequestService(base + 'list').get(params);\r\n        }\r\n\r\n        function getOne(id) {\r\n            return RequestService(base + 'get/').getById(id);\r\n        }\r\n\r\n        function deleteOne(id) {\r\n            return RequestService(base + 'delete/').delete(id);\r\n        }\r\n\r\n        function update(id, date) {\r\n            return RequestService(base + 'update/').put(id, date);\r\n        }\r\n\r\n        function create(date) {\r\n            return RequestService(base + 'create').post(date);\r\n        }\r\n\r\n        function getAllTitles() {\r\n            return RequestService(base + 'getTitles').get();\r\n        }\r\n\r\n        function getAllCodes() {\r\n            return RequestService(base + 'getCodes').get();\r\n        }\r\n\r\n        function getAllEconomicCodes() {\r\n            return RequestService(base + 'getEconomicCodes').get();\r\n        }\r\n\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-filter')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.contract-filter', {\r\n                controller: 'ContractFilterController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/contract-filter/contract-filter.html',\r\n                url: '/contract-filter'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/contract-filter/{path:.*}', '/contract-filter');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-filter')\r\n        .controller('ContractFilterController', ContractFilterController);\r\n\r\n    /** @ngInject */\r\n    function ContractFilterController($confirm, $log, Util, NgTableParams, ContractFilterService) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.types = [\r\n            {'title': 'عنوان قرارداد', value: \"title\"},\r\n            {'title': 'کد نوع قرارداد', value: \"code\"},\r\n            {'title': 'کد اقتصادی', value: \"economicCode\"}\r\n        ];\r\n        vm.contractFilters = [];\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: getAllContractFilters\r\n        });\r\n        vm.title = 'Contract Filter Controller';\r\n        vm.toggleAdd = false;\r\n        vm.values = {\r\n            \"title\": [],\r\n            \"code\": [],\r\n            \"economicCode\": []\r\n        };\r\n        activate();\r\n        vm.create = createContractFilter;\r\n        vm.delete = deleteContractFilter;\r\n        vm.update = updateContractFilter;\r\n        vm.getTitle = getTitle;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllCodes();\r\n            getAllTitles();\r\n            getAllEconomicCodes();\r\n        }\r\n\r\n        function getTitle(fieldType) {\r\n            for (var i = 0; i < vm.types.length; i++)\r\n                if (vm.types[i].value === fieldType)\r\n                    return vm.types[i].title;\r\n            return 'فیلد پشتیبانی نشده';\r\n        }\r\n\r\n        function getAllContractFilters(tParams) {\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count()\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n            return ContractFilterService.getAllContractFilters(params).then(\r\n                function (data) {\r\n                    vm.contractFilters = data ? data.content : [];\r\n                    tParams.total(data.totalElements);\r\n                    return vm.contractFilters;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createContractFilter() {\r\n            var contractFilter = {value: vm.value, fieldType: vm.fieldType};\r\n            ContractFilterService.createContractFilter(contractFilter).then(function () {\r\n                Util.toast(\"success\");\r\n                vm.value = null;\r\n                vm.fieldType = null;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteContractFilter(id) {\r\n            $confirm().then(function () {\r\n                ContractFilterService.deleteContractFilter(id).then(\r\n                    function () {\r\n                        vm.tableParams.reload();\r\n                    });\r\n            })\r\n        }\r\n\r\n        function updateContractFilter(item) {\r\n\r\n            ContractFilterService.updateContractFilter(item.id, {value: item.value, fieldType: item.fieldType}).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function getAllTitles() {\r\n            return ContractFilterService.getAllTitles().then(\r\n                function (data) {\r\n                    vm.values.title = data ? data : [];\r\n                    return vm.values.title;\r\n                }\r\n            );\r\n        }\r\n\r\n        function getAllCodes() {\r\n            return ContractFilterService.getAllCodes().then(\r\n                function (data) {\r\n                    vm.values.code = data ? data : [];\r\n                    return vm.values.code;\r\n                }\r\n            );\r\n        }\r\n\r\n        function getAllEconomicCodes() {\r\n            return ContractFilterService.getAllEconomicCodes().then(\r\n                function (data) {\r\n                    vm.values.economicCode = data ? data : [];\r\n                    return vm.values.economicCode;\r\n                }\r\n            );\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-code', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-code')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.contract-code', {\r\n                controller: 'ContractCodeController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/contract-code/contract-code.html',\r\n                url: '/contract-code'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/contract-code/{path:.*}', '/contract-code');\r\n    }\r\n\r\n})();\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-code')\r\n        .factory('ContractCodeService', ContractCodeService);\r\n\r\n    /** @ngInject */\r\n    function ContractCodeService(RequestService) {\r\n        var base = 'baseInfo/contractCode/';\r\n        var CSR = RequestService(base);\r\n        return {\r\n            getContractCode: CSR.getById,\r\n            createContractCode: CSR.post,\r\n            updateContractCode: CSR.put,\r\n            deleteContractCode: CSR.delete,\r\n            searchAll: searchAll,\r\n            searchAllNew: searchAllNew,\r\n            search: search\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function searchAll(searchItem) {\r\n            return RequestService(base + \"searchAll\").put(null, searchItem);\r\n        }\r\n\r\n        function searchAllNew(searchItem) {\r\n            return RequestService(base + \"searchAll/all\").put(null, searchItem);\r\n        }\r\n\r\n        function search(searchItem, params) {\r\n            return RequestService(base + \"search\").put(null, searchItem, params);\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract-code')\r\n        .controller('ContractCodeController', ContractCodeController);\r\n\r\n    /** @ngInject */\r\n    function ContractCodeController($confirm, $log, NgTableParams, ContractCodeService, ContractTypeService, Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.contractCodes = [];\r\n        vm.contractCode = {};\r\n        vm.search = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [5, 10, 20, 50, 100],\r\n            getData: getAllContractCodes\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createContractCode;\r\n        vm.delete = deleteContractCode;\r\n        vm.update = updateContractCode;\r\n        vm.cancelAdd = cancelAdd;\r\n        vm.searchFunction = searchFunction;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllContractType();\r\n        }\r\n\r\n        function getAllContractCodes(tParams) {\r\n            vm.search.contractTypeId = vm.search.contractType ? vm.search.contractType.id : null;\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count()\r\n            };\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n            return ContractCodeService.search(vm.search, params).then(\r\n                function (data) {\r\n                    vm.contractCodes = data ? data.content : [];\r\n                    tParams.total(data.totalElements);\r\n                    return vm.contractCodes;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createContractCode() {\r\n            ContractCodeService.createContractCode(vm.contractCode).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function deleteContractCode(code) {\r\n            ContractCodeService.deleteContractCode(code).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function updateContractCode(item) {\r\n\r\n            ContractCodeService.updateContractCode(item.code, item).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\r\n        function getAllContractType() {\r\n            ContractTypeService.getAllContractTypes().then(\r\n                function (data) {\r\n                    vm.contractTypes = data ? [{id: null, name: 'همه'}].concat(data) : [];\r\n                    return vm.contractTypes;\r\n                });\r\n        }\r\n\r\n        function searchFunction() {\r\n            vm.tableParams.page(1);\r\n            vm.tableParams.reload();\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\n/**\r\n * Created by ehejazi on 7/3/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract')\r\n        .factory('ContractService', ContractService);\r\n\r\n    /** @ngInject */\r\n    function ContractService(RequestService) {\r\n        var base = 'contract/';\r\n        var contract = RequestService(base);\r\n        return {\r\n            getAllContracts: contract.get,\r\n            getContractById: contract.getById,\r\n            createContract: contract.post,\r\n            searchContract: contract.post,\r\n            searchContractStaff: RequestService(base + 'StaffLevel').post,\r\n            searchContractProvince: RequestService(base + 'ProvinceLevel').post,\r\n\t        searchContractBranch: RequestService(base + 'BranchLevel').post,\r\n            updateContract: contract.put,\r\n            deleteContract: contract.delete,\r\n            getNeedToMonitors: RequestService(base + 'getNeedToMonitors').get,\r\n            setDirectiveToContract: setDirectiveToContract,\r\n            addContractMonitoringProvinceLevel: addContractMonitoringProvinceLevel,\r\n\t        addContractMonitoringBranchLevel: addContractMonitoringBranchLevel,\r\n\t        addContractMonitoringStaffLevel: addContractMonitoringStaffLevel,\r\n\t        toggleNeedToMonitor: toggleNeedToMonitor\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function setDirectiveToContract(id, directiveNumber) {\r\n            var url = base + id + '/setDirective?directiveNumber=' + directiveNumber;\r\n            return RequestService(url).post();\r\n        }\r\n\r\n        function addContractMonitoringProvinceLevel(id, params) {\r\n            var url = base + id + '/addMonitoringInProvinceLevel';\r\n            return RequestService(url).post({}, params);\r\n        }\r\n\r\n        function addContractMonitoringStaffLevel(id, params) {\r\n            var url = base + id + '/addMonitoringInStaffLevel';\r\n            return RequestService(url).post({}, params);\r\n        }\r\n\t\r\n\t    function addContractMonitoringBranchLevel(id, params) {\r\n\t\t    var url = base + id + '/addMonitoringInBranchLevel';\r\n\t\t    return RequestService(url).post({}, params);\r\n\t    }\r\n\t\r\n\t    function toggleNeedToMonitor(id) {\r\n\t\t    var url = base + id + '/toggleNeedToMonitor';\r\n\t\t    return RequestService(url).put();\r\n\t    }\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 7/3/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.contract-list', {\r\n                controller: 'ContractListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/contract/contract-list.html',\r\n                resolve: {\r\n                    me: function (Principal) {\r\n                        return Principal.identity();\r\n                    }\r\n                },\r\n                params: {\r\n                    contractNumber: {dynamic: true},\r\n                    companyName: {dynamic: true},\r\n                    contractFromDate: {dynamic: true},\r\n                    contractToDate: {dynamic: true},\r\n                    minContractAmount: {dynamic: true},\r\n                    maxContractAmount: {dynamic: true},\r\n                    economicSectionIds: {dynamic: true},\r\n                    planTypes: {dynamic: true},\r\n                    provinceIds: {dynamic: true},\r\n                    contractType: {dynamic: true},\r\n                    settlementStateCode: {dynamic: true},\r\n                    needToMonitor: {dynamic: true},\r\n                    page: {dynamic: true},\r\n                    size: {dynamic: true},\r\n                    sort: {dynamic: true}\r\n                },\r\n                url: '/contracts?:contractNumber&:companyName&:contractFromDate&:contractToDate&:minContractAmount&:maxContractAmount&:economicSectionIds&:planTypes&:provinceIds&:contractType&:settlementStateCode&:needToMonitor&:page&:size&:sort'\r\n            })\r\n            .state('root.contract-details', {\r\n\t            controller: 'ContractDetailsModalController',\r\n\t            controllerAs: 'modalVm',\r\n\t            templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n\t            resolve: {\r\n\t\t            id: function ($stateParams) {\r\n\t\t\t            return $stateParams.contractId;\r\n\t\t            },\r\n\t\t            $uibModalInstance: function () {\r\n\t\t\t            return null;\r\n\t\t            },\r\n\t\t            fromMonitoring: function () {\r\n\t\t\t            return true;\r\n\t\t            }\r\n\t            },\r\n\t            params: {\r\n\t\t            contractId: {dynamic: false}\r\n\t            },\r\n\t            url: '/contract-details/{contractId}'\r\n            })\r\n\t        .state('root.contract-details-modal', {\r\n\t\t        url: '/contract-details-modal/{contractId}',\r\n                onEnter: ['$stateParams', '$state', '$uibModal','$window',\r\n                    function ($stateParams, $state, $uibModal,$window) {\r\n                        var modalInstance = $uibModal.open({\r\n                            animation: true,\r\n                            templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                            controller: 'ContractDetailsModalController',\r\n                            controllerAs: 'modalVm',\r\n                            size: 'lg',\r\n                            resolve: {\r\n                                id: function () {\r\n                                    return $stateParams.contractId;\r\n                                }\r\n                            }\r\n                        });\r\n                        modalInstance.result.then(\r\n                            function () {\r\n                                $window.history.back();\r\n                            });\r\n                    }]\r\n            });\r\n        $urlRouterProvider.when('/contracts/{path:.*}', '/contracts');\r\n    }\r\n\r\n})();\n/**\r\n * Created by ehejazi on 7/3/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract')\r\n        .controller('ContractController', ContractController);\r\n\r\n    /** @ngInject */\r\n    function ContractController($confirm, $q, $state, $log, $stateParams,  Util ) {\r\n        var vm = this;\r\n\r\n        vm.isActive = isActive;\r\n\r\n\r\n        active();\r\n\r\n        ////////////////\r\n\r\n        function active() {\r\n            $log.debug('ContractController module activated;');\r\n            vm.directiveId=$stateParams.directiveId;\r\n            vm.currentState = $state.$current.name;\r\n        }\r\n\r\n        function isActive(currentState) {\r\n            console.log('currentState = ',currentState );\r\n            console.log('$state.$current = ',$state.$current );\r\n            return $state.$current.name == currentState;\r\n        }\r\n\r\n    }\r\n})();\n/**\r\n * Created by ehejazi on 7/3/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.contract')\r\n        .controller('ContractListController', ContractListController);\r\n\r\n    /** @ngInject */\r\n    function ContractListController(NgTableParams, $log, $filter, me, $uibModal, ContractService, Util, $stateParams, $state, ReportService, ContractCodeService,\r\n                                    CreditSupplyResourceService, EconomicSectionService, ProvinceService, Principal, $q, ngTableEventsChannel, IsicService, $document) {\r\n        var vm = this;\r\n\r\n        vm.firstSearch = true;\r\n        vm.searchItem = {};\r\n        vm.economicSections = [];\r\n        vm.provinces = [];\r\n        vm.planTypes = Util.baseInfo('planTypes');\r\n        vm.contracts = [];\r\n        vm.codes = [];\r\n        vm.isicList = [];\r\n        vm.selectedContracts = [];\r\n        vm.resources = [];\r\n        vm.settlementStates = [\r\n            {code: null, title: 'همه‌ی موارد'},\r\n            {code: '1788', title: 'پرداخت تسهیلات'},\r\n            {code: '1791', title: 'تسویه شده'}\r\n        ];\r\n        vm.needToMonitoringStatusList = [\r\n            {status : 'terminatedMonitoring', title: 'نظارت انجام شده'},\r\n            {status: 'needToMonitoring', title: 'نیاز به نظارت دارد'},\r\n            {status: 'notNeedToMonitoring', title: 'نیاز به نظارت ندارد'}\r\n        ];\r\n        var newSearch = false;\r\n        var eNumber = $filter('eNumber');\r\n        var duration = 1000;\r\n        var offset = 30;\r\n\r\n\r\n        vm.openModal = openModal;\r\n        vm.openDetailsModal = openDetailsModal;\r\n        vm.cancelSearch = cancelSearch;\r\n        vm.search = search;\r\n        vm.backToTop = backToTop;\r\n        vm.planTypeKey = Util.getPlanTypeKey;\r\n        vm.toggleNeedMonitor = toggleNeedMonitor;\r\n        vm.selectAll = selectAll;\r\n        vm.exportContracts = exportContracts;\r\n        vm.refreshCodes = refreshCodes;\r\n        vm.getAllIsics = getAllIsics;\r\n        vm.searchCreditSupplyResources = searchCreditSupplyResources;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.info('contract module activated');\r\n\r\n            getAllIsics();\r\n            Principal.identity().then(function (data) {\r\n                vm.currentUser = data;\r\n                vm.searchItem.provinceIds = [];\r\n                if (vm.currentUser.level !== 'STAFF' && vm.currentUser.province) vm.searchItem.provinceIds.push(vm.currentUser.province.id);\r\n            });\r\n            window.onscroll = function () {\r\n                scrollFunction()\r\n            };\r\n\r\n            function scrollFunction() {\r\n                if (document.getElementById(\"toTopBtn\")) {\r\n                    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\r\n                        document.getElementById(\"toTopBtn\").style.display = \"block\";\r\n                    } else {\r\n                        document.getElementById(\"toTopBtn\").style.display = \"none\";\r\n                    }\r\n                }\r\n            }\r\n\r\n            $q.all([getAllEconomicSections(), getAllProvince()]).then(function () {\r\n                Principal.identity().then(function (currentUser) {\r\n                    // console.log('Initiating tableParams');\r\n                    if (currentUser.level === 'STAFF') {\r\n                        vm.searchItem.minContractAmount = vm.searchItem.minContractAmount || 1500000000;\r\n                    }\r\n                    var initialParams = {};\r\n                    if ($stateParams.page) initialParams.page = $stateParams.page;\r\n                    if ($stateParams.size) initialParams.count = $stateParams.size;\r\n                    vm.tableParams = new NgTableParams(initialParams, {\r\n                        counts: [5, 10, 20, 50, 100],\r\n                        getData: searchContract\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        function selectAll() {\r\n            var flag = vm.contracts.length === vm.contracts.filter(function (t) {\r\n                return t.selected\r\n            }).length;\r\n            vm.contracts.forEach(function (t) {\r\n                t.selected = !flag\r\n            });\r\n        }\r\n\r\n\r\n        var stateParams = $stateParams;\r\n        var pageStateSaved = false;\r\n\r\n        function searchContract(tParams) {\r\n            var startTime = moment();\r\n            vm.loading = true;\r\n            // console.log('searchContract',newSearch, pageStateSaved, tParams);\r\n            // console.log('searchContract', tParams);\r\n            //  if this is a new page go to page one\r\n            if (newSearch) {\r\n                newSearch = false;\r\n                tParams.page(1);\r\n            } else { // if this is not a new search, save its pagination data\r\n                if (pageStateSaved)  //  if pagination has been saved, just hit the flag and do nothing\r\n                    pageStateSaved = false;\r\n                else {  //  if pagination has not been saved\r\n                    pageStateSaved = true;  // hit the flag\r\n                    //  copy pagination data in the url\r\n                    var stateParamsCopy = angular.copy(stateParams);\r\n                    stateParamsCopy.page = tParams.page();\r\n                    stateParamsCopy.size = tParams.count();\r\n                    //  go to new extended url and reload the table\r\n                    $state.go($state.$current, stateParamsCopy).then(function () {\r\n                        stateParams = stateParamsCopy;\r\n                        vm.tableParams.reload();\r\n                    });\r\n                    return;\r\n                }\r\n\r\n            }\r\n\r\n            //  read params from table\r\n            var params = {\r\n                page: tParams.page() - 1,\r\n                size: tParams.count(),\r\n                sort: stateParams.sort ? stateParams.sort : \"contractDate,desc\"\r\n            };\r\n            //  check if there is any thing to sort\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n\r\n            //  read search items from stateParam\r\n            vm.searchItem.contractNumber = stateParams.contractNumber;\r\n            vm.searchItem.companyName = stateParams.companyName;\r\n\r\n            vm.contractFromDate = stateParams.contractFromDate;\r\n            vm.searchItem.contractFromDate = vm.contractFromDate;\r\n            vm.contractToDate = stateParams.contractToDate;\r\n            vm.searchItem.contractToDate = vm.contractToDate;\r\n\r\n            vm.searchItem.minContractAmount = stateParams.minContractAmount;\r\n            vm.searchItem.maxContractAmount = stateParams.maxContractAmount;\r\n\r\n            vm.searchItem.economicSectionIds = [];\r\n            if (stateParams.economicSectionIds) {\r\n                var ecIds = stateParams.economicSectionIds.split(',');\r\n                vm.searchItem.economicSectionIds = [];\r\n                ecIds.forEach(function (id) {\r\n                    vm.searchItem.economicSectionIds.push(parseInt(id, 10));\r\n                    vm.economicSections.forEach(function (es) {\r\n                        if (parseInt(id) === es.id)\r\n                            es.selected = true;\r\n                    });\r\n                });\r\n            }\r\n\r\n\r\n            vm.searchItem.planTypes = [];\r\n            if (stateParams.planTypes) {\r\n                var pTypes = stateParams.planTypes.split(',');\r\n                pTypes.forEach(function (plan) {\r\n                    vm.searchItem.planTypes.push(plan);\r\n                    vm.planTypes.forEach(function (pt) {\r\n                        if (plan === pt.value)\r\n                            pt.selected = true;\r\n                    })\r\n                })\r\n            }\r\n\r\n            if (stateParams.provinceIds) {\r\n                var pIds = stateParams.provinceIds.split(',');\r\n                vm.searchItem.provinceIds = [];\r\n                pIds.forEach(function (id) {\r\n                    vm.searchItem.provinceIds.push(parseInt(id, 10));\r\n                })\r\n            }\r\n            vm.searchItem.contractType = stateParams.contractType;\r\n            vm.searchItem.settlementStateCode = stateParams.settlementStateCode;\r\n\r\n\r\n            if (stateParams.needToMonitor === 'true' || stateParams.needToMonitor === true)\r\n                vm.searchItem.needToMonitor = true;\r\n            else\r\n                vm.searchItem.needToMonitor = undefined;\r\n\r\n            angular.forEach(vm.searchItem, function (value, key) {\r\n                if (value === \"\")\r\n                    vm.searchItem[key] = null;\r\n            });\r\n\r\n            // console.log('vm.searchItem', vm.searchItem);\r\n            //  send request based on user level\r\n            switch (me.level) {\r\n                case 'STAFF':\r\n                    return ContractService.searchContractStaff(vm.searchItem, params).then(successCallback, errorCallback);\r\n                case 'PROVINCE':\r\n                    return ContractService.searchContractProvince(vm.searchItem, params).then(successCallback, errorCallback);\r\n                case 'BRANCH':\r\n                    return ContractService.searchContractBranch(vm.searchItem, params).then(successCallback, errorCallback);\r\n                default:\r\n                    Util.toast('error', 'مشاهده لیست قراردادها به دلیل عدم تعیین سطح برای شما ممکن نیست');\r\n            }\r\n\r\n            function errorCallback(e) {\r\n                vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                vm.allRecordsCount = 0;\r\n                vm.totalAmount = 0;\r\n                vm.loading = false;\r\n                return e;\r\n            }\r\n\r\n            function successCallback(data) {\r\n                if (data) {\r\n                    tParams.total(data.page.totalElements);\r\n                    vm.allRecordsCount = data.page.totalElements;\r\n                    vm.totalAmount = data.aggregate.totalAmount;\r\n                    var searchResultContainer = angular.element(document.getElementById('search-result-container'));\r\n                    // console.log(vm.firstSearch);\r\n                    if (vm.firstSearch) vm.firstSearch = false;\r\n                    else $document.scrollToElement(searchResultContainer, offset, duration);\r\n                    vm.contracts = data.page.content;\r\n                    /*ContractService.getNeedToMonitors().then(function (needToMonitor) {\r\n                        vm.contracts.forEach(function (contract) {\r\n                            contract.needToMonitor = needToMonitor[contract.id] !== undefined ? needToMonitor[contract.id] : contract.needToMonitor;\r\n                        })\r\n                    }, function (reason) {\r\n                        Util.toast('error', 'Could not load contract-users');\r\n                    })*/\r\n                }\r\n                vm.fetchTime = Math.floor(moment().diff(startTime) / 1000) + ' ثانیه';\r\n                vm.loading = false;\r\n                // console.log(\"vm.contracts = \",vm.contracts);\r\n                return vm.contracts;\r\n            }\r\n        }\r\n\r\n        function getAllEconomicSections() {\r\n            return EconomicSectionService.getAllEconomicSections().then(\r\n                function (data) {\r\n                    vm.economicSections = data ? data : [];\r\n                    return vm.economicSections;\r\n                });\r\n\r\n        }\r\n\r\n        function getAllProvince() {\r\n            switch (me.level) {\r\n                case 'STAFF':\r\n                    return ProvinceService.getAllProvinces().then(\r\n                        function (data) {\r\n                            vm.provinces = data ? [].concat(data) : [];\r\n                            return vm.provinces;\r\n                        });\r\n                case 'PROVINCE':\r\n                    vm.disabledProvinceList = true;\r\n                    vm.provinces = [me.province];\r\n            }\r\n            /*return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? [].concat(data) : [];\r\n                    return vm.provinces;\r\n                });*/\r\n\r\n        }\r\n\r\n        function cancelSearch() {\r\n            vm.searchItem = {};\r\n            vm.economicSections.forEach(function (es) {\r\n                if (es.selected)\r\n                    es.selected = false;\r\n            });\r\n            vm.planTypes.forEach(function (es) {\r\n                if (es.selected)\r\n                    es.selected = false;\r\n            });\r\n            search();\r\n        }\r\n\r\n        function search() {\r\n            // console.log('search()');\r\n            newSearch = true;\r\n            var params = {};\r\n            params.contractNumber = eNumber(vm.searchItem.contractNumber);\r\n            params.companyName = vm.searchItem.companyName;\r\n\r\n            params.contractFromDate = vm.contractFromDate;\r\n            params.contractToDate = vm.contractToDate;\r\n\r\n            params.minContractAmount = vm.searchItem.minContractAmount;\r\n            params.maxContractAmount = vm.searchItem.maxContractAmount;\r\n\r\n            /*if(vm.searchItem.economicSectionIds && vm.searchItem.economicSectionIds.length) {\r\n                params.economicSectionIds = '';\r\n                vm.searchItem.economicSectionIds.forEach(function (id) {\r\n                    params.economicSectionIds += id+','\r\n                });\r\n                params.economicSectionIds = params.economicSectionIds.substr(0,params.economicSectionIds.length - 1);\r\n            } else {\r\n                params.economicSectionIds = null;\r\n            }*/\r\n            params.economicSectionIds = '';\r\n            vm.economicSections.forEach(function (es) {\r\n                if (es.selected)\r\n                    params.economicSectionIds += es.id + ',';\r\n            });\r\n            params.economicSectionIds = params.economicSectionIds.length ? params.economicSectionIds.substr(0, params.economicSectionIds.length - 1) : '';\r\n\r\n            /*if(vm.searchItem.planTypes) {\r\n                params.planTypes = '';\r\n                vm.searchItem.planTypes.forEach(function (id) {\r\n                    params.planTypes += id+','\r\n                });\r\n                params.planTypes = params.planTypes.substr(0,params.planTypes.length - 1);\r\n            } else {\r\n                params.planTypes = null;\r\n            }*/\r\n            params.planTypes = '';\r\n            vm.planTypes.forEach(function (pt) {\r\n                if (pt.selected)\r\n                    params.planTypes += pt.value + ',';\r\n            });\r\n            params.planTypes = params.planTypes.length ? params.planTypes.substr(0, params.planTypes.length - 1) : '';\r\n\r\n            if (vm.searchItem.provinceIds && vm.searchItem.provinceIds.length) {\r\n                params.provinceIds = '';\r\n                vm.searchItem.provinceIds.forEach(function (id) {\r\n                    params.provinceIds += id + ','\r\n                });\r\n                params.provinceIds = params.provinceIds.substr(0, params.provinceIds.length - 1);\r\n            } else {\r\n                params.provinceIds = null;\r\n            }\r\n            params.contractType = vm.searchItem.contractType;\r\n            params.settlementStateCode = vm.searchItem.settlementStateCode;\r\n\r\n            if (vm.searchItem.needToMonitor)\r\n                params.needToMonitor = true;\r\n            else {\r\n                params.needToMonitor = undefined;\r\n            }\r\n            params.page = 1;\r\n            params.size = vm.tableParams.count();\r\n\r\n            $state.go($state.$current, params).then(function () {\r\n                stateParams = params;\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        function openModal(id) {\r\n            console.log(\"id = \", id);\r\n            vm.selectedContracts = vm.contracts.filter(function (contract) {\r\n                return contract.selected;\r\n            });\r\n            if (!id && !vm.selectedContracts.length) {\r\n                Util.toast('error', 'ابتدا قراردادهای مورد نظر را انتخاب نمایید');\r\n                return;\r\n            }\r\n\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/add-monitoring-modal/add-monitoring.html',\r\n                controller: 'AddMonitoring',\r\n                controllerAs: 'AddMonitoring',\r\n                size: 'md',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    contractIds: function () {\r\n                        return vm.selectedContracts.map(function (c) {\r\n                            return c.id\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function openDetailsModal(id, fromMonitoring) {\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: 'app/components/contract/contract-details-modal/contract-details-modal.html',\r\n                controller: 'ContractDetailsModalController',\r\n                controllerAs: 'modalVm',\r\n                size: 'lg',\r\n                resolve: {\r\n                    id: function () {\r\n                        return id;\r\n                    },\r\n                    fromMonitoring: function () {\r\n                        return fromMonitoring;\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                },\r\n                function () {\r\n\r\n                });\r\n        }\r\n\r\n        /*function getPlanTypeKey(value) {\r\n            for (var i = 0; i < vm.planTypes.length; i++)\r\n                if (vm.planTypes[i] && vm.planTypes[i].value && vm.planTypes[i].value.indexOf(value) > -1)\r\n                    return vm.planTypes[i].key;\r\n        }*/\r\n\r\n        function toggleNeedMonitor(contract) {\r\n            contract.needToMonitor = !contract.needToMonitor;\r\n            ContractService.toggleNeedToMonitor(contract.id).then(function () {\r\n            });\r\n        }\r\n\r\n        function backToTop() {\r\n            var top = 0;\r\n            var duration = 2000;\r\n            $document.scrollTopAnimated(top, duration).then(function () {\r\n\r\n            });\r\n        }\r\n\r\n        function exportContracts(reportType) {\r\n            // prepareSearchItem();\r\n            var params = {\r\n                reportType: reportType,\r\n                extraSearchObj: vm.searchItem\r\n            };\r\n\r\n            ReportService.getReportNumber(params).then(function (reportNumber) {\r\n                vm.loading = true;\r\n                if (reportType) {\r\n                    var url = 'api/report/contractSearch?reportNumber=' + reportNumber;\r\n                    console.log(url);\r\n                    ReportService.getNonHtmlReport(url);\r\n                    Util.toast('info', 'Please wait to receive data');\r\n                }\r\n            });\r\n        }\r\n\r\n        function getAllIsics() {\r\n            IsicService.getAllIsics().then(function (data) {\r\n                vm.isicList = data || [];\r\n            });\r\n        }\r\n\r\n        function searchCreditSupplyResources(code) {\r\n            var params = {\r\n                page: 1,\r\n                size: 30,\r\n                code: code ? code : ''\r\n            };\r\n            CreditSupplyResourceService.searchCreditSupplyResourceCodesForBaseInfo(params).then(function (data) {\r\n                vm.resources = data.content || [];\r\n            });\r\n        }\r\n\r\n        function refreshCodes(q) {\r\n            return ContractCodeService.searchAll({query: q}).then(function (data) {\r\n                vm.codes = data || [];\r\n                return vm.codes;\r\n            });\r\n        }\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.conflict', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.conflict')\r\n        .factory('ConflictService', ConflictService);\r\n\r\n    /** @ngInject */\r\n    function ConflictService(RequestService) {\r\n        var base = 'conflict/';\r\n        return {\r\n            getInvoiceConflict:getInvoiceConflict ,\r\n            getAssuranceConflict: RequestService(base + 'getAssuranceConflict/').get,\r\n            getPaymentConflict: getPaymentConflict,\r\n            getDirLicenseConflicts: getDirLicenseConflicts\r\n        };\r\n        \r\n        function getInvoiceConflict(params) {\r\n            return RequestService(base + 'getInvoiceConflict/').get(params);\r\n        }\r\n\r\n        function getPaymentConflict(params) {\r\n            return RequestService(base + 'getPaymentConflict/').get(params);\r\n        }\r\n\r\n        function getAssuranceConflicts(params) {\r\n            return RequestService(base + 'getAssuranceConflict/').get(params);\r\n        }\r\n\r\n        function getDirLicenseConflicts(params) {\r\n            return RequestService(base + 'getLicenseConflict/').get(params);\r\n        }\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.checkList', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.checkList')\r\n        .factory('CheckListService', CheckListService);\r\n\r\n    /** @ngInject */\r\n    function CheckListService(RequestService) {\r\n        var base = 'baseInfo/checkList/';\r\n        var report = 'report';\r\n        var MCL = RequestService(base);\r\n        return {\r\n            getAllCheckList: MCL.get,\r\n            getCheckList: MCL.getById,\r\n            createCheckList: MCL.post,\r\n            updateCheckList: MCL.put,\r\n            deleteCheckList: MCL.delete,\r\n\r\n            getEnabledCheckList: getEnabledCheckList\r\n\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function getEnabledCheckList() {\r\n            return RequestService(base + 'getEnabledCheckList').get();\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.checkList')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.checkList', {\r\n                controller: 'CheckListController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/checkList/checkList.html',\r\n                url: '/checkList'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/checkList/{path:.*}', '/checkList');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('CheckListController', CheckListController);\r\n\r\n    /** @ngInject */\r\n    function CheckListController($log, CheckListService, NgTableParams, $confirm, Util) {\r\n        var vm = this;\r\n        vm.title = 'CheckList Controller';\r\n        vm.toggleAdd = false;\r\n        vm.checkList = [];\r\n\t    vm.enabled = true;\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllCheckList\r\n        });\r\n        vm.content = \"\";\r\n\r\n        vm.create = create;\r\n        vm.update = update;\r\n\t    vm.changeActivity = changeActivity;\r\n        //vm.delete = deleteCheckList;\r\n        vm.cancelAdd = cancelAdd;\r\n\t    vm.keyPressed = keyPressed;\r\n\r\n        activate();\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllCheckList();\r\n        }\r\n\r\n        function getAllCheckList() {\r\n            return CheckListService.getAllCheckList().then(\r\n                function (data) {\r\n                    vm.checkList = data ? data : [];\r\n\t                // console.log(\"vm.checkList : \", vm.checkList);\r\n                    return vm.checkList;\r\n                }\r\n            );\r\n        }\r\n\t\r\n\t    function create() {\r\n\t\t    if (!vm.content)\r\n\t\t\t    return;\r\n            var checkList = {\r\n\t            content: vm.content,\r\n                enabled: vm.enabled\r\n            };\r\n            return CheckListService.createCheckList(checkList).then(\r\n                function (data) {\r\n                    Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                    vm.toggleAdd = !vm.toggleAdd;\r\n                    vm.tableParams.reload();\r\n                    vm.content = \"\";\r\n                    vm.enabled = false;\r\n                    return data;\r\n                }\r\n            );\r\n        }\r\n\r\n        /*function deleteCheckList(id) {\r\n\t        $confirm().then(function () {\r\n\t\t        CheckListService.deleteCheckList(id).then(\r\n\t\t\t        function () {\r\n\t\t\t\t        Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n\t\t\t\t        vm.tableParams.reload();\r\n\t\t\t        });\r\n\t        });\r\n         \r\n        }*/\r\n\r\n        function update(item) {\r\n            CheckListService.updateCheckList(item.id, item).then(\r\n                function () {\r\n                    Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\t\r\n\t    function changeActivity(item) {\r\n\t\t    item.enabled = !item.enabled;\r\n\t\t    update(item);\r\n\t    }\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.content = '';\r\n        }\r\n\t\r\n\t    function keyPressed(event) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    create();\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.branch', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.branch')\r\n        .factory('BranchService', BranchService);\r\n\r\n    /** @ngInject */\r\n    function BranchService(RequestService) {\r\n        var base = 'baseInfo/branch/';\r\n        var BR = RequestService(base);\r\n        return {\r\n            getAllBranches: BR.get,\r\n            searchBranches: RequestService(base + 'search').post,\r\n            getBranch: BR.getById,\r\n            createBranch: BR.post,\r\n            updateBranch: BR.put,\r\n            deleteBranch: BR.delete\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.branch')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.branch', {\r\n                controller: 'BranchController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/branch/branch.html',\r\n                url: '/branch'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/branch/{path:.*}', '/branch');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.branch')\r\n        .controller('BranchController', BranchController);\r\n\r\n    /** @ngInject */\r\n    function BranchController($confirm, $log, NgTableParams, ProvinceService, BranchService, Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.Branches = [];\r\n        vm.branch = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n\t        counts: [5, 10, 20, 50, 100],\r\n            getData: getAllBranches\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n        vm.create = createBranch;\r\n        //vm.delete = deleteBranch;\r\n        vm.update = updateBranch;\r\n        vm.cancelAdd = cancelAdd;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n            getAllProvinces();\r\n        }\r\n\t\r\n\t    function getAllBranches(tParams) {\r\n\t\t    var params = {\r\n\t\t\t    page: tParams.page() - 1,\r\n\t\t\t    size: tParams.count()\r\n\t\t    };\r\n            //  check if there is any thing to sort\r\n            angular.forEach(tParams.sorting(), function (value, key) {\r\n                params.sort = key + \",\" + value;\r\n            });\r\n\r\n            var branch = {};\r\n            branch.code = parseInt(tParams.filter().code);\r\n            branch.title = tParams.filter().title;\r\n            branch.provinceId = tParams.filter().province ? tParams.filter().province : null;\r\n\r\n            return BranchService.searchBranches(branch, params).then(\r\n                function (data) {\r\n\t                vm.Branches = data ? data.content : [];\r\n\t                tParams.total(data.totalElements);\r\n                    return vm.Branches;\r\n                });\r\n        }\r\n\r\n        function getAllProvinces() {\r\n            return ProvinceService.getAllProvinces().then(\r\n                function (data) {\r\n                    vm.provinces = data ? data : [];\r\n                    return vm.provinces;\r\n                });\r\n        }\r\n\r\n        function createBranch() {\r\n            BranchService.createBranch(vm.branch).then(\r\n                function () {\r\n                    Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                    cancelAdd();\r\n                    vm.tableParams.reload();\r\n                });\r\n\r\n        }\r\n\r\n        /*function deleteBranch(id) {\r\n            $confirm().then(function () {\r\n                BranchService.deleteBranch(id).then(\r\n                    function () {\r\n                        Util.toast('success');\r\n                        vm.tableParams.reload();\r\n                    });\r\n            });\r\n        }*/\r\n\r\n        function updateBranch(item) {\r\n            BranchService.updateBranch(item.id, item).then(\r\n                function () {\r\n                    console.log('\\tsuccess');\r\n                    Util.toast('success');\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.branch = {};\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.baseInfo', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.baseInfo')\r\n        .factory('BaseInfoService', BaseInfoService);\r\n\r\n    /** @ngInject */\r\n    function BaseInfoService(RequestService) {\r\n        var base = 'baseInfo/baseInfo/';\r\n        var BR = RequestService(base);\r\n        return {\r\n            getAllBaseInfos: BR.get,\r\n            getBaseInfo: BR.getById,\r\n            updateBaseInfo: updateBaseInfo\r\n        };\r\n\r\n        ////////////////\r\n\r\n        function updateBaseInfo(baseInfo, id) {\r\n            var url = base + id;\r\n            return RequestService(url).put(null, baseInfo);\r\n        }\r\n\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.baseInfo')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.baseInfo', {\r\n                controller: 'BaseInfoController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/baseInfo/baseInfo.html',\r\n                url: '/baseInfo'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/baseInfo/{path:.*}', '/baseInfo');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.baseInfo')\r\n        .controller('BaseInfoController', BaseInfoController);\r\n\r\n    /** @ngInject */\r\n    function BaseInfoController($confirm, $log, NgTableParams, BaseInfoService, Util) {\r\n        var vm = this;\r\n        vm.baseInfos = [];\r\n        vm.baseInfo = {};\r\n\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllBaseInfos\r\n        });\r\n        vm.title = 'BaseInfo Controller';\r\n\r\n        activate();\r\n        vm.getAllBaseInfos = getAllBaseInfos;\r\n        vm.getBaseInfo = getBaseInfo;\r\n        vm.updateBaseInfo = updateBaseInfo;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllBaseInfos() {\r\n            return BaseInfoService.getAllBaseInfos().then(\r\n                function (data) {\r\n                    vm.baseInfos = data ? data : [];\r\n                    return vm.baseInfos;\r\n                });\r\n        }\r\n\r\n        function getBaseInfo(id) {\r\n            return BaseInfoService.getBaseInfo(id).then(\r\n                function (data) {\r\n                    vm.baseInfo = data ? data : {};\r\n                    return vm.baseInfo;\r\n                });\r\n        }\r\n\r\n        function updateBaseInfo(item) {\r\n            return BaseInfoService.updateBaseInfo(item, item.variable).then(\r\n                function (data) {\r\n                    vm.baseInfo = data ? data : {};\r\n                    vm.tableParams.reload();\r\n                    Util.toast('success');\r\n                    return vm.baseInfo;\r\n                });\r\n        }\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by a.arfaei on 4/9/2018.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('PrimaryUserService', PrimaryUserService);\r\n\r\n    /** @ngInject */\r\n    function PrimaryUserService(RequestService) {\r\n        var baseUser = 'userManagement/';\r\n\r\n        var service = {\r\n            getLogin: RequestService(baseUser + 'secure/login').post\r\n        };\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider) {\r\n        $stateProvider\r\n            .state('login', {\r\n                controller: 'LoginController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/auth/login/login.html',\r\n                url: '/login',\r\n                data: {\r\n                    containerClass: 'login-background'\r\n                },\r\n                onEnter: function ($rootScope) {\r\n                    $rootScope.containerClass = 'login-background';\r\n                },\r\n                onExit: function ($rootScope) {\r\n                    $rootScope.containerClass = '';\r\n                }\r\n            })\r\n            .state('register', {\r\n                controller: 'RegisterController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/auth/register/register.html',\r\n                url: '/register'\r\n            })\r\n            .state('forgetPass', {\r\n                controller: 'ForgetPassController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/auth/forget-pass/forget-pass.html',\r\n                url: '/forget-pass'\r\n            })\r\n            .state('resetPass', {\r\n                controller: 'ResetPassController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/auth/reset-pass/reset-pass.html',\r\n                url: '/reset-pass'\r\n            })\r\n\r\n            //errors states\r\n            .state('unauthorized', {\r\n                url: '/401',\r\n                templateUrl: 'app/components/auth/errors/401.html'\r\n            })\r\n            .state('notFound', {\r\n                url: '/404',\r\n                templateUrl: 'app/components/auth/errors/404.html'\r\n            })\r\n            .state('internalServerError', {\r\n                url: '/500',\r\n                templateUrl: 'app/components/auth/errors/500.html'\r\n            })\r\n\r\n        ;\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .factory('RequestService', RequestService);\r\n\r\n    /** @ngInject */\r\n    function RequestService($http, $state, $httpParamSerializer, $q, $timeout, host, Util) {\r\n        return theService;\r\n\r\n        function theService(base) {\r\n            var url = host + base;\r\n\r\n            var service = {\r\n                'delete': delet,\r\n                'get': get,\r\n                'getById': getById,\r\n                'multipartPost': multipartPost,\r\n                'multipartPut': multipartPut,\r\n                'post': post,\r\n                'put': put,\r\n                'xPost': xPost,\r\n                'xPut': xPut\r\n            };\r\n\r\n            return service;\r\n\r\n            function delet(id, params) {\r\n                var path = id ? (url + id ) : url;\r\n                return $http.delete(path, {params: params})\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function get(params) {\r\n                var URL = url[url.length - 1] === '/' ? url.substr(0, url.length - 1) : url;\r\n                return $http.get(URL, {params: params})\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function getById(id, params) {\r\n                return $http.get(url + id, {params: params})\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function multipartPost(data, params) {\r\n                var config = {\r\n                    headers: {'Content-Type': undefined},\r\n                    params: params,\r\n                    transformRequest: transformRequest\r\n                };\r\n                var URL = url[url.length - 1] === '/' ? url.substr(0, url.length - 1) : url;\r\n                return $http.post(URL, data, config)\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function multipartPut(id, data, params) {\r\n                var config = {\r\n                    headers: {'Content-Type': undefined},\r\n                    params: params,\r\n                    transformRequest: transformRequest\r\n                };\r\n                var URL = id ? url + id : url;\r\n                return $http.put(URL, data, config)\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function post(data, params) {\r\n                var URL = url[url.length - 1] === '/' ? url.substr(0, url.length - 1) : url;\r\n                return $http.post(URL, data, {params: params})\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function put(id, data, params) {\r\n                var URL = id ? url + id : url;\r\n                return $http.put(URL, data, {params: params})\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function xPost(data, params) {\r\n                var config = {\r\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n                    params: params\r\n                };\r\n                var URL = url[url.length - 1] === '/' ? url.substr(0, url.length - 1) : url;\r\n                return $http.post(URL, $httpParamSerializer(data), config)\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n            function xPut(id, data, params) {\r\n                var config = {\r\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n                    params: params\r\n                };\r\n                var URL = id ? url + id : url;\r\n                return $http.put(URL, $httpParamSerializer(data), config)\r\n                    .then(successCallback).catch(errorCallback);\r\n            }\r\n\r\n        }\r\n\r\n        function errorCallback(response) {\r\n            var message = (response && response.data && response.data.message) ? response.data.message : '';\r\n            if (message.indexOf('Could not read document: Unexpected character') > -1)\r\n                message = 'xss error message';\r\n            if (message.length) {\r\n                Util.toast('error', message);\r\n            }\r\n            $timeout(function () {\r\n                if (response && response.status && response.status === 401) {\r\n                    if ($state.$current.name !== \"login\")\r\n                        window.location.reload();\r\n                }\r\n\r\n            }, 2000);\r\n\r\n\r\n            return $q.reject(response);\r\n        }\r\n\r\n        function successCallback(response) {\r\n            if (response && response.data)\r\n                return response.data;\r\n        }\r\n\r\n        function transformRequest(data) {\r\n            var formData = new FormData();\r\n            for (var key in data) {\r\n                if (data.hasOwnProperty(key)) {\r\n                    formData.append(key, data[key]);\r\n                }\r\n            }\r\n            return formData;\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name auth.factory:Principal\r\n     * @description\r\n     * # Principal\r\n     */\r\n    angular\r\n        .module('auth')\r\n        .factory('Principal', Principal);\r\n\r\n    /** @ngInject */\r\n    function Principal($log, $http, $q, $state, $rootScope, host, RequestService,Util) {\r\n        var _identity;\r\n        var _authenticated = false;\r\n        var identityDeferred;\r\n\r\n        return {\r\n            authorize: authorize,\r\n            authenticate: authenticate,\r\n            isAuthenticated: isAuthenticated,\r\n            isInRole: isInRole,\r\n            isInAnyRole: isInAnyRole,\r\n            identity: identity,\r\n            getIdentity: getIdentity,\r\n            login: login,\r\n            logout: logout,\r\n            getRole: getRole,\r\n            isMerchant: isMerchant,\r\n            resetDefer: resetDefer,\r\n            getMyPermissions: getMyPermissions\r\n        };\r\n\r\n        function authorize() {\r\n            // $log.info('Principal.authorize');\r\n            return identity().then(\r\n                function () {\r\n                    // $log.info('$rootScope.toState', $rootScope.toState);\r\n                    if ($rootScope.toState && $rootScope.toState.data &&\r\n                        $rootScope.toState.data.roles &&\r\n                        $rootScope.toState.data.roles.length > 0\r\n                        && !isInAnyRole($rootScope.toState.data.roles)) {\r\n                        if (isAuthenticated()) {\r\n                            console.log('user is signed in but not authorized for desired state');\r\n                            $state.go('unauthorized');\r\n                        } else {\r\n                            console.log('user is not authenticated. It`s impossible, there must be an error!');\r\n                            $rootScope.returnToState = $rootScope.toState;\r\n                            $rootScope.returnToStateParams = $rootScope.toParams;\r\n                            $state.go('login');\r\n                        }\r\n                    }\r\n                    // console.log('Authorization was successful');\r\n                },\r\n                function () {\r\n                    $state.go('login');\r\n                });\r\n        }\r\n\r\n        function authenticate(identity) {\r\n            $log.info('authenticate : ', identity);\r\n            _identity = identity;\r\n            _authenticated = (identity !== null);\r\n        }\r\n\r\n        function isAuthenticated() {\r\n            return _authenticated;\r\n        }\r\n\r\n        function isInRole(role) {\r\n            if (!_authenticated || !_identity.roles) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < _identity.roles.length; i += 1) {\r\n                if (_identity.roles[i].role === role) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function isInAnyRole(roles) {\r\n            if (!_authenticated || !_identity.roles) {\r\n                return false;\r\n            }\r\n\r\n            for (var i = 0; i < roles.length; i += 1) {\r\n                if (isInRole(roles[i])) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function identity(force) {\r\n            if (identityDeferred)\r\n                return identityDeferred.promise;\r\n\r\n            identityDeferred = $q.defer();\r\n\r\n            if (force === true) {\r\n                console.log('_identity set to undefined');\r\n                _identity = undefined;\r\n                _authenticated = false;\r\n            }\r\n\r\n            // check and see if we have retrieved the identity data from the server.\r\n            // if we have, reuse it by immediately resolving\r\n            if (angular.isDefined(_identity)) {\r\n                console.log('_identity is resolved');\r\n                identityDeferred.resolve(_identity);\r\n                return identityDeferred.promise;\r\n            }\r\n\r\n            // otherwise, retrieve the identity data from the server,\r\n            // update the identity object, and then resolve.\r\n            $http.get(host + 'userManagement/getCurrentUser').then(successCallback).catch(errorCallback);\r\n\r\n            function errorCallback(response) {\r\n                $state.go('login');\r\n                identityDeferred.reject(response);\r\n                identityDeferred = null;\r\n            }\r\n\r\n            function successCallback(response) {\r\n                if (response.status === 200) {\r\n                    //if first login is false back to login page\r\n                    console.log('-----------successCallback at identity----------',response.data);\r\n                    if (!response.data.firstLogin) {\r\n                        var text = 'کاربر موظف به تغییر پسورد می باشد! ';\r\n                        Util.toast('error', text);\r\n                        _authenticated = true;\r\n                        _identity = response.data;\r\n                        identityDeferred.resolve(_identity);\r\n                        $state.go('login');\r\n                    }\r\n                    else{\r\n                        _authenticated = true;\r\n                        _identity = response.data;\r\n                        identityDeferred.resolve(_identity);\r\n                    }\r\n\r\n\r\n                } else {\r\n                    errorCallback();\r\n                }\r\n            }\r\n\r\n            return identityDeferred.promise;\r\n        }\r\n\r\n        function resetDefer() {\r\n            identityDeferred = null;\r\n        }\r\n\r\n        function getIdentity() {\r\n            return _identity;\r\n        }\r\n\r\n        function login(data) {\r\n            return RequestService('login').xPost(data);\r\n            /*     .finally(function () {\r\n                $state.go($rootScope.previousState.name, $rootScope.previousParams);\r\n             });*/\r\n        }\r\n\r\n        function logout() {\r\n            RequestService('logout').post().finally(function () {\r\n                // console.log('logout');\r\n                _identity = undefined;\r\n                _authenticated = false;\r\n                identityDeferred = null;\r\n                $state.go('login');\r\n            });\r\n        }\r\n\r\n        function getRole(user) {\r\n            var identity = user ? user : _identity;\r\n            if (!identity || !identity.roles || !identity.roles.length)\r\n                return null;\r\n            var score = {\r\n                'BRANCH': 0,\r\n                'MERCHANT': 1,\r\n                'PROVINCE': 2,\r\n                'ADMIN': 3\r\n            };\r\n            var res = identity.roles[0];\r\n            identity.roles.forEach(function (role) {\r\n                if (score[role.role] > score[res.role])\r\n                    res = role;\r\n            });\r\n\r\n            return res;\r\n        }\r\n\r\n        function isMerchant(user) {\r\n            var identity = user ? user : _identity;\r\n            if (!_identity || !_identity.roles || !_identity.roles.length)\r\n                return null;\r\n            var res = false;\r\n            _identity.roles.forEach(function (role) {\r\n                if (role.role === 'MERCHANT')\r\n                    res = true;\r\n            });\r\n\r\n            return res;\r\n        }\r\n\r\n        function getMyPermissions() {\r\n            return RequestService('userManagement/getMyPermissions').get();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('auth')\r\n        .factory('authInterceptor', authInterceptor);\r\n\r\n    /** @ngInject */\r\n    function authInterceptor($log, $q, $injector) {\r\n        var Authentication = {\r\n            request: onRequest,\r\n            response: onResponse,\r\n            responseError: onResponseError\r\n        };\r\n\r\n        return Authentication;\r\n\r\n        ////////////////\r\n\r\n        function onRequest(config) {\r\n            var deferred = $q.defer();\r\n            // promise that should abort the request when resolved.\r\n            config.timeout = deferred.promise;\r\n            config.cancel = deferred;\r\n            return config;\r\n        }\r\n\r\n        function onResponse(response) {\r\n            return response || $q.when(response);\r\n        }\r\n\r\n        function onResponseError(response) {\r\n            var stateService = $injector.get('$state');\r\n            if (response.status === 401) {\r\n                // user is not authenticated\r\n                $log.error('user is not authenticated', response);\r\n                //stateService.go('login');\r\n            }\r\n            if (response.status === 403) {\r\n                // user is not authenticated\r\n                $log.error('operation forbidden', response);\r\n                // stateService.go('unauthorized');\r\n            }\r\n\r\n            // if (response.status === 404) {\r\n            //     $log.error('request is not found', response);\r\n            //      stateService.go('notFount');\r\n            // }\r\n\r\n            return $q.reject(response);\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.assurance-type', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n/**\r\n * Created by m.ahmadi on 4/3/2017.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.assurance-type')\r\n        .factory('AssuranceTypeService', AssuranceTypeService);\r\n\r\n    /** @ngInject */\r\n    function AssuranceTypeService(RequestService) {\r\n        var base = 'baseInfo/assuranceType/';\r\n        var ATR = RequestService(base);\r\n        return {\r\n            getAllAssuranceTypes: ATR.get,\r\n            getAssuranceType: ATR.getById,\r\n            createAssuranceType: ATR.post,\r\n            updateAssuranceType: ATR.put,\r\n            deleteAssuranceType: ATR.delete,\r\n            getAllAssurances: ATR.get\r\n        };\r\n\r\n        ////////////////\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.assurance-type')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root.assurance-type', {\r\n                controller: 'AssuranceTypeController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/components/assurance-type/assurance-type.html',\r\n                url: '/assurance-type'\r\n            })\r\n        ;\r\n        $urlRouterProvider.when('/assurance-type/{path:.*}', '/assurance-type');\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('AssuranceTypeController', AssuranceTypeController);\r\n\r\n    /** @ngInject */\r\n    function AssuranceTypeController($confirm, $log, NgTableParams, AssuranceTypeService, Util) {\r\n        var vm = this;\r\n        vm.directive = {};\r\n        vm.assuranceTypes = [];\r\n        vm.assuranceType = {};\r\n        vm.tableParams = new NgTableParams({}, {\r\n            counts: [],\r\n            getData: getAllAssuranceTypes\r\n        });\r\n        vm.title = 'Directive List Controller';\r\n        vm.toggleAdd = false;\r\n        activate();\r\n\r\n        vm.create = createAssuranceType;\r\n        //vm.delete = deleteAssuranceType;\r\n        vm.update = updateAssuranceType;\r\n        vm.cancelAdd = cancelAdd;\r\n\t    vm.keyPressed = keyPressed;\r\n\r\n        ////////////////\r\n\r\n        function activate() {\r\n            $log.log(vm.title);\r\n        }\r\n\r\n        function getAllAssuranceTypes(tParams) {\r\n            var params = {\r\n                directive: tParams.filter().directive ? tParams.filter().directive : null\r\n            };\r\n            return AssuranceTypeService.getAllAssuranceTypes(params).then(\r\n                function (data) {\r\n                    vm.assuranceTypes = data ? data : [];\r\n                    return vm.assuranceTypes;\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        function createAssuranceType() {\r\n\t        if (!vm.assuranceType.type || !vm.assuranceType.acceptedPercent)\r\n\t\t        return;\r\n            AssuranceTypeService.createAssuranceType(vm.assuranceType).then(function () {\r\n                Util.toast(\"success\", \"APP.MESSAGES.SUCCESS\");\r\n                vm.toggleAdd = !vm.toggleAdd;\r\n\t            vm.assuranceType = {};\r\n                vm.tableParams.reload();\r\n            });\r\n\r\n        }\r\n\r\n        /*function deleteAssuranceType(id) {\r\n\t        $confirm().then(function () {\r\n\t\t        AssuranceTypeService.deleteAssuranceType(id).then(\r\n\t\t\t        function () {\r\n\t\t\t\t        vm.tableParams.reload();\r\n\t\t\t        });\r\n\t        });\r\n        }*/\r\n\r\n        function updateAssuranceType(item) {\r\n            AssuranceTypeService.updateAssuranceType(item.id, item).then(\r\n                function () {\r\n                    vm.tableParams.reload();\r\n                });\r\n        }\r\n\r\n        function cancelAdd() {\r\n            vm.toggleAdd = !vm.toggleAdd;\r\n            vm.assuranceType = {};\r\n        }\r\n\t\r\n\t    function keyPressed(event) {\r\n\t\t    if (event.keyCode === 13) {\r\n\t\t\t    createAssuranceType();\r\n\t\t    }\r\n\t    }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('MainController', MainController);\r\n\r\n    /** @ngInject */\r\n    function MainController($document, $translate, toastr) {\r\n        var firstLogin = $document[0].cookie.replace(\r\n            /(?:(?:^|.*;\\s*)firstLogin\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1'\r\n        );\r\n\r\n        activate();\r\n\r\n        function activate() {\r\n            if (!firstLogin) {\r\n                $document[0].cookie = 'firstLogin=true';\r\n                $translate('APP.MESSAGES.WELCOME').then(function (msg) {\r\n                    toastr.info(msg);\r\n                }, function (msg) {\r\n                    toastr.info(msg);\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('Util', Util);\r\n\r\n    /** @ngInject */\r\n    function Util($log, $translate, toastr, moment, $filter) {\r\n\r\n        var service = {\r\n            compareObjects: compareObjects,\r\n            toast: toast,\r\n            transformRequest: transformRequest,\r\n\t        sDate: sDate,\r\n            jDate: $filter('jDate'),\r\n            pNumber: $filter('pNumber'),\r\n            eNumber: $filter('eNumber'),\r\n\t        baseInfo: baseInfo,\r\n\t        indexOf: indexOf,\r\n\t        getPlanTypeKey: getPlanTypeKey,\r\n            encodeCredential:encodeCredential\r\n        };\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n        function compareObjects(object1, object2) {\r\n            return angular.toJson(object1) === angular.toJson(object2);\r\n        }\r\n\r\n        function toast(type, text, title) {\r\n            if ((type === 'success') && !text) {\r\n                text = 'APP.MESSAGES.SUCCESS';\r\n            }\r\n            if ((type === 'error') && !text) {\r\n                text = 'APP.ERRORS.FAIL';\r\n            }\r\n            $translate(text).then(toaster, toaster);\r\n            function toaster(msg) {\r\n                switch (type) {\r\n                    case 'error':\r\n                        if (msg)\r\n                            toastr.error(msg);\r\n                        if (title)\r\n                            $log.error(title);\r\n                        break;\r\n                    case 'info':\r\n                        if (msg)\r\n                            toastr.info(msg);\r\n                        if (title)\r\n                            $log.info(title);\r\n                        break;\r\n                    case 'success':\r\n                        if (msg)\r\n                            toastr.success(msg);\r\n                        if (title)\r\n                            $log.log(title);\r\n                        break;\r\n                    case 'warn':\r\n                        if (msg)\r\n                            toastr.warning(msg);\r\n                        if (title)\r\n                            $log.warn(title);\r\n                        break;\r\n                    default:\r\n                        if (msg)\r\n                            toastr.info(msg);\r\n                        if (title)\r\n                            $log.info(title);\r\n                }\r\n            }\r\n        }\r\n\r\n        function transformRequest(data) {\r\n            var formData = new FormData();\r\n            angular.forEach(data, function (value, key) {\r\n                formData.append(key, value);\r\n            });\r\n\r\n            return formData;\r\n        }\r\n\r\n        function sDate(date) {\r\n            return date ? moment(date, 'jYYYY-jMM-jDD').format('YYYY-MM-DD') : null;\r\n        }\r\n\t\r\n\t    function baseInfo(key) {\r\n\t\t    var data = {\r\n\t\t\t    \"planTypes\": [\r\n\t\t\t\t    {value: 'ايجادي', title: \"ایجادی\", key: 'OPENING'},\r\n\t\t\t\t    {value: 'تکميلي', title: \"تکمیلی\", key: 'SUPPLEMENTARY'},\r\n\t\t\t\t    {value: 'توسعه اي', title: 'توسعه‌ای', key: 'DEVELOPMENT'},\r\n                    {value: 'تعمير', title: \"تعمیر\", key: 'DEVELOPMENT'},\r\n                    {value: 'خريد مسکن', title: \"خرید مسکن\", key: 'DEVELOPMENT'},\r\n                    {value: 'درحال بهره برداي', title: \"در حال بهره برداری\", key: 'OPERATIONAL'},\r\n                    {value: 'تامين سرمايه در گردش', title: \"تأمین سرمایه در گردش\", key: 'OPERATIONAL'},\r\n                    {value: 'خريد', title: 'خرید', key: 'OPERATIONAL'},\r\n                    {value: 'خريد کالاهاي مصرفي شخصي', title: \"خرید کالاهای مصرفی شخصی\", key: 'OTHER'},\r\n                    {value: 'برگشت اسناد اعتبار', title: \"برگشت اسناد اعتبار\", key: 'OTHER'},\r\n                    {value: 'ساير', title: \"سایر\", key: 'OTHER'}\r\n\t\t\t    ],\r\n                \"activenessStatuses\": [\r\n                    {value: \"فعال\", title: \"فعال\", key: \"ACTIVE\"},\r\n                    {value: \"نیمه‌فعال\", title: \"نیمه‌فعال\", key: \"SEMI_ACTIVE\"},\r\n                    {value: \"غیرفعال\", title: \"غیرفعال\", key: \"INACTIVE\"},\r\n                    {value: \"طرح در دست اجرا\", title: \"طرح در دست اجرا\", key: \"UNDERWAY\"}\r\n                ],\r\n\t\t\t    \"warnings\": [\r\n\t\t\t\t    {value: 2, 'title': '۱ تا ۲ روز', key: 'b-warning-0'},\r\n\t\t\t\t    {value: 4, 'title': '۳ تا ۴ روز', key: 'b-warning-1'},\r\n\t\t\t\t    {value: 4, 'title': '۵ تا ۶ روز', key: 'b-warning-2'},\r\n\t\t\t\t    {value: 8, 'title': '۷ تا ۸ روز', key: 'b-warning-3'},\r\n\t\t\t\t    {value: 10, 'title': '۹ تا ۱۰ روز', key: 'b-warning-4'},\r\n\t\t\t\t    {value: 12, 'title': '۱۱ تا ۱۲ روز', key: 'b-warning-5'}\r\n\t\t\t    ],\r\n                \"standardPlanTypes\": [\r\n                    {value: \"OPENING\", title: \"ایجادی\"},\r\n                    {value: \"SUPPLEMENTARY\", title: \"تکمیلی\"},\r\n                    {value: \"DEVELOPMENT\", title: \"توسعه ای\"},\r\n                    {value: \"OPERATIONAL\", title: \"در حال بهره برداری\"},\r\n                    {value: \"OTHER\", title: \"سایر\"}\r\n                ]\r\n\t\t    };\r\n\t\t\r\n\t\t    return data[key];\r\n\t    }\r\n\t\r\n\t    function getPlanTypeKey(value) {\r\n\t\t    for (var i = 0; i < baseInfo('planTypes').length; i++)\r\n\t\t\t    if (baseInfo('planTypes')[i] && baseInfo('planTypes')[i].value && baseInfo('planTypes')[i].value.indexOf(value) > -1)\r\n\t\t\t\t    return baseInfo('planTypes')[i].key;\r\n\t    }\r\n\t\r\n\t    function indexOf(array, object, key) {\r\n\t\t    // console.log('indexOf', object, key);\r\n\t\t    if (key && Array.isArray(key)) {\r\n\t\t\t    if (key.length === 0)\r\n\t\t\t\t    return -1;\r\n\t\t\t    if (key.length === 1)\r\n\t\t\t\t    return indexOf(array, key[0]);\r\n\t\t\t    var newKey = key.subarray(1);\r\n\t\t\t    var newArray = array.map(function (item) {\r\n\t\t\t\t    return item[key[0]]\r\n\t\t\t    });\r\n\t\t\t    return indexOf(newArray, newKey);\r\n\t\t    } else if (key) {\r\n\t\t\t    for (var i = 0; i < array.length; i++) {\r\n\t\t\t\t    // console.log(array[i][key], object, array[key] === object)\r\n\t\t\t\t    if (array[i][key] === object)\r\n\t\t\t\t\t    return i;\r\n\t\t\t    }\r\n\t\t\t    return -1;\r\n\t\t    } else {\r\n\t\t\t    return array.indexOf(object);\r\n\t\t    }\r\n\t\t\r\n\t    }\r\n\r\n        function encodeCredential(input) {\r\n            var newEncode = [], count;\r\n            var encoded = btoa(input); // base64 encode it\r\n            newEncode = encoded.split('');\r\n            if (newEncode [newEncode.length - 1] === \"=\" && newEncode[(newEncode.length - 2)] === \"=\") {\r\n                count = 2;\r\n            } else if (newEncode [newEncode.length - 1] === \"=\" && newEncode[(newEncode.length - 2)] != \"=\") {\r\n                count = 1;\r\n            } else count = 0;\r\n\r\n            var newInput1 = encoded.substring(0, encoded.length - count);\r\n            var rand = (Math.floor(Math.random() * 1000000)).toString();\r\n            var digit1 = rand.substring(rand.length, rand.length - 1);\r\n            var digit2 = rand.substring(rand.length - 1, rand.length - 2);\r\n            var newInput2 = (newInput1.substring(0, 1)) + digit1;\r\n            var newInput3 = (newInput1.substring(1, 2)) + digit2;\r\n            var newInput5 = (newInput1.substring(2, encoded.length - count));\r\n            var endNewInput = newInput2 + newInput3 + newInput5 + count;\r\n\r\n            return endNewInput;\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .run(runBlock);\r\n\r\n    /** @ngInject */\r\n    function runBlock($log, $transitions, $confirmModalDefaults, $http, $window, $rootScope, ngTableDefaults, Principal,\r\n                      $mdMedia, $timeout, SizeService) {\r\n\r\n        //body class\r\n\r\n        //check media\r\n        $rootScope.getMedia = $mdMedia;\r\n\r\n        //set confirm default\r\n        $confirmModalDefaults.templateUrl = 'app/directives/confirm/confirm-tpl.html';\r\n        $confirmModalDefaults.defaultLabels.title = '';\r\n        $confirmModalDefaults.defaultLabels.ok = 'بله';\r\n        $confirmModalDefaults.defaultLabels.cancel = 'خیر';\r\n        $confirmModalDefaults.size = 'sm';\r\n\r\n        //ng-table default\r\n        ngTableDefaults.params.count = 20;\r\n        ngTableDefaults.settings.counts = [10, 20, 40, 60, 80, 100];\r\n        ngTableDefaults.settings.paginationMaxBlocks = 5;\r\n        ngTableDefaults.settings.paginationMinBlocks = 2;\r\n\r\n        // var startStateChange = $rootScope.$on('$stateChangeStart', stateChangeStart);\r\n        // var successStateChange = $rootScope.$on('$stateChangeSuccess', stateChangeSuccess);\r\n\r\n        $log.debug('runBlock end');\r\n\r\n        $rootScope.$on('$destroy', destroy);\r\n\r\n        function destroy() {\r\n            console.log('destroy');\r\n            // startStateChange();\r\n            // successStateChange();\r\n        }\r\n\r\n        $transitions.onStart({to: '**'}, function (trans) {\r\n            // console.log('stateChangeStart', trans);\r\n            var toState = trans._targetState;\r\n            var toParams = trans._targetState._params;\r\n            /*$http.pendingRequests.forEach(function (request) {\r\n                if (request.cancel && request.url.indexOf('/data/lang/') === -1) {\r\n                    request.cancel.resolve();\r\n                }\r\n            });*/\r\n            $timeout(function () {\r\n                var bodySize = SizeService.getBodySize();\r\n                var wrapperSize = [0, 0];   //  SizeService.getContentWrapperSize();\r\n                var getCriterionSize = SizeService.getCriterionSize();\r\n                // console.log('sizes', parseInt(bodySize[0]), parseInt(wrapperSize[0]), parseInt(getCriterionSize[0]));\r\n                var ch = Math.max(/*parseInt(bodySize[0]),*/ parseInt(wrapperSize[0]), parseInt(getCriterionSize[0]));\r\n                $rootScope.calculatedNavWrapperStyle = {\r\n                    'min-height': ch - 105\r\n                };\r\n                $rootScope.calculatedMainWrapperStyle = {\r\n                    'min-height': ch - 200\r\n                };\r\n            }, 3000);\r\n            if (toState.name !== 'login') {\r\n                $rootScope.previousState = toState;\r\n                $rootScope.previousParams = toParams;\r\n                Principal.authorize();\r\n            }\r\n        });\r\n\r\n        /*function stateChangeStart(event, toState, toParams) {\r\n            console.log('stateChangeStart', toState.name);\r\n            $http.pendingRequests.forEach(function (request) {\r\n                if (request.cancel && request.url.indexOf('/data/lang/') === -1) {\r\n                    request.cancel.resolve();\r\n                }\r\n            });\r\n            if (toState.name !== 'login') {\r\n                $rootScope.previousState = toState;\r\n                $rootScope.previousParams = toParams;\r\n                Principal.authorize();\r\n            }\r\n        }*/\r\n\r\n        $transitions.onSuccess({to: '**'}, function () {\r\n            $window.scrollTo(0, 0);\r\n        });\r\n        /* /!** @ngInject *!/\r\n         function stateChangeSuccess() {\r\n             $window.scrollTo(0, 0);\r\n         }*/\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('root', {\r\n                abstract: true,\r\n                controller: 'MainController',\r\n                controllerAs: 'vm',\r\n                resolve: {\r\n                    identity: identity\r\n                },\r\n                templateUrl: 'app/main/main.html'\r\n            })\r\n            .state('root.home', {\r\n                controller: 'HomeController',\r\n                controllerAs: 'vm',\r\n                data: {\r\n                    roles: []\r\n                },\r\n                resolve: {},\r\n                templateUrl: 'app/components/home/home.html',\r\n                url: '/'\r\n            })\r\n        ;\r\n        $urlRouterProvider.otherwise('/');\r\n    }\r\n\r\n    /** @ngInject */\r\n    function identity(Principal) {\r\n        return Principal.identity();\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(local);\r\n\r\n    /** @ngInject */\r\n    function local($translateProvider) {\r\n        $translateProvider.useSanitizeValueStrategy('escape');\r\n        $translateProvider.useStaticFilesLoader({\r\n            prefix: '/data/lang/',\r\n            suffix: '.json'\r\n        });\r\n\r\n        // add translation table\r\n        $translateProvider\r\n            .preferredLanguage('fa_IR_4')\r\n            .fallbackLanguage('fa_IR_4');\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .filter('eNumber', eNumber)\r\n        .filter('jDate', jDate)\r\n        .filter('mDate', mDate)\r\n        .filter('jeDate', jeDate)\r\n        .filter('jDateFromString', jDateFromString)\r\n        .filter('jDateTime', jDateTime)\r\n        .filter('pCurrency', pCurrency)\r\n        .filter('pNumber', pNumber)\r\n        .filter('pNumberR', pNumberR)\r\n        .filter('pPercent', pPercent)\r\n        .filter('pDistance', pDistance)\r\n        .filter('propsFilter', propsFilter)\r\n        .filter('sDate', sDate)\r\n        .filter('status', status)\r\n        .filter('trueFalse', trueFalse)\r\n        .filter('trustedHtml', trustedHtml)\r\n        .filter('trustedUrl', trustedUrl)\r\n        .filter('objectiveStatus', objectiveStatus)\r\n        .filter('objectivePeriod', objectivePeriod)\r\n        .filter('unit', unit)\r\n        .filter('measure', measure)\r\n        .filter('periodTag', periodTag)\r\n        .filter('pDigitWord', pDigitWord)\r\n        .filter('role', showRoles)\r\n        .filter('investmentType', investmentType)\r\n        .filter('applicantType', applicantType)\r\n        .filter('planType', planType)\r\n        .filter('activeness', activeness)\r\n        .filter('maxmin', maxmin)\r\n        .filter('assuranceCriterion', assuranceCriterion)\r\n        .filter('unitList', unitList)\r\n        .filter('conditionList', conditionList)\r\n        .filter('userLevel', userLevel)\r\n        .filter('baseInfo', baseInfo)\r\n        .filter('monitoringDefinition', monitoringDefinition)\r\n        .filter('traceDefinition', traceDefinition)\r\n        .filter('timeFilter', timeFilter)\r\n        .filter('makePositive', makePositive)\r\n        .filter('payee', payee)\r\n        .filter('checkList', checkList)\r\n        .filter('conditionStatus', conditionStatus)\r\n        .filter('fileSize', fileSize)\r\n        .filter('monitoringStep', monitoringStep)\r\n        .filter('monitoringTransitionCaption', monitoringTransitionCaption)\r\n        .filter('updateFilter', updateFilter)\r\n\r\n    ;\r\n\r\n    /** @ngInject */\r\n    function eNumber() {\r\n        return eNumberFilter;\r\n\r\n        ////////////////\r\n\r\n        function eNumberFilter(value) {\r\n            // console.log('eNumberFilter', value);\r\n            if (angular.isDefined(value) && value !== null && value.toString().trim() !== '') {\r\n                var persianNumbers = ['۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹', '۰'];\r\n                var englishNumbers = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];\r\n                for (var i = 0, numbersLen = persianNumbers.length; i < numbersLen; i += 1) {\r\n                    value = value.toString().replace(new RegExp(persianNumbers[i], 'g'), englishNumbers[i]);\r\n                }\r\n            }\r\n            // console.log('eNumberFilter', value);\r\n            return value;\r\n        }\r\n    }\r\n\r\n    function pPercent() {\r\n        return pPercentFilter;\r\n\r\n        ////////////////\r\n\r\n        function pPercentFilter(value) {\r\n            return value ? pNumber()(value) + '٪' : '۰';\r\n        }\r\n    }\r\n\r\n    function pDistance() {\r\n        return pDistanceFilter;\r\n\r\n        ////////////////\r\n\r\n        function pDistanceFilter(value, alternative) {\r\n            alternative = alternative || '؟';\r\n            return value ? pNumber()(value) + 'متر' : alternative;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function jDateTime(moment) {\r\n        return jDateTimeFilter;\r\n\r\n        ////////////////\r\n\r\n        function jDateTimeFilter(dateTime, format) {\r\n            if (angular.isUndefined(dateTime) || dateTime === null) {\r\n                return 'نامشخص ';\r\n            }\r\n            format = format || 'jYY/jMM/jD HH:mm:ss';\r\n            try {\r\n                return pNumber()(moment(dateTime).format(format).replace('امرداد', 'مرداد'));\r\n            } catch (e) {\r\n                return 'نامشخص ';\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function jDate(moment) {\r\n        return jDateFilter;\r\n\r\n        ////////////////\r\n\r\n        function jDateFilter(date, format) {\r\n            if (angular.isUndefined(date) || date === null) {\r\n                return 'نامشخص ';\r\n            }\r\n            format = format || 'jYYYY/jMM/jDD';\r\n            try {\r\n                return pNumber()(moment(date).format(format).replace('امرداد', 'مرداد'));\r\n            } catch (e) {\r\n                return 'نامشخص ';\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function mDate(moment) {\r\n        return mDateFilter;\r\n\r\n        ////////////////\r\n\r\n        function mDateFilter(date) {\r\n            if (angular.isUndefined(date) || date === null) {\r\n                return 'نامشخص ';\r\n            }\r\n            try {\r\n                return moment(date).format('YYYY-MM-DD');\r\n            } catch (e) {\r\n                return 'نامشخص ';\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function jDateFromString(moment) {\r\n        return jDateFilter;\r\n\r\n        ////////////////\r\n\r\n        function jDateFilter(date, formatSource, formatResult) {\r\n            if (angular.isUndefined(date) || date === null) {\r\n                return 'نامشخص ';\r\n            }\r\n            formatSource = formatSource || 'YYYY-MM-DD';\r\n            formatResult = formatResult || 'jYYYY/jMM/jDD';\r\n            try {\r\n                return date ? pNumber()(moment(date, formatSource).format(formatResult)) : null;\r\n            } catch (e) {\r\n                return 'نامشخص ';\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function jeDate(moment) {\r\n        return jeDateFilter;\r\n\r\n        ////////////////\r\n\r\n        function jeDateFilter(date, format) {\r\n            if (angular.isUndefined(date) || date === null) {\r\n                return 'unknown';\r\n            }\r\n            format = format || 'jYYYY/jMM/jDD';\r\n            try {\r\n                return moment(date).format(format);\r\n            } catch (e) {\r\n                return 'error';\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function timeFilter(moment) {\r\n        return timeFilter1;\r\n\r\n        ////////////////\r\n\r\n        function timeFilter1(date) {\r\n            if (angular.isUndefined(date) || date === null) {\r\n                return 'نامشخص ';\r\n            }\r\n            var formattedTime = moment(date).tz(\"Asia/Tehran\").format(\"hh:mm\");\r\n            return formattedTime;\r\n        }\r\n    }\r\n\r\n    function pCurrency() {\r\n        return pCurrencyFilter;\r\n\r\n        function getR(number) {\r\n            if (number < 1000) {\r\n                return [number, 'R'];\r\n            }\r\n            if (number < 1000000) {\r\n                return [number / 1000, 'KR']\r\n            }\r\n            if (number < 1000000000) {\r\n                return [number / 1000000, 'MR'];\r\n            }\r\n            return [number / 1000000000, 'GR']\r\n        }\r\n\r\n        function getT(number) {\r\n            var sign = 1;\r\n            if (typeof number === 'string' && (number.indexOf('-') > 0 || number.indexOf('+') > 0)) {\r\n                sign = number[number.length - 1] === '-' ? -1 : 1;\r\n                number = number.substring(0, number.length - 1);\r\n            }\r\n\r\n            if (number < 10) {\r\n                return [sign * number, 'R'];\r\n            }\r\n            number /= 10;\r\n            if (number < 1000) {\r\n                return [sign * number, 'T'];\r\n            }\r\n            if (number < 1000000) {\r\n                return [sign * number / 1000, 'KT'];\r\n            }\r\n            if (number < 1000000000) {\r\n                return [sign * number / 1000000, 'MT'];\r\n            }\r\n            return [sign * number / 1000000000, 'GT']\r\n        }\r\n\r\n        ////////////////\r\n\r\n        function pCurrencyFilter(number, currency, mantis) {\r\n            // console.log('pCurrencyFilter', number, typeof number, currency, mantis);\r\n\r\n\r\n            if (currency) currency = currency.toUpperCase();\r\n            if (currency === 'A') {\r\n                var t = getT(number);\r\n                number = t[0];\r\n                currency = t[1];\r\n                mantis = mantis || 1;\r\n            } else if (currency === 'AR') {\r\n                var r = getR(number);\r\n                number = r[0];\r\n                currency = r[1];\r\n            }\r\n            if (number === null || angular.isUndefined(number)) {\r\n                return '';\r\n            }\r\n            var parts = number.toString().split('.');\r\n            parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n            var res;\r\n            if (mantis && parts[1]) {\r\n                mantis = Math.min(parts[1] && parts[1].length, mantis);\r\n                parts[1] = parts[1].substr(0, mantis);\r\n                res = pNumber()(parts.join('.'))\r\n            } else {\r\n                res = pNumber()(parts[0]);\r\n            }\r\n\r\n\r\n            // console.log('\\t' + res, mantis);\r\n            if (!currency) return res;\r\n\r\n            switch (currency) {\r\n                case 'R':\r\n                    return res + ' ﷼';\r\n                case 'KR':\r\n                    return res + ' هزار ﷼';\r\n                case 'MR':\r\n                    return res + ' میلیون ﷼';\r\n                case 'GR':\r\n                    return res + ' میلیارد ﷼';\r\n\r\n                case 'T':\r\n                    return res + ' تومان';\r\n                case 'KT':\r\n                    return res + ' هزار تومان';\r\n                case 'MT':\r\n                    return res + ' میلیون تومان';\r\n                case 'GT':\r\n                    return res + ' میلیارد تومان';\r\n                default:\r\n                    return res;\r\n            }\r\n        }\r\n    }\r\n\r\n    function pNumber() {\r\n        return pNumberFilter;\r\n\r\n        ////////////////\r\n\r\n        function pNumberFilter(value, alt) {\r\n            if ((value === undefined || value === null) && alt)\r\n                return alt;\r\n            if (angular.isDefined(value) && value !== null && value.toString().trim() !== '') {\r\n                var persianNumbers = ['۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹', '۰'];\r\n                var englishNumbers = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];\r\n                for (var i = 0, numbersLen = englishNumbers.length; i < numbersLen; i += 1) {\r\n                    value = value.toString().replace(new RegExp(englishNumbers[i], 'g'), persianNumbers[i]);\r\n                }\r\n                return value;\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n    }\r\n\r\n    function pNumberR() {\r\n        return pNumberFilter;\r\n\r\n        ////////////////\r\n\r\n        function pNumberFilter(value) {\r\n            if (angular.isDefined(value) && value !== null && value.toString().trim() !== '') {\r\n                var persianNumbers = ['۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹', '۰'];\r\n                var englishNumbers = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];\r\n                for (var i = 0, numbersLen = englishNumbers.length; i < numbersLen; i += 1) {\r\n                    value = value.toString().replace(new RegExp(englishNumbers[i], 'g'), persianNumbers[i]);\r\n                }\r\n                return value + ' ﷼';\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n    }\r\n\r\n    function makePositive() {\r\n        return makePositiveFilter;\r\n\r\n        ////////////////\r\n\r\n        function makePositiveFilter(value) {\r\n            if (value < 0)\r\n                return Math.abs(value);\r\n            else\r\n                return value;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function propsFilter() {\r\n        return propsFilterFunc;\r\n\r\n        ////////////////\r\n\r\n        function propsFilterFunc(items, props) {\r\n            var out = [];\r\n\r\n            if (angular.isArray(items)) {\r\n                items.forEach(function (item) {\r\n                    var itemMatches = false;\r\n\r\n                    var keys = Object.keys(props);\r\n                    for (var i = 0; i < keys.length; i += 1) {\r\n                        var prop = keys[i];\r\n                        var text = props[prop].toLowerCase();\r\n                        if (item[prop] && item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n                            itemMatches = true;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (itemMatches) {\r\n                        out.push(item);\r\n                    }\r\n                });\r\n            } else {\r\n                // Let the output be the input untouched\r\n                out = items;\r\n            }\r\n\r\n            return out;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function existingsFilter() {\r\n        return propsFilterFunc;\r\n\r\n        ////////////////\r\n\r\n        function existingsFilterFunc(items, props) {\r\n            var out = [];\r\n\r\n            if (angular.isArray(items)) {\r\n                items.forEach(function (item) {\r\n                    var itemMatches = false;\r\n\r\n                    var keys = Object.keys(props);\r\n                    for (var i = 0; i < keys.length; i += 1) {\r\n                        var prop = keys[i];\r\n                        var text = props[prop].toLowerCase();\r\n                        if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n                            itemMatches = true;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (itemMatches) {\r\n                        out.push(item);\r\n                    }\r\n                });\r\n            } else {\r\n                // Let the output be the input untouched\r\n                out = items;\r\n            }\r\n\r\n            return out;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function sDate(moment) {\r\n        return sDateFilter;\r\n\r\n        ////////////////\r\n\r\n        function sDateFilter(date, format) {\r\n            format = format || 'jYYYY/jMM/jDD';\r\n            return date ? moment(date, format).format('YYYY-MM-DD') : null;\r\n        }\r\n    }\r\n\r\n    function status() {\r\n        return statusFilter;\r\n\r\n        ////////////////\r\n\r\n        function statusFilter(flag) {\r\n            return flag ? 'APP.SHARE.ENABLE' : 'APP.SHARE.DISABLE';\r\n        }\r\n    }\r\n\r\n    function trueFalse() {\r\n        return trueFalseFilter;\r\n\r\n        ////////////////\r\n\r\n        function trueFalseFilter(flag) {\r\n            if (flag == undefined) return 'APP.SHARE.UNDEFINED';\r\n            return flag ? 'APP.SHARE.TRUE' : 'APP.SHARE.FALSE';\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function trustedHtml($sce) {\r\n        return trustedHtmlFilter;\r\n\r\n        ////////////////\r\n\r\n        function trustedHtmlFilter(url) {\r\n            return $sce.trustAsHtml(url);\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function trustedUrl($sce) {\r\n        return trustedUrlFilter;\r\n\r\n        ////////////////\r\n\r\n        function trustedUrlFilter(url) {\r\n            return $sce.trustAsResourceUrl(url);\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function objectiveStatus() {\r\n        return objectiveStatusFilter;\r\n\r\n        ////////////////\r\n\r\n        function objectiveStatusFilter(objective) {\r\n            if (!objective || !objective.measurementUnit)\r\n                return '';\r\n            switch (objective.measurementUnit) {\r\n                case 'INTEGER':\r\n                    return pNumber()(objective.currentStatus);\r\n                case 'PRICE':\r\n                    return pNumber()(pCurrency()(objective.currentStatus) + ' تومان ');\r\n                case 'PERCENT':\r\n                    return pNumber()(objective.currentStatus + ' ٪ ');\r\n            }\r\n            return objective.currentStatus;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function unit() {\r\n        return unitFilter;\r\n\r\n        ////////////////\r\n\r\n        function unitFilter(objective) {\r\n            if (!objective || !objective.measurementUnit)\r\n                return '';\r\n            switch (objective.measurementUnit) {\r\n                case 'INTEGER':\r\n                    return 'عدد صحیح';\r\n                case 'PRICE':\r\n                    return 'مبلغ';\r\n                case 'PERCENT':\r\n                    return 'درصد';\r\n            }\r\n            return objective.currentStatus;\r\n        }\r\n    }\r\n\r\n    function maxmin() {\r\n        return maxminFilter;\r\n\r\n        ////////////////\r\n\r\n        function maxminFilter(param) {\r\n            if (!param)\r\n                return '';\r\n            switch (param) {\r\n                case 'MAXIMUM':\r\n                    return 'حداکثر';\r\n                case 'MINIMUM':\r\n                    return 'حداقل';\r\n                case 'REST':\r\n                    return 'مابقی';\r\n                case 'EQUAL':\r\n                    return 'برابر';\r\n            }\r\n            return param;\r\n        }\r\n    }\r\n\r\n    function assuranceCriterion() {\r\n        return assuranceCriterionFilter;\r\n\r\n        ////////////////\r\n\r\n        function assuranceCriterionFilter(param) {\r\n            if (!param)\r\n                return '';\r\n            switch (param) {\r\n                case 'ORIGIN':\r\n                    return 'اصل تسهیلات';\r\n                case 'INTEREST':\r\n                    return 'اصل و سود';\r\n            }\r\n            return param;\r\n        }\r\n    }\r\n\r\n    function measure() {\r\n        return measureFilter;\r\n\r\n        ////////////////\r\n\r\n        function measureFilter(objective) {\r\n            if (!objective || !objective.measurementUnit)\r\n                return '';\r\n            switch (objective.measurementUnit) {\r\n                case 'INTEGER':\r\n                    return '';\r\n                case 'PRICE':\r\n                    return ' تومان ';\r\n                case 'PERCENT':\r\n                    return ' ٪ ';\r\n            }\r\n            return objective.measurementUnit;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function objectivePeriod() {\r\n        return objectivePeriodFilter;\r\n\r\n        ////////////////\r\n\r\n        function objectivePeriodFilter(objective) {\r\n            if (!objective || !objective.targetingPeriod)\r\n                return '';\r\n            if (objective.targetingPeriod === 1)\r\n                return 'ماهانه';\r\n            else if (objective.targetingPeriod < 12)\r\n                return pNumber()(objective.targetingPeriod) + ' ماهه ';\r\n            else if (objective.targetingPeriod === 12)\r\n                return 'سالانه';\r\n            return objective.targetingPeriod;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function showRoles() {\r\n        return showRolesFilter;\r\n\r\n        ////////////////\r\n\r\n        function showRolesFilter(role) {\r\n            if (!role)\r\n                return '';\r\n            else if (role == 'admin')\r\n                return 'مدیر سامانه';\r\n            else if (role == 'PROVINCE')\r\n                return 'استان';\r\n            else if (role == 'BRANCH')\r\n                return 'شعبه';\r\n            else if (role == 'MERCHANT')\r\n                return 'فروشگاه';\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function periodTag() {\r\n        return periodTagFilter;\r\n\r\n        ////////////////\r\n\r\n        function periodTagFilter(period) {\r\n\r\n            if (!period || !period.objective)\r\n                return '';\r\n            var sn = [\r\n                'صفر',\r\n                'یک',\r\n                'دو',\r\n                'سه',\r\n                'چهار',\r\n                'پنج',\r\n                'شش',\r\n                'هفت',\r\n                'هشت',\r\n                'نه'\r\n            ];\r\n            var sith = [\r\n                'صفرم',\r\n                'اول',\r\n                'دوم',\r\n                'سوم',\r\n                'چهارم',\r\n                'پنجم',\r\n                'ششم',\r\n                'هفتم',\r\n                'هشتم',\r\n                'نهم',\r\n                'دهم',\r\n                'یازدهم',\r\n                'دوازدهم',\r\n                'سیزدهم',\r\n                'چهاردهم',\r\n                'پانزدهم',\r\n                'شانزدهم',\r\n                'هفدهم',\r\n                'هجدهم',\r\n                'نوزدهم',\r\n                'بیستم'\r\n            ];\r\n            var tens = [\r\n                'صفر',\r\n                'ده',\r\n                'بیست',\r\n                'سی',\r\n                'چهل',\r\n                'پنجاه',\r\n                'شصت',\r\n                'هفتاد',\r\n                'هشتاد',\r\n                'نود',\r\n                'صد'\r\n            ];\r\n\r\n            function ith(i) {\r\n                if (i < 21)\r\n                    return sith[i];\r\n                if (i % 10 === 0)\r\n                    return tens[Math.floor(i / 10)] + 'م';\r\n                return tens[Math.floor(i / 10)] + ' و ' + sn[i % 10] + 'م';\r\n            }\r\n\r\n            if (period.objective.targetingPeriod < 12)\r\n                return 'وضعیت مطلوب ' + sn[period.objective.targetingPeriod] + ' ماه ' + ith(period.periodIndex);\r\n            else if (period.objective.targetingPeriod === 12)\r\n                return 'وضعیت مطلوب سال ' + ith(period.periodIndex);\r\n            return period.periodIndex;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function pDigitWord() {\r\n        return function (str) {\r\n            if (!str || str.length)\r\n                return '';\r\n            var delimiter, digit, i, iThree, numbers, part, parts, result, resultThree, three;\r\n            if (!isFinite(str)) {\r\n                return '';\r\n            }\r\n            if (!angular.isString(str)) {\r\n                str = str.toString();\r\n            }\r\n            parts = ['', 'هزار', 'میلیون', 'میلیارد', 'تریلیون', 'کوادریلیون', 'کویینتیلیون', 'سکستیلیون'];\r\n            numbers = {\r\n                0: ['', 'صد', 'دویست', 'سیصد', 'چهارصد', 'پانصد', 'ششصد', 'هفتصد', 'هشتصد', 'نهصد'],\r\n                1: ['', 'ده', 'بیست', 'سی', 'چهل', 'پنجاه', 'شصت', 'هفتاد', 'هشتاد', 'نود'],\r\n                2: ['', 'یک', 'دو', 'سه', 'چهار', 'پنج', 'شش', 'هفت', 'هشت', 'نه'],\r\n                two: ['ده', 'یازده', 'دوازده', 'سیزده', 'چهارده', 'پانزده', 'شانزده', 'هفده', 'هجده', 'نوزده'],\r\n                zero: 'صفر'\r\n            };\r\n            delimiter = ' و ';\r\n            str = str.split('').reverse().join('').replace(/\\d{3}(?=\\d)/g, \"$&,\")\r\n                .split('').reverse().join('').split(',').map(function (str) {\r\n                    return Array(4 - str.length).join('0') + str;\r\n                });\r\n            result = (function () {\r\n                var results;\r\n                results = [];\r\n                for (iThree in str) {\r\n                    three = str[iThree];\r\n                    resultThree = (function () {\r\n                        var j, len, results1;\r\n                        results1 = [];\r\n                        for (i = j = 0, len = three.length; j < len; i = ++j) {\r\n                            digit = three[i];\r\n                            if (i === 1 && digit === '1') {\r\n                                results1.push(numbers.two[three[2]]);\r\n                            } else if ((i !== 2 || three[1] !== '1') && numbers[i][digit] !== '') {\r\n                                results1.push(numbers[i][digit]);\r\n                            } else {\r\n                                continue;\r\n                            }\r\n                        }\r\n                        return results1;\r\n                    })();\r\n                    resultThree = resultThree.join(delimiter);\r\n                    part = resultThree.length > 0 ? ' ' + parts[str.length - iThree - 1] : '';\r\n                    results.push(resultThree + part);\r\n                }\r\n                return results;\r\n            })();\r\n            result = result.filter(function (x) {\r\n                return x.trim() !== '';\r\n            });\r\n            result = result.join(delimiter).trim();\r\n            if (result !== '') {\r\n                return result;\r\n            } else {\r\n                return numbers.zero;\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function investmentType() {\r\n        return investmentTypeFilter;\r\n\r\n        ////////////////\r\n\r\n        function investmentTypeFilter(value) {\r\n            var types = {\r\n                \"CURRENT\": \"جاری\",\r\n                \"CONSTANT\": \"ثابت\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function planType() {\r\n        return planTypeFilter;\r\n\r\n        ////////////////\r\n\r\n        function planTypeFilter(value) {\r\n            var types = {\r\n                \"OPENING\": \"ایجادی\",\r\n                \"SUPPLEMENTARY\": \"تکمیلی\",\r\n                \"DEVELOPMENT\": \"توسعه ای\",\r\n                \"OPERATIONAL\": \"در حال بهره برداری\"\r\n            };\r\n            return types[value] || 'نامشخص';\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function activeness() {\r\n        return activenessFilter;\r\n\r\n        ////////////////\r\n\r\n        function activenessFilter(value) {\r\n            var status = {\r\n                \"ACTIVE\": \"فعال\",\r\n                \"SEMI_ACTIVE\": \"نیمه‌فعال\",\r\n                \"INACTIVE\": \"غیرفعال\",\r\n                \"UNDERWAY\": \"طرح در دست اجرا\"\r\n            };\r\n            return status[value] || 'نامشخص';\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function applicantType() {\r\n        return applicantTypeFilter;\r\n\r\n        ////////////////\r\n\r\n        function applicantTypeFilter(value) {\r\n            var types = {\r\n                \"LEGAL\": \"شرکت(حقوقی)\",\r\n                \"NATURAL\": \"شخص حقیقی \"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function unitList() {\r\n        return unitListFilter;\r\n\r\n        ////////////////\r\n\r\n        function unitListFilter(value) {\r\n            var types = {\r\n                \"DOLLAR\": \"$\",\r\n                \"RIAL\": \"﷼\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function conditionList() {\r\n        return conditionFilter;\r\n\r\n        ////////////////\r\n\r\n        function conditionFilter(value) {\r\n            var types = {\r\n                \"MINIMUM\": \"حداقل\",\r\n                \"MAXIMUM\": \"حداکثر\",\r\n                \"EQUAL\": \"برابر\",\r\n                \"REST\": \"کسری تضمینات تا سقف\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function userLevel() {\r\n        return userLevelFilter;\r\n\r\n        ////////////////\r\n\r\n        function userLevelFilter(value) {\r\n            var types = {\r\n                \"STAFF\": \"ستادی\",\r\n                \"PROVINCE\": \"استانی\",\r\n                \"BRANCH\": \"شعبه\",\r\n                \"ALL\": \"تمامی سطوح\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function baseInfo() {\r\n        return baseInfo;\r\n\r\n        ////////////////\r\n\r\n        function baseInfo(value) {\r\n            var types = {\r\n                \"staffLimit\": \"سقف مجاز تعداد کاربران\",\r\n                \"teamHeadLimit\": \"سقف مجاز پرونده برای تایید در استان\",\r\n                \"nonCurrentPlanLimit\": \"سقف مجاز تسهیلات غیرجاری\",\r\n                \"currentPlanLimit\": \"سقف مجاز تسهیلات جاری\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function monitoringDefinition() {\r\n        return monitoringDefinition;\r\n\r\n        ////////////////\r\n\r\n        function monitoringDefinition(value) {\r\n            var types = {\r\n                \"create\": \"ایجاد\",\r\n                \"start\": \"شروع کارشناس اول\",\r\n                \"editing\": \"ویرایش توسط کارشناس اول\",\r\n                \"firstExpertAccept\": \"تایید کارشناس اول\",\r\n                \"calculating\": \"محاسبه مغایرت ها توسط کارشناس اول\",\r\n                \"conflictEditing\": \"ویرایش مغایرت ها توسط کارشناس اول\",\r\n                \"cancelStarting\": \"لغو شروع\",\r\n                \"accept\": \"تایید\",\r\n                \"reject\": \"بازگشت\",\r\n                \"finalExpertAcceptForProvince\": \"تائيد نهایی کارشناس استان\",\r\n                \"secondExpertAcceptForProvince\": \"تایید ناظر استانی\",\r\n                \"secondExpertAcceptForTeamHead\": \"تایید سرگروه\",\r\n                \"finalHeadReject\": \"لغو توسط مدیر نهایی\",\r\n                \"finalExpertAcceptForTeamHead\": \"تائید کارشناس دوم و ارسال به سرگروه\",\r\n                \"branchExpertAccept\": \"تائید شده در شعبه\",\r\n                \"adminCancelFinalizedHead\": \"لغو توسط مدیر\",\r\n                \"adminCancelFinalizedProvince\": \"لغو توسط مدیر\",\r\n                \"adminCancelFinalizedBranch\": \"لغو توسط مدیر\",\r\n                \"deleteByAdmin\": \"حذف توسط مدیر\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n\r\n    /** @ngInject */\r\n    function traceDefinition() {\r\n        return traceDefinition;\r\n\r\n        ////////////////\r\n\r\n        function traceDefinition(value) {\r\n            var types = {\r\n                \"waiting\": \"در انتظار\",\r\n                \"alert\": \"هشدار\",\r\n                \"see\": \"مشاهده شده\",\r\n                \"clear\": \"پاسخ مناسب از شعبه دریافت شد\",\r\n                \"fail\": \"پاسخ مناسب از شعبه دریافت نشد\",\r\n                \"postpone\": \"تعویق\",\r\n                \"attachment\": \"پیوست\",\r\n                \"transfer\": \"انتقال\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function payee() {\r\n        return payeeFilter;\r\n\r\n        ////////////////\r\n\r\n        function payeeFilter(value) {\r\n            var types = {\r\n                \"APPLICANT\": \"متقاضی\",\r\n                \"ISSUER\": \"صادر کننده\",\r\n                \"ETC\": \"سایر\"\r\n            };\r\n            return types[value];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function checkList() {\r\n        return checkListFilter;\r\n\r\n        ////////////////\r\n\r\n        function checkListFilter(value) {\r\n            var items = {\r\n                \"UNRELATEDTODIRECTIVE\": \"مشمول مصوبه نیست\",\r\n                \"UNDONE\": \"دارای انحراف\",\r\n                \"VIOLATED\": \"دارای نقص\",\r\n                \"DONE\": \"فاقد انحراف\",\r\n\r\n                \"NO_DEVIATION\": \"عملکرد فاقد انحراف است \",\r\n                \"RELATEDDOCS_WARNING\": \" صدور اخطاریه بابت ارائه اسناد مرتبط \",\r\n                \"LACKOFPROGRESS_PLANREVIEW_WARNING\": \" صدور اخطاریه بابت عدم پیشرفت فیزیکی متناسب و بازدید مجدد از طرح\",\r\n                \"TOTAL_WARNING\": \" صدور اخطاریه بابت ارائه اسناد مرتبط عدم پیشرفت فیزیکی متناسب و بازدید مجدد از طرح \",\r\n                \"CONDITIONAL_COMMITMENT_CONVERT\": \"صدور اخطاریه و بازدید مجدد از طرح در صورت عدم ایفای تعهدات دیون تبدیل به حال گردد\",\r\n                \"COMMITMENT_CONVERT\": \"عملکرد متقاضی دارای انحراف است، دیون تبدیل به حال گردد\",\r\n\r\n                \"TRACE_NEEDED\": \"پیگیری جهت رعایت مفاد مصوبه و اخذ اسناد مرتبط توسط شعبه \",\r\n                \"DEVIATION\": \"عملکرد شعبه دارای انحراف است\",\r\n\r\n                \"INAPPROPRIATE_DIRECTIVE_SETTING\": \"کارشناس در تنظیم مصوبه بطور مطلوب عمل ننموده است\",\r\n                \"INAPPROPRIATE_CONTRACT_INVESTIGATION\": \" کارشناس در بررسی پرونده بطور مطلوب عمل ننموده است \",\r\n                \"INAPPROPRIATE_DIRECTIVE_CONTRACT\": \" کارشناس در تنظیم مصوبه و بررسی پرونده بطور مطلوب عمل ننموده است \"\r\n\r\n            };\r\n            return items[value] ? items[value] : value;\r\n        }\r\n    }\r\n\r\n    function conditionStatus() {\r\n        return conditionStatusFilter;\r\n\r\n        ////////////////\r\n\r\n        function conditionStatusFilter(value) {\r\n            var items = {\r\n                \"INCOMPLETED\": \"دارای نقص\",\r\n                \"FAILED\": \"خیر\",\r\n                \"DONE\": \"بله\"\r\n            };\r\n            return items[value] ? items[value] : value;\r\n        }\r\n    }\r\n\r\n    function fileSize() {\r\n        return fileSizeFilter;\r\n\r\n        ////////////////\r\n\r\n        function fileSizeFilter(value) {\r\n            if (!value)\r\n                return '0';\r\n            if (value < 1000)\r\n                return value + 'B';\r\n            if (value < 1000000)\r\n                return (value / 1000).toFixed(2) + 'KB';\r\n            if (value < 1000000000)\r\n                return (value / 1000000).toFixed(2) + 'MB';\r\n            return (value / 1000000000).toFixed(2) + 'GB';\r\n        }\r\n    }\r\n\r\n    function monitoringStep(MonitoringService) {\r\n        return monitoringStepFunction;\r\n\r\n        function monitoringStepFunction(key) {\r\n            var result = '';\r\n            MonitoringService.getStepsSync().forEach(function (step) {\r\n                if (key === step.id || key === step.name) {\r\n                    result = step.title;\r\n                    return;\r\n                }\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n\r\n    function monitoringTransitionCaption(MonitoringService) {\r\n        return monitoringTransitionCaptionFunction;\r\n\r\n        function monitoringTransitionCaptionFunction(id) {\r\n            var result = '';\r\n            MonitoringService.getTransitionsSync().forEach(function (transtion) {\r\n                if (transtion.id === id) {\r\n                    result = transtion.caption;\r\n                }\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n\r\n    function updateFilter() {\r\n        return updateFilter;\r\n\r\n        ////////////////\r\n\r\n        function updateFilter(value) {\r\n            var items = {\r\n                \"Completed\": \"کامل شده\",\r\n                \"Processing\": \"در حال پردازش\",\r\n                \"Exited_with_exception\": \"ناقص همراه با اشکال\"\r\n            };\r\n            return items[value] ? items[value] : value;\r\n        }\r\n    }\r\n\r\n})();\r\n\n/* global moment:false; */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .constant('moment', moment)\r\n        .constant('host', 'http://' + location.host + '/api/')\r\n        // .constant('host', 'http://localhost:8080/api/')\r\n        //.constant('emailRegex', /^[_A-Za-z0-9]+(\\.[_A-Za-z0-9]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9-]+)*(\\.[A-Za-z]{2,4})$/)\r\n        .constant('telRegex', /^[0-9]{8,11}$/)\r\n        .constant('nationalIdRegex', /^[0-9]{10}$/)\r\n        .constant('noSpaceRegex', /^[^\\n ]*$/)\r\n    ;\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($logProvider, $httpProvider, ADMdtpProvider, moment, toastrConfig, $uibTooltipProvider) {\r\n        // Enable log\r\n        $logProvider.debugEnabled(true);\r\n\r\n        //  @desc add $http Interceptor\r\n        $httpProvider.interceptors.push('authInterceptor');\r\n        // $httpProvider.defaults.withCredentials = true;\r\n        // $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\n        // disable # in url\r\n        // $locationProvider.html5Mode(true);\r\n\r\n        /////////////////////////////////\r\n        // Set options third-party lib //\r\n        /////////////////////////////////\r\n\r\n        ADMdtpProvider.setOptions({\r\n            autoClose: true,\r\n            calType: 'jalali',\r\n            dtpType: 'date',\r\n\t        format: 'YYYY/MM/DD'\r\n        });\r\n\r\n        // Set toastr options\r\n        angular.extend(toastrConfig, {\r\n            allowHtml: true,\r\n            closeButton: false,\r\n            closeHtml: '<button class=\"pull-left\">&times;</button>',\r\n            extendedTimeOut: 500,\r\n            positionClass: 'toast-top-right',\r\n            preventDuplicates: false,\r\n            progressBar: true,\r\n            tapToDismiss: true,\r\n            target: 'body',\r\n            timeOut: 3000\r\n        });\r\n\r\n\r\n        //moment\r\n        moment.loadPersian();\r\n\r\n        $uibTooltipProvider.options({\r\n            'appendToBody': true\r\n        })\r\n\r\n    }\r\n\r\n})();\r\n\n/**\r\n * Created by ehejazi on 10/16/17.\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.update-report', [\r\n            //third party\r\n\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.sample', [\r\n            //our modules\r\n\r\n        ]);\r\n\r\n})();\r\n\r\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div id=wrapper><!-- Navigation --><samat-header></samat-header><sidebar></sidebar><div class=content-wrapper role=main><div ui-view=\\\"\\\" class=criterion-container></div></div><!--<samat-footer></samat-footer>--><!-- /#page-wrapper --></div>\");\n$templateCache.put(\"app/components/assurance-type/assurance-type.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><!--<pane-body ng-show=\\\"vm.toggleAdd\\\">\\r\\n                                <form class=\\\"form form-horizontal\\\" ng-submit=\\\"vm.create(vm.assuranceType)\\\">\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <div class=\\\"col-sm-8 pull-right\\\">\\r\\n                                            <div class=\\\"row\\\">\\r\\n                                                <label class=\\\"col-sm-1 control-label pull-right\\\"\\r\\n                                                       data-translate=\\\"APP.SHARE.TYPE\\\"></label>\\r\\n                                                <div class=\\\"col-sm-4 pull-right\\\">\\r\\n                                                    <input class=\\\"form-control\\\"\\r\\n                                                           data-ng-model=\\\"vm.assuranceType.type\\\"\\r\\n                                                           placeholder=\\\"نوع\\\">\\r\\n                                                </div>\\r\\n                                                <label class=\\\"col-sm-2 control-label pull-right\\\"\\r\\n                                                       data-translate=\\\"APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.ACCEPTED_PERCENT\\\"></label>\\r\\n                                                <div class=\\\"col-sm-5 pull-right\\\">\\r\\n                                                    <input class=\\\"form-control\\\"\\r\\n                                                           type=\\\"number\\\" step=\\\"0.01\\\"\\r\\n                                                           data-ng-model=\\\"vm.assuranceType.acceptedPercent\\\"\\r\\n                                                           placeholder=\\\"درصد قابل قبول\\\">\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"col-sm-4 pull-right\\\">\\r\\n                                            <button type=\\\"button\\\" class=\\\"btn btn-cancel\\\"\\r\\n                                                    data-ng-click=\\\"vm.cancelAdd()\\\">\\r\\n                                                <span class=\\\"fa fa-close\\\"></span>\\r\\n                                                <span data-translate=\\\"APP.ACTIONS.CANCEL\\\"></span>\\r\\n                                            </button>\\r\\n                                            <button type=\\\"submit\\\" class=\\\"btn btn-success\\\">\\r\\n                                                <span class=\\\"fa fa-check\\\"></span>\\r\\n                                                <span data-translate=\\\"APP.ACTIONS.SUBMIT\\\"></span>\\r\\n                                            </button>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </form>\\r\\n                            </pane-body>--><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.TYPE\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.type></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.type></span></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.ASSURANCE_TYPE.ACCEPTED_PERCENT\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.acceptedPercent|pPercent></span> <span data-ng-show=item.toggle><input class=form-control numbers-only data-ng-class=\\\"{\\'RedBG\\':acceptedPercent.$invalid}\\\" name=acceptedPercent1 data-ng-model=item.acceptedPercent></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr><!-- add row --><tr><td></td><td><input class=form-control type=text data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.assuranceType.type></td><td><input class=form-control numbers-only name=acceptedPercent required data-ng-model=vm.assuranceType.acceptedPercent data-ng-keypress=vm.keyPressed($event)><!--<span data-ng-if=\\\"!vm.assuranceType.acceptedPercent\\\" data-ng-class=\\\"{\\'RedBorder\\':!vm.assuranceType.acceptedPercent }\\\"> خطا : تنها عدد با دو رقم اعشار مجاز است.\\r\\n                                                </span>--></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\" data-ng-disabled=!vm.assuranceType.acceptedPercent ng-click=vm.create()></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/baseInfo/baseInfo.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.BASE_INFO.TITLE></h1><!-- <div class=\\\"pull-left\\\">\\r\\n                             <a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\"\\r\\n                                data-ng-show=\\\"!vm.toggleAdd\\\">\\r\\n                                 <i class=\\\"fa fa-plus-circle\\\"></i>\\r\\n                                 <span data-translate=\\\"APP.ACTIONS.SUBMIT\\\">‌</span>\\r\\n                             </a>\\r\\n                         </div>--><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><!--<td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\"\\r\\n                                                data-ng-bind=\\\"$index|pNumber\\\"></td>--><td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\"><span data-ng-bind=item.variable|baseInfo|translate></span></td><td data-title=\\\"\\'APP.SHARE.VALUE\\'|translate\\\"><input class=form-control ui-number-mask=0 uib-tooltip=\\\"{{item.value|pCurrency:\\'A\\'}}\\\" tooltip-trigger=\\\"\\'focus\\'\\\" dir=ltr data-ng-model=item.value></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><button class=\\\"btn btn-primary-alt\\\" type=button ng-click=vm.updateBaseInfo(item);><span class=\\\"fa fa-save\\\"></span> <span data-translate=APP.ACTIONS.SAVE></span></button></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/branch/branch.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.BRANCH.TITLE></h1><div class=pull-left><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=!vm.toggleAdd><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create()><div class=row><div class=form-group><div class=\\\"col-sm-10 pull-right\\\"><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.MODULES.BASIC_INFO.BRANCH.NAME></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control data-ng-model=vm.branch.title placeholder=\\\"نام شعبه\\\"></div><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.MODULES.BASIC_INFO.BRANCH.CODE></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control type=number data-ng-model=vm.branch.code placeholder=\\\"کد شعبه\\\"></div><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.MODULES.BASIC_INFO.BRANCH.PROVINCE></label><div class=\\\"col-sm-3 pull-right\\\"><select class=form-control data-ng-options=\\\"province.id as province.title for province in vm.provinces\\\" data-ng-model=vm.branch.province.id></select></div></div><div class=\\\"col-sm-2 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></div><div class=pane-body data-ng-if=vm.provinces><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-sortable=\\\"\\'title\\'\\\" data-filter=\\\"{title:\\'text\\'}\\\"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <input class=form-control type=text data-ng-show=item.toggle data-ng-model=item.title></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.PROVINCE.CODE\\'|translate\\\" data-sortable=\\\"\\'code\\'\\\" data-filter=\\\"{code:\\'text\\'}\\\"><span data-ng-show=!item.toggle data-ng-bind=item.code|pNumber></span> <input class=form-control data-ng-show=item.toggle data-ng-model=item.code></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.PROVINCE.PROVINCE\\'|translate\\\" data-sortable=\\\"\\'province.title\\'\\\" data-filter=\\\"{province:\\'select\\'}\\\" data-filter-data=vm.provinces><span data-ng-show=!item.toggle data-ng-bind=item.province.title></span><select class=form-control data-ng-show=item.toggle name=province id=province data-ng-options=\\\"province.id as province.title for province in vm.provinces\\\" data-ng-model=item.province.id></select></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/checkList/checkList.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.CHECK_LIST.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.MINI_TITLE\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.title></span></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.content></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.content></span></td><td data-title=\\\"\\'APP.SHARE.ENABLE\\'|translate\\\"><i class=\\\"icon pe-icon f-18 f-bold\\\" data-ng-show=!item.toggle data-ng-class=\\\"{\\'pe-7s-check text-success\\':item.enabled, \\'pe-7s-less text-warning\\':!item.enabled}\\\" ng-click=vm.changeActivity(item)></i> <span data-ng-show=item.toggle><input type=checkbox data-ng-model=item.enabled></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr><!-- add row --><tr><td></td><td><input class=form-control type=text data-ng-model=vm.content data-ng-keypress=vm.keyPressed($event)></td><td><input type=checkbox data-ng-model=vm.enabled></td><td><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\" ng-click=vm.create(vm.content)></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/contract/contract-list.html\",\"<div class=\\\"container-fluid contract screen-only\\\"><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-note2 contract\\\"></span> <span data-translate=APP.MODULES.CONTRACT.LIST></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=row><div class=\\\"col-xs-8 pull-right\\\"><div class=row><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control dir=ltr id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><simple-date data-ng-model=vm.contractFromDate name=dateForm id=dateFrom></simple-date></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><simple-date data-ng-model=vm.contractToDate name=dateTo id=dateTo></simple-date></div></div></div><div class=row><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.COMPANY_NAME for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount data-ng-model=vm.searchItem.minContractAmount></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div></div><div class=row><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TYPE for=contract-type></label><input class=form-control id=contract-type name=contractType data-ng-model=vm.searchItem.contractType></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select multiple ng-model=vm.searchItem.provinceIds theme=bootstrap id=province ng-disabled=vm.disabledProvinceList sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"province.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+province.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--credit Supply Resource --><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.SUB_RESOURCE></label><ui-select multiple ng-model=vm.searchItem.creditSupplyResources theme=bootstrap id=selected-resources sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.name}}-{{$item.code}}</ui-select-match><ui-select-choices refresh=vm.searchCreditSupplyResources($select.search) repeat=\\\"resource in vm.resources\\\"><div ng-bind-html=\\\"resource.name | highlight: $select.search\\\"></div><small ng-bind-html=\\\"resource.code | highlight: $select.search\\\"></small></ui-select-choices></ui-select></div></div></div><div class=row><!--settlement status--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.SETTLEMENT_STATUS for=settlementStateCode></label><select class=form-control data-ng-model=vm.searchItem.settlementStateCode id=settlementStateCode name=settlementStateCode data-ng-options=\\\"s.code as s.title for s in vm.settlementStates\\\"></select></div></div><!--included codes--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap id=selected-codes sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div><div class=row><!--included ISIC--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedIsics theme=bootstrap id=selected-isic-include sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat=\\\"isic.code as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}\\\"><div><span ng-bind-html=\\\"isic.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+isic.name | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded isic--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedIsics theme=bootstrap id=selected-isic-exclude sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat=\\\"isic.code as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}\\\"><div><span ng-bind-html=\\\"isic.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\' \\'+isic.name | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--need to monitoring  status--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.NEED_TO_MONITORING_STATUS for=needToMonitoringStatus></label><select class=form-control data-ng-model=vm.searchItem.needToMonitoringStatus id=needToMonitoringStatus name=needToMonitoringStatus data-ng-options=\\\"s.status as s.title for s in vm.needToMonitoringStatusList\\\"></select></div></div></div></div><div class=\\\"col-xs-2 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION_SEARCH_TITLE></label>:&nbsp;<div class=\\\"btn-group nav-btn-group economic-sections\\\"><label class=\\\"btn btn-default\\\" data-ng-repeat=\\\"economicSection in vm.economicSections\\\" ng-model=economicSection.selected uib-btn-checkbox><i class=\\\"fa fa-check-square-o\\\" ng-show=economicSection.selected></i> <i class=\\\"fa fa-square-o\\\" ng-hide=economicSection.selected></i> <img data-ng-src=assets/images/section-icons/{{economicSection.id}}.png alt=\\\"\\\" width=25> <span data-ng-bind=economicSection.name></span></label></div></div></div><div class=\\\"col-xs-2 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE_SEARCH_TITLE></label>:&nbsp;<div class=\\\"btn-group nav-btn-group plan-types\\\"><label class=\\\"btn {{planType.key}}\\\" data-ng-repeat=\\\"planType in vm.planTypes\\\" ng-model=planType.selected uib-btn-checkbox><i class=\\\"fa fa-check-square-o\\\" ng-show=planType.selected></i> <i class=\\\"fa fa-square-o\\\" ng-hide=planType.selected></i> <span data-ng-bind=planType.title></span></label><label class=\\\"btn default\\\"><i class=\\\"fa fa-circle\\\"></i> <span data-translate=APP.SHARE.UNDEFINED></span></label></div></div></div><div class=col-xs-12><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=\\\"form-group pull-right\\\"><br><label class=\\\"pull-left btn btn-default\\\" for=need-to-monitor><input class=\\\"pull-right m-l-1\\\" data-ng-model=vm.searchItem.needToMonitor id=need-to-monitor name=needToMonitor type=checkbox> <span data-translate=APP.MODULES.CONTRACT.NEW_CONTRACT></span></label></div></div><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() uib-tooltip=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=\\\"vm.exportContracts(\\'EXCEL\\')\\\" ng-attr-title=\\\"{{\\'APP.ACTIONS.EXPORT\\'|translate}}\\\"><i class=\\\"fa fa-file-excel-o\\\"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><hr><div class=pane-body><div class=pull-right id=search-result-container data-ng-show=!vm.toggleAdd><a class=\\\"btn btn-sm btn-success-alt\\\" ng-click=vm.selectAll()><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.SELECT_ALL>‌</span> </a><a class=\\\"btn btn-sm btn-success-alt\\\" ng-click=vm.openModal()><i class=\\\"fa fa-add\\\"></i> <span data-translate=APP.MODULES.CONTRACT.MONITORING.ADD_GROUP_MONITORING>‌</span> </a><a class=\\\"back-to-top-btn btn btn-default-alt\\\" id=toTopBtn ng-click=vm.backToTop()>فرم جستجو</a></div><div class=\\\"row screen-only\\\"><div class=col-xs-12 data-ng-hide=vm.loading><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pCurrency></b> <span data-translate=\\\"total amount:\\\"></span> <b data-ng-bind=vm.totalAmount|pCurrency></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" ng-show=vm.loading class=centered height=50></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable few-paddings\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-class=\\\"{\\'need-monitor\\': contract.needToMonitor}\\\" data-ng-repeat=\\\"contract in $data\\\"><td data-title=\\\"\\'\\'\\\" data-ng-bind=\\\" (vm.tableParams.page() - 1) * vm.tableParams.count() + $index + 1 |pNumber\\\"></td><td data-title=\\\"\\\"><input type=checkbox class=m-1 id=contractId name=contractId data-ng-model=contract.selected></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.SECTION_TYPE\\'|translate\\\" data-ng-attr-title=\\\"{{contract.economicSection.name + \\'، \\' + (contract.planType||\\'نامشخص\\') + \\'، \\' + contract.creditSupplyResourceText}}\\\" data-sortable=\\\"\\'economicSection\\'\\\" class=\\\"default {{vm.planTypeKey(contract.planType)}}\\\"><img width=25 data-ng-src=assets/images/section-icons/{{contract.economicSection.id}}.png><!--<i class=\\\"free-index\\\" data-ng-bind=\\\" (vm.tableParams.page() - 1) * vm.tableParams.count() + $index + 1 |pNumber\\\"></i>--></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.NUMBER\\'|translate\\\" data-sortable=\\\"\\'number\\'\\\"><a data-ng-click=vm.openDetailsModal(contract.id,false) data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\"><span data-ng-bind=contract.number|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.DATE_S\\'|translate\\\" data-sortable=\\\"\\'contractDate\\'\\\" data-ng-bind=\\\"contract.contractDate|jDate:\\'jYY/jM/jD\\'|pNumber\\\"></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.PLACE\\'|translate\\\" data-sortable=\\\"\\'province\\'\\\" data-ng-bind=\\\"contract.province.title + \\'/\\' + contract.branch.title\\\"></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.APPLICANT_NAME\\'|translate\\\" data-sortable=\\\"\\'companyName\\'\\\" data-ng-bind=contract.companyName></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.TOTAL_AMOUNT\\'|translate\\\" data-sortable=\\\"\\'totalAmount\\'\\\" data-ng-attr-title=\\\"{{contract.totalAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"(contract.totalAmount|pCurrency:\\'R\\')\\\"></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.CONTRACT_TYPE\\'|translate\\\" data-sortable=\\\"\\'contractType\\'\\\"><span data-ng-bind=\\\"(contract.contractType + \\'(کد \\' + contract.code + \\')\\')|pNumber\\\"></span><br><small data-ng-bind=\\\"(contract.title + \\'-\\' + contract.economicCodeName + \\'(کد اقتصادی \\' + contract.economicCode + \\')\\')|pNumber\\\"></small></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.SETTLEMENT_STATUS\\'|translate\\\" data-sortable=\\\"\\'settlementStateCode\\'\\\" data-ng-bind=contract.settlementStateTitle></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.NEEDTOMONITOR\\'|translate\\\" data-sortable=\\\"\\'needToMonitor\\'\\\"><i class=\\\"icon pe-icon f-17\\\" data-ng-class=\\\"{\\'pe-7s-check text-success\\':contract.hasTerminatedMonitoring ,\\r\\n                                                                   \\'pe-7s-mail\\':contract.needToMonitor,\\r\\n                                                                   \\'pe-7s-mail-open\\':!contract.needToMonitor}\\\"></i></td><td data-title=\\\"\\'\\'|translate\\\"><a ng-click=vm.openModal(contract.id) class=\\\"btn btn-sm text-success\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.CONTRACT.ADD_MONITORING\\'|translate}}\\\"><span class=\\\"icon pe-icon pe-7s-add-user f-17 f-bold\\\"></span></a></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/contract-code/contract-code.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><span class=screen-only data-translate=APP.SHARE.SEARCH></span><form class=\\\"dataTables_wrapper dt-bootstrap search-container screen-only\\\" name=reportsForm data-ng-submit=vm.searchFunction()><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE for=code></label><input class=form-control id=code ng-model=vm.search.code name=code type=text></div></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE for=title></label><input class=form-control id=title ng-model=vm.search.title name=title type=text></div></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE for=contractType></label><select class=form-control data-ng-attr-title=\\\"{{\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\\'|translate}}\\\" data-ng-options=\\\"contractType.id as contractType.name for contractType in vm.contractTypes\\\" name=contractType id=contractType data-ng-model=vm.search.contractType.id></select></div></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.MIN_PROVINCE_LIMIT for=minProvinceLimit></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=minProvinceLimit name=minProvinceLimit data-ng-model=vm.search.minProvinceLimit></div></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.BASIC_INFO.CONTRACT_CODE.MAX_PROVINCE_LIMIT for=maxProvinceLimit></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=maxProvinceLimit name=maxProvinceLimit data-ng-model=vm.search.maxProvinceLimit></div></div><div class=col-md-4><div class=form-group><button type=submit class=\\\"btn btn-success pull-left\\\" title=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></form><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\" data-ng-bind=\\\"((vm.tableParams.page() - 1) * (vm.tableParams.count()) + $index + 1)|pNumber\\\"></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE\\'|translate\\\" data-sortable=\\\"\\'code\\'\\\"><b data-ng-bind=item.code|pNumber></b></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE\\'|translate\\\" data-sortable=\\\"\\'title\\'\\\"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input data-ng-attr-title=\\\"{{\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CODE_TITLE\\'|translate}}\\\" class=form-control type=text data-ng-model=item.title></span></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.PROVINCE_LIMIT\\'|translate\\\" data-sortable=\\\"\\'provinceLimit\\'\\\"><span data-ng-show=!item.toggle data-ng-bind=item.provinceLimit|pCurrency></span> <span data-ng-show=item.toggle><input title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.PROVINCE_LIMIT\\'|translate\\\" class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=provinceLimit name=provinceLimit data-ng-model=item.provinceLimit></span></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\\'|translate\\\" data-sortable=\\\"\\'contractType\\'\\\"><span data-ng-show=!item.toggle data-ng-bind=\\\"item.contractType.name  \\\"></span> <span data-ng-show=item.toggle><select class=form-control data-ng-attr-title=\\\"{{\\'APP.MODULES.BASIC_INFO.CONTRACT_CODE.CONTRACT_TYPE\\'|translate}}\\\" data-ng-options=\\\"contractType.id as contractType.name for contractType in vm.contractTypes\\\" name=contractTypeEdit id=contractTypeEdit data-ng-model=item.contractType.id></select></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/contract-filter/contract-filter.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_FILTER.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-ng-table=vm.tableParams data-show-filter=false data-template-pagination=app/directives/ng-table/pagination-tpl.html><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><!--id column--><td data-ng-bind=($index+1)|pNumber data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\"></td><!--field type column--><td data-sortable=\\\"\\'fieldType\\'\\\" data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_FILTER.FIELD_TYPE\\'|translate\\\"><span data-ng-bind=vm.getTitle(item.fieldType) data-ng-show=!item.toggle></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.fieldType ng-options=\\\"item.value as item.title for item in vm.types\\\"></select></span></td><!--value column--><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.CONTRACT_FILTER.VALUE\\'|translate\\\"><span data-ng-bind=item.value data-ng-show=!item.toggle></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.value ng-options=\\\"item as item for item in vm.values[item.fieldType]\\\"></select></span></td><!--operation column--><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons cancel=\\\"item.toggle = !item.toggle\\\" delete=vm.delete(item.id) edit=vm.update(item) has-delete=true has-edit=true toggle=item.toggle></command-buttons></td></tr><!--add row--><tr><td></td><!--field type column in add row--><td><select class=form-control data-ng-model=vm.fieldType ng-options=\\\"item.value as item.title for item in vm.types\\\"></select></td><!--value column in add row--><td><select class=form-control data-ng-model=vm.value ng-options=\\\"item as item for item in vm.values[vm.fieldType]\\\"></select></td><!--operation column--><td><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\" ng-click=vm.create()></i></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/contract-type/contract-type.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.CONTRACT_TYPE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/credit-supply-resource/credit-supply-resource.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.CREDIT_SUPPLY_RESOURCE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\">{{$index+1|pNumber}}</td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-ng-bind=item.name></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/credit-supply-resource/sub-resource-list.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.SUB_RESOURCE_LIST></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\">{{$index+1|pNumber}}</td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-ng-bind=item.name></td><td data-title=\\\"\\'APP.SHARE.CODE\\'|translate\\\" data-filter=\\\"{code:\\'text\\'}\\\" data-ng-bind=item.code></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/directive/directive-list.html\",\"<div class=\\\"container-fluid directive\\\"><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-pen directive\\\"></span> <span data-translate=APP.MODULES.DIRECTIVE.LIST></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><form class=\\\"dataTables_wrapper dt-bootstrap search-container\\\" data-ng-submit=vm.searchDirective()><div class=row><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label for=directiveApplicantSearch data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></label><input class=form-control id=directiveApplicantSearch name=directiveApplicantSearch data-ng-model=vm.search.applicant></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label for=directiveNumberSearch data-translate=APP.MODULES.DIRECTIVE.NUMBER></label><input class=form-control dir=ltr id=directiveNumberSearch name=directiveNumberSearch data-ng-model=vm.search.number></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label for=directiveApprovalPlaceSearch data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></label><input class=form-control id=directiveApprovalPlaceSearch name=directiveApprovalPlaceSearch data-ng-model=vm.search.directiveApprovalPlace></div></div><div class=col-xs-12><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() uib-tooltip=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></form></pane-body><hr><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.NUMBER\\'|translate\\\"><a title=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\" data-ui-sref=\\\"root.directive.details({directiveId:item.directive.dirNumber, monitoringId:item.id,monitoringState:\\'root.monitoring.monitoring-details\\'})\\\"><span data-ng-bind=item.directive.dirNumber|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.APPLICANT.NAME\\'|translate\\\" data-ng-bind=\\\"item.applicant.applicantName || \\'-\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.APPROVE_DATE\\'|translate\\\" data-ng-bind=item.directive.dirApproveDate|jDate|pNumber></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.END_DATE\\'|translate\\\" data-ng-bind=\\\"item.directive.dirValidityDuration|pNumber:\\'۰\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE\\'|translate\\\" data-ng-bind=\\\"item.directive.directiveApprovalPlace.name || \\'-\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE\\'|translate\\\" data-ng-bind=\\\"item.creditSupplyResource.name || \\'-\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CASE_EXPERT\\'|translate\\\" data-ng-bind=\\\"item.directive.dirExpert.name || \\'-\\'\\\"></td><!--<td data-title=\\\"\\'APP.MODULES.DIRECTIVE.ECONOMIC_SECTION\\'|translate\\\"\\r\\n                                                data-ng-bind=\\\"item.economicSection.name || \\'-\\'\\\">\\r\\n                                            </td>\\r\\n                                            <td data-title=\\\"\\'APP.MODULES.DIRECTIVE.PLAN_TYPE\\'|translate\\\"\\r\\n                                                data-ng-bind=\\\"item.planType|planType\\\">\\r\\n                                            </td>--><td data-title=\\\"\\'\\'\\\"><i class=\\\"icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer\\\" ng-click=vm.deleteDirective(item.id) data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\"></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/directive/directive.html\",\"<div class=\\\"container-fluid directive\\\"><div class=print-only><table class=\\\"table table-bordered\\\"><tr><th>وضعیت</th><th>شماره قرارداد</th><th>نام متقاضی</th><th>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th></tr><tr><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td data-ng-bind=vm.monitoring.contract.companyName></td><td data-ng-bind=\\\"(vm.monitoring.contract.planType || \\'نامشخص\\')+\\'/\\'+(vm.monitoring.contract.economicSection.name || \\'نامشخص\\')\\\"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td></tr></table></div><h2 class=\\\"plan-title screen-only\\\"><span class=ltr-number ng-if=vm.directive.dirNumber data-ng-bind=\\\"\\'مصوبه شماره \\' + (vm.directive.dirNumber|pNumber)\\\"></span> <span class=ltr-number ng-if=!vm.directive.dirNumber data-translate=\\\"Register new directive\\\"></span></h2><h4 class=panel-subtitle>ایجاد شده در <span data-ng-bind=\\\"vm.monitoring.createDate|jDate:\\'jD jMMMM jYY ساعت H:mm\\'\\\"></span> <span ng-if=\\\"vm.monitoring.organizationLevel===\\'STAFF\\'\\\">در اداره نظارت بر اعطای تسهیلات </span><span ng-if=\\\"vm.monitoring.organizationLevel===\\'PROVINCE\\'\\\">در استان مربوطه </span><span ng-if=\\\"vm.monitoring.organizationLevel===\\'BRANCH\\'\\\">در شعبه مربوطه</span></h4><div class=row><!-- sidebar directive steps --><div class=\\\"col-xs-1 pull-right p-0 custom-sidebar-parent screen-only\\\"><div class=module-wrapper><section class=module><div class=\\\"module-inner p-0\\\"><div class=module-content><div class=\\\"module-content-inner p-t-0 p-b-0\\\"><nav class=\\\"navbar custom-sidebar\\\"><div class=\\\"text-center pull-right\\\" data-ng-repeat=\\\"step in vm.subStates\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.directive.\\'+step), \\'done\\':vm.getStatus(step), \\'incomplete\\':!vm.getStatus(step)}\\\"><a ng-attr-ui-sref=root.directive.{{step}}><img src=assets/images/monitoring-icons/details.png><div data-translate={{vm.subStatesTitle[$index]}}></div></a><hr></div></nav></div></div></div></section></div></div><!-- main section --><div class=\\\"col-xs-11 pull-right main-content-parent col-offset-right-1\\\"><!-- top nav monitoring digest _ This would be disappeared while printing--><div class=\\\"row screen-only\\\"><div class=\\\"module-wrapper col-xs-12 pull-right\\\"><section class=module><div class=\\\"module-content-inner p-1\\\"><div class=pane-body><fieldset data-ng-disabled=!vm.allowedAction><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.STEP></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.LEVEL></i><br><label class=inline data-ng-bind=\\\"vm.monitoring.currentStep.title + \\'/\\' + (vm.monitoring.organizationLevel|userLevel)\\\"></label></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.CONTRACT.NUMBER></i><br><span class=ltr-number data-ng-bind=vm.monitoring.contract.number|pNumber></span></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.APPLICANT_NAME></i><br><b data-ng-bind=vm.monitoring.contract.companyName></b></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.PLAN_TYPE></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.ECONOMIC_SECTION></i><br><b data-ng-bind=\\\"(vm.monitoring.contract.planType || \\'نامشخص\\')+\\'/\\'+(vm.monitoring.contract.economicSection.name || \\'نامشخص\\')\\\"></b></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></i><br><span data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></span></div></fieldset></div></div></section></div></div><!--main container--><section class=\\\"module directive\\\"><div ui-view></div><div class=\\\"module-footer text-center screen-only\\\"><div class=row><div class=\\\"col-xs-12 pull-right\\\"><button class=\\\"btn btn-default-alt pull-left\\\" ng-click=vm.next() data-ng-disabled=\\\"!vm.hasNext() || vm.loading\\\" data-ng-hide=\\\"!vm.hasNext() || vm.loading\\\">صفحه بعدی&nbsp;&nbsp; <i class=\\\"icon pe-icon pe-7s-back-2 f-17\\\" data-ng-hide=vm.loading></i> <i class=\\\"icon pe-icon pe-7s-timer f-17\\\" data-ng-show=vm.loading></i></button> <a class=\\\"btn btn-primary\\\" style=\\\"margin: auto\\\" data-ng-if=vm.monitoringId data-ui-sref={{vm.monitoringState}}({monitoringId:vm.monitoringId})><i class=\\\"icon pe-icon pe-7s-back f-17 f-bold mirrored\\\"></i> <span data-translate=APP.MODULES.DIRECTIVE.BACK_TO_MONITORING></span> </a><button class=\\\"btn btn-default-alt pull-right\\\" ng-click=vm.previous() data-ng-disabled=\\\"!vm.hasPrevious() || vm.loading\\\" data-ng-hide=\\\"!vm.hasPrevious() || vm.loading\\\"><i class=\\\"icon pe-icon pe-7s-next-2 f-17 pull-right\\\" data-ng-hide=vm.loading></i> <i class=\\\"icon pe-icon pe-7s-timer f-17\\\" data-ng-show=vm.loading></i> &nbsp;&nbsp; صفحه قبلی</button></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/directive-approval-place/directive-approval-place.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.DIRECTIVE_APPROVAL_PLACE.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr><!-- add row --><td></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><input class=form-control type=text data-ng-model=vm.name data-ng-keypress=vm.keyPressed($event)></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\" ng-click=vm.create()></i></td></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/economic-section/economic-section.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.ECONOMIC_SECTION.TITLE></h1><!-- Omitted code: economic section cannot be added manually for now --><div class=pull-left ng-if=false><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=!vm.toggleAdd><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><!-- :Omitted code --><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><!-- Omitted code: economic section cannot be added manually for now --><pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create(vm.name)><div class=form-group><div class=\\\"col-sm-6 pull-right\\\"><div class=row><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.SHARE.NAME></label><div class=\\\"col-sm-11 pull-right\\\"><input class=form-control data-ng-model=vm.name placeholder=نام></div></div></div><div class=\\\"col-sm-4 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></pane-body><!-- :Omitted code --><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control data-ng-model=item.name></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/graphical-report/graphical-report.html\",\"<div class=container-fluid><h2 class=\\\"approve-title screen-only\\\"></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=\\\"module-heading screen-only\\\"><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.GRAPHICAL_REPORT.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><span class=screen-only data-translate=APP.MODULES.REPORT.SEARCH></span><form class=\\\"dataTables_wrapper dt-bootstrap search-container screen-only\\\" data-ng-submit=vm.submit() name=reportsForm><!--select report--><div class=row ng-if=!vm.group><div class=\\\"col-md-8 pull-right sw\\\"><label class=\\\"control-label col-xs-12 pull-right\\\" data-translate=APP.MODULES.REPORT.NAME></label><button class=\\\"btn btn-default-alt col-sm-12 col-md-1\\\" data-ng-attr-title=\\\"{{\\'APP.ACTIONS.NEXT\\'|translate}}\\\" data-ng-click=vm.shiftSelectedReport(1) type=button><i class=\\\"fa fa-caret-left\\\"></i></button><div class=\\\"col-sm-12 col-md-10\\\"><ui-select data-ng-model=vm.selectedReport id=selected-report required sortable theme=bootstrap><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><i class=m-r-1 data-ng-bind=$select.selected.index|pNumber></i>-<b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat=\\\"report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }\\\"><div ng-bind-html=\\\"(vm.getReportStatus(report) ? \\'<i class=\\\\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\\\\'></i>\\' : \\'<i class=\\\\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\\\\'></i>\\') + report.content + \\'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\\\\'color: white;\\\\\\'>\\' + report.index + \\'</small>\\' | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><button class=\\\"btn btn-default-alt col-sm-12 col-md-1\\\" data-ng-attr-title=\\\"{{\\'APP.ACTIONS.PREVIOUS\\'|translate}}\\\" data-ng-click=vm.shiftSelectedReport(-1) type=button><i class=\\\"fa fa-caret-right\\\"></i></button></div></div><!--dates and level--><div class=row><!--from date--><div class=\\\"col-md-4 pull-right\\\" data-ng-if=!vm.selectedReport.noFromDate><div class=form-group data-ng-class=\\\"{\\'has-error\\': reportsForm.fromConfirmDate.$invalid}\\\"><label data-translate=APP.MODULES.REPORT.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate required></simple-date></div></div><!--to date--><div class=\\\"col-md-4 pull-right\\\" data-ng-if=!vm.selectedReport.noToDate><div class=form-group data-ng-class=\\\"{\\'has-error\\': reportsForm.toConfirmDate.$invalid}\\\"><label data-translate=APP.MODULES.REPORT.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate required></simple-date></div></div><!--organization level--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=vm.selectedReport.filters.organizationLevel><div class=form-group><label data-translate=APP.SHARE.REPORT_LEVEL></label><select class=form-control name=reportType ng-model=vm.reportParams.organizationLevel ng-options=\\\"level as (level|userLevel) for level in vm.reportLevels\\\"></select></div></div></div><div class=col-md-4><div class=form-group><button class=\\\"btn btn-success pull-left\\\" data-ng-disabled=!vm.selectedReport.id title=\\\"{{\\'APP.ACTIONS.REPORT_VIEW\\'|translate}}\\\" type=submit><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form><div class=\\\"col-md-12 pull-right m-3\\\"><h3 class=text-center data-ng-hide=vm.loading ng-bind-html=vm.reportTitle></h3><canvas chart-click=vm.onClick chart-data=vm.data chart-dataset-override=vm.datasetOverride chart-labels=vm.labels chart-options=vm.options chart-series=series class=\\\"chart chart-line\\\" ng-show=\\\"vm.currentReport !== null && !vm.loading\\\" id=line></canvas><!--data-ng-show=\\\"vm.currentReport === \\'monthly\\' || vm.currentReport === \\'monthlyInput\\' || vm.currentReport === \\'monthlyInputToOutputCount\\'\\\"--></div><div class=\\\"row screen-only\\\" data-ng-show=vm.loading><img alt=\\\"در حال بارگذاری ...\\\" class=centered height=50 ng-show=vm.loading src=assets/images/loading-sm.gif></div></div><div class=screen-only><br><br></div><!--<div class=\\\"well screen-only\\\" data-ng-hide=\\\"vm.loading && !vm.duration\\\">\\r\\n                                    مدت زمان بارگیری:\\r\\n                                    {{vm.duration|pNumber}}\\r\\n                                </div>--></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/help/help-admin.html\",\"<div class=container-fluid><h2 class=view-title data-translate=APP.MODULES.SAMPLE.TITLE></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.SAMPLE.LIST></h1><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=vm.toggleAddSample data-ng-click=\\\"vm.toggleAddSample=!vm.toggleAddSample\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddSample><form class=form-inline name=addSampleForm data-ng-submit=vm.createSample();addSampleForm.$setPristine() novalidate><div class=form-group data-ng-class=\\\"{\\'has-error\\':addSampleForm.name.$invalid &&!addSampleForm.name.$pristine}\\\"><span class=red-star>*</span><label for=view data-translate=APP.SHARE.NAME></label><input class=form-control type=text id=view name=view auto-focus={{!vm.toggleAddSample}} placeholder=\\\"{{\\'APP.SHARE.NAME\\'|translate}}\\\" data-ng-model=vm.view.name required></div><button class=\\\"btn btn-default-alt\\\" type=button data-ng-click=vm.cancelAddSample() uib-tooltip=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-disabled=addSampleForm.$invalid><i class=\\\"fa fa-check\\\"></i></button></form></pane-body><pane-body><div class=\\\"dataTables_wrapper table-responsive form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=15%><col width=70%><col width=15%></colgroup><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\" data-ng-bind=item.id></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-filter=\\\"{view:\\'text\\'}\\\"><span data-ng-bind=item.name data-ng-show=!vm.toggleEditSample[$index]></span><form name=viewForm{{$index}} data-ng-show=vm.toggleEditSample[$index] novalidate><div class=form-group data-ng-class=\\\"{\\'has-error\\':view.$invalid && !view.$pristine}\\\"><input class=form-control type=text auto-focus={{vm.toggleEditSample[$index]}} placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\" data-ng-model=item.name name=view required></div></form></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons cancel=vm.cancelEditSample($index) disabled edit=\\\"vm.updateSample(item, $index)\\\" delete=\\\"vm.deleteSample(item.id, $index)\\\" has-delete=true toggle=vm.toggleEditSample[$index]></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/help/help.html\",\"<div class=container-fluid><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><i class=\\\"icon pe-icon pe-7s-help1 f-17\\\"></i> <span data-translate=APP.MODULES.HELP.TITLE></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=\\\"row text-center\\\"><img src=../../assets/images/lms_flow.jpg usemap=#imgmap><map name=imgmap><area shape=circle coords=355,40,40 style=\\\"background-color: antiquewhite\\\" ng-click=vm.openFile(0) alt=start ui-sref=root.help data-ng-attr-title={{vm.getCaptionById(0)}}><area shape=poly coords=397,35,397,45,617,46,617,123,608,124,621,142,636,123,627,123,627,35 ng-click=vm.openFile(1) alt=01 ui-sref=root.help><area shape=poly coords=348,81,361,81,361,122,371,123,356,143,339,122,352,123,348,83 ng-click=vm.openFile(2) alt=02 ui-sref=root.help><area shape=poly coords=314,46,86,46,86,123,96,125,81,140,66,124,75,124,76,34,314,34,315,46 ng-click=vm.openFile(3) alt=03 ui-sref=root.help><area shape=poly coords=542,142,542,302,701,302,700,142 ng-click=vm.openFile(4) alt=r-1 ui-sref=root.help><area shape=poly coords=274,142,275,302,434,301,434,144 ng-click=vm.openFile(5) alt=r-2 ui-sref=root.help><area shape=poly coords=2,145,3,301,160,304,161,143 ng-click=vm.openFile(6) alt=r-3 ui-sref=root.help><area shape=poly coords=616,304,617,360,607,362,621,377,639,362,626,359,627,306 ng-click=vm.openFile(7) alt=g-1 ui-sref=root.help><area shape=poly coords=576,305,577,336,390,334,389,361,382,362,394,378,408,362,400,362,402,349,586,348,585,305 ng-click=vm.openFile(8) alt=g-2 ui-sref=root.help><area shape=poly coords=360,305,360,360,369,361,354,378,340,362,350,361,349,305 ng-click=vm.openFile(9) alt=g-3 ui-sref=root.help><area shape=poly coords=86,305,88,361,93,363,80,379,65,362,74,361,75,304 ng-click=vm.openFile(10) alt=g-4 ui-sref=root.help><area shape=poly coords=541,379,539,541,701,541,700,380 ng-click=vm.openFile(11) alt=r-4 ui-sref=root.help><area shape=poly coords=276,381,274,539,434,541,435,380 ng-click=vm.openFile(12) alt=r-5 ui-sref=root.help><area shape=poly coords=162,380,162,541,2,541,1,382 ng-click=vm.openFile(13) alt=r-6 ui-sref=root.help><area shape=poly coords=616,542,614,589,609,589,621,611,637,590,628,592,628,545 ng-click=vm.openFile(14) alt=g-5 ui-sref=root.help><area shape=poly coords=392,543,390,579,576,582,578,588,571,590,580,608,597,591,587,592,586,570,401,571,401,542 ng-click=vm.openFile(15) alt=g-6 ui-sref=root.help><area shape=poly coords=348,541,350,589,341,589,353,606,368,591,361,589,360,545 ng-click=vm.openFile(16) alt=g-7 ui-sref=root.help><area shape=poly coords=75,542,76,1083,296,1087,294,1099,316,1080,296,1066,295,1076,87,1076,86,541 ng-click=vm.openFile(17) alt=g-8 ui-sref=root.help><area shape=poly coords=539,608,540,769,700,770,701,608 ng-click=vm.openFile(18) alt=r-7 ui-sref=root.help><area shape=poly coords=273,607,276,770,435,770,435,610 ng-click=vm.openFile(19) alt=r-8 ui-sref=root.help><area shape=poly coords=613,771,617,810,608,813,623,831,635,813,627,811,626,769 ng-click=vm.openFile(20) alt=g-9 ui-sref=root.help><area shape=poly coords=351,770,350,1021,342,1022,355,1038,372,1020,361,1019,361,772 ng-click=vm.openFile(21) alt=g-10 ui-sref=root.help><area shape=poly coords=540,830,539,993,700,992,699,832 ng-click=vm.openFile(22) alt=r-9 ui-sref=root.help><area shape=poly coords=616,991,616,1074,416,1074,417,1065,398,1082,413,1095,415,1086,627,1089,627,993 ng-click=vm.openFile(23) alt=g-11 ui-sref=root.help><area shape=circle coords=355,1080,40 style=\\\"background-color: antiquewhite\\\" ng-click=vm.openFile(24) alt=end ui-sref=root.help></map></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/home/home.html\",\"<div><div class=container-fluid><h2 class=view-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=\\\"module module-projects-overview\\\"><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.HOME.QUICK_ACCESS></h1></div><div class=module-content><div class=module-content-inner><pane-body><ul class=\\\"data-page row text-center p-r-0\\\"><li class=\\\"item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right\\\" ng-show=vm.showContracts><a class=contract ui-sref=root.contract-page><span aria-hidden=true class=\\\"icon pe-icon pe-7s-note2 f-25 contract\\\"></span> <span class=desc data-translate=APP.MODULES.CONTRACT.TITLE></span></a></li><li class=\\\"item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right\\\"><a ui-sref=root.monitoring-cartable class=monitoring><span aria-hidden=true class=\\\"icon pe-icon pe-7s-glasses f-25 monitoring\\\"></span> <span class=desc data-translate=APP.MODULES.MONITORING.TITLE></span></a></li><li class=\\\"item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right\\\"><a class=trace ui-sref=\\\"root.trace-page({step: \\'cartable\\'})\\\"><span aria-hidden=true class=\\\"icon pe-icon pe-7s-alarm f-25 trace\\\"></span> <span class=desc data-translate=APP.MODULES.TRACE.TITLE></span></a></li><li class=\\\"item col-lg-3 col-md-6 col-sm-6 col-xs-6 pull-right\\\" ng-show=vm.showDirective><a class=directive ui-sref=root.directive-page><span aria-hidden=true class=\\\"icon pe-icon pe-7s-pen f-25 directive\\\"></span> <span class=desc data-translate=APP.MODULES.DIRECTIVE.TITLE></span></a></li></ul></pane-body></div></div></div></section></div></div></div><div class=loading-home ng-show=vm.loading><img src=../../../assets/images/loading.gif class=\\\"img-responsive col-lg-6 col-lg-offset-3\\\"></div></div>\");\n$templateCache.put(\"app/components/isic/isic-list.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.ISIC.TITLE></h1><div class=pull-left><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=false><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create()><div class=row><div class=form-group><div class=\\\"col-sm-8 pull-right\\\"><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.SHARE.NAME></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control data-ng-model=vm.isic.title placeholder=نام></div><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.MODULES.BASIC_INFO.ISIC.CODE></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control type=number data-ng-model=vm.isic.code placeholder=کد></div><!--<label class=\\\"col-sm-1 control-label pull-right\\\"\\r\\n                                                       data-translate=\\\"APP.MODULES.BASIC_INFO.ISIC.REGION\\\"></label>\\r\\n                                                <div class=\\\"col-sm-3 pull-right\\\">\\r\\n                                                    <input class=\\\"form-control\\\"\\r\\n                                                           type=\\\"number\\\"\\r\\n                                                           data-ng-model=\\\"vm.isic.region\\\"\\r\\n                                                           placeholder=\\\"منطقه\\\">\\r\\n                                                </div>--></div><div class=\\\"col-sm-4 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\">{{$index+1|pNumber}}</td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.ISIC.CODE\\'|translate\\\" data-ng-bind=item.code|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-ng-bind=item.name></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/investment-action/investment-action.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.INVESTMENT_ACTION.TITLE></h1></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create(vm.name,vm.type)><div class=row><div class=\\\"col-sm-1 pull-right\\\"><label data-translate=APP.SHARE.NAME></label></div><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control data-ng-model=vm.name></div><div class=\\\"col-sm-1 pull-right\\\"><label data-translate=APP.SHARE.TYPE></label></div><div class=\\\"col-sm-3 pull-right\\\"><select class=form-control data-ng-model=vm.type ng-options=\\\"item.value as item.title for item in vm.types\\\"></select></div><div class=\\\"col-sm-2 pull-right\\\"><button type=submit class=\\\"btn btn-success\\\" data-translate=APP.ACTIONS.SUBMIT></button></div></div></form></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title=\\\"\\'APP.SHARE.STATUS\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.type|investmentType></span> <span data-ng-show=item.toggle><select class=form-control data-ng-model=item.type ng-options=\\\"item.value as item.title for item in vm.types\\\"></select></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr><tr><td></td><td><input class=form-control type=text data-ng-model=vm.name></td><td><select class=form-control data-ng-model=vm.type ng-options=\\\"item.value as item.title for item in vm.types\\\"></select></td><td><i ng-click=vm.create() class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\"></i></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/loginlog/loginlog-list.html\",\"<div class=container-fluid><h2 class=view-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.LOGINLOG.TITLE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=row><div class=\\\"col-xs-12 pull-right\\\"><div class=row><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><label data-translate=APP.MODULES.USER.USERNAME></label><ui-select theme=bootstrap id=username name=username data-ng-model=vm.user><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select><!--<ui-select theme=\\\"bootstrap\\\" id=\\\"username\\\" name=\\\"username\\\"\\r\\n                                                               data-ng-model=\\\"vm.user\\\">\\r\\n                                                        <ui-select-match\\r\\n                                                                placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\">\\r\\n                                                            <span data-ng-bind=\\\"$select.selected.name\\\"></span>\\r\\n                                                        </ui-select-match>\\r\\n                                                        <ui-select-choices\\r\\n                                                                repeat=\\\"user in vm.allUsers | propsFilter : {name: $select.search,username:$select.search}\\\">\\r\\n                                                            <div ng-bind-html=\\\"(user.name+\\' (\\'+user.username+\\')\\') | highlight: $select.search\\\">\\r\\n                                                            </div>\\r\\n                                                        </ui-select-choices>\\r\\n                                                    </ui-select>--></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.FROM_DATE></label><simple-date data-ng-model=vm.fromDate name=fromDate id=fromDate></simple-date></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.TO_DATE></label><simple-date data-ng-model=vm.toDate name=toDate id=toDate></simple-date></div></div><div class=col-sm-12><div class=\\\"form-group margin-top-md pull-left\\\"><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() uib-tooltip=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></div></div></form></div><hr><div class=\\\"row screen-only\\\" data-ng-show=vm.loading><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" ng-show=vm.loading class=centered height=50></div><div class=\\\"row screen-only\\\" data-ng-hide=vm.loading><div class=col-xs-12><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> <span>( {{vm.duration|pNumber}} ثانیه)</span></div></div><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=5%><col width=45%><col width=25%><col width=25%></colgroup><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td ng-bind=\\\"(vm.tableParams.count() * (vm.tableParams.page()-1) + $index+1)|pNumber\\\"></td><td data-title=\\\"\\'APP.MODULES.USER.FULL_NAME\\'|translate\\\" dir=ltr data-sortable=\\\"\\'user.name\\'\\\" data-ng-bind=item.user.name></td><td data-title=\\\"\\'APP.SHARE.DATE\\'|translate\\\" dir=ltr data-sortable=\\\"\\'date\\'\\\" data-ng-bind=item.date|jDateTime|pNumber></td><td data-title=\\\"\\'APP.MODULES.LOGINLOG.IP_ADDRESS\\'|translate\\\" dir=ltr data-sortable=\\\"\\'ipAddress\\'\\\" data-ng-bind=item.ipAddress></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/manage-user-guide/manage-user-guide.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.MANAGE_USER_GUIDE.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer table-responsive row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParamsAttachment data-show-filter=false><colgroup><col width=30%><col width=45%><col width=15%><col width=10%></colgroup><tr class=text-center data-ng-repeat=\\\"item in vm.attachments\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME\\'|translate\\\"><a ng-href={{vm.host}}api/fileManager/attachment/{{item.helpAttachment.id}}/getContent/{{item.helpAttachment.name}}.{{item.helpAttachment.type}} target=_blank><!--<span data-ng-bind=\\\"item.helpAttachment.name\\\"></span>--> <span class=\\\"fa fa-download\\\"></span></a></td><td data-title=\\\"\\'APP.SHARE.STEP\\'|translate\\\" data-ng-bind=vm.getStepNumberCaption(item.stepNumber)></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER\\'|translate\\\" data-ng-bind=item.helpAttachment.creatorLmsUser.name></td><td data-title=\\\"\\'APP.SHARE.DELETE\\'|translate\\\"><span class=\\\"icon pe-icon pe-7s-trash f-20 text-danger\\\" data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=vm.deleteAttachment(item.id)></span></td></tr><tr><td><file-upload class=\\\"inline col-xs-8 pull-right\\\" file=vm.attachment.attachment data-uploading=vm.uploaded label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><button class=\\\"btn btn-default-alt inline\\\" type=button data-ng-click=vm.cancelAddAttachment() title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button></td><td colspan=2><select class=form-control ng-options=\\\"step as step.caption for step in vm.steps\\\" id=step name=step data-ng-model=vm.step required></select></td><td><button class=\\\"btn btn-primary-alt inline\\\" ng-click=vm.addAllAttachments() title=\\\"{{\\'APP.ACTIONS.UPLOAD\\'|translate}}\\\" ng-disabled=!vm.attachment><i class=\\\"fa fa-upload\\\"></i></button></td></tr></table></div></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/permissions/permissions-list.html\",\"<div class=container-fluid><h2 class=view-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.PERMISSION.TITLE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=row><div class=\\\"col-xs-12 pull-right\\\"><div class=row><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.PERMISSION.CAPTION for=caption></label><input class=form-control id=caption name=caption data-ng-model=vm.searchItem.caption></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.PERMISSION.APPLY for=valid></label><select class=form-control data-ng-options=\\\"state.value as state.title for state in vm.validStates\\\" id=valid name=valid data-ng-model=vm.searchItem.valid></select></div></div></div></div><div class=col-xs-12><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() uib-tooltip=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button></div></div></div></form></div><hr><div class=pane-body><div class=row><div class=col-xs-12><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b></div></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=5%><col width=75%><col width=20%></colgroup><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td ng-bind=\\\"(vm.page*vm.size + $index+1)|pNumber\\\"></td><td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\" data-filter=\\\"{caption:\\'text\\'}\\\"><span data-ng-bind=item.caption data-ng-show=!vm.toggleEditPermission[$index]></span><form name=roleForm{{$index}} data-ng-show=vm.toggleEditPermission[$index] novalidate><div class=form-group data-ng-submit=vm.updatePermission(item,$index) data-ng-class=\\\"{\\'has-error\\':role.$invalid && !role.$pristine}\\\"><input class=form-control tabindex=\\\"{{$index + 1}}\\\" ng-keypress=vm.keyPressed($event,item,$index) auto-focus={{vm.toggleEditPermission[$index]}} placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\" data-ng-model=item.caption name=caption required></div></form></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons cancel=vm.cancelEditPermission($index) has-edit=true disabled edit=vm.updatePermission(item,$index) has-delete=false toggle=vm.toggleEditPermission[$index]></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/plan-type/plan-type.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.ECONOMIC_SECTION.TITLE></h1><!-- Omitted code: plan type cannot be added manually for now --><div class=pull-left ng-if=false><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=!vm.toggleAdd><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><!-- :Omitted code --><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=\\\"alert alert-warning alert-dismissible\\\" role=alert><strong data-translate=Warning!></strong> <span data-translate=\\\"Plan type info\\\"></span></div><!-- :Omitted code --><div class=pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create(vm.name)><div class=form-group><div class=\\\"col-sm-6 pull-right\\\"><div class=row><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.SHARE.NAME></label><div class=\\\"col-sm-11 pull-right\\\"><input class=form-control data-ng-model=vm.name placeholder=نام></div></div></div><div class=\\\"col-sm-4 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></div><!-- :Omitted code --><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-bind=item.title></span></td><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.PLAN_TYPE.PROVINCE_LIMIT\\'|translate\\\"><span data-ng-hide=item.toggle data-ng-bind=item.provinceLimit|pCurrency></span><div data-ng-show=item.toggle class=form-group><input class=form-control data-ng-model=item.provinceLimit ui-number-mask=0 dir=ltr uib-tooltip=\\\"{{item.provinceLimit|pCurrency:\\'A\\'}}\\\" tooltip-trigger=\\\"\\'focus\\'\\\"></div></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle has-delete=false cancel=\\\"item.toggle = !item.toggle\\\"></command-buttons></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/monitoring-list.html\",\"<div class=\\\"container-fluid monitoring\\\"><back-button data-ng-show=vm.contractId></back-button><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-glasses monitoring\\\"></span> <span data-translate={{vm.title}}></span></h1><div class=pull-left data-ng-show=vm.contractId><a class=\\\"btn btn-sm btn-success-alt\\\" ng-click=vm.openModal(vm.contractId)><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.CONTRACT.ADD_MONITORING>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.showSearch><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=row><div class=\\\"col-md-6 pull-right\\\"><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER for=monitoringNumber></label><input class=form-control type=text id=monitoringNumber name=monitoringNumber data-ng-model=vm.searchItem.monitoringNumber></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMPANY for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><!--contract from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><!--<adm-dtp data-ng-model=\\\"vm.contractFromDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.contractFromDate name=contractFromDate></simple-date></div></div><!--contract due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><!--<adm-dtp data-ng-model=\\\"vm.contractToDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.contractToDate name=contractToDate></simple-date></div></div><!--monitoring from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.monitoringToDate name=monitoringToDate></simple-date></div></div><!--create from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_FROM></label><simple-date data-ng-model=vm.createFromDate name=createFromDate></simple-date></div></div><!--create due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_TO></label><simple-date data-ng-model=vm.createToDate name=createToDate></simple-date></div></div><!--confirm from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_FROM></label><simple-date data-ng-model=vm.confirmFromDate name=confirmFromDate></simple-date></div></div><!--confirm due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_TO></label><simple-date data-ng-model=vm.confirmToDate name=confirmToDate></simple-date></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control data-ng-model=vm.searchItem.minContractAmount currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control type=text id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label for=directive data-translate=APP.MODULES.MONITORING.DIRECTIVE_NUMBER></label><input class=form-control type=text id=directive name=directive data-ng-model=vm.searchItem.directiveNumber></div></div><!-- search expert --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.EXPERT></label><ui-select data-ng-model=vm.searchItem.expert><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search teamHead --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.TEAHM_HEAD></label><ui-select data-ng-model=vm.searchItem.teamHead><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.teamHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search finalHead --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.FINAL_HEAD></label><ui-select data-ng-model=vm.searchItem.finalHead><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.finalHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search owner --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.OWNER></label><ui-select data-ng-model=vm.searchItem.owner><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.owners |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search checkList --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></label><ui-select data-ng-model=vm.checkList><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat=\\\"item in vm.checkLists |\\r\\n                                                                        propsFilter : {content: $select.search}\\\"><div ng-bind-html=\\\" item.content | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><!-- search checkList Status --><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS_VALUE></label><select class=form-control id=checkListStatus data-ng-model=vm.checkListStatus data-ng-options=\\\"status.value as status.caption for status in vm.checkListStatusList\\\"></select></div></div><!--included codes--><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!-- search province --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><div><ui-select multiple ng-model=vm.searchItem.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"province.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+province.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div><!-- search branch --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.BRANCH></label><div><!--<select class=\\\"form-control\\\"\\r\\n                                                                ng-options=\\\"branch.id as branch.title for branch in vm.branches\\\"\\r\\n                                                                id=\\\"branch\\\" name=\\\"branch\\\"\\r\\n                                                                data-ng-model=\\\"vm.searchItem.branchId\\\">\\r\\n                                                        </select>\\r\\n                                                        <span class=\\\"input-group-addon\\\">\\r\\n                                                            <i class=\\\"fa fa-remove cursor-pointer text-danger\\\"\\r\\n                                                               ng-click=\\\"vm.searchItem.branchId = null\\\"></i>\\r\\n                                                        </span>--><ui-select multiple ng-model=vm.searchItem.branchIds theme=bootstrap id=branch sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.BRANCH.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"branch.id as branch in vm.branches | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"branch.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+branch.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div></div><div class=col-md-6><div class=\\\"col-md-6 pull-right\\\"><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.MONITORING.STEP></label>:&nbsp;<div class=\\\"btn-group nav-btn-group limited-width\\\"><label class=\\\"btn btn-default\\\" data-ng-repeat=\\\"step in vm.steps\\\" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class=\\\"{\\'fa-check-square-o\\':step.selected, \\'fa-square-o\\':!step.selected}\\\"></i> <span data-ng-bind=step.title style=\\\"font-size: 1rem;overflow-wrap: break-word;white-space: initial\\\"></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label>:&nbsp;<div class=\\\"btn-group nav-btn-group limited-width\\\"><label class=\\\"btn btn-default\\\" data-ng-repeat=\\\"step in vm.traceSteps\\\" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class=\\\"{\\'fa-check-square-o\\':step.selected, \\'fa-square-o\\':!step.selected}\\\"></i> <span data-ng-bind=step.title style=\\\"font-size: 1rem;overflow-wrap: break-word;white-space: initial\\\"></span></label></div></div></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION_SEARCH_TITLE></label>:&nbsp;<div class=\\\"btn-group nav-btn-group limited-width economic-sections\\\"><label class=\\\"btn btn-default\\\" data-ng-repeat=\\\"economicSection in vm.economicSections\\\" ng-model=economicSection.selected uib-btn-checkbox><i class=\\\"fa fa-check-square-o\\\" ng-show=economicSection.selected></i> <i class=\\\"fa fa-square-o\\\" ng-hide=economicSection.selected></i> <img data-ng-src=assets/images/section-icons/{{economicSection.id}}.png alt=\\\"\\\" width=25> <span data-ng-bind=economicSection.name></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE_SEARCH_TITLE></label>:&nbsp;<div class=\\\"btn-group nav-btn-group limited-width plan-types\\\"><label class=\\\"btn {{planType.key}}\\\" data-ng-repeat=\\\"planType in vm.planTypes\\\" ng-model=planType.selected uib-btn-checkbox><i class=\\\"fa fa-check-square-o\\\" ng-show=planType.selected></i> <i class=\\\"fa fa-square-o\\\" ng-hide=planType.selected></i> <span data-ng-bind=planType.title></span></label><label class=\\\"btn default\\\"><i class=\\\"fa fa-circle\\\"></i> <span data-translate=APP.SHARE.UNDEFINED></span></label></div></div></div><div class=col-md-12><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ACTIVENESS_STATUS_SEARCH_TITLE></label>:&nbsp;<div class=\\\"btn-group nav-btn-group limited-width\\\"><label class=\\\"btn btn-default\\\" data-ng-repeat=\\\"activenessStatuse in vm.activenessStatuses\\\" ng-model=activenessStatuse.selected uib-btn-checkbox><i class=fa data-ng-class=\\\"{\\'fa-check-square-o\\':activenessStatuse.selected, \\'fa-square-o\\': !activenessStatuse.selected}\\\"></i> <img data-ng-src=assets/images/activeness-icons/{{activenessStatuse.key}}.png alt=\\\"\\\" width=25> <span data-ng-bind=activenessStatuse.title style=\\\"font-size: 1rem;overflow-wrap: break-word;white-space: initial\\\"></span></label><label class=\\\"btn btn-default\\\"><i class=\\\"fa fa-circle\\\"></i> <img data-ng-src=assets/images/activeness-icons/undefined.png alt=\\\"\\\" width=25> <span data-translate=APP.SHARE.UNDEFINED></span></label></div><!--<ui-select multiple ng-model=\\\"vm.searchItem.activenessStatuses\\\" theme=\\\"bootstrap\\\"\\r\\n                                                                   id=\\\"activenessStatuse\\\"\\r\\n                                                                   sortable=\\\"true\\\" close-on-select=\\\"false\\\">\\r\\n                                                            <ui-select-match\\r\\n                                                                    ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PLAN_TYPE.PLACEHOLDER\\'|translate}}\\\">\\r\\n                                                                {{$item.title}}\\r\\n                                                            </ui-select-match>\\r\\n                                                            <ui-select-choices\\r\\n                                                                    repeat=\\\"activenessStatuse.value as activenessStatuse in vm.activenessStatuses | propsFilter: {title: $select.search}\\\">\\r\\n                                                                <div ng-bind-html=\\\"activenessStatuse.title | highlight: $select.search\\\"></div>\\r\\n                                                            </ui-select-choices>\\r\\n                                                        </ui-select>--></div></div></div></div></div><div class=row><div class=col-xs-12><br><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() ng-attr-title=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit ng-attr-title=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=\\\"vm.exportMonitoring(\\'EXCEL\\')\\\" ng-attr-title=\\\"{{\\'APP.ACTIONS.EXPORT\\'|translate}}\\\"><i class=\\\"fa fa-file-excel-o\\\"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><div class=pane-body id=search-result-container><div class=\\\"row screen-only\\\" data-ng-if=vm.showSearch><div class=\\\"col-xs-12 screen-only\\\" data-ng-hide=vm.loading><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" data-ng-show=vm.loading class=centered height=50></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-table-pagination few-paddings\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"monitoring in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\"><span data-ng-bind=monitoring.index|pNumber></span></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.SECTION_TYPE_ACTIVENESS\\'|translate\\\" class=\\\"default {{monitoring.planType}}\\\" data-sortable=\\\"\\'planType\\'\\\" data-ng-attr-title=\\\"{{ (monitoring.contract.economicSection.name || \\'نامشخص\\') + \\'    \\' + (monitoring.planType|planType) + \\'    \\' + (monitoring.activenessStatus|activeness)}}\\\"><img width=25 ng-src=assets/images/section-icons/{{monitoring.contract.economicSection.id}}.png> <img width=15 class=\\\"pull-right m-r-2\\\" ng-src=\\\"assets/images/activeness-icons/{{monitoring.activenessStatus ? monitoring.activenessStatus : \\'undefined\\'}}.png\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.NUMBER\\'|translate\\\" data-sortable=\\\"\\'number\\'\\\" class=\\\"b-warning {{vm.getDelay(monitoring).class}}\\\"><a dir=ltr data-ng-attr-title={{vm.getDelay(monitoring).title|pNumber}} data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span></a><br ng-if=monitoring.directive.dirNumber><a dir=ltr ng-if=monitoring.directive.dirNumber data-ui-sref=\\\"root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\\'root.monitoring.monitoring-details\\'})\\\"><span data-translate=APP.MODULES.DIRECTIVE.NUMBER></span>: <span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.MONITORING.STEP\\'|translate\\\" data-sortable=\\\"\\'currentStepId\\'\\\" data-ng-bind=\\\"monitoring.currentStep.title \\\"></td><td data-title=\\\"(\\'APP.MODULES.MONITORING.DATE\\'|translate)\\\" data-sortable=\\\"\\'createDate\\'\\\"><div data-ng-show=monitoring.contract.contractDate data-ng-bind=\\\"\\'قرارداد:\\' + (monitoring.contract.contractDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.createDate data-ng-bind=\\\"\\'ایجاد:\\' + (monitoring.createDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.monitoringDate data-ng-bind=\\\"\\'بازدید:\\' + (monitoring.monitoringDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.lastTransitionDate data-ng-bind=\\\"\\'   عملیات:\\' + (monitoring.lastTransitionDate|jDate:\\'jYY/jM/jD\\')\\\"></div></td><td data-title=\\\"\\'APP.MODULES.MONITORING.EXPERTS\\'|translate\\\" data-sortable=\\\"\\'userMonitorings.lmsUser.username\\'\\\"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind=\\\"\\'، \\' + monitoring.userMonitorings[1].lmsUser.name\\\" ng-if=monitoring.userMonitorings[1]></span><br ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=vm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span><br ng-if=monitoring.finalApproverUser><span ng-if=monitoring.finalApproverUser><span data-translate=APP.MODULES.CONTRACT.MONITORING.APPROVER></span>: <span data-ng-bind=monitoring.finalApproverUser.name></span></span></td><td data-title=\\\"\\'APP.MODULES.MONITORING.COMPANY\\'|translate\\\" data-sortable=\\\"\\'contract.companyName\\'\\\" data-ng-bind=monitoring.contract.companyName></td><td data-title=\\\"\\'APP.MODULES.MONITORING.AMOUNT\\'|translate\\\" data-sortable=\\\"\\'contract.totalAmount\\'\\\" data-ng-attr-title=\\\"{{monitoring.contract.totalAmount|pCurrency:\\'A\\'}}\\\"><a dir=ltr data-ng-attr-title={{monitoring.contract.number|pNumber}} data-ng-click=vm.openDetailsModal(monitoring.contract.id,true)><span data-ng-bind=\\\"(monitoring.contract.totalAmount|pCurrency:\\'R\\')\\\"></span></a></td><!--<td data-title=\\\"\\'APP.MODULES.CONTRACT.NUMBER\\'|translate\\\"\\r\\n                                                data-sortable=\\\"\\'contract.number\\'\\\">\\r\\n                                                 <a dir=\\\"ltr\\\" ng-attr-title=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\"\\r\\n                                                    data-ui-sref=\\\"root.contract-details({contractId:monitoring.contract.id})\\\">\\r\\n                                                     <span data-ng-bind=\\\"monitoring.contract.number|pNumber\\\"></span>\\r\\n                                                 </a>\\r\\n                                                <a dir=\\\"ltr\\\"\\r\\n                                                   data-ng-attr-title=\\\"{{monitoring.contract.number|pNumber}}\\\"\\r\\n                                                   data-ng-click=\\\"vm.openDetailsModal(monitoring.contract.id,true)\\\">\\r\\n                                                    <span data-ng-bind=\\\"(monitoring.contract.number|pNumber|limitTo:5)+\\'...\\'\\\"></span>\\r\\n                                                </a>\\r\\n                                            </td>--><!-- <td data-title=\\\"\\'APP.MODULES.DIRECTIVE.NUMBER\\'|translate\\\"\\r\\n                                                 data-sortable=\\\"\\'contract.directive.number\\'\\\">\\r\\n                                                 <a dir=\\\"ltr\\\"\\r\\n                                                    data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\"\\r\\n                                                    data-ui-sref=\\\"root.directive.details({directiveId:monitoring.contract.directive.id})\\\">\\r\\n                                                     <span data-ng-bind=\\\"monitoring.contract.directive.number|pNumber\\\"></span>\\r\\n                                                 </a>\\r\\n                                             </td>--><td data-title=\\\"\\'APP.MODULES.MONITORING.PLACE\\'|translate\\\" data-sortable=\\\"\\'payerBranch\\'\\\"><span data-ng-bind=monitoring.contract.province.title></span><br data-ng-if=monitoring.contract.branch><span data-ng-if=monitoring.contract.branch data-ng-bind=monitoring.contract.branch.title></span></td><td data-title=\\\"\\'\\'\\\"><a class=\\\"btn btn-sm text-info\\\" title=\\\"{{\\'APP.MODULES.MONITORING.FLOW_VIEW.TITLE\\'|translate}}\\\" ng-click=vm.openFlowModal(monitoring.id)><span class=\\\"icon pe-icon pe-7s-shuffle f-19 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-highlight\\\" title=\\\"{{\\'APP.ACTIONS.DOWNLOAD_ALL\\'|translate}}\\\" ng-href=\\\"{{\\'api/monitoring/\\'+monitoring.id+\\'/getAllFilesZipped/\\' + monitoring.number +\\'.zip\\'}}\\\" target=_blank download={{monitoring.number}}.zip><span class=\\\"icon pe-icon pe-7s-download f-19 f-bold\\\"></span> </a><i class=\\\"icon pe-icon pe-7s-trash f-19 f-bold text-danger cursor-pointer\\\" title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-class=\\\"{\\'disabled\\': monitoring.deleteDisabled}\\\" data-ng-show=\\\"monitoring.ownerUsername === vm.currentUser.username\\\" ng-click=vm.deleteMonitoring(monitoring)></i></td></tr></table></div></div><hr><div class=pane-body ng-show=vm.showGuidance><div class=search-container><h4 data-translate=GUIDANCE></h4><hr><div class=\\\"row guidance\\\"><div class=\\\"col-md-1 pull-right\\\"><b>بخش اقتصادی:</b></div><div class=\\\"col-md-11 pull-right\\\"><div class=\\\"col-md-2 pull-right\\\" data-ng-repeat=\\\"section in vm.economicSections\\\"><img data-ng-src=assets/images/section-icons/{{section.id}}.png alt=\\\"\\\" width=25> <span data-ng-bind=section.name></span></div></div></div><div class=\\\"row guidance\\\"><div class=\\\"col-md-1 pull-right\\\"><b>نوع طرح:</b></div><div class=\\\"col-md-11 pull-right\\\"><div class=\\\"col-md-2 pull-right text-center\\\" data-ng-repeat=\\\"planType in vm.planTypes\\\"><div class=\\\"{{planType.key}} plan-type\\\" data-ng-bind=planType.title></div></div><div class=\\\"col-md-2 pull-right text-center\\\"><div class=\\\"default plan-type\\\" data-translate=APP.SHARE.UNDEFINED></div></div></div></div><div class=\\\"row guidance\\\"><div class=\\\"col-md-1 pull-right\\\"><b>توقف در کارتابل:</b></div><div class=\\\"col-md-11 pull-right\\\"><div class=\\\"col-md-2 pull-right text-center\\\" data-ng-repeat=\\\"warning in vm.warnings\\\" style=\\\"height: 25px;vertical-align: middle\\\"><div class=\\\"monitoring-warning {{warning.key}}\\\" data-ng-bind=warning.title></div></div></div></div></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/monitoring.html\",\"<div class=\\\"container-fluid monitoring\\\" tabindex=1000 data-ng-keydown=vm.keyDown($event) auto-focus=true><!--<back-button></back-button>--><h2 class=plan-title><span data-ng-bind=\\\"(\\'APP.MODULES.MONITORING.TITLE\\'|translate) + \\' شماره \\'\\\"></span> <span data-ng-bind=vm.monitoring.number|pNumber class=ltr-number></span> <span data-ng-bind=\\\"\\'(\\'\\\"></span> <span data-translate=APP.MODULES.MONITORING.EXPERTS></span>: <span data-ng-bind=vm.monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind=\\\"\\'، \\' + vm.monitoring.userMonitorings[1].lmsUser.name\\\" ng-show=vm.monitoring.userMonitorings[1]></span> <span data-ng-bind=\\\"\\')\\'\\\"></span></h2><h4 class=panel-subtitle>ایجاد شده در <span data-ng-bind=\\\"vm.monitoring.createDate|jDate:\\'jD jMMMM jYY ساعت H:mm\\'\\\"></span> <span ng-if=\\\"vm.monitoring.organizationLevel===\\'STAFF\\'\\\">در اداره نظارت بر اعطای تسهیلات </span><span ng-if=\\\"vm.monitoring.organizationLevel===\\'PROVINCE\\'\\\">در استان مربوطه </span><span ng-if=\\\"vm.monitoring.organizationLevel===\\'BRANCH\\'\\\">در شعبه مربوطه </span><!--hide buttons when monitoring from convert debit--> <span data-ng-if=!vm.fromConvertDebit><button type=button class=\\\"btn btn-success pull-left\\\" data-ng-if=\\\"vm.monitoring.currentStep.name ==\\'created\\' && vm.isMyMission()\\\" data-ng-click=vm.accept()><span class=\\\"fa fa-play\\\"></span> <span data-translate=APP.ACTIONS.START></span></button><!--ui-sref=\\\"monitoring-print({monitoringId:vm.monitoringId})\\\"--> <a class=\\\"btn btn-primary pull-left\\\" data-ng-href=api/report/monitoringReport/{{vm.monitoring.id}}/report_{{vm.monitoring.number}}.PDF target=_blank data-ng-if=\\\"vm.monitoring.currentStep.id > 1\\\"><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.MODULES.MONITORING.PRINT>‌</span> </a><a class=\\\"btn btn-warning pull-left m-l-1\\\" data-ng-href=api/report/monitoringReportCustomized/{{vm.monitoring.id}}/report_{{vm.monitoring.number}}.PDF target=_blank data-ng-if=\\\"vm.monitoring.currentStep.id > 1\\\"><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.MODULES.MONITORING.PRINTCUSTOMIZED>‌</span> </a>&nbsp; <button class=\\\"btn btn-warning-alt pull-left m-l-1\\\" data-ng-click=vm.cancelFinalized() data-ng-if=\\\"vm.monitoring.currentStep.finalized && vm.monitoring.currentStep.id != 1\\\"><i class=\\\"fa fa-shield\\\"></i> <span data-translate=APP.MODULES.MONITORING.CANCEL>‌</span></button> &nbsp; <button class=\\\"btn btn-warning-alt pull-left m-l-1\\\" data-ng-click=vm.deleteMonitoring() data-ng-if=\\\"vm.monitoring.currentStep.name ==\\'created\\'\\\"><i class=\\\"fa fa-remove\\\"></i> <span data-translate=APP.ACTIONS.REMOVE>‌</span></button></span></h4><div class=row><!-- sidebar monitoring steps --><!--hide sidebar menu when monitoring from convert debit--><div class=\\\"col-xs-1 pull-right p-0 screen-only custom-sidebar-parent\\\" data-ng-if=!vm.fromConvertDebit><div class=module-wrapper><section class=module><div class=\\\"module-inner p-0\\\"><div class=module-content><div class=\\\"module-content-inner p-t-0 p-b-0\\\"><nav class=\\\"navbar custom-sidebar screen-only\\\"><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.monitoring-details\\'), \\'done\\':vm.stepStatus.details, \\'incomplete\\':!vm.stepStatus.details}\\\"><a ui-sref=root.monitoring.monitoring-details({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/details.png><div data-translate=APP.MODULES.MONITORING.DETAILS></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.contract\\'),\\'done\\':vm.stepStatus.contract, \\'incomplete\\':!vm.stepStatus.contract}\\\"><a ui-sref=root.monitoring.contract({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/contract.png><div data-translate=APP.MODULES.CONTRACT.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.preConditions\\'),\\'done\\':vm.stepStatus.preConditions, \\'incomplete\\':!vm.stepStatus.preConditions}\\\"><a ui-sref=root.monitoring.preConditions({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/preConditions.png><div data-translate=APP.MODULES.MONITORING.PRECONDITIONS.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.license\\'),\\'done\\':vm.stepStatus.license, \\'incomplete\\':!vm.stepStatus.license}\\\"><a ui-sref=root.monitoring.license({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/license.png><div data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.invoice\\'), \\'done\\':vm.stepStatus.invoice, \\'incomplete\\':!vm.stepStatus.invoice}\\\"><a ui-sref=root.monitoring.invoice({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/invoice.png><div data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.payments\\'), \\'done\\':vm.stepStatus.payments, \\'incomplete\\':!vm.stepStatus.payments}\\\"><a ui-sref=root.monitoring.payments({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/payment.png><div data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.progress\\'), \\'done\\':vm.stepStatus.progress, \\'incomplete\\':!vm.stepStatus.progress}\\\"><a ui-sref=root.monitoring.progress({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/progress.png><div data-translate=APP.MODULES.MONITORING.PROGRESS.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.assurance\\'), \\'done\\':vm.stepStatus.assurance, \\'incomplete\\':!vm.stepStatus.assurance}\\\"><a ui-sref=root.monitoring.assurance({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/assurance.png><div data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.lat-long\\'), \\'done\\':vm.stepStatus.latlong, \\'incomplete\\':!vm.stepStatus.latlong}\\\"><a ui-sref=root.monitoring.lat-long({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/lat-long.png><div data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.checkList\\'), \\'done\\':vm.stepStatus.checkList, \\'incomplete\\':!vm.stepStatus.checkList}\\\"><a ui-sref=root.monitoring.checkList({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/checkList.png><div data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></div></a><hr></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.conflict\\'), \\'done\\':vm.stepStatus.conflict, \\'incomplete\\':!vm.stepStatus.conflict}\\\"><a ui-sref=root.monitoring.conflict({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/conflict.png><div data-translate=APP.MODULES.MONITORING.CONFLICT.TITLE></div></a><hr></div><div class=\\\"text-center pull-right mid-complete\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.trace\\')}\\\" data-ng-if=\\\"vm.monitoring.currentStep.id > 2 \\\"><a ui-sref=root.monitoring.trace({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/trace.png><div data-translate=APP.MODULES.MONITORING.MONITORING_TRACE></div></a></div><div class=\\\"text-center pull-right\\\" ng-class=\\\"{\\'active\\':vm.isActive(\\'root.monitoring.comment\\'), \\'done\\':!vm.getMine(), \\'incomplete\\':vm.getMine()}\\\" data-ng-if=\\\"vm.monitoring.currentStep.name !=\\'created\\' && vm.monitoring.currentStep.name !=\\'finalHeadAccepted\\'\\\"><a ui-sref=root.monitoring.comment({monitoringId:vm.monitoringId})><img src=assets/images/monitoring-icons/comment.png><div data-translate=APP.MODULES.MONITORING.ACCEPT_REJECT></div></a></div></nav></div></div></div></section></div></div><!-- main section --><div class=\\\"col-xs-11 pull-right main-content-parent col-offset-right-1\\\"><!-- top nav monitoring digest _ This is only for print--><div class=\\\"row print-only\\\"><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-content><div class=\\\"module-content-inner p-t-0 p-b-0\\\"><table class=\\\"table table-bordered\\\"><tr><th>وضعیت</th><th>شماره قرارداد</th><th>نام متقاضی</th><th>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th><th>آخرین عملیات</th></tr><tr><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td data-ng-bind=vm.monitoring.contract.companyName></td><td data-ng-bind=\\\"(vm.monitoring.contract.planType || \\'نامشخص\\')+\\'/\\'+(vm.monitoring.contract.economicSection.name || \\'نامشخص\\')\\\"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td><td data-ng-bind=\\\"(vm.lastProcess.transition.name|monitoringDefinition|translate) + \\'،\\' + vm.lastProcess.user.name + \\' در  \\' + (vm.lastProcess.createDate|jDate:\\'hh:mm jYY/jM/jD \\'|pNumber)\\\"></td></tr></table></div></div></div></section></div></div><!-- top nav monitoring digest _ This would be disappeared while printing--><div class=\\\"row screen-only\\\"><div class=\\\"module-wrapper col-xs-12 pull-right\\\"><section class=module><div class=\\\"module-content-inner p-1\\\"><div class=pane-body><fieldset data-ng-disabled=!vm.allowedAction><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.STEP></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.LEVEL></i><br><label class=inline data-ng-bind=\\\"vm.monitoring.currentStep.title + \\'/\\' + (vm.monitoring.organizationLevel|userLevel)\\\"></label></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.CONTRACT.NUMBER></i><br><a class=ltr-number data-ng-bind=vm.monitoring.contract.number|pNumber data-ng-click=vm.openDetailsModal(vm.monitoring.contract.id,true)></a></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.APPLICANT_NAME></i><br><b data-ng-bind=vm.monitoring.contract.companyName></b></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.PLAN_TYPE></i>/ <i class=control-label data-translate=APP.MODULES.MONITORING.ECONOMIC_SECTION></i><br><b data-ng-bind=\\\"(vm.monitoring.contract.planType || \\'نامشخص\\')+\\'/\\'+(vm.monitoring.contract.economicSection.name || \\'نامشخص\\')\\\"></b></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></i><br><a ui-sref=\\\"root.directive.details({directiveId: vm.monitoring.directive.dirNumber,monitoringId:vm.monitoring.id, monitoringState: vm.currentState})\\\" ng-show=vm.monitoring.directive.dirNumber><span data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></span> </a><i data-ng-hide=vm.monitoring.directive.dirNumber class=\\\"icon pe-icon pe-7s-note f-17 cursor-pointer\\\" ng-click=vm.openDirectiveModal()></i></div><div class=\\\"monitoring-info col-lg-2 pull-right\\\"><i class=control-label data-translate=APP.MODULES.MONITORING.LAST_OPERATION></i><br><b ng-click=vm.openFlowModal() ng-show=vm.lastProcess.transition data-ng-bind=\\\"(vm.lastProcess.transition.name|monitoringDefinition|translate) +\\r\\n                                                     \\'،\\' + vm.lastProcess.user.name\\\" data-ng-attr-title=\\\"{{vm.lastProcess.createDate|jDate:\\'hh:mm jYY/jM/jD \\'|pNumber}}\\\"></b></div></fieldset></div></div></section></div><div class=\\\"col-xs-12 pull-right\\\" data-ng-show=vm.monitoring.firstDescription><div class=\\\"alert warning\\\"><!--<a class=\\\"close pull-left\\\"\\r\\n                           uib-tooltip=\\\"بستن\\\"\\r\\n                           data-ng-click=\\\"vm.monitoring.firstDescription=\\'\\'\\\"\\r\\n                           aria-label=\\\"close\\\" title=\\\"close\\\">×</a>--> <strong>پیام!</strong><br><br><label>{{vm.monitoring.firstDescription}}</label></div></div></div><!-- main container --><div class=\\\"row negative-margin-print\\\"><div class=\\\"module-wrapper col-xs-12\\\"><section class=\\\"module monitoring\\\"><!-- where sub-states come --><div ui-view></div><!-- button nav for next and previous page and directive --><!--hide this buttons when monitoring from convert debit--><div class=\\\"module-footer text-center screen-only\\\" data-ng-if=!vm.fromConvertDebit><div class=row><div class=\\\"col-xs-12 pull-right\\\"><!-- next button --> <button class=\\\"btn btn-default-alt pull-left\\\" ng-click=vm.next() data-ng-disabled=\\\"!vm.hasNext() || vm.loading\\\">صفحه بعدی&nbsp;&nbsp; <i class=\\\"icon pe-icon pe-7s-back-2 f-17\\\"></i></button><!-- flow modal --> <button class=\\\"btn btn-primary-alt\\\" ng-click=vm.openFlowModal()><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.MODULES.MONITORING.FLOW_VIEW.TITLE></span></button><!-- Directive button --><!--<div class=\\\"btn-group\\\" uib-dropdown style=\\\"margin: auto\\\">\\r\\n                                        <a id=\\\"split-button\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\"\\r\\n                                           ng-if=\\\"vm.monitoring.directive.dirNumber\\\"\\r\\n                                           ui-sref=\\\"root.directive.details({directiveId: vm.monitoring.directive.dirNumber, monitoringId:vm.monitoring.id, monitoringState: vm.currentState})\\\">\\r\\n                                            مصوبه\\r\\n                                        </a>\\r\\n                                        <a id=\\\"split-button-empty\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\"\\r\\n                                           ng-if=\\\"!vm.monitoring.directive.dirNumber\\\"\\r\\n                                           ng-click=\\\"vm.openDirectiveModal()\\\">\\r\\n                                            <span class=\\\"icon pe-icon pe-7s-attention f-14\\\"></span>\\r\\n                                            مصوبه\\r\\n                                        </a>\\r\\n                                        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" uib-dropdown-toggle>\\r\\n                                            <span class=\\\"caret\\\"></span>\\r\\n                                            <span class=\\\"sr-only\\\">Split button!</span>\\r\\n                                        </button>\\r\\n                                        <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu role=\\\"menu\\\"\\r\\n                                            aria-labelledby=\\\"split-button\\\">\\r\\n                                            <li role=\\\"menuitem\\\">\\r\\n                                                <a class=\\\"cursor-pointer\\\" ng-click=\\\"vm.openDirectiveModal()\\\">\\r\\n                                                    <i class=\\\"icon pe-icon pe-7s-note f-17 text-primary pull-right\\\"></i>\\r\\n                                                    <span class=\\\"text-primary\\\">تغییر شماره مصوبه</span>\\r\\n                                                </a>\\r\\n\\r\\n                                            </li>\\r\\n                                            <li class=\\\"divider\\\"></li>\\r\\n                                            <li role=\\\"menuitem\\\" data-ng-if=\\\"vm.monitoring.directive.dirNumber\\\"><a\\r\\n                                                    class=\\\"cursor-pointer\\\">\\r\\n                                                <i class=\\\"icon pe-icon pe-7s-pen f-17 pull-right\\\"></i>\\r\\n                                                <span data-ng-bind=\\\"vm.monitoring.directive.dirNumber|pNumber\\\"></span>\\r\\n                                            </a></li>\\r\\n                                            <li role=\\\"menuitem\\\" data-ng-if=\\\"!vm.monitoring.directive.dirNumber\\\"><a\\r\\n                                                    class=\\\"cursor-pointer\\\">\\r\\n                                                <i class=\\\"icon pe-icon pe-7s-attention f-17 text-warning pull-right\\\"></i>\\r\\n                                                <span data-translate=\\\"NO_DIRECTIVE\\\"></span>\\r\\n                                            </a></li>\\r\\n                                        </ul>\\r\\n                                    </div>--> <a id=directive-button type=button class=\\\"btn btn-primary\\\" ng-if=vm.monitoring.directive.dirNumber ui-sref=\\\"root.directive.details({directiveId: vm.monitoring.directive.dirNumber, monitoringId:vm.monitoring.id, monitoringState: vm.currentState})\\\">مصوبه </a><a id=directive-button-empty type=button class=\\\"btn btn-primary\\\" ng-if=!vm.monitoring.directive.dirNumber ng-click=vm.openDirectiveModal()><span class=\\\"icon pe-icon pe-7s-attention f-14\\\"></span> مصوبه </a><!-- experts modal --> <button class=\\\"btn btn-primary-alt\\\" ng-click=vm.openExpertsModal()><i class=\\\"fa fa-user-secret\\\"></i> <span data-translate=APP.MODULES.MONITORING.USER_MONITORINGS.TITLE></span></button><!-- previous button --> <button class=\\\"btn btn-default-alt pull-right\\\" ng-click=\\\"vm.previous() || vm.loading\\\" data-ng-disabled=!vm.hasPrevious()><i class=\\\"icon pe-icon pe-7s-next-2 f-17 pull-right\\\"></i> &nbsp;&nbsp; صفحه قبلی</button></div></div></div></section></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/monitoring.print.html\",\"<table class=\\\"table table-bordered\\\" style=\\\"width: 100%; background-color: whitesmoke;padding: 5px 0 5px 0\\\"><thead style=\\\"display: table-header-group\\\"><tr data-ng-if=vm.loading class=screen-only style=\\\"font-size: 10px\\\"><td ng-class=\\\"{\\'bg-success\\':!vm.monitoringLoading, \\'bg-warning\\':vm.monitoringLoading}\\\">جزئیات</td><td ng-class=\\\"{\\'bg-success\\':!vm.searchMonitoringLoading, \\'bg-warning\\':vm.searchMonitoringLoading}\\\">قراردادها</td><td ng-class=\\\"{\\'bg-success\\':!vm.getInvestmentCostMonitoringLoading, \\'bg-warning\\':vm.getInvestmentCostMonitoringLoading}\\\">هزینه‌های سرمایه‌گذاری</td><td ng-class=\\\"{\\'bg-success\\':!vm.searchMonitoringLatLongLoading, \\'bg-warning\\':vm.searchMonitoringLatLongLoading}\\\">مکان جغرافیایی</td><td ng-class=\\\"{\\'bg-success\\':!vm.getDirLicenseConflictsLoading, \\'bg-warning\\':vm.getDirLicenseConflictsLoading}\\\">مجوزها</td><td ng-class=\\\"{\\'bg-success\\':!vm.getInvoiceConflictLoading, \\'bg-warning\\':vm.getInvoiceConflictLoading}\\\">پیش‌فاکتور/پیش‌قرارداد</td><td ng-class=\\\"{\\'bg-success\\':!vm.getPaymentConflictLoading, \\'bg-warning\\':vm.getPaymentConflictLoading}\\\">پرداخت‌ها</td><td ng-class=\\\"{\\'bg-success\\':!vm.getAssuranceConflictLoading, \\'bg-warning\\':vm.getAssuranceConflictLoading}\\\">وثایق</td><td data-ng-bind=vm.progress()|pPercent></td></tr><tr><th data-ng-attr-colspan={{vm.maxCols}}><div class=text-center><img src=assets/images/tt-bank-1.png width=40 alt=\\\"\\\"><h5>اداره نظارت بر اعطای تسهیلات</h5><h3 class=plan-title><span data-ng-bind=\\\"(\\'APP.MODULES.MONITORING.TITLE\\'|translate) + \\' شماره \\'\\\"></span> <span data-ng-bind=vm.monitoring.number|pNumber class=ltr-number></span> <span data-ng-bind=\\\"\\'(\\'\\\"></span> <span data-translate=APP.MODULES.MONITORING.EXPERTS></span>: <span data-ng-bind=vm.monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind=\\\"\\'، \\' + vm.monitoring.userMonitorings[1].lmsUser.name\\\" ng-show=vm.monitoring.userMonitorings[1]></span> <span data-ng-bind=\\\"\\')\\'\\\"></span></h3></div></th></tr></thead><tfoot style=\\\"display: table-footer-group\\\"><tr><td data-ng-attr-colspan={{vm.maxCols}} style=\\\"padding: 5px\\\">استخراج شده از سامانه جامع نظارت بر اعطای تسهیلات بانک توسعه تعاون در تاریخ <span data-ng-bind=vm.today|jDate></span> <button class=\\\"btn btn-lg btn-info pull-left m-b-1\\\" style=\\\"position: fixed; top: 1rem;left:2rem;z-index: 30\\\" data-ng-disabled=vm.loading onclick=window.print()><i class=\\\"fa fa-print\\\"></i></button></td></tr></tfoot><tbody data-ng-hide=vm.monitoringLoading><tr class=text-center><th>وضعیت</th><th>شماره قرارداد</th><th colspan=2>نام متقاضی</th><th colspan=2>نوع طرح / بخش اقتصادی</th><th>شماره مصوبه</th><th colspan=3>آخرین عملیات</th></tr><tr class=text-center><td data-ng-bind=vm.monitoring.currentStep.title></td><td data-ng-bind=vm.monitoring.contract.number|pNumber></td><td colspan=2 data-ng-bind=vm.monitoring.contract.companyName></td><td colspan=2 data-ng-bind=\\\"(vm.monitoring.contract.planType || \\'نامشخص\\')+\\'/\\'+(vm.monitoring.contract.economicSection.name || \\'نامشخص\\')\\\"></td><td data-ng-bind=vm.monitoring.directive.dirNumber|pNumber></td><td colspan=3 data-ng-bind=\\\"(vm.lastProcess.transition.name|monitoringDefinition|translate) + \\'،\\' + vm.lastProcess.user.name + \\' در  \\' + (vm.lastProcess.createDate|jDate:\\'hh:mm jYY/jM/jD \\'|pNumber)\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody data-ng-hide=vm.monitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h2></th></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.DATE></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PROVINCE></th><th colspan=4 data-translate=APP.MODULES.MONITORING.BRANCH></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.monitoringDate|jDate></td><td colspan=3 data-ng-bind=vm.monitoring.contract.province.title></td><td colspan=4 data-ng-bind=vm.monitoring.payerBranch.title></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PLAN_TYPE></th><th colspan=4 data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.branchChiefInMonitoringTime.name></td><td colspan=3 data-ng-bind=vm.monitoring.planType|planType></td><td colspan=4 data-ng-bind=vm.monitoring.activitySubject></td></tr><tr><th colspan=10 data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS></th></tr><tr><td colspan=10 data-ng-bind=vm.monitoring.projectLocationAddress></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody data-ng-hide=vm.monitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT.DIR_LIST></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONCLUDED_CONTRACT_NUMBER></th></tr><tr class=text-center data-ng-repeat=\\\"dircontract in vm.dirContracts\\\"><td data-ng-bind=dircontract.type.name></td><td data-ng-bind=\\\"dircontract.totalAmount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{dircontract.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=dircontract.interestRate|pPercent></td><td data-ng-bind=dircontract.installmentCount|pNumber></td><td data-ng-bind=dircontract.participationDuration|pNumber></td><td data-ng-bind=dircontract.respiratoryPeriod|pNumber></td><td data-ng-bind=dircontract.installmentInterval|pNumber></td><td data-ng-bind=\\\"dircontract.interestAmount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{dircontract.interestAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\\'A\\'}}\\\"></td><td><span ng-if=dircontract.contract.number data-ng-bind=dircontract.contract.number|pNumber class=ltr-number id=concludedContractNumber></span></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td data-ng-bind=\\\"(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\\'A\\'}}\\\"></td><td></td><td data-ng-show=vm.allowedActions></td><td data-ng-show=vm.allowedActions></td></tr></tbody><tbody data-ng-hide=vm.searchMonitoringLoading><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.DATE></th><th colspan=2 class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></th><th colspan=2 class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.CONTRACT.NUMBER></th></tr><tr class=text-center data-ng-repeat=\\\"contract in vm.contracts\\\" data-ng-class=\\\"{\\'OrangeBG\\': vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet(),\\r\\n                            \\'GreenBG\\': vm.isMonitoringContract(contract) && vm.isMonitoringContractSet()}\\\"><td data-ng-bind=contract.contractType></td><td data-ng-bind=\\\"(contract.totalAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{contract.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=contract.interestRate|pPercent></td><td data-ng-bind=contract.contractDate|jDate></td><td colspan=2 data-ng-bind=\\\"contract.remainingInCurrent|pCurrency:\\'R\\'\\\"></td><td colspan=2 data-ng-bind=\\\"contract.remainingInNonCurrent|pCurrency:\\'R\\'\\\"></td><td data-ng-bind=contract.respiratoryPeriod|pNumber></td><td data-ng-bind=contract.number|pNumber class=ltr-number></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumContractTotalAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumContractTotalAmount|pCurrency:\\'A\\'}}\\\"></td><td></td><td></td><td colspan=2 data-ng-bind=\\\"(vm.sumRemainingInCurrent|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumRemainingInCurrent|pCurrency:\\'A\\'}}\\\"></td><td colspan=2 data-ng-bind=\\\"(vm.sumRemainingInNonCurrent|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumRemainingInNonCurrent|pCurrency:\\'A\\'}}\\\"></td><td></td><td></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h2></th></tr><tr><th colspan=1>#</th><th colspan=5 data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.CONDITION_NAME st-sort=name></th><th colspan=4 data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS></th></tr><tr data-ng-repeat=\\\"item in vm.preConditions\\\"><td colspan=1 data-ng-bind=\\\"$index + 1\\\"></td><td colspan=5 data-ng-bind=item.dirCondition.condition></td><td colspan=4 data-ng-bind=item.reply|conditionStatus></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.NAME></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.NUMBER></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISSUE_DATE></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISSUED_FROM></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.EXPIRE_DATE></th><th class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.ISINTHENAMEOF_APPLICANT></th><th colspan=4 class=text-center data-translate=APP.MODULES.MONITORING.LICENSE.CONFLICTS></th></tr><tr class=text-center data-ng-class=\\\"{\\'OrangeBG\\':!monitoringLicense.id && !vm.toggleEdit[$index]}\\\" data-ng-repeat=\\\"monitoringLicense in vm.monitoringLicenses\\\"><td><i data-ng-bind=monitoringLicense.dirLicense.name></i></td><td><i data-ng-bind=monitoringLicense.number|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=monitoringLicense.issuingDate|jDate data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=monitoringLicense.issuedFrom data-ng-if=!vm.toggleEdit[$index]></i></td><td data-ng-class=\\\"{\\'RedBG\\':monitoringLicense.hasConflict}\\\" data-ng-bind=monitoringLicense.expireDate|jDate></td><td data-ng-bind=monitoringLicense.isInTheNameOfApplicant|trueFalse|translate></td><td colspan=4 data-ng-class=\\\"{ \\'RedBG\\': monitoringLicense.comment && monitoringLicense.comment.length}\\\"><i data-ng-bind=monitoringLicense.comment data-ng-if=!vm.toggleEdit[$index]></i></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></h2></th></tr><!-- heading row: --><tr><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th colspan=2 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th colspan=2 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th></tr><!-- :heading row end --><!-- repeat rows: --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat=\\\"invoice in vm.invoices\\\"><td data-ng-bind=invoice.investmentAction.name></td><td data-ng-bind=invoice.number|pNumber></td><td data-ng-bind=invoice.date|jDate|pNumber></td><td data-ng-bind=invoice.description|pNumber colspan=2></td><td data-ng-bind=invoice.unit></td><td data-ng-bind=\\\"(invoice.price|pCurrency:\\'R\\')\\\" colspan=2></td><td data-ng-bind=invoice.invoiceBasedCount|pNumber></td><td data-ng-bind=invoice.monitoringBasedCount|pNumber></td></tr><!-- :repeat rows end --><!-- empty row: --><tr ng-hide=vm.invoices.length class=text-center><td class=text-danger colspan=10 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr><!-- :empty row end --></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.TITLE></h4></th></tr><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVESTMENT_ACTION></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.DIRECTIVE_BASE></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVOICE_BASE></th><th colspan=3 class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.MONITOR_BASE></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.invoiceConflicts\\\"><td data-ng-bind=item.investmentAction.name></td><td colspan=3 data-ng-bind=\\\"(item.directiveBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.directiveBased|pCurrency:\\'A\\'}}\\\"></td><td colspan=3 data-ng-class=\\\"{\\'RedBG\\':item.directiveBased > item.invoiceBased }\\\" data-ng-bind=\\\"(item.invoiceBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.invoiceBased|pCurrency:\\'A\\'}}\\\"></td><td colspan=3 data-ng-class=\\\"{\\'RedBG\\':item.directiveBased > item.monitoringBased }\\\" data-ng-bind=\\\"(item.monitoringBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.monitoringBased|pCurrency:\\'A\\'}}\\\"></td></tr><tr class=\\\"text-center BlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td colspan=3 data-ng-bind=\\\"vm.sumDirectiveBased |pCurrency:\\'R\\'\\\" title=\\\"{{vm.sumDirectiveBased|pCurrency:\\'A\\'}}\\\"></td><td colspan=3 data-ng-bind=\\\"vm.sumInvoiceBased |pCurrency:\\'R\\'\\\" data-ng-class=\\\"{\\'DarkRedFill\\':vm.sumInvoiceBased < vm.sumDirectiveBased}\\\" title=\\\"{{vm.sumInvoiceBased|pCurrency:\\'A\\'}}\\\"></td><td colspan=3 data-ng-bind=\\\"vm.sumMonitoringBased |pCurrency:\\'R\\'\\\" data-ng-class=\\\"{\\'DarkRedFill\\':vm.sumMonitoringBased < vm.sumDirectiveBased}\\\" title=\\\"{{vm.sumMonitoringBased|pCurrency:\\'A\\'}}\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></h2></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION rowspan=2></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER></th><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_AMOUNT></th><th class=text-center rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE></th><th class=text-center rowspan=2 colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></th></tr><tr><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.SUM></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat=\\\"payment in vm.payments\\\"><td data-ng-bind=payment.investmentAction.name></td><td data-ng-bind=payment.chequeDate|jDate|pNumber></td><td data-ng-bind=payment.chequeNumber|pNumber></td><td data-ng-bind=\\\"(payment.bankSharedChequeAmount|pCurrency:\\'R\\')\\\"></td><td data-ng-bind=\\\"(payment.applicantSharedChequeAmount|pCurrency:\\'R\\')\\\"></td><td data-ng-bind=\\\"((payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\\'R\\')\\\" colspan=2></td><td data-ng-class=\\\"{\\'RedBG\\': vm.payeeConflict(payment)}\\\" data-ng-bind=payment.payee|payee></td><td data-ng-class=\\\"{\\'RedBG\\': payment.conflictDescription && payment.conflictDescription.length}\\\" colspan=2 data-ng-bind=payment.conflictDescription></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\" ng-show=vm.payments.length><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td></td><td></td><td data-ng-bind=\\\"vm.sumBankSharedChequeAmount |pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.sumBankSharedChequeAmount |pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumApplicantSharedChequeAmount |pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.sumApplicantSharedChequeAmount |pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumTotalAmount |pCurrency:\\'R\\'\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumTotalAmount |pCurrency:\\'A\\'}}\\\"></td><td></td><td colspan=2></td></tr><!-- empty data notification row--><tr class=text-center data-ng-hide=vm.payments.length><td class=text-warning colspan=10 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.TITLE></h4></th></tr><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_BANK_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_BANK_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_APPLICANT_QUOTA></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENT_STEPS></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.ISSUEDCHEQUE_COUNT></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.paymentConflicts\\\"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind=\\\"(item.directiveBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.directiveBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td ng-class=vm.bankQouta[$index] colspan=2 data-ng-bind=\\\"(item.paymentBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.paymentBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td colspan=2 data-ng-bind=\\\"(item.directiveBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.directiveBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td ng-class=vm.applicantQouta[$index] colspan=2 data-ng-bind=\\\"(item.paymentBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.paymentBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=item.paymentStepCount|pNumber></td><td ng-class=vm.countQouta[$index] data-ng-bind=item.chequeCount|pNumber></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumDirectiveBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumDirectiveBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumPaymentBasedBankShared|pCurrency:\\'R\\')\\\" colspan=2 data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumPaymentBasedBankShared < vm.sumDirectiveBasedBankShared , \\'DarkOrangeFill\\': vm.sumPaymentBasedBankShared > vm.sumDirectiveBasedBankShared }\\\" data-ng-attr-title=\\\"{{vm.sumPaymentBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td ng-class=vm.applicantQouta[$index] colspan=2 data-ng-bind=\\\"(vm.sumDirectiveBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumDirectiveBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumPaymentBasedApplicantShared|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumPaymentBasedApplicantShared|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumDirectiveBasedApplicantShared > vm.sumPaymentBasedApplicantShared }\\\"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td data-ng-bind=(vm.sumChequeCount|pNumber) data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumPaymentStepCount > vm.sumChequeCount }\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.PROGRESS.LIST></h2></th></tr><tr><th colspan=2 data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PROGRESS.INVESTMENT_ACTION\\'|translate\\\"></th><th colspan=2 data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PROGRESS.DIRECTIVE_BASE_AMOUNT\\'|translate\\\"></th><th colspan=2 data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PROGRESS.INVOICE_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\\'|translate\\\"></th><th colspan=2 data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PROGRESS.PAYMENT_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\\'|translate\\\"></th><th colspan=2 data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PROGRESS.PROGRESS_RATE\\'|translate\\\"></th></tr><tr class=text-center data-ng-repeat=\\\"progress in vm.progresses\\\"><td colspan=2 data-ng-bind=progress.investmentAction.name></td><td colspan=2 data-ng-attr-title=\\\"{{progress.directiveBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"(progress.directiveBasedAmount|pCurrency:\\'R\\')\\\"></td><td colspan=2 data-ng-attr-title=\\\"{{progress.invoiceBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"\\'(\\' + (progress.invoiceBasedToDirectiveBasedAmountRate|number:0|pPercent)  + \\') \\'\\r\\n                                 + (progress.invoiceBasedAmount|pCurrency:\\'R\\')\\\" data-ng-class=\\\"{\\'RedBG\\':progress.invoiceBasedAmount < progress.directiveBasedAmount, \\'GreenBG\\':progress.invoiceBasedAmount >= progress.directiveBasedAmount}\\\"></td><td colspan=2 data-ng-attr-title=\\\"{{progress.paymentBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"\\'(\\' + (progress.paymentBasedToDirectiveBasedAmountRate|number:0|pPercent) + \\') \\'\\r\\n                                + (progress.paymentBasedAmount|pCurrency:\\'R\\')\\\" data-ng-class=\\\"{\\'OrangeBG\\':progress.paymentBasedAmount > progress.directiveBasedAmount, \\'GreenBG\\':progress.paymentBasedAmount == progress.directiveBasedAmount, \\'RedBG\\':progress.paymentBasedAmount < progress.directiveBasedAmount}\\\"></td><td colspan=2 data-ng-bind=progress.progressRate|number:0|pPercent data-ng-class=\\\"{\\'RedBG\\':progress.progressRate < 100, \\'GreenBG\\':progress.progressRate >= 100}\\\"></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\" colspan=2></td><td data-ng-bind=\\\"(vm.sumDirectiveBasedAmount|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumDirectiveBasedAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"\\'(\\' + (vm.sumInvoiceToDirectivePercent|number:0|pPercent) + \\') \\'\\r\\n                            + (vm.sumInvoiceToDirective|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumInvoiceToDirective|pCurrency:\\'A\\'}}\\\" colspan=2></td><td data-ng-bind=\\\"\\'(\\' + (vm.sumPaymentToDirectivePercent|number:0|pPercent) + \\') \\'\\r\\n                            + (vm.sumPaymentToDirective|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumPaymentToDirective|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'DarkOrangeFill\\': vm.sumPaymentToDirective > vm.sumDirectiveBasedAmount, \\'DarkRedFill\\':vm.sumPaymentToDirective < vm.sumDirectiveBasedAmount}\\\"></td><!--<td data-ng-bind=\\\"(vm.sumPaymentToDirectivePercent|number:0|pPercent)\\\"></td>--><td data-ng-bind=(vm.sumProgressRate|number:0|pPercent) colspan=2 data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumProgressRate < 100}\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></h2></th></tr><tr><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.ASSURANCE_TYPE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.EXPERT_VALUE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_PERCENT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_VALUE></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.MORTGAGED_VALUE></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT_DESCRIPTION></th></tr><!-- data row ng-repeat --><tr class=text-center data-ng-repeat=\\\"assurance in vm.assurances\\\"><td data-ng-bind=assurance.assuranceType.type colspan=2></td><td data-ng-bind=\\\"(assurance.expertValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{assurance.expertValue|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=assurance.assuranceType.acceptedPercent|pPercent></td><td data-ng-bind=\\\"((assurance.expertValue * assurance.assuranceType.acceptedPercent/100)|pCurrency:\\'R\\')\\\" colspan=2></td><td data-ng-bind=\\\"(assurance.mortgagedValue|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{assurance.mortgagedValue|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'RedBG\\': assurance.mortgagedValue > (assurance.expertValue * assurance.assuranceType.acceptedPercent/100)}\\\"></td><td data-ng-bind=assurance.conflictDescription colspan=2 data-ng-class=\\\"{\\'RedBG\\': assurance.conflictDescription}\\\"></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\" ng-show=vm.assurances.length><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\" colspan=2></td><td data-ng-bind=\\\"(vm.sumExpertValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumExpertValue|pCurrency:\\'A\\'}}\\\"></td><td>-</td><td data-ng-bind=\\\"(vm.sumAcceptedValue|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumAcceptedValue|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumMortgagedValue|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.sumMortgagedValue|pCurrency:\\'A\\'}}\\\"></td><td colspan=2>-</td></tr><!-- empty row --><tr ng-hide=vm.assurances.length class=text-center><td colspan=6 class=text-danger><span data-translate=NOTHING_HAS_BEEN_SUBMITTED></span></td></tr></tbody><tbody><tr><th colspan=10><h4 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.TITLE></h4></th></tr><!-- heading row --><tr class=text-center><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.ASSURANCE_TYPE></th><th class=text-center colspan=3 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIRECTIVE_CONDITION></th><th class=text-center colspan=3 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM_TAKEN_ASSURANCE_AMOUNT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIFFERENCE_AMOUNT></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-repeat=\\\"item in vm.assuranceConflicts\\\"><td data-ng-bind=item.assuranceType.type colspan=2></td><td colspan=3><span data-ng-bind=\\\"(item.condition|conditionList) + \\' \\' +(item.dirAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-show=\\\"(item.condition && item.dirAssuranceAmount) || item.condition == \\'REST\\'\\\" data-ng-attr-title=\\\"{{item.dirAssuranceAmount|pCurrency:\\'A\\'}}\\\"></span> <span data-ng-show=!item.condition>در مصوبه قید نشده است</span> <span data-ng-show=\\\"!item.dirAssuranceAmount && item.condition && item.condition !=\\'REST\\'\\\">هنوز وثیقه‌ای ثبت نشده است</span></td><td class={{item.getConflict()}} colspan=3 data-ng-bind=\\\"(item.sumTakenAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.sumTakenAssuranceAmount|pCurrency:\\'A\\'}}\\\"></td><td colspan=2 data-ng-bind=\\\"item.conflictAmount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{item.conflictAmount ? (item.conflictAmount|pCurrency:\\'A\\'): \\'-\\'}}\\\"></td></tr><tr class=text-center><td class=LightBlueBG data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\" colspan=2></td><td class=LightBlueBG data-ng-bind=\\\"(vm.totalAmount|pCurrency:\\'R\\')\\\" colspan=3 data-ng-attr-title=\\\"{{vm.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td class=LightBlueBG colspan=3 data-ng-class=\\\"{\\'DarkRedFill\\': vm.totalAmount>vm.sumOfSumTakenAssuranceAmount}\\\" data-ng-bind=\\\"(vm.sumOfSumTakenAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumOfSumTakenAssuranceAmount|pCurrency:\\'A\\'}}\\\"></td><td class=LightBlueBG data-ng-bind=\\\"(vm.totalDifference|pCurrency:\\'R\\')\\\" colspan=2 data-ng-attr-title=\\\"{{vm.totalDifference|pCurrency:\\'A\\'}}\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></h2></th></tr><tr><th data-translate=APP.MODULES.MONITORING.LAT_LONG.LATITUDE colspan=2></th><td data-ng-bind=vm.monitoring.latitude colspan=3></td><th data-translate=APP.MODULES.MONITORING.LAT_LONG.LONGITUDE colspan=2></th><td data-ng-bind=vm.monitoring.longitude colspan=3></td></tr><tr><th data-ng-attr-colspan={{vm.dimensions.length+1}}><h4>فواصل</h4></th></tr><tr><th data-translate=APP.MODULES.MONITORING.LAT_LONG.NUMBER></th><th ng-repeat=\\\"value in vm.dimensions|limitTo:9\\\" data-ng-bind=\\\"(value.monitoring.number.split(\\'-\\')[value.monitoring.number.split(\\'-\\').length-1])|pNumber\\\" class=ltr-number></th></tr><tr ng-repeat=\\\"title in vm.dimensions|limitTo:9\\\"><th data-ng-bind=title.monitoring.number|pNumber class=ltr-number></th><td ng-repeat=\\\"value in vm.dimensions\\\" data-ng-bind=\\\"(title.distance - value.distance)|makePositive|number|pDistance\\\"></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h2></th></tr><tr><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></th><th class=text-center colspan=2 data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></th><th class=text-center colspan=4 data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></th></tr><tr data-ng-repeat=\\\"item in vm.monitoringCheckList|checkList\\\"><td data-ng-bind=item.checkList.content colspan=4></td><td data-ng-bind=item.checkListStatus|checkList colspan=2></td><td data-ng-bind=item.comment colspan=4></td></tr><tr><th colspan=10 data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></th></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.applicantPerformance|checkList></td></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.agentBranchPerformance|checkList></td></tr><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT colspan=5></th><td colspan=5 data-ng-bind=vm.approverPerformance|checkList></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></th><td colspan=7 data-ng-bind=vm.monitoring.finalExpertComment></td></tr></tbody><tbody><tr><th data-ng-attr-colspan={{vm.maxCols}} style=\\\"background-color: white;color: white\\\">***</th></tr></tbody><tbody><tr><th colspan=10><h2 data-translate=APP.MODULES.MONITORING.CONFLICT.LIST></h2></th></tr><tr class=text-center><th class=text-center data-translate=APP.SHARE.INDEX></th><th class=text-center data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE colspan=4></th><th class=text-center data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION colspan=5></th></tr><tr class=text-center data-ng-repeat=\\\"conflict in vm.conflicts|orderBy:\\'automatic\\'\\\" data-ng-class=\\\"{\\'screen-only\\':conflict.cleared}\\\"><td data-ng-class=\\\"{\\'OrangeBG\\':!conflict.automatic,\\r\\n                                                \\'GreenBG\\':conflict.automatic && conflict.cleared,\\r\\n                                                \\'RedBG\\':conflict.automatic && !conflict.cleared}\\\" data-ng-bind=$index+1|pNumber></td><td data-ng-bind=conflict.title colspan=4></td><td data-ng-bind=conflict.description colspan=5></td></tr><tr class=text-center data-ng-hide=\\\"vm.conflicts.length || vm.state !== \\'calculated\\'\\\"><td colspan=10 class=text-success data-translate=NO_CONFLICT></td></tr><tr><td data-ng-repeat-start=\\\"item in vm.monitoring.userMonitorings\\\" colspan=2 data-ng-bind=item.lmsUser.name></td><td data-ng-repeat-end=\\\"\\\" colspan=2><img class=\\\"img-responsive print-images\\\" ng-src={{vm.getSignUrl(item.lmsUser)}} alt=\\\"امضا ثبت نشده است\\\"></td></tr></tbody></table>\");\n$templateCache.put(\"app/components/province/province-cities.html\",\"<div class=container-fluid><back-button></back-button><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span data-translate=APP.MODULES.BASIC_INFO.PROVINCE.CITY.LIST></span> <span data-ng-bind=\\\"\\' استان \\'\\\"></span> <span data-ng-bind=\\\"vm.province.title \\\"></span></h1><div class=pull-left><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=!vm.toggleAdd><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create()><div class=form-group><div class=\\\"col-sm-6 pull-right\\\"><div class=row><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.SHARE.NAME></label><div class=\\\"col-sm-11 pull-right\\\"><input class=form-control data-ng-model=vm.city.name placeholder=نام></div></div></div><div class=\\\"col-sm-4 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></form></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-ng-bind=item.id|pNumber></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.name></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.name></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons has-edit=true edit=vm.update(item) toggle=item.toggle cancel=\\\"item.toggle = !item.toggle\\\" has-delete=true delete=vm.delete(item.id)></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/province/province-list.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.BASIC_INFO.PROVINCE.TITLE></h1><div class=pull-left><a class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAdd = !vm.toggleAdd\\\" data-ng-show=false><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body ng-show=vm.toggleAdd><form class=\\\"form form-horizontal\\\" ng-submit=vm.create()><div class=row><div class=form-group><div class=\\\"col-sm-8 pull-right\\\"><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.SHARE.NAME></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control data-ng-model=vm.province.title placeholder=نام></div><label class=\\\"col-sm-1 control-label pull-right\\\" data-translate=APP.MODULES.BASIC_INFO.PROVINCE.CODE></label><div class=\\\"col-sm-3 pull-right\\\"><input class=form-control type=number data-ng-model=vm.province.code placeholder=کد></div><!--<label class=\\\"col-sm-1 control-label pull-right\\\"\\r\\n                                                       data-translate=\\\"APP.MODULES.BASIC_INFO.PROVINCE.REGION\\\"></label>\\r\\n                                                <div class=\\\"col-sm-3 pull-right\\\">\\r\\n                                                    <input class=\\\"form-control\\\"\\r\\n                                                           type=\\\"number\\\"\\r\\n                                                           data-ng-model=\\\"vm.province.region\\\"\\r\\n                                                           placeholder=\\\"منطقه\\\">\\r\\n                                                </div>--></div><div class=\\\"col-sm-4 pull-right\\\"><button type=button class=\\\"btn btn-cancel\\\" data-ng-click=vm.cancelAdd()><span class=\\\"fa fa-close\\\"></span> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button type=submit class=\\\"btn btn-success\\\"><span class=\\\"fa fa-check\\\"></span> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><!--<td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\"\\r\\n                                                data-ng-bind=\\\"item.id|pNumber\\\">\\r\\n                                            </td>--><td data-title=\\\"\\'APP.MODULES.BASIC_INFO.PROVINCE.CODE\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.code|pNumber></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.code></span></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"><span data-ng-show=!item.toggle data-ng-bind=item.title></span> <span data-ng-show=item.toggle><input class=form-control type=text data-ng-model=item.title></span></td><!--<td data-title=\\\"\\'APP.MODULES.BASIC_INFO.PROVINCE.REGION\\'|translate\\\">\\r\\n                                                <span data-ng-show=\\\"!item.toggle\\\"\\r\\n                                                      data-ng-bind=\\\"item.region|pNumber\\\"></span>\\r\\n                                                <span data-ng-show=\\\"item.toggle\\\">\\r\\n                                                    <input class=\\\"form-control\\\" type=\\\"text\\\" data-ng-model=\\\"item.region\\\">\\r\\n                                                </span>\\r\\n                                            </td>--><!-- <td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\">\\r\\n                                                <a class=\\\"btn btn-sm text-info\\\"\\r\\n                                                   data-ng-show=\\\"!item.toggle\\\"\\r\\n                                                   ui-sref=\\\"root.province-cities({id:item.id})\\\"\\r\\n                                                   uib-tooltip=\\\"{{\\'APP.ACTIONS.UPDATE\\'|translate}}\\\">\\r\\n                                                    <span class=\\\" icon pe-icon pe-7s-look f-17\\\"></span>\\r\\n                                                </a>\\r\\n                                                <command-buttons has-edit=\\\"true\\\"\\r\\n                                                                 edit=\\\"vm.update(item)\\\"\\r\\n                                                                 cancel=\\\"item.toggle = !item.toggle\\\"\\r\\n                                                                 has-delete=\\\"true\\\"\\r\\n                                                                 delete=\\\"vm.delete(item.id)\\\"\\r\\n                                                                 toggle=\\\"item.toggle\\\">\\r\\n                                                </command-buttons>\\r\\n                                            </td>--></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/report/report.html\",\"<div class=container-fluid><h2 class=\\\"approve-title screen-only\\\"></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=\\\"module-heading screen-only\\\"><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.REPORT.LIST></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><span class=screen-only data-translate=APP.MODULES.REPORT.SEARCH></span><form class=\\\"dataTables_wrapper dt-bootstrap search-container screen-only\\\" name=reportsForm data-ng-submit=vm.submit() novalidate><!--switch group state--><div class=row><div class=btn-group><label class=\\\"btn btn-success\\\" ng-model=vm.group uib-btn-radio=true uncheckable data-translate=APP.MODULES.REPORT.GROUP></label><label class=\\\"btn btn-success\\\" ng-model=vm.group uib-btn-radio=false uncheckable data-translate=APP.MODULES.REPORT.SINGLE></label></div></div><!--select report in single mode--><div class=row ng-if=!vm.group><div class=\\\"col-md-8 pull-right sw\\\"><label class=\\\"control-label col-xs-12 pull-right\\\" data-translate=APP.MODULES.REPORT.NAME></label><button class=\\\"btn btn-default-alt col-sm-12 col-md-1\\\" type=button data-ng-attr-title=\\\"{{\\'APP.ACTIONS.NEXT\\'|translate}}\\\" data-ng-click=vm.shiftSelectedReport(1)><i class=\\\"fa fa-caret-left\\\"></i></button><div class=\\\"col-sm-12 col-md-10\\\"><ui-select data-ng-model=vm.selectedReport id=selected-report theme=bootstrap sortable required><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat=\\\"report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }\\\"><div ng-bind-html=\\\"(vm.getReportStatus(report) ? \\'<i class=\\\\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\\\\'></i>\\' : \\'<i class=\\\\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\\\\'></i>\\') + report.content + \\'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\\\\'color: white;\\\\\\'>\\' + report.index + \\'</small>\\' | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><button class=\\\"btn btn-default-alt col-sm-12 col-md-1\\\" type=button data-ng-attr-title=\\\"{{\\'APP.ACTIONS.PREVIOUS\\'|translate}}\\\" data-ng-click=vm.shiftSelectedReport(-1)><i class=\\\"fa fa-caret-right\\\"></i></button></div><div class=\\\"col-md-4 pull-left\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_TYPE for=report-type></label><select class=form-control ng-model=vm.reportParams.reportType name=reportType id=report-type ng-options=\\\"reportType for reportType in vm.reportTypes\\\"></select></div></div></div><!--reprot type--><!--select reports in multiple mode--><div class=row ng-if=vm.group><div class=\\\"control-label col-lg-2 pull-right\\\" data-translate=APP.MODULES.REPORT.NAMES></div><div class=\\\"form-group sw col-md-12 pull-right\\\"><ui-select data-ng-model=vm.selectedReports multiple reset-search-input=true close-on-select=false theme=bootstrap sortable required><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$item.content></b></span></ui-select-match><ui-select-choices repeat=\\\"report in vm.reportList | propsFilter : {content: $select.search, index: $select.search }\\\"><div ng-bind-html=\\\"(vm.getReportStatus(report) ? \\'<i class=\\\\\\'icon pe-icon pe-7s-check f-20 m-l-1 text-success\\\\\\'></i>\\' : \\'<i class=\\\\\\'icon pe-icon pe-7s-less f-20 m-l-1 text-danger\\\\\\'></i>\\') + report.content + \\'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small style=\\\\\\'color: white;\\\\\\'>\\' + report.index + \\'</small>\\' | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><!--insert range of reports--><div class=row ng-if=vm.group><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.REPORT.REPORT_NUMBERS></label><input class=form-control ng-model=vm.reportsText name=reportsText type=text></div></div></div><!--dates and level--><div class=row><!--from date--><div class=\\\"col-md-4 pull-right\\\" data-ng-if=\\\"!vm.selectedReport.noFromDate || vm.group\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': reportsForm.fromConfirmDate.$invalid}\\\"><label data-translate=APP.MODULES.REPORT.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate required></simple-date></div></div><!--to date--><div class=\\\"col-md-4 pull-right\\\" data-ng-if=\\\"!vm.selectedReport.noToDate || vm.group\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': reportsForm.toConfirmDate.$invalid}\\\"><label data-translate=APP.MODULES.REPORT.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate required></simple-date></div></div><!--organization level--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.organizationLevel\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_LEVEL></label><select class=form-control ng-model=vm.reportParams.organizationLevel name=reportType ng-options=\\\"level as (level|userLevel) for level in vm.reportLevels\\\"></select></div></div></div><!--show date only for report number 55  --><div class=row data-ng-if=\\\"vm.selectedReport.htmlReportApi == \\'report/getMonitoringTraceReport/?reportNumber=\\'\\\"><!--from date--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.REPORT.FROM_DATE_TRACE></label><simple-date data-ng-model=vm.reportParams.fromTraceDate name=fromTraceDate></simple-date></div></div><!--to date--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.REPORT.TO_DATE_TRACE></label><simple-date data-ng-model=vm.reportParams.toTraceDate name=toTraceDate></simple-date></div></div></div><!--codes and credit Supply Resource and isic code--><div class=row><!--included codes--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.codesIncluded\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.reportParams.codesIncluded theme=bootstrap id=selected-codes-inc sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.codesExcluded\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.reportParams.codesExcluded theme=bootstrap id=selected-codes-exc sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--credit Supply Resource --><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.creditSupplyResources\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CREDIT_SUPPLY_RESOURCE></label><ui-select multiple ng-model=vm.reportParams.creditSupplyResources theme=bootstrap id=selected-resources sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.name}}</ui-select-match><ui-select-choices repeat=\\\"resource.id as resource in vm.resources|propsFilter : {name: $select.search}\\\"><div ng-bind-html=\\\"resource.name | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><!--included ISIC--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.codesIncluded\\\"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_INCLUDED></label><ui-select multiple ng-model=vm.reportParams.includedIsics theme=bootstrap id=selected-isic-include sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat=\\\"isic.id as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}\\\"><div><span ng-bind-html=\\\"isic.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+isic.name | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded isic--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.codesIncluded\\\"><div class=form-group><label data-translate=APP.SHARE.ISIC_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.reportParams.excludedIsics theme=bootstrap id=selected-isic-exclude sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices repeat=\\\"isic.id as isic in vm.isicList | propsFilter: {name: $select.search, code: $select.search}\\\"><div><span ng-bind-html=\\\"isic.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\' \\'+isic.name | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div><!--amounts and credit Supply Resource text--><div class=row><!--amount from--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.lowAmount\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_LOW_AMOUNT for=lowAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=lowAmount name=lowAmount data-ng-model=vm.reportParams.lowAmount></div></div><!--amount to--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group data-ng-show=\\\"vm.group || vm.selectedReport.filters.highAmount\\\"><label data-translate=APP.SHARE.REPORT_HIGH_AMOUNT for=highAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=highAmount name=highAmount data-ng-model=vm.reportParams.highAmount></div></div><!--credit Supply Resource text--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.creditSupplyResourceText\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CREDIT_SUPPLY_RESOURCE_TEXT for=credit-supply-resource-text></label><input class=form-control id=credit-supply-resource-text name=creditSupplyResourceText data-ng-model=vm.reportParams.creditSupplyResourceText></div></div></div><div class=row><div data-ng-show=!vm.selectedReport.filters.approvedToMonitoredRate class=\\\"col-md-8 pull-right\\\"><!--contract from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><simple-date name=contractFromDate data-ng-model=vm.reportParams.contractFromDate></simple-date></div></div><!--contract due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><simple-date data-ng-model=vm.reportParams.contractToDate name=contractToDate></simple-date></div></div></div><div data-ng-show=!vm.selectedReport.filters.approvedToMonitoredRate class=\\\"col-md-8 pull-right\\\"><!--monitoring from date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.reportParams.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.reportParams.monitoringToDate name=monitoringToDate></simple-date></div></div></div></div><div class=row><!--provinces--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.province\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select multiple ng-model=vm.reportParams.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"province.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+province.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--traceStatus--><div class=\\\"col-md-4 pull-right\\\" data-ng-show=\\\"vm.group || vm.selectedReport.filters.traceStatus\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label><select class=form-control title=\\\"{{\\'APP.MODULES.MONITORING.TRACE_STEP\\'|translate}}\\\" ng-model=vm.reportParams.statusId name=statusId ng-options=\\\"step.id as step.title for step in vm.traceSteps\\\"></select></div></div></div><div class=col-md-4><div class=form-group><button type=submit class=\\\"btn btn-success pull-left\\\" data-ng-disabled=\\\"(!vm.group &&\\r\\n                                                                          (!vm.selectedReport.htmlReportApi)) ||\\r\\n                                                                          (vm.group && vm.selectedReports.length < 1 && !vm.reportsText)\\\" title=\\\"{{\\'APP.ACTIONS.REPORT_VIEW\\'|translate}}\\\"><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form><div id=dynamicReport class=\\\"col-md-12 pull-right\\\"></div><div class=\\\"row screen-only\\\" data-ng-show=vm.loading><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" ng-show=vm.loading class=centered height=50></div></div><div class=screen-only><br><br></div><div class=\\\"well screen-only\\\" data-ng-hide=\\\"vm.loading && !vm.duration\\\">مدت زمان بارگیری: {{vm.duration|pNumber}}</div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/roles/add-permission.html\",\"<form name=addPermissionForm data-ng-submit=vm.assignPermissionToRole();addPermissionForm.$setPristine() novalidate><!--permission --><div class=\\\"col-md-3 pull-right\\\"><span class=text-danger>*</span><label data-translate=APP.MODULES.PERMISSION.NAME></label></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\\r\\n                             \\'has-success\\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}\\\"><ui-select theme=bootstrap data-ng-model=vm.permission><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat=\\\"permission in vm.allPermissions |\\r\\n                                propsFilter : {name: $select.search,caption:$select.search}\\\"><div ng-bind-html=\\\"(permission.caption?permission.name+\\'(\\'+permission.caption+\\')\\':permission.name) | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-3 pull-right\\\"><button class=\\\"btn btn-info\\\" type=submit data-ng-disabled=addPermissionForm.$invalid><i class=\\\"fa fa-check\\\"></i></button> <button class=\\\"btn btn-default\\\" type=button data-ng-click=vm.cancelAddPermission()><i class=\\\"fa fa-times\\\"></i></button></div></form>\");\n$templateCache.put(\"app/components/roles/add-role.html\",\"<form class=form-inline name=addRoleForm data-ng-submit=vm.createRole(addRoleForm);addRoleForm.$setPristine()><div class=form-group data-ng-class=\\\"{\\'has-error\\':addRoleForm.role.$invalid &&\\r\\n                                    !addRoleForm.role.$pristine}\\\"><span class=red-star>*</span><label for=role data-translate=APP.SHARE.NAME></label><input class=form-control id=role auto-focus={{!vm.toggleAdd}} placeholder=\\\"{{\\'APP.SHARE.NAME\\'|translate}}\\\" data-ng-model=vm.role.role name=role ng-pattern=/^[_A-Z]+$/ required></div><div class=form-group data-ng-class=\\\"{\\'has-error\\':addRoleForm.caption.$invalid &&\\r\\n                                    !addRoleForm.caption.$pristine}\\\"><span class=red-star>*</span><label for=caption data-translate=APP.SHARE.CAPTION></label><input class=form-control id=caption placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\" data-ng-model=vm.role.caption name=caption required></div><div class=form-group><label for=caption data-translate=APP.MODULES.ROLE.PARENT></label><select class=form-control id=parent name=parent data-ng-model=vm.role.parent ng-options=\\\"role as role.caption for role in vm.roles\\\"></select></div><button class=\\\"btn btn-primary-alt\\\" data-ng-disabled=addRoleForm.$invalid><i class=\\\"fa fa-check\\\"></i></button> <button class=\\\"btn btn-default-alt\\\" type=button data-ng-click=vm.cancelAddRole()><i class=\\\"fa fa-times\\\"></i></button><row><div class=\\\"col-md-12 col-sm-12 pull-right\\\"><label for=role ng-show=\\\"addRoleForm.role.$invalid && !addRoleForm.role.$pristine \\\" data-translate=APP.MODULES.ROLE.ROLE_REGX_INVALID></label></div></row></form>\");\n$templateCache.put(\"app/components/roles/role-details.html\",\"<div class=container-fluid><h2 class=view-title></h2><!-- /.row --><div class=row><div class=\\\"module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span data-translate=APP.MODULES.PERMISSION.LIST></span> <i data-ng-bind=vm.data.caption></i></h1><div class=pull-left ng-show=!vm.toggleAddPermission><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-click=\\\"vm.toggleAddPermission = !vm.toggleAddPermission\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.PERMISSION.ACTIONS.ADD></span></button></div></div><!--add PermissionToRole--><div class=module-content><div class=module-content-inner><div><div class=pane-body ng-show=vm.toggleAddPermission><form name=addPermissionForm ng-submit=vm.assignPermissionsToRole();addPermissionForm.$setPristine() class=form-horizontal><div class=\\\"form-group col-lg-8 pull-right\\\" ng-class=\\\"{\\'has-error\\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\\r\\n                                        \\'has-success\\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}\\\"><label class=\\\"col-lg-3 pull-right control-label\\\" data-translate=APP.MODULES.PERMISSION.NAME></label><div class=\\\"col-lg-9 pull-right\\\"><ui-select multiple theme=bootstrap id=permissions spinner-class=\\\"fa fa-spinner\\\" reset-search-input=false close-on-select=false data-ng-model=vm.permissions><span class=\\\"fa fa-plus-circle\\\"></span><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$item.name></span></ui-select-match><ui-select-choices repeat=\\\"permission in vm.allPermissions track by $index\\\" refresh=vm.refreshPermissions($select.search) refresh-delay=4><div ng-bind-html=\\\"(permission.caption ? permission.caption : permission.name) | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"form-group col-lg-2 pull-right\\\"><button class=\\\"btn btn-default-alt\\\" type=reset ng-click=vm.cancelAddPermission() uib-tooltip=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt\\\" uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" ng-disabled=addPermissionForm.$invalid><i class=\\\"fa fa-check\\\"></i></button><!--<button type=\\\"button\\\"\\r\\n                                                    class=\\\"btn btn-success-alt\\\" ng-click=\\\"vm.assignAllPermissionsToRole();\\\"\\r\\n                                                    uib-tooltip=\\\"{{\\'APP.ACTIONS.ADD_ALL\\'|translate}}\\\">\\r\\n                                                <i class=\\\"fa fa-plus-square-o\\\"></i>\\r\\n                                            </button>--></div></form></div><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><div class=row><div class=col-sm-12><div class=table-responsive><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\" data-ng-attr-title={{item.name}} data-filter=\\\"{caption:\\'text\\'}\\\"><span data-ng-bind=\\\"item.caption || item.name\\\" dir=ltr></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><!--<a class=\\\"btn text-success btn-sm\\\"\\r\\n                                                                   uib-tooltip=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\"\\r\\n                                                                   ui-sref=\\\"root.basic-document-attachment({id:item.id})\\\">\\r\\n                                                                    <span class=\\\"icon pe-icon pe-7s-look f-17 f-bold\\\"></span>\\r\\n                                                                </a>--><command-buttons delete=vm.deletePermissionFromRole(item.id,$index) has-delete=true></command-buttons></td></tr></table></div></div></div></div></pane-body></div></div></div></div></section></div></div></div><!--\\r\\n<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <h3 class=\\\"page-header\\\">\\r\\n                <span data-translate=\\\"APP.MODULES.ROLE.DETAILS\\\"></span>\\r\\n                <span data-ng-bind=\\\"vm.data.role\\\"></span>\\r\\n            </h3>\\r\\n        </div>\\r\\n        &lt;!&ndash; /.col-lg-12 &ndash;&gt;\\r\\n    </div>\\r\\n    &lt;!&ndash; /.row &ndash;&gt;\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <div class=\\\"panel panel-default\\\">\\r\\n                <div class=\\\"panel-heading\\\">\\r\\n                    <div class=\\\"panel-title pull-right\\\"\\r\\n                         data-translate=\\\"APP.MODULES.PERMISSION.LIST\\\"></div>\\r\\n                    <div class=\\\"pull-left\\\">\\r\\n                        <button class=\\\"btn btn-sm btn-success\\\"\\r\\n                                data-ng-show=\\\"!vm.toggleAddPermission\\\"\\r\\n                                data-ng-click=\\\"vm.toggleAddPermission=!vm.toggleAddPermission\\\">\\r\\n                            <i class=\\\"fa fa-plus-circle\\\"></i>\\r\\n                            <span data-translate=\\\"APP.MODULES.PERMISSION.ACTIONS.ADD\\\">‌</span>\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"clearfix\\\"></div>\\r\\n                </div>\\r\\n                <div class=\\\"panel-body\\\"\\r\\n                     data-ng-show=\\\"vm.toggleAddPermission\\\"\\r\\n                     data-ng-include=\\\"\\'app/components/roles/add-permission.html\\'\\\">\\r\\n                </div>\\r\\n                &lt;!&ndash; /.panel-heading &ndash;&gt;\\r\\n                <div class=\\\"panel-body\\\">\\r\\n                    <div class=\\\"dataTable_wrapper table-responsive\\\">\\r\\n                        <table class=\\\"table table-bordered table-striped table-hover\\\"\\r\\n                               data-template-pagination=\\\"app/directives/ng-table/pagination-tpl.html\\\"\\r\\n                               data-ng-table=\\\"vm.tableParams\\\"\\r\\n                               data-show-filter=\\\"false\\\">\\r\\n                            <colgroup>\\r\\n                                <col width=\\\"35%\\\"/>\\r\\n                                <col width=\\\"50%\\\"/>\\r\\n                                <col width=\\\"15%\\\"/>\\r\\n                            </colgroup>\\r\\n                            <tr class=\\\"text-center\\\"\\r\\n                                data-ng-repeat=\\\"item in $data\\\">\\r\\n                                <td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"\\r\\n                                    data-ng-bind=\\\"item.name\\\">\\r\\n                                </td>\\r\\n                                <td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\"\\r\\n                                    data-filter=\\\"{caption:\\'text\\'}\\\"\\r\\n                                    data-ng-bind=\\\"item.caption\\\">\\r\\n                                </td>\\r\\n                                <td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\">\\r\\n                                    <a class=\\\"text-danger\\\"\\r\\n                                       data-ng-click=\\\"vm.deletePermissionFromRole(item.id,$index)\\\">\\r\\n                                        <i class=\\\"fa fa-fw fa-remove\\\"></i>\\r\\n                                    </a>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                    &lt;!&ndash; /.table-responsive &ndash;&gt;\\r\\n                </div>\\r\\n                &lt;!&ndash; /.panel-body &ndash;&gt;\\r\\n            </div>\\r\\n            &lt;!&ndash; /.panel &ndash;&gt;\\r\\n        </div>\\r\\n        &lt;!&ndash; /.col-lg-12 &ndash;&gt;\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n-->\");\n$templateCache.put(\"app/components/roles/roles-list.html\",\"<div class=container-fluid><h2 class=view-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.ROLE.TITLE></h1><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=vm.toggleAddRole data-ng-click=\\\"vm.toggleAddRole=!vm.toggleAddRole\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.ROLE.ACTIONS.ADD>‌</span></button></div></div><!-- end ngIf: title || meta --><div class=module-content><div class=module-content-inner><div><pane-body><div data-ng-show=!vm.toggleAddRole data-ng-include=\\\"\\'app/components/roles/add-role.html\\'\\\"></div></pane-body><pane-body><div id=DataTables_Table_0_wrapper class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><div class=row><div class=col-sm-12><table class=\\\"row-border hover dataTable no-footer\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-ng-bind=item.role></td><td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\" data-filter=\\\"{caption:\\'text\\'}\\\"><span data-ng-bind=item.caption data-ng-show=!vm.toggleEditRole[$index]></span><form name=roleForm{{$index}} data-ng-show=vm.toggleEditRole[$index] novalidate><div class=form-group data-ng-class=\\\"{\\'has-error\\':role.$invalid && !role.$pristine}\\\"><input class=form-control type=text auto-focus={{vm.toggleEditRole[$index]}} placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\" data-ng-model=item.caption name=caption required></div></form></td><td><a data-ui-sref=root.roles.details({role:item.role})><span data-translate=APP.SHARE.VIEW></span> <span data-translate=APP.MODULES.PERMISSION.LIST></span></a></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons cancel=vm.cancelEditRole($index) disabled has-edit=true edit=\\\"vm.updateRole(item, $index)\\\" delete=\\\"vm.deleteRole(item.role, $index)\\\" has-delete=true toggle=vm.toggleEditRole[$index]></command-buttons></td></tr></table></div></div><div ng-if=false class=row><div class=col-sm-5><div class=dataTables_info id=DataTables_Table_0_info role=status aria-live=polite>Showing 1 to 10 of 57 entries</div></div><div class=col-sm-7><div class=\\\"dataTables_paginate paging_full_numbers\\\" id=DataTables_Table_0_paginate><ul class=pagination><li class=\\\"paginate_button first disabled\\\" id=DataTables_Table_0_first><a href=# aria-controls=DataTables_Table_0 data-dt-idx=0 tabindex=0>First</a></li><li class=\\\"paginate_button previous disabled\\\" id=DataTables_Table_0_previous><a href=# aria-controls=DataTables_Table_0 data-dt-idx=1 tabindex=0>Previous</a></li><li class=\\\"paginate_button active\\\"><a href=# aria-controls=DataTables_Table_0 data-dt-idx=2 tabindex=0>1</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=3 tabindex=0>2</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=4 tabindex=0>3</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=5 tabindex=0>4</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=6 tabindex=0>5</a></li><li class=paginate_button><a href=# aria-controls=DataTables_Table_0 data-dt-idx=7 tabindex=0>6</a></li><li class=\\\"paginate_button next\\\" id=DataTables_Table_0_next><a href=# aria-controls=DataTables_Table_0 data-dt-idx=8 tabindex=0>Next</a></li><li class=\\\"paginate_button last\\\" id=DataTables_Table_0_last><a href=# aria-controls=DataTables_Table_0 data-dt-idx=9 tabindex=0>Last</a></li></ul></div></div></div></div></pane-body></div></div></div><!-- ngIf: showFooter --></div></section></div></div><!--<div class=\\\"row\\\" ng-if=\\\"false\\\" >\\r\\n        <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <div class=\\\"panel panel-default\\\">\\r\\n                <div class=\\\"panel-heading\\\">\\r\\n                    <h1 class=\\\"pull-right\\\"\\r\\n                         data-translate=\\\"APP.MODULES.ROLE.TITLE\\\"></h1>\\r\\n                    <div class=\\\"pull-left\\\">\\r\\n                        <button class=\\\"btn btn-sm btn-success-alt\\\"\\r\\n                                data-ng-show=\\\"vm.toggleAddRole\\\"\\r\\n                                data-ng-click=\\\"vm.toggleAddRole=!vm.toggleAddRole\\\">\\r\\n                            <i class=\\\"fa fa-plus-circle\\\"></i>\\r\\n                            <span data-translate=\\\"APP.MODULES.ROLE.ACTIONS.ADD\\\">‌</span>\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"clearfix\\\"></div>\\r\\n                </div>\\r\\n                <div class=\\\"panel-body\\\"\\r\\n                     data-ng-show=\\\"!vm.toggleAddRole\\\"\\r\\n                     data-ng-include=\\\"\\'app/components/roles/add-role.html\\'\\\">\\r\\n                </div>\\r\\n                &lt;!&ndash; /.panel-heading &ndash;&gt;\\r\\n                <div class=\\\"panel-body\\\">\\r\\n                    <div class=\\\"dataTable_wrapper table-responsive\\\">\\r\\n                        <table class=\\\"table table-bordered table-striped table-hover\\\"\\r\\n                               data-template-pagination=\\\"app/directives/ng-table/pagination-tpl.html\\\"\\r\\n                               data-ng-table=\\\"vm.tableParams\\\"\\r\\n                               data-show-filter=\\\"false\\\">\\r\\n                            <colgroup>\\r\\n                                <col width=\\\"20%\\\"/>\\r\\n                                <col width=\\\"30%\\\"/>\\r\\n                                <col width=\\\"35%\\\"/>\\r\\n                                <col width=\\\"15%\\\"/>\\r\\n                            </colgroup>\\r\\n                            <tr class=\\\"text-center\\\"\\r\\n                                data-ng-repeat=\\\"item in $data\\\">\\r\\n                                <td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\"\\r\\n                                    data-ng-bind=\\\"item.role\\\">\\r\\n                                </td>\\r\\n                                <td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\"\\r\\n                                    data-filter=\\\"{caption:\\'text\\'}\\\">\\r\\n                                    <span data-ng-bind=\\\"item.caption\\\"\\r\\n                                          data-ng-show=\\\"!vm.toggleEditRole[$index]\\\"></span>\\r\\n                                    <form name=\\\"roleForm{{$index}}\\\"\\r\\n                                          data-ng-show=\\\"vm.toggleEditRole[$index]\\\"\\r\\n                                          novalidate>\\r\\n                                        <div class=\\\"form-group\\\"\\r\\n                                             data-ng-class=\\\"{\\'has-error\\':role.$invalid && !role.$pristine}\\\">\\r\\n                                            <input class=\\\"form-control\\\"\\r\\n                                                   type=\\\"text\\\"\\r\\n                                                   auto-focus=\\\"{{vm.toggleEditRole[$index]}}\\\"\\r\\n                                                   placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\"\\r\\n                                                   data-ng-model=\\\"item.caption\\\"\\r\\n                                                   name=\\\"caption\\\"\\r\\n                                                   required>\\r\\n                                        </div>\\r\\n                                    </form>\\r\\n                                </td>\\r\\n                                <td>\\r\\n                                    <a data-ui-sref=\\\"root.roles.details({role:item.role})\\\">\\r\\n                                        <span data-translate=\\\"APP.SHARE.VIEW\\\"></span>\\r\\n                                        <span data-translate=\\\"APP.MODULES.PERMISSION.LIST\\\"></span>\\r\\n                                    </a>\\r\\n                                </td>\\r\\n                                <td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\">\\r\\n                                    <command-buttons has-edit=\\\"true\\\" edit=\\\"vm.updateRole(item, $index)\\\"\\r\\n                                                     toggle=\\\"vm.toggleEditRole[$index]\\\"\\r\\n                                                     has-delete=\\\"true\\\" delete=\\\"vm.deleteRole(item.role, $index)\\\"\\r\\n                                                     cancel=\\\"vm.cancelEditRole($index)\\\"\\r\\n                                    ></command-buttons>\\r\\n\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                    &lt;!&ndash; /.table-responsive &ndash;&gt;\\r\\n                </div>\\r\\n                &lt;!&ndash; /.panel-body &ndash;&gt;\\r\\n            </div>\\r\\n            &lt;!&ndash; /.panel &ndash;&gt;\\r\\n        </div>\\r\\n    </div>--></div>\");\n$templateCache.put(\"app/components/sample/sample.html\",\"<div class=container-fluid><h2 class=view-title data-translate=APP.MODULES.SAMPLE.TITLE></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.SAMPLE.LIST></h1><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=vm.toggleAddSample data-ng-click=\\\"vm.toggleAddSample=!vm.toggleAddSample\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddSample><form class=form-inline name=addSampleForm data-ng-submit=vm.createSample();addSampleForm.$setPristine() novalidate><div class=form-group data-ng-class=\\\"{\\'has-error\\':addSampleForm.name.$invalid &&!addSampleForm.name.$pristine}\\\"><span class=red-star>*</span><label for=view data-translate=APP.SHARE.NAME></label><input class=form-control type=text id=view name=view auto-focus={{!vm.toggleAddSample}} placeholder=\\\"{{\\'APP.SHARE.NAME\\'|translate}}\\\" data-ng-model=vm.view.name required></div><button class=\\\"btn btn-default-alt\\\" type=button data-ng-click=vm.cancelAddSample() uib-tooltip=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt\\\" type=submit uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-disabled=addSampleForm.$invalid><i class=\\\"fa fa-check\\\"></i></button></form></pane-body><pane-body><div class=\\\"dataTables_wrapper table-responsive form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><colgroup><col width=15%><col width=70%><col width=15%></colgroup><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\" data-ng-bind=item.id></td><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-filter=\\\"{view:\\'text\\'}\\\"><span data-ng-bind=item.name data-ng-show=!vm.toggleEditSample[$index]></span><form name=viewForm{{$index}} data-ng-show=vm.toggleEditSample[$index] novalidate><div class=form-group data-ng-class=\\\"{\\'has-error\\':view.$invalid && !view.$pristine}\\\"><input class=form-control type=text auto-focus={{vm.toggleEditSample[$index]}} placeholder=\\\"{{\\'APP.SHARE.CAPTION\\'|translate}}\\\" data-ng-model=item.name name=view required></div></form></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons cancel=vm.cancelEditSample($index) disabled edit=\\\"vm.updateSample(item, $index)\\\" delete=\\\"vm.deleteSample(item.id, $index)\\\" has-delete=true toggle=vm.toggleEditSample[$index]></command-buttons></td></tr></table></div></pane-body></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/trace/add-comment-modal.html\",\"<div class=modal-header><h3 class=modal-title data-ng-bind=\\\"(\\'APP.MODULES.TRACE.TITLES.\\' + modalVm.action)|translate\\\"></h3></div><div class=modal-body><div class=row data-ng-if=\\\"modalVm.action != \\'postpone\\'\\\"><div class=\\\"alert alert-warning\\\" data-translate=\\\"Caution! the trace will be exited from current page after this action\\\"></div></div><div class=row><div class=\\\"form-group col-sm-12 pull-right\\\" data-ng-if=\\\"modalVm.action == \\'postpone\\'\\\"><label class=control-label data-translate=APP.SHARE.DATE></label><!--<adm-dtp data-ng-model=\\\"modalVm.date\\\">\\r\\n                <input class=\\\"form-control\\\"\\r\\n                       id=\\\"date\\\" name=\\\"date\\\"\\r\\n                       data-ng-model=\\\"modalVm.date\\\"\\r\\n                       dtp-input>\\r\\n            </adm-dtp>--><simple-date data-ng-model=modalVm.date id=date name=date required></simple-date><div class=\\\"row m-t-1\\\"><div class=\\\"col-sm-12 suggested-dates\\\"><button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=modalVm.setDate(30) data-translate=\\\"30 days later\\\"></button> <button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=modalVm.setDate(20) data-translate=\\\"20 days later\\\"></button> <button class=\\\"btn btn-warning-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=modalVm.setDate(10) data-translate=\\\"10 days later\\\"></button> <button class=\\\"btn btn-danger-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=modalVm.setDate(5) data-translate=\\\"5 days later\\\"></button></div></div></div><div class=\\\"form-group col-sm-12 pull-right\\\" data-ng-if=\\\"modalVm.action == \\'transfer\\'\\\"><ui-select data-ng-model=modalVm.user ng-disabled=modalVm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in modalVm.users\\\" group-by=modalVm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=modalVm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.SHARE.DESCRIPTION></label><textarea class=form-control id=comment name=comment data-ng-model=modalVm.comment></textarea></div><div class=\\\"form-group col-sm-12\\\"><button class=\\\"btn btn-primary-alt pull-left\\\" data-ng-click=modalVm.submit() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></div>\");\n$templateCache.put(\"app/components/trace/trace-detail.html\",\"<div class=\\\"container-fluid trace\\\"><!--<back-button></back-button>--><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading ng-class=\\\"{\\'convert-debit-trace-bg\\':vm.trace.forCommitmentConvert}\\\"><h1 class=\\\"module-title inline\\\"><label data-translate=APP.MODULES.TRACE.DETAIL.TITLE></label><label ng-if=vm.trace.forCommitmentConvert>(ارسال شده از دیون به حال)</label></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><!--info--><div class=pane-body><div class=\\\"contract-container row\\\"><div class=\\\"col-sm-3 pull-right\\\"><label class=control-label data-translate=APP.SHARE.ID></label><p data-ng-bind=vm.trace.id|pNumber></p></div><div class=\\\"col-sm-3 pull-right\\\"><label class=control-label data-translate=APP.MODULES.TRACE.BOUNDED_USER></label><p data-ng-bind=vm.trace.user.name></p></div><div class=\\\"col-sm-3 pull-right\\\"><label class=control-label data-translate=APP.MODULES.TRACE.MONITORING_NUMBER></label><p><a data-ng-if=!vm.trace.forCommitmentConvert data-ng-bind=vm.trace.monitoring.number|pNumber title=\\\"مشاهده‌ی نظارت\\\" data-ui-sref=root.monitoring.trace({monitoringId:vm.trace.monitoring.id})></a><label data-ng-if=vm.trace.forCommitmentConvert>{{vm.trace.monitoring.number|pNumber}}</label></p></div><div class=\\\"col-sm-3 pull-right\\\"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.STATUS></label><p data-ng-bind=vm.trace.currentStep.title></p></div><div class=\\\"col-sm-3 pull-right\\\"><label class=control-label data-translate=APP.SHARE.DATE></label><p data-ng-bind=vm.trace.alertDate|jDate|pNumber></p></div><div class=\\\"col-sm-9 pull-right\\\"><label class=control-label data-translate=APP.SHARE.COMMENT></label><p data-ng-bind=vm.trace.description></p></div></div></div><hr><!--operation--><div class=pane-body data-ng-show=\\\"vm.isMine && (vm.trace.currentStep.name==\\'waiting\\' ||\\r\\n                                                              vm.trace.currentStep.name== \\'seen\\' || vm.trace.currentStep.name ==\\'alerted\\')\\\"><h3 class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.DETAIL.OPERATION></h3><div class=clearfix></div><div class=\\\"contract-container row\\\"><div class=\\\"form-group col-sm-12 col-md-6 col-lg-4 pull-right\\\"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.OPERATIONS for=operations></label><select class=form-control name=operations id=operations data-ng-model=vm.operation data-ng-attr-title=\\\"{{\\'APP.ACTIONS.SELECT\\'|translate}}\\\" data-ng-options=\\\"operation as operation.title for operation in vm.operations\\\"></select></div><div class=\\\"form-group col-sm-12 col-md-6 col-lg-4 pull-right\\\" data-ng-show=\\\"vm.operation.id == 3\\\"><label class=control-label for=date data-translate=APP.MODULES.TRACE.DETAIL.POSTPONE_DATE></label><adm-dtp data-ng-model=vm.date full-data=vm.dateDetails><input class=form-control data-ng-disabled=vm.loading id=date name=date data-ng-model=vm.date dtp-input></adm-dtp></div><div class=\\\"col-sm-12 col-md-6 col-lg-4 pull-right\\\" data-ng-show=\\\"vm.operation.id == 3\\\"><label class=control-label for=date data-translate=APP.MODULES.TRACE.DETAIL.POSTPONE_TO></label><div><button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(30) data-translate=\\\"30 days later\\\"></button> <button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(20) data-translate=\\\"20 days later\\\"></button> <button class=\\\"btn btn-warning-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(10) data-translate=\\\"10 days later\\\"></button> <button class=\\\"btn btn-danger-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(5) data-translate=\\\"5 days later\\\"></button></div></div><div class=\\\"form-group col-sm-12 col-md-6 col-lg-8 pull-right\\\" data-ng-show=\\\"vm.operation.id == 4\\\"><label class=control-label data-translate=APP.MODULES.TRACE.DETAIL.USER></label><ui-select data-ng-model=vm.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class=\\\"form-group col-sm-12 col-md-6 col-lg-8\\\" data-ng-class=\\\"{\\'col-sm-10\\': vm.trace.currentStep.name==\\'seen\\' || vm.trace.currentStep.name ==\\'alerted\\', \\'col-sm-12\\':vm.trace.currentStep.name==\\'waiting\\'}\\\" data-ng-show=\\\"vm.trace.currentStep.name==\\'waiting\\' || vm.trace.currentStep.name ==\\'alerted\\' ||\\r\\n                                                              vm.trace.currentStep.name== \\'seen\\'\\\"><label class=control-label data-translate=APP.SHARE.DESCRIPTION></label><textarea class=form-control data-ng-disabled=vm.loading id=comment name=comment data-ng-bind=vm.trace.description data-ng-model=vm.comment>\\r\\n                                        </textarea></div><div class=\\\"col-sm-12 text-left\\\"><button class=\\\"btn btn-sm btn-success\\\" data-ng-click=vm.traceCleared() data-ng-disabled=\\\"!vm.comment || vm.loading\\\" data-ng-show=\\\"(vm.trace.currentStep.name==\\'waiting\\' ||\\r\\n                                                              vm.trace.currentStep.name== \\'seen\\' || vm.trace.currentStep.name ==\\'alerted\\') && vm.operation.id == 1\\\"><span class=\\\"icon pe-icon pe-7s-check f-17 f-bold\\\"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_CLEAR></span></button> <button class=\\\"btn btn-sm btn-danger\\\" data-ng-click=vm.traceFailed() data-ng-disabled=\\\"!vm.comment || vm.loading\\\" data-ng-show=\\\"(vm.trace.currentStep.name==\\'waiting\\' ||\\r\\n                                                              vm.trace.currentStep.name== \\'seen\\' || vm.trace.currentStep.name ==\\'alerted\\') && vm.operation.id == 2\\\"><span class=\\\"icon pe-icon pe-7s-close-circle f-17 f-bold\\\"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_FAILED></span></button> <button class=\\\"btn btn-sm btn-warning\\\" data-ng-click=vm.tracePostPone() data-ng-show=\\\"vm.operation.id == 3\\\" data-ng-disabled=\\\"!vm.comment || !vm.date || vm.loading\\\"><span class=\\\"icon pe-icon pe-7s-refresh f-17 f-bold\\\"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRACE_SEEN_POST_PONE></span></button> <button class=\\\"btn btn-sm btn-info\\\" data-ng-click=vm.traceTransfer() data-ng-show=\\\"vm.operation.id == 4\\\" data-ng-disabled=\\\"!vm.comment || !vm.user || vm.loading\\\"><span class=\\\"icon pe-icon pe-7s-repeat f-17 f-bold\\\"></span> <span data-translate=APP.MODULES.TRACE.DETAIL.TRANSFER></span></button></div></div></div><!--attachments and logs--><div class=pane-body><hr><div class=row><!--attachments--><div class=\\\"col-lg-5 col-md-12 m-t-2\\\"><h3 class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.DETAIL.ATTACHMENTS></h3><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><colgroup><col width=30%><col width=20%><col width=40%><col width=10%></colgroup><tr><th class=text-center data-translate=APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME></th><th class=text-center data-translate=APP.MODULES.TRACE.ATTACHMENTS.CREATOR></th><th class=text-center data-translate=APP.SHARE.DESCRIPTION></th><th class=text-center ng-show=vm.isMine></th></tr><tr data-ng-repeat=\\\"attachment in vm.trace.attachments\\\"><td><a ng-href={{attachment.url}} target=_blank data-ng-bind=\\\"attachment.name + \\'.\\'+attachment.type\\\"></a></td><td data-ng-bind=attachment.creatorLmsUser.name></td><td data-ng-bind=attachment.description></td><td><span class=\\\"icon pe-icon pe-7s-trash f-20 text-danger\\\" ng-show=attachment.canDelete data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=vm.deleteAttachment(attachment)></span> <span class=\\\"icon pe-icon pe-7s-attention f-20 text-danger\\\" data-ng-hide=attachment.canDelete></span></td></tr><!-- add rows --><tr><td colspan=3><file-upload class=\\\"inline col-xs-8 pull-right\\\" file=vm.attachment.attachment data-uploading=vm.uploaded label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><button class=\\\"btn btn-warning-alt inline\\\" type=button data-ng-click=vm.cancelAddAttachment() title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button></td><td><button class=\\\"btn btn-primary-alt inline\\\" ng-click=vm.addAttachment(); title=\\\"{{\\'APP.ACTIONS.UPLOAD\\'|translate}}\\\" ng-disabled=!vm.attachment><i class=\\\"fa fa-upload\\\"></i></button></td></tr><tr><td class=b-0 colspan=3><textarea class=form-control data-ng-model=vm.description style=\\\"resize: vertical\\\" placeholder=\\\"{{\\'APP.SHARE.DESCRIPTION\\'|translate}} ... \\\"></textarea></td><td class=b-0></td></tr><tr data-ng-show=vm.trace.attachments.length><td colspan=3><a ng-href=api/trace/{{vm.trace.id}}/getAllFilesZipped/{{vm.trace.id}}.zip target=_blank download={{vm.monitoring.number}}.zip><i class=\\\"fa fa-file-archive-o\\\"></i> <span data-translate=APP.ACTIONS.DOWNLOAD_ALL></span></a></td></tr></table></div></div><!--logs--><div class=\\\"col-lg-7 col-md-12 m-t-2\\\"><h3 class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.DETAIL.TRACE_LOGS></h3><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr><th class=text-center><span ng-bind=\\\"\\'APP.SHARE.ID\\'|translate\\\"></span></th><th class=text-center><span data-ng-bind=\\\"\\'APP.SHARE.USER\\'|translate\\\"></span></th><th class=text-center><span data-ng-bind=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\\'|translate\\\"></span></th><th class=text-center><span data-ng-bind=\\\"\\'APP.SHARE.DATE\\'|translate\\\"></span></th><th class=text-center><span data-ng-bind=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\\'|translate\\\"></span></th><th class=text-center><span data-ng-bind=\\\"\\'APP.SHARE.DESCRIPTION\\'|translate\\\"></span></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.processLog\\\"><td data-ng-bind=item.id|pNumber></td><td data-ng-bind=item.user.name></td><td data-ng-bind=item.transition.name|traceDefinition|translate></td><td data-ng-bind=item.createDate|jDate|pNumber></td><td data-ng-bind=item.createDate|timeFilter|pNumber></td><td data-ng-bind=item.comment|translate></td></tr></table></div></div></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/trace/trace.html\",\"<div class=\\\"container-fluid trace\\\"><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-alarm trace\\\"></span> <span data-translate={{vm.title}}></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=row><!--MONITORING_USER--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.TRACE.MONITORING_USER></label><ui-select data-ng-model=vm.creator ng-disabled=\\\"vm.loading || vm.disableCreator\\\"><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div></div><!--alert from date--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.TRACE.DATE_FROM></label><!--<adm-dtp data-ng-model=\\\"vm.alertFromDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.searchItems.fromAlertDate name=alertFromDate></simple-date></div></div><!--alertToDate due date--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.TRACE.DATE_TO></label><!--<adm-dtp data-ng-model=\\\"vm.alertToDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.searchItems.toAlertDate name=alertToDate></simple-date></div></div></div><div class=row><!--ID--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.SHARE.ID></label><input class=form-control data-ng-model=vm.searchItems.id placeholder=\\\"{{\\'APP.SHARE.ID\\'|translate}}\\\"></div></div><!-- monitoringId --><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER></label><input class=form-control data-ng-model=vm.searchItems.monitoringNumber placeholder=\\\"{{\\'APP.MODULES.MONITORING.NUMBER\\'|translate}}\\\"></div></div><!-- applicant --><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.TRACE.MONITORING_CUSTOMER></label><input class=form-control data-ng-model=vm.searchItems.applicant placeholder=\\\"{{\\'APP.MODULES.TRACE.MONITORING_CUSTOMER\\'|translate}}\\\"></div></div></div><div class=row><!--BOUNDED_USER--><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.TRACE.BOUNDED_USER></label><ui-select data-ng-model=vm.user ng-disabled=\\\"vm.loading || vm.disableUser\\\"><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- province --><!-- search province --><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select ng-model=vm.searchItems.provinceId ng-disabled=\\\"vm.loading || vm.disableProvince\\\" id=province sortable><ui-select-match allow-clear=true ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\\'|translate}}\\\">{{$select.selected.title}} &lt;{{$select.selected.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"province.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+province.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><div class=\\\"col-md-4 pull-right\\\" data-ng-if=vm.isInRoleStaff()><div class=\\\"form-group pull-right m-t-2\\\"><label class=\\\"pull-left btn btn-default\\\" for=for-commitment-convert><input class=\\\"pull-right m-l-1\\\" data-ng-model=vm.searchItems.forCommitmentConvert id=for-commitment-convert name=forCommitmentConvert type=checkbox> <span data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></span></label></div></div><!-- status --><div class=\\\"col-md-4 pull-right\\\" data-ng-hide=vm.hideStatuses><div class=form-group><label data-translate=APP.MODULES.MONITORING.TRACE_STEP></label>:&nbsp;<div class=\\\"btn-group nav-btn-group\\\"><label class=\\\"btn btn-default\\\" data-ng-hide=step.hide data-ng-repeat=\\\"step in vm.traceSteps\\\" ng-model=step.selected uib-btn-checkbox><i class=fa data-ng-class=\\\"{\\'fa-check-square-o\\':step.selected, \\'fa-square-o\\':!step.selected}\\\"></i> <span data-ng-bind=step.title></span></label></div></div></div></div><div class=row><div class=col-md-12><br><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() ng-attr-title=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit ng-attr-title=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=\\\"vm.exportTrace(\\'EXCEL\\')\\\" ng-attr-title=\\\"{{\\'APP.ACTIONS.EXPORT\\'|translate}}\\\"><i class=\\\"fa fa-file-excel-o\\\"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></div></form></div><div class=pane-body id=search-result-container><div class=\\\"row screen-only\\\"><div class=col-xs-12 data-ng-hide=vm.loading><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pCurrency></b> (<span data-ng-bind=vm.fetchTime|pNumber></span> )</div><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" ng-show=vm.loading class=centered height=50></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable few-paddings\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in $data\\\"><td data-title=\\\"\\'APP.SHARE.STATUS\\'|translate\\\" data-ng-class=vm.getColorOfState(item.currentStep.name)><i data-ng-class=vm.getIconOfState(item.currentStep.name) data-ng-attr-title={{item.currentStep.title}}></i></td><td data-title=\\\"\\'APP.SHARE.ID\\'|translate\\\" data-sortable=\\\"\\'id\\'\\\"><a data-ng-attr-title=\\\"{{\\'APP.ACTIONS.VIEW\\'|translate}}\\\" ui-sref=root.trace-detail({id:item.id})><span data-ng-bind=item.id|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.TRACE.MONITORING_USER\\'|translate\\\" data-sortable=\\\"\\'creator.name\\'\\\"><span data-ng-bind=item.creator.name></span></td><td data-title=\\\"\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate\\\" data-sortable=\\\"\\'user.name\\'\\\"><span data-ng-bind=item.user.name></span></td><td data-title=\\\"\\'APP.MODULES.TRACE.MONITORING_NUMBER\\'|translate\\\" data-sortable=\\\"\\'monitoring.number\\'\\\"><a class=\\\"btn btn-sm text-info\\\" ng-if=!item.forCommitmentConvert target=_blank data-ng-attr-title=\\\"{{\\'APP.ACTIONS.VIEW\\'|translate}}\\\" ui-sref=root.monitoring.monitoring-details({monitoringId:item.monitoring.id})><span data-ng-bind=item.monitoring.number|pNumber></span></a><label ng-if=item.forCommitmentConvert><i class=\\\"icon pe-icon pe-7s-refresh-2 f-17 text-warning\\\"></i> <span data-ng-bind=item.monitoring.number|pNumber></span></label></td><td data-title=\\\"\\'APP.MODULES.TRACE.MONITORING_CUSTOMER\\'|translate\\\" data-sortable=\\\"\\'monitoring.applicant.applicantName\\'\\\"><a class=\\\"btn btn-sm text-info\\\" target=_blank data-ng-attr-title=\\\"{{\\'APP.ACTIONS.VIEW\\'|translate}}\\\" ui-sref=\\\"root.directive.applicant({monitoringId:item.monitoring.id,monitoringState:\\'root.monitoring.monitoring-details\\',directiveId:\\'xxxxtrace\\'})\\\"><span data-ng-bind=item.monitoring.applicant.applicantName></span></a></td><td data-title=\\\"\\'APP.MODULES.TRACE.PLACE\\'|translate\\\" data-sortable=\\\"\\'monitoring.contract.province.id\\'\\\"><span data-ng-bind=item.monitoring.contract.province.title></span> - <span data-ng-bind=item.monitoring.payerBranch.title></span></td><td data-title=\\\"\\'APP.SHARE.DATE\\'|translate\\\" data-sortable=\\\"\\'alertDate\\'\\\"><span data-ng-bind=item.alertDate|jDate|pNumber></span></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><a class=\\\"btn btn-sm text-success\\\" data-ng-show=\\\"vm.isValidUser(item) && (vm.steps==\\'alerted,seen\\' || vm.steps== \\'waiting\\')\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.TRACE.DETAIL.TRACE_CLEAR\\'|translate}}\\\" data-ng-click=\\\"vm.openModal(item,\\'clear\\')\\\"><span class=\\\"icon pe-icon pe-7s-check f-17 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-danger\\\" data-ng-show=\\\"vm.isValidUser(item) && (vm.steps==\\'alerted,seen\\' || vm.steps== \\'waiting\\')\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.TRACE.DETAIL.TRACE_FAILED\\'|translate}}\\\" data-ng-click=\\\"vm.openModal(item,\\'fail\\')\\\"><span class=\\\"icon pe-icon pe-7s-close-circle f-17 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-warning\\\" data-ng-show=\\\"vm.isValidUser(item) && (vm.steps==\\'alerted,seen\\' || vm.steps== \\'waiting\\')\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.TRACE.DETAIL.TRACE_SEEN_POST_PONE\\'|translate}}\\\" data-ng-click=\\\"vm.openModal(item,\\'postpone\\')\\\"><span class=\\\"icon pe-icon pe-7s-refresh f-17 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-info\\\" data-ng-show=\\\"vm.isValidUser(item) && (vm.steps==\\'alerted,seen\\' || vm.steps== \\'waiting\\')\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.TRACE.DETAIL.TRANSFER\\'|translate}}\\\" data-ng-click=\\\"vm.openModal(item,\\'transfer\\')\\\"><span class=\\\"icon pe-icon pe-7s-repeat f-17 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-info\\\" title=\\\"{{\\'APP.MODULES.MONITORING.FLOW_VIEW.TITLE\\'|translate}}\\\" data-ng-click=vm.openFlowModal(item)><span class=\\\"icon pe-icon pe-7s-shuffle f-19 f-bold\\\"></span> </a><a class=\\\"btn btn-sm text-highlight\\\" title=\\\"{{\\'APP.ACTIONS.DOWNLOAD_ALL\\'|translate}}\\\" data-ng-href=\\\"{{\\'api/trace/\\'+item.id+\\'/getAllFilesZipped/\\' + item.id +\\'.zip\\'}}\\\" target=_blank download={{item.id}}.zip><span class=\\\"icon pe-icon pe-7s-download f-19 f-bold\\\"></span></a></td></tr></table></div><div class=row><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"icon pe-icon pe-7s-refresh-2 f-17 text-warning\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></span></div><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"fa fa-circle yellowFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.WAITING></span></div><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"fa fa-circle OrangeFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.ALERTED></span></div><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"fa fa-circle GrayFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.SEEN></span></div><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"fa fa-circle GreenFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.CLEARED></span></div><div class=\\\"col-lg-2 col-md-3 col-sm-6 col-xs-12\\\"><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.TRACE.FAILED></span></div></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/update-report/update-report.html\",\"<div class=container-fluid><h2 class=\\\"approve-title screen-only\\\"></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=\\\"module-heading screen-only\\\"><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.UPDATE_REPORT.TITLE></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form class=\\\"dataTables_wrapper dt-bootstrap search-container screen-only\\\"><div class=row><label data-translate=APP.MODULES.UPDATE_REPORT.LAST_DATE></label>: <span>{{vm.lastUpdate.endDate|jDateTime|pNumber}}</span></div><div class=row><label data-translate=APP.MODULES.UPDATE_REPORT.STATUS></label>: <span>{{vm.lastUpdate.status|updateFilter}}</span> <i class=\\\"fa fa-spinner fa-spin\\\" data-ng-show=\\\"vm.lastUpdate.status == \\'Processing\\'\\\"></i></div><div class=row><button class=\\\"btn btn-success form-control\\\" data-ng-disabled=vm.loading data-ng-click=vm.updateReport() data-translate=APP.MODULES.UPDATE_REPORT.UPDATE></button></div></form><div class=\\\"row text-center\\\" data-ng-show=vm.loading><label data-ng-show=vm.loading>بانک اطلاعاتی در حال بروز رسانی می باشد لطفا تا کامل شدن این کار صبر کنید ...</label><img alt=\\\"در حال برور زسانی گزارشات ...\\\" class=centered height=50 ng-show=vm.loading src=assets/images/loading-sm.gif></div></div><div class=screen-only><br><br></div><!--<div class=\\\"well screen-only\\\" data-ng-hide=\\\"vm.loading && !vm.duration\\\">\\r\\n                                    مدت زمان بارگیری:\\r\\n                                    {{vm.duration|pNumber}}\\r\\n                                </div>--></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/users/add-edit-user.html\",\"<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><!-- /.row --><div class=row><div class=\\\"module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=module-title data-ng-if=!vm.username data-translate=APP.MODULES.USER.ACTIONS.ADD></h1><h1 class=\\\"module-title inline\\\" data-ng-if=vm.username data-translate=APP.MODULES.USER.ACTIONS.EDIT></h1><a class=\\\"btn btn-sm text-info inline\\\" data-ng-if=vm.username data-ui-sref=root.users.details({username:vm.username}) uib-tooltip=\\\"{{\\'APP.MODULES.USER.ROLES_ACCESSES\\'|translate}}\\\"><i class=\\\"icon pe-icon pe-7s-info f-20\\\"></i></a></div><!--add document--><div class=module-content><div class=module-content-inner><div><pane-body><form name=userForm novalidate><!--username--><div class=row><div class=\\\"col-lg-6 form-group pull-right\\\" data-ng-class=\\\"{\\'has-error\\':(userForm.username.$invalid &&!userForm.username.$pristine)\\r\\n                                                , \\'has-success\\': (!userForm.username.$invalid && userForm.username.$dirty)}\\\"><span class=red-star data-ng-show=!vm.username>*</span><label for=username data-translate=APP.MODULES.USER.USERNAME></label><span class=text-danger ng-show=\\\"userForm.username.$invalid &&!userForm.username.$pristine\\\" data-translate=\\\"username error\\\"></span> <span data-ng-show=vm.username class=form-control data-ng-bind=vm.user.username></span> <input class=form-control type=text id=username name=username data-ng-if=!vm.username ng-pattern=/^[0-9]*$/ data-ng-model=vm.user.username auto-focus=true required></div><div class=\\\"col-lg-6 form-group pull-right\\\" data-ng-class=\\\"{\\'has-error\\':userForm.name.$invalid &&!userForm.name.$pristine,\\r\\n                                                    \\'has-success\\':userForm.name.$valid &&  userForm.name.$dirty}\\\"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label><input class=form-control type=text id=name name=name data-ng-model=vm.user.name required></div><!--identification--><!--<div class=\\\"col-lg-6 form-group pull-right\\\"\\r\\n                                                 data-ng-class=\\\"{\\'has-error\\':userForm.identification.$invalid &&!userForm.identification.$pristine,\\r\\n                                                    \\'has-success\\':userForm.identification.$valid &&  userForm.identification.$dirty}\\\">\\r\\n                                                <label for=\\\"identification\\\"\\r\\n                                                       data-translate=\\\"APP.MODULES.USER.IDENTIFICATION\\\"></label>\\r\\n                                                <input class=\\\"form-control\\\" type=\\\"text\\\"\\r\\n                                                       id=\\\"identification\\\" name=\\\"identification\\\"\\r\\n                                                       data-ng-model=\\\"vm.user.identification\\\">\\r\\n                                            </div>--><!--level--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.level.$invalid &&  !userForm.level.$pristine,\\r\\n                                                    \\'has-success\\':userForm.level.$valid &&  userForm.level.$dirty}\\\"><span class=red-star>*</span><label for=level data-translate=APP.MODULES.USER.LEVEL></label><select class=form-control id=level name=level data-ng-options=\\\"level.id as level.name for level in vm.levels\\\" data-ng-model=vm.user.level required></select></div></div><!--economicSection--><div class=\\\"col-md-6 pull-right\\\" ng-if=\\\"vm.user.level === \\'STAFF\\'\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.economicSection.$invalid &&  !userForm.economicSection.$pristine,\\r\\n                                                    \\'has-success\\':userForm.economicSection.$valid &&  userForm.economicSection.$dirty}\\\"><label for=economicSection data-translate=APP.MODULES.USER.ECONOMIC_SECTION></label><div class=input-group><select class=form-control id=economicSection name=economicSection data-ng-options=\\\"economicSection.id as economicSection.name for economicSection in vm.economicSections\\\" data-ng-model=vm.user.economicSection.id></select><span class=\\\"input-group-addon cursor-pointer\\\" ng-click=\\\"vm.user.economicSection = null\\\"><i class=\\\"fa fa-remove text-danger\\\"></i></span></div></div></div><!--province--><div class=\\\"col-md-6 pull-right\\\" data-ng-if=\\\"vm.user.level === \\'PROVINCE\\' || vm.user.level === \\'BRANCH\\'\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.province.$invalid &&  !userForm.province.$pristine,\\r\\n                                                    \\'has-success\\':userForm.province.$valid &&  userForm.province.$dirty}\\\"><span class=red-star>*</span><label for=province data-translate=APP.MODULES.USER.PROVINCE></label><div class=input-group><select class=form-control data-ng-change=vm.getBranches() id=province name=province data-ng-options=\\\"province.id as province.title for province in vm.provinces\\\" data-ng-model=vm.user.province.id required></select><span class=\\\"input-group-addon cursor-pointer\\\" ng-click=\\\"vm.user.province = null\\\"><i class=\\\"fa fa-remove text-danger\\\"></i></span></div></div></div><!--branch--><div class=\\\"col-md-6 pull-right\\\" data-ng-if=\\\"vm.user.level === \\'BRANCH\\'\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.branch.$invalid &&  !userForm.branch.$pristine,\\r\\n                                                    \\'has-success\\':userForm.branch.$valid &&  userForm.branch.$dirty}\\\"><span class=red-star>*</span><label for=branch data-translate=APP.MODULES.USER.BRANCH></label><div class=input-group><select class=form-control data-ng-change=vm.getBranches() id=branch name=branch data-ng-options=\\\"branch.id as branch.title for branch in vm.branches\\\" data-ng-model=vm.user.branch.id required></select><span class=\\\"input-group-addon cursor-pointer\\\" ng-click=\\\"vm.user.branch = null\\\"><i class=\\\"fa fa-remove text-danger\\\"></i></span></div></div></div><!--phoneNumber--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.phoneNumber.$invalid &&  !userForm.phoneNumber.$pristine,\\r\\n                                                    \\'has-success\\':userForm.phoneNumber.$valid &&  userForm.phoneNumber.$dirty}\\\"><label for=phoneNumber data-translate=APP.SHARE.PHONE_NUMBER></label><input class=form-control name=phoneNumber id=phoneNumber data-ng-model=vm.user.phoneNumber></div></div><!--address--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.address.$invalid &&  !userForm.address.$pristine,\\r\\n                                                    \\'has-success\\':userForm.address.$valid &&  userForm.address.$dirty}\\\"><label for=address data-translate=APP.SHARE.ADDRESS></label><textarea class=form-control name=address id=address data-ng-model=vm.user.address></textarea></div></div></div><div ng-if=!vm.username><!--password--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.password.$invalid && !userForm.password.$pristine,\\r\\n                                                    \\'has-success\\':userForm.password.$valid && userForm.password.$dirty}\\\"><span class=red-star>*</span><label for=password data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control type=password id=password name=password data-ng-model=vm.user.password required></div></div><!--repeatPassword--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':(userForm.repeatPassword.$invalid &&!userForm.repeatPassword.$pristine)\\r\\n                                                     || vm.user.password != vm.repeatPassword ,\\r\\n                                                      \\'has-success\\':(!userForm.repeatPassword.$invalid && userForm.repeatPassword.$dirty)\\r\\n                                                     && vm.user.password == vm.repeatPassword }\\\"><span class=red-star>*</span><label for=repeatPassword data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control type=password id=repeatPassword name=repeatPassword data-ng-model=vm.repeatPassword required></div></div></div><div class=\\\"row form-group\\\"><div class=\\\"col-lg-12 pull-left\\\"><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=vm.onSubmit(userForm); data-ng-disabled=\\\"userForm.$invalid  || !vm.username && (vm.user.password != vm.repeatPassword)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form><form name=resetPassForm data-ng-if=vm.username data-ng-submit=vm.resetPassword(resetPassForm) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=\\\"row form-group\\\"><div class=\\\"col-lg-6 pull-right\\\" data-ng-class=\\\"{\\'has-error\\':resetPassForm.newPassword.$invalid &&\\r\\n                                    !resetPassForm.newPassword.$pristine}\\\"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class=\\\"col-lg-6 pull-right\\\" data-ng-class=\\\"{\\'has-error\\':resetPassForm.newPasswordRepeat.$invalid &&\\r\\n                                    !resetPassForm.newPasswordRepeat.$pristine}\\\"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=\\\"row form-group\\\"><div class=\\\"col-lg-12 pull-left\\\"><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=\\\"resetPassForm.$invalid||(vm.newPassword!=vm.newPasswordRepeat)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></pane-body></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/users/assign-permission.html\",\"<form name=addPermissionForm data-ng-submit=vm.assignPermissionToUser();addPermissionForm.$setPristine() novalidate><!--permission --><div class=\\\"col-md-2 pull-right\\\"><span class=text-danger>*</span><label data-translate=APP.MODULES.PERMISSION.NAME></label></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPermissionForm.permission.$invalid && !addPermissionForm.permission.$pristine,\\r\\n                             \\'has-success\\':addPermissionForm.permission.$valid && addPermissionForm.permission.$dirty}\\\"><ui-select theme=bootstrap data-ng-model=vm.permission><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.caption></span></ui-select-match><ui-select-choices repeat=\\\"permission in vm.allPermissions |\\r\\n                                propsFilter : {name: $select.search,caption:$select.search}\\\"><div ng-bind-html=\\\"(permission.caption ? permission.caption :permission.name) | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-3 pull-right\\\"><label data-translate=APP.MODULES.PERMISSION.APPLY></label><select ng-model=vm.permission.denied ng-options=\\\"o.v as o.n for o in [{ n: \\'سلب گردد\\', v: true }, { n: \\'اعطا گردد\\', v: false }]\\\"></select></div><div class=\\\"col-md-3 pull-right\\\"><button class=\\\"btn btn-default-alt\\\" type=button data-ng-click=vm.cancelAssignPermission()><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=addPermissionForm.$invalid><i class=\\\"fa fa-check\\\"></i></button></div></form>\");\n$templateCache.put(\"app/components/users/assign-role.html\",\"<form name=addRoleForm data-ng-submit=vm.assignRoleToUser();addRoleForm.$setPristine() novalidate><!--role --><div class=\\\"col-md-3 pull-right\\\"><span class=text-danger>*</span><label data-translate=APP.MODULES.ROLE.NAME></label></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':addRoleForm.role.$invalid && !addRoleForm.role.$pristine,\\r\\n                             \\'has-success\\':addRoleForm.role.$valid && addRoleForm.role.$dirty}\\\"><ui-select theme=bootstrap data-ng-model=vm.role><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.caption></span></ui-select-match><ui-select-choices repeat=\\\"role in vm.allRoles |\\r\\n                                propsFilter : {role: $select.search,caption:$select.search}\\\"><div ng-bind-html=\\\"(role.caption?role.caption+\\' (\\'+role.role+\\')\\':role.role) | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-3 pull-right\\\"><button class=\\\"btn btn-default-alt\\\" type=button data-ng-click=vm.cancelAssignRole()><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=addRoleForm.$invalid><i class=\\\"fa fa-check\\\"></i></button></div></form>\");\n$templateCache.put(\"app/components/users/user-details.html\",\"<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><div class=module-heading><h2 class=view-title><span data-translate=APP.MODULES.USER.DETAILS></span>: &nbsp; <span data-ng-bind=vm.user.name></span>&nbsp; (<span data-ng-bind=vm.user.username></span>)<!-- /.col-lg-12 --></h2></div><div class=row><div class=\\\"col-lg-12 tabset-container\\\"><uib-tabset active=activeJustified justified=true tabset-class=nav-tabs-theme-1><uib-tab index=0 heading=\\\"{{\\'APP.MODULES.USER.INFO\\'|translate}}\\\"><!-- /.roles --><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h3 class=module-title data-translate=APP.MODULES.USER.INFO></h3><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body><form name=userForm novalidate><!--username--><div class=row><div class=\\\"col-lg-6 col-md-6 col-xs-12 form-group pull-right\\\" data-ng-class=\\\"{\\'has-error\\':(userForm.username.$invalid &&!userForm.username.$pristine)\\r\\n                                                , \\'has-success\\': (!userForm.username.$invalid && userForm.username.$dirty)}\\\"><span class=red-star data-ng-show=!vm.username>*</span><label for=username data-translate=APP.MODULES.USER.USERNAME></label><span class=text-danger ng-show=\\\"userForm.username.$invalid &&!userForm.username.$pristine\\\" data-translate=\\\"username error\\\"></span> <span data-ng-show=vm.username class=form-control data-ng-bind=vm.user.username></span> <input class=form-control type=text id=username name=username data-ng-if=!vm.username ng-pattern=/^[0-9]*$/ data-ng-model=vm.user.username auto-focus=true required></div><div class=\\\"col-lg-6 col-md-6 col-xs-12 form-group pull-right\\\" data-ng-class=\\\"{\\'has-error\\':userForm.name.$invalid &&!userForm.name.$pristine,\\r\\n                                                    \\'has-success\\':userForm.name.$valid &&  userForm.name.$dirty}\\\"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label><input class=form-control type=text id=name name=name data-ng-model=vm.user.name required></div><!--level--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.level.$invalid &&  !userForm.level.$pristine,\\r\\n                                                    \\'has-success\\':userForm.level.$valid &&  userForm.level.$dirty}\\\"><span class=red-star>*</span><label for=level data-translate=APP.MODULES.USER.LEVEL></label><select class=form-control id=level name=level data-ng-options=\\\"level.id as level.name for level in vm.levels\\\" data-ng-model=vm.user.level required></select></div></div><!--economicSection--><!--<div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"\\r\\n                                                             ng-if=\\\"vm.user.level === \\'STAFF\\'\\\">\\r\\n                                                            <div class=\\\"form-group\\\"\\r\\n                                                                 data-ng-class=\\\"{\\'has-error\\':userForm.economicSection.$invalid &&  !userForm.economicSection.$pristine,\\r\\n                                                    \\'has-success\\':userForm.economicSection.$valid &&  userForm.economicSection.$dirty}\\\">\\r\\n\\r\\n                                                                <label for=\\\"economicSection\\\"\\r\\n                                                                       data-translate=\\\"APP.MODULES.USER.ECONOMIC_SECTION\\\"></label>\\r\\n                                                                <div class=\\\"input-group\\\">\\r\\n                                                                    <select class=\\\"form-control\\\"\\r\\n                                                                            id=\\\"economicSection\\\" name=\\\"economicSection\\\"\\r\\n                                                                            data-ng-options=\\\"economicSection.id as economicSection.name for economicSection in vm.economicSections\\\"\\r\\n                                                                            data-ng-model=\\\"vm.user.economicSection.id\\\"></select>\\r\\n                                                                    <span class=\\\"input-group-addon cursor-pointer\\\"\\r\\n                                                                          ng-click=\\\"vm.user.economicSection = null\\\">\\r\\n                                                            <i class=\\\"fa fa-remove text-danger\\\"></i>\\r\\n                                                        </span>\\r\\n                                                                </div>\\r\\n                                                            </div>\\r\\n                                                        </div>--><!--province--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.province.$invalid &&  !userForm.province.$pristine,\\r\\n                                                    \\'has-success\\':userForm.province.$valid &&  userForm.province.$dirty}\\\"><span class=red-star>*</span><label for=province data-translate=APP.MODULES.USER.PROVINCE></label><div class=input-group><select class=form-control id=province name=province data-ng-change=vm.getBranches() data-ng-options=\\\"province.id as province.title for province in vm.provinces\\\" data-ng-model=vm.user.province.id required></select><span class=\\\"input-group-addon cursor-pointer\\\" ng-click=\\\"vm.user.province = null\\\"><i class=\\\"fa fa-remove text-danger\\\"></i></span></div></div></div><!--branch--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\" data-ng-if=\\\"vm.user.level === \\'BRANCH\\'\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.branch.$invalid &&  !userForm.branch.$pristine,\\r\\n                                                    \\'has-success\\':userForm.branch.$valid &&  userForm.branch.$dirty}\\\"><span class=red-star>*</span><label for=branch data-translate=APP.MODULES.USER.BRANCH></label><div class=input-group><select class=form-control id=branch name=branch data-ng-options=\\\"branch.id as branch.title for branch in vm.branches\\\" data-ng-model=vm.user.branch.id required></select><span class=\\\"input-group-addon cursor-pointer\\\" ng-click=\\\"vm.user.branch = null\\\"><i class=\\\"fa fa-remove text-danger\\\"></i></span></div></div></div><!--phoneNumber--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.phoneNumber.$invalid &&  !userForm.phoneNumber.$pristine,\\r\\n                                                    \\'has-success\\':userForm.phoneNumber.$valid &&  userForm.phoneNumber.$dirty}\\\"><label for=phoneNumber data-translate=APP.SHARE.PHONE_NUMBER></label><input class=form-control name=phoneNumber id=phoneNumber data-ng-model=vm.user.phoneNumber></div></div><!--address--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.address.$invalid &&  !userForm.address.$pristine,\\r\\n                                                    \\'has-success\\':userForm.address.$valid &&  userForm.address.$dirty}\\\"><label for=address data-translate=APP.SHARE.ADDRESS></label><textarea class=form-control name=address id=address data-ng-model=vm.user.address></textarea></div></div></div><div class=row ng-if=!vm.username><!--password--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':userForm.password.$invalid && !userForm.password.$pristine,\\r\\n                                                    \\'has-success\\':userForm.password.$valid && userForm.password.$dirty}\\\"><span class=red-star>*</span><label for=password data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control type=password id=password name=password data-ng-model=vm.user.password required></div></div><!--repeatPassword--><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':(userForm.repeatPassword.$invalid &&!userForm.repeatPassword.$pristine)\\r\\n                                                     || vm.user.password != vm.repeatPassword ,\\r\\n                                                      \\'has-success\\':(!userForm.repeatPassword.$invalid && userForm.repeatPassword.$dirty)\\r\\n                                                     && vm.user.password == vm.repeatPassword }\\\"><span class=red-star>*</span><label for=repeatPassword data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control type=password id=repeatPassword name=repeatPassword data-ng-model=vm.repeatPassword required></div></div></div><div class=row><div class=col-xs-12><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=vm.updateUser(userForm); data-ng-disabled=\\\"userForm.$invalid  || !vm.username && (vm.user.password != vm.repeatPassword)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></form><form name=resetPassForm data-ng-if=vm.username data-ng-submit=vm.resetPassword(resetPassForm) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':resetPassForm.newPassword.$invalid &&\\r\\n                                    !resetPassForm.newPassword.$pristine}\\\"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class=\\\"col-lg-6 col-md-6 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':resetPassForm.newPasswordRepeat.$invalid &&\\r\\n                                    !resetPassForm.newPasswordRepeat.$pristine}\\\"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class=col-xs-12><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=\\\"resetPassForm.$invalid||(vm.newPassword!=vm.newPasswordRepeat)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=1 heading=\\\"{{\\'APP.MODULES.ROLE.LIST\\'|translate}}\\\"><!-- /.roles --><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h3 class=module-title data-translate=APP.MODULES.ROLE.LIST></h3><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=!vm.toggleAssignRole data-ng-click=\\\"vm.toggleAssignRole=!vm.toggleAssignRole\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.ROLE.ACTIONS.ADD>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddView><div class=panel-body data-ng-show=vm.toggleAssignRole data-ng-include=\\\"\\'app/components/users/assign-role.html\\'\\\"></div><!-- /.panel-heading --></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"item in vm.userRoles\\\"><td data-title=\\\"\\'APP.SHARE.NAME\\'|translate\\\" data-ng-bind=item.role></td><td data-title=\\\"\\'APP.SHARE.CAPTION\\'|translate\\\" data-filter=\\\"{caption:\\'text\\'}\\\" data-ng-bind=item.caption></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><a class=text-danger data-ng-click=vm.deleteRoleFromUser($index)><!--<span class=\\\" icon pe-icon pe-7s-trash f-17\\\">--><i class=\\\"icon pe-icon pe-7s-trash f-17\\\"></i></a></td></tr></table></div></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=2 heading=\\\"{{\\'APP.MODULES.PERMISSION.LIST\\'|translate}}\\\"><!-- /.permissions --><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h3 class=\\\"module-title pull-right\\\" data-translate=APP.MODULES.PERMISSION.LIST></h3><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=!vm.toggleAssignPermission data-ng-click=\\\"vm.toggleAssignPermission=!vm.toggleAssignPermission\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.PERMISSION.ACTIONS.ADD>‌</span></button></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body data-ng-show=!vm.toggleAddPermission><div class=panel-body data-ng-show=vm.toggleAssignPermission data-ng-include=\\\"\\'app/components/users/assign-permission.html\\'\\\"></div><!-- /.panel-heading --></pane-body><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th data-translate=APP.SHARE.CAPTION></th><th data-translate=APP.MODULES.PERMISSION.APPLY></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.userPermissions\\\"><td data-ng-bind=item.permission.caption data-ng-attr-title={{item.permission.caption}}></td><td data-ng-bind=\\\"(item.denied ? \\'Abandoned\\' : \\'Granted\\' )|translate\\\"></td><td><a class=text-danger title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=vm.deletePermissionFromUser(item.permission.id,$index)><i class=\\\"icon pe-icon pe-7s-trash f-17\\\"></i></a></td></tr></table></div></pane-body></div></div></div></section></div></div></uib-tab><uib-tab index=3 heading=\\\"{{\\'APP.MODULES.USER.SIGN_UPLOAD\\'|translate}}\\\"><!-- /.permissions --><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h3 class=\\\"module-title pull-right\\\" data-translate=APP.MODULES.USER.SIGN_UPLOAD></h3><br><br><div class=\\\"col-md-5 pull-left\\\"><img id=myimg ng-src={{vm.signUrl}} alt=\\\"امضا بارگذاری نشده است\\\" height=400 width=400></div><div class=\\\"col-md-7 pull-right\\\"><!--<div class=\\\"inline col-md-12 pull-right \\\">--><!--<label\\r\\n                                                   data-translate=\\\"APP.MODULES.USER.SIGN\\\"></label>--><div class=form-group><file-upload class=\\\"form-control inline p-0 b-0\\\" file=vm.attachment.sign data-uploading=vm.uploaded label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><button class=\\\"btn btn-default-alt inline\\\" type=button data-ng-click=vm.cancelAddAttachment() uib-tooltip=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button> <button class=\\\"btn btn-primary-alt inline\\\" type=button data-ng-click=vm.attachFile() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" ng-disabled=!vm.attachment><i class=\\\"fa fa-upload\\\"></i></button></div></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><pane-body></pane-body></div></div></div></section></div></div></uib-tab></uib-tabset></div></div></div>\");\n$templateCache.put(\"app/components/users/user-me.html\",\"<div class=container-fluid><div class=col-xs-12><back-button></back-button></div><div class=row><div class=\\\"module-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=module-title data-translate=APP.MODULES.AUTH.MY_PROFILE></h1></div><div class=module-content><div class=module-content-inner><div class=pane-body><form name=userForm data-ng-submit=vm.update() novalidate><div class=row><!--username--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\"><label for=username data-translate=APP.MODULES.USER.USERNAME></label>: <b id=username data-ng-bind=vm.user.username></b></div><!--name--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\"><label for=name data-translate=APP.MODULES.USER.FULL_NAME></label>: <b id=name data-ng-bind=vm.user.name></b></div><!--level--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\"><label for=level data-translate=APP.MODULES.USER.LEVEL></label>: <b id=level data-ng-bind=vm.user.level|userLevel></b></div><!--economicSection--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\" data-ng-if=\\\"vm.user.level === \\'STAFF\\'\\\"><label for=economicSection data-translate=APP.MODULES.USER.ECONOMIC_SECTION></label>: <b id=economicSection data-ng-bind=vm.user.economicSection.title></b></div><!--province--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\" data-ng-show=\\\"vm.user.level === \\'PROVINCE\\' || vm.user.level === \\'BRANCH\\'\\\"><label for=province data-translate=APP.MODULES.USER.PROVINCE></label>: <b id=province data-ng-bind=vm.user.province.title></b></div><!--branch--><div class=\\\"col-lg-3 col-md-6 col-xs-12 pull-right\\\" data-ng-show=\\\"vm.user.level === \\'BRANCH\\'\\\"><label for=branch data-translate=APP.MODULES.USER.BRANCH></label>: <b id=branch data-ng-bind=vm.user.branch.title></b></div><!--phoneNumber--><div class=\\\"col-lg-4 col-md-6 col-xs-12 pull-right form-group\\\"><label for=phone-number data-translate=APP.SHARE.PHONE_NUMBER></label>: <input class=form-control ng-pattern=vm.telRegex name=phoneNumber id=phone-number data-ng-model=vm.user.phoneNumber></div><!--address--><div class=\\\"col-lg-8 col-md-6 col-xs-12 pull-right form-group\\\"><label for=address data-translate=APP.SHARE.ADDRESS></label>: <input class=form-control type=text name=address id=address data-ng-model=vm.user.address></div></div><div class=row><div class=\\\"col-xs-12 pull-left\\\"><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=userForm.$invalid><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div><br><!--sign--><div class=row><div class=col-xs-12><h3 data-translate=APP.MODULES.USER.SIGN_UPLOAD></h3></div><div class=\\\"col-lg-3 col-md-6 col-xs12 pull-right\\\"><file-upload class=\\\"inline col-xs-8 pull-right\\\" file=vm.attachment.sign data-uploading=vm.uploaded label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><button class=\\\"btn btn-primary-alt inline\\\" type=button ng-click=vm.setSign();addAttachmentForm.$setPristine() title=\\\"{{\\'APP.ACTIONS.UPLOAD\\'|translate}}\\\" ng-disabled=!vm.attachment><i class=\\\"fa fa-upload\\\"></i></button> <button class=\\\"btn btn-default-alt inline\\\" type=button data-ng-click=vm.cancelAddAttachment() title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button></div><div class=\\\"col-lg-3 col-md-6 col-xs12 pull-right\\\"><div data-ng-class=\\\"{\\'danger\\': vm.attachment.sign.size > 7000000}\\\" data-ng-show=vm.attachment.sign>حجم فایل: <span data-ng-bind=vm.attachment.sign.size|fileSize></span></div></div><div class=\\\"col-lg-6 col-md-12 col-xs12 pull-right\\\"><img class=pull-left ng-src=\\\"{{vm.getSignUrl(vm.user)}}?data={{vm.date}}\\\" height=100 alt=\\\"امضا ثبت نشده است\\\"></div></div></form><form name=changePassword data-ng-submit=vm.changePassword(changePassword) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class=\\\"col-lg-4 col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.oldPassword.$invalid &&\\r\\n                                    !changePassword.oldPassword.$pristine}\\\"><span class=red-star>*</span><label for=oldPassword data-translate=APP.MODULES.AUTH.OLD_PASSWORD></label><input class=form-control type=password id=oldPassword name=oldPassword data-ng-model=vm.oldPassword required></div><div class=\\\"col-lg-4 col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.newPassword.$invalid &&\\r\\n                                    !changePassword.newPassword.$pristine}\\\"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class=\\\"col-lg-4 col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.newPasswordRepeat.$invalid &&\\r\\n                                    !changePassword.newPasswordRepeat.$pristine}\\\"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class=\\\"col-xs-12 pull-left\\\"><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=\\\"changePassword.$invalid||(vm.newPassword!=vm.newPasswordRepeat)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/users/users-list.html\",\"<div class=container-fluid><h2 class=view-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.USER.LIST></h1><div class=pull-left><!--<a class=\\\"btn btn-sm btn-primary-alt m-l-1\\\"\\r\\n                               data-ng-click=\\\"showFilters = !showFilters\\\">\\r\\n                                <i class=\\\"fa fa-search\\\"></i>\\r\\n                                <span data-translate=\\\"APP.ACTIONS.SEARCH\\\"></span>\\r\\n                            </a>--> <a class=\\\"btn btn-sm btn-success-alt\\\" data-ui-sref=root.users.user><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.MODULES.USER.ACTIONS.ADD></span></a></div><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\" ng-if=\\\"vm.provinces && vm.roles\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=true><tr class=text-center data-ng-repeat=\\\"user in $data\\\"><td data-title=\\\"\\'APP.SHARE.ENABLE\\'|translate\\\" data-sortable=\\\"\\'isEnable\\'\\\" data-filter=\\\"{enable:\\'select\\'}\\\" data-filter-data=vm.userStatus><toggle data-ng-model=user.enable data-ng-change=vm.changeEnabledUser(user) on=\\\"{{\\'APP.SHARE.ENABLE\\'|translate}}\\\" onstyle=\\\"btn-success vazir\\\" off=\\\"{{\\'APP.SHARE.DISABLE\\'|translate}}\\\" offstyle=\\\"btn-danger vazir\\\"></toggle></td><!--name--><td data-title=\\\"\\'APP.MODULES.USER.FULL_NAME\\'|translate\\\" data-sortable=\\\"\\'name\\'\\\" data-filter=\\\"{name:\\'text\\'}\\\"><a data-ui-sref=\\\"root.users.details({username: user.username})\\\" title=\\\"{{\\'APP.ACTIONS.UPDATE\\'|translate}}\\\"><span data-ng-bind=user.name></span></a></td><!--username--><td data-title=\\\"\\'APP.MODULES.USER.USERNAME\\'|translate\\\" data-sortable=\\\"\\'username\\'\\\" data-filter=\\\"{username:\\'text\\'}\\\"><a data-ui-sref=\\\"root.users.user({username: user.username})\\\" title=\\\"{{\\'APP.ACTIONS.UPDATE\\'|translate}}\\\"><span data-ng-bind=user.username></span></a></td><!--level--><td data-title=\\\"\\'APP.MODULES.USER.LEVEL\\'|translate\\\" data-sortable=\\\"\\'level\\'\\\" data-filter=\\\"{level:\\'select\\'}\\\" data-filter-data=vm.levels data-ng-bind=user.level|userLevel|translate></td><!--province--><td data-title=\\\"\\'APP.MODULES.USER.PROVINCE\\'|translate\\\" data-sortable=\\\"\\'province\\'\\\" data-filter=\\\"{province:\\'select\\'}\\\" data-filter-data=vm.provinces data-ng-bind=user.province.title></td><!--economicSection--><td data-title=\\\"\\'APP.MODULES.USER.ECONOMIC_SECTION\\'|translate\\\" data-sortable=\\\"\\'economicSection\\'\\\" data-filter=\\\"{economicSection:\\'select\\'}\\\" data-filter-data=vm.economicSections data-ng-bind=user.economicSection.name></td><!--roles--><td data-title=\\\"\\'APP.MODULES.USER.ROLES\\'|translate\\\" data-filter=\\\"{role:\\'select\\'}\\\" data-filter-data=vm.roles><div data-ng-repeat=\\\"role in user.roles\\\" data-ng-bind=role.caption class=role></div></td><!--operations--><!--<td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\">\\r\\n                                                <a class=\\\"btn btn-sm text-danger\\\"\\r\\n                                                   title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\"\\r\\n                                                   data-ng-click=\\\"vm.deleteUser(user.username,$index)\\\">\\r\\n                                                    <i class=\\\" icon pe-icon pe-7s-trash f-20\\\"></i>\\r\\n                                                </a>\\r\\n                                            </td>--></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/usersReport/usersReport.html\",\"<div class=container-fluid><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><!-- header --><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.USERS_REPORT.TITLE></h1><div class=clearfix></div></div><!--main area--><div class=module-content><div class=module-content-inner><!--scores table--><div class=\\\"pane-body row screen-only\\\"><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer col-lg-8 col-lg-offset-2\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr><th class=text-center colspan=3 data-translate=APP.MODULES.USERS_REPORT.SCORE_TABLE></th></tr><tr><th class=text-center data-translate=APP.MODULES.USERS_REPORT.ACTION></th><th class=text-center data-translate=APP.MODULES.USERS_REPORT.ACCEPT_WEIGHT></th><th class=text-center data-translate=APP.MODULES.USERS_REPORT.REJECT_WEIGHT></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.items\\\" title={{item.step.id}}><td data-ng-bind=item.step.title></td><td><input class=form-control data-ng-disabled=!vm.isAdmin title=\\\"{{\\'APP.MODULES.USERS_REPORT.ACCEPT_WEIGHT\\'|translate}}\\\" dir=ltr data-ng-model=item.ACCEPT data-ng-change=\\\"vm.save(item, \\'ACCEPT\\')\\\" data-ng-model-options=\\\"{ debounce: 2000 }\\\"></td><td><input class=form-control data-ng-disabled=!vm.isAdmin title=\\\"{{\\'APP.MODULES.USERS_REPORT.REJECT_WEIGHT\\'|translate}}\\\" dir=ltr data-ng-model=item.REJECT data-ng-change=\\\"vm.save(item, \\'REJECT\\')\\\" data-ng-model-options=\\\"{ debounce: 2000 }\\\"></td></tr></table></div></div><!--search form--><div class=\\\"pane-body screen-only\\\"><form class=\\\"dataTables_wrapper dt-bootstrap search-container\\\" name=reportsForm data-ng-submit=vm.getReport()><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.FROM_DATE></label><simple-date data-ng-model=vm.reportParams.fromConfirmDate name=fromConfirmDate></simple-date></div></div><div class=\\\"col-md-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.TO_DATE></label><simple-date data-ng-model=vm.reportParams.toConfirmDate name=toConfirmDate></simple-date></div></div><div class=\\\"col-md-4 pull-right\\\" data-ng-show=vm.isAdmin><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><select class=form-control ng-model=vm.reportParams.province name=reportType ng-options=\\\"province as province.title for province in vm.provinces\\\"></select></div></div><div class=\\\"col-sm-6 col-md-4 pull-right\\\" data-ng-show=vm.isAdmin><div class=form-group><label data-translate=APP.MODULES.USER.USERS></label><ui-select multiple ng-model=vm.selectedUsers theme=bootstrap id=selected-users sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.USER.ACTIONS.SEARCH\\'|translate}}\\\">{{$item.name}} &lt;{{$item.username}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshUsers($select.search) repeat=\\\"user.username as user in vm.users | propsFilter: {name: $select.search, username: $select.search}\\\"><div><span ng-bind-html=\\\"user.name | highlight: $select.search\\\"></span> ( <span ng-bind-html=\\\"user.username | highlight: $select.search\\\"></span> )</div><small><span ng-bind-html=\\\"\\'\\'+user.province.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><div class=col-md-6><div class=form-group><button type=button class=\\\"btn btn-info pull-left m-r-1\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button> <button type=submit class=\\\"btn btn-success pull-left\\\" title=\\\"{{\\'APP.ACTIONS.REPORT_VIEW\\'|translate}}\\\"><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.GET></span></button></div></div></form></div><!--main result--><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable user-report-table-header screen-only\\\" style=\\\"opacity: 0\\\" id=header-table><tr class=text-center><th><div data-translate=APP.MODULES.USERS_REPORT.PERSON id=th1></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.STEPS id=th2></div></th><th data-ng-repeat=\\\"item in vm.items\\\"><div data-ng-bind=item.step.title id=th{{$index+3}}></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_ACCEPT id=th8></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_REJECT id=th9></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SUM_CARTABLE id=th10></div></th><th><div data-translate=APP.MODULES.USERS_REPORT.SCORE id=th11></div></th></tr></table><table class=\\\"hover no-footer row-border dataTable user-report-table\\\" id=main-table><thead><tr class=text-center><th data-translate=APP.MODULES.USERS_REPORT.PERSON></th><th data-translate=APP.MODULES.USERS_REPORT.STEPS></th><th data-ng-repeat=\\\"item in vm.items\\\" data-ng-bind=item.step.title></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_ACCEPT></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_REJECT></th><th data-translate=APP.MODULES.USERS_REPORT.SUM_CARTABLE></th><th data-translate=APP.MODULES.USERS_REPORT.SCORE></th></tr></thead><tbody><tr data-ng-repeat-start=\\\"item in vm.report\\\" class=text-center data-ng-hide=item.hidden ng-class=\\\"{\\'selected\\':item.selected}\\\"><td rowspan=3 class=cursor-pointer data-ng-dblclick=\\\"item.selected = !item.selected\\\" title=\\\"{{\\'Double click for select\\'|translate}}\\\"><span data-ng-bind=\\\"($index+1|pNumber) + \\'- \\'\\\"></span> <span data-ng-bind=item.user.name></span><div ng-if=item.user.province><span data-ng-bind=\\\"\\'(\\'\\\"></span> <span data-ng-bind=role.caption data-ng-repeat-start=\\\"role in item.user.roles\\\"></span> <span data-ng-if=item.user.roles[$index+1] data-ng-repeat-end=\\\"\\\">و </span><span data-ng-if=item.user.roles.length>در </span><span data-ng-bind=item.user.province.title></span> <span data-ng-bind=\\\"\\')\\'\\\"></span></div></td><td class=bg-gray-1 data-translate=APP.MODULES.USERS_REPORT.ACCEPT></td><td class=\\\"cursor-pointer bg-gray-1\\\" data-ng-bind=userScore.accept|pNumber data-ng-click=\\\"vm.showDetails(\\'accept\\', item.user, vm.items[$index].step)\\\" title=\\\"{{item.user.name}}: {{vm.items[$index].step.title}} | تائید = {{vm.items[$index].ACCEPT*userScore.accept|pNumber}}\\\" data-ng-repeat=\\\"userScore in item.userScores track by $index\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-1\\\" data-ng-bind=item.sum.accept|pNumber title=\\\"{{item.user.name}} : مجموع تائيد = {{item.sum.accept|pNumber}}\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-2\\\" data-ng-bind=item.sum.reject|pNumber title=\\\"{{item.user.name}} : مجموع بازگشت = {{item.sum.reject|pNumber}}\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-3\\\" data-ng-bind=item.sum.cartable|pNumber title=\\\"{{item.user.name}} : مجموع  کارتابل = {{item.sum.cartable|pNumber}}\\\"></td><td rowspan=3 data-ng-bind=item.finalScore|number:2|pNumber title=\\\"{{item.user.name}} : مجموع امتیاز = {{item.finalScore|pNumber}}\\\"></td></tr><tr ng-class=\\\"{\\'selected\\':item.selected}\\\" data-ng-hide=item.hidden><td class=bg-gray-2 data-translate=APP.MODULES.USERS_REPORT.REJECT></td><td class=\\\"cursor-pointer bg-gray-2\\\" data-ng-bind=userScore.reject|pNumber data-ng-click=\\\"vm.showDetails(\\'reject\\', item.user, vm.items[$index].step)\\\" title=\\\"{{item.user.name}}:{{vm.items[$index].step.title}} | بازگشت = {{vm.items[$index].REJECT*userScore.reject|pNumber}}\\\" data-ng-repeat=\\\"userScore in item.userScores track by $index\\\"></td><!--<td class=\\\"cursor-pointer bg-gray-2\\\" data-ng-bind=\\\"item.sum.reject|pNumber\\\"\\r\\n                                                title=\\\"{{item.user.name}} : مجموع بازگشت = {{item.sum.reject|pNumber}}\\\"></td>--></tr><tr data-ng-repeat-end=\\\"\\\" ng-class=\\\"{\\'selected\\':item.selected}\\\" data-ng-hide=item.hidden><td class=bg-gray-3 data-translate=APP.MODULES.USERS_REPORT.CARTABLE></td><td class=\\\"cursor-pointer bg-gray-3\\\" data-ng-bind=userScore.cartable|pNumber data-ng-click=\\\"vm.showDetails(\\'cartable\\', item.user, vm.items[$index].step)\\\" title=\\\"{{item.user.name}}:{{vm.items[$index].step.title}} | کارتابل = {{userScore.cartable|pNumber}}\\\" data-ng-repeat=\\\"userScore in item.userScores track by $index\\\"></td><!--<td class=\\\"cursor-pointer bg-gray-3\\\"\\r\\n                                                data-ng-bind=\\\"item.sum.cartable|pNumber\\\"\\r\\n                                                title=\\\"{{item.user.name}} : مجموع  کارتابل = {{item.sum.cartable|pNumber}}\\\"></td>--></tr></tbody><!--<tfoot>--><tr class=text-center data-ng-show=\\\"vm.report.length && !vm.selectedUsers.length\\\"><td rowspan=3 class=cursor-pointer><span data-translate=APP.MODULES.USERS_REPORT.SUM></span></td><td class=bg-gray-11 data-translate=APP.MODULES.USERS_REPORT.ACCEPT></td><td class=\\\"cursor-pointer bg-gray-11\\\" data-ng-bind=vm.sum[item.step.id].accept|pNumber title=\\\"{{\\'APP.MODULES.USERS_REPORT.SUM\\'|translate}}: {{item.step.title}} | تائید = {{vm.sum[item.step.id].accept|pNumber}}\\\" data-ng-repeat=\\\"item in vm.items\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-11\\\" data-ng-bind=vm.sums.accept|pNumber title=\\\"مجموع تائيد  {{vm.sums.accept|pNumber}}\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-22\\\" data-ng-bind=vm.sums.reject|pNumber title=\\\"مجموع بازگشت  {{vm.sums.reject|pNumber}}\\\"></td><td rowspan=3 class=\\\"cursor-pointer bg-gray-33\\\" data-ng-bind=vm.sums.cartable|pNumber title=\\\"مجموع  کارتابل {{vm.sums.cartable|pNumber}}\\\"></td><td rowspan=3 data-ng-bind=vm.sums.averageScore|number:2|pNumber></td></tr><tr data-ng-show=\\\"vm.report.length && !vm.selectedUsers.length\\\"><td class=bg-gray-22 data-translate=APP.MODULES.USERS_REPORT.REJECT></td><td class=\\\"cursor-pointer bg-gray-22\\\" data-ng-bind=vm.sum[item.step.id].reject|pNumber title=\\\"{{\\'APP.MODULES.USERS_REPORT.SUM\\'|translate}}: {{item.step.title}} | بازگشت = {{vm.sum[item.step.id].reject|pNumber}}\\\" data-ng-repeat=\\\"item in vm.items\\\"></td></tr><tr data-ng-show=\\\"vm.report.length && !vm.selectedUsers.length\\\"><td class=bg-gray-33 data-translate=APP.MODULES.USERS_REPORT.CARTABLE></td><td class=\\\"cursor-pointer bg-gray-33\\\" data-ng-bind=vm.sum[item.step.id].cartable|pNumber title=\\\"{{\\'APP.MODULES.USERS_REPORT.SUM\\'|translate}}: {{item.step.title}} | کارتابل = {{vm.sum[item.step.id].cartable|pNumber}}\\\" data-ng-repeat=\\\"item in vm.items\\\"></td></tr><!--</tfoot>--></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/directives/back-button/back-button.html\",\"<div class=\\\"row m-b-1 m-t-1 back-button-container\\\"><div class=col-xs-12><i class=\\\"icon pe-icon pe-7s-back f-17 f-bold mirrored cursor-pointer\\\" data-ng-attr-title=\\\"{{\\'APP.ACTIONS.BACK\\'|translate}}\\\"></i><!--<button class=\\\"btn btn-default-alt\\\" type=\\\"button\\\">\\r\\n            <i class=\\\"icon pe-icon pe-7s-back f-17 f-bold mirrored\\\"></i>\\r\\n            <span data-translate=\\\"APP.ACTIONS.BACK\\\"></span>\\r\\n        </button>--></div></div>\");\n$templateCache.put(\"app/directives/confirm/confirm-tpl.html\",\"<div class=modal-header ng-if=data.title><h5 class=modal-title data-ng-bind=data.title></h5></div><div class=\\\"modal-body text-center\\\"><span class=text-center data-ng-bind=\\\"((data.text||\\'APP.MESSAGES.SURE\\')|translate)|pNumber\\\"></span><br><br><div class=text-center><button class=\\\"btn btn-sm btn-info\\\" ng-click=ok() data-ng-bind=data.ok></button> <button class=\\\"btn btn-sm btn-danger\\\" ng-click=cancel() data-ng-bind=data.cancel></button></div></div>\");\n$templateCache.put(\"app/directives/file-upload/file-upload.html\",\"<span class=\\\"btn btn-default fileinput-button\\\"><i class=\\\"fa fa-file-o\\\"></i> <span data-ng-bind=\\\"(file.name || label)| limitTo:15\\\"></span><!-- The file input field used as target for the file upload widget --> <input class=fileupload name=file type=file accept=\\\".jpg, .png, .doc, .docx, .xls, .xlsx, .pdf, .zip, .rar\\\" data-file-model=file> <i class=\\\"fa fa-spinner fa-spin\\\" data-ng-if=uploading></i> </span>\");\n$templateCache.put(\"app/directives/hierarchy/hierarchy.html\",\"<div><span ng-repeat=\\\"node in parents\\\" ng-bind=\\\"node[caption] + \\' > \\'\\\" ng-click=prone($index) style=\\\"margin: 10px\\\" class=pull-right></span><select ng-options=\\\"child as child[caption] for child in model[children]\\\" data-ng-model=treeModel ng-change=addChild() id={{id}} class={{class}} ng-show=\\\"model[children] && model[children].length\\\"></select></div>\");\n$templateCache.put(\"app/directives/ng-table/command-buttons.html\",\"<span><a class=\\\"btn btn-sm text-warning\\\" title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\" data-ng-click=vm.cancel() data-ng-show=vm.toggle><span class=\\\"icon pe-icon pe-7s-close f-20\\\"></span> </a><a class=\\\"btn btn-sm text-success\\\" title=\\\"{{\\'APP.ACTIONS.OK\\'|translate}}\\\" data-ng-click=vm.edit() data-ng-show=vm.toggle data-ng-class=\\\"{\\'disabled\\':vm.disabled}\\\" data-ng-disabled=vm.disabled><span class=\\\"icon pe-icon pe-7s-check f-20\\\"></span> </a><a class=\\\"btn btn-sm text-info\\\" title=\\\"{{\\'APP.ACTIONS.UPDATE\\'|translate}}\\\" data-ng-click=vm.toggled() data-ng-show=\\\"!vm.toggle && vm.hasEdit\\\"><span class=\\\"icon pe-icon pe-7s-note f-20\\\"></span> </a><a class=\\\"btn btn-sm text-danger\\\" title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=vm.delete() data-ng-disabled=vm.disabled data-ng-show=\\\"!vm.toggle && vm.hasDelete\\\"><span class=\\\"icon pe-icon pe-7s-trash f-20\\\"></span> </a></span>\");\n$templateCache.put(\"app/directives/ng-table/pagination-tpl.html\",\"<div class=\\\"ng-cloak ng-table-pager\\\" ng-if=params.data.length style=\\\"margin: 10px 1px\\\"><ul class=\\\"pagination ng-table-pagination pull-left\\\"><li ng-class=\\\"{\\'disabled\\': !page.active && !page.current, \\'active\\': page.current}\\\" ng-repeat=\\\"page in pages\\\" ng-switch=page.type><a ng-switch-when=prev ng-click=params.page(page.number) href=\\\"\\\">&raquo;</a> <a ng-switch-when=first ng-click=params.page(page.number) href=\\\"\\\"><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=page ng-click=params.page(page.number) href=\\\"\\\"><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=more ng-click=params.page(page.number) href=\\\"\\\">&#8230;</a> <a ng-switch-when=last ng-click=params.page(page.number) href=\\\"\\\"><span ng-bind=page.number|pNumber></span> </a><a ng-switch-when=next ng-click=params.page(page.number) href=\\\"\\\">&laquo;</a></li></ul><span ng-if=\\\"params.settings().counts.length && params.total() > 0\\\" class=\\\"ng-table-counts btn-group btn-group-sm\\\"><button ng-repeat=\\\"count in params.settings().counts\\\" type=button ng-class=\\\"{\\'active\\':params.count()==count}\\\" ng-click=params.count(count) class=\\\"btn btn-default\\\"><span ng-bind=count|pNumber></span></button></span></div>\");\n$templateCache.put(\"app/directives/simpleDate/simple-date.html\",\"<input class=form-control type=text dir=ltr data-ng-attr-title=\\\"{{min ? \\'مقدار این فیلد باید بعد از تاریخ \\' + (min|jDate) + \\' باشد\\' : \\'\\'}}\\\" ui-mask=9999/99/99 model-view-value=true ui-validate=\\\"{invalidDate : \\'isValidDate($value)\\' }\\\">\");\n$templateCache.put(\"app/main/footer/footer.html\",\"<footer id=footer class=\\\"footer screen-only\\\" style=margin-right:180px><!--<div class=\\\"container\\\">\\r\\n        <img class=\\\"img-responsive header-background\\\" width=\\\"70\\\"\\r\\n             src=\\\"../../assets/images/samat.png\\\">\\r\\n        <div class=\\\"row copyright\\\">\\r\\n            <i class=\\\"fa fa-copyright\\\"></i>\\r\\n            <span data-translate=\\\"APP.MAIN.FOOTER\\\"></span>\\r\\n        </div>\\r\\n    </div>--><div><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=\\\"module module-projects-overview\\\" style=\\\"height: 14vh;padding: 1vh; margin-bottom: 0\\\"><div class=\\\"module-inner p-t-0 p-b-0\\\"><div class=module-content><div class=\\\"module-content-inner p-t-0 p-b-0\\\"><pane-body><img class=\\\"img-responsive header-background\\\" width=70 src=../../assets/images/samat.png><div class=\\\"row copyright\\\"><i class=\\\"fa fa-copyright\\\"></i> <span data-translate=APP.MAIN.FOOTER></span></div></pane-body></div></div></div></section></div></div></div></footer>\");\n$templateCache.put(\"app/main/header/header.html\",\"<header class=\\\"header screen-only\\\"><div class=\\\"btn-group user-section\\\" uib-dropdown dropdown-append-to-body style=\\\"position: fixed\\\"><div id=btn-append-to-body class=user-name uib-dropdown-toggle><span data-ng-bind=headerVm.user.name></span> <span class=pe-7s-user></span></div><ul class=dropdown-menu uib-dropdown-menu role=menu aria-labelledby=btn-append-to-body><li role=menuitem><a data-translate=APP.MODULES.AUTH.MY_PROFILE ui-sref=root.users.me()></a></li><li role=menuitem><a><span data-translate=APP.MODULES.AUTH.MY_ROLES></span>:</a></li><li role=menuitem data-ng-repeat=\\\"role in headerVm.user.roles\\\"><a><span class=\\\"icon pe-icon pe-7s-smile f-17\\\"></span> <span data-ng-bind=role.caption></span></a></li><li role=menuitem data-ng-show=!headerVm.user.roles.length><a class=text-warning data-translate=APP.MODULES.AUTH.NO_ROLE></a></li><li class=divider></li><li role=menuitem><a ng-click=headerVm.logout()><span class=\\\"icon pe-icon pe-7s-power f-17\\\"></span> <span data-translate=APP.MODULES.AUTH.LOGOUT></span> </a></li></ul></div><div class=\\\"branding float-left\\\"><h1 class=\\\"logo text-center p-1\\\"><a href=index.html><!--<img class=\\\"logo-icon\\\" src=\\\"assets/images/logo-icon.svg\\\" alt=\\\"icon\\\"/>--> <img src=../../../assets/images/boreder-logo.png><br><small class=logo-text>سامانه نظارت بر اعطای تسهیلات</small></a></h1></div><div class=topbar ng-if=false><h1 class=\\\"inline-block m-r-2 m-t-1\\\"></h1><div class=\\\"navbar-tools m-t-1\\\"><!-- Simple dropdown --><div uib-dropdown on-toggle=toggled(open) ng-if=\\\"getMedia(\\'xl\\') || getMedia(\\'lg\\') || getMedia(\\'md\\')\\\"><a href id=simple-dropdown uib-dropdown-toggle><i class=\\\"icon pe-icon pe-7s-user f-17\\\"></i> <span data-ng-bind=headerVm.user.name>loading....</span> <i class=\\\"fa fa-caret-down\\\"></i></a><ul class=dropdown-menu uib-dropdown-menu aria-labelledby=simple-dropdown><li><a ng-click=headerVm.logout() uib-tooltip=خروج><span class=\\\"icon pe-icon pe-7s-power f-17\\\"></span> <span>خروج</span></a></li></ul></div><a class=\\\"btn btn-default-alt\\\" data-ng-click=headerVm.logout() ng-if=\\\"getMedia(\\'xs\\') || getMedia(\\'sm\\')\\\"><span class=\\\"icon pe-icon pe-7s-power f-17 c-white\\\"></span> <span>خروج</span></a></div></div></header>\");\n$templateCache.put(\"app/main/sidebar/sidebar.html\",\"<div class=main-nav-wrapper ng-cloak ng-style=calculatedNavWrapperStyle style=\\\"-webkit-transition: min-height 2s; -moz-transition: min-height 2s;-ms-transition: min-height 2s;-o-transition: min-height 2s;transition: min-height 2s\\\"><!-- and Alan would kill me :D --><nav id=main-nav class=main-nav><ul id=menu ng-if=sideVm.loaded><li class=user-item><a data-ng-click=\\\"sideVm.signOutToggle = !sideVm.signOutToggle\\\"><!--<i class=\\\"icon pe-icon pe-7s-user f-17\\\"></i>--> <span class=nav-label><span data-ng-bind=\\\"sideVm.user.name + \\' (\\' \\\"></span> <span data-ng-bind=\\\"\\'ستاد\\'\\\" ng-if=\\\"sideVm.user.level === \\'STAFF\\'\\\"></span> <span data-ng-bind=sideVm.user.province.title ng-if=\\\"sideVm.user.level === \\'PROVINCE\\'\\\"></span> <span data-ng-bind=sideVm.user.branch.title ng-if=\\\"sideVm.user.level === \\'BRANCH\\'\\\"></span> <span data-ng-bind=\\\"\\')\\'\\\"></span> </span><span class=\\\"icon pe-icon pe-7s-user f-20 pull-left\\\"></span></a><ul class=sub-menu data-uib-collapse=sideVm.signOutToggle><li><a ng-click=headerVm.logout() uib-tooltip=خروج><span class=\\\"icon pe-icon pe-7s-power f-17\\\"></span> <span>خروج</span></a></li></ul></li><li class=divider></li><li data-ui-sref-active=active data-ng-repeat=\\\"item in sideVm.data.items\\\" data-ng-show=\\\"sideVm.hasRole(item.authorities) || sideVm.hasPermission(item.permissions)\\\"><a data-ng-if=!item.state data-ng-click=sideVm.check($index)><span class={{item.icon}}></span> <span class=nav-label data-ng-bind=item.caption|translate></span> <span class=nav-label data-ng-show=\\\"item.params.count!==undefined\\\" data-ng-bind=\\\"\\'(\\' +(item.params.count|pNumber)+\\')\\'\\\"></span> <span class=\\\"fa arrow\\\" data-ng-show=item.children.length></span> </a><a data-ng-if=item.state data-ui-sref={{item.state}}({{item.params}}) data-ng-click=sideVm.check($index)><span class={{item.icon}}></span> <span class=nav-label data-ng-bind=item.caption|translate></span> <span class=nav-label data-ng-show=\\\"item.params.count!==undefined\\\" data-ng-bind=\\\"\\'(\\' +(item.params.count|pNumber)+\\')\\'\\\"></span> <span class=\\\"fa arrow\\\" data-ng-show=item.children.length></span> </a><!--nav-second-level--><ul class=sub-menu data-uib-collapse=\\\"sideVm.collapseVar!=$index\\\"><li data-ui-sref-active=active data-ng-repeat=\\\"field in item.children\\\" data-ng-show=\\\"sideVm.hasRole(field.authorities) || sideVm.hasPermission(field.permissions)\\\"><a data-ng-if=!field.state data-ng-click=sideVm.multiCheck($index)><span class={{field.icon}}></span> <span class=nav-label data-ng-bind=field.caption|translate></span> <span class=nav-label data-ng-show=\\\"field.params.count!==undefined\\\" data-ng-bind=\\\"\\'(\\' +(field.params.count|pNumber)+\\')\\'\\\"></span> <span class=\\\"fa arrow\\\" data-ng-show=field.children.length></span> </a><a data-ng-if=field.state data-ui-sref={{field.state}}({{field.params}}) data-ng-click=sideVm.multiCheck($index)><i class={{field.icon}}></i> <span class=nav-label data-ng-bind=field.caption|translate></span> <span class=nav-label data-ng-show=\\\"field.params.count!==undefined\\\" data-ng-bind=\\\"\\'(\\' +(field.params.count|pNumber)+\\')\\'\\\"></span> <span class=\\\"fa arrow\\\" data-ng-show=field.children.length></span> </a><!--nav-third-level--><ul class=\\\"nav nav-third-level\\\" data-uib-collapse=\\\"sideVm.multiCollapseVar!=$index\\\"><li data-ui-sref-active=active data-ng-repeat=\\\"child in field.children\\\"><a data-ui-sref={{child.state}}({{child.params}})><i class={{child.icon}}></i> <span data-ng-bind=child.caption|translate></span></a></li></ul><!-- /.nav-third-level --></li></ul><!-- /.nav-second-level --></li></ul></nav></div>\");\n$templateCache.put(\"app/components/auth/errors/401.html\",\"<section id=error404-wrapper class=section><div class=container><div class=row><div class=\\\"col-md-6 wrapper-1\\\"><div class=details401><h3 data-translate=APP.ERRORS.UNAUTHORIZED></h3><a class=\\\"btn btn-flat flat-color\\\" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class=\\\"col-md-6 wrapper-1\\\"><div class=error401><span class=huge>401</span></div></div></div></div></section>\");\n$templateCache.put(\"app/components/auth/errors/404.html\",\"<section id=error404-wrapper class=section><div class=container><div class=row><div class=\\\"col-md-6 wrapper-1\\\"><div class=details404><h3 data-translate=APP.ERRORS.NOT_FOUND></h3><a class=\\\"btn btn-flat flat-color\\\" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class=\\\"col-md-6 wrapper-1\\\"><div class=error404><span class=huge>404</span></div></div></div></div></section>\");\n$templateCache.put(\"app/components/auth/errors/500.html\",\"<section id=error404-wrapper class=section><div class=container><div class=row><div class=\\\"col-md-6 wrapper-1\\\"><div class=details500><h3 data-translate=APP.ERRORS.INTERNAL_SERVER_ERROR></h3><a class=\\\"btn btn-flat flat-color\\\" data-ui-sref=root.home><span data-translate=APP.MAIN.BACK_HOME></span></a></div></div><div class=\\\"col-md-6 wrapper-1\\\"><div class=error401><span class=huge>500</span></div></div></div></div></section>\");\n$templateCache.put(\"app/components/auth/login/login.html\",\"<div class=container><div><div class=\\\"col-md-4 col-sm-3 col-xs-1\\\"></div><div class=\\\"col-md-4 col-sm-6 col-xs-10\\\"><div class=\\\"login-panel panel panel-default m-t-5\\\"><div ng-show=!vm.showChangPass class=panel-body><img class=\\\"img-responsive login-logo\\\" src=../../../../assets/images/tt-bank-2.png><h3 class=text-center data-translate=APP.MAIN.TITLE></h3><form role=form name=loginForm data-ng-submit=vm.onSubmit() novalidate><fieldset><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            loginForm.username.$invalid&&!loginForm.username.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.USERNAME></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.USERNAME\\'|translate}}\\\" name=username type=text ng-pattern=\\\"/^[\\\\w -]*$/\\\" data-ng-model=vm.username tabindex=1 autofocus required></div><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            loginForm.password.$invalid&&!loginForm.password.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.PASSWORD\\'|translate}}\\\" name=password type=password tabindex=2 data-ng-model=vm.password required></div><!--captcha form--><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                                loginForm.captcha.$invalid&&!loginForm.captcha.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.CAPTCHA></label><img style=\\\"width: 200px; margin-bottom: 15px\\\" ng-src=\\\"{{vm.captchaUrl}}?time={{vm.date}}\\\"> <button class=\\\"btn inline margin-top-sm\\\" type=button ng-click=vm.resetCaptcha() tabindex=4 title=\\\"{{\\'APP.ACTIONS.RESET_CAPTCHA\\'|translate}}\\\"><i class=\\\"icon pe-icon pe-7s-refresh f-17\\\"></i></button> <input class=\\\"form-control ltr\\\" placeholder=\\\"{{\\'APP.MODULES.AUTH.CAPTCHA\\'|translate}}\\\" name=captcha autocomplete=off ng-pattern=\\\"/^[\\\\w -]*$/\\\" type=text tabindex=3 data-ng-model=vm.userTypeCaptcha required></div><!-- Change this to a button or input when using this as a form --> <button type=submit class=\\\"btn btn-primary btn-block\\\" data-ng-disabled=loginForm.$invalid><span data-translate=APP.MODULES.AUTH.LOGIN></span></button></fieldset><br><br><div class=\\\"col-md-12 text-center\\\"><span data-ng-if=vm.version><b>(شماره نسخه : {{vm.version|pNumber}})</b></span></div></form></div><div ng-show=vm.showChangPass class=panel-body><img class=\\\"img-responsive login-logo\\\" src=../../../../assets/images/tt-bank-2.png><h3 class=text-center data-translate=APP.MAIN.TITLE></h3><form name=changePassword data-ng-submit=vm.changeSecurePassword(changePassword) novalidate><fieldset><legend data-translate=APP.MODULES.AUTH.RESET_PASSWORD></legend><!--new password--><div class=row><div class=\\\"col-lg-12 col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.oldPassword.$invalid &&\\r\\n                                    !changePassword.oldPassword.$pristine}\\\"><span class=red-star>*</span><label for=oldPassword data-translate=APP.MODULES.AUTH.OLD_PASSWORD></label><input class=form-control type=password id=oldPassword name=oldPassword data-ng-model=vm.oldPassword required></div><div class=\\\"col-lg-12 col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.newPassword.$invalid &&\\r\\n                                    !changePassword.newPassword.$pristine}\\\"><span class=red-star>*</span><label for=newPassword data-translate=APP.MODULES.AUTH.NEW_PASSWORD></label><input class=form-control type=password id=newPassword name=newPassword data-ng-model=vm.newPassword required></div><div class=\\\"col-lg-12 col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':changePassword.newPasswordRepeat.$invalid &&\\r\\n                                    !changePassword.newPasswordRepeat.$pristine}\\\"><span class=red-star>*</span><label for=newPasswordRepeat data-translate=APP.MODULES.AUTH.NEW_PASSWORD_REPEAT></label><input class=form-control type=password id=newPasswordRepeat name=newPasswordRepeat data-ng-model=vm.newPasswordRepeat required></div></div><div class=row><div class=\\\"col-xs-12 pull-left\\\"><div class=pull-left><button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-disabled=\\\"changePassword.$invalid||(vm.newPassword!=vm.newPasswordRepeat)\\\"><span data-translate=APP.ACTIONS.SUBMIT></span></button></div></div></div></fieldset></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/auth/forget-pass/forget-pass.html\",\"<div class=container><div class=row><div class=\\\"col-md-4 col-md-offset-4\\\"><div class=\\\"login-panel panel panel-default\\\"><div class=panel-heading><h3 class=panel-title data-translate=APP.MODULES.AUTH.FORGET_PASSWORD></h3></div><div class=panel-body><form role=form name=forgetPassForm novalidate><fieldset><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            forgetPassForm.username.$invalid&&!forgetPassForm.username.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.USERNAME></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.USERNAME\\'|translate}}\\\" name=username type=text data-ng-model=vm.user.username autofocus required></div><!-- Change this to a button or input when using this as a form --> <button class=\\\"btn btn-info btn-block\\\" type=submit data-ng-disabled=forgetPassForm.$invalid><span data-translate=APP.ACTIONS.SEND></span></button> <a class=\\\"btn btn-link\\\" data-ui-sref=login><span data-translate=APP.MODULES.AUTH.LOGIN></span> </a><a class=\\\"btn btn-link\\\" data-ui-sref=register><span data-translate=APP.MODULES.AUTH.REGISTER></span></a></fieldset></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/auth/register/register.html\",\"<div class=container><div class=row><div class=\\\"col-md-4 col-md-offset-4\\\"><div class=\\\"login-panel panel panel-default\\\"><div class=panel-heading><h3 class=panel-title data-translate=APP.MODULES.AUTH.REGISTER></h3></div><div class=panel-body><form role=form name=registerForm novalidate><fieldset><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            registerForm.email.$invalid&&!registerForm.email.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.EMAIL></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.EMAIL\\'|translate}}\\\" name=email type=email data-ng-model=vm.user.email autofocus required></div><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            registerForm.password.$invalid&&!registerForm.password.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.PASSWORD></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.PASSWORD\\'|translate}}\\\" name=password type=password data-ng-model=vm.user.password required></div><div class=form-group data-ng-class=\\\"{\\'has-error\\':\\r\\n                            registerForm.passwordRepeat.$invalid&&!registerForm.passwordRepeat.$pristine }\\\"><label data-translate=APP.MODULES.AUTH.PASSWORD_REPEAT></label><input class=form-control placeholder=\\\"{{\\'APP.MODULES.AUTH.PASSWORD_REPEAT\\'|translate}}\\\" name=passwordRepeat type=password data-ng-model=vm.user.passwordRepeat required></div><!-- Change this to a button or input when using this as a form --> <button class=\\\"btn btn-info btn-block\\\" type=submit data-ng-disabled=registerForm.$invalid><span data-translate=APP.MODULES.AUTH.REGISTER></span></button> <a class=\\\"btn btn-link\\\" data-ui-sref=login><span data-translate=APP.MODULES.AUTH.LOGIN></span> </a><a class=\\\"btn btn-link\\\" data-ui-sref=forgetPass><span data-translate=APP.MODULES.AUTH.FORGET_PASSWORD></span></a></fieldset></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/auth/reset-pass/reset-pass.html\",\"<div class=container><div class=row><div class=\\\"col-md-4 col-md-offset-4\\\"><div class=\\\"login-panel panel panel-default\\\"><div class=panel-heading><h3 class=panel-title>Please Sign In</h3></div><div class=panel-body><form role=form><fieldset><div class=form-group><input class=form-control placeholder=\\\"old Password\\\" name=oldPass type=password></div><div class=form-group><input class=form-control placeholder=Password name=newPass type=password></div><div class=form-group><input class=form-control placeholder=Password name=reNewPass type=password></div><!-- Change this to a button or input when using this as a form --> <button class=\\\"btn btn-lg btn-info btn-block\\\" type=submit><span>ارسال</span></button> <a class=\\\"btn btn-link\\\" ui-sref=login><span>ورود</span> </a><a class=\\\"btn btn-link\\\" ui-sref=register><span>ثبت نام</span> </a><a class=\\\"btn btn-link\\\" ui-sref=forgetPass><span>فراموشی گذرواژه</span></a></fieldset></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/contract/add-monitoring-modal/add-monitoring.html\",\"<div class=modal-header><!--<a class=\\\"pull-left btn btn-success\\\" data-ng-click=\\\"AddMonitoring.ok()\\\">--><!--تایید مقصد--><!--</a>--><h3 class=modal-title data-translate=APP.MODULES.CONTRACT.MONITORING.ADD_MONITORING></h3></div><div class=modal-body><form action=\\\"\\\" class=form><div class=\\\"row text-center\\\" data-ng-show=\\\"AddMonitoring.loading || !AddMonitoring.teamHeads.length || !AddMonitoring.observers.length\\\"><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" class=centered height=50></div><div class=row data-ng-hide=\\\"AddMonitoring.loading || !AddMonitoring.teamHeads.length || !AddMonitoring.observers\\\"><!--level --><div data-ng-if=AddMonitoring.canSetLevel class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label for=level data-translate=APP.MODULES.MONITORING.LEVEL></label><select id=level class=form-control data-ng-options=\\\"level.value as level.caption for level in AddMonitoring.levels\\\" data-ng-model=AddMonitoring.level></select></div><!--first expert--><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_EXPERT></label><ui-select data-ng-model=AddMonitoring.firstExpert ng-disabled=AddMonitoring.isBranch><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices group-by=AddMonitoring.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" repeat=\\\"user in AddMonitoring.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><!--second expert (omitted for branch level)--><div class=\\\"form-group col-sm-12 pull-right\\\" data-ng-hide=AddMonitoring.isBranch><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.SECOND_EXPERT></label><ui-select data-ng-model=AddMonitoring.secondExpert><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices group-by=AddMonitoring.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" repeat=\\\"user in AddMonitoring.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\" ui-disable-choice=\\\"user.username == AddMonitoring.firstExpert.username\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><!--team head (just for staff level)--><div class=\\\"form-group col-sm-12 pull-right\\\" data-ng-if=\\\"AddMonitoring.level === \\'STAFF\\'\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></label><ui-select data-ng-model=AddMonitoring.teamHead><ui-select-match allow-clear=false placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind=\\\"\\'( \\' + $select.selected.economicSection.name + \\' )\\'\\\"></small>--></span></ui-select-match><ui-select-choices repeat=\\\"user in AddMonitoring.teamHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><!--<small data-ng-bind-html=\\\"user.economicSection.name\\\"></small>--></ui-select-choices></ui-select></div><!--team head (just for staff level)--><div class=\\\"form-group col-sm-12 pull-right\\\" data-ng-if=\\\"AddMonitoring.level === \\'STAFF\\'\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.APPROVER></label><ui-select data-ng-model=AddMonitoring.staffApproverUsername><ui-select-match allow-clear=false placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind=\\\"\\'( \\' + $select.selected.economicSection.name + \\' )\\'\\\"></small>--></span></ui-select-match><ui-select-choices repeat=\\\"user in AddMonitoring.staffApprovers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><!--<small data-ng-bind-html=\\\"user.economicSection.name\\\"></small>--></ui-select-choices></ui-select></div><div class=\\\"col-md-12 col-xs-12 pull-right form-group\\\"><label data-translate=APP.SHARE.MESSAGE for=firstDescription></label>(<small>حداکثر 200 حرف </small>)<textarea class=form-control style=\\\"resize: none\\\" id=firstDescription name=firstDescription data-ng-model=AddMonitoring.firstDescription maxlength=200></textarea></div><!--action buttons--><div class=\\\"form-group col-sm-12 pull-right\\\"><button class=\\\"pull-left btn btn-success\\\" data-ng-click=AddMonitoring.ok() data-ng-disabled=\\\"!AddMonitoring.firstExpert || (AddMonitoring.level === \\'STAFF\\' && !AddMonitoring.teamHead)\\\"><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class=\\\"pull-left btn btn-default m-l-1\\\" data-ng-click=AddMonitoring.cancel()><i class=\\\"fa fa-remove\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></form></div>\");\n$templateCache.put(\"app/components/contract/contract-details-modal/contract-details-modal.html\",\"<div class=modal-header><a class=pull-left ng-show=modalVm.isModal data-ng-click=modalVm.close()><i class=\\\"fa fa-close screen-only\\\"></i></a><h3 class=plan-title data-translate=APP.MODULES.CONTRACT.CONTRACT_DETAILS></h3><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-show=!modalVm.toggleAdd data-ng-if=!modalVm.fromMonitoring data-ng-disabled=\\\"!modalVm.teamHeads.length || !modalVm.observers.length\\\" data-ng-click=\\\"modalVm.toggleAdd=!modalVm.toggleAdd\\\"><span class=\\\"icon pe-icon f-17 f-bold\\\" data-ng-class=\\\"{\\'pe-7s-add-user\\':modalVm.teamHeads.length && modalVm.observers.length, \\'pe-7s-hourglass\\':!modalVm.teamHeads.length || !modalVm.observers.length}\\\"></span> <span data-translate=APP.MODULES.CONTRACT.ADD_MONITORING></span></button> <button class=\\\"btn btn-info-alt\\\" data-ng-hide=modalVm.fromMonitoring onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button> <a class=\\\"btn btn-info-alt\\\" data-ng-show=modalVm.fromMonitoring target=_blank ui-sref=\\\"root.contract-details({contractId: modalVm.contractId})\\\"><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></a></div></div><div class=\\\"modal-body screen-only\\\" data-ng-show=modalVm.toggleAdd><div class=row><div class=\\\"form-group col-md-6 pull-right\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_EXPERT></label><ui-select data-ng-model=modalVm.firstExpert><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices group-by=modalVm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" repeat=\\\"user in modalVm.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class=\\\"form-group col-md-6 pull-right\\\" data-ng-hide=modalVm.isBranch><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.SECOND_EXPERT></label><ui-select data-ng-model=modalVm.secondExpert><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices group-by=modalVm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" repeat=\\\"user in modalVm.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\" ui-disable-choice=\\\"user.username == modalVm.firstExpert.username\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></div><div class=\\\"form-group col-md-6 pull-right\\\" data-ng-if=\\\"modalVm.currentUser.level === \\'STAFF\\'\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></label><ui-select data-ng-model=modalVm.teamHead><ui-select-match allow-clear=false placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b><!--<small data-ng-bind=\\\"\\'( \\' + $select.selected.economicSection.name + \\' )\\'\\\"></small>--></span></ui-select-match><ui-select-choices repeat=\\\"user in modalVm.teamHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div data-ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><!--<small data-ng-bind-html=\\\"user.economicSection.name\\\"></small>--></ui-select-choices></ui-select></div><div class=\\\"form-group col-md-6 pull-right\\\"><label class=control-label data-translate=APP.MODULES.CONTRACT.MONITORING.FIRST_DESCRIPTION></label><textarea class=form-control placeholder=\\\"توضیحات شما ...\\\" name=description id=description cols=30 rows=5 data-ng-model=modalVm.firstDescription></textarea></div><div class=\\\"form-group col-md-6 pull-right\\\"><button class=\\\"btn btn-default col-xs-5 m-t-2\\\" data-ng-click=modalVm.cancelAdd()><i class=\\\"fa fa-remove\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class=\\\"btn btn-success col-xs-5 col-xs-offset-2 m-t-2\\\" data-ng-click=modalVm.addMonitoring() data-ng-disabled=\\\"!modalVm.firstExpert || (modalVm.currentUser.level === \\'STAFF\\' && !modalVm.teamHead)\\\"><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button></div><div class=\\\"col-xs-12 text-danger\\\" data-translate=\\\"no user in area\\\" ng-show=!modalVm.observers.length></div></div></div><div class=modal-body><div class=\\\"row contract-container\\\"><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.NUMBER></label>: <span style=\\\"display: inline\\\" name=contractNumber data-ng-bind=modalVm.contract.number|pNumber></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DIRECTIVE_NUMBER></label>: <span data-ng-bind=modalVm.contract.directiveNumber></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT></label>: <span style=\\\"display: inline\\\" dng-class=\\\"{empty: !modalVm.contract.totalAmount}\\\" data-ng-bind=\\\"modalVm.contract.totalAmount | pCurrency |pNumberR\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REPORT_DATE></label>: <span style=\\\"display: inline\\\" name=contractReportDate dng-class=\\\"{empty: !modalVm.contract.reportDate}\\\" data-ng-bind=\\\"modalVm.contract.reportDate | jDate |pNumber\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE></label>: <span style=\\\"display: inline\\\" name=contractDate ng-class=\\\"{empty: !modalVm.contract.contractDate}\\\" data-ng-bind=\\\"modalVm.contract.contractDate | jDate |pNumber\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_DATE></label>: <span style=\\\"display: inline\\\" name=contractDate ng-class=\\\"{empty: !modalVm.contract.installmentDate}\\\" data-ng-bind=\\\"modalVm.contract.installmentDate | jDate |pNumber\\\"></span></div></div><div class=\\\"col-xs-12 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TYPE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.contractType}\\\" data-ng-bind=\\\"modalVm.contract.contractType || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-12 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TITLE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.title}\\\" data-ng-bind=\\\"modalVm.contract.title || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PROVINCE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.province}\\\" data-ng-bind=\\\"modalVm.contract.province.title || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.BRANCH></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.branch}\\\" data-ng-bind=\\\"modalVm.contract.branch.title || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.COMPANY_NAME></label>: <span style=\\\"display: inline\\\" name=contractCompanyName ng-class=\\\"{empty: !modalVm.contract.companyName}\\\" data-ng-bind=\\\"modalVm.contract.companyName || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PLAN_TYPE></label>: <span style=\\\"display: inline\\\" name=contractPlanType ng-class=\\\"{empty: !modalVm.contract.planType}\\\" data-ng-bind=\\\"(modalVm.contract.planType) || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_SECTION></label>: <span style=\\\"display: inline\\\" name=contractEconomicSection ng-class=\\\"{empty: !modalVm.contract.economicSection}\\\" data-ng-bind=\\\"modalVm.contract.economicSection.name || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INTEREST_RATE></label>: <span style=\\\"display: inline\\\" name=contractInterestRate ng-class=\\\"{empty: !modalVm.contract.interestRate}\\\" data-ng-bind=\\\"(modalVm.contract.interestRate|pPercent) || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_CODE_NAME></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.economicCodeName}\\\" data-ng-bind=\\\"(modalVm.contract.economicCodeName) || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ECONOMIC_CODE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.economicCode}\\\" data-ng-bind=\\\"modalVm.contract.economicCode || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_TITLE></label>: <span style=\\\"display: inline\\\" name=contractInterestRate ng-class=\\\"{empty: !modalVm.contract.title}\\\" data-ng-bind=\\\"(modalVm.contract.title) || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CREDIT_SUPPLY_RESOURCE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.creditSupplyResourceText}\\\" data-ng-bind=\\\"(modalVm.contract.creditSupplyResourceText)|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_DATE></label>: <span style=\\\"display: inline\\\" name=contractInstallmentDate ng-class=\\\"{empty: !modalVm.contract.installmentDate}\\\" data-ng-bind=\\\"(modalVm.contract.installmentDate|jDate |pNumber )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_INTERVAL></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.installmentInterval}\\\" data-ng-bind=\\\"(modalVm.contract.installmentInterval|pNumber )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.INSTALLMENT_NUMBER></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.installmentsNumber}\\\" data-ng-bind=\\\"(modalVm.contract.installmentsNumber|pNumber )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.remainingInCurrent}\\\" data-ng-bind=\\\"(modalVm.contract.remainingInCurrent|pCurrency:\\'R\\' )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.remainingInNonCurrent}\\\" data-ng-bind=\\\"(modalVm.contract.remainingInNonCurrent|pCurrency:\\'R\\' )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.RESPIRATORY_PERIOD></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.respiratoryPeriod}\\\" data-ng-bind=\\\"(modalVm.contract.respiratoryPeriod|pNumber )|| (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.PROVINCE_AVAILABLE></label>: <span style=\\\"display: inline\\\" ng-class=\\\"{empty: !modalVm.contract.provinceAvailable}\\\" data-ng-bind=\\\"(modalVm.contract.provinceAvailable ? \\'بله\\' : \\'خیر\\') || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div><div class=\\\"col-xs-12 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.ADDRESS></label>: <span style=\\\"display: inline\\\" name=contractAddress ng-class=\\\"{empty: !modalVm.contract.address}\\\" data-ng-bind=\\\"modalVm.contract.address || (\\'APP.SHARE.UNDEFINED\\' | translate)\\\"></span></div></div></div><hr><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\" data-ng-if=\\\"!modalVm.fromMonitoring && modalVm.tableParams\\\"><h3>نظارت‌های این قرارداد</h3><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=modalVm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"monitoring in $data\\\"><td class=\\\"default {{modalVm.planTypeKey(monitoring.contract.planType)}}\\\" data-ng-attr-title=\\\"{{ (monitoring.contract.economicSection.name || \\'نامخشص\\') + \\'، \\' + (monitoring.contract.planType || \\'نامخشص\\')}}\\\" data-title=\\\"\\'APP.MODULES.CONTRACT.SECTION_TYPE\\'|translate\\\"><img width=25 class=screen-only ng-src=assets/images/section-icons/{{monitoring.contract.economicSection.id}}.png> <span class=print-only data-ng-bind=\\\"(monitoring.contract.economicSection.name || \\'نامخشص\\') + \\'، \\' + (monitoring.contract.planType || \\'نامخشص\\')\\\"></span></td><td data-title=\\\"\\'APP.MODULES.MONITORING.NUMBER\\'|translate\\\"><a dir=ltr target=_blank data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span> _ <span data-ng-bind=\\\"monitoring.currentStep.title \\\"></span></a></td><td data-title=\\\"\\'APP.MODULES.MONITORING.EXPERTS\\'|translate\\\"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind=\\\"\\', \\' + monitoring.userMonitorings[1].lmsUser.name\\\" data-ng-if=monitoring.userMonitorings[1]></span><br data-ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=modalVm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span></td><td data-title=\\\"\\'APP.MODULES.MONITORING.COMPANY\\'|translate\\\" data-ng-bind=monitoring.contract.companyName></td><td data-title=\\\"\\'APP.MODULES.MONITORING.CONTRACT.DATE\\'|translate\\\" data-ng-bind=\\\"monitoring.contract.contractDate|jDate:\\'jYY/jM/jD\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.AMOUNT\\'|translate\\\" data-ng-bind=\\\"(monitoring.contract.totalAmount|pCurrency:\\'R\\')\\\" ng-attr-title=\\\"{{monitoring.contract.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.NUMBER\\'|translate\\\"><a dir=ltr target=_blank data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DETAILS_VIEW\\'|translate}}\\\" data-ui-sref=\\\"root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\\'root.monitoring.monitoring-details\\'})\\\"><span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PLACE\\'|translate\\\"><span data-ng-bind=monitoring.contract.province.title></span> <span ng-if=monitoring.payerBranch data-ng-bind=\\\"\\'،\\' +monitoring.payerBranch.title\\\"></span></td></tr><tr><td data-translate=NO_MONITORING_EXIST class=\\\"text-center text-warning\\\" data-ng-hide=$data.length colspan=8></td></tr></table></div></div>\");\n$templateCache.put(\"app/components/directive/applicant/applicant.html\",\"<div class=module-inner><div class=\\\"module-heading screen-only\\\"><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" data-ng-show=vm.allowedAction data-ng-click=vm.SetApplicantInDirective() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-disabled=directiveDetailsForm.$invalid><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class=\\\"col-md-5 col-md-offset-1 text-center screen-only\\\" data-ng-show=vm.allowedAction><span class=text-warning ng-show=\\\"vm.savingStatus == 0\\\" data-translate=\\\"empty monitoring fields\\\"></span> <span class=text-danger ng-show=\\\"vm.savingStatus == 1\\\" data-translate=\\\"editing monitoring fields\\\"></span> <span class=text-success ng-show=\\\"vm.savingStatus == 2\\\" data-translate=\\\"saved monitoring fields\\\"></span></div></div><div class=clearfix></div><div class=module-content><div class=\\\"module-content-inner screen-only\\\"><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form name=directiveDetailsForm data-ng-submit=directiveDetailsForm.$setPristine() novalidate><fieldset data-ng-disabled=\\\"!vm.allowedAction || vm.loading\\\"><div class=row><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label for=applicantType data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TYPE></label><select class=form-control ng-options=\\\"type.value as type.title for type in vm.applicantTypes\\\" id=applicantType name=applicantType data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.applicant.applicantType></select></div></div></div><div class=row><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':directiveDetailsForm.name.$invalid &&\\r\\n                                                                            !directiveDetailsForm.name.$pristine}\\\"><span class=red-star>*</span><label for=name data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></label><input class=form-control id=name name=name data-ng-model=vm.applicant.applicantName data-ng-change=\\\"vm.savingStatus = 1\\\" required></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><span class=red-star>*</span><label for=province data-translate=APP.MODULES.DIRECTIVE.APPLICANT.PROVINCE></label><select class=form-control ng-options=\\\"province.id as province.title for province in vm.provinces\\\" id=province name=province data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.applicant.applicantProvince.id required></select></div></div></div></fieldset></form><div class=\\\"row m-t-3\\\" ng-form name=boardDirectorsForm><div class=\\\"col-md-12 pull-right\\\" data-ng-show=\\\" vm.lastCheck === \\'LEGAL\\'\\\"><div class=\\\"col-md-12 form-group\\\"><label data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.TITLE></label></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NAME></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.POSITION></th><th class=text-center data-translate=APP.SHARE.OPERATION data-ng-show=vm.allowedAction></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.boards\\\"><td><span data-ng-bind=item.name data-ng-hide=item.editing></span> <input type=text data-ng-model=item.name class=form-control ng-show=item.editing></td><td><span data-ng-bind=item.nationalId|pNumber data-ng-hide=item.editing></span> <input name=nationalId_update class=form-control maxlength=10 minlength=10 data-ng-show=item.editing data-ng-model=item.nationalId ng-pattern=vm.nationalIdRegex required><ul class=\\\"validate text-right\\\" data-ng-show=item.editing><li class=text-danger ng-show=boardDirectorsForm.nationalId_update.$error.pattern data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID_VALIDATE></li></ul></td><td><span data-ng-bind=item.position data-ng-hide=item.editing></span> <input type=text data-ng-model=item.position class=form-control ng-show=item.editing></td><td data-ng-show=vm.allowedAction><a class=\\\"btn btn-sm text-info\\\" data-ng-hide=item.editing data-ng-click=\\\"item.editing = true\\\"><span class=\\\"icon pe-icon pe-7s-note f-21\\\"></span> </a><a class=\\\"btn btn-sm text-danger\\\" data-ng-hide=item.editing data-ng-click=vm.deleteBoard(item.id)><span class=\\\"icon pe-icon pe-7s-trash f-21\\\"></span> </a><a class=\\\"btn btn-sm text-warning\\\" data-ng-show=item.editing data-ng-click=vm.cancelUpdate(item)><span class=\\\"icon pe-icon pe-7s-close f-21\\\"></span> </a><a class=\\\"btn btn-sm text-success\\\" data-ng-show=item.editing data-ng-click=vm.updateBoard(item)><span class=\\\"icon pe-icon pe-7s-check f-21\\\"></span></a></td></tr><tr class=text-center data-ng-show=vm.allowedAction><td class=\\\"{{vm.applicant.applicantType === \\'LEGAL\\' && vm.boards.length === 0 ? \\'has-error\\' : \\'\\'}}\\\"><input id=boardName name=boardName title=\\\"نام عضو هیئت مدیره\\\" data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.name class=form-control data-ng-change=vm.AllowAddBoard() required></td><td class=\\\"{{ boardDirectorsForm.nationalId.$error.pattern || (vm.applicant.applicantType === \\'LEGAL\\' && vm.boards.length === 0) ? \\'has-error\\' : \\'\\' }}\\\"><input id=nationalId name=nationalId class=form-control maxlength=10 minlength=10 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.nationalId ng-pattern=vm.nationalIdRegex data-ng-change=\\\" vm.AllowAddBoard()\\\" required><ul class=\\\"validate text-right\\\"><li class=text-danger ng-show=boardDirectorsForm.nationalId.$error.pattern data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID_VALIDATE></li></ul></td><td class=\\\"{{vm.applicant.applicantType === \\'LEGAL\\' && vm.boards.length === 0 ? \\'has-error\\' : \\'\\'}}\\\"><input id=boardPosition name=boardPosition title=سمت data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.board.position class=form-control data-ng-change=vm.AllowAddBoard()></td><td><a ng-class=vm.classAddBoard class=\\\"btn btn-lg text-success\\\" data-ng-click=vm.addBoardToApplicant()><i class=\\\"icon pe-icon pe-7s-plus f-21\\\"></i></a></td></tr></table></div></div></div></div></div></div><div class=print-only><table class=\\\"table table-bordered\\\"><tr><th colspan=3 data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TITLE></th></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.NAME></th><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.PROVINCE></th></tr><tr><td data-ng-bind=vm.applicant.applicantType|applicantType></td><td data-ng-bind=vm.applicant.applicantName></td><td data-ng-bind=vm.applicant.applicantProvince.title></td></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.TITLE colspan=3></th></tr><tr><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NAME></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.NATIONAL_ID></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.APPLICANT.BOARD.POSITION></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.boards\\\"><td data-ng-bind=item.name></td><td data-ng-bind=item.nationalId|pNumber></td><td data-ng-bind=item.position></td></tr></table></div></div></div>\");\n$templateCache.put(\"app/components/directive/assuranceTypes/contract-assuranceTypes.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><form data-ng-submit=vm.saveDirective() name=requiredPercentageForm><div class=\\\"form-group col-md-6 col-xs-12 pull-right\\\"><label for=required-assurance-percentage>درصد وثایق مورد نیاز نسبت به مجموع مبلغ مصوبه</label>:<span class=print-only data-ng-bind=vm.directive.dirRequiredAssurancePercentage|pPercent></span><div class=\\\"input-group screen-only\\\" data-ng-show=vm.allowedAction><span class=input-group-addon>%</span> <input class=form-control numbers-only=\\\"\\\" name=assurancePercentage required data-ng-model=vm.directive.dirRequiredAssurancePercentage id=required-assurance-percentage min=100> <span class=input-group-btn><button class=\\\"btn btn-success\\\" type=submit data-ng-disabled=requiredPercentageForm.$invalid><span class=\\\"fa fa-check-circle\\\"></span></button></span></div><span class=\\\"form-control screen-only\\\" data-ng-hide=vm.allowedAction data-ng-bind=vm.directive.dirRequiredAssurancePercentage|pPercent></span></div><div data-ng-show=vm.showError class=\\\"form-group col-md-6 col-xs-12 pull-left\\\"><span class=red-star>توجه: هیچیک از تضمینات مصوبه، مقدار سود را پوشش نداده است. (بدین منظور باید حداقل یک نوع وثیقه با معیار درصد اصل و سود ثبت گردد.)</span></div></form><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-scope ng-table\\\"><!-- heading row --><tr><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.LIMIT></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.PERCENT></th><th data-translate=APP.MODULES.DIRECTIVE.ASSURANCE_TYPES.CRITERION></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows ng-repeat--><tr ng-repeat=\\\"item in vm.contractAssuranceTypes\\\"><td data-ng-bind=item.assuranceType.type></td><td><span data-ng-bind=item.limit|maxmin data-ng-hide=item.editing></span><select class=form-control id=limitItem name=limit data-ng-model=item.limit ng-if=item.editing ng-change=vm.selectType(item) data-ng-options=\\\"limit.value as limit.name for limit in vm.limits\\\" required></select></td><td><span data-ng-bind=item.percent|pPercent data-ng-hide=item.editing></span> <input class=\\\"input-sm form-control\\\" numbers-only=\\\"\\\" ng-if=item.editing name=contractAssuranceTypePercent id=contractAssuranceTypePercentItem data-ng-model=item.percent data-ng-disabled=\\\"item.limit === \\'REST\\'\\\"></td><td><span data-ng-bind=item.criterionAssurance|assuranceCriterion data-ng-hide=item.editing></span><select class=form-control id=criterionItem name=criterion data-ng-model=item.criterionAssurance ng-if=item.editing data-ng-options=\\\"criterion.value as criterion.name for criterion in vm.criterions\\\" required></select></td><td class=screen-only data-ng-show=vm.allowedAction><i class=\\\"icon pe-icon pe-7s-note f-20 cursor-pointer text-info\\\" data-ng-hide=item.editing ng-click=\\\"item.editing = true\\\"></i> <i class=\\\"icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger\\\" data-ng-hide=item.editing ng-click=vm.deleteContractAssuranceType(item.id)></i> <i class=\\\"icon pe-icon pe-7s-close f-20 cursor-pointer text-warning\\\" ng-show=item.editing ng-click=\\\"item.editing = false; vm.retrieve($index)\\\"></i> <i class=\\\"icon pe-icon pe-7s-check f-20 cursor-pointer text-success\\\" ng-show=item.editing ng-class=\\\"{\\'idisabled\\': !item.percent}\\\" ng-click=\\\"vm.updateContractAssuranceType(item, $index)\\\"></i></td></tr><!-- add row --><tr ng-show=\\\"vm.requiredPercentageDone && vm.allowedAction\\\" class=screen-only><td><div class=form-group><select class=form-control id=assuranceType name=assuranceType data-ng-model=vm.contractAssuranceType.assuranceType data-ng-options=\\\"assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes\\\" required></select></div></td><td><div class=form-group><select class=form-control id=limit name=limit data-ng-model=vm.contractAssuranceType.limit ng-change=vm.selectType(vm.contractAssuranceType) data-ng-options=\\\"limit.value as limit.name for limit in vm.limits\\\" required></select></div></td><td><div class=form-group><input class=\\\"input-sm form-control\\\" numbers-only name=contractAssuranceTypePercent id=contractAssuranceTypePercent data-ng-model=vm.contractAssuranceType.percent data-ng-disabled=\\\"vm.contractAssuranceType.limit === \\'REST\\'\\\"></div></td><td><div class=form-group><select class=form-control id=criterion name=criterion data-ng-model=vm.contractAssuranceType.criterionAssurance data-ng-options=\\\"criterion.value as criterion.name for criterion in vm.criterions\\\" required></select></div></td><td><a class=text-success ng-click=vm.addContractAssuranceType()><i class=\\\"icon pe-icon pe-7s-plus f-20\\\"></i></a></td></tr><!-- empty row--><tr data-ng-hide=vm.requiredPercentageDone class=screen-only><td colspan=5 class=\\\"text-warning text-center\\\" data-ng-show=vm.allowedAction>لطفا ابتدا «درصد وثایق مورد نیاز نسبت به مجموع مبلغ مصوبه» را وارد و ثبت نمایید.</td><td colspan=5 class=\\\"text-warning text-center\\\" data-ng-hide=vm.allowedAction>هیچ وثیقه‌ای ثبت نشده است.</td></tr></table></div><div class=screen-only data-ng-show=vm.allowedAction><b class=text-danger data-translate=\\\"rest assurance note\\\"></b></div><div class=\\\"screen-only m-t-4\\\" data-ng-show=vm.allowedAction><b class=text-danger data-translate=\\\"combined assurance note\\\"></b> <i class=\\\"icon pe-icon f-20 text-primary cursor-pointer\\\" data-ng-class=\\\"{\\'pe-7s-bottom-arrow\\':!showHelpItem, \\'pe-7s-up-arrow\\': showHelpItem}\\\" ng-click=\\\"showHelpItem = !showHelpItem\\\"></i><table class=\\\"table table-bordered m-t-1\\\" ng-show=showHelpItem><tr><th class=text-center>درصد ترکیبی مصوبه</th><th><div class=\\\"input-group screen-only\\\"><span class=input-group-addon>%</span> <input type=number class=form-control title=\\\"درصد ترکیبی در مصوبه\\\" data-ng-model=vm.helpItemTotal data-ng-change=vm.calcHelpItems() data-ng-attr-max={{vm.directive.dirRequiredAssurancePercentage}}></div></th><th></th><th></th></tr><tr><th class=text-center>نوع وثیقه</th><th class=text-center>مبلغ در رهن رفته</th><th class=text-center>مقداری که باید در مصوبه ثبت شود</th><th class=text-center>عملیات</th></tr><tr data-ng-repeat=\\\"item in vm.helpItems\\\" class=text-center><td data-ng-bind=item.assuranceType.type></td><td data-ng-bind=\\\"item.amount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{item.amount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=item.desc|pNumber></td><td><i class=\\\"icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer\\\" ng-click=vm.removeHelpItem($index)></i></td></tr><tr class=text-center><td><select class=form-control name=assuranceType id=assurance-type data-ng-model=vm.helpItem.assuranceType data-ng-options=\\\"assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes\\\" required></select></td><td><input class=form-control data-ng-model=vm.helpItem.amount currency-tooltip dir=ltr ui-number-mask=0></td><td>-</td><td><i class=\\\"icon pe-icon pe-7s-plus f-20 text-success cursor-pointer\\\" ng-click=vm.addHelpItem()></i></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/directive/contract/add-edit.html\",\"<form name=addEditContractForm novalidate><div class=row><div class=\\\"col-md-11 pull-right\\\"><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':addEditContractForm.type.$invalid &&\\r\\n                                                                            !addEditContractForm.type.$pristine}\\\"><span class=red-star>*</span><label for=type data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></label><ui-select ng-model=vm.contract.type.id theme=bootstrap id=type ng-change=vm.fillNecessaryCheckboxes() sortable close-on-select=true><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\\'|translate}}\\\"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat=\\\"contractType.id as contractType in vm.contractTypes | propsFilter: {name: $select.search}\\\"><div ng-bind-html=\\\"contractType.name | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':addEditContractForm.amount.$invalid &&\\r\\n                                                                            !addEditContractForm.amount.$pristine}\\\"><span class=red-star>*</span><label for=amount data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></label><input class=form-control dir=ltr id=amount name=amount data-ng-model=vm.contract.totalAmount currency-tooltip ui-number-mask=0 required></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-if=\\\"vm.requiredField(\\'interestRate\\')\\\"><div class=form-group><label for=interestRate data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></label><input class=form-control type=number max=100 min=0 dir=ltr id=interestRate name=interestRate data-ng-model=vm.contract.interestRate></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-if=\\\"vm.requiredField(\\'installmentCount\\')\\\"><div class=form-group><label for=installmentCount data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentCount name=installmentCount ng-model=vm.contract.installmentCount></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-if=\\\"vm.requiredField(\\'installmentInterval\\')\\\"><div class=form-group><label for=installmentInterval><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></span></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentInterval name=installmentInterval data-ng-model=vm.contract.installmentInterval></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-if=\\\"vm.requiredField(\\'participationDuration\\')\\\"><div class=form-group><label for=participationDuration><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></span></label><input class=form-control dir=ltr type=number step=1 min=0 id=participationDuration name=participationDuration data-ng-model=vm.contract.participationDuration></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-if=\\\"vm.requiredField(\\'respiratoryPeriod\\')\\\"><div class=form-group><label for=respiratoryPeriod><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></span></label><input class=form-control type=number step=1 dir=ltr min=0 id=respiratoryPeriod name=respiratoryPeriod data-ng-model=vm.contract.respiratoryPeriod></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\" ng-show=\\\"vm.requiredField(\\'nominalAmount\\')\\\" data-ng-class=\\\"{\\'has-error\\':addEditContractForm.nominalAmount.$invalid &&\\r\\n                                                                            !addEditContractForm.nominalAmount.$pristine}\\\"><div class=form-group><label for=nominal-amount><span class=red-star>*</span> <span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NOMINAL_AMOUNT></span></label><input class=form-control dir=ltr id=nominal-amount name=nominalAmount data-ng-model=vm.contract.nominalAmount currency-tooltip ui-number-mask=0 data-ng-required=\\\"vm.requiredField(\\'nominalAmount\\')\\\"></div></div><div class=\\\"col-md-4 col-sm-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CALCULATE_CONDITION></label><div class=form-inline><label><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT></span> <input ng-model=vm.contract.totalAmountCount type=checkbox></label><label><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT></span> <input ng-model=vm.contract.interestAmountCount type=checkbox></label></div></div></div></div><div class=\\\"col-md-1 pull-right text-center p-t-2\\\"><a class=text-success data-ng-click=vm.addEditContract(addEditContractForm) title=\\\"{{\\'APP.ACTIONS.ADD\\'|translate}}\\\" data-ng-disabled=addEditContractForm.$invalid><i class=\\\"icon pe-icon pe-7s-plus pe-2x f-bold\\\"></i></a></div></div><div class=row></div></form><div><b>نکته: در صورت تصویب قرارداد مبادلاتی با قسط نامساوی، به مقدار فاصله‌ی اقساط از قسط نخست کسر نموده و باقی را به عنوان دوره‌ی تنفس ثبت کنید.</b></div>\");\n$templateCache.put(\"app/components/directive/contract/contract-list.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-show-filter=false><tr class=text-center data-ng-class=\\\"{\\'disappeared\\':vm.editing}\\\"><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CALCULATE_CONDITION></th><th data-translate=APP.SHARE.OPERATION style=\\\"width: 10%\\\" class=screen-only data-ng-show=vm.allowedAction></th></tr><tr class=text-center data-ng-show=!vm.toggleEdit[$index] data-ng-repeat-start=\\\"item in vm.contracts\\\"><td id=TYPE><i data-ng-bind=item.type.name></i></td><td id=AMOUNT><i data-ng-bind=\\\"item.totalAmount|pCurrency:\\'R\\'\\\" title=\\\"{{item.totalAmount|pCurrency:\\'A\\':1}}\\\"></i></td><td id=INTEREST_RATE><i data-ng-bind=item.interestRate|pPercent></i></td><td id=INSTALLMENT_COUNT><i data-ng-bind=\\\"item.installmentCount|pNumber:\\'-\\'\\\"></i></td><td id=INSTALLMENT_INTERVAL><i data-ng-bind=\\\"(item.installmentInterval|pNumber:\\'-\\')\\\"></i></td><td id=PARTICIPATION_DURATION><i data-ng-bind=\\\"item.participationDuration|pNumber:\\'-\\'\\\"></i></td><td id=RESPIRATORY_PERIOD><i data-ng-bind=\\\"item.respiratoryPeriod|pNumber:\\'-\\'\\\"></i></td><td title=\\\"{{item.interestAmount|pCurrency:\\'A\\':1}}\\\" id=CONTRACT_INTEREST data-ng-bind=\\\"item.interestAmount|pCurrency:\\'R\\'\\\"></td><td title=\\\"{{item.totalAmount+item.interestAmount|pCurrency:\\'A\\':1}}\\\" id=INTEREST data-ng-bind=\\\"item.totalAmount+item.interestAmount|pCurrency:\\'R\\'\\\"></td><td data-ng-show=!vm.toggleEdit[$index] id=CALCULATE_CONDITION><div class=checkbox><i data-ng-show=\\\"vm.allowedAction || item.totalAmountCount\\\"><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT></span> <input ng-model=item.totalAmountCount type=checkbox data-ng-disabled=!vm.allowedAction title=\\\"{{\\'APP.MODULES.DIRECTIVE.CONTRACT.TOTAL_AMOUNT_COUNT\\'|translate}}\\\" ng-change=vm.updateContract(item)></i></div><div class=checkbox><i data-ng-show=\\\"vm.allowedAction || item.interestAmountCount\\\"><span data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT></span> <input ng-model=item.interestAmountCount type=checkbox data-ng-disabled=!vm.allowedAction title=\\\"{{\\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_AMOUNT_COUNT\\'|translate}}\\\" ng-change=vm.updateContract(item)></i></div></td><td class=screen-only data-ng-show=vm.allowedAction id=OPERATION><i class=\\\"icon pe-icon pe-7s-note f-20 cursor-pointer text-info\\\" data-ng-hide=vm.toggleEdit[$index] ng-click=\\\"vm.toggleEdit[$index] = true;vm.editing = true\\\"></i> <i class=\\\"icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger\\\" data-ng-hide=vm.toggleEdit[$index] ng-click=vm.deleteDirContract(item.id)></i></td></tr><tr data-ng-if=vm.toggleEdit[$index] data-ng-repeat-end><td colspan=2><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></label><select class=form-control data-ng-attr-title={{contractType.name}} data-ng-options=\\\"contractType.id as contractType.name for contractType  in vm.contractTypes\\\" name=contractTypeEdit id=contractTypeEdit ng-model=item.type.id></select></td><td colspan=3><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></label><input class=form-control dir=ltr id=amountEdit name=amountEdit data-ng-model=item.totalAmount currency-tooltip ui-number-mask=0 required></td><td colspan=2 ng-show=\\\"vm.requiredField(\\'interestRate\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></label><input class=form-control type=number max=100 min=0 dir=ltr id=interestRateEdit name=interestRateEdit data-ng-model=item.interestRate></td><td colspan=3 ng-show=\\\"vm.requiredField(\\'participationDuration\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></label><input class=form-control dir=ltr type=number step=1 min=0 id=participationDurationEdit name=participationDurationEdit data-ng-model=item.participationDuration></td><td ng-show=\\\"vm.requiredField(\\'installmentCount\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentCountEdit name=installmentCountEdit ng-model=item.installmentCount></td><td ng-show=\\\"vm.requiredField(\\'installmentInterval\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></label><input class=form-control type=number step=1 dir=ltr min=0 id=installmentIntervalEdit name=installmentIntervalEdit data-ng-model=item.installmentInterval></td><td ng-show=\\\"vm.requiredField(\\'respiratoryPeriod\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></label><input class=form-control type=number step=1 dir=ltr min=0 id=respiratoryPeriodEdit name=respiratoryPeriodEdit data-ng-model=item.respiratoryPeriod></td><td ng-show=\\\"vm.requiredField(\\'nominalAmount\\', item.type)\\\"><label for=contractTypeEdit data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NOMINAL_AMOUNT></label><input class=form-control dir=ltr currency-tooltip ui-number-mask=0 id=nominalAmountEdit name=nominalAmountEdit data-ng-model=item.nominalAmount></td><td ng-show=\\\"vm.numberOfFields(item.type.id) < 6\\\" data-ng-attr-colspan=\\\"{{6 - vm.numberOfFields(item.type.id) - 1}}\\\"></td><td data-ng-show=vm.allowedAction><i class=\\\"icon pe-icon pe-7s-close f-20 cursor-pointer text-warning\\\" ng-show=vm.toggleEdit[$index] ng-click=vm.cancelEdit($index)></i> <i class=\\\"icon pe-icon pe-7s-check f-20 cursor-pointer text-success\\\" ng-show=vm.toggleEdit[$index] ng-click=vm.updateContract(item,$index)></i></td></tr><!--SUM --><tr class=\\\"text-center BlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td colspan=8></td><td title=\\\"{{vm.sumAmount|pCurrency:\\'A\\':1}}\\\" data-ng-bind=\\\"vm.sumAmount|pCurrency:\\'R\\'\\\"></td><td data-ng-show=vm.allowedAction></td></tr></table><div data-ng-include=\\\"\\'app/components/directive/contract/add-edit.html\\'\\\" data-ng-show=vm.allowedAction class=screen-only></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/directive/contractPreConditions/contract-preConditions.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-scope ng-table\\\"><colgroup data-ng-if=vm.allowedAction><col width=70%><col width=30%></colgroup><!-- header row --><tr><th data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.CONDITION_NAME></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows --><tr data-ng-repeat=\\\"item in vm.contractPreConditions\\\"><td><span data-ng-bind=item.condition data-ng-hide=item.editing data-ng-dblclick=\\\"item.editing = true\\\"></span> <input type=text data-ng-model=item.condition class=\\\"input-sm form-control\\\" data-ng-keypress=\\\"vm.keyPressed($event, item)\\\" data-ng-show=item.editing></td><td class=screen-only data-ng-show=vm.allowedAction><a class=text-info data-ng-hide=item.editing data-ng-click=\\\"item.editing = true\\\"><i class=\\\"icon pe-icon pe-7s-note f-20\\\"></i> </a><a class=text-danger data-ng-hide=item.editing data-ng-click=vm.deleteContractPreCondition(item.id)><i class=\\\"icon pe-icon pe-7s-trash f-20\\\"></i> </a><a class=text-warning data-ng-show=item.editing data-ng-click=vm.cancelUpdate()><i class=\\\"icon pe-icon pe-7s-close f-20\\\"></i> </a><a class=text-success data-ng-show=item.editing data-ng-click=vm.updateContractPreCondition(item)><i class=\\\"icon pe-icon pe-7s-check f-20\\\"></i></a></td></tr><tfoot><!-- add row --><tr class=screen-only data-ng-show=vm.allowedAction><td><input class=\\\"input-sm form-control\\\" required data-ng-keypress=vm.keyPressed($event) name=contractPreCondition id=contractPreCondition title={{APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.CONDITION_NAME}} data-ng-model=vm.contractPreCondition.condition></td><td><a class=text-success data-ng-click=vm.addContractPreCondition()><i class=\\\"icon pe-icon pe-7s-plus f-18\\\"></i></a></td></tr></tfoot></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/directive/dirLicense/directive-license.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.LICENSE.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-scope ng-table\\\"><colgroup data-ng-if=vm.allowedAction><col width=70%><col width=30%></colgroup><!-- header row --><tr><th data-translate=APP.MODULES.DIRECTIVE.LICENSE.NAME></th><th data-translate=APP.SHARE.OPERATION class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data row --><tr data-ng-repeat=\\\"item in vm.dirLicenses\\\"><td data-ng-bind=item.name></td><td class=screen-only data-ng-show=vm.allowedAction><a class=text-danger data-ng-click=vm.deleteDirLicense(item.id)><i class=\\\"icon pe-icon pe-7s-trash f-20\\\"></i></a></td></tr><tfoot><!-- add row --><tr class=screen-only data-ng-show=vm.allowedAction><td><input class=\\\"input-sm form-control\\\" title={{APP.MODULES.DIRECTIVE.LICENSE.NAME}} data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid)\\\" name=dirLicenseName id=dirLicenseName data-ng-model=vm.dirLicense.name></td><td><a class=text-success data-ng-click=vm.addDirLicense()><i class=\\\"icon pe-icon pe-7s-plus f-18\\\"></i></a></td></tr></tfoot></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/directive/directive-details/directive-details.html\",\"<div class=\\\"module-inner screen-only\\\"><div class=module-heading><h2 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.APPROVE_DETAILS></h2><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" data-ng-show=vm.allowedAction data-ng-click=vm.saveDirective(directiveDetailsForm) uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class=\\\"col-md-5 col-md-offset-1 text-center screen-only\\\" data-ng-show=vm.allowedAction><span class=text-warning ng-show=\\\"vm.savingStatus == 0\\\" data-translate=\\\"empty monitoring fields\\\"></span> <span class=text-danger ng-show=\\\"vm.savingStatus == 1\\\" data-translate=\\\"editing monitoring fields\\\"></span> <span class=text-success ng-show=\\\"vm.savingStatus == 2\\\" data-translate=\\\"saved monitoring fields\\\"></span></div></div><!--<div class=\\\"clearfix\\\"></div>--><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form name=directiveDetailsForm data-ng-submit=directiveDetailsForm.$setPristine() novalidate><fieldset data-ng-disabled=\\\"!vm.allowedAction || vm.loading\\\"><div class=row><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.number.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.number.$dirty)}\\\"><span class=red-star>*</span><label for=number data-translate=APP.MODULES.DIRECTIVE.NUMBER></label><input class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" id=number name=number data-ng-model=vm.directive.dirNumber ng-pattern=vm.noSpaceRegex tabindex=1 required></div></div><div class=\\\"col-md-6 pull-right\\\" data-ng-if=vm.directive.dirParentDirectiveNumber>رونوشت از مصوبه‌ی شماره&nbsp; <a data-ng-bind=vm.directive.dirParentDirectiveNumber class=ltr-number target=_blank ui-sref=\\\"root.directive.details({directiveId:vm.directive.dirParentDirectiveNumber, monitoringId:vm.directive.dirParentMonitoring, monitoringState: \\'root.monitoring.monitoring-details\\'})\\\"></a></div></div><div class=row><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.approveDate.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.approveDate.$dirty)}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.DIRECTIVE.SIGNIFICATION_DATE></label><simple-date data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.directive.dirApproveDate name=approveDate required></simple-date></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.validityDuration.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.validityDuration.$dirty)}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.DIRECTIVE.END_DATE for=validityDuration></label><input class=form-control type=number data-ng-change=\\\"vm.savingStatus = 1\\\" id=validityDuration name=validityDuration data-ng-model=vm.directive.dirValidityDuration min=0 required></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.approvalPlace.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.approvalPlace.$dirty)}\\\"><span class=red-star>*</span><label for=approvalPlace data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"approvalPlace.id as approvalPlace.name for approvalPlace in vm.approvalPlaces\\\" id=approvalPlace name=approvalPlace required data-ng-model=vm.directive.directiveApprovalPlace.id></select></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.supplyResource.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.supplyResource.$dirty)}\\\"><label for=supplyResource data-translate=APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"supplyResource.id as supplyResource.name for supplyResource in vm.supplyResources\\\" id=supplyResource name=supplyResource required data-ng-model=vm.directive.dirCreditSupplyResource.id></select></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.economicSection.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.economicSection.$dirty)}\\\"><label for=economicSection data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"economicSection.id as economicSection.name for economicSection in vm.ecomomicSections\\\" id=economicSection name=economicSection required data-ng-model=vm.directive.dirEconomicSection.id></select></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.planType.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.planType.$dirty)}\\\"><label for=planType data-translate=APP.MODULES.DIRECTIVE.PLAN_TYPE></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"planType.value as planType.title for planType in vm.planTypes\\\" id=planType name=planType required data-ng-model=vm.directive.dirPlanType></select></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': !vm.directive.branchChiefInGrantingTime &&\\r\\n                                                                                        vm.savingStatus === 1}\\\"><span ng-show=\\\"!vm.fillTheFields || !directiveDetailsForm.branchChiefInGrantingTime.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && directiveDetailsForm.branchChiefInGrantingTime.$invalid\\\">*</span><label data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INGRANTTIME></label><ui-select theme=bootstrap id=branchChiefInGrantingTime data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.directive.branchChiefInGrantingTime><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=\\\"$select.selected.name + \\'(\\' + $select.selected.code + \\')\\'\\\"></span></ui-select-match><ui-select-choices repeat=\\\"employee in vm.allEmployees\\\" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html=\\\"(employee.name+\\' (\\'+employee.code+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.branchPhoneNumber.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.branchPhoneNumber.$dirty)}\\\"><span ng-show=\\\"!vm.fillTheFields || !directiveDetailsForm.branchPhoneNumber.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && directiveDetailsForm.branchPhoneNumber.$invalid\\\">*</span><label data-translate=APP.MODULES.MONITORING.BRANCH_PHONENUMBER for=branchPhoneNumber></label><input class=form-control type=text data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" id=branchPhoneNumber name=branchPhoneNumber data-ng-model=vm.directive.dirBranchPhoneNumber required ng-pattern=vm.telRegex><ul class=validate><li class=text-danger ng-show=directiveDetailsForm.branchPhoneNumber.$error.pattern data-translate=APP.MODULES.MONITORING.VALIDATE_TEL></li></ul></div></div><div class=\\\"col-md-4 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': !vm.directive.dirExpert &&\\r\\n                                                                                        vm.savingStatus === 1}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.DIR_EXPERT_NAME></label><ui-select theme=bootstrap id=applicantPhoneNumber2 data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.directive.dirExpert><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=\\\"$select.selected.name + \\'(\\' + $select.selected.code + \\')\\'\\\"></span></ui-select-match><ui-select-choices repeat=\\\"employee in vm.allEmployees\\\" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html=\\\"(employee.name+\\' (\\'+employee.code+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.applicantPhoneNumber.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.applicantPhoneNumber.$dirty)}\\\"><span ng-show=\\\"!vm.fillTheFields || !directiveDetailsForm.applicantPhoneNumber.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && directiveDetailsForm.applicantPhoneNumber.$invalid\\\">*</span><label data-translate=APP.MODULES.MONITORING.APPLICANT_PHONENUMBER for=applicantPhoneNumber></label><input class=form-control type=text data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" id=applicantPhoneNumber name=applicantPhoneNumber data-ng-model=vm.directive.dirApplicantPhoneNumber required ng-pattern=vm.telRegex><ul class=validate><li class=text-danger ng-show=directiveDetailsForm.applicantPhoneNumber.$error.pattern data-translate=APP.MODULES.MONITORING.VALIDATE_TEL></li></ul></div></div><div class=\\\"col-md-12 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.activitySubject.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.activitySubject.$dirty)}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT for=activitySubject></label><textarea class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" id=activitySubject name=activitySubject style=\\\"resize: vertical\\\" placeholder=... data-ng-model=vm.directive.dirActivitySubject required></textarea></div></div><div class=\\\"col-md-12 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\': directiveDetailsForm.projectLocationAddress.$invalid &&\\r\\n                                (vm.savingStatus === 1 || directiveDetailsForm.projectLocationAddress.$dirty)}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS for=projectLocationAddress></label><textarea class=form-control style=\\\"resize: vertical\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" placeholder=... id=projectLocationAddress name=projectLocationAddress data-ng-model=vm.directive.dirProjectLocationAddress required></textarea></div></div><div class=\\\"col-md-12 col-xs-12 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.DIRECTIVE.DESCRIPTION for=dirDescription></label><textarea class=form-control style=\\\"resize: vertical\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" placeholder=... id=dirDescription name=dirDescription data-ng-model=vm.directive.dirDescription></textarea></div></div></div></fieldset></form></div></div></div></div></div><div class=print-only><table class=\\\"table table-bordered\\\"><tr><th colspan=4 data-translate=APP.MODULES.DIRECTIVE.APPROVE_DETAILS></th></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.APPROVE_DATE></th><th data-translate=APP.MODULES.DIRECTIVE.END_DATE></th><th data-translate=APP.MODULES.DIRECTIVE.DIRECTIVE_APPROVAL_PLACE></th><th data-translate=APP.MODULES.DIRECTIVE.CREDIT_SUPPLY_RESOURCE></th></tr><tr><td data-ng-bind=vm.directive.dirApproveDate|jDate></td><td data-ng-bind=vm.directive.dirValidityDuration|pNumber></td><td data-ng-bind=vm.directive.directiveApprovalPlace.name></td><td data-ng-bind=vm.directive.dirCreditSupplyResource.name></td></tr><tr><th data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></th><th data-translate=APP.MODULES.DIRECTIVE.PLAN_TYPE></th><th data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INGRANTTIME></th><th data-translate=APP.MODULES.MONITORING.BRANCH_PHONENUMBER></th></tr><tr><td data-ng-bind=vm.directive.dirEconomicSection.name></td><td data-ng-bind=vm.directive.dirPlanType|planType></td><td data-ng-bind=vm.directive.branchChiefInGrantingTime.name></td><td data-ng-bind=vm.directive.dirBranchPhoneNumber|pNumber></td></tr><tr><th data-translate=APP.MODULES.MONITORING.DIR_EXPERT_NAME></th><th data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th><th data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS colspan=2></th></tr><tr><td data-ng-bind=vm.directive.dirExpert.name></td><td data-ng-bind=vm.directive.dirActivitySubject></td><td data-ng-bind=vm.directive.dirProjectLocationAddress colspan=2></td></tr></table></div>\");\n$templateCache.put(\"app/components/directive/paymentPerPart/directive-paymentPerPart.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.TITLE></h1><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><form name=addPaymentForm><table class=\\\"hover no-footer row-border dataTable ng-scope ng-table\\\"><!-- header row --><tr><th>#</th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.PART></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.APPLICANT_SHARE_AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.BAKN_SHARE_AMOUNT></th><th data-translate=APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.COUNT_PAYMENT_STEP></th><th data-translate=APP.SHARE.OPERATION style=\\\"width: 15%\\\" class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- data rows --><tr data-ng-repeat=\\\"item in vm.dirPaymentPerParts\\\"><td data-ng-bind=($index+1)|pNumber></td><td><span data-ng-bind=item.investmentAction.name data-ng-hide=item.editing></span><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPaymentForm.investmentActionItem.$invalid}\\\"><select class=form-control data-ng-if=item.editing title={{APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.PART}} id=investmentActionItem name=investmentActionItem data-ng-model=item.investmentAction data-ng-options=\\\"investmentAction as investmentAction.name for investmentAction in vm.investmentActions\\\" required></select></div></td><td><span data-ng-bind=\\\"(item.bankShareAmount|pCurrency:\\'R\\')\\\" data-ng-hide=item.editing data-uib-tooltip=\\\"{{item.bankShareAmount|pCurrency:\\'A\\'}}\\\"></span><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPaymentForm.bankShareAmountItem.$invalid}\\\"><input class=\\\"input-sm form-control\\\" data-ng-if=item.editing name=bankShareAmountItem id=bankShareAmountItem data-ng-model=item.bankShareAmount title={{APP.MODULES.DIRECTIVE.PAYMENT_PER_PART.APPLICANT_SHARE_AMOUNT}} data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid, item, $index)\\\" ui-number-mask=0 currency-tooltip dir=ltr required></div></td><td><span data-ng-bind=\\\"(item.applicantShareAmount|pCurrency:\\'R\\')\\\" data-ng-hide=item.editing uib-tooltip=\\\"{{item.applicantShareAmount|pCurrency:\\'A\\'}}\\\"></span><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPaymentForm.applicantShareAmountItem.$invalid}\\\"><input class=\\\"input-sm form-control\\\" data-ng-if=item.editing name=applicantShareAmountItem id=applicantShareAmountItem data-ng-model=item.applicantShareAmount data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid, item, $index)\\\" ui-number-mask=0 currency-tooltip dir=ltr required></div></td><td><span data-ng-bind=item.paymentStepCount|pNumber data-ng-hide=item.editing></span><div class=form-group data-ng-class=\\\"{\\'has-error\\':addPaymentForm.stepCountItem.$invalid}\\\"><input class=\\\"input-sm form-control\\\" data-ng-if=item.editing name=stepCountItem id=step-count type=number min=1 data-ng-model=item.paymentStepCount dir=ltr data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid, item, $index)\\\" required></div></td><td class=screen-only data-ng-show=vm.allowedAction><i class=\\\"icon pe-icon pe-7s-note f-20 cursor-pointer text-info\\\" data-ng-hide=item.editing ng-click=\\\"item.editing = true\\\"></i> <i class=\\\"icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger\\\" data-ng-hide=item.editing ng-click=vm.deleteDirPaymentPerPart(item.id)></i> <i class=\\\"icon pe-icon pe-7s-close f-20 cursor-pointer text-warning\\\" ng-show=item.editing ng-click=\\\"item.editing = false;vm.retrieve($index)\\\"></i> <i class=\\\"icon pe-icon pe-7s-check f-20 text-success\\\" ng-show=item.editing ng-click=\\\"vm.updateDirPaymentPerPart(item, $index, addPaymentForm.$valid)\\\"></i></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\" ng-show=vm.dirPaymentPerParts.length><td></td><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumBankShareAmount|pCurrency:\\'R\\')\\\" uib-tooltip=\\\"{{vm.sumBankShareAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumApplicantShareAmount|pCurrency:\\'R\\')\\\" uib-tooltip=\\\"{{vm.sumApplicantShareAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td></td></tr><tfoot><!-- add row --><tr ng-if=!vm.editing() class=screen-only data-ng-show=vm.allowedAction><td></td><td><select class=form-control id=investmentAction name=investmentAction data-ng-model=vm.dirPaymentPerPart.investmentAction data-ng-options=\\\"investmentAction as investmentAction.name for investmentAction in vm.investmentActions\\\" required></select></td><td><input class=\\\"input-sm form-control\\\" placeholder=\\\"سهم بانک\\\" data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid)\\\" name=bankShareAmount id=bankShareAmount data-ng-model=vm.dirPaymentPerPart.bankShareAmount currency-tooltip ui-number-mask=0 required></td><td><input class=\\\"input-sm form-control\\\" placeholder=\\\"سهم متقاضی\\\" data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid)\\\" name=applicantShareAmount id=applicantShareAmount currency-tooltip ui-number-mask=0 data-ng-model=vm.dirPaymentPerPart.applicantShareAmount required></td><td><input class=\\\"input-sm form-control\\\" data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm.$valid)\\\" placeholder=\\\"تعداد مراحل پرداخت\\\" name=countPaymentStep id=countPaymentStep type=number min=1 data-ng-model=vm.dirPaymentPerPart.paymentStepCount required></td><td><i class=\\\"icon pe-icon cursor-pointer pe-7s-plus f-20 text-success\\\" ng-click=vm.addDirPaymentPerPart(addPaymentForm.$valid);addPaymentForm.$setPristine() title=\\\"{{\\'APP.ACTIONS.ADD\\'|translate}}\\\"></i></td></tr></tfoot></table></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/home/stats/stats.html\",\"<div class=\\\"col-lg-3 col-md-6 pull-right\\\"><div class=\\\"panel panel-{{color}}\\\"><div class=panel-heading><div class=row><div class=col-xs-4><i class=\\\"fa fa-{{icon}} fa-3x\\\"></i></div><div class=\\\"col-xs-8 text-right\\\"><div class=huge data-ng-bind=number|pNumber></div></div><div class=col-xs-12 data-translate={{comments}}></div></div></div><a><div class=panel-footer><span data-translate={{title}}></span><div class=clearfix></div></div></a></div></div>\");\n$templateCache.put(\"app/components/monitoring/assurance/assurance.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.ASSURANCE.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i> <span class=red-star ng-show=vm.showFlag>برای مصوبه مربوط به این نظارت نوع تضمینات مشخص نشده است. ابتدا نوع تضمینات مجاز مصوبه را تعیین نمایید</span><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><!-- data table --><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><!-- data row ng-repeat --><tr class=text-center data-ng-repeat=\\\"assurance in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.ASSURANCE_TYPE\\'|translate\\\"><i data-ng-bind=assurance.assuranceType.type data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><select class=form-control data-ng-options=\\\"assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes\\\" id=investmentActionEdit name=investmentActionEdit data-ng-model=assurance.assuranceType></select></form></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.EXPERT_VALUE\\'|translate\\\"><i data-ng-bind=\\\"(assurance.expertValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{assurance.expertValue|pCurrency:\\'A\\'}}\\\" data-ng-hide=vm.toggleEdit[$index]></i> <input data-ng-show=vm.toggleEdit[$index] id=expertValueEdit name=expertValueEdit class=form-control dir=ltr ui-number-mask=0 data-ng-keypress=\\\"vm.keyPressed($event, assurance, $index)\\\" data-ng-model=assurance.expertValue></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_PERCENT\\'|translate\\\" data-ng-bind=assurance.assuranceType.acceptedPercent|pPercent></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.ACCEPTED_VALUE\\'|translate\\\" data-ng-bind=\\\"((assurance.expertValue * assurance.assuranceType.acceptedPercent/100)|pCurrency:\\'R\\')\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.MORTGAGED_VALUE\\'|translate\\\" data-ng-class=\\\"{\\'RedBG\\': assurance.mortgagedValue > (assurance.expertValue * assurance.assuranceType.acceptedPercent/100)}\\\"><i data-ng-bind=\\\"(assurance.mortgagedValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{assurance.mortgagedValue|pCurrency:\\'A\\'}}\\\" data-ng-hide=vm.toggleEdit[$index]></i> <input data-ng-show=vm.toggleEdit[$index] id=mortgagedValueEdit name=mortgagedValueEdit data-ng-keypress=\\\"vm.keyPressed($event, assurance, $index)\\\" class=form-control dir=ltr ui-number-mask=0 data-ng-model=assurance.mortgagedValue></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ASSURANCE.CONFLICT_DESCRIPTION\\'|translate\\\" data-ng-class=\\\"{\\'RedBG\\': assurance.conflictDescription}\\\"><i data-ng-bind=assurance.conflictDescription data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><input id=conflictDescriptionEdit name=conflictDescriptionEdit class=form-control type=text data-ng-keypress=\\\"vm.keyPressed($event, assurance, $index)\\\" data-ng-model=assurance.conflictDescription></form></td><td data-title=\\\"\\'APP.SHARE.COMMENT\\'|translate\\\" data-ng-class=\\\"\\\"><i data-ng-bind=assurance.description data-ng-show=!vm.toggleEdit[$index]></i><form name=assurance{{$index}} data-ng-show=vm.toggleEdit[$index] novalidate><input data-ng-attr-placeholder=\\\"{{\\'APP.SHARE.COMMENT\\'|translate}}\\\" id=description name=description class=form-control type=text data-ng-keypress=\\\"vm.keyPressed($event, assurance, $index)\\\" data-ng-model=assurance.description></form></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\" class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updateAssurance(assurance,$index) delete=vm.deleteAssuranceFromMonitoring(assurance.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\" ng-show=$data.length><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumExpertValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumExpertValue|pCurrency:\\'A\\'}}\\\"></td><td></td><td data-ng-bind=\\\"(vm.sumAcceptedValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumAcceptedValue|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumMortgagedValue|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumMortgagedValue|pCurrency:\\'A\\'}}\\\"></td><td></td><td></td><td></td></tr><!-- empty row --><tr ng-hide=$data.length class=text-center><td colspan=7 class=text-danger><span data-translate=NOTHING_HAS_BEEN_SUBMITTED data-ng-hide=vm.loading></span> <img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" ng-show=vm.loading class=centered height=50></td></tr><!-- add row --><tr data-ng-show=\\\"vm.allowedAction && !vm.loading\\\" class=screen-only><td><select class=form-control auto-focus=true tabindex=1 data-ng-options=\\\"assuranceType as assuranceType.type for assuranceType in vm.assuranceTypes\\\" id=investmentAction name=investmentAction data-ng-change=vm.calcAcceptedValue() data-ng-model=vm.assurance.assuranceType></select></td><td><input id=expertValue name=expertValue tabindex=2 class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) data-ng-change=vm.calcAcceptedValue() data-ng-model=vm.assurance.expertValue></td><td><span id=acceptedPercent class=form-control data-ng-bind=vm.assurance.assuranceType.acceptedPercent|pPercent></span></td><td><span id=acceptedValue class=form-control data-ng-bind=\\\"vm.assurance.acceptedValue|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.assurance.acceptedValue|pCurrency:\\'A\\'}}\\\"></span></td><td><input id=mortgagedValue name=mortgagedValue tabindex=3 data-ng-keypress=vm.keyPressed($event) class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=vm.assurance.mortgagedValue></td><td><input id=comment name=comment class=form-control tabindex=4 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.assurance.conflictDescription></td><td><input id=desc name=desc class=form-control tabindex=5 data-ng-attr-placeholder=\\\"{{\\'APP.SHARE.COMMENT\\'|translate}}\\\" data-ng-keypress=vm.keyPressed($event) required data-ng-model=vm.assurance.description></td><td><a class=\\\"btn btn-sm text-success\\\" tabindex=5 data-ng-attr-title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-click=vm.addAssurance()><span class=\\\"icon pe-icon pe-7s-plus f-18 f-bold\\\"></span></a></td></tr></table></div><hr><!-- result table table --><div class=module-heading><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><!-- heading row --><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.ASSURANCE_TYPE></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIRECTIVE_CONDITION></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM_TAKEN_ASSURANCE_AMOUNT></th><th class=text-center data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.DIFFERENCE_AMOUNT></th></tr><!-- data rows ng-repeat --><tr class=text-center data-ng-repeat=\\\"item in vm.conflicts\\\"><td data-ng-bind=item.assuranceType.type></td><td><span data-ng-bind=\\\"(item.condition|conditionList) + \\' \\' +(item.dirAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-show=\\\"(item.condition && item.dirAssuranceAmount) || item.condition == \\'REST\\'\\\" data-ng-attr-title=\\\"{{item.dirAssuranceAmount|pCurrency:\\'A\\'}}\\\"></span> <span data-ng-show=!item.condition>در مصوبه قید نشده است</span> <span data-ng-show=\\\"!item.dirAssuranceAmount && item.condition && item.condition !=\\'REST\\'\\\">هنوز وثیقه‌ای ثبت نشده است</span></td><td class={{item.getConflict()}} data-ng-bind=\\\"(item.sumTakenAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.sumTakenAssuranceAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-attr-title=\\\"{{item.conflictAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"item.conflictAmount|pCurrency:\\'R\\'\\\"></td></tr><tr class=text-center><td class=LightBlueBG data-translate=APP.MODULES.MONITORING.ASSURANCE.CONFLICT.SUM></td><td class=LightBlueBG data-ng-bind=\\\"(vm.totalAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td class=LightBlueBG data-ng-class=\\\"{\\'DarkRedFill\\': vm.totalAmount>vm.sumOfSumTakenAssuranceAmount}\\\" data-ng-bind=\\\"(vm.sumOfSumTakenAssuranceAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumOfSumTakenAssuranceAmount|pCurrency:\\'A\\'}}\\\"></td><td class=LightBlueBG data-ng-attr-title=\\\"{{vm.totalDifference|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"(vm.totalDifference|pCurrency:\\'R\\')\\\"></td></tr></table><div class=\\\"module-footer screen-only\\\"><br><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span><br><i class=\\\"fa fa-circle OrangeFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/attachments/attachments.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=vm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\" ng-if=vm.isModal></i><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer table-responsive row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParamsAttachment data-show-filter=false><colgroup><col width=30%><col width=15%><col width=45%><col width=10%></colgroup><tr><td colspan=4><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" class=centered height=50 ng-show=vm.loading> <i data-ng-hide=vm.loading class=\\\"fa fa-info-circle text-info\\\"></i>&nbsp;<span data-ng-hide=vm.loading data-translate=DOWNLOAD_HELP class=text-info></span></td></tr><tr><th data-translate=APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME></th><th data-translate=APP.SHARE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.attachments\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.ATTACHMENTS.FILE_NAME\\'|translate\\\"><a ng-href={{vm.host}}api/fileManager/attachment/{{item.id}}/getContent/{{item.name}}.{{item.type}} target=_blank download={{item.name}}.{{item.type}}><span data-ng-bind=item.name></span> <span class=\\\"fa fa-download\\\"></span></a></td><td data-title=\\\"\\'APP.SHARE.DESCRIPTION\\'|translate\\\" data-ng-bind=item.description></td><td data-title=\\\"\\'APP.MODULES.MONITORING.ATTACHMENTS.CREATOR_USER\\'|translate\\\" data-ng-bind=item.creatorLmsUser.name></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><span class=\\\"icon pe-icon pe-7s-trash f-20 text-danger\\\" data-ng-show=item.canDelete data-ng-attr-title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=\\\"vm.deleteAttachment(item, $index)\\\"></span> <span class=\\\"icon pe-icon pe-7s-attention f-20 text-warning\\\" data-ng-hide=item.canDelete></span></td></tr><tr><td><file-upload class=\\\"inline col-xs-8 pull-right\\\" file=vm.attachment.attachment data-uploading=vm.uploaded label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><button class=\\\"btn btn-default-alt inline\\\" type=button data-ng-click=vm.cancelAddAttachment() title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\"><i class=\\\"fa fa-times\\\"></i></button></td><td data-ng-class=\\\"{\\'danger\\': vm.attachment.attachment.size > 7000000}\\\">حجم فایل: <span data-ng-bind=vm.attachment.attachment.size|fileSize></span></td><td><input class=form-control data-ng-model=vm.description></td><td><button class=\\\"btn btn-primary-alt inline\\\" ng-click=vm.attachFile();addAttachmentForm.$setPristine() title=\\\"{{\\'APP.ACTIONS.UPLOAD\\'|translate}}\\\" ng-disabled=!vm.attachment><i class=\\\"fa fa-upload\\\"></i></button></td></tr><tr data-ng-show=vm.attachments.length><td colspan=4><a ng-href={{vm.host}}api/monitoring/{{vm.monitoring.id}}/getAllFilesZipped/{{vm.monitoring.number}}.zip target=_blank download={{vm.monitoring.number}}.zip><i class=\\\"fa fa-file-archive-o\\\"></i> <span data-translate=APP.ACTIONS.DOWNLOAD_ALL></span></a></td></tr></table></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/cancelFinalized/cancel-finalized.html\",\"<div class=modal-header><span class=\\\"pull-left cursor-pointer fa fa-remove text-danger\\\" ng-click=vm.cancel()></span><h3 class=modal-title id=modal-title>لغو دستوری نظارت پس از تائید.</h3></div><div class=modal-body id=modal-body><div class=\\\"alert alert-warning alert-dismissible justified\\\"><i class=\\\"fa fa-warning\\\"></i> <strong>کاربر گرامی!</strong> شما با دسترسی مدیر سامانه در حال لغو یک نظارت تائيد شده با شماره <b class=ltr-number ng-bind-html=vm.monitoring.number|pNumber></b> مربوط به مشتری <b ng-bind-html=vm.monitoring.contract.companyName></b> هستید. توجه داشته باشید با انچام این عملیات نظارت به حالت ایجاد شده باز می‌گردد و از کلیه گزارشات عملکردی سامانه حذف خواهد شد. پس از انجام این عملیات در صورت صلاحدید می‌توانید این نظارت را حذف نمائید. در غیر این صورت نظارت در لیست ماموریت‌های محوله‌ی کارشناس(های) مربوطه قرار گرفته و قادر به انجام مجدد عملیات نظارت خواهند بود.</div><textarea class=form-control placeholder=\\\"دلیل لغو این نظارت ...\\\" name=message id=message cols=30 rows=5 data-ng-model=vm.message></textarea></div><div class=modal-footer><button class=\\\"btn btn-primary pull-left\\\" type=button ng-click=vm.ok() data-translate=APP.ACTIONS.OK></button></div>\");\n$templateCache.put(\"app/components/monitoring/checkList/monitoring-checkList.html\",\"<div class=\\\"module-inner screen-only\\\"><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r\\\" ng-click=vm.next()></i><div class=col-md-8><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><span class=\\\"pe-7s-less text-danger f-bold\\\" ng-show=\\\"vm.monitoringCheckListCount !== vm.monitoringCheckList.length\\\"></span> <span class=\\\"pe-7s-check text-success f-bold\\\" data-ng-hide=\\\"vm.monitoringCheckListCount !== vm.monitoringCheckList.length\\\"></span><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></h4><br><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" data-ng-show=vm.loadingCheckList class=centered height=50><form name=checklistForm><div class=contract-container><div class=row><div class=\\\"col-lg-4 text-center pull-right f-bold\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></div><div class=\\\"col-lg-5 text-center pull-right f-bold\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></div><div class=\\\"col-lg-3 text-center pull-right form-group f-bold\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></div></div><div class=row data-ng-repeat-start=\\\"item in vm.monitoringCheckList\\\"><div class=\\\"col-lg-4 pull-right justified\\\" data-ng-bind=item.checkList.content></div><div class=\\\"col-lg-4 text-center pull-right\\\"><fieldset data-ng-disabled=!vm.allowedAction><div class=\\\"col-xs-3 pull-right f-1r\\\"><input type=radio ng-model=item.checkListStatus value=DONE> {{\\\"APP.MODULES.MONITORING.CHECKLIST.STATUS.DONE\\\"|translate}}</div><div class=\\\"col-xs-3 pull-right f-1r\\\"><input type=radio ng-model=item.checkListStatus value=VIOLATED> {{\\\"APP.MODULES.MONITORING.CHECKLIST.STATUS.VIOLATED\\\"|translate}}</div><div class=\\\"col-xs-3 pull-right f-1r\\\"><input type=radio ng-model=item.checkListStatus value=UNDONE> {{\\\"APP.MODULES.MONITORING.CHECKLIST.STATUS.UNDONE\\\"|translate}}</div><div class=\\\"col-xs-3 pull-right f-1r\\\"><input type=radio ng-model=item.checkListStatus value=UNRELATEDTODIRECTIVE> {{\\\"APP.MODULES.MONITORING.CHECKLIST.STATUS.UNRELATEDTODIRECTIVE\\\"|translate}}</div></fieldset></div><div class=\\\"col-lg-4 text-center pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\': item.checkListStatus === \\'VIOLATED\\' || item.checkListStatus === \\'UNDONE\\'}\\\"><textarea class=form-control type=text data-ng-readonly=!vm.allowedAction data-ng-attr-title={{APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION}} data-ng-attr-name=comment-{{$index}} data-ng-model=item.comment style=\\\"cursor: text\\\" cols=2 data-ng-required=\\\"item.checkListStatus === \\'VIOLATED\\' || item.checkListStatus === \\'UNDONE\\'\\\"></textarea><!--<span class=\\\"form-control\\\" data-ng-hide=\\\"vm.allowedAction\\\"--><!--data-ng-bind=\\\"item.comment\\\"></span>--></div></div><hr data-ng-repeat-end=\\\"\\\"></div><div class=pull-left><button class=\\\"btn btn-primary-alt m-t-1\\\" data-ng-show=vm.allowedAction data-ng-disabled=\\\"checklistForm.$invalid || vm.loadingCheckList\\\" data-ng-click=vm.addCheckListToMonitoring() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><span data-translate=APP.ACTIONS.SAVE></span> <i class=\\\"fa fa-save\\\"></i></button></div></form></div><div class=clearfix></div><hr><div class=pane-body><span class=\\\"pe-7s-less text-danger f-bold\\\" ng-show=\\\"!vm.monitoring.agentBranchPerformanceEvaluation ||\\r\\n                      !vm.monitoring.applicantPerformanceEvaluation || !vm.monitoring.approverPerformanceEvaluation\\\"></span> <span class=\\\"pe-7s-check text-success f-bold\\\" ng-show=\\\"vm.monitoring.agentBranchPerformanceEvaluation &&\\r\\n                      vm.monitoring.applicantPerformanceEvaluation && vm.monitoring.approverPerformanceEvaluation\\\"></span><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></h4><br><div class=contract-container><div class=row><div class=\\\"col-md-4 pull-right\\\"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT></label></div><div class=\\\"col-md-8 pull-right\\\"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.applicantPerformance value=NO_DEVIATION> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.NO_DEVIATION\\\"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=RELATEDDOCS_WARNING> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.RELATEDDOCS_WARNING\\\"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=LACKOFPROGRESS_PLANREVIEW_WARNING> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.LACKOFPROGRESS_PLANREVIEW_WARNING\\\"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=TOTAL_WARNING> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.TOTAL_WARNING\\\"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=CONDITIONAL_COMMITMENT_CONVERT> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.CONDITIONAL_COMMITMENT_CONVERT\\\"|translate}}<br><input type=radio ng-model=vm.applicantPerformance value=COMMITMENT_CONVERT> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPLICANT.COMMITMENT_CONVERT\\\"|translate}}<br></fieldset></div></div><hr><div class=row><div class=\\\"col-md-4 pull-right\\\"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT></label></div><div class=\\\"col-md-8 pull-right\\\"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.agentBranchPerformance value=NO_DEVIATION> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.NO_DEVIATION\\\"|translate}}<br><input type=radio ng-model=vm.agentBranchPerformance value=TRACE_NEEDED> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.TRACE_NEEDED\\\"|translate}}<br><input type=radio ng-model=vm.agentBranchPerformance value=DEVIATION> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.AGENT_BRANCH.DEVIATION\\\"|translate}}<br></fieldset></div></div><hr><div class=row><div class=\\\"col-md-4 pull-right\\\"><label data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT></label></div><div class=\\\"col-md-8 pull-right\\\"><fieldset data-ng-disabled=!vm.allowedAction><input type=radio ng-model=vm.approverPerformance value=NO_DEVIATION> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.NO_DEVIATION\\\"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_DIRECTIVE_SETTING> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_DIRECTIVE_SETTING\\\"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_CONTRACT_INVESTIGATION> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_CONTRACT_INVESTIGATION\\\"|translate}}<br><input type=radio ng-model=vm.approverPerformance value=INAPPROPRIATE_DIRECTIVE_CONTRACT> {{\\\"APP.MODULES.MONITORING.CHECKLIST.PERFORMANCE_EVALUATION.APPROVER.INAPPROPRIATE_DIRECTIVE_CONTRACT\\\"|translate}}<br></fieldset></div></div></div><div class=pull-left><button class=\\\"btn btn-primary-alt m-t-1\\\" data-ng-show=vm.allowedAction data-ng-click=vm.updatePerformanceEvaluation() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><span data-translate=APP.ACTIONS.SAVE></span> <i class=\\\"fa fa-save\\\"></i></button></div></div><div class=clearfix></div><hr><div class=pane-body><span class=\\\"pe-7s-less text-danger f-bold\\\" ng-show=!vm.monitoring.finalExpertComment></span> <span class=\\\"pe-7s-check text-success f-bold\\\" ng-show=vm.monitoring.finalExpertComment></span><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></h4><br><textarea class=form-control rows=4 cols=139 data-ng-show=vm.allowedAction title={{APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT|translate}} data-ng-model=vm.monitoring.finalExpertComment></textarea><span class=form-control data-ng-hide=vm.allowedAction data-ng-bind=vm.monitoring.finalExpertComment></span><div class=pull-left><button class=\\\"btn btn-primary-alt m-t-1\\\" data-ng-show=vm.allowedAction data-ng-click=vm.addFinalExpertComment() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><span data-translate=APP.ACTIONS.SAVE></span> <i class=\\\"fa fa-save\\\"></i></button></div><div class=clearfix></div></div></div></div></div><div class=\\\"print-only m-l-2\\\"><h1 data-translate=APP.MODULES.MONITORING.CHECKLIST.TITLE></h1><table class=\\\"table table-bordered\\\" style=\\\"margin-left: 5px\\\"><tr><th data-translate=APP.MODULES.MONITORING.CHECKLIST.SUBJECT></th><th data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS.TITLE></th><th data-translate=APP.MODULES.MONITORING.CHECKLIST.CONFLICTS_DESCRIPTION></th></tr><tr data-ng-repeat=\\\"item in vm.monitoringCheckList|checkList\\\"><td data-ng-bind=item.checkList.content></td><td data-ng-bind=item.checkListStatus|checkList></td><td data-ng-bind=item.comment></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.MONITORING_EXPERT_COMMENT></th></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.APPLICANT_COMMENT></td><td colspan=2 data-ng-bind=vm.applicantPerformance|checkList></td></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.AGENT_BRANCH_COMMENT></td><td colspan=2 data-ng-bind=vm.agentBranchPerformance|checkList></td></tr><tr><td data-translate=APP.MODULES.MONITORING.CHECKLIST.APPROVER_COMMENT></td><td colspan=2 data-ng-bind=vm.approverPerformance|checkList></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.CHECKLIST.FINAL_EXPERT_COMMENT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.finalExpertComment></td></tr></table></div>\");\n$templateCache.put(\"app/components/monitoring/comment/comment.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.ACCEPT_REJECT></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button></div></div></div><div class=clearfix></div><div class=module-content ng-if=vm.monitoring.id><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\" ng-hide=\\\"vm.allowedActionList.length<1 || vm.allowedActionList[0].name===\\'start\\'\\\"><form name=monitoringConflictForm novalidate><div class=screen-only><div class=col-sm-12 ng-if=vm.lastAction.comment><label><span data-translate=APP.MODULES.MONITORING.LAST_COMMENT></span> <span data-ng-bind=\\\"\\' توسط: \\' + vm.lastAction.user.name\\\"></span></label><p data-ng-bind=vm.lastAction.comment></p></div><div class=\\\"col-sm-12 pull-right\\\"><label data-translate=APP.SHARE.COMMENT></label><div class=form-group><textarea class=\\\"input-sm form-control\\\" rows=8 placeholder=\\\"توضیحات احتمالی ...\\\" id=comment name=comment style=\\\"resize: none\\\" data-ng-model=vm.comment>\\r\\n                                    </textarea></div></div><div class=\\\"col-sm-12 pull-right\\\"><button type=button class=\\\"btn btn-danger pull-right\\\" data-ng-click=vm.reject() data-ng-hide=\\\"vm.monitoring.currentStep.name === \\'created\\'\\\" data-ng-disabled=!vm.comment><span class=\\\"fa fa-close\\\"></span> <span data-ng-bind=vm.previousStepTitle()></span></button> <button type=button class=\\\"btn btn-success pull-left\\\" data-ng-if=\\\"vm.monitoring.currentStep.name !==\\'created\\' && vm.monitoring.currentStep.name !==\\'started\\'\\\" data-ng-click=vm.accept()><span class=\\\"fa fa-check\\\"></span> <span data-ng-bind=vm.nextStepTitle()></span></button></div></div></form></div><div class=well ng-hide=\\\"vm.allowedActionList.length>0\\\"><p data-translate=AFTER_ACTION_MESSAGE></p></div><div class=well ng-show=\\\"vm.allowedActionList[0].name===\\'start\\'\\\"><p data-translate=START_ACTION_MESSAGE></p></div></pane-body></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/confirm-convert-debit-modal/confirm-convert-debit-modal.html\",\"<div class=modal-header><h3 class=modal-title>افزودن / ویرایش تبدیل دیون به حال</h3></div><div class=modal-body><div class=row><!--LETTER NUMBER--><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_NUMBER></label><label data-ng-if=modalVm.commitConvertDebit.done>( <small>تاریخ ثبت نامه : {{modalVm.commitConvertDebit.doneInsertDate|jDate}}</small> )</label><input class=form-control type=text ng-disabled=modalVm.commitConvertDebit.done maxlength=30 id=letterNumber name=letterNumber data-ng-model=modalVm.commitConvertDebit.doneLetterNumber></div><!--letter Date--><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_DATE></label><simple-date name=letterDate id=letterDate data-ng-model=modalVm.commitConvertDebit.doneDate></simple-date></div><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label>شرح نامه</label><textarea class=form-control id=description name=description data-ng-model=modalVm.commitConvertDebit.doneDescription>\\r\\n            </textarea></div><div class=\\\"form-group col-sm-12 pull-right\\\"><file-upload class=\\\"inline col-xs-3 pull-right\\\" file=modalVm.commitConvertDebit.attachment.attachment label=\\\"{{(\\'APP.SHARE.BROWSE\\'|translate)}}\\\"></file-upload><span class=p-r-1 data-ng-if=\\\"modalVm.commitConvertDebit.attachments.length > 0\\\"><lable>دانلود فایل پیوست</lable><a class=\\\"btn btn-sm text-highlight\\\" data-ng-href=\\\" {{modalVm.host + \\'fileManager/attachment/\\' + modalVm.commitConvertDebit.attachments[0].id +\\r\\n                   \\'/getContent/\\' +\\r\\n                   modalVm.commitConvertDebit.attachments[0].name + \\'.\\' + modalVm.commitConvertDebit.attachments[0].type}}\\\" target=_blank><span title=\\\"دانلود پیوست \\\" class=\\\"icon pe-icon pe-7s-download f-19 f-bold\\\"></span></a></span></div><!--action buttons--><div class=\\\"form-group col-sm-12 pull-right\\\"><button data-ng-disabled=\\\"!modalVm.commitConvertDebit.doneLetterNumber || !modalVm.commitConvertDebit.doneDate\\\" class=\\\"pull-left btn btn-success\\\" data-ng-click=modalVm.submit()><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class=\\\"pull-left btn btn-default m-l-1\\\" data-ng-click=modalVm.cancel()><i class=\\\"fa fa-remove\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/contract/contract.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.CONTRACT.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-4><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.DIR_LIST></h4><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-show-filter=false><tr class=text-center><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_COUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.PARTICIPATION_DURATION></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INSTALLMENT_INTERVAL></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONTRACT_INTEREST></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST></th><th class=\\\"text-center screen-only\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.CONCLUDED_CONTRACT_NUMBER></th></tr><tr class=text-center data-ng-repeat=\\\"dircontract in vm.dirContracts\\\"><td data-ng-bind=dircontract.type.name></td><td data-ng-bind=\\\"dircontract.totalAmount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{dircontract.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=dircontract.interestRate|pPercent></td><td data-ng-bind=dircontract.installmentCount|pNumber></td><td data-ng-bind=dircontract.participationDuration|pNumber></td><td data-ng-bind=dircontract.respiratoryPeriod|pNumber></td><td data-ng-bind=dircontract.installmentInterval|pNumber></td><td data-ng-bind=\\\"dircontract.interestAmount|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{dircontract.interestAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{(dircontract.totalAmount + dircontract.interestAmount)|pCurrency:\\'A\\'}}\\\"></td><td><div class=\\\"input-group screen-only\\\" data-ng-show=vm.allowedActions><span class=input-group-addon><i class=\\\"fa fa-warning\\\" data-ng-hide=dircontract.contract.id></i> <i class=\\\"fa fa-check\\\" data-ng-show=dircontract.contract.id></i> </span><input class=form-control required data-ng-attr-title={{dircontract.contract.number|pNumber}} data-ng-model=dircontract.contract.number id=contract-number-from-core> <span class=input-group-btn><button class=\\\"btn btn-success\\\" type=button ng-click=vm.setContractNumber(dircontract) data-ng-disabled=requiredPercentageForm.$invalid title=ثبت><span class=\\\"fa fa-check-circle\\\"></span></button></span></div><span data-ng-bind=dircontract.contract.number|pNumber data-ng-hide=vm.allowedActions></span></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td data-ng-bind=\\\"(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{(vm.sumDirContractTotalAmount + vm.sumDirInterestAmount)|pCurrency:\\'A\\'}}\\\"></td><td></td></tr></table></div></pane-body><hr><pane-body><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h4><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"contract in $data\\\" data-ng-class=\\\"{\\'OrangeBG\\': vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet(),\\r\\n                            \\'GreenBG\\': vm.isMonitoringContract(contract) && vm.isMonitoringContractSet()}\\\" data-ng-attr-title=\\\"{{vm.isMonitoringContract(contract) && !vm.isMonitoringContractSet() ?\\r\\n                             \\'لطفا قرارداد متناظر این پرونده را در مصوبه تعیین نمایید\\'\\r\\n                             : vm.isMonitoringContract(contract) && vm.isMonitoringContractSet() ?\\r\\n                             \\'قرارداد این نظارت\\'\\r\\n                             :\\r\\n                             \\'\\'\\r\\n                             }}\\\"><td data-title=\\\"\\'APP.MODULES.CONTRACT.NUMBER\\'|translate\\\" data-ng-bind=contract.number|pNumber class=ltr-number></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\\'|translate\\\" data-ng-bind=contract.contractType></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT\\'|translate\\\" data-ng-bind=\\\"(contract.totalAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{contract.totalAmount|pCurrency:\\'A\\'}}\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE\\'|translate\\\" data-ng-bind=contract.interestRate|pPercent></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.DATE\\'|translate\\\" data-ng-bind=contract.contractDate|jDate></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.REMAINING_CURRENT\\'|translate\\\" data-ng-bind=\\\"contract.remainingInCurrent|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{contract.remainingInCurrent|pCurrency:\\'A\\'}}\\\"></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.REMAINING_NON_CURRENT\\'|translate\\\" data-ng-bind=\\\"contract.remainingInNonCurrent|pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{contract.remainingInNonCurrent|pCurrency:\\'A\\'}}\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD\\'|translate\\\" data-ng-bind=contract.respiratoryPeriod|pNumber></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td></td><td data-ng-bind=\\\"(vm.sumContractTotalAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumContractTotalAmount|pCurrency:\\'A\\'}}\\\"></td><td></td><td></td><td data-ng-bind=\\\"(vm.sumRemainingInCurrent|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumRemainingInCurrent|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumRemainingInNonCurrent|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumRemainingInNonCurrent|pCurrency:\\'A\\'}}\\\"></td><td></td></tr></table></div></pane-body></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/conflict/conflict-list.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CONFLICT.LIST></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-8><div class=pull-left><button class=\\\"btn btn-sm btn-success-alt\\\" data-ng-if=\\\"vm.state==\\'calculated\\'\\\" data-ng-show=!vm.toggleAdd data-ng-click=\\\"vm.toggleAdd=!vm.toggleAdd\\\"><i class=\\\"fa fa-plus-circle\\\"></i> <span data-translate=APP.ACTIONS.ADD>‌</span></button> <button class=\\\"btn btn-sm btn-warning-alt\\\" data-ng-show=vm.allowedAction data-ng-click=vm.calculateMonitoringConflicts()><i class=\\\"fa fa-calculator\\\"></i> <span data-translate=APP.MODULES.MONITORING.CONFLICT.CALCULATE_CONFLICT>‌</span></button> <button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\" data-ng-show=vm.toggleAdd><form name=monitoringConflictForm data-ng-submit=monitoringConflictForm.$setPristine() novalidate><div class=row><div class=\\\"col-md-8 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE for=CONFLICT_TITLE></label><input class=form-control type=text id=CONFLICT_TITLE name=CONFLICT_TITLE data-ng-model=vm.monitoringConflict.title required></div></div><div class=\\\"col-md-12 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION for=DESCRIPTION></label><textarea class=form-control type=text id=DESCRIPTION name=DESCRIPTION data-ng-model=vm.monitoringConflict.description required>\\r\\n                                    </textarea></div></div></div><div class=row><div class=col-md-3><br><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" data-ng-click=vm.cancelAdd()><i class=\\\"fa fa-close\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class=\\\"btn btn-primary-alt\\\" data-ng-click=vm.createConflict() title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></div></form></div></div><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th data-translate=APP.SHARE.INDEX></th><th data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE></th><th data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION></th><th data-translate=APP.SHARE.OPERATION class=screen-only></th></tr><tr class=text-center data-ng-repeat=\\\"conflict in vm.conflicts|orderBy:\\'automatic\\'\\\" ng-class=\\\"{\\'screen-only\\':conflict.cleared}\\\"><td data-ng-class=\\\"{\\'OrangeBG\\':!conflict.automatic,\\r\\n                                                \\'GreenBG\\':conflict.automatic && conflict.cleared,\\r\\n                                                \\'RedBG\\':conflict.automatic && !conflict.cleared}\\\" data-ng-bind=$index+1|pNumber></td><td><a style=\\\"color: green\\\" ui-sref={{vm.links[conflict.type]}} ng-bind=conflict.title></a></td><td data-ng-bind=conflict.description></td><td class=screen-only><a class=\\\"btn btn-sm text-danger\\\" data-ng-if=\\\"vm.state==\\'calculated\\'\\\" data-ng-show=!conflict.automatic title=\\\"{{\\'APP.ACTIONS.DELETE\\'|translate}}\\\" data-ng-click=vm.deleteConflict(conflict.id)><span class=\\\"icon pe-icon pe-7s-trash f-17\\\"></span> </a><i class=\\\"pe-7s-comment pe-2x pe-va cursor-pointer text-info\\\" data-ng-if=\\\"vm.state==\\'calculated\\'\\\" data-ng-show=conflict.automatic title=\\\"{{\\'APP.ACTIONS.MODIFY\\'|translate}}\\\" data-ng-click=vm.openModal(conflict)></i></td></tr><tr class=text-center data-ng-hide=\\\"vm.conflicts.length || vm.state !== \\'calculated\\'\\\"><td colspan=4 class=text-success data-translate=NO_CONFLICT></td></tr></table></div><div class=\\\"module-footer screen-only\\\"><br><div class=row><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEAR_FALSE></span></div><div class=row><i class=\\\"fa fa-circle GreenFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEARED_TRUE></span></div><div class=row><i class=\\\"fa fa-circle OrangeFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_EXPERT></span></div></div><div class=\\\"module-footer page-break-before print-only\\\"><div class=row><div class=\\\"col-sm-6 col-xs-12 col-print-6 pull-right\\\" data-ng-repeat=\\\"item in vm.monitoring.userMonitorings\\\"><div class=row><div class=\\\"col-xs-3 pull-right\\\"><span data-ng-bind=item.lmsUser.name></span></div><div class=\\\"col-xs-9 pull-right\\\"><img class=\\\"img-responsive print-images\\\" ng-src={{vm.getSignUrl(item.lmsUser)}} alt=\\\"امضا ثبت نشده است\\\"></div></div></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/conflict/update-conflict-modal.html\",\"<div class=modal-header><h2 class=modal-title data-translate=APP.MODULES.TRACE.SAVE_COMMENT></h2></div><div class=modal-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form name=monitoringConflictForm data-ng-submit=monitoringConflictForm.$setPristine() novalidate><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_CLEARED for=CONFLICT_CLEARED></label><select class=form-control id=CONFLICT_CLEARED name=CONFLICT_CLEARED data-ng-options=\\\"auto.id as auto.caption for auto in modalVm.auto\\\" data-ng-model=modalVm.monitoringConflict.cleared required></select></div></div><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.CONFLICT_TITLE for=CONFLICT_TITLE></label><input class=form-control type=text data-ng-disabled=!modalVm.monitoringConflict.automatic id=CONFLICT_TITLE name=CONFLICT_TITLE data-ng-model=modalVm.monitoringConflict.title required></div></div><div class=row><div class=form-group><label data-translate=APP.MODULES.MONITORING.CONFLICT.DESCRIPTION for=DESCRIPTION></label><textarea class=form-control type=text id=DESCRIPTION name=DESCRIPTION data-ng-model=modalVm.monitoringConflict.description required>\\r\\n                                    </textarea></div></div><div class=row><br><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" data-ng-click=modalVm.cancelAdd()><i class=\\\"fa fa-close\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></button> <button class=\\\"btn btn-primary-alt\\\" data-ng-click=modalVm.updateConflictInMonitoring() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button></div></div></form></div></div>\");\n$templateCache.put(\"app/components/monitoring/convert-debit/convert-debit.html\",\"<div class=\\\"container-fluid monitoring\\\"><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-refresh-2 monitoring\\\"></span> <span data-translate=APP.MODULES.MONITORING.CONVERT_DEBIT></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body ng-show=vm.showSearch><form class=\\\"dataTables_wrapper dt-bootstrap no-footer search-container\\\" data-ng-submit=vm.search()><div class=\\\"col-md-12 pull-right\\\"><div class=row><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.NUMBER for=monitoringNumber></label><input class=form-control type=text id=monitoringNumber name=monitoringNumber data-ng-model=vm.searchItem.monitoringNumber></div></div><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMPANY for=companyName></label><input class=form-control type=text id=companyName name=companyName data-ng-model=vm.searchItem.companyName></div></div><!--monitoring from date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_FROM></label><simple-date data-ng-model=vm.monitoringFromDate name=monitoringFromDate></simple-date></div></div><!--monitoring due date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.MONITORING_DATE_TO></label><simple-date data-ng-model=vm.monitoringToDate name=monitoringToDate></simple-date></div></div><!--contract from date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_FROM></label><!--<adm-dtp data-ng-model=\\\"vm.contractFromDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.contractFromDate name=contractFromDate></simple-date></div></div><!--contract due date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.DATE_TO></label><!--<adm-dtp data-ng-model=\\\"vm.contractToDate\\\"></adm-dtp>--><simple-date data-ng-model=vm.contractToDate name=contractToDate></simple-date></div></div><!--create from date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_FROM></label><simple-date data-ng-model=vm.createFromDate name=createFromDate></simple-date></div></div><!--create due date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.CREATE_DATE_TO></label><simple-date data-ng-model=vm.createToDate name=createToDate></simple-date></div></div><!--confirm from date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_FROM></label><simple-date data-ng-model=vm.confirmFromDate name=confirmFromDate></simple-date></div></div><!--confirm due date--><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.LAST_TRANSITION_DATE_TO></label><simple-date data-ng-model=vm.confirmToDate name=confirmToDate></simple-date></div></div><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_FORM for=minContractAmount></label><input class=form-control data-ng-model=vm.searchItem.minContractAmount currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=minContractAmount name=minContractAmount></div></div><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.TOTAL_AMOUNT_TO for=maxContractAmount></label><input class=form-control currency-tooltip=\\\"\\\" dir=ltr ui-number-mask=0 id=maxContractAmount name=maxContractAmount data-ng-model=vm.searchItem.maxContractAmount></div></div><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.CONTRACT.CONTRACT_NUMBER for=contractNumber></label><input class=form-control type=text id=contractNumber name=contractNumber data-ng-model=vm.searchItem.contractNumber></div></div><div class=\\\"col-md-3 pull-right\\\"><div class=form-group><label for=directive data-translate=APP.MODULES.MONITORING.DIRECTIVE_NUMBER></label><input class=form-control type=text id=directive name=directive data-ng-model=vm.searchItem.directiveNumber></div></div></div><div class=row><!-- search expert --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.EXPERT></label><ui-select data-ng-model=vm.searchItem.expert><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.observers |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search teamHead --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.TEAHM_HEAD></label><ui-select data-ng-model=vm.searchItem.teamHead><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.teamHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search finalHead --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.FINAL_HEAD></label><ui-select data-ng-model=vm.searchItem.finalHead><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.finalHeads |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search owner --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.OWNER></label><ui-select data-ng-model=vm.searchItem.owner><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.owners |\\r\\n                                propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=user.province data-ng-bind-html=user.province.title></small></ui-select-choices></ui-select></div></div><!-- search checkList --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label data-translate=APP.MODULES.MONITORING.CHECKLIST.CHECKLIST_ITEMS></label><ui-select data-ng-model=vm.checkList><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span><b data-ng-bind=$select.selected.content></b></span></ui-select-match><ui-select-choices repeat=\\\"item in vm.checkLists |\\r\\n                                                                        propsFilter : {content: $select.search}\\\"><div ng-bind-html=\\\" item.content | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><!-- search checkList Status --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.CHECKLIST.STATUS_VALUE></label><select class=form-control id=checkListStatus data-ng-model=vm.checkListStatus data-ng-options=\\\"status.value as status.caption for status in vm.checkListStatusList\\\"></select></div></div><!--included codes--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_INCLUDED></label><ui-select multiple ng-model=vm.searchItem.includedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!--excluded codes--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.REPORT_CODES_EXCLUDED></label><ui-select multiple ng-model=vm.searchItem.excludedCodes theme=bootstrap sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.SHARE.SEARCH\\'|translate}}\\\">{{$item.code}} &lt;{{$item.title}}&gt;</ui-select-match><ui-select-choices refresh=vm.refreshCodes($select.search) repeat=\\\"code.code as code in vm.codes\\\"><div><span ng-bind-html=\\\"code.code | highlight: $select.search\\\"></span></div><small><span ng-bind-html=\\\"\\'\\'+code.title | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div><!-- search license commitment convert --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label class=control-label for=checkListStatus data-translate=APP.MODULES.MONITORING.LICENSE_COMMITMENT_CONVERT></label><select class=form-control id=licenseCommitment data-ng-model=vm.searchItem.isLicenseCommitmentConvert><option value=null>---هیچکدام---</option><option value=true>بله</option><option value=false>خیر</option></select></div></div><!-- search license commitment convert  Done--><div class=\\\"col-md-6 pull-right\\\"><div class=form-group data-ng-show=\\\"vm.searchItem.isLicenseCommitmentConvert == \\'true\\'\\\"><label class=control-label data-translate=APP.MODULES.MONITORING.LICENSE_COMMITMENT_CONVERT_DONE></label><select class=form-control id=licenseCommitmentConvertDone data-ng-model=vm.searchItem.licenseCommitmentConvertDone><option value=null>---هیچکدام---</option><option value=true>بله</option><option value=false>خیر</option></select></div></div><!-- search province --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><div><ui-select multiple ng-model=vm.searchItem.provinceIds data-ng-change=vm.getBranchesByProvinceIds() theme=bootstrap id=province sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.PROVINCE.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"province.id as province in vm.provinces | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"province.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+province.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div><!-- search branch --><div class=\\\"col-md-6 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.BRANCH></label><div><!--<select class=\\\"form-control\\\"\\r\\n                                                                ng-options=\\\"branch.id as branch.title for branch in vm.branches\\\"\\r\\n                                                                id=\\\"branch\\\" name=\\\"branch\\\"\\r\\n                                                                data-ng-model=\\\"vm.searchItem.branchId\\\">\\r\\n                                                        </select>\\r\\n                                                        <span class=\\\"input-group-addon\\\">\\r\\n                                                            <i class=\\\"fa fa-remove cursor-pointer text-danger\\\"\\r\\n                                                               ng-click=\\\"vm.searchItem.branchId = null\\\"></i>\\r\\n                                                        </span>--><ui-select multiple ng-model=vm.searchItem.branchIds theme=bootstrap id=branch sortable close-on-select=false><ui-select-match ng-attr-placeholder=\\\"{{\\'APP.MODULES.BASIC_INFO.BRANCH.PLACEHOLDER\\'|translate}}\\\">{{$item.title}} &lt;{{$item.code}}&gt;</ui-select-match><ui-select-choices repeat=\\\"branch.id as branch in vm.branches | propsFilter: {title: $select.search, code: $select.search}\\\"><div ng-bind-html=\\\"branch.title | highlight: $select.search\\\"></div><small><span ng-bind-html=\\\"\\'\\'+branch.code | highlight: $select.search\\\"></span></small></ui-select-choices></ui-select></div></div></div></div></div><div class=col-xs-12><br><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=reset data-ng-click=vm.cancelSearch() ng-attr-title=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit ng-attr-title=\\\"{{\\'APP.ACTIONS.SEARCH\\'|translate}}\\\"><i class=\\\"fa fa-search\\\"></i> <span data-translate=APP.ACTIONS.SEARCH></span></button> <button class=\\\"btn btn-primary-alt\\\" type=submit data-ng-click=\\\"vm.exportMonitoring(\\'EXCEL\\')\\\" ng-attr-title=\\\"{{\\'APP.ACTIONS.EXPORT\\'|translate}}\\\"><i class=\\\"fa fa-file-excel-o\\\"></i> <span data-translate=APP.ACTIONS.EXPORT></span></button></div></div></form></div><div class=pane-body id=search-result-container><div class=\\\"row screen-only\\\" data-ng-if=vm.showSearch><div class=\\\"col-xs-12 screen-only\\\" data-ng-hide=vm.loading><span data-translate=\\\"All records count:\\\"></span> <b data-ng-bind=vm.allRecordsCount|pNumber></b> (<span data-ng-bind=vm.fetchTime|pNumber></span>)</div><img src=assets/images/loading-sm.gif alt=\\\"در حال بارگذاری ...\\\" data-ng-show=vm.loading class=centered height=50></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-table-pagination few-paddings\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"monitoring in $data\\\"><td data-title=\\\"\\'APP.SHARE.INDEX\\'|translate\\\"><span data-ng-bind=monitoring.index|pNumber></span></td><td data-title=\\\"\\'APP.MODULES.MONITORING.NUMBER\\'|translate\\\" data-sortable=\\\"\\'number\\'\\\" class=\\\"b-warning {{vm.getDelay(monitoring).class}}\\\"><a dir=ltr data-ng-attr-title={{vm.getDelay(monitoring).title|pNumber}} data-ui-sref=root.monitoring.monitoring-details({monitoringId:monitoring.id})><span data-ng-bind=monitoring.number|pNumber></span></a><br ng-if=monitoring.directive.dirNumber><a dir=ltr ng-if=monitoring.directive.dirNumber data-ui-sref=\\\"root.directive.details({directiveId:monitoring.directive.dirNumber,monitoringId:monitoring.id,monitoringState:\\'root.monitoring.monitoring-details\\'})\\\"><span data-translate=APP.MODULES.DIRECTIVE.NUMBER></span>: <span data-ng-bind=monitoring.directive.dirNumber|pNumber></span></a></td><td data-title=\\\"\\'APP.MODULES.MONITORING.STEP\\'|translate\\\" data-sortable=\\\"\\'currentStepId\\'\\\" data-ng-bind=\\\"monitoring.currentStep.title \\\"></td><td data-title=\\\"(\\'APP.MODULES.MONITORING.DATE\\'|translate)\\\" data-sortable=\\\"\\'createDate\\'\\\"><div data-ng-show=monitoring.contract.contractDate data-ng-bind=\\\"\\'قرارداد:\\' + (monitoring.contract.contractDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.createDate data-ng-bind=\\\"\\'ایجاد:\\' + (monitoring.createDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.monitoringDate data-ng-bind=\\\"\\'بازدید:\\' + (monitoring.monitoringDate|jDate:\\'jYY/jM/jD\\')\\\"></div><div data-ng-show=monitoring.lastTransitionDate data-ng-bind=\\\"\\'   عملیات:\\' + (monitoring.lastTransitionDate|jDate:\\'jYY/jM/jD\\')\\\"></div></td><td data-title=\\\"\\'APP.MODULES.MONITORING.EXPERTS\\'|translate\\\" data-sortable=\\\"\\'userMonitorings.lmsUser.username\\'\\\"><span data-ng-bind=monitoring.userMonitorings[0].lmsUser.name></span> <span data-ng-bind=\\\"\\'، \\' + monitoring.userMonitorings[1].lmsUser.name\\\" ng-if=monitoring.userMonitorings[1]></span><br ng-if=monitoring.teamHeadUserName><span ng-if=monitoring.teamHeadUserName><span data-translate=APP.MODULES.MONITORING.STEPS.TEAM_HEAD></span>: <span data-ng-bind=vm.teamHeadsMap[monitoring.teamHeadUserName].name></span></span></td><td data-title=\\\"\\'APP.MODULES.MONITORING.COMPANY\\'|translate\\\" data-sortable=\\\"\\'contract.companyName\\'\\\" data-ng-bind=monitoring.contract.companyName></td><td data-title=\\\"\\'APP.MODULES.MONITORING.AMOUNT\\'|translate\\\" data-sortable=\\\"\\'contract.totalAmount\\'\\\" data-ng-attr-title=\\\"{{monitoring.contract.totalAmount|pCurrency:\\'A\\'}}\\\"><a dir=ltr data-ng-attr-title={{monitoring.contract.number|pNumber}} data-ng-click=vm.openDetailsModal(monitoring.contract.id,true)><span data-ng-bind=\\\"(monitoring.contract.totalAmount|pCurrency:\\'R\\')\\\"></span></a></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PLACE\\'|translate\\\" data-sortable=\\\"\\'payerBranch\\'\\\"><span data-ng-bind=monitoring.contract.province.title></span><br data-ng-if=monitoring.contract.branch><span data-ng-if=monitoring.contract.branch data-ng-bind=monitoring.contract.branch.title></span></td><td data-title=\\\"\\'عملیات\\'\\\"><span ng-click=vm.addConvertDebitModal(monitoring)><i class=\\\"icon pe-icon f-19 f-bold cursor-pointer\\\" ng-class=\\\" ( monitoring.monitoringCommitmentConvertLicenses.length > 0 ) ?\\r\\n                                                                     \\'pe-7s-pen text-info\\' : \\'pe-7s-plus text-success\\'\\\"></i></span></td><td data-title=\\\"\\'تایید\\'\\\"><span data-ng-if=\\\"monitoring.monitoringCommitmentConvertLicenses.length > 0  && vm.isAdmin\\\" ng-click=vm.confirmConvertDebitModal(monitoring)><i class=\\\"icon pe-icon f-19 f-bold cursor-pointer pe-7s-check\\\" ng-class=\\\" ( monitoring.monitoringCommitmentConvertLicenses[0].done ) ?\\r\\n                                                                     \\'pe-7s-pen text-success\\' : \\'pe-7s-plus text-info\\'\\\"></i></span></td><td data-title=\\\"\\'پیگیری\\'\\\" data-ng-if=vm.isInRoleStaff()><span ng-click=vm.setTrace(monitoring) uib-tooltip=\\\"\\'ایجاد نظارت\\'\\\"><i class=\\\"icon pe-icon f-19 f-bold cursor-pointer pe-7s-clock text-warning\\\"></i></span></td></tr></table></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/convert-debit-modal/add-convert-debit-modal.html\",\"<div class=modal-header><h3 class=modal-title>افزودن / ویرایش تبدیل دیون به حال</h3></div><div class=modal-body><div class=row><!--LETTER NUMBER--><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_NUMBER></label><label data-ng-if=modalVm.convertDebit.id>( <small>تاریخ ثبت نامه : {{modalVm.convertDebit.insertDate|jDate}}</small> )</label><input class=form-control type=text maxlength=30 id=letterNumber name=letterNumber data-ng-model=modalVm.convertDebit.letterNum></div><!--letter Date--><div class=\\\"form-group col-sm-12 pull-right\\\"><label class=control-label data-translate=APP.MODULES.MONITORING.LETTER_DATE></label><simple-date name=letterDate id=letterDate data-ng-model=modalVm.convertDebit.letterDate></simple-date></div><!--action buttons--><div class=\\\"form-group col-sm-12 pull-right\\\"><button data-ng-disabled=\\\"!modalVm.convertDebit.letterNum || !modalVm.convertDebit.letterDate\\\" class=\\\"pull-left btn btn-success\\\" data-ng-click=modalVm.submit()><i class=\\\"fa fa-check\\\"></i> <span data-translate=APP.ACTIONS.SUBMIT></span></button> <a class=\\\"pull-left btn btn-default m-l-1\\\" data-ng-click=modalVm.cancel()><i class=\\\"fa fa-remove\\\"></i> <span data-translate=APP.ACTIONS.CANCEL></span></a></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/dirContract-concludedContract-modal/dirContract-concludedContract.html\",\"<div class=modal-body><div class=module-inner><div class=module-heading><h2 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT.LIST></h2></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-show-filter=false><tr><th class=text-center></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.NUMBER></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.TYPE></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.DATE></th><th class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_CURRENT></th><th class=text-center data-translate=APP.MODULES.CONTRACT.REMAINING_NON_CURRENT></th><th class=text-center data-translate=APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD></th></tr><tr class=text-center data-ng-repeat=\\\"contract in cvm.contracts\\\"><td><input name=checkRadioButton type=radio data-ng-model=cvm.concludedContractId value={{contract.id}} data-ng-checked=cvm.checked[{{contract.id}}]></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.NUMBER\\'|translate\\\" data-ng-bind=contract.number|pNumber></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.TYPE\\'|translate\\\" data-ng-bind=contract.contractType|pNumber></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.AMOUNT\\'|translate\\\" data-ng-bind=\\\"contract.totalAmount|pCurrency:\\'R\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.INTEREST_RATE\\'|translate\\\" data-ng-bind=contract.interestRate|pPercent></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.DATE\\'|translate\\\" data-ng-bind=contract.contractDate|jDate></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.REMAINING_CURRENT\\'|translate\\\" data-ng-bind=\\\"contract.remainingInCurrent|pCurrency:\\'R\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.CONTRACT.REMAINING_NON_CURRENT\\'|translate\\\" data-ng-bind=\\\"contract.remainingInNonCurrent|pCurrency:\\'R\\'\\\"></td><td data-title=\\\"\\'APP.MODULES.DIRECTIVE.CONTRACT.RESPIRATORY_PERIOD\\'|translate\\\" data-ng-bind=contract.respiratoryPeriod|pNumber></td></tr></table><div class=pull-left><a class=\\\"btn btn-primary\\\" ng-click=cvm.setContract()><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></a></div></div></pane-body></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/directive/edit-directive.html\",\"<div class=modal-header><i class=\\\"icon pe-icon pe-7s-close f-17 pull-left cursor-pointer\\\" ng-click=vm.cancel()></i><h3 class=modal-title data-translate=APP.MODULES.MONITORING.SET_DIRECTIVE></h3></div><div class=modal-body><div class=\\\"well text-danger justified\\\">کارشناس گرامی، هم اکنون هیچ شماره مصوبه‌ای برای این نظارت در سامانه ثبت نگردیده است. لازم است پیش از آغاز فرآیند نظارت، مصوبه مربوطه را در سامانه ثبت نمایید. چنانچه مصوبه‌ی این قرارداد باید از نسخه‌های موجود در سامانه استفاده کند، با وارد کردن شماره مصوبه در ورودی بالا، نسخه‌ی مد نظر را برای کپی انتخاب نمایید. در غیر این صورت با خالی گذاشتن ورودی بالا و تنها با ورود شماره مصوبه در ورودی دوم یک مصوبه‌ی جدید ایجاد نمایید.</div><div class=\\\"well text-info justified\\\" data-ng-show=vm.contractDirectiveNumber><span>شماره مصوبه ثبت شده در قرارداد: </span><b data-ng-bind=vm.contractDirectiveNumber></b></div><form name=dirForm><div class=row><div class=\\\"form-group col-sm-12 pull-right\\\"><label>مصوبه‌ی مرجع</label><ui-select theme=bootstrap id=referenceDirective on-select=vm.referenceSelected($model) data-ng-model=vm.referenceMonitoring ng-model-options=\\\"{debounce: 500}\\\"><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind-html=\\\"$select.selected.directive.dirNumber + \\'&nbsp;<small>_&nbsp;\\' + $select.selected.number + \\'</small>\\'\\\"></span></ui-select-match><ui-select-choices repeat=\\\"monitoring in vm.monitoringList\\\" refresh=vm.refreshMonitoringList($select.search) refresh-delay=4><div ng-bind-html=\\\"vm.getDirectiveListText(monitoring) | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><div class=\\\"form-group col-sm-12 pull-right\\\"><label for=directive-number>شماره مصوبه</label><input class=form-control id=directive-number data-ng-model=vm.directiveNumber placeholder=\\\"شماره مصوبه ...\\\" name=directiveNumber></div></div><div class=row><div class=col-sm-12><button type=submit class=\\\"btn btn-primary-alt m-t-1 pull-left\\\" ng-click=vm.setDirective() data-ng-disabled=\\\"dirForm.$invalid || vm.loading\\\"><span data-translate=APP.ACTIONS.SAVE></span> <i class=\\\"fa fa-save\\\"></i></button></div></div></form></div>\");\n$templateCache.put(\"app/components/monitoring/export/columns-modal.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.EXPORT_COLUMNS></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=modalVm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\"></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=row><div class=col-xs-7><div class=col-xs-12><button class=\\\"btn btn-primary\\\" data-ng-click=modalVm.selectAllCheckList(true)><span data-translate=APP.ACTIONS.SELECT_ALL></span> <i class=\\\"fa fa-check-square\\\"></i></button> <button class=\\\"btn btn-default\\\" data-ng-click=modalVm.selectAllCheckList(false)><span data-translate=APP.ACTIONS.DESELECT_ALL></span> <i class=\\\"fa fa-square-o\\\"></i></button></div><div class=\\\"checkbox col-xs-12\\\" data-ng-repeat=\\\"item in modalVm.checklits\\\"><label><input type=checkbox ng-model=item.checked> <span ng-bind=item.content class=m-r-2 data-ng-class=\\\"{\\'text-danger\\': !item.enabled}\\\"></span></label></div></div><div class=col-xs-5><div class=col-xs-12><button class=\\\"btn btn-primary\\\" data-ng-click=modalVm.selectAllColumns(true)><span data-translate=APP.ACTIONS.SELECT_ALL></span> <i class=\\\"fa fa-check-square\\\"></i></button> <button class=\\\"btn btn-default\\\" data-ng-click=modalVm.selectAllColumns(false)><span data-translate=APP.ACTIONS.DESELECT_ALL></span> <i class=\\\"fa fa-square-o\\\"></i></button></div><div class=\\\"checkbox col-xs-12\\\" data-ng-repeat=\\\"key in modalVm.keys\\\"><label><input type=checkbox ng-model=modalVm.columns[key]> <span ng-bind=key class=m-r-2></span></label></div></div><div class=col-xs-12><button class=\\\"btn btn-success col-xs-3\\\" data-ng-click=modalVm.ok()><i class=\\\"fa fa-file-excel-o\\\"></i> <span data-translate=APP.ACTIONS.OK></span></button></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/invoice/batch-insert-modal.html\",\"<div class=modal-header><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.INVOICE.BATCH_INSERT></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=modalVm.cancel()></i></div><div class=modal-body><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><thead><tr class=text-center><th data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th><th data-translate=APP.SHARE.OPERATION></th></tr></thead><tbody><tr class=text-center data-ng-repeat=\\\"invoice in modalVm.invoices\\\"><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'number\\',$index)\\\" data-ng-model=invoice.number title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.NUMBER\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{$index + \\'-0\\'}}\\\" class=form-control></td><td><simple-date data-ng-keypress=\\\"modalVm.keyPressed($event, \\'date\\',$index)\\\" data-ng-model=invoice.date title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{$index + \\'-1\\'}}\\\" class=form-control></simple-date></td><td><select data-ng-options=\\\"IA.id as IA.name for IA in modalVm.investmentActions\\\" data-ng-model=invoice.investmentAction.id title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{$index + \\'-2\\'}}\\\" class=form-control></select></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'description\\',$index)\\\" data-ng-model=invoice.description title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{$index + \\'-3\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'unit\\',$index)\\\" data-ng-model=invoice.unit title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.UNIT\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{$index + \\'-4\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'price\\',$index)\\\" data-ng-model=invoice.price title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.PRICE\\'|translate}}\\\" currency-tooltip dir=ltr ui-number-mask=0 data-ng-attr-id=\\\"{{$index + \\'-5\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'invoiceBasedCount\\',$index)\\\" data-ng-model=invoice.invoiceBasedCount title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\\'|translate}}\\\" type=number data-ng-attr-id=\\\"{{$index + \\'-6\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'monitoringBasedCount\\',$index)\\\" data-ng-model=invoice.monitoringBasedCount title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\\'|translate}}\\\" type=number data-ng-attr-id=\\\"{{$index + \\'-7\\'}}\\\" class=form-control></td><td><i class=\\\"icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger\\\" ng-click=modalVm.remove(invoice.id,$index)></i></td></tr><tr class=\\\"text-center not-persisted\\\"><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'number\\')\\\" data-ng-model=modalVm.invoice.number title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.NUMBER\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-0\\'}}\\\" class=form-control></td><td><simple-date data-ng-keypress=\\\"modalVm.keyPressed($event, \\'date\\')\\\" data-ng-model=modalVm.invoice.date title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-1\\'}}\\\" class=form-control></simple-date></td><td><select data-ng-options=\\\"IA.id as IA.name for IA in modalVm.investmentActions\\\" data-ng-model=modalVm.invoice.investmentAction.id title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-2\\'}}\\\" class=form-control></select></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'description\\')\\\" data-ng-model=modalVm.invoice.description title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-3\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'unit\\')\\\" data-ng-model=modalVm.invoice.unit title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.UNIT\\'|translate}}\\\" type=text data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-4\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'price\\')\\\" data-ng-model=modalVm.invoice.price title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.PRICE\\'|translate}}\\\" currency-tooltip dir=ltr ui-number-mask=0 data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-5\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'invoiceBasedCount\\')\\\" data-ng-model=modalVm.invoice.invoiceBasedCount title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\\'|translate}}\\\" type=number data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-6\\'}}\\\" class=form-control></td><td><input data-ng-keypress=\\\"modalVm.keyPressed($event, \\'monitoringBasedCount\\')\\\" data-ng-model=modalVm.invoice.monitoringBasedCount title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\\'|translate}}\\\" type=number data-ng-attr-id=\\\"{{modalVm.invoices.length + \\'-7\\'}}\\\" class=form-control></td><td style=\\\"background-color: white!important\\\"><i class=\\\"icon pe-icon pe-7s-plus f-21 cursor-pointer text-success\\\" ng-click=modalVm.add()></i></td></tr></tbody><tfoot><tr><td colspan=2>حرکت بین سلول‌ها: <i class=\\\"fa fa-arrows\\\"></i> + CTRL</td><td colspan=2>کپی از ستون بالایی: CTRL + space</td><td colspan=1>ثبت و انتقال به سطر بعدی: ENTER</td><td colspan=1>حذف: SHIFT + DELETE</td><td colspan=3><div class=\\\"alert alert-warning\\\"><i class=\\\"fa fa-warning\\\"></i> توجه! سطر خاکستری (سطر آخر) به لیست افزوده نشده است.</div></td></tr></tfoot></table></div></div></div></div><div class=modal-footer><button class=\\\"btn btn-success col-xs-3\\\" data-ng-click=modalVm.ok()><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.OK></span></button></div>\");\n$templateCache.put(\"app/components/monitoring/invoice/invoice-list.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.INVOICE.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" data-ng-if=vm.allowedAction ng-click=vm.batchInsert()><i class=\\\"fa fa-th-page\\\"></i> <span data-translate=APP.MODULES.MONITORING.INVOICE.BATCH_INSERT></span></button> <button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><!-- heading row: --><tr><th data-translate=APP.MODULES.MONITORING.INVOICE.NUMBER></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DATE></th><th><span data-translate=APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION></span> <i class=\\\"fa fa-sort-desc\\\" data-ng-show=vm.showSortInvestmentAction data-ng-click=\\\"vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()\\\"></i> <i class=\\\"fa fa-sort-asc\\\" data-ng-show=!vm.showSortInvestmentAction data-ng-click=\\\"vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()\\\"></i></th><th data-translate=APP.MODULES.MONITORING.INVOICE.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.INVOICE.UNIT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.PRICE></th><th data-translate=APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT></th><th data-translate=APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT></th><th data-translate=APP.SHARE.OPERATION style=\\\"width: 15%\\\" class=screen-only data-ng-show=vm.allowedAction></th></tr><!-- :heading row end --><!-- repeat rows: --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-class=\\\"{\\'not-persisted\\': !invoice.id}\\\" data-ng-repeat-start=\\\"invoice in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.NUMBER\\'|translate\\\"><i data-ng-bind=invoice.number|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate\\\"><i data-ng-bind=invoice.date|jDate|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.INVESTMENT_ACTION\\'|translate\\\"><i data-ng-bind=invoice.investmentAction.name data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\\'|translate\\\"><i data-ng-bind=invoice.description|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.UNIT\\'|translate\\\"><i data-ng-bind=invoice.unit data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.PRICE\\'|translate\\\"><i data-ng-bind=\\\"(invoice.price|pCurrency:\\'R\\')\\\" data-ng-hide=vm.toggleEdit[$index] title=\\\"{{invoice.price|pCurrency:\\'A\\'}}\\\"></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\\'|translate\\\"><i data-ng-bind=invoice.invoiceBasedCount|pNumber data-ng-hide=vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\\'|translate\\\"><i data-ng-bind=invoice.monitoringBasedCount|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\" data-ng-show=vm.allowedAction class=screen-only><i class=\\\"icon pe-icon pe-7s-note f-20 cursor-pointer text-info\\\" data-ng-hide=vm.toggleEdit[$index] ng-click=\\\"vm.toggleEdit[$index] = true;vm.editing = true;\\\"></i> <i class=\\\"icon pe-icon pe-7s-trash f-20 cursor-pointer text-danger\\\" data-ng-hide=vm.toggleEdit[$index] ng-click=\\\"vm.deleteInvoiceFromMonitoring(invoice.id, $index)\\\"></i></td></tr><tr data-ng-show=vm.toggleEdit[$index]><td colspan=2><input id=numberEdit name=numberEdit class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" data-ng-model=invoice.number></td><td colspan=2><select class=form-control data-ng-options=\\\"IA.id as IA.name for IA in vm.investmentActions\\\" id=investmentActionEdit name=investmentActionEdit data-ng-model=invoice.investmentAction.id></select></td><td colspan=2><input class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" id=unitEdit name=unitEdit data-ng-model=invoice.unit></td><td colspan=2><input data-ng-show=vm.toggleEdit[$index] id=invoiceBasedCountEdit name=invoiceBasedCountEdit class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" type=number min=0 data-ng-model=invoice.invoiceBasedCount></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\" data-ng-show=vm.allowedAction rowspan=2><i class=\\\"icon pe-icon pe-7s-close f-20 cursor-pointer text-warning\\\" ng-show=vm.toggleEdit[$index] ng-click=vm.cancelEdit($index)></i> <i class=\\\"icon pe-icon pe-7s-check f-20 cursor-pointer text-success\\\" ng-show=vm.toggleEdit[$index] ng-click=vm.updateInvoice(invoice.id,invoice,$index)></i></td></tr><tr data-ng-repeat-end data-ng-show=vm.toggleEdit[$index]><td colspan=2><simple-date data-ng-model=invoice.date id=dateEdit name=dateEdit data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate}}\\\" data-ng-required=vm.isCurrent(invoice.investmentAction.id) data-ng-disabled=vm.loading tabindex=12 required></simple-date></td><td colspan=2><input id=descriptionEdit name=descriptionEdit class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" data-ng-model=invoice.description></td><td colspan=2><input data-ng-show=vm.toggleEdit[$index] id=priceList name=priceList class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=invoice.price></td><td colspan=2><input id=monitoringBasedCountEdit name=monitoringBasedCountEdit class=form-control data-ng-keypress=\\\"vm.keyPressed($event, invoice.id,invoice,$index)\\\" type=number min=0 data-ng-model=invoice.monitoringBasedCount></td></tr><!-- :repeat rows end --><!-- empty row: --><tr ng-hide=$data.length class=text-center><td class=text-danger colspan=9 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr><!-- :empty row end --><!-- add rows: --><tr data-ng-if=\\\"vm.allowedAction && !vm.loading\\\" class=screen-only><td colspan=2><input id=number name=number data-ng-disabled=vm.loading tabindex=11 auto-focus=true data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.NUMBER\\'|translate}}\\\" class=form-control data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.number></td><td colspan=2><select class=form-control data-ng-disabled=vm.loading tabindex=13 data-ng-options=\\\"IA.id as IA.name for IA in vm.investmentActions\\\" id=investmentAction name=investmentAction data-ng-model=vm.invoice.investmentAction.id></select></td><td colspan=2><input class=form-control data-ng-disabled=vm.loading tabindex=15 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.UNIT\\'|translate}}\\\" id=unit name=unit type=text data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.unit></td><td colspan=2><input id=invoiceBasedCount name=invoiceBasedCount data-ng-disabled=vm.loading tabindex=17 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.INVOICE_BASE_COUNT\\'|translate}}\\\" class=form-control type=number min=0 data-ng-keypress=vm.keyPressed($event) data-ng-model=vm.invoice.invoiceBasedCount></td><td rowspan=2><a class=\\\"btn btn-sm text-success\\\" data-ng-hide=vm.loading title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-click=vm.addInvoice()><span class=\\\"icon pe-icon pe-7s-plus f-18 f-bold\\\"></span></a></td></tr><tr data-ng-if=vm.allowedAction class=screen-only><td colspan=2><!--<adm-dtp data-ng-model=\\\"vm.invoice.date\\\">\\r\\n                                    <input class=\\\"form-control\\\" type=\\\"text\\\" data-ng-disabled=\\\"vm.loading\\\" tabindex=\\\"12\\\"\\r\\n                                           data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate}}\\\"\\r\\n                                           id=\\\"date\\\" name=\\\"date\\\"\\r\\n                                           data-ng-model=\\\"vm.invoice.date\\\"\\r\\n                                           dtp-input data-ng-keypress=\\\"vm.keyPressed($event)\\\"\\r\\n                                           required>\\r\\n                                </adm-dtp>--><simple-date data-ng-model=vm.invoice.date id=date name=date data-ng-keypress=vm.keyPressed($event) data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DATE\\'|translate}}\\\" data-ng-disabled=vm.loading tabindex=12 required></simple-date></td><td colspan=2><input id=description name=description class=form-control data-ng-keypress=vm.keyPressed($event) tabindex=14 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.DESCRIPTION\\'|translate}}\\\" data-ng-disabled=vm.loading data-ng-model=vm.invoice.description></td><td colspan=2><input id=price name=price class=form-control data-ng-disabled=vm.loading data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.PRICE\\'|translate}}\\\" currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) tabindex=16 data-ng-model=vm.invoice.price></td><td colspan=2><input id=monitoringBasedCount name=monitoringBasedCount data-ng-disabled=vm.loading data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.INVOICE.MONITORING_BASE_COUNT\\'|translate}}\\\" class=form-control type=number min=0 data-ng-keypress=vm.keyPressed($event) tabindex=18 data-ng-model=vm.invoice.monitoringBasedCount></td></tr><!-- :add rows end--></table></div><hr><div class=module-heading><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.DIRECTIVE_BASE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.INVOICE_BASE></th><th class=text-center data-translate=APP.MODULES.MONITORING.INVOICE.CONFLICT.MONITOR_BASE></th><!--<th class=\\\"text-center\\\" data-translate=\\\"APP.SHARE.DESCRIPTION\\\"></th>--></tr><tr class=text-center data-ng-repeat=\\\"item in vm.conflicts\\\"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind=\\\"(item.directiveBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.directiveBased|pCurrency:\\'A\\'}}\\\"></td><td data-ng-class=\\\"{\\'RedBG\\':item.directiveBased > item.invoiceBased }\\\" data-ng-bind=\\\"(item.invoiceBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.invoiceBased|pCurrency:\\'A\\'}}\\\"></td><td data-ng-class=\\\"{\\'RedBG\\':item.directiveBased > item.monitoringBased }\\\" data-ng-bind=\\\"(item.monitoringBased|pCurrency:\\'R\\')\\\" title=\\\"{{item.monitoringBased|pCurrency:\\'A\\'}}\\\"></td><!--<td data-ng-bind=\\\"item.description\\\"></td>--></tr><tr class=\\\"text-center BlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"vm.sumDirectiveBased |pCurrency:\\'R\\'\\\" title=\\\"{{vm.sumDirectiveBased|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumInvoiceBased |pCurrency:\\'R\\'\\\" data-ng-class=\\\"{\\'DarkRedFill\\':vm.sumInvoiceBased < vm.sumDirectiveBased}\\\" title=\\\"{{vm.sumInvoiceBased|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumMonitoringBased |pCurrency:\\'R\\'\\\" data-ng-class=\\\"{\\'DarkRedFill\\':vm.sumMonitoringBased < vm.sumDirectiveBased}\\\" title=\\\"{{vm.sumMonitoringBased|pCurrency:\\'A\\'}}\\\"></td></tr></table></div></div><div class=screen-only><div class=row><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/lat-long/lat-long.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.LAT_LONG.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-4><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" data-ng-show=vm.allowedAction data-ng-disabled=latLongForm.$invalid data-ng-click=vm.updateLatLong() uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><span data-translate=APP.ACTIONS.SAVE></span> <i class=\\\"fa fa-save\\\"></i></button> <button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form name=latLongForm data-ng-submit=latLongForm.$setPristine() novalidate><fieldset data-ng-disabled=!vm.allowedAction><div class=row><div class=\\\"col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':latLongForm.latitude.$dirty && latLongForm.latitude.$invalid}\\\"><label data-translate=APP.MODULES.MONITORING.LAT_LONG.LATITUDE for=latitude></label><input class=\\\"form-control number\\\" type=number data-ng-disabled=vm.loading id=latitude name=latitude min=43 max=63 data-ng-model=vm.monitoring.latitude required></div></div><div class=\\\"col-md-6 col-xs-12 pull-right\\\"><div class=form-group data-ng-class=\\\"{\\'has-error\\':latLongForm.longitude.$dirty && latLongForm.longitude.$invalid}\\\"><label data-translate=APP.MODULES.MONITORING.LAT_LONG.LONGITUDE for=longitude></label><input class=\\\"form-control number\\\" type=number data-ng-disabled=vm.loading id=longitude name=longitude min=20 max=40 data-ng-model=vm.monitoring.longitude required></div></div><div class=\\\"col-md-6 col-xs-12 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.COMMENT for=description></label><textarea class=form-control style=\\\"resize: none\\\" data-ng-disabled=vm.loading id=description name=description data-ng-model=vm.monitoring.locationDescription required></textarea></div></div><div class=\\\"col-xs-12 pull-right DarkRedFill\\\" data-ng-show=\\\"vm.monitoring.id && latLongForm.$invalid\\\"><span data-translate=LOCATION_ERROR data-ng-show=\\\"latLongForm.$error.max || latLongForm.$error.min\\\"></span> <span data-translate=LOCATION_ERROR style=\\\"color: white\\\"></span></div></div><div class=row><div class=lat-long><table border=1 class=\\\"table text-center\\\" style=\\\"max-width: 100%; overflow: hidden\\\"><tbody><tr><td data-translate=APP.MODULES.MONITORING.LAT_LONG.NUMBER></td><td ng-repeat=\\\"value in vm.dimensions\\\" data-ng-bind=\\\"(value.monitoring.number.split(\\'-\\')[0] +\\'-\\'+ (value.monitoring.number.split(\\'-\\')[1]) + \\'...\\' + value.monitoring.number.split(\\'-\\')[value.monitoring.number.split(\\'-\\').length-1])|pNumber\\\" class=ltr-number></td></tr><tr ng-repeat=\\\"title in vm.dimensions\\\"><td><span uib-tooltip={{title.info}} data-ng-bind=title.monitoring.number|pNumber class=ltr-number></span></td><td ng-repeat=\\\"value in vm.dimensions\\\" data-ng-bind=\\\"(title.distance - value.distance)|makePositive|number|pDistance\\\"></td></tr></tbody></table></div></div></fieldset></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/license/license-list.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.LICENSE.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-if-filter=false><tr class=text-center data-ng-class=\\\"{\\'OrangeBG\\':!monitoringLicense.id && !vm.toggleEdit[$index]}\\\" data-ng-repeat=\\\"monitoringLicense in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.NAME\\'|translate\\\"><i data-ng-bind=monitoringLicense.dirLicense.name></i></td><td data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.NUMBER\\'|translate\\\"><i data-ng-bind=monitoringLicense.number|pNumber data-ng-if=!vm.toggleEdit[$index]></i> <input id=numberEdit name=numberEdit class=form-control type=text data-ng-keypress=\\\"vm.keyPressed($event, monitoringLicense, $index)\\\" data-ng-model=monitoringLicense.number data-ng-if=vm.toggleEdit[$index]></td><td data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.ISSUE_DATE\\'|translate\\\"><i data-ng-bind=monitoringLicense.issuingDate|jDate data-ng-if=!vm.toggleEdit[$index]></i><simple-date data-ng-model=monitoringLicense.issuingDate data-ng-if=vm.toggleEdit[$index] id=issuingDateEdit name=issuingDateEdit></simple-date></td><td data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.ISSUED_FROM\\'|translate\\\"><i data-ng-bind=monitoringLicense.issuedFrom data-ng-if=!vm.toggleEdit[$index]></i> <input id=issuedFromEdit name=issuedFromEdit class=form-control type=text data-ng-keypress=\\\"vm.keyPressed($event, monitoringLicense, $index)\\\" data-ng-model=monitoringLicense.issuedFrom data-ng-if=vm.toggleEdit[$index]></td><td data-ng-class=\\\"{ \\'RedBG\\':monitoringLicense.hasConflict}\\\" data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.EXPIRE_DATE\\'|translate\\\"><i data-ng-bind=monitoringLicense.expireDate|jDate data-ng-if=!vm.toggleEdit[$index]></i><simple-date data-ng-model=monitoringLicense.expireDate data-ng-if=vm.toggleEdit[$index] id=expireDateEdit min={{monitoringLicense.issuingDate}} name=expireDateEdit data-ng-keypress=\\\"vm.keyPressed($event, monitoringLicense, $index)\\\"></simple-date></td><td style=\\\"width: 12%\\\" data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.ISINTHENAMEOF_APPLICANT\\'|translate\\\"><i data-ng-bind=monitoringLicense.isInTheNameOfApplicant|trueFalse|translate data-ng-if=!vm.toggleEdit[$index]></i><select class=form-control data-ng-if=vm.toggleEdit[$index] data-ng-options=\\\"tf.id as tf.value for tf in vm.trueFalseList\\\" id=isInTheNameOfApplicantEdit name=isInTheNameOfApplicantEdit data-ng-model=monitoringLicense.isInTheNameOfApplicant required></select></td><td data-ng-class=\\\"{ \\'RedBG\\': monitoringLicense.comment && monitoringLicense.comment.length}\\\" data-title=\\\"\\'APP.MODULES.MONITORING.LICENSE.CONFLICTS\\'|translate\\\"><i data-ng-bind=monitoringLicense.comment data-ng-if=!vm.toggleEdit[$index]></i> <input id=comment name=comment data-ng-if=vm.toggleEdit[$index] class=form-control type=text data-ng-model=monitoringLicense.comment data-ng-keypress=\\\"vm.keyPressed($event, monitoringLicense, $index)\\\"></td><td class=screen-only data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updateLicense(monitoringLicense,$index) delete=vm.deleteLicenseFromMonitoring(monitoringLicense.id) has-delete=\\\"monitoringLicense.id !=null\\\" toggle=vm.toggleEdit[$index]></command-buttons></td></tr></table><hr><div class=module-heading><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.TITLE></h4><div class=clearfix></div></div><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.INDEX></th><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE></th><th data-translate=APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY></th><th data-translate=APP.SHARE.OPERATION></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.monitoring.monitoringLicenseItems\\\"><td data-title=\\\"\\'\\'|translate\\\" data-ng-bind=($index+1)|pNumber></td><td><span data-ng-bind=item.productionType ng-hide=item.editing></span> <input title=\\\"{{\\'APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE\\'|translate}}\\\" class=form-control ng-show=item.editing data-ng-model=item.productionType></td><td><span data-ng-bind=item.nominalCapacity ng-hide=item.editing></span> <input title=\\\"{{\\'APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY\\'|translate}}\\\" class=form-control ng-show=item.editing data-ng-model=item.nominalCapacity></td><td class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEditItem(item) has-edit=true edit=vm.updateLicenseItem(item,$index) delete=vm.deleteLicenseItem(item.id) has-delete=true toggle=item.editing></command-buttons></td></tr><tr><td data-ng-bind=\\\"(vm.monitoring.monitoringLicenseItems.length + 1)|pNumber\\\"></td><td><input title=\\\"{{\\'APP.MODULES.MONITORING.LICENSE.ITEMS.PRODUCTION_TYPE\\'|translate}}\\\" class=form-control data-ng-model=vm.item.productionType></td><td><input title=\\\"{{\\'APP.MODULES.MONITORING.LICENSE.ITEMS.NOMINAL_CAPACITY\\'|translate}}\\\" class=form-control data-ng-model=vm.item.nominalCapacity></td><td><a class=\\\"btn btn-sm text-success\\\" title=افزودن data-ng-click=vm.addLicenseItem()><span class=\\\"icon pe-icon pe-7s-plus f-20\\\"></span></a></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/missionAnnouncement/mission-announcement.html\",\"<div class=\\\"container-fluid monitoring\\\"><h2 class=approve-title></h2><div class=row><div class=\\\"module-wrapper col-xs-12\\\"><section class=module><div class=module-inner><div class=\\\"module-heading screen-only\\\"><h1 class=\\\"module-title inline\\\"><span class=\\\"icon pe-icon pe-7s-mail-open-file monitoring\\\"></span> <span data-translate=APP.MODULES.MONITORING.MISSIONANOUNCEMENT></span></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=\\\"screen-only pane-body\\\"><span data-translate=APP.MODULES.MONITORING.SEARCH_EXPERT></span><form class=\\\"dataTables_wrapper dt-bootstrap search-container\\\" data-ng-submit=vm.getMonitoringByProvinceAndExperts()><div class=row><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.PROVINCE></label><ui-select theme=bootstrap id=province name=province data-ng-change=vm.getExpertByProvince() data-ng-model=vm.province><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.title></span></ui-select-match><ui-select-choices repeat=\\\"province in vm.provinces | propsFilter : {title: $select.search,code:$select.search}\\\"><div ng-bind-html=\\\"(province.title+\\' (\\'+province.code+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.EXPERTS_IN_PROVINCE></label><ui-select theme=bootstrap id=experts name=experts data-ng-change=vm.getCoExpertByProvince() data-ng-model=vm.expert><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat=\\\"expert in vm.experts | propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"(expert.name+\\' (\\'+expert.username+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.MODULES.MONITORING.COMMON_EXPERTS></label><ui-select theme=bootstrap id=commonExperts name=commonExperts data-ng-change=vm.getMonitoringByProvinceAndExperts() data-ng-model=vm.coexpert><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.name></span></ui-select-match><ui-select-choices repeat=\\\"expert in vm.coexperts | propsFilter : {name: $select.search,username:$select.search}\\\"><div ng-bind-html=\\\"(expert.name+\\' (\\'+expert.username+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.DATE_FROM></label><simple-date data-ng-model=vm.dateFrom name=dateFrom id=date-from></simple-date></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label data-translate=APP.SHARE.DATE_TO></label><simple-date data-ng-model=vm.dateTo name=dateTo id=date-to></simple-date></div></div><div class=\\\"col-xs-4 pull-right\\\"><div class=form-group><label for=daysNumber data-translate=APP.MODULES.MONITORING.MISSIONDAYS></label><input type=text ui-number-mask=0 id=daysNumber data-ng-model=vm.daysNumber class=form-control></div></div><div class=\\\"col-xs-4 margin-top-sm screen-only\\\"><div class=pull-left><button class=\\\"btn btn-warning-alt\\\" type=button data-ng-click=vm.cancelSearch() uib-tooltip=\\\"{{\\'APP.ACTIONS.RESET\\'|translate}}\\\"><i class=\\\"fa fa-refresh\\\"></i> <span data-translate=APP.ACTIONS.RESET></span></button> <button class=\\\"btn btn-primary-alt\\\" type=button onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT></span></button></div></div></div></form></div><hr class=\\\"screen-only pane-body\\\"><div class=pane-body id=print-section><div class=\\\"row nazanin-font\\\" style=line-height:1.5><div class=\\\"col-sm-12 text-center\\\"><span class=\\\"text-center font12 nazanin-font\\\">بسمه تعالی</span><br><br></div><div class=\\\"col-sm-12 text-center\\\"><span class=\\\"text-center font16 nazanin-font\\\">ابلاغیه ماموریت اداری</span><br><br></div><div class=col-sm-12><span class=\\\"font16 nazanin-font\\\">آقایان/ خانم ها <b>{{vm.expert.name}} </b><span data-ng-show=vm.coexpert.name>و</span><b> {{vm.coexpert.name}}</b></span></div><div class=col-sm-12><span class=\\\"font16 nazanin-font\\\">موضوع : ابلاغ ماموریت بازدید میدانی از طرح های اعتباری استان </span><span class=\\\"font16 nazanin-font\\\" data-ng-bind=vm.province.title></span><br></div><div class=col-sm-12><span class=\\\"font12 nazanin-font\\\">با سلام</span></div><div class=\\\"col-sm-12 justified\\\"><span class=\\\"font12 nazanin-font\\\">&nbsp;&nbsp;&nbsp;با عنایت به لزوم نظارت بر عملکرد اعتباری مدیریت شعب استان ها، همچنین بررسی نحوه مصرف صحیح تسهیلات دریافت کنندگان اعتبار، بدینوسیله به شما ماموریت داده می شود طی</span> <b class=\\\"font12 nazanin-font\\\" data-ng-bind=vm.daysNumber|pNumber></b> <span class=\\\"font12 nazanin-font\\\">روز کاری در هفته جاری/ آتی </span><!--<span class=\\\"font12 nazanin-font\\\" data-ng-bind=\\\"vm.dateFrom|jDate\\\"></span>--><!--<span class=\\\"font12 nazanin-font\\\">تا</span>--><!--<span class=\\\"font12 nazanin-font\\\" data-ng-bind=\\\"vm.dateTo|jDate\\\"></span>--> <span class=\\\"font12 nazanin-font\\\">ضمن عزیمت به استان </span><span class=\\\"font12 nazanin-font\\\" data-ng-bind=vm.province.title></span> <span class=\\\"font12 nazanin-font\\\">و بازدید از طرح های اعتباری استان به شرح ذیل، گزارش تهیه و از طریق سامانه گزارش‌های مربوطه ثبت گردد.</span><br><br></div></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-show-filter=false><tr class=\\\"text-center font14 nazanin-font\\\"><th data-ng-bind=\\\"\\'APP.MODULES.MONITORING.COMPANY_APPLICANT\\'|translate\\\"></th><th data-ng-bind=\\\"\\'APP.MODULES.CONTRACT.NUMBER\\'|translate\\\"></th><th data-ng-bind=\\\"\\'APP.MODULES.MONITORING.LOANAMOUNT\\'|translate\\\"></th><th data-ng-bind=\\\"\\'APP.MODULES.MONITORING.ECONOMIC_SECTION\\'|translate\\\"></th><th data-ng-bind=\\\"\\'APP.MODULES.MONITORING.PLAN_TYPE\\'|translate\\\"></th><th data-ng-bind=\\\"\\'APP.MODULES.MONITORING.BRANCH\\'|translate\\\"></th></tr><tr class=\\\"text-center font14 nazanin-font\\\" data-ng-repeat=\\\"monitoring in vm.monitorings\\\"><td data-ng-bind=monitoring.contract.companyName></td><td data-ng-bind=monitoring.contract.number|pNumber></td><td data-ng-bind=\\\"(monitoring.contract.totalAmount|pCurrency:\\'R\\')\\\"></td><td data-ng-bind=monitoring.contract.economicSection.name></td><td data-ng-bind=monitoring.contract.planType></td><td data-ng-bind=\\\"monitoring.contract.branch.title + \\' - \\' + (monitoring.contract.branch.code|pNumber)\\\"></td></tr></table></div><div class=row><div class=col-sm-12><br><div class=\\\"fa fa-square-o\\\"></div><span class=\\\"font16 nazanin-font\\\">در خصوص عملکرد معاونت مربوطه و کارشناس نظارت تحت امر گزارش تهیه و اعلام نظر گردد.</span><br></div><div class=\\\"col-sm-4 col-print-4 pull-left text-center\\\"><span class=\\\"font14 nazanin-font\\\" data-ng-hide=vm.isProvince>رییس اداره نظارت بر اعطای تسهیلات </span><span class=\\\"font14 nazanin-font\\\" data-ng-show=vm.isProvince>معاونت اعتباری حفوقی استان {{vm.province.title}}</span><br><span class=\\\"font14 nazanin-font\\\">تاریخ :‌ {{vm.date|jDate}}</span></div></div></div></div></div></div></section></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/monitoring-details/monitoring-details.html\",\"<div class=\\\"module-inner screen-only\\\"><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h1><i class=\\\"pe-7s-angle-left-circle f-2r\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" data-ng-show=vm.allowedAction data-ng-click=vm.editMonitoring(monitoringDetailsForm) data-ng-disabled=monitoringDetailsForm.$invalid uib-tooltip=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\"><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div><div class=\\\"col-md-5 col-md-offset-1 text-center\\\" data-ng-show=vm.allowedAction><span class=text-warning ng-show=\\\"vm.savingStatus == 0\\\" data-translate=\\\"empty monitoring fields\\\"></span> <span class=text-danger ng-show=\\\"vm.savingStatus == 1\\\" data-translate=\\\"editing monitoring fields\\\"></span> <span class=text-success ng-show=\\\"vm.savingStatus == 2\\\" data-translate=\\\"saved monitoring fields\\\"></span></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><form name=monitoringDetailsForm><div class=row><fieldset data-ng-disabled=\\\"!vm.allowedAction || vm.loading\\\"><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.monitoringDate.$invalid}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.DATE></label><!--<adm-dtp data-ng-model=\\\"vm.monitoring.monitoringDate\\\">\\r\\n                                        <input class=\\\"form-control\\\" data-ng-change=\\\"vm.savingStatus = 1\\\"\\r\\n                                               id=\\\"DATE\\\" name=\\\"monitoringDate\\\"\\r\\n                                               data-ng-model=\\\"vm.monitoring.monitoringDate\\\"\\r\\n                                               dtp-input\\r\\n                                               required>\\r\\n                                    </adm-dtp>--><simple-date data-ng-change=\\\"vm.savingStatus = 1\\\" ng-attr-min={{vm.monitoring.directive.dirApproveDate}} data-ng-model=vm.monitoring.monitoringDate id=monitoringDate name=monitoringDate required></simple-date><!--{{monitoringDetailsForm.monitoringDate.$error}}--> <span class=help-block data-ng-show=monitoringDetailsForm.monitoringDate.$error.min data-translate=\\\"monitoring date min error\\\"></span> <span class=help-block data-ng-show=\\\"monitoringDetailsForm.monitoringDate.$error.invalidDate || monitoringDetailsForm.monitoringDate.$error.mask\\\" data-translate=\\\"invalid date error\\\"></span> <span class=help-block data-ng-show=monitoringDetailsForm.monitoringDate.$valid style=\\\"opacity: 0\\\">_</span></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\"><label for=province data-translate=APP.MODULES.MONITORING.PROVINCE></label><span class=form-control data-ng-bind=vm.monitoring.contract.province.title id=province></span></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group ui-select-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && !vm.monitoring.payerBranch}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.BRANCH></label><ui-select theme=bootstrap id=branch data-ng-change=\\\"vm.savingStatus = 1\\\" data-ng-model=vm.monitoring.payerBranch><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=$select.selected.title></span></ui-select-match><ui-select-choices repeat=\\\"branch in vm.branches | propsFilter : {title: $select.search,code:$select.search}\\\"><div ng-bind-html=\\\"(branch.title+\\' (\\'+branch.code+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><div class=col-xs-12></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && !vm.monitoring.branchChiefInMonitoringTime}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></label><ui-select theme=bootstrap id=branchChiefInMonitoringTime data-ng-model=vm.monitoring.branchChiefInMonitoringTime><ui-select-match placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}\\\"><span data-ng-bind=\\\"$select.selected.name + \\'(\\' + $select.selected.code + \\')\\'\\\"></span></ui-select-match><ui-select-choices repeat=\\\"employee in vm.allEmployees\\\" refresh=vm.refreshEmployees($select.search) refresh-delay=4><div ng-bind-html=\\\"(employee.name+\\' (\\'+employee.code+\\')\\') | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.planType.$invalid}\\\"><span ng-show=\\\"!vm.fillTheFields || !monitoringDetailsForm.planType.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && monitoringDetailsForm.planType.$invalid\\\">*</span><label data-translate=APP.MODULES.MONITORING.PLAN_TYPE for=planType></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"planType.value as planType.title for planType in vm.planTypes\\\" id=planType name=planType data-ng-model=vm.monitoring.planType required></select></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.activeness.$invalid}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVENESS for=activeness></label><select class=form-control data-ng-change=\\\"vm.savingStatus = 1\\\" ng-options=\\\"activeness.value as activeness.caption for activeness in vm.activeness\\\" id=activeness name=activeness data-ng-model=vm.monitoring.activenessStatus required></select><span class=help-block style=\\\"opacity: 0\\\">_</span></div><div class=\\\"col-md-4 col-xs-12 pull-right form-group\\\"><span class=red-star>*</span><label for=economicSection data-translate=APP.MODULES.DIRECTIVE.ECONOMIC_SECTION></label><select class=form-control ng-options=\\\"economicSection.id as economicSection.name for economicSection in vm.economicSections\\\" id=economicSection name=economicSection data-ng-model=vm.monitoring.economicSection.id></select></div><div class=\\\"col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.activitySubject.$invalid}\\\"><span class=red-star>*</span><label data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT for=activitySubject></label><textarea class=form-control data-ng-attr-title=\\\"{{vm.monitoring.activitySubject ? vm.monitoring.activitySubject : (APP.MODULES.MONITORING.ACTIVITY_SUBJECT|translate)}}\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" style=\\\"resize: vertical\\\" id=activitySubject name=activitySubject data-ng-model=vm.monitoring.activitySubject required></textarea></div><div class=\\\"col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.projectLocationAddress.$invalid}\\\"><span ng-show=\\\"!vm.fillTheFields || !monitoringDetailsForm.projectLocationAddress.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && monitoringDetailsForm.projectLocationAddress.$invalid\\\">*</span><label data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS for=projectLocationAddress></label><textarea class=form-control style=\\\"resize: vertical\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" id=projectLocationAddress name=projectLocationAddress data-ng-model=vm.monitoring.projectLocationAddress required></textarea></div><div class=\\\"col-md-12 col-xs-12 pull-right form-group\\\" data-ng-class=\\\"{\\'has-error\\':vm.savingStatus == 1 && monitoringDetailsForm.description.$invalid}\\\"><span ng-show=\\\"!vm.fillTheFields || !monitoringDetailsForm.description.$invalid\\\">*</span> <span class=red-star ng-show=\\\"vm.fillTheFields && monitoringDetailsForm.description.$invalid\\\">*</span><label data-translate=APP.SHARE.COMMENT for=projectLocationAddress></label><textarea class=form-control style=\\\"resize: vertical\\\" data-ng-change=\\\"vm.savingStatus = 1\\\" id=description name=description data-ng-model=vm.monitoring.description required></textarea></div><!--<div class=\\\"col-md-12 col-xs-12 pull-right form-group\\\">\\r\\n                                    <label data-translate=\\\"APP.SHARE.MESSAGE\\\"\\r\\n                                           for=\\\"firstDescription\\\"></label>\\r\\n                                    <textarea class=\\\"form-control\\\" style=\\\"resize: none;\\\"\\r\\n                                              id=\\\"firstDescription\\\" name=\\\"firstDescription\\\"\\r\\n                                              data-ng-model=\\\"vm.monitoring.firstDescription\\\"\\r\\n                                              ></textarea>\\r\\n                                </div>--></fieldset></div></form></div></div></div></div></div><div class=print-only style=\\\"margin: 0px 15px\\\"><h2 data-translate=APP.MODULES.MONITORING.MONITORING_DETAILS></h2><table class=\\\"table table-bordered\\\"><tr><th data-translate=APP.MODULES.MONITORING.DATE></th><th data-translate=APP.MODULES.MONITORING.PROVINCE></th><th data-translate=APP.MODULES.MONITORING.BRANCH></th></tr><tr><td data-ng-bind=vm.monitoring.monitoringDate|jDate></td><td data-ng-bind=vm.monitoring.contract.province.title></td><td data-ng-bind=vm.monitoring.payerBranch.title></td></tr><tr><th data-translate=APP.MODULES.MONITORING.BRANCHCHIEF_INMONITORINGTIME></th><th data-translate=APP.MODULES.MONITORING.PLAN_TYPE></th><th data-translate=APP.MODULES.MONITORING.ACTIVITY_SUBJECT></th></tr><tr><td data-ng-bind=vm.monitoring.branchChiefInMonitoringTime.name></td><td data-ng-bind=vm.monitoring.planType|planType></td><td data-ng-bind=vm.monitoring.activitySubject></td></tr><tr><th colspan=3 data-translate=APP.MODULES.MONITORING.PROJECT_LOCATIONADDRESS></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.projectLocationAddress></td></tr><tr><th data-translate=APP.SHARE.COMMENT></th></tr><tr><td colspan=3 data-ng-bind=vm.monitoring.description></td></tr></table></div>\");\n$templateCache.put(\"app/components/monitoring/monitoringFlow/monitoring-flow.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.FLOW_VIEW.LIST></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=vm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"well well-sm\\\" ng-if=\\\"vm.actuator || vm.creator\\\"><div class=row ng-if=vm.actuator><b class=col-xs-8 data-ng-bind=vm.actuator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.ACTUATOR></div></div><div class=row ng-if=vm.creator><b class=col-xs-4 data-ng-bind=vm.createDate|jDate></b> <b class=col-xs-4 data-ng-bind=vm.creator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.CREATOR></div></div></div><div class=row><div class=col-xs-12><label for=show-all class=\\\"pull-right btn btn-default\\\"><input type=checkbox class=\\\"pull-right m-l-1\\\" id=show-all name=showAll data-ng-model=vm.showAll> <span data-translate=APP.MODULES.MONITORING.FLOW_VIEW.SHOW_ALL></span></label></div></div><div class=\\\"dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-show=\\\"(processLog.transition.name != \\'editing\\' && processLog.transition.name != \\'calculating\\' && processLog.comment != \\'Authentication Failed\\') || vm.showAll\\\" data-ng-repeat=\\\"processLog in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.USERNAME\\'|translate\\\" data-ng-bind=processLog.user.name></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\\'|translate\\\" data-ng-bind=processLog.transition.id|monitoringTransitionCaption></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.DATE\\'|translate\\\" data-ng-bind=processLog.createDate|jDate></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\\'|translate\\\" data-ng-bind=processLog.createDate|timeFilter|pNumber></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.COMMENT\\'|translate\\\" data-ng-bind=\\\"processLog.comment ? (processLog.comment|translate) : \\'-\\'\\\"></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/payments/payments-list.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><!-- main section --><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><!-- data table --><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><thead><tr><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE></th><th rowspan=2><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></span> <i class=\\\"fa fa-sort-desc\\\" data-ng-show=vm.showSortInvestmentAction data-ng-click=\\\"vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()\\\"></i> <i class=\\\"fa fa-sort-asc\\\" data-ng-show=!vm.showSortInvestmentAction data-ng-click=\\\"vm.showSortInvestmentAction=!vm.showSortInvestmentAction; vm.sort()\\\"></i></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER></th><th colspan=3 data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_AMOUNT></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></th><th rowspan=2 data-translate=APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION></th><th rowspan=2 data-translate=APP.SHARE.OPERATION class=screen-only style=\\\"min-width: 95px\\\"></th></tr><tr><th data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT></th><th data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT></th><th data-translate=APP.MODULES.MONITORING.PAYMENTS.SUM></th></tr></thead><tbody><!-- data rows ng-repeat --><tr class=text-center data-ng-hide=vm.toggleEdit[$index] data-ng-repeat-start=\\\"payment in $data\\\"><td><i data-ng-bind=payment.chequeDate|jDate|pNumber data-ng-if=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=payment.investmentAction.name data-ng-show=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=payment.chequeNumber|pNumber data-ng-show=!vm.toggleEdit[$index]></i></td><td><i data-ng-bind=\\\"(payment.bankSharedChequeAmount|pCurrency:\\'R\\')\\\" data-ng-hide=vm.toggleEdit[$index] data-ng-attr-title=\\\"{{payment.bankSharedChequeAmount|pCurrency:\\'A\\'}}\\\"></i></td><td><i data-ng-bind=\\\"(payment.applicantSharedChequeAmount|pCurrency:\\'R\\')\\\" data-ng-hide=vm.toggleEdit[$index] data-ng-attr-title=\\\"{{payment.applicantSharedChequeAmount|pCurrency:\\'A\\'}}\\\"></i></td><td data-ng-bind=\\\"((payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{(payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\\'A\\'}}\\\"></td><td data-ng-class=\\\"{\\'RedBG\\': vm.payeeConflict(payment)}\\\"><i data-ng-bind=payment.payee|payee data-ng-show=!vm.toggleEdit[$index]></i></td><td data-ng-class=\\\"{\\'RedBG\\': payment.conflictDescription && payment.conflictDescription.length}\\\"><i data-ng-bind=payment.conflictDescription data-ng-show=!vm.toggleEdit[$index]></i><!--<form name=\\\"paymentForm{{$index}}\\\" data-ng-show=\\\"vm.toggleEdit[$index]\\\" novalidate>\\r\\n\\r\\n                                </form>--></td><td><i data-ng-bind=payment.description data-ng-show=!vm.toggleEdit[$index]></i></td><td class=screen-only><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updatePayment(payment.id,payment,$index) delete=vm.deletePaymentFromMonitoring(payment.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><!-- edit rows --><tr class=text-center data-ng-if=vm.toggleEdit[$index]><td colspan=3><simple-date data-ng-model=payment.chequeDate id=chequeDateEdit name=chequeDateEdit data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" required></simple-date></td><td colspan=3><input name=bankSharedChequeAmountEdit class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=payment.bankSharedChequeAmount data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" data-ng-show=vm.toggleEdit[$index]></td><td colspan=3><select id=payee-edit name=payee class=form-control data-ng-options=\\\"payee.key as payee.caption for payee in vm.payees\\\" data-ng-model=payment.payee></select></td><td rowspan=3><command-buttons data-ng-show=vm.allowedAction cancel=vm.cancelEdit($index) has-edit=true edit=vm.updatePayment(payment.id,payment,$index) delete=vm.deletePaymentFromMonitoring(payment.id) has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><tr data-ng-if=vm.toggleEdit[$index]><td colspan=3><select class=form-control data-ng-options=\\\"IA.id as IA.name for IA in vm.investmentActions\\\" id=investmentActionEdit name=investmentActionEdit data-ng-model=payment.investmentAction.id></select></td><td colspan=3 style=\\\"border-top: none\\\"><input name=applicantSharedChequeAmountEdit class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=payment.applicantSharedChequeAmount data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" data-ng-show=vm.toggleEdit[$index]></td><td colspan=3><textarea id=conflictDescriptionEdit name=conflictDescriptionEdit data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" class=form-control rows=4 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\\'|translate}} ...\\\" data-ng-model=payment.conflictDescription></textarea></td></tr><tr data-ng-if=vm.toggleEdit[$index] data-ng-repeat-end=\\\"\\\"><td colspan=3><input id=chequeNumberEdit name=chequeNumberEdit class=form-control data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" data-ng-model=payment.chequeNumber></td><td colspan=3 style=\\\"border-top: none\\\"><span id=chequeTotalAmountEdit class=form-control data-ng-attr-title=\\\"{{(payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"((\\'APP.MODULES.MONITORING.PAYMENTS.SUM\\'|translate) + \\': \\' + (payment.bankSharedChequeAmount + payment.applicantSharedChequeAmount)|pCurrency)\\\"></span></td><td colspan=3><textarea id=descriptionEdit name=descriptionEdit data-ng-keypress=\\\"vm.keyPressed($event, null, payment.id, payment, $index)\\\" class=form-control rows=4 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\\'|translate}} ...\\\" data-ng-model=payment.description></textarea></td></tr><!-- sum row --><tr class=\\\"text-center LightBlueBG\\\" ng-show=$data.length><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td></td><td></td><td data-ng-bind=\\\"vm.sumBankSharedChequeAmount |pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.sumBankSharedChequeAmount |pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumApplicantSharedChequeAmount |pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.sumApplicantSharedChequeAmount |pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"vm.sumTotalAmount |pCurrency:\\'R\\'\\\" data-ng-attr-title=\\\"{{vm.sumTotalAmount |pCurrency:\\'A\\'}}\\\"></td><td></td><td></td><td></td><td class=screen-only></td></tr><!-- empty data notification row--><tr class=text-center ng-hide=$data.length><td class=text-warning colspan=9 data-translate=NOTHING_HAS_BEEN_SUBMITTED></td></tr></tbody></table><!-- add form --><form name=addPaymentForm class=screen-only><table class=\\\"hover no-footer row-border dataTable\\\"><tbody><!-- add rows --><tr class=text-center data-ng-show=vm.allowedAction><td colspan=3><div class=\\\"form-group has-feedback\\\"><simple-date data-ng-model=vm.payment.chequeDate id=chequeDate name=chequeDate auto-focus=true tabindex=1 data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE\\'|translate}}\\\" required></simple-date><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_DATE class=\\\"form-control-feedback text-feedback rtl\\\"></span></div></td><td colspan=3><div class=\\\"form-group has-feedback\\\"><input id=bankSharedChequeAmount name=bankSharedChequeAmount tabindex=4 class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-model=vm.payment.bankSharedChequeAmount data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\" data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT\\'|translate}}\\\"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.BANK_SHARED_CHEQUE_AMOUNT data-ng-show=vm.payment.bankSharedChequeAmount class=\\\"form-control-feedback text-feedback rtl\\\"></span></div></td><td colspan=3><div class=\\\"form-group has-feedback\\\"><select id=payee name=payee class=\\\"form-control rtl\\\" tabindex=6 data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.PAYEE\\'|translate}}\\\" data-ng-options=\\\"payee.key as payee.caption for payee in vm.payees\\\" data-ng-model=vm.payment.payee></select><span data-translate=APP.MODULES.MONITORING.PAYMENTS.PAYEE class=\\\"form-control-feedback text-feedback ltr p-l-3\\\"></span></div></td><td rowspan=3><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold text-success\\\" tabindex=8 data-ng-show=vm.allowedAction data-ng-attr-title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-click=vm.addPayment(addPaymentForm)></i></td></tr><tr data-ng-show=vm.allowedAction><td colspan=3><div class=\\\"form-group has-feedback\\\"><select class=\\\"form-control rtl\\\" tabindex=2 data-ng-options=\\\"IA.id as IA.name for IA in vm.investmentActions\\\" id=investmentAction name=investmentAction data-ng-model=vm.payment.investmentAction.id></select><span data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION class=\\\"form-control-feedback text-feedback ltr p-l-3\\\"></span></div></td><td colspan=3 style=\\\"border-top: none\\\"><div class=\\\"form-group has-feedback\\\"><input id=applicantSharedChequeAmount name=applicantSharedChequeAmount class=form-control currency-tooltip dir=ltr ui-number-mask=0 data-ng-keypress=vm.keyPressed($event) data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\" data-ng-model=vm.payment.applicantSharedChequeAmount tabindex=5 data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT\\'|translate}}\\\"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.APPLICANT_SHARED_CHEQUE_AMOUNT data-ng-show=vm.payment.applicantSharedChequeAmount class=\\\"form-control-feedback text-feedback rtl\\\"></span></div></td><td colspan=3><div class=form-group><label for=conflictDescription data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION></label><textarea id=conflictDescription name=conflictDescription class=form-control tabindex=7 rows=4 style=\\\"resize: none\\\" data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\\'|translate}} ...\\\" data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.CONFLICT_DESCRIPTION\\'|translate}} ...\\\" data-ng-model=vm.payment.conflictDescription></textarea></div></td></tr><tr data-ng-show=vm.allowedAction><td colspan=3><div class=\\\"form-group has-feedback\\\"><input id=chequeNumber name=chequeNumber class=\\\"form-control rtl\\\" tabindex=3 placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER\\'|translate}}\\\" data-ng-model=vm.payment.chequeNumber required data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\"> <span data-translate=APP.MODULES.MONITORING.PAYMENTS.CHEQUE_NUMBER data-ng-show=vm.payment.chequeNumber class=\\\"form-control-feedback text-feedback ltr p-l-1\\\"></span></div></td><td colspan=3 style=\\\"border-top: none\\\"><span id=chequeTotalAmount class=form-control data-ng-bind=\\\"((\\'APP.MODULES.MONITORING.PAYMENTS.SUM\\'|translate) + \\': \\' + (vm.payment.bankSharedChequeAmount + vm.payment.applicantSharedChequeAmount)|pCurrency)\\\"></span></td><td colspan=3><div class=form-group><label for=description data-translate=APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION></label><textarea id=description name=escription class=form-control tabindex=8 rows=4 style=\\\"resize: none\\\" data-ng-keypress=\\\"vm.keyPressed($event, addPaymentForm)\\\" data-ng-attr-title=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\\'|translate}} ...\\\" data-ng-attr-placeholder=\\\"{{\\'APP.MODULES.MONITORING.PAYMENTS.DESCRIPTION\\'|translate}} ...\\\" data-ng-model=vm.payment.description></textarea></div></td></tr><!-- :add rows end --></tbody></table></form></div><hr><!-- validation section --><div class=module-heading><h4 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.TITLE></h4><div class=clearfix></div></div><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.INVESTMENT_ACTION></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_BANK_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_BANK_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.DIRECTIVEBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENTBASED_APPLICANT_QUOTA></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.PAYMENT_STEPS></th><th class=text-center data-translate=APP.MODULES.MONITORING.PAYMENTS.CONFLICT.ISSUEDCHEQUE_COUNT></th></tr><tr class=text-center data-ng-repeat=\\\"item in vm.conflicts\\\"><td data-ng-bind=item.investmentAction.name></td><td data-ng-bind=\\\"(item.directiveBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.directiveBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td ng-class=vm.bankQouta[$index] data-ng-bind=\\\"(item.paymentBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.paymentBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(item.directiveBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.directiveBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td ng-class=vm.applicantQouta[$index] data-ng-bind=\\\"(item.paymentBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{item.paymentBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=item.paymentStepCount|pNumber></td><td ng-class=vm.countQouta[$index] data-ng-bind=item.chequeCount|pNumber></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumDirectiveBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumDirectiveBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumPaymentBasedBankShared|pCurrency:\\'R\\')\\\" data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumPaymentBasedBankShared < vm.sumDirectiveBasedBankShared , \\'DarkOrangeFill\\': vm.sumPaymentBasedBankShared > vm.sumDirectiveBasedBankShared }\\\" data-ng-attr-title=\\\"{{vm.sumPaymentBasedBankShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumDirectiveBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-class=vm.applicantQouta[$index] data-ng-attr-title=\\\"{{vm.sumDirectiveBasedApplicantShared|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"(vm.sumPaymentBasedApplicantShared|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumPaymentBasedApplicantShared|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumDirectiveBasedApplicantShared > vm.sumPaymentBasedApplicantShared }\\\"></td><td data-ng-bind=(vm.sumPaymentStepCount|pNumber)></td><td data-ng-bind=(vm.sumChequeCount|pNumber) data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumPaymentStepCount > vm.sumChequeCount }\\\"></td></tr></table></div><div class=screen-only><div class=row><i class=\\\"fa fa-circle GreenFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.NOCONFLICT></span></div><div class=row><i class=\\\"fa fa-circle OrangeFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div><div class=row><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/preConditions/preConditions.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.DIRECTIVE.CONTRACT_PRECONDITIONS.TITLE></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.setConditionInMonitoring()><i class=\\\"fa fa-save\\\"></i> <span data-translate=APP.ACTIONS.SAVE></span></button> <button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable ng-scope ng-table\\\"><tr><th>#</th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.CONDITION_NAME></th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.DESCRIPTION></th><th data-translate=APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS></th><th data-ng-show=vm.allowedAction></th></tr><tr data-ng-repeat=\\\"item in vm.preConditions\\\"><td style=\\\"width: 10%\\\">{{ $index + 1 }}</td><td style=\\\"width: 30%\\\" data-ng-bind=item.dirCondition.condition></td><td style=\\\"width: 40%\\\"><textarea data-ng-model=item.description class=\\\"form-control input-sm\\\" data-ng-show=vm.allowedAction title=\\\"{{\\'APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.DESCRIPTION\\'|translate}}\\\"></textarea><div data-ng-bind=item.description data-ng-hide=vm.allowedAction></div></td><td style=\\\"width: 20%\\\"><select class=form-control title=\\\"{{\\'APP.MODULES.MONITORING.CONTRACT_PRECONDITIONS.STATUS\\'|translate}}\\\" id=itemReply name=itemReply data-ng-show=vm.allowedAction data-ng-model=item.reply data-ng-options=\\\"reply.value as reply.name for reply in vm.replys\\\" required></select><span data-ng-bind=item.reply|conditionStatus data-ng-hide=vm.allowedAction></span></td><td class=screen-only data-ng-show=vm.allowedAction><i class=\\\"icon pe-icon pe-7s-trash f-20 text-danger cursor-pointer\\\" ng-click=vm.deletePrecondition(item) ng-show=item.dirCondition.originalId></i></td></tr><tfoot></tfoot></table></div></pane-body></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/progress/progress.html\",\"<div class=module-inner><div class=module-heading><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PROGRESS.LIST></h1><i class=\\\"pe-7s-angle-left-circle f-2r screen-only\\\" ng-click=vm.next()></i><div class=col-md-3><div class=pull-left><button class=\\\"btn btn-sm btn-primary-alt\\\" ng-click=vm.openAttachmentModal()><i class=\\\"fa fa-file-o\\\"></i> <span data-translate=APP.MODULES.MONITORING.ATTACHMENTS.TITLE></span></button> <button class=\\\"btn btn-sm btn-info-alt\\\" onclick=window.print()><i class=\\\"fa fa-print\\\"></i> <span data-translate=APP.ACTIONS.PRINT>‌</span></button></div></div></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-repeat=\\\"progress in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.PROGRESS.INVESTMENT_ACTION\\'|translate\\\" data-ng-bind=progress.investmentAction.name></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PROGRESS.DIRECTIVE_BASE_AMOUNT\\'|translate\\\" data-ng-attr-title=\\\"{{progress.directiveBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"(progress.directiveBasedAmount|pCurrency:\\'R\\')\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PROGRESS.INVOICE_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\\'|translate\\\" data-ng-attr-title=\\\"{{progress.invoiceBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"\\'(\\' + (progress.invoiceBasedToDirectiveBasedAmountRate|number:0|pPercent)  + \\') \\'\\r\\n                                 + (progress.invoiceBasedAmount|pCurrency:\\'R\\')\\\" data-ng-class=\\\"{\\'RedBG\\':progress.invoiceBasedAmount < progress.directiveBasedAmount, \\'GreenBG\\':progress.invoiceBasedAmount >= progress.directiveBasedAmount}\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PROGRESS.PAYMENT_BASE_TO_DIRECTIVE_BASE_AMOUNT_RATE\\'|translate\\\" data-ng-attr-title=\\\"{{progress.paymentBasedAmount|pCurrency:\\'A\\'}}\\\" data-ng-bind=\\\"\\'(\\' + (progress.paymentBasedToDirectiveBasedAmountRate|number:0|pPercent) + \\') \\'\\r\\n                                + (progress.paymentBasedAmount|pCurrency:\\'R\\')\\\" data-ng-class=\\\"{\\'OrangeBG\\':progress.paymentBasedAmount > progress.directiveBasedAmount, \\'GreenBG\\':progress.paymentBasedAmount == progress.directiveBasedAmount, \\'RedBG\\':progress.paymentBasedAmount < progress.directiveBasedAmount}\\\"></td><td data-title=\\\"\\'APP.MODULES.MONITORING.PROGRESS.PROGRESS_RATE\\'|translate\\\" data-ng-bind=progress.progressRate|number:0|pPercent data-ng-class=\\\"{\\'RedBG\\':progress.progressRate < progress.paymentBasedToDirectiveBasedAmountRate,\\r\\n                                 \\'GreenBG\\':progress.progressRate >= progress.paymentBasedToDirectiveBasedAmountRate}\\\"></td></tr><tr class=\\\"text-center LightBlueBG\\\"><td data-ng-bind=\\\"\\'APP.SHARE.SUM\\'|translate\\\"></td><td data-ng-bind=\\\"(vm.sumDirectiveBasedAmount|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumDirectiveBasedAmount|pCurrency:\\'A\\'}}\\\"></td><td data-ng-bind=\\\"\\'(\\' + (vm.sumInvoiceToDirectivePercent|number:0|pPercent) + \\') \\'\\r\\n                            + (vm.sumInvoiceToDirective|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumInvoiceToDirective|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'DarkRedFill\\':vm.sumInvoiceToDirective < vm.sumDirectiveBasedAmount}\\\"></td><td data-ng-bind=\\\"\\'(\\' + (vm.sumPaymentToDirectivePercent|number:0|pPercent) + \\') \\'\\r\\n                            + (vm.sumPaymentToDirective|pCurrency:\\'R\\')\\\" data-ng-attr-title=\\\"{{vm.sumPaymentToDirective|pCurrency:\\'A\\'}}\\\" data-ng-class=\\\"{\\'DarkOrangeFill\\': vm.sumPaymentToDirective > vm.sumDirectiveBasedAmount, \\'DarkRedFill\\':vm.sumPaymentToDirective < vm.sumDirectiveBasedAmount}\\\"></td><!--<td data-ng-bind=\\\"(vm.sumPaymentToDirectivePercent|number:0|pPercent)\\\"></td>--><td data-ng-bind=(vm.sumProgressRate|number:0|pPercent) data-ng-class=\\\"{\\'DarkRedFill\\': vm.sumProgressRate < vm.sumPaymentToDirectivePercent}\\\"></td></tr></table></div><div class=screen-only><div class=row><i class=\\\"fa fa-circle GreenFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.NOCONFLICT></span></div><div class=row><i class=\\\"fa fa-circle OrangeFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.GREATER_THAN_DIRECTIVE_AMOUNTS></span></div><div class=row><i class=\\\"fa fa-circle RedFill\\\"></i> <span class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.PAYMENTS.LESS_THAN_DIRECTIVE_AMOUNTS></span></div></div></pane-body></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/trace/trace.html\",\"<div class=module-inner><!--hide navigation button on called from convert debit --><div class=module-heading data-ng-if=!vm.fromConvertDebit><i class=\\\"pe-7s-angle-right-circle f-2r screen-only\\\" ng-click=vm.previous()></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE></h1><div class=clearfix></div></div><div class=\\\"module-heading convert-debit-trace-bg\\\" data-ng-if=vm.fromConvertDebit><i class=\\\"pe-7s-stopwatch pe-5x f-2r screen-only\\\"></i><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.MONITORING_TRACE_CONVERT_DEBIT></h1><div class=clearfix></div></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper form-inline dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\" ng-if=vm.monitoring.id><tr class=text-center><th data-translate=APP.SHARE.ID></th><th data-translate=APP.MODULES.TRACE.BOUNDED_USER></th><th data-translate=APP.SHARE.STATUS></th><th data-translate=APP.SHARE.DATE></th><th data-translate=APP.MODULES.TRACE.DESCRIPTION></th><th></th></tr><tr class=text-center data-ng-hide=item.editing data-ng-repeat-start=\\\"item in vm.traces\\\"><td><a class=\\\"btn btn-sm text-info\\\" title=\\\"{{\\'APP.ACTIONS.VIEW\\'|translate}}\\\" ui-sref=root.trace-detail({id:item.id}) data-ng-bind=item.id|pNumber></a></td><td><span data-ng-bind=item.user.name></span></td><td><span data-ng-bind=item.currentStep.title></span></td><td style=\\\"min-width: 90px\\\"><span data-ng-bind=item.alertDate|jDate|pNumber></span></td><td colspan=2><span data-ng-bind=item.description></span></td><td><i class=\\\"icon pe-icon pe-7s-trash f-20 text-danger\\\" ng-click=vm.deleteTrace(item) data-ng-show=item.canEdit title=\\\"{{\\'APP.ACTIONS.REMOVE\\'|translate}}\\\"></i> <i class=\\\"icon pe-icon pe-7s-note f-20 text-info\\\" ng-click=\\\"item.editing = true\\\" data-ng-show=item.canEdit title=\\\"{{\\'APP.ACTIONS.UPDATE\\'|translate}}\\\"></i></td></tr><tr data-ng-repeat-end data-ng-show=item.editing><td></td><td colspan=2><ui-select data-ng-model=item.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td><simple-date data-ng-model=item.alertDate id=date-edit name=MONITORING_DATE required></simple-date></td><td colspan=2><textarea class=form-control data-ng-disabled=vm.loading id=description-edit name=description data-ng-model=item.description required></textarea></td><td><i class=\\\"icon pe-icon pe-7s-check f-20 text-success\\\" title=\\\"{{\\'APP.ACTIONS.SUBMIT\\'|translate}}\\\" data-ng-show=\\\"item.editing && !vm.loading\\\" data-ng-click=vm.updateTrace(item)></i> <i class=\\\"icon pe-icon pe-7s-close f-20 text-warning\\\" title=\\\"{{\\'APP.ACTIONS.CANCEL\\'|translate}}\\\" data-ng-show=\\\"item.editing && !vm.loading\\\" data-ng-click=vm.cancelUpdate(item)></i></td></tr><tr data-ng-show=vm.canAdd><td></td><td colspan=2><ui-select data-ng-model=vm.trace.user ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.MODULES.TRACE.BOUNDED_USER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td><simple-date data-ng-model=vm.trace.alertDate id=DATE name=MONITORING_DATE required></simple-date><div class=\\\"row m-t-1 m-r-1 m-l-1\\\"><div class=\\\"col-sx-12 suggested-dates\\\"><button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(30) data-translate=\\\"30 days later\\\"></button> <button class=\\\"btn btn-success-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(20) data-translate=\\\"20 days later\\\"></button> <button class=\\\"btn btn-warning-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(10) data-translate=\\\"10 days later\\\"></button> <button class=\\\"btn btn-danger-alt col-xs-2 col-xs-offset-1\\\" data-ng-click=vm.setDate(5) data-translate=\\\"5 days later\\\"></button></div></div></td><td colspan=2><textarea class=form-control data-ng-disabled=vm.loading id=description name=description data-ng-model=vm.trace.description required></textarea></td><td><i class=\\\"icon pe-icon pe-7s-plus f-20 text-success\\\" title=\\\"{{\\'APP.ACTIONS.ADD\\'|translate}}\\\" data-ng-hide=vm.loading data-ng-click=vm.addTrace()></i></td></tr></table></div><div class=\\\"alert alert-warning\\\" role=alert><p><b><i class=\\\"fa fa-warning\\\"></i> کاربر گرامی! </b>ثبت هر پیگیری در سامانه به منزله‌ی تهیه و ارسال یک نامه‌ی پیگیری به شعبه مربوطه می‌باشد. لذا <b>پیش از نهایی کردن پاسخ به یک نامه‌ی پیگیری، ثبت پیگیری جدید امکان‌پذیر نیست.</b> در صورت نیاز می‌توانید پیگیری یک نامه را به کارشناسان دیگر ارجاع دهید. همچنین بر اساس تشخیص کارشناس مهلت پاسخ یک نامه توسط کارشناس مسئول پیگیری قابل تمدید است.</p><p>همچنین توجه نمایید تعیین وضعیت‌های <span class=GreenBG><i class=\\\"fa fa-check\\\"></i>&nbsp;<i><b data-ng-bind=vm.steps[3].title></b></i></span> و <span class=RedBG><i class=\\\"fa fa-thumbs-o-down\\\"></i>&nbsp;<i><b data-ng-bind=vm.steps[4].title></b></i></span> برای پیگیری به منظور اعمال نظر نهایی کارشناس بر اساس نامه‌نگاری با شعبه‌ی مربوطه بوده و قابل بازگشت نیستند.</p></div></div></div></div></div>\");\n$templateCache.put(\"app/components/monitoring/userMonitorings/userMonitorings.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.USER_MONITORINGS.LIST></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=vm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"dataTables_wrapper dt-bootstrap no-footer\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center data-ng-if=vm.monitoring.teamHeadUserName><td><div data-ng-hide=vm.editHead><label data-ng-bind=vm.monitoring.teamHead.name></label><a class=text-info data-ng-attr-title=\\\"{{\\'APP.SHARE.UPDATE\\'|translate}}\\\" data-ng-click=\\\"vm.editHead = true\\\" data-ng-show=\\\"vm.monitoring.currentStep.id != 6\\\"><span class=\\\"icon pe-icon pe-7s-note f-18 f-bold\\\"></span></a></div><div data-ng-show=vm.editHead><div class=\\\"col-xs-10 pull-right\\\"><ui-select data-ng-model=vm.newTeamHead ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.teamHeads|propsFilter : {name: $select.search,username:$select.search}\\\" refresh-delay=4><div ng-bind-html=\\\" user.name + \\' - \\' + user.username | highlight: $select.search\\\"></div></ui-select-choices></ui-select></div><div class=col-xs-2><a class=text-success data-ng-click=vm.changeTeamHead()><span class=\\\"icon pe-icon pe-7s-check f-18 f-bold\\\"></span></a></div></div></td><td data-translate=APP.MODULES.CONTRACT.MONITORING.TEAM_HEAD></td><td></td></tr><tr class=text-center data-ng-repeat=\\\"userMonitoring in vm.userMonitorings\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.USER_MONITORINGS.NAME\\'|translate\\\"><label data-ng-bind=userMonitoring.lmsUser.name data-ng-show=!vm.toggleEdit[$index]></label><select class=form-control data-ng-show=vm.toggleEdit[$index] name=expertName id=expertName ng-options=\\\"user.username as user.name for user in vm.allUsers\\\" ng-model=userMonitoring.lmsUser.username></select></td><td data-translate=APP.MODULES.CONTRACT.MONITORING.EXPERT></td><td data-title=\\\"\\'APP.MODULES.MONITORING.USER_MONITORINGS.SIGNATURE\\'|translate\\\"><img id=myimg ng-src={{vm.getSignUrl(userMonitoring.lmsUser)}} height=50 width=50 alt=\\\"امضا موجود نیست\\\"></td><td data-title=\\\"\\\"><command-buttons data-ng-if=\\\"vm.state==\\'created\\'\\\" cancel=vm.cancelEdit($index) edit=vm.editUserMonitoring(userMonitoring,$index) delete=vm.deleteUserMonitoring(userMonitoring,$index) has-edit=false has-delete=true toggle=vm.toggleEdit[$index]></command-buttons></td></tr><tr class=text-center data-ng-show=\\\"vm.state==\\'created\\' && vm.userMonitorings.length < 2\\\"><td><ui-select data-ng-model=vm.newUserMonitoring ng-disabled=vm.loading><ui-select-match allow-clear=true placeholder=\\\"{{(\\'APP.SHARE.SEARCH_PLACEHOLDER\\'|translate)}}...\\\"><span><b data-ng-bind=$select.selected.name></b> <b data-ng-bind=\\\"\\' - \\'\\\"></b> <b data-ng-bind=$select.selected.username></b> <small data-ng-if=$select.selected.province.id data-ng-bind=\\\"\\'( \\' + $select.selected.province.title + \\' )\\'\\\"></small></span></ui-select-match><ui-select-choices repeat=\\\"user in vm.users\\\" group-by=vm.groupFinder group-filter=\\\"[\\'ستاد\\',\\'استان\\',\\'شعبه\\']\\\" refresh=vm.refreshUsers($select.search) refresh-delay=4><div ng-bind-html=\\\"\\'<b>\\' + user.name + \\'</b> - \\' + user.username | highlight: $select.search\\\"></div><small data-ng-if=\\\"user.province && user.level === \\'PROVINCE\\'\\\" data-ng-bind-html=user.province.title></small> <small data-ng-if=\\\"user.branch && user.level === \\'BRANCH\\'\\\" data-ng-bind-html=user.branch.title></small></ui-select-choices></ui-select></td><td></td><td data-title=\\\"\\'APP.SHARE.OPERATION\\'|translate\\\"><a class=text-success ng-click=vm.addUserMonitoring()><i class=\\\"icon pe-icon pe-7s-plus f-18 f-bold\\\"></i></a></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/trace/trace-flow/trace-flow.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.MONITORING.FLOW_VIEW.LIST></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=vm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\" ng-if=vm.isModal></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"well well-sm\\\" ng-if=\\\"vm.actuator || vm.creator\\\"><div class=row ng-if=vm.actuator><b class=col-xs-8 data-ng-bind=vm.actuator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.ACTUATOR></div></div><div class=row ng-if=vm.creator><b class=col-xs-4 data-ng-bind=vm.createDate|jDate></b> <b class=col-xs-4 data-ng-bind=vm.creator.name></b><div class=col-xs-4 data-translate=APP.MODULES.MONITORING.FLOW_VIEW.CREATOR></div></div></div><div class=\\\"dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table\\\"><table class=\\\"hover no-footer row-border dataTable\\\" data-template-pagination=app/directives/ng-table/pagination-tpl.html data-ng-table=vm.tableParams data-show-filter=false><tr class=text-center data-ng-show=\\\"(processLog.comment != \\'Authentication Failed\\') || vm.showAll\\\" data-ng-repeat=\\\"processLog in $data\\\"><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.USERNAME\\'|translate\\\" data-ng-bind=processLog.user.name></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TRANSITION\\'|translate\\\" data-ng-bind=processLog.transition.name|traceDefinition|translate></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.DATE\\'|translate\\\" data-ng-bind=processLog.createDate|jDate></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.TIME\\'|translate\\\" data-ng-bind=processLog.createDate|timeFilter|pNumber></td><td data-title=\\\"\\'APP.MODULES.MONITORING.FLOW_VIEW.COMMENT\\'|translate\\\" data-ng-bind=\\\"processLog.comment ? (processLog.comment|translate) : \\'-\\'\\\"></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/components/usersReport/scoreDetail/scoreDetail.html\",\"<div class=module-inner><div class=module-heading><h1 class=\\\"module-title inline\\\" data-translate=APP.MODULES.USERS_REPORT.DETAILS.TITLE></h1><i class=\\\"fa fa-close pull-left cursor-pointer text-danger\\\" ng-click=vm.close() data-ng-attr-title=\\\"{{\\'APP.ACTIONS.CLOSE\\'|translate}}\\\"></i></div><div class=clearfix></div><div class=module-content><div class=module-content-inner><div class=pane-body><div class=\\\"well well-sm\\\"><div class=row><b class=col-xs-4 data-ng-bind=vm.scoreItem.action|translate></b> <b class=col-xs-4 data-ng-bind=vm.scoreItem.step.title></b> <b class=col-xs-4 data-ng-bind=vm.scoreItem.user.name></b></div></div><div class=\\\"dataTables_wrapper dt-bootstrap no-footer table-responsive flow-table\\\"><table class=\\\"hover no-footer row-border dataTable\\\"><tr class=text-center><th data-translate=APP.SHARE.INDEX></th><th><span data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\" data-translate=APP.MODULES.USERS_REPORT.DETAILS.ACTION_DATE></span> <span data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\">/</span> <span data-translate=APP.MODULES.USERS_REPORT.DETAILS.CREATE_DATE></span></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.ACTOR data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.MONITORING_NUMBER></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.CONTRACT_NUMBER></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.APPLICANT></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.PROVINCE></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.FROM_STEP data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.TO_STEP data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></th><th data-translate=APP.MODULES.USERS_REPORT.DETAILS.COMMENT data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></th></tr><tr class=text-center data-ng-repeat=\\\"scoreReport in vm.items\\\"><td data-ng-bind=$index+1|pNumber></td><td><span data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\" data-ng-bind=scoreReport.actionDate|jDate></span><br data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"><span data-ng-bind=scoreReport.lightMonitoring.createDate|jDate></span></td><td data-ng-bind=\\\"(scoreReport.processLog.user.name|pNumber) + \\' - \\' + (scoreReport.processLog.user.username|pNumber)\\\" data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></td><td data-ng-bind=scoreReport.lightMonitoring.number|pNumber></td><td data-ng-bind=scoreReport.lightMonitoring.contract.number|pNumber></td><td data-ng-bind=scoreReport.lightMonitoring.contract.companyName></td><td data-ng-bind=scoreReport.lightMonitoring.contract.province.title></td><td data-ng-bind=scoreReport.processLog.fromStepId|monitoringStep data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></td><td data-ng-bind=scoreReport.processLog.toStepId|monitoringStep data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></td><td data-ng-bind=scoreReport.processLog.comment data-ng-if=\\\"vm.scoreItem.action != \\'cartable\\'\\\"></td></tr></table></div></div></div></div></div>\");\n$templateCache.put(\"app/main/header/header-notification/header-notification.html\",\"<ul class=\\\"nav navbar-top-links navbar-left\\\"><li class=dropdown uib-dropdown><a class=\\\"dropdown-toggle pointer\\\" data-toggle=dropdown uib-dropdown-toggle><i class=\\\"fa fa-user fa-fw\\\"></i> <span data-ng-bind=vm.user.name></span> <i class=\\\"fa fa-caret-down\\\"></i></a><ul class=\\\"dropdown-menu dropdown-user\\\" uib-dropdown-menu><li><a data-ui-sref=root.users.profile({username:vm.user.username})><i class=\\\"fa fa-user-circle fa-fw\\\"></i> <span data-translate=APP.MODULES.AUTH.PROFILE></span></a></li><li><a data-ng-click=vm.logout();><i class=\\\"fa fa-sign-out fa-fw\\\"></i> <span data-translate=APP.MODULES.AUTH.LOGOUT></span></a></li></ul><!-- /.dropdown-user --></li><!-- /.dropdown --></ul>\");\n$templateCache.put(\"app/components/users/filters/isEnabled.html\",\"<toggle data-ng-model=params.filter()[name] on=\\\"{{\\'APP.SHARE.ENABLE\\'|translate}}\\\" onstyle=\\\"btn-success vazir\\\" off=\\\"{{\\'APP.SHARE.DISABLE\\'|translate}}\\\" offstyle=\\\"btn-danger vazir\\\"></toggle>\");\n$templateCache.put(\"app/main/sidebar/sidebar-search/sidebar-search.html\",\"<li class=sidebar-search><div class=\\\"input-group custom-search-form\\\"><input type=text ng-model=vm.query class=form-control placeholder=\\\"جستجو ...\\\"> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button><i class=\\\"fa fa-search\\\"></i></button></span></div></li>\");}]);"],"sourceRoot":"/source/"}